<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>- shesl's blog</title><meta name=Description content="佘崧林同学的碎碎念博客"><meta property="og:title" content><meta property="og:description" content="学习地址： 国防科技大学编译原理 MOOC 课程 词法分析 词法分析器 任务 词法分析的任务： 从左到右逐个字符地对源程序进行扫描，产生一个单词符号序列 执行词法分"><meta property="og:type" content="article"><meta property="og:url" content="http://shesl-meow.github.io/book/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/1.%E8%AF%8D%E6%B3%95%E5%88%86%E6%9E%90/"><meta property="og:image" content="http://shesl-meow.github.io/avatar.png"><meta property="article:section" content="book"><meta property="og:site_name" content="shesl's blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://shesl-meow.github.io/avatar.png"><meta name=twitter:title content><meta name=twitter:description content="学习地址： 国防科技大学编译原理 MOOC 课程 词法分析 词法分析器 任务 词法分析的任务： 从左到右逐个字符地对源程序进行扫描，产生一个单词符号序列 执行词法分"><meta name=application-name content="shesl's blog"><meta name=apple-mobile-web-app-title content="shesl's blog"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=http://shesl-meow.github.io/book/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/1.%E8%AF%8D%E6%B3%95%E5%88%86%E6%9E%90/><link rel=prev href=http://shesl-meow.github.io/book/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/3.%E5%B1%9E%E6%80%A7%E6%96%87%E6%B3%95%E5%92%8C%E8%AF%AD%E6%B3%95%E5%88%B6%E5%AF%BC%E7%BF%BB%E8%AF%91/><link rel=next href=http://shesl-meow.github.io/book/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/0.%E7%BC%96%E8%AF%91%E5%99%A8%E7%9A%84%E5%B7%A5%E4%BD%9C/><link rel=stylesheet href=/css/style.min.fa85115dce490a9d0bf009e2892b6d42439bdea75160d08cddcb0b97c8def676.css integrity="sha256-+oURXc5JCp0L8AniiSttQkOb3qdRYNCM3csLl8je9nY="><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"http:\/\/shesl-meow.github.io\/book\/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B\/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86\/1.%E8%AF%8D%E6%B3%95%E5%88%86%E6%9E%90\/"},"genre":"book","wordcount":3989,"url":"http:\/\/shesl-meow.github.io\/book\/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B\/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86\/1.%E8%AF%8D%E6%B3%95%E5%88%86%E6%9E%90\/","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"佘崧林"},"description":""}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="shesl's blog">shesl-meow</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>博客 </a><a class=menu-item href=/tags/>标签 </a><a class=menu-item href=/categories/>分类 </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder=搜索文章标题或内容... id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span>
</span><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="shesl's blog">shesl-meow</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=搜索文章标题或内容... id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></div><a class=menu-item href=/posts/ title>博客</a><a class=menu-item href=/tags/ title>标签</a><a class=menu-item href=/categories/ title>分类</a><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题>
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class="page single special"><h1 class="single-title animate__animated animate__pulse animate__faster"></h1><div class=content id=content><blockquote><p>学习地址：</p><ul><li><a href="https://www.icourse163.org/learn/NUDT-1003101005?tid=1003312002#/learn/content?type=detail&id=1004848102" target=_blank rel="noopener noreffer">国防科技大学编译原理 MOOC 课程</a></li></ul></blockquote><h1 id=词法分析>词法分析</h1><h2 id=词法分析器>词法分析器</h2><h3 id=任务>任务</h3><p>词法分析的任务：</p><blockquote><p>从左到右逐个字符地对源程序进行扫描，产生一个单词符号序列</p></blockquote><p>执行词法分析任务的叫做<strong>词法分析器</strong>（Lexical Analyzer）</p><h3 id=功能>功能</h3><p>词法分析器的功能：</p><blockquote><p>输入源程序、输出单词符号</p></blockquote><p>单词符号种类：</p><ul><li><p>基本字，或关键字：</p></li><li><p>标识符：用来表示各种用户定义的名字</p></li><li><p>常数</p></li><li><p>运算符：<code>+</code>、<code>-</code>、<code>*</code>、<code>/</code></p></li><li><p>分界符：<code>,</code>、<code>;</code>&mldr;</p></li></ul><p>词法分析器的输出：</p><ul><li>输出的单词符号的表示形式 → <code>单词种别</code>、<code>单词自身的值</code></li></ul><h3 id=与语法分析>与语法分析</h3><p><img class=lazyload src=/svg/loading.min.svg data-src=../lexical-vs-grammar.png data-srcset="../lexical-vs-grammar.png, ../lexical-vs-grammar.png 1.5x, ../lexical-vs-grammar.png 2x" data-sizes=auto alt=../lexical-vs-grammar.png title=1544527957333></p><p>体现了 <code>分解</code> 和 <code>权衡</code> 两种计算思维。</p><h3 id=结构>结构</h3><ol><li><p>预处理子程序：剔除无用的空白、跳格等编辑性字符。放入扫描缓冲区。</p></li><li><p>扫描器通过 <code>起点指示器</code> 和 <code>搜索指示器</code> 两个指针对扫描缓冲区进行扫描。</p><ul><li><em>NOTE</em>：解决标识符过长问题 → 将缓冲区分为两个半区，互补使用。半区的缓冲区长度就是程序允许的标识符的最大长度。</li></ul></li></ol><h3 id=单词符号的识别>单词符号的识别</h3><ol><li><p>超前搜索</p><p>现代语言一般加入几点限制，来避免超前搜索：</p><ol><li><p>所有基本字都是保留字，用户不能用它们作为自己的标识符。</p></li><li><p>基本字作为特殊的标识符来处理，使用<strong>保留字表</strong>。</p></li><li><p>如果基本字、标识符和常数（或标号）之间没有确定的运算符或界符作为间隔，则必须使用一个空白作为间隔。</p></li></ol></li><li><p>状态转换图。用于识别（或接受）一定的字符串：若存在一条从初态到某一终态的道路，且这条道路上的所有弧上的表机腹连接成的字等于 $$\alpha$$，则称 $$\alpha$$ 被该状态转换图所识别（接受）。</p><p>将状态转换图一般化：</p><ul><li><p>变量 <code>curState</code> 用于保存现有状态</p></li><li><p>用二维数组表示状态图：<code>stateTrans[state][ch]</code></p></li></ul></li></ol><h3 id=设计>设计</h3><ol><li>设计程序设计语言的单词规范</li><li>设计程序语言对应的状态转换图</li><li>根据状态转换图，并根据三种分析模式，编程实现代码<ul><li>该过程十分有规律，那么是否有自动生成词法分析器的方法呢</li></ul></li></ol><h2 id=自动生成词法分析器>自动生成词法分析器</h2><p>基础理论：正规表达式和有限自动机理论。</p><h3 id=概念>概念</h3><p>基本概念：</p><ul><li><p><strong>字母表</strong>：一个有穷字符集，记作 $$\Sigma$$</p></li><li><p><strong>字符串</strong>：$$\Sigma$$ 中的字符构成的有穷序列，或称 <strong>字</strong></p></li><li><p><strong>空字</strong>：不包含任何字符的序列，记作 $$\epsilon$$</p></li><li><p>$$\Sigma^{*}$$ 表示 $$\Sigma$$ 上所有字的集合，包含空字 $$\epsilon$$</p></li><li><p>子集的<strong>连接</strong>（积）：$$UV = {\alpha\beta | \alpha \in U & \beta \in V}\ where\ U,V \subseteq \Sigma^{*}$$</p></li><li><p>V 的<strong>闭包</strong>：$${\displaystyle V^{*} = \cup^{+\infin}_{i=0} V_i }$$</p></li><li><p>V 的<strong>正规闭包</strong>：$$V^{+} = VV^{*}$$</p></li></ul><p>正规式和正规集：</p><ul><li><p>关系：</p><ul><li>正规集可以用正规集表示</li><li>正规式是表示正规集的一种方法</li><li>一个字集合是正规式 $$\Leftrightarrow$$ 他能用正规式表示</li></ul></li><li><p>递归定义：</p><ol><li>$$\epsilon$$ 和 $$\varnothing$$ 都是 $$\Sigma$$ 上的正规式，他们所表示的正规集是 $${\epsilon}$$ 和 $$\varnothing$$。</li><li>任何 $$a \in \Sigma$$，$$a$$ 是 $$\Sigma$$ 上的正规式，他表示的正规集为 $${a}$$</li><li>假定 $$e_1$$ 和 $$e_2$$ 都是 $$\Sigma$$ 上的正规式，他们所表示的正规集为 $$L(e_1)$$ 和 $$L(e_2)$$，则：<ol><li>$$(e_1 | e_2)$$ 为正规式，他们所表示的正规集为 $$L(e_1) \cup L(e_2)$$</li><li>$$(e_1 \cdot e_2)$$ 为正规式，他们所表示的正规集为 $$L(e_1)L(e_2)$$</li><li>$$(e_1)^{<em>}$$ 为正规式，他所表示的正规集为 $$(L(e_1))^{</em>}$$</li></ol></li><li><strong>Define</strong>：仅有有限次使用上述三步骤而定义的表达式才是 $$\Sigma$$ 上的正规式，仅由这些正规式表示的字集才是 $$\Sigma$$ 上的正规集。</li></ol></li><li><p><strong>等价</strong>：若两个正规式所表示的正规集相同，则这两个正规式等价。</p></li></ul><h3 id=确定有限自动机-dfa>确定有限自动机 DFA</h3><p>对状态转换图进行形式化定义，就得到了确定有限自动机的概念：</p><ul><li><p>确定有限自动机 $$M$$ 可以表示为一个五元组，$$M = (S, \Sigma, f, S_0, F)$$ ，其中：</p><ol><li>$$S$$ ：有穷状态集；</li><li>$$\Sigma$$：输入字母表（有穷）；</li><li>$$f$$ ：状态转换函数，为 $$S \times \Sigma \rightarrow S$$ 的单值部分映射；</li><li>$$S_0$$：是唯一的一个初态，$$S_0 \in S$$</li><li>$$F$$：终态集（可空）</li></ol></li><li><p>如果对于 $$\Sigma^{*}$$ 中的任何字 $$\alpha$$，若存在一条从初态到某一终态的道路，且这条路上所有弧上的标记符连接成的字等与 $$\alpha$$，则称 $$\alpha$$ 为 DFA M 所识别（接受）。DFA M 所识别的字的全体记位 $$L(M)$$</p></li></ul><h3 id=非确定有限自动机-nfa>非确定有限自动机 NFA</h3><p>NFA 与 DFA 有着相似的定义，不同点在于上面的第 3、4 点。转换函数的终态不确定，体现了非确定的含义。</p><ul><li><p>确定非有限自动机 $$M$$ 可以表示为一个五元组，$$M = (S, \Sigma, f, S_0, F)$$ ，其中：</p><ol><li>$$S$$ ：有穷状态集；</li><li>$$\Sigma$$：输入字母表（有穷）；</li><li>$$f$$ ：状态转换函数，为 $$S \times \Sigma^{*} \rightarrow 2^{S}$$ 的单值部分映射；</li><li>$$S_0$$：是一个非空初态集，$$S_0 \subseteq S$$</li><li>$$F$$：终态集（可空）</li></ol></li><li><p>对于 $$\Sigma^{*}$$ 中的任何字 $$\alpha$$，若存在一条从初态到某一终态的道路，且这条道路上所有弧上的标记字连接成的字等于 $$\alpha$$（忽略那些标记为 $$\epsilon$$ 的弧），则称 $$\alpha$$ 为 NFA M 所接受。NFA M 所识别的字的全体记为 $$L(M)$$</p></li></ul><h3 id=nfa-vs-dfa>NFA vs. DFA</h3><h4 id=区别>区别</h4><p>从状态图看他们的区别：</p><ul><li><p>NFA 可以有多个初态。</p></li><li><p>弧上的标记可以是 $$\Sigma^{*}$$ 中的一个字（甚至可以是一个正规式），而不一定是单个字符。</p></li><li><p>同一个字可能出现在同状态射出的多条弧上。</p></li><li><p>DFA 是 NFA 的特例。</p></li></ul><h4 id=等价>等价</h4><blockquote><p>对于任何两个有限自动机 M 和 M&rsquo;，如果 $$L(M) = L(M&rsquo;)$$，则称 M 与 M&rsquo; 等价。</p></blockquote><p>自动机理论中的结论：</p><ul><li>自动机理论中的一个重要结论：判断两个自动机等价性的算法是存在的。</li><li>DFA 与 NFA 识别能力是相同的</li></ul><p>根据定义我们知道，DFA 是特殊的 NFA，所以我们只需要一个将 NFA 确定化的算法。</p><p>NFA 确定化：假定 NFA $$M = (S, \Sigma, f, S_0, F)$$，我们对 M 的状态转换图进行如下改造：</p><ul><li><p>等价变换 1：引进新的初始结点 X 和终态结点 Y，$$X, Y \notin S$$，从 X 到 $$S_0$$ 中任意状态结点连一条 $$\epsilon$$ 箭弧，从 F 中任意状态结点引一条 $$\epsilon$$ 箭弧到 Y → <strong>解决初始状态唯一性问题</strong>。</p></li><li><p>等价变换 2：对 M 的状态转换图进一步施加替换，其中 k 是新引入的状态 → <strong>简化了图上的标记</strong>。</p></li><li><p>等价变换 3：算法，<strong>子集法</strong> → <strong>解决 $$\epsilon$$ 弧和转换关系</strong>：</p><ul><li><p>概念 $$\epsilon$$-闭包（$$\epsilon-closure(I)$$）：设 I 是 S 的一个子集，定义 I 的 $$\epsilon$$-闭包为：</p><ul><li>若 $$s \in I$$，则 $$s \in \epsilon-closure(I)$$；</li><li>若 $$s \in I$$，从 s 出发经过任意条 $$\epsilon$$ 弧能够达到的任何状态 $$s&rsquo;$$ 都属于 $$\epsilon-closure(I)$$</li></ul></li><li><p>定义 $$I_a = \epsilon-closure(J)\ where\ a \in \Sigma, J 为 I中的状态经过一条 a 弧到达的状态集合$$</p></li><li><p>算法，<strong>子集法</strong>：不失一般性，设字母表只包含两个 a 和 b，我们构造一张计算状态集的转换表：</p><ol><li><p>首先，置第 1 列为 $$\epsilon-closure({X})$$，并求出这一列的 $$I_a$$ 和 $$I_b$$</p></li><li><p>然后检查这两个 $$I_a$$ 和 $$I_b$$，看他们是否在表的第一列中出现，把未曾出现的填入后面的空行的第 1 列上，求出每行第 2，3 列上的集合。</p></li><li><p>重复上述过程，直到所有第 2，3 的子集均出现在第一列为止。</p></li><li><p>该转换表唯一刻画了一个 DFA M，其中初态是 $$\epsilon-closure(X)$$，终态是含有原终态 Y 的子集。</p></li></ol></li></ul></li></ul><h3 id=dfa-的化简>DFA 的化简</h3><p>概念：</p><ul><li>DFA 的<strong>化简</strong>（最小化）：对于给定的 DFA M，寻找一个状态数比 M 少的 DFA M&rsquo;，使得 $$L(M) = L(M&rsquo;)$$。</li><li><strong>状态的等价性</strong>：假设 s 和 t 为 M 的两个状态，如果从状态 s 出发能读出某个字 $$\alpha$$ 而停止于终态，那么同样，从 t 出发也能读出 $$\alpha$$ 而停止于终态，反之亦然，则称状态 s 和 t 等价。</li><li><strong>状态可区别</strong>：如果两个状态不等价，则称他们是可区别的。</li></ul><p>DFA 化简：</p><ul><li><p>基本思想：把 M 的状态集划分成一些不相交的子集，使得任何两个不同子集的状态是可区别的，而同一子集内的任何两个状态是等价的。最后，让每个子集选出一个代表，同时消去其他状态。</p></li><li><p>化简算法：</p><ol><li><p>首先把 S 划分为终态和非终态两个子集，形成基本划分 $$\Pi$$</p></li><li><p>假定到某一时刻，$$\Pi$$ 含有 m 个子集，记作：$$\Pi = {I^{(1)}, I^{(2)}, &mldr;, I^{(m)}}$$，检查 $$\Pi$$ 中的每个子集是否可以进一步划分：</p><ol><li><p>对某个 $$I^{i}$$，若存在一个输入字符 a 使得 $$I_a^{(i)}$$ 不会包含在现行的 $$\Pi$$ 的某个子集 $$I^{(j)}$$ 中，则应该至少把 $$I^{(i)}$$ 分为两个部分。</p><p>若 $$s_1, s_2 \in I^{(i)}, a \in \Sigma$$，且 $$f(s_1, a) = t_1, f(s_2, a)=t_2$$ ，$$t_1, t_2$$ 属于不同子集，则将 $$I^{(i)}$$ 分成两个部分：</p><ul><li>$$I^{(i1)} = {s | s \in I^{(i)} 且 s 经 a 弧到达 t，且 t 与 t_1 属于现行 \Pi 中的同一子集}$$</li><li>$$I^{(i2)} = I^{i} - I^{(i1)}$$</li></ul></li><li><p>一般地，对某个 a 和 $$I^{(i)}$$，若 $$I^{(i)}$$ 落入现行 $$\Pi$$ 中的 N 个不同子集，则应该把 $$I^{i}$$ 划分成 N 个不相交的组，使得每个组 $$J$$ 的 $$J_a$$ 都落入 $$\Pi$$ 的同一子集。</p></li></ol></li><li><p>重复步骤 2，直到 $$\Pi$$ 所含的子集数目不再增长。</p></li><li><p>对于上述最后划分 $$\Pi$$ 中的每个子集，我们选取每个子集中的一个状态代表其他状态，则可以得到化简之后的 NFA M‘。</p></li></ol></li></ul><h3 id=正规式和有限自动机的等价性>正规式和有限自动机的等价性</h3><p>一个正规式 r 与一个有限自动机 M 等价 $$\Leftrightarrow$$ $$L(r) = L(M)$$</p><p>定理：对于 $$\Sigma$$ 上任一 NFA M，都存在一个 $$\Sigma$$ 上的正规式 r，使得 $$L(r) = L(M)$$。证明算法如下：</p><ul><li><p>假定 NFA $$M = &lt;S, \Sigma, \delta, S_0, F>$$，我们对 M 的状态图进行如下改造：</p><ol><li><p>在 M 的状态图上加入两个状态 X 和 Y， 从 X 用 $$\epsilon$$ 弧连接到 M 的所有初态结点，从 M 的所有终态结点用 $$\epsilon$$ 弧连接到 Y，从而形成一个新的 NFA，记作 M&rsquo;，他只有一个初态 X 和一个终态 Y，显然 $$L(M) = L(M&rsquo;)$$</p></li><li><p>将 $${\displaystyle (i) \xrightarrow{r_1} (j) \xrightarrow{r_2} (k)}$$ 替换为 $${\displaystyle (i) \xrightarrow{r_1 \cdot r_2} (k)}$$</p></li><li><p>将<img class=lazyload src=/svg/loading.min.svg data-src=../trans-diagram-OR.png data-srcset="../trans-diagram-OR.png, ../trans-diagram-OR.png 1.5x, ../trans-diagram-OR.png 2x" data-sizes=auto alt=../trans-diagram-OR.png title=1545343724085> 替换为 $$(i) \xrightarrow{r_1 | r_2} (j)$$</p></li><li><p>将 <img class=lazyload src=/svg/loading.min.svg data-src=../trans-diagram-CYCLE.png data-srcset="../trans-diagram-CYCLE.png, ../trans-diagram-CYCLE.png 1.5x, ../trans-diagram-CYCLE.png 2x" data-sizes=auto alt=../trans-diagram-CYCLE.png title=1545343931497> 替换为 $$(i) \xrightarrow{r_1 \cdot r_2* \cdot r_3} (k)$$</p></li><li><p>重复上述 2-4 规则，直至图中只剩下两个结点一条弧。最后 X 到 Y 上的弧标记的正规式即为自动机所对应的正规式 r。</p></li></ol></li></ul><p>定理：对于任何一个正规式 r，都存在一个 NFA M，使得 $$L(M) = L(r)$$，并且 M 只有一个初态和一个终态，而且没有从终态出发的箭弧。对运算符数目 k 进行数学归纳法证明，证明如下：</p><ul><li><p>若 r 具有 0 个运算符，则 $$r = \epsilon$$ 或 $$r = \varnothing$$ 或 $$r = a\ where\ a \in \Sigma$$。很显然容易构造这样满足要求的 NFA。</p></li><li><p>假设对于运算符数目少于 $$k(k \ge 1)$$ 的正规式成立，当 r 中含有 k 个运算符时，r 有三种情况，显然都成立。</p></li><li><p><em>PostScript</em>：上述证明实际上也是将正规表达式构造成 NFA 的算法。</p></li></ul><h2 id=词法分析自动生成-lex>词法分析自动生成 <code>LEX</code></h2><p>编译流程大致如下：</p><p><img class=lazyload src=/svg/loading.min.svg data-src=../mermaid-flex-demo.svg data-srcset="../mermaid-flex-demo.svg, ../mermaid-flex-demo.svg 1.5x, ../mermaid-flex-demo.svg 2x" data-sizes=auto alt=../mermaid-flex-demo.svg title=flex></p><h3 id=简单使用>简单使用</h3><p><code>LEX</code> 官方手册如下：http://dinosaur.compilertools.net/lex/index.html。以下介绍简单规范：</p><ul><li><p>LEX 编写主要分为 <code>AUXILIARY DEFINITION</code> （辅助定义）和 <code>RECOGNITION RULES</code> （识别规则）两个部分</p><ol><li><p>辅助定义：以文法形式给常用正规式进行命名，比如：<code>digit->1|2|3|4|5|6|7|8|9|0</code></p></li><li><p>识别规则：都由两部分组成，一个正规式和一小段程序代码。</p></li></ol></li></ul><h3 id=工作流程>工作流程</h3><p><code>LEX</code> 工作过程：</p><ul><li>对于每一个识别规则 $$P_i$$ 构造一个响应的非确定有限自动机 $$M_i$$；</li><li>通过一个 $$\epsilon$$ 弧将这些自动机连接成一个新的 NFA；</li><li>把 NFA 确定化、最小化，生成该 DFA 的状态转换表和控制执行程序。</li></ul></div><div id=comments><div id=valine class=comment></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://valine.js.org/>Valine</a>.</noscript></div></div></div></main><footer class=footer><div class=footer-container><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2022</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://shesl-meow.github.io target=_blank>佘崧林</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title=回到顶部><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title=查看评论><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><link rel=stylesheet href=/lib/valine/valine.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/contrib/copy-tex.min.css><script type=text/javascript src=https://cdn.jsdelivr.net/npm/valine@1.4.18/dist/Valine.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/algoliasearch@4.13.0/dist/algoliasearch-lite.umd.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.1/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/contrib/auto-render.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/contrib/copy-tex.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/contrib/mhchem.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"复制到剪贴板",maxShownLines:50},comment:{valine:{appId:"zDVJohJIQbD6f3W267xtaYRC-gzGzoHsz",appKey:"ewsfU9ocNOeuvt0MzONe6yKx",avatar:"mp",el:"#valine",emojiCDN:"https://cdn.jsdelivr.net/npm/emoji-datasource-google@14.0.0/img/google/64/",emojiMaps:{100:"1f4af.png",alien:"1f47d.png",anger:"1f4a2.png",angry:"1f620.png",anguished:"1f627.png",astonished:"1f632.png",black_heart:"1f5a4.png",blue_heart:"1f499.png",blush:"1f60a.png",bomb:"1f4a3.png",boom:"1f4a5.png",broken_heart:"1f494.png",brown_heart:"1f90e.png",clown_face:"1f921.png",cold_face:"1f976.png",cold_sweat:"1f630.png",confounded:"1f616.png",confused:"1f615.png",cry:"1f622.png",crying_cat_face:"1f63f.png",cupid:"1f498.png",dash:"1f4a8.png",disappointed:"1f61e.png",disappointed_relieved:"1f625.png",dizzy:"1f4ab.png",dizzy_face:"1f635.png",drooling_face:"1f924.png",exploding_head:"1f92f.png",expressionless:"1f611.png",face_vomiting:"1f92e.png",face_with_cowboy_hat:"1f920.png",face_with_hand_over_mouth:"1f92d.png",face_with_head_bandage:"1f915.png",face_with_monocle:"1f9d0.png",face_with_raised_eyebrow:"1f928.png",face_with_rolling_eyes:"1f644.png",face_with_symbols_on_mouth:"1f92c.png",face_with_thermometer:"1f912.png",fearful:"1f628.png",flushed:"1f633.png",frowning:"1f626.png",ghost:"1f47b.png",gift_heart:"1f49d.png",green_heart:"1f49a.png",grimacing:"1f62c.png",grin:"1f601.png",grinning:"1f600.png",hankey:"1f4a9.png",hear_no_evil:"1f649.png",heart:"2764-fe0f.png",heart_decoration:"1f49f.png",heart_eyes:"1f60d.png",heart_eyes_cat:"1f63b.png",heartbeat:"1f493.png",heartpulse:"1f497.png",heavy_heart_exclamation_mark_ornament:"2763-fe0f.png",hole:"1f573-fe0f.png",hot_face:"1f975.png",hugging_face:"1f917.png",hushed:"1f62f.png",imp:"1f47f.png",innocent:"1f607.png",japanese_goblin:"1f47a.png",japanese_ogre:"1f479.png",joy:"1f602.png",joy_cat:"1f639.png",kiss:"1f48b.png",kissing:"1f617.png",kissing_cat:"1f63d.png",kissing_closed_eyes:"1f61a.png",kissing_heart:"1f618.png",kissing_smiling_eyes:"1f619.png",laughing:"1f606.png",left_speech_bubble:"1f5e8-fe0f.png",love_letter:"1f48c.png",lying_face:"1f925.png",mask:"1f637.png",money_mouth_face:"1f911.png",nauseated_face:"1f922.png",nerd_face:"1f913.png",neutral_face:"1f610.png",no_mouth:"1f636.png",open_mouth:"1f62e.png",orange_heart:"1f9e1.png",partying_face:"1f973.png",pensive:"1f614.png",persevere:"1f623.png",pleading_face:"1f97a.png",pouting_cat:"1f63e.png",purple_heart:"1f49c.png",rage:"1f621.png",relaxed:"263a-fe0f.png",relieved:"1f60c.png",revolving_hearts:"1f49e.png",right_anger_bubble:"1f5ef-fe0f.png",robot_face:"1f916.png",rolling_on_the_floor_laughing:"1f923.png",scream:"1f631.png",scream_cat:"1f640.png",see_no_evil:"1f648.png",shushing_face:"1f92b.png",skull:"1f480.png",skull_and_crossbones:"2620-fe0f.png",sleeping:"1f634.png",sleepy:"1f62a.png",slightly_frowning_face:"1f641.png",slightly_smiling_face:"1f642.png",smile:"1f604.png",smile_cat:"1f638.png",smiley:"1f603.png",smiley_cat:"1f63a.png",smiling_face_with_3_hearts:"1f970.png",smiling_imp:"1f608.png",smirk:"1f60f.png",smirk_cat:"1f63c.png",sneezing_face:"1f927.png",sob:"1f62d.png",space_invader:"1f47e.png",sparkling_heart:"1f496.png",speak_no_evil:"1f64a.png",speech_balloon:"1f4ac.png","star-struck":"1f929.png",stuck_out_tongue:"1f61b.png",stuck_out_tongue_closed_eyes:"1f61d.png",stuck_out_tongue_winking_eye:"1f61c.png",sunglasses:"1f60e.png",sweat:"1f613.png",sweat_drops:"1f4a6.png",sweat_smile:"1f605.png",thinking_face:"1f914.png",thought_balloon:"1f4ad.png",tired_face:"1f62b.png",triumph:"1f624.png",two_hearts:"1f495.png",unamused:"1f612.png",upside_down_face:"1f643.png",weary:"1f629.png",white_frowning_face:"2639-fe0f.png",white_heart:"1f90d.png",wink:"1f609.png",woozy_face:"1f974.png",worried:"1f61f.png",yawning_face:"1f971.png",yellow_heart:"1f49b.png",yum:"1f60b.png",zany_face:"1f92a.png",zipper_mouth_face:"1f910.png",zzz:"1f4a4.png"},enableQQ:!1,highlight:!0,lang:"zh-CN",pageSize:10,placeholder:"你的评论 ...",recordIP:!0,serverURLs:"https://zdvjohji.lc-cn-n1-shared.com",visitor:!0}},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{algoliaAppID:"",algoliaIndex:"",algoliaSearchKey:"",highlightTag:"em",maxResultLength:10,noResultsFound:"没有找到结果",snippetLength:30,type:"algolia"}}</script><script type=text/javascript src=/js/theme.min.c1d5acc03abc8af9ee0a42aa4e942566a338a3e29d21b6c9f11536101f6914ad.js integrity="sha256-wdWswDq8ivnuCkKqTpQlZqM4o+KdIbbJ8RU2EB9pFK0="></script></body></html>