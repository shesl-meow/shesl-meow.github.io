<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>编译器的工作 - shesl's blog</title><meta name=Description content="佘崧林同学的碎碎念博客"><meta property="og:title" content="编译器的工作"><meta property="og:description" content="参考网址： http://www.ntu.edu.sg/home/ehchua/programming/cpp/gcc_make.html https://linux.die.net/man/1/gcc https://sourceware.org/ml/binutils/2009-08/msg00193.html https://web.stanford.edu/class/cs193d/handouts/make.pdf 编译器的主要流程 .img{width: 100%} 一个现代编译器的主要流程如下：（以 gcc 为例） 另外，使用以下命令可以查看 gcc 使用的所有命令： 1 $ gcc -v example.c 该命令"><meta property="og:type" content="article"><meta property="og:url" content="http://shesl-meow.github.io/note/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/0.%E7%BC%96%E8%AF%91%E5%99%A8%E7%9A%84%E5%B7%A5%E4%BD%9C/"><meta property="og:image" content="http://shesl-meow.github.io/avatar.png"><meta property="article:section" content="note"><meta property="article:published_time" content="2018-12-24T15:08:53+08:00"><meta property="article:modified_time" content="2018-12-24T15:08:53+08:00"><meta property="og:site_name" content="shesl's blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://shesl-meow.github.io/avatar.png"><meta name=twitter:title content="编译器的工作"><meta name=twitter:description content="参考网址： http://www.ntu.edu.sg/home/ehchua/programming/cpp/gcc_make.html https://linux.die.net/man/1/gcc https://sourceware.org/ml/binutils/2009-08/msg00193.html https://web.stanford.edu/class/cs193d/handouts/make.pdf 编译器的主要流程 .img{width: 100%} 一个现代编译器的主要流程如下：（以 gcc 为例） 另外，使用以下命令可以查看 gcc 使用的所有命令： 1 $ gcc -v example.c 该命令"><meta name=application-name content="shesl's blog"><meta name=apple-mobile-web-app-title content="shesl's blog"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=http://shesl-meow.github.io/note/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/0.%E7%BC%96%E8%AF%91%E5%99%A8%E7%9A%84%E5%B7%A5%E4%BD%9C/><link rel=next href=http://shesl-meow.github.io/note/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/5.%E7%AC%A6%E5%8F%B7%E8%A1%A8/><link rel=stylesheet href=/css/style.min.fa85115dce490a9d0bf009e2892b6d42439bdea75160d08cddcb0b97c8def676.css integrity="sha256-+oURXc5JCp0L8AniiSttQkOb3qdRYNCM3csLl8je9nY="><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"编译器的工作","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"http:\/\/shesl-meow.github.io\/note\/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B\/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86\/0.%E7%BC%96%E8%AF%91%E5%99%A8%E7%9A%84%E5%B7%A5%E4%BD%9C\/"},"genre":"note","keywords":"","wordcount":2740,"url":"http:\/\/shesl-meow.github.io\/note\/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B\/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86\/0.%E7%BC%96%E8%AF%91%E5%99%A8%E7%9A%84%E5%B7%A5%E4%BD%9C\/","datePublished":"2018-12-24T15:08:53+08:00","dateModified":"2018-12-24T15:08:53+08:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"佘崧林"},"description":""}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="shesl's blog">shesl-meow</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>博客 </a><a class=menu-item href=/tags/>标签 </a><a class=menu-item href=/categories/>分类 </a><a class=menu-item href=/note/>笔记 </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder=搜索文章标题或内容... id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span>
</span><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="shesl's blog">shesl-meow</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=搜索文章标题或内容... id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></div><a class=menu-item href=/posts/ title>博客</a><a class=menu-item href=/tags/ title>标签</a><a class=menu-item href=/categories/ title>分类</a><a class=menu-item href=/note/ title>笔记</a><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题>
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class="page single special"><h1 class="single-title animate__animated animate__pulse animate__faster">编译器的工作</h1><div class=content id=content><blockquote><p>参考网址：</p><ul><li><a href=http://www.ntu.edu.sg/home/ehchua/programming/cpp/gcc_make.html target=_blank rel="noopener noreffer">http://www.ntu.edu.sg/home/ehchua/programming/cpp/gcc_make.html</a></li><li><a href=https://linux.die.net/man/1/gcc target=_blank rel="noopener noreffer">https://linux.die.net/man/1/gcc</a></li><li><a href=https://sourceware.org/ml/binutils/2009-08/msg00193.html target=_blank rel="noopener noreffer">https://sourceware.org/ml/binutils/2009-08/msg00193.html</a></li><li><a href=https://web.stanford.edu/class/cs193d/handouts/make.pdf target=_blank rel="noopener noreffer">https://web.stanford.edu/class/cs193d/handouts/make.pdf</a></li></ul></blockquote><h2 id=编译器的主要流程>编译器的主要流程</h2><style>.img{width:100%}</style><p>一个现代编译器的主要流程如下：（以 <code>gcc</code> 为例）</p><p><img class=lazyload src=/svg/loading.min.svg data-src=../compiler-work.svg data-srcset="../compiler-work.svg, ../compiler-work.svg 1.5x, ../compiler-work.svg 2x" data-sizes=auto alt=../compiler-work.svg title=compiler></p><p><img class=lazyload src=/svg/loading.min.svg data-src=../compiler-work2.png data-srcset="../compiler-work2.png, ../compiler-work2.png 1.5x, ../compiler-work2.png 2x" data-sizes=auto alt=../compiler-work2.png title=compiler2></p><p>另外，使用以下命令可以查看 <code>gcc</code> 使用的所有命令：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ gcc -v example.c
</span></span></code></pre></td></tr></table></div></div><p>该命令的输出会打印在 <code>stderr</code> 上，若希望在文件中阅读该信息，可以使用以下命令：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ gcc -v example.c 2&gt; verbose_gcc.txt
</span></span></code></pre></td></tr></table></div></div><h2 id=预处理器的工作>预处理器的工作</h2><p>从<a href=https://zh.wikipedia.org/wiki/%E9%A2%84%E5%A4%84%E7%90%86%E5%99%A8 target=_blank rel="noopener noreffer">维基百科</a>上的定义：<strong>预处理器</strong>是程序中处理输入数据，产生能用来输入到其他程序的数据的程序。输出被称为输入数据<strong>预处理过</strong>的形式，常用在之后的程序比如编译器中。C 预处理器是最常见的预处理器。</p><h3 id=c-预处理器>C 预处理器</h3><p><strong>C 预处理器</strong>不是编译器的组成部分，但是它是编译过程中一个单独的步骤。简言之，C 预处理器只不过是一个文本替换工具而已，它们会指示编译器在实际编译之前完成所需的预处理。</p><p>所有的预处理器命令都是以井号（#）开头。它必须是第一个非空字符，为了增强可读性，预处理器指令应从第一列开始。像我们常用的 <strong>define</strong>，<strong>include</strong> 等都是 C 预处理器的预处理指令。</p><h3 id=预定义宏>预定义宏</h3><p>ANSI C 定义了许多宏。在编程中您可以使用这些宏，但是不能直接修改这些预定义的宏。</p><table><thead><tr><th>宏</th><th>描述</th></tr></thead><tbody><tr><td><code>__DATE__</code></td><td>当前日期，一个以 <code>"MMM DD YYYY"</code> 格式表示的字符常量。</td></tr><tr><td><code>__TIME__</code></td><td>当前时间，一个以 <code>"HH:MM:SS"</code> 格式表示的字符常量。</td></tr><tr><td><code>__FILE__</code></td><td>这会包含当前文件名，一个字符串常量。</td></tr><tr><td><code>__LINE__</code></td><td>这会包含当前行号，一个十进制常量。</td></tr><tr><td><code>__STDC__</code></td><td>当编译器以 ANSI 标准编译时，则定义为 1。</td></tr></tbody></table><h3 id=预处理器运算符>预处理器运算符</h3><table><thead><tr><th>运算符</th><th>作用</th></tr></thead><tbody><tr><td>宏延续运算符（<code>\</code>）</td><td>一个宏通常写在一个单行上。但是如果宏太长，一个单行容纳不下，则使用宏延续运算符（\）。</td></tr><tr><td>字符串常量化运算符（<code>#</code>）</td><td>在宏定义中，当需要把一个宏的参数转换为字符串常量时，则使用字符串常量化运算符（#）。在宏中使用的该运算符有一个特定的参数或参数列表。</td></tr><tr><td>标记粘贴运算符（<code>##</code>）</td><td>宏定义内的标记粘贴运算符（##）会合并两个参数。它允许在宏定义中两个独立的标记被合并为一个标记。</td></tr></tbody></table><h3 id=gcc-的工作>gcc 的工作</h3><p>从 <a href=https://linux.die.net/man/1/gcc target=_blank rel="noopener noreffer">Linux gcc manual</a> 上，我们知道 gcc 编译有这样一个选项：<code>-E</code>：</p><blockquote><p>-E</p><p>Stop after the preprocessing stage; do not run the compiler proper. The output is in the form of preprocessed source code, which is sent to the standard output.</p></blockquote><p>翻译过来就是，加入 <code>-E</code> 选项之后，gcc 这个编译器会在预编译结束时停下来。我们尝试一下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ cat <span class=s>&lt;&lt; _EOF_ &gt; factor.c
</span></span></span><span class=line><span class=cl><span class=s>#include&lt;stdio.h&gt;
</span></span></span><span class=line><span class=cl><span class=s>main(){
</span></span></span><span class=line><span class=cl><span class=s>    int i, n, f;
</span></span></span><span class=line><span class=cl><span class=s>	scanf(&#34;%d&#34;, &amp;n);
</span></span></span><span class=line><span class=cl><span class=s>	i = 2;
</span></span></span><span class=line><span class=cl><span class=s>	f = 1;
</span></span></span><span class=line><span class=cl><span class=s>	while (i &lt;= n)
</span></span></span><span class=line><span class=cl><span class=s>	{
</span></span></span><span class=line><span class=cl><span class=s>		f = f * i;
</span></span></span><span class=line><span class=cl><span class=s>		i = i + 1;
</span></span></span><span class=line><span class=cl><span class=s>	}
</span></span></span><span class=line><span class=cl><span class=s>	printf(&#34;%d&#34;, f);
</span></span></span><span class=line><span class=cl><span class=s>    return 0;
</span></span></span><span class=line><span class=cl><span class=s>}
</span></span></span><span class=line><span class=cl><span class=s>_EOF_</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ gcc -E factor.c -o factor.i
</span></span><span class=line><span class=cl><span class=c1># 因为当 -o 缺省时，预编译结果会输出在标准输出流，因此也可以使用以下命令：</span>
</span></span><span class=line><span class=cl><span class=c1># $ gcc -E factor.c &gt; factor.i</span>
</span></span><span class=line><span class=cl><span class=c1># </span>
</span></span><span class=line><span class=cl><span class=c1># 或者可以使用之前提到的 `cpp` 进行预编译</span>
</span></span><span class=line><span class=cl><span class=c1># $ cpp factor.c &gt; factor.i</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ cat preprecess_factor <span class=p>|</span> less
</span></span></code></pre></td></tr></table></div></div><p>这时，我们就可以看到 <code>include</code> 这一行不见了，因为 <code>#include</code> 是一个 C 预处理器的预编译指令，它被预编译，导入了如下的 <code>stdio</code> 的包：</p><p><img class=lazyload src=/svg/loading.min.svg data-src=../gcc-preprocess1.png data-srcset="../gcc-preprocess1.png, ../gcc-preprocess1.png 1.5x, ../gcc-preprocess1.png 2x" data-sizes=auto alt=../gcc-preprocess1.png title=01></p><p>&mldr;&mldr;</p><p><img class=lazyload src=/svg/loading.min.svg data-src=../gcc-preprocess2.png data-srcset="../gcc-preprocess2.png, ../gcc-preprocess2.png 1.5x, ../gcc-preprocess2.png 2x" data-sizes=auto alt=../gcc-preprocess2.png title=02></p><p><em>PostScript</em>：关于 <code>gcc</code> 的 <code>-o</code> 选项缺省的问题：</p><blockquote><p>If <strong>-o</strong> is not specified, the default is to put an executable file in <em>a.out</em>, the object file for <em>source.suffix</em> in <em>source.o</em>, its assembler file in <em>source.s</em>, a precompiled header file in <em>source.suffix.gch</em>, and all preprocessed C source on standard output.</p></blockquote><h2 id=编译器的工作>编译器的工作</h2><p><strong>编译器</strong>，即 compiler。从<a href=https://zh.wikipedia.org/wiki/%E7%B7%A8%E8%AD%AF%E5%99%A8 target=_blank rel="noopener noreffer">维基百科</a>上的定义，是一种计算机程序，它会将用某种编程语言写成的源代码（原始语言），转换成另一种编程语言（目标语言）。</p><p>在我们研究的范围内，编译器的功能是将 C 语言转化成 汇编语言或机器语言。同理参考 <code>gcc</code> Linux manual：</p><blockquote><p>-S</p><p>Stop after the stage of compilation proper; do not assemble. The output is in the form of an assembler code file for each non-assembler input file specified.</p></blockquote><p>这一个选项会让 <code>gcc</code> 在编译之后停止，不进行下一步汇编操作，而输出一个文件。我们尝试一下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ gcc factor.c -S
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ cat factor.s
</span></span><span class=line><span class=cl>        .file   <span class=s2>&#34;factor.c&#34;</span>
</span></span><span class=line><span class=cl>        .def    __main<span class=p>;</span> .scl    2<span class=p>;</span>      .type   32<span class=p>;</span>     .endef
</span></span><span class=line><span class=cl>        .section .rdata,<span class=s2>&#34;dr&#34;</span>
</span></span><span class=line><span class=cl>.LC0:
</span></span><span class=line><span class=cl>        .ascii <span class=s2>&#34;%d\0&#34;</span>
</span></span><span class=line><span class=cl>        .text
</span></span><span class=line><span class=cl>        .globl  main
</span></span><span class=line><span class=cl>        .def    main<span class=p>;</span>   .scl    2<span class=p>;</span>      .type   32<span class=p>;</span>     .endef
</span></span><span class=line><span class=cl>        .seh_proc       main
</span></span><span class=line><span class=cl>main:
</span></span><span class=line><span class=cl>        pushq   %rbp
</span></span><span class=line><span class=cl>        .seh_pushreg    %rbp
</span></span><span class=line><span class=cl>        movq    %rsp, %rbp
</span></span><span class=line><span class=cl>        .seh_setframe   %rbp, <span class=m>0</span>
</span></span><span class=line><span class=cl>        subq    <span class=nv>$48</span>, %rsp
</span></span><span class=line><span class=cl>        .seh_stackalloc <span class=m>48</span>
</span></span><span class=line><span class=cl>        .seh_endprologue
</span></span><span class=line><span class=cl>        call    __main
</span></span><span class=line><span class=cl>        leaq    -12<span class=o>(</span>%rbp<span class=o>)</span>, %rax
</span></span><span class=line><span class=cl>        movq    %rax, %rdx
</span></span><span class=line><span class=cl>        leaq    .LC0<span class=o>(</span>%rip<span class=o>)</span>, %rcx
</span></span><span class=line><span class=cl>        call    scanf
</span></span><span class=line><span class=cl>        movl    <span class=nv>$2</span>, -4<span class=o>(</span>%rbp<span class=o>)</span>
</span></span><span class=line><span class=cl>        movl    <span class=nv>$1</span>, -8<span class=o>(</span>%rbp<span class=o>)</span>
</span></span><span class=line><span class=cl>        jmp     .L2
</span></span><span class=line><span class=cl>.L3:
</span></span><span class=line><span class=cl>        movl    -8<span class=o>(</span>%rbp<span class=o>)</span>, %eax
</span></span><span class=line><span class=cl>        imull   -4<span class=o>(</span>%rbp<span class=o>)</span>, %eax
</span></span><span class=line><span class=cl>        movl    %eax, -8<span class=o>(</span>%rbp<span class=o>)</span>
</span></span><span class=line><span class=cl>        addl    <span class=nv>$1</span>, -4<span class=o>(</span>%rbp<span class=o>)</span>
</span></span><span class=line><span class=cl>.L2:
</span></span><span class=line><span class=cl>        movl    -12<span class=o>(</span>%rbp<span class=o>)</span>, %eax
</span></span><span class=line><span class=cl>        cmpl    %eax, -4<span class=o>(</span>%rbp<span class=o>)</span>
</span></span><span class=line><span class=cl>        jle     .L3
</span></span><span class=line><span class=cl>        movl    -12<span class=o>(</span>%rbp<span class=o>)</span>, %eax
</span></span><span class=line><span class=cl>        movl    %eax, %edx
</span></span><span class=line><span class=cl>        leaq    .LC0<span class=o>(</span>%rip<span class=o>)</span>, %rcx
</span></span><span class=line><span class=cl>        call    <span class=nb>printf</span>
</span></span><span class=line><span class=cl>        addq    <span class=nv>$48</span>, %rsp
</span></span><span class=line><span class=cl>        popq    %rbp
</span></span><span class=line><span class=cl>        ret
</span></span><span class=line><span class=cl>        .seh_endproc
</span></span><span class=line><span class=cl>        .ident  <span class=s2>&#34;GCC: (GNU) 4.8.3&#34;</span>
</span></span><span class=line><span class=cl>        .def    scanf<span class=p>;</span>  .scl    2<span class=p>;</span>      .type   32<span class=p>;</span>     .endef
</span></span><span class=line><span class=cl>        .def    printf<span class=p>;</span> .scl    2<span class=p>;</span>      .type   32<span class=p>;</span>     .endef
</span></span></code></pre></td></tr></table></div></div><p>我找到<a href=https://stackoverflow.com/questions/1317081/gccs-assembly-output-of-an-empty-program-on-x86-win32 target=_blank rel="noopener noreffer">这个网址</a>，有对 <code>gcc</code> 编译中间汇编代码结果的详细描述。</p><h2 id=汇编器的工作>汇编器的工作</h2><p><strong>汇编器</strong>（Assembler）是将<strong>汇编</strong>语言翻译为机器语言的程序。 一般而言，<strong>汇编</strong>生成的是目标代码，需要经链接<strong>器</strong>（Linker）生成可执行代码才可以执行。</p><blockquote><p>-c</p><p>Compile or assemble the source files, but do not link. The linking stage simply is not done. The ultimate output is in the form of an object file for each source file.</p></blockquote><p>当使用 <code>gcc</code> 的 <code>-c</code> 选项时，会生成一个未链接的目标文件。我们可以尝试一下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ gcc -c factor.c
</span></span><span class=line><span class=cl><span class=c1># 或者可以由我们已经得到的汇编代码使用以下的命令汇编成机器码：</span>
</span></span><span class=line><span class=cl><span class=c1># $ as factor.s -o factor.o</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ ls <span class=p>|</span> grep <span class=se>\\</span>.o
</span></span><span class=line><span class=cl>factor.o
</span></span><span class=line><span class=cl><span class=c1># gcc -c 指令，当 -o 选项缺省时，默认输出文件为 factor.o</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=分析-obj-文件>分析 obj 文件</h3><p>使用该 <code>objdump</code> 指令可以看到 <code>.o</code> 文件的反汇编代码。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ objdump -d factor.o
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>factor.o:     file format pe-x86-64
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Disassembly of section .text:
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=m>0000000000000000</span> &lt;main&gt;:
</span></span><span class=line><span class=cl>   0:   <span class=m>55</span>                      push   %rbp
</span></span><span class=line><span class=cl>   1:   <span class=m>48</span> <span class=m>89</span> e5                mov    %rsp,%rbp
</span></span><span class=line><span class=cl>   4:   <span class=m>48</span> <span class=m>83</span> ec <span class=m>30</span>             sub    <span class=nv>$0</span>x30,%rsp
</span></span><span class=line><span class=cl>   8:   e8 <span class=m>00</span> <span class=m>00</span> <span class=m>00</span> <span class=m>00</span>          callq  d &lt;main+0xd&gt;
</span></span><span class=line><span class=cl>   d:   <span class=m>48</span> 8d <span class=m>45</span> f4             lea    -0xc<span class=o>(</span>%rbp<span class=o>)</span>,%rax
</span></span><span class=line><span class=cl>  11:   <span class=m>48</span> <span class=m>89</span> c2                mov    %rax,%rdx
</span></span><span class=line><span class=cl>  14:   <span class=m>48</span> 8d 0d <span class=m>00</span> <span class=m>00</span> <span class=m>00</span> <span class=m>00</span>    lea    0x0<span class=o>(</span>%rip<span class=o>)</span>,%rcx        <span class=c1># 1b &lt;main+0x1b&gt;</span>
</span></span><span class=line><span class=cl>  1b:   e8 <span class=m>00</span> <span class=m>00</span> <span class=m>00</span> <span class=m>00</span>          callq  <span class=m>20</span> &lt;main+0x20&gt;
</span></span><span class=line><span class=cl>  20:   c7 <span class=m>45</span> <span class=nb>fc</span> <span class=m>02</span> <span class=m>00</span> <span class=m>00</span> <span class=m>00</span>    movl   <span class=nv>$0</span>x2,-0x4<span class=o>(</span>%rbp<span class=o>)</span>
</span></span><span class=line><span class=cl>  27:   c7 <span class=m>45</span> f8 <span class=m>01</span> <span class=m>00</span> <span class=m>00</span> <span class=m>00</span>    movl   <span class=nv>$0</span>x1,-0x8<span class=o>(</span>%rbp<span class=o>)</span>
</span></span><span class=line><span class=cl>  2e:   eb 0e                   jmp    3e &lt;main+0x3e&gt;
</span></span><span class=line><span class=cl>  30:   8b <span class=m>45</span> f8                mov    -0x8<span class=o>(</span>%rbp<span class=o>)</span>,%eax
</span></span><span class=line><span class=cl>  33:   0f af <span class=m>45</span> <span class=nb>fc</span>             imul   -0x4<span class=o>(</span>%rbp<span class=o>)</span>,%eax
</span></span><span class=line><span class=cl>  37:   <span class=m>89</span> <span class=m>45</span> f8                mov    %eax,-0x8<span class=o>(</span>%rbp<span class=o>)</span>
</span></span><span class=line><span class=cl>  3a:   <span class=m>83</span> <span class=m>45</span> <span class=nb>fc</span> <span class=m>01</span>             addl   <span class=nv>$0</span>x1,-0x4<span class=o>(</span>%rbp<span class=o>)</span>
</span></span><span class=line><span class=cl>  3e:   8b <span class=m>45</span> f4                mov    -0xc<span class=o>(</span>%rbp<span class=o>)</span>,%eax
</span></span><span class=line><span class=cl>  41:   <span class=m>39</span> <span class=m>45</span> <span class=nb>fc</span>                cmp    %eax,-0x4<span class=o>(</span>%rbp<span class=o>)</span>
</span></span><span class=line><span class=cl>  44:   7e ea                   jle    <span class=m>30</span> &lt;main+0x30&gt;
</span></span><span class=line><span class=cl>  46:   8b <span class=m>45</span> f4                mov    -0xc<span class=o>(</span>%rbp<span class=o>)</span>,%eax
</span></span><span class=line><span class=cl>  49:   <span class=m>89</span> c2                   mov    %eax,%edx
</span></span><span class=line><span class=cl>  4b:   <span class=m>48</span> 8d 0d <span class=m>00</span> <span class=m>00</span> <span class=m>00</span> <span class=m>00</span>    lea    0x0<span class=o>(</span>%rip<span class=o>)</span>,%rcx        <span class=c1># 52 &lt;main+0x52&gt;</span>
</span></span><span class=line><span class=cl>  52:   e8 <span class=m>00</span> <span class=m>00</span> <span class=m>00</span> <span class=m>00</span>          callq  <span class=m>57</span> &lt;main+0x57&gt;
</span></span><span class=line><span class=cl>  57:   <span class=m>48</span> <span class=m>83</span> c4 <span class=m>30</span>             add    <span class=nv>$0</span>x30,%rsp
</span></span><span class=line><span class=cl>  5b:   5d                      pop    %rbp
</span></span><span class=line><span class=cl>  5c:   c3                      retq
</span></span><span class=line><span class=cl>  5d:   <span class=m>90</span>                      nop
</span></span><span class=line><span class=cl>  5e:   <span class=m>90</span>                      nop
</span></span><span class=line><span class=cl>  5f:   <span class=m>90</span>                      nop
</span></span></code></pre></td></tr></table></div></div><p>使用 <code>nm</code> 指令可以查看 obj 文件中的符号表：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ nm factor.o
</span></span><span class=line><span class=cl><span class=m>0000000000000000</span> b .bss
</span></span><span class=line><span class=cl><span class=m>0000000000000000</span> d .data
</span></span><span class=line><span class=cl><span class=m>0000000000000000</span> p .pdata
</span></span><span class=line><span class=cl><span class=m>0000000000000000</span> r .rdata
</span></span><span class=line><span class=cl><span class=m>0000000000000000</span> r .rdata<span class=nv>$zzz</span>
</span></span><span class=line><span class=cl><span class=m>0000000000000000</span> t .text
</span></span><span class=line><span class=cl><span class=m>0000000000000000</span> r .xdata
</span></span><span class=line><span class=cl>                 U __main
</span></span><span class=line><span class=cl><span class=m>0000000000000000</span> T main
</span></span><span class=line><span class=cl>                 U <span class=nb>printf</span>
</span></span><span class=line><span class=cl>                 U scanf
</span></span><span class=line><span class=cl><span class=c1># 第二列中出现了一些符号，其中：</span>
</span></span><span class=line><span class=cl><span class=c1># `T` 表示该符号已经被定义了，`U` 表示该符号还需要被链接器定义</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=链接器的工作>链接器的工作</h2><p>链接器会链接目标代码和库生成一个可执行文件 <code>factor.exe</code>。其中 <code>ld</code> 是 <code>GNU</code> 的链接器。</p><h3 id=gnu-ar>GNU <code>ar</code></h3><p>GUN <code>ar</code> program <a href=https://linux.die.net/man/1/ar target=_blank rel="noopener noreffer">manual page</a>.</p><p>What does <code>ar</code> do?</p><ul><li>创建，修改和提取存档（<strong>archives</strong>）</li></ul><p>What is <code>archives</code>?</p><ul><li>存档是一个单独的文件，其中包含一个结构中的其他文件集合，可以检索原始的单个文件（这些单个文件被称为存档的成员，member of archives）</li></ul><p>以下为一个是用 <code>ar</code> 创建静态链接库的实例：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ gcc -c header.cpp -o header
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ ar rvs header.lib header.o
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ gcc main.cpp header.lib
</span></span></code></pre></td></tr></table></div></div><h3 id=gnu-makefile>GNU <code>Makefile</code></h3><p><code>Makefile</code> 是一个包含一系列格式化命令的文件，使用 <code>make</code> 命令，GUN 会自动找到 <code>Makefile</code> 这个文件，并且执行里面描述的命令参数。</p><p><code>Makefile</code> 主要由以下的三个部分组成：</p><ul><li>&ldquo;target&rdquo;：通常是指可执行文件或对象文件的文件名。</li><li>&ldquo;prerequisites&rdquo;：一个文件列表，其中列举出了创建 &ldquo;target&rdquo; 文件需要的依赖文件。</li><li>&ldquo;command&rdquo;：创建文件时，执行的一系列编译或链接命令。</li></ul><p>基于这三个简单规则的 <code>Makefile</code> 文件可以写成如下的形式：（其中，clean 可以用来清除损坏的文件等，可以在终端中输入命令 <code>make clean</code> 进行调用）</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-makefile data-lang=makefile><span class=line><span class=cl><span class=nf>textr </span><span class=o>:</span> <span class=n>main</span>.<span class=n>o</span> <span class=n>blurb</span>.<span class=n>o</span> <span class=n>database</span>.<span class=n>o</span>
</span></span><span class=line><span class=cl>	g++ -o textr main.o blurb.o database.o
</span></span><span class=line><span class=cl><span class=nf>main.o </span><span class=o>:</span> <span class=n>main</span>.<span class=n>cpp</span>
</span></span><span class=line><span class=cl>	g++ -c main.cpp
</span></span><span class=line><span class=cl><span class=nf>blurb.o </span><span class=o>:</span> <span class=n>blurb</span>.<span class=n>cpp</span> <span class=n>blurb</span>.<span class=n>h</span>
</span></span><span class=line><span class=cl>	g++ -c blurb.cpp
</span></span><span class=line><span class=cl><span class=nf>database.o </span><span class=o>:</span> <span class=n>database</span>.<span class=n>cpp</span> <span class=n>database</span>.<span class=n>h</span>
</span></span><span class=line><span class=cl>	g++ -c database.cpp
</span></span><span class=line><span class=cl><span class=nf>clean</span><span class=o>:</span>
</span></span><span class=line><span class=cl>	rm -f core textr main.o blurb.o database.o
</span></span></code></pre></td></tr></table></div></div><p>我们可以在 <code>Makefile</code> 中集成定义自己的变量，并且省略一些默认的参数：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-makefile data-lang=makefile><span class=line><span class=cl><span class=c>#Makefile for “textr” C++ application
</span></span></span><span class=line><span class=cl><span class=c></span><span class=nv>PROG</span> <span class=o>=</span> textr
</span></span><span class=line><span class=cl><span class=nv>CC</span> <span class=o>=</span> g++
</span></span><span class=line><span class=cl><span class=nv>CPPFLAGS</span> <span class=o>=</span> -g –Wall –I/usr/class/cs193d/include
</span></span><span class=line><span class=cl><span class=nv>LDFLAGS</span> <span class=o>=</span> -L/usr/class/cs193/lib –lCoolFns
</span></span><span class=line><span class=cl><span class=nv>OBJS</span> <span class=o>=</span> main.o blurb.o database.o
</span></span><span class=line><span class=cl><span class=nf>$(PROG) </span><span class=o>:</span> <span class=k>$(</span><span class=nv>OBJS</span><span class=k>)</span>
</span></span><span class=line><span class=cl>	<span class=k>$(</span>CC<span class=k>)</span> <span class=k>$(</span>LDFLAGS<span class=k>)</span> -o <span class=k>$(</span>PROG<span class=k>)</span> <span class=k>$(</span>OBJS<span class=k>)</span>
</span></span><span class=line><span class=cl><span class=nf>main.o </span><span class=o>:</span>
</span></span><span class=line><span class=cl>	<span class=k>$(</span>CC<span class=k>)</span> <span class=k>$(</span>CPPFLAGS<span class=k>)</span> -c main.cpp
</span></span><span class=line><span class=cl><span class=nf>blurb.o </span><span class=o>:</span> <span class=n>blurb</span>.<span class=n>h</span>
</span></span><span class=line><span class=cl>	<span class=k>$(</span>CC<span class=k>)</span> <span class=k>$(</span>CPPFLAGS<span class=k>)</span> -c blurb.cpp
</span></span><span class=line><span class=cl><span class=nf>database.o </span><span class=o>:</span> <span class=n>database</span>.<span class=n>h</span>
</span></span><span class=line><span class=cl>	<span class=k>$(</span>CC<span class=k>)</span> <span class=k>$(</span>CPPFLAGS<span class=k>)</span> -c database.cpp
</span></span><span class=line><span class=cl><span class=nf>clean</span><span class=o>:</span>
</span></span><span class=line><span class=cl>	rm -f core <span class=k>$(</span>PROG<span class=k>)</span> <span class=k>$(</span>OBJS<span class=k>)</span>
</span></span></code></pre></td></tr></table></div></div></div><div id=comments><div id=valine class=comment></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://valine.js.org/>Valine</a>.</noscript></div></div></div></main><footer class=footer><div class=footer-container><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2022</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://shesl-meow.github.io target=_blank>佘崧林</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title=回到顶部><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title=查看评论><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><link rel=stylesheet href=/lib/valine/valine.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/contrib/copy-tex.min.css><script type=text/javascript src=https://cdn.jsdelivr.net/npm/valine@1.4.18/dist/Valine.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/algoliasearch@4.13.0/dist/algoliasearch-lite.umd.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.1/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/contrib/auto-render.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/contrib/copy-tex.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/contrib/mhchem.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"复制到剪贴板",maxShownLines:50},comment:{valine:{appId:"zDVJohJIQbD6f3W267xtaYRC-gzGzoHsz",appKey:"ewsfU9ocNOeuvt0MzONe6yKx",avatar:"mp",el:"#valine",emojiCDN:"https://cdn.jsdelivr.net/npm/emoji-datasource-google@14.0.0/img/google/64/",emojiMaps:{100:"1f4af.png",alien:"1f47d.png",anger:"1f4a2.png",angry:"1f620.png",anguished:"1f627.png",astonished:"1f632.png",black_heart:"1f5a4.png",blue_heart:"1f499.png",blush:"1f60a.png",bomb:"1f4a3.png",boom:"1f4a5.png",broken_heart:"1f494.png",brown_heart:"1f90e.png",clown_face:"1f921.png",cold_face:"1f976.png",cold_sweat:"1f630.png",confounded:"1f616.png",confused:"1f615.png",cry:"1f622.png",crying_cat_face:"1f63f.png",cupid:"1f498.png",dash:"1f4a8.png",disappointed:"1f61e.png",disappointed_relieved:"1f625.png",dizzy:"1f4ab.png",dizzy_face:"1f635.png",drooling_face:"1f924.png",exploding_head:"1f92f.png",expressionless:"1f611.png",face_vomiting:"1f92e.png",face_with_cowboy_hat:"1f920.png",face_with_hand_over_mouth:"1f92d.png",face_with_head_bandage:"1f915.png",face_with_monocle:"1f9d0.png",face_with_raised_eyebrow:"1f928.png",face_with_rolling_eyes:"1f644.png",face_with_symbols_on_mouth:"1f92c.png",face_with_thermometer:"1f912.png",fearful:"1f628.png",flushed:"1f633.png",frowning:"1f626.png",ghost:"1f47b.png",gift_heart:"1f49d.png",green_heart:"1f49a.png",grimacing:"1f62c.png",grin:"1f601.png",grinning:"1f600.png",hankey:"1f4a9.png",hear_no_evil:"1f649.png",heart:"2764-fe0f.png",heart_decoration:"1f49f.png",heart_eyes:"1f60d.png",heart_eyes_cat:"1f63b.png",heartbeat:"1f493.png",heartpulse:"1f497.png",heavy_heart_exclamation_mark_ornament:"2763-fe0f.png",hole:"1f573-fe0f.png",hot_face:"1f975.png",hugging_face:"1f917.png",hushed:"1f62f.png",imp:"1f47f.png",innocent:"1f607.png",japanese_goblin:"1f47a.png",japanese_ogre:"1f479.png",joy:"1f602.png",joy_cat:"1f639.png",kiss:"1f48b.png",kissing:"1f617.png",kissing_cat:"1f63d.png",kissing_closed_eyes:"1f61a.png",kissing_heart:"1f618.png",kissing_smiling_eyes:"1f619.png",laughing:"1f606.png",left_speech_bubble:"1f5e8-fe0f.png",love_letter:"1f48c.png",lying_face:"1f925.png",mask:"1f637.png",money_mouth_face:"1f911.png",nauseated_face:"1f922.png",nerd_face:"1f913.png",neutral_face:"1f610.png",no_mouth:"1f636.png",open_mouth:"1f62e.png",orange_heart:"1f9e1.png",partying_face:"1f973.png",pensive:"1f614.png",persevere:"1f623.png",pleading_face:"1f97a.png",pouting_cat:"1f63e.png",purple_heart:"1f49c.png",rage:"1f621.png",relaxed:"263a-fe0f.png",relieved:"1f60c.png",revolving_hearts:"1f49e.png",right_anger_bubble:"1f5ef-fe0f.png",robot_face:"1f916.png",rolling_on_the_floor_laughing:"1f923.png",scream:"1f631.png",scream_cat:"1f640.png",see_no_evil:"1f648.png",shushing_face:"1f92b.png",skull:"1f480.png",skull_and_crossbones:"2620-fe0f.png",sleeping:"1f634.png",sleepy:"1f62a.png",slightly_frowning_face:"1f641.png",slightly_smiling_face:"1f642.png",smile:"1f604.png",smile_cat:"1f638.png",smiley:"1f603.png",smiley_cat:"1f63a.png",smiling_face_with_3_hearts:"1f970.png",smiling_imp:"1f608.png",smirk:"1f60f.png",smirk_cat:"1f63c.png",sneezing_face:"1f927.png",sob:"1f62d.png",space_invader:"1f47e.png",sparkling_heart:"1f496.png",speak_no_evil:"1f64a.png",speech_balloon:"1f4ac.png","star-struck":"1f929.png",stuck_out_tongue:"1f61b.png",stuck_out_tongue_closed_eyes:"1f61d.png",stuck_out_tongue_winking_eye:"1f61c.png",sunglasses:"1f60e.png",sweat:"1f613.png",sweat_drops:"1f4a6.png",sweat_smile:"1f605.png",thinking_face:"1f914.png",thought_balloon:"1f4ad.png",tired_face:"1f62b.png",triumph:"1f624.png",two_hearts:"1f495.png",unamused:"1f612.png",upside_down_face:"1f643.png",weary:"1f629.png",white_frowning_face:"2639-fe0f.png",white_heart:"1f90d.png",wink:"1f609.png",woozy_face:"1f974.png",worried:"1f61f.png",yawning_face:"1f971.png",yellow_heart:"1f49b.png",yum:"1f60b.png",zany_face:"1f92a.png",zipper_mouth_face:"1f910.png",zzz:"1f4a4.png"},enableQQ:!1,highlight:!0,lang:"zh-CN",pageSize:10,placeholder:"你的评论 ...",recordIP:!0,serverURLs:"https://zdvjohji.lc-cn-n1-shared.com",visitor:!0}},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{algoliaAppID:"",algoliaIndex:"",algoliaSearchKey:"",highlightTag:"em",maxResultLength:10,noResultsFound:"没有找到结果",snippetLength:30,type:"algolia"}}</script><script type=text/javascript src=/js/theme.min.c1d5acc03abc8af9ee0a42aa4e942566a338a3e29d21b6c9f11536101f6914ad.js integrity="sha256-wdWswDq8ivnuCkKqTpQlZqM4o+KdIbbJ8RU2EB9pFK0="></script></body></html>